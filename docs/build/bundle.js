var app=function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t){var e=t.default;if("function"==typeof e){var n=function(){return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,r.get?r:{enumerable:!0,get:function(){return t[e]}})})),n}var n={exports:{}};!function(t){const e=Symbol.for("piconeuro:Error");t.exports={ERROR:e,get:function(t){let e=null;return t((t=>{e=t}))(),e},next:async function(t,e=1,n=!1){let o=null;n&&(t=r(t,n));for await(const n of c(t,e+1))o=n;return o},until:async function(t,e,n=-1){let r,o;const i=new Promise(((t,e)=>{r=t,o=e}));let s=null;n>0&&(s=setTimeout((()=>{o(new Error("until($n) timed out"))}),n));const a=t((t=>{e(t)&&(s&&clearTimeout(s),r(t))}));return i.finally(a),i},write:a,writable:a,notEqual:i,notEqualDeep:s,memo:function(t){let e;const n=new Set;let r=null;return function(i){return n.add(i),r?i(e):r=t(o),()=>{n.delete(i),n.length||(r&&r(),r=null)}};function o(t){e=t;for(const e of n)e(t)}},mute:function(t,n){if("function"!=typeof n)throw new Error("expected a mutation function");return function(r){let o=Promise.resolve(0);return t((t=>{const i=n(t);i&&"function"==typeof i.then&&"function"==typeof i.catch?o=o.then((()=>i.then(r).catch((t=>{console.error("n:mute() failed: ",t),r(e,t)})))):r(i)}))}},init:function(t,e){return function(n){let r=!1,i=function(){},s=!1;return"function"==typeof e&&(i=e((t=>{s=!0,r||n(t)}))),s||n(o(t)),()=>{r=!0,i()}}},when:function(t){if(!t||"function"!=typeof t.then)throw new Error("Expected a Promise");return function(n){return t.then(n).catch((t=>{console.error("n:when() failed: ",t),n(e,t)})),function(){}}},combine:function(...t){if(!Array.isArray(t)||!t.length)throw new Error("A list of neurons is required");const e=[];if(1===t.length&&"function"!=typeof t[0]){const n=t[0];t=[];for(const r in n)t.push(n[r]),e.push(r)}return function(n){if("function"!=typeof n)throw new Error("Derivation function required");const r=[],o=[];let i=t.length;const s=[];for(let e=0;e<t.length;e++)s.push(t[e](a.bind(null,e)));return()=>{for(const t of s)t()};function a(t,s){r[t]||(r[t]=!0,i--),o[t]=s,i||(e.length?n(o.reduce(((t,n,r)=>(t[e[r]]=n,t)),{})):n(o))}}},isSync:async function(t,e=100){let n=!1,r=!1,o=()=>{n=!0};t((()=>o()))();let i=null;const s=new Promise((t=>{i=t}));o=()=>{r=!0,i()};let a=setTimeout((()=>{a=null,i()}),e);if(await s,a)clearTimeout(a);else if(!n&&!r)throw new Error("Neuron did not fire during grace period");return n&&!r},_isSync:function(t){let e=!1,n=()=>{e=!0};return t((()=>n()))(),n=()=>{throw new Error("NeuronNotSync, subscription invoked after unsubscribe()")},e},gate:function(t,e=!1){const n="function"==typeof e?e:e?i:s;return function(e){let r,i=!0;return t((t=>{const s=n(t,r);(i||s)&&(i=!1,r=o(t),e(t))}))}},settle:function(t,e=10,n=!1){return function(r){let o,i,s=!0;const a=t((t=>{o=t,n&&s&&(s=!1,r(o)),i&&clearTimeout(i),i=setTimeout((()=>{i=null,r(o)}),e)}));return()=>{a&&a(),i&&clearTimeout(i)}}},iter:c,nfo:r};let n=0;function r(e,r){if(!t.exports.V)return e;const o=n++;r||(r=`NFO${a(o)}`);const i=console.info.bind(null,r);let s=0;return t=>{let n=0;const r=i.bind(null,`SYN${a(s++)}`);r(`>>${a(n)}>> connected`);const o=e((e=>{r(`!!${a(n++)}!! `,e),t(e)}));return()=>{o(),r(`<<${a(n)}<< disconnected`)}};function a(t,e=2){return(t+"").padStart(e,"0")}}function o(t){return Array.isArray(t)?[...t]:"object"==typeof t&&null!==t?{...t}:t}function i(t,e){return Array.isArray(t)&&Array.isArray(e)?e.length!==t.length||!!t.find(((t,n)=>e[n]!==t)):"object"==typeof t&&"object"==typeof e&&null!==t&&null!==e?(n=Object.keys(t),r=Object.keys(e).length,!(n.length===r&&!n.find((n=>t[n]!==e[n])))):t!==e;var n,r}function s(t,e){return Array.isArray(t)&&Array.isArray(e)?e.length!==t.length||!!t.find(((t,n)=>s(e[n],t))):"object"==typeof t&&"object"==typeof e&&null!==t&&null!==e?(n=Object.keys(t),r=Object.keys(e).length,!(n.length===r&&!n.find((n=>s(t[n],e[n]))))):t!==e;var n,r}function a(t){const e=new Set;return[function(n){return e.add(n),n(t),()=>{e.delete(n)}},function(n){if(i(t,n)){t=n;for(const t of e)t(n)}return n}]}async function*c(t,e=5){const n=[],r=[];s();let o=0;const i=t((t=>{(-1===e||++o<e)&&s();const r=n.shift();r&&r(t)}));for(;r.length;){const t=r.shift(),e=await t;yield e}function s(){let t=null;const e=new Promise((e=>{t=e}));n.push(t),r.push(e)}i()}t.exports.V=1}(n);for(var r={},o={byteLength:function(t){var e=h(t),n=e[0],r=e[1];return 3*(n+r)/4-r},toByteArray:function(t){var e,n,r=h(t),o=r[0],i=r[1],c=new a(function(t,e,n){return 3*(e+n)/4-n}(0,o,i)),u=0,l=i>0?o-4:o;for(n=0;n<l;n+=4)e=s[t.charCodeAt(n)]<<18|s[t.charCodeAt(n+1)]<<12|s[t.charCodeAt(n+2)]<<6|s[t.charCodeAt(n+3)],c[u++]=e>>16&255,c[u++]=e>>8&255,c[u++]=255&e;2===i&&(e=s[t.charCodeAt(n)]<<2|s[t.charCodeAt(n+1)]>>4,c[u++]=255&e);1===i&&(e=s[t.charCodeAt(n)]<<10|s[t.charCodeAt(n+1)]<<4|s[t.charCodeAt(n+2)]>>2,c[u++]=e>>8&255,c[u++]=255&e);return c},fromByteArray:function(t){for(var e,n=t.length,r=n%3,o=[],s=16383,a=0,c=n-r;a<c;a+=s)o.push(f(t,a,a+s>c?c:a+s));1===r?(e=t[n-1],o.push(i[e>>2]+i[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],o.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"="));return o.join("")}},i=[],s=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,l=c.length;u<l;++u)i[u]=c[u],s[c.charCodeAt(u)]=u;function h(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function f(t,e,n){for(var r,o,s=[],a=e;a<n;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(i[(o=r)>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return s.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63;var g={
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
read:function(t,e,n,r,o){var i,s,a=8*o-r-1,c=(1<<a)-1,u=c>>1,l=-7,h=n?o-1:0,f=n?-1:1,g=t[e+h];for(h+=f,i=g&(1<<-l)-1,g>>=-l,l+=a;l>0;i=256*i+t[e+h],h+=f,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=r;l>0;s=256*s+t[e+h],h+=f,l-=8);if(0===i)i=1-u;else{if(i===c)return s?NaN:1/0*(g?-1:1);s+=Math.pow(2,r),i-=u}return(g?-1:1)*s*Math.pow(2,i-r)},write:function(t,e,n,r,o,i){var s,a,c,u=8*i-o-1,l=(1<<u)-1,h=l>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:i-1,A=r?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),(e+=s+h>=1?f/c:f*Math.pow(2,1-h))*c>=2&&(s++,c/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(e*c-1)*Math.pow(2,o),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,o),s=0));o>=8;t[n+g]=255&a,g+=A,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;t[n+g]=255&s,g+=A,s/=256,u-=8);t[n+g-A]|=128*d}};
/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <https://feross.org>
	 * @license  MIT
	 */
!function(t){const e=o,n=g,r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=function(t){+t!=t&&(t=0);return a.alloc(+t)},t.INSPECT_MAX_BYTES=50;const i=2147483647;function s(t){if(t>i)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,a.prototype),e}function a(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return l(t)}return c(t,e,n)}function c(t,e,n){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!a.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|d(t,e);let r=s(n);const o=r.write(t,e);o!==n&&(r=r.slice(0,o));return r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(z(t,Uint8Array)){const e=new Uint8Array(t);return f(e.buffer,e.byteOffset,e.byteLength)}return h(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(z(t,ArrayBuffer)||t&&z(t.buffer,ArrayBuffer))return f(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(z(t,SharedArrayBuffer)||t&&z(t.buffer,SharedArrayBuffer)))return f(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return a.from(r,e,n);const o=function(t){if(a.isBuffer(t)){const e=0|A(t.length),n=s(e);return 0===n.length||t.copy(n,0,0,e),n}if(void 0!==t.length)return"number"!=typeof t.length||J(t.length)?s(0):h(t);if("Buffer"===t.type&&Array.isArray(t.data))return h(t.data)}(t);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return a.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function l(t){return u(t),s(t<0?0:0|A(t))}function h(t){const e=t.length<0?0:0|A(t.length),n=s(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function f(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,a.prototype),r}function A(t){if(t>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|t}function d(t,e){if(a.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||z(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let o=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(t).length;default:if(o)return r?-1:V(t).length;e=(""+e).toLowerCase(),o=!0}}function p(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return Q(this,e,n);case"utf8":case"utf-8":return _(this,e,n);case"ascii":return S(this,e,n);case"latin1":case"binary":return k(this,e,n);case"base64":return B(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function y(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function I(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),J(n=+n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=a.from(e,r)),a.isBuffer(e))return 0===e.length?-1:m(t,e,n,r,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,r,o){let i,s=1,a=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,c/=2,n/=2}function u(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(o){let r=-1;for(i=n;i<a;i++)if(u(t,i)===u(e,-1===r?0:i-r)){if(-1===r&&(r=i),i-r+1===c)return r*s}else-1!==r&&(i-=i-r),r=-1}else for(n+c>a&&(n=a-c),i=n;i>=0;i--){let n=!0;for(let r=0;r<c;r++)if(u(t,i+r)!==u(e,r)){n=!1;break}if(n)return i}return-1}function E(t,e,n,r){n=Number(n)||0;const o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;const i=e.length;let s;for(r>i/2&&(r=i/2),s=0;s<r;++s){const r=parseInt(e.substr(2*s,2),16);if(J(r))return s;t[n+s]=r}return s}function w(t,e,n,r){return q(V(e,t.length-n),t,n,r)}function b(t,e,n,r){return q(function(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function C(t,e,n,r){return q(G(e),t,n,r)}function v(t,e,n,r){return q(function(t,e){let n,r,o;const i=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function B(t,n,r){return 0===n&&r===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(n,r))}function _(t,e,n){n=Math.min(t.length,n);const r=[];let o=e;for(;o<n;){const e=t[o];let i=null,s=e>239?4:e>223?3:e>191?2:1;if(o+s<=n){let n,r,a,c;switch(s){case 1:e<128&&(i=e);break;case 2:n=t[o+1],128==(192&n)&&(c=(31&e)<<6|63&n,c>127&&(i=c));break;case 3:n=t[o+1],r=t[o+2],128==(192&n)&&128==(192&r)&&(c=(15&e)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(i=c));break;case 4:n=t[o+1],r=t[o+2],a=t[o+3],128==(192&n)&&128==(192&r)&&128==(192&a)&&(c=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&a,c>65535&&c<1114112&&(i=c))}}null===i?(i=65533,s=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),o+=s}return function(t){const e=t.length;if(e<=x)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=x));return n}(r)}t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(t,e,n){return c(t,e,n)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(t,e,n){return function(t,e,n){return u(t),t<=0?s(t):void 0!==e?"string"==typeof n?s(t).fill(e,n):s(t).fill(e):s(t)}(t,e,n)},a.allocUnsafe=function(t){return l(t)},a.allocUnsafeSlow=function(t){return l(t)},a.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==a.prototype},a.compare=function(t,e){if(z(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),z(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(t)||!a.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const r=a.allocUnsafe(e);let o=0;for(n=0;n<t.length;++n){let e=t[n];if(z(e,Uint8Array))o+e.length>r.length?(a.isBuffer(e)||(e=a.from(e)),e.copy(r,o)):Uint8Array.prototype.set.call(r,e,o);else{if(!a.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,o)}o+=e.length}return r},a.byteLength=d,a.prototype._isBuffer=!0,a.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)y(this,e,e+1);return this},a.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},a.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},a.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?_(this,0,t):p.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(t,e,n,r,o){if(z(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;let i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0);const c=Math.min(i,s),u=this.slice(r,o),l=t.slice(e,n);for(let t=0;t<c;++t)if(u[t]!==l[t]){i=u[t],s=l[t];break}return i<s?-1:s<i?1:0},a.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},a.prototype.indexOf=function(t,e,n){return I(this,t,e,n,!0)},a.prototype.lastIndexOf=function(t,e,n){return I(this,t,e,n,!1)},a.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let i=!1;for(;;)switch(r){case"hex":return E(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":case"latin1":case"binary":return b(this,t,e,n);case"base64":return C(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const x=4096;function S(t,e,n){let r="";n=Math.min(t.length,n);for(let o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function k(t,e,n){let r="";n=Math.min(t.length,n);for(let o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function Q(t,e,n){const r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let o="";for(let r=e;r<n;++r)o+=W[t[r]];return o}function M(t,e,n){const r=t.slice(e,n);let o="";for(let t=0;t<r.length-1;t+=2)o+=String.fromCharCode(r[t]+256*r[t+1]);return o}function D(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,n,r,o,i){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function T(t,e,n,r,o){K(e,r,o,t,n,7);let i=Number(e&BigInt(4294967295));t[n++]=i,i>>=8,t[n++]=i,i>>=8,t[n++]=i,i>>=8,t[n++]=i;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,n}function $(t,e,n,r,o){K(e,r,o,t,n,7);let i=Number(e&BigInt(4294967295));t[n+7]=i,i>>=8,t[n+6]=i,i>>=8,t[n+5]=i,i>>=8,t[n+4]=i;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=s,s>>=8,t[n+2]=s,s>>=8,t[n+1]=s,s>>=8,t[n]=s,n+8}function U(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function O(t,e,r,o,i){return e=+e,r>>>=0,i||U(t,0,r,4),n.write(t,e,r,o,23,4),r+4}function F(t,e,r,o,i){return e=+e,r>>>=0,i||U(t,0,r,8),n.write(t,e,r,o,52,8),r+8}a.prototype.slice=function(t,e){const n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,a.prototype),r},a.prototype.readUintLE=a.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||D(t,e,this.length);let r=this[t],o=1,i=0;for(;++i<e&&(o*=256);)r+=this[t+i]*o;return r},a.prototype.readUintBE=a.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||D(t,e,this.length);let r=this[t+--e],o=1;for(;e>0&&(o*=256);)r+=this[t+--e]*o;return r},a.prototype.readUint8=a.prototype.readUInt8=function(t,e){return t>>>=0,e||D(t,1,this.length),this[t]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(t,e){return t>>>=0,e||D(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(t,e){return t>>>=0,e||D(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(t,e){return t>>>=0,e||D(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(t,e){return t>>>=0,e||D(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readBigUInt64LE=X((function(t){R(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||j(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,o=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(r)+(BigInt(o)<<BigInt(32))})),a.prototype.readBigUInt64BE=X((function(t){R(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||j(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],o=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(o)})),a.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||D(t,e,this.length);let r=this[t],o=1,i=0;for(;++i<e&&(o*=256);)r+=this[t+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},a.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||D(t,e,this.length);let r=e,o=1,i=this[t+--r];for(;r>0&&(o*=256);)i+=this[t+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},a.prototype.readInt8=function(t,e){return t>>>=0,e||D(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},a.prototype.readInt16LE=function(t,e){t>>>=0,e||D(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(t,e){t>>>=0,e||D(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(t,e){return t>>>=0,e||D(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return t>>>=0,e||D(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readBigInt64LE=X((function(t){R(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||j(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),a.prototype.readBigInt64BE=X((function(t){R(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||j(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)})),a.prototype.readFloatLE=function(t,e){return t>>>=0,e||D(t,4,this.length),n.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return t>>>=0,e||D(t,4,this.length),n.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return t>>>=0,e||D(t,8,this.length),n.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return t>>>=0,e||D(t,8,this.length),n.read(this,t,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){L(this,t,e,n,Math.pow(2,8*n)-1,0)}let o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){L(this,t,e,n,Math.pow(2,8*n)-1,0)}let o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},a.prototype.writeUint8=a.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,1,255,0),this[e]=255&t,e+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},a.prototype.writeBigUInt64LE=X((function(t,e=0){return T(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),a.prototype.writeBigUInt64BE=X((function(t,e=0){return $(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),a.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);L(this,t,e,n,r-1,-r)}let o=0,i=1,s=0;for(this[e]=255&t;++o<n&&(i*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/i>>0)-s&255;return e+n},a.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);L(this,t,e,n,r-1,-r)}let o=n-1,i=1,s=0;for(this[e+o]=255&t;--o>=0&&(i*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/i>>0)-s&255;return e+n},a.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},a.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},a.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},a.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},a.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},a.prototype.writeBigInt64LE=X((function(t,e=0){return T(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),a.prototype.writeBigInt64BE=X((function(t,e=0){return $(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),a.prototype.writeFloatLE=function(t,e,n){return O(this,t,e,!0,n)},a.prototype.writeFloatBE=function(t,e,n){return O(this,t,e,!1,n)},a.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},a.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},a.prototype.copy=function(t,e,n,r){if(!a.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);const o=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),o},a.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{const i=a.isBuffer(t)?t:a.from(t,r),s=i.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=i[o%s]}return this};const N={};function P(t,e,n){N[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function Y(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function K(t,e,n,r,o,i){if(t>n||t<e){const r="bigint"==typeof e?"n":"";let o;throw o=i>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(i+1)}${r}`:`>= -(2${r} ** ${8*(i+1)-1}${r}) and < 2 ** ${8*(i+1)-1}${r}`:`>= ${e}${r} and <= ${n}${r}`,new N.ERR_OUT_OF_RANGE("value",o,t)}!function(t,e,n){R(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||j(e,t.length-(n+1))}(r,o,i)}function R(t,e){if("number"!=typeof t)throw new N.ERR_INVALID_ARG_TYPE(e,"number",t)}function j(t,e,n){if(Math.floor(t)!==t)throw R(t,n),new N.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new N.ERR_BUFFER_OUT_OF_BOUNDS;throw new N.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}P("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),P("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),P("ERR_OUT_OF_RANGE",(function(t,e,n){let r=`The value of "${t}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>2**32?o=Y(String(n)):"bigint"==typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=Y(o)),o+="n"),r+=` It must be ${e}. Received ${o}`,r}),RangeError);const H=/[^+/0-9A-Za-z-_]/g;function V(t,e){let n;e=e||1/0;const r=t.length;let o=null;const i=[];for(let s=0;s<r;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function G(t){return e.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function q(t,e,n,r){let o;for(o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}function z(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function J(t){return t!=t}const W=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let o=0;o<16;++o)e[r+o]=t[n]+t[o]}return e}();function X(t){return"undefined"==typeof BigInt?Z:t}function Z(){throw new Error("BigInt not supported")}}(r);var A={},d={},p={supports:function(...t){const e=t.reduce(((t,e)=>Object.assign(t,e)),{});return Object.assign(e,{snapshots:e.snapshots||!1,permanence:e.permanence||!1,seek:e.seek||!1,clear:e.clear||!1,getMany:e.getMany||!1,keyIterator:e.keyIterator||!1,valueIterator:e.valueIterator||!1,iteratorNextv:e.iteratorNextv||!1,iteratorAll:e.iteratorAll||!1,status:e.status||!1,createIfMissing:e.createIfMissing||!1,errorIfExists:e.errorIfExists||!1,deferredOpen:e.deferredOpen||!1,promises:e.promises||!1,streams:e.streams||!1,encodings:Object.assign({},e.encodings),events:Object.assign({},e.events),additionalMethods:Object.assign({},e.additionalMethods)})}},y={},I=class extends Error{constructor(t,e){super(t||""),"object"==typeof e&&null!==e&&(e.code&&(this.code=String(e.code)),e.expected&&(this.expected=!0),e.transient&&(this.transient=!0),e.cause&&(this.cause=e.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},m={};let E=null;var w=function(){return null===E&&(E={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),E},b={},C={};const v=I,B=new Set(["buffer","view","utf8"]);C.Encoding=class{constructor(t){if(this.encode=t.encode||this.encode,this.decode=t.decode||this.decode,this.name=t.name||this.name,this.format=t.format||this.format,"function"!=typeof this.encode)throw new TypeError("The 'encode' property must be a function");if("function"!=typeof this.decode)throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),"string"!=typeof this.name||""===this.name)throw new TypeError("The 'name' property must be a string");if("string"!=typeof this.format||!B.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");t.createViewTranscoder&&(this.createViewTranscoder=t.createViewTranscoder),t.createBufferTranscoder&&(this.createBufferTranscoder=t.createBufferTranscoder),t.createUTF8Transcoder&&(this.createUTF8Transcoder=t.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new v(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new v(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new v(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};const{Buffer:_}=r||{},{Encoding:x}=C,S=w;class k extends x{constructor(t){super({...t,format:"buffer"})}createViewTranscoder(){return new Q({encode:this.encode,decode:t=>this.decode(_.from(t.buffer,t.byteOffset,t.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}}class Q extends x{constructor(t){super({...t,format:"view"})}createBufferTranscoder(){return new k({encode:t=>{const e=this.encode(t);return _.from(e.buffer,e.byteOffset,e.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}}b.BufferFormat=k,b.ViewFormat=Q,b.UTF8Format=class extends x{constructor(t){super({...t,format:"utf8"})}createBufferTranscoder(){return new k({encode:t=>_.from(this.encode(t),"utf8"),decode:t=>this.decode(t.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:t,textDecoder:e}=S();return new Q({encode:e=>t.encode(this.encode(e)),decode:t=>this.decode(e.decode(t)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};const{Buffer:M}=r||{Buffer:{isBuffer:()=>!1}},{textEncoder:D,textDecoder:L}=w(),{BufferFormat:T,ViewFormat:$,UTF8Format:U}=b,O=t=>t;m.utf8=new U({encode:function(t){return M.isBuffer(t)?t.toString("utf8"):ArrayBuffer.isView(t)?L.decode(t):String(t)},decode:O,name:"utf8",createViewTranscoder(){return new $({encode:function(t){return ArrayBuffer.isView(t)?t:D.encode(t)},decode:function(t){return L.decode(t)},name:`${this.name}+view`})},createBufferTranscoder(){return new T({encode:function(t){return M.isBuffer(t)?t:ArrayBuffer.isView(t)?M.from(t.buffer,t.byteOffset,t.byteLength):M.from(String(t),"utf8")},decode:function(t){return t.toString("utf8")},name:`${this.name}+buffer`})}}),m.json=new U({encode:JSON.stringify,decode:JSON.parse,name:"json"}),m.buffer=new T({encode:function(t){return M.isBuffer(t)?t:ArrayBuffer.isView(t)?M.from(t.buffer,t.byteOffset,t.byteLength):M.from(String(t),"utf8")},decode:O,name:"buffer",createViewTranscoder(){return new $({encode:function(t){return ArrayBuffer.isView(t)?t:M.from(String(t),"utf8")},decode:function(t){return M.from(t.buffer,t.byteOffset,t.byteLength)},name:`${this.name}+view`})}}),m.view=new $({encode:function(t){return ArrayBuffer.isView(t)?t:D.encode(t)},decode:O,name:"view",createBufferTranscoder(){return new T({encode:function(t){return M.isBuffer(t)?t:ArrayBuffer.isView(t)?M.from(t.buffer,t.byteOffset,t.byteLength):M.from(String(t),"utf8")},decode:O,name:`${this.name}+buffer`})}}),m.hex=new T({encode:function(t){return M.isBuffer(t)?t:M.from(String(t),"hex")},decode:function(t){return t.toString("hex")},name:"hex"}),m.base64=new T({encode:function(t){return M.isBuffer(t)?t:M.from(String(t),"base64")},decode:function(t){return t.toString("base64")},name:"base64"});const F=I,N=m,{Encoding:P}=C,{BufferFormat:Y,ViewFormat:K,UTF8Format:R}=b,j=Symbol("formats"),H=Symbol("encodings"),V=new Set(["buffer","view","utf8"]);y.Transcoder=class{constructor(t){if(!Array.isArray(t))throw new TypeError("The first argument 'formats' must be an array");if(!t.every((t=>V.has(t))))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'");this[H]=new Map,this[j]=new Set(t);for(const t in N)try{this.encoding(t)}catch(t){if("LEVEL_ENCODING_NOT_SUPPORTED"!==t.code)throw t}}encodings(){return Array.from(new Set(this[H].values()))}encoding(t){let e=this[H].get(t);if(void 0===e){if("string"==typeof t&&""!==t){if(e=q[t],!e)throw new F(`Encoding '${t}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if("object"!=typeof t||null===t)throw new TypeError("First argument 'encoding' must be a string or object");e=function(t){if(t instanceof P)return t;const e="type"in t&&"string"==typeof t.type?t.type:void 0,n=t.name||e||"anonymous-"+z++;switch(function(t){return"format"in t&&void 0!==t.format?t.format:"buffer"in t&&"boolean"==typeof t.buffer?t.buffer?"buffer":"utf8":"code"in t&&Number.isInteger(t.code)?"view":"buffer"}(t)){case"view":return new K({...t,name:n});case"utf8":return new R({...t,name:n});case"buffer":return new Y({...t,name:n});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}(t)}const{name:n,format:r}=e;if(!this[j].has(r))if(this[j].has("view"))e=e.createViewTranscoder();else if(this[j].has("buffer"))e=e.createBufferTranscoder();else{if(!this[j].has("utf8"))throw new F(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});e=e.createUTF8Transcoder()}for(const r of[t,n,e.name,e.commonName])this[H].set(r,e)}return e}};const G={binary:N.buffer,"utf-8":N.utf8},q={...N,...G};let z=0;var J,W={exports:{}},X="object"==typeof Reflect?Reflect:null,Z=X&&"function"==typeof X.apply?X.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};J=X&&"function"==typeof X.ownKeys?X.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var tt=Number.isNaN||function(t){return t!=t};function et(){et.init.call(this)}W.exports=et,W.exports.once=function(t,e){return new Promise((function(n,r){function o(n){t.removeListener(e,i),r(n)}function i(){"function"==typeof t.removeListener&&t.removeListener("error",o),n([].slice.call(arguments))}ht(t,e,i,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&ht(t,"error",e,n)}(t,o,{once:!0})}))},et.EventEmitter=et,et.prototype._events=void 0,et.prototype._eventsCount=0,et.prototype._maxListeners=void 0;var nt=10;function rt(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function ot(t){return void 0===t._maxListeners?et.defaultMaxListeners:t._maxListeners}function it(t,e,n,r){var o,i,s,a;if(rt(n),void 0===(i=t._events)?(i=t._events=Object.create(null),t._eventsCount=0):(void 0!==i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),s=i[e]),void 0===s)s=i[e]=n,++t._eventsCount;else if("function"==typeof s?s=i[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(o=ot(t))>0&&s.length>o&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=s.length,a=c,console&&console.warn&&console.warn(a)}return t}function st(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function at(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=st.bind(r);return o.listener=n,r.wrapFn=o,o}function ct(t,e,n){var r=t._events;if(void 0===r)return[];var o=r[e];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(o):lt(o,o.length)}function ut(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function lt(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function ht(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function o(i){r.once&&t.removeEventListener(e,o),n(i)}))}}Object.defineProperty(et,"defaultMaxListeners",{enumerable:!0,get:function(){return nt},set:function(t){if("number"!=typeof t||t<0||tt(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");nt=t}}),et.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},et.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||tt(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},et.prototype.getMaxListeners=function(){return ot(this)},et.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var i;if(e.length>0&&(i=e[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var a=o[t];if(void 0===a)return!1;if("function"==typeof a)Z(a,this,e);else{var c=a.length,u=lt(a,c);for(n=0;n<c;++n)Z(u[n],this,e)}return!0},et.prototype.addListener=function(t,e){return it(this,t,e,!1)},et.prototype.on=et.prototype.addListener,et.prototype.prependListener=function(t,e){return it(this,t,e,!0)},et.prototype.once=function(t,e){return rt(e),this.on(t,at(this,t,e)),this},et.prototype.prependOnceListener=function(t,e){return rt(e),this.prependListener(t,at(this,t,e)),this},et.prototype.removeListener=function(t,e){var n,r,o,i,s;if(rt(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===e||n[i].listener===e){s=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,o),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,s||e)}return this},et.prototype.off=et.prototype.removeListener,et.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},et.prototype.listeners=function(t){return ct(this,t,!0)},et.prototype.rawListeners=function(t){return ct(this,t,!1)},et.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):ut.call(t,e)},et.prototype.listenerCount=ut,et.prototype.eventNames=function(){return this._eventsCount>0?J(this._events):[]};var ft={},gt="function"==typeof queueMicrotask?queueMicrotask:t=>Promise.resolve().then(t);ft.fromCallback=function(t,e){if(void 0===t){var n=new Promise((function(e,n){t=function(t,r){t?n(t):e(r)}}));t[void 0!==e?e:"promise"]=n}else if("function"!=typeof t)throw new TypeError("Callback must be a function");return t},ft.fromPromise=function(t,e){if(void 0===e)return t;t.then((function(t){gt((()=>e(null,t)))})).catch((function(t){gt((()=>e(t)))}))};var At={},dt={getCallback:function(t,e){return"function"==typeof t?t:e},getOptions:function(t,e){return"object"==typeof t&&null!==t?t:void 0!==e?e:{}}};const{fromCallback:pt}=ft,yt=I,{getOptions:It,getCallback:mt}=dt,Et=Symbol("promise"),wt=Symbol("callback"),bt=Symbol("working"),Ct=Symbol("handleOne"),vt=Symbol("handleMany"),Bt=Symbol("autoClose"),_t=Symbol("finishWork"),xt=Symbol("returnMany"),St=Symbol("closing"),kt=Symbol("handleClose"),Qt=Symbol("closed"),Mt=Symbol("closeCallbacks"),Dt=Symbol("keyEncoding"),Lt=Symbol("valueEncoding"),Tt=Symbol("abortOnClose"),$t=Symbol("legacy"),Ut=Symbol("keys"),Ot=Symbol("values"),Ft=Symbol("limit"),Nt=Symbol("count"),Pt=Object.freeze({}),Yt=()=>{};let Kt=!1;class Rt{constructor(t,e,n){if("object"!=typeof t||null===t){throw new TypeError(`The first argument must be an abstract-level database, received ${null===t?"null":typeof t}`)}if("object"!=typeof e||null===e)throw new TypeError("The second argument must be an options object");this[Qt]=!1,this[Mt]=[],this[bt]=!1,this[St]=!1,this[Bt]=!1,this[wt]=null,this[Ct]=this[Ct].bind(this),this[vt]=this[vt].bind(this),this[kt]=this[kt].bind(this),this[Dt]=e[Dt],this[Lt]=e[Lt],this[$t]=n,this[Ft]=Number.isInteger(e.limit)&&e.limit>=0?e.limit:1/0,this[Nt]=0,this[Tt]=!!e.abortOnClose,this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get count(){return this[Nt]}get limit(){return this[Ft]}next(t){let e;if(void 0===t)e=new Promise(((e,n)=>{t=(t,r,o)=>{t?n(t):this[$t]?void 0===r&&void 0===o?e():e([r,o]):e(r)}}));else if("function"!=typeof t)throw new TypeError("Callback must be a function");return this[St]?this.nextTick(t,new yt("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[bt]?this.nextTick(t,new yt("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[bt]=!0,this[wt]=t,this[Nt]>=this[Ft]?this.nextTick(this[Ct],null):this._next(this[Ct])),e}_next(t){this.nextTick(t)}nextv(t,e,n){return n=mt(e,n),n=pt(n,Et),e=It(e,Pt),Number.isInteger(t)?(this[St]?this.nextTick(n,new yt("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[bt]?this.nextTick(n,new yt("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(t<1&&(t=1),this[Ft]<1/0&&(t=Math.min(t,this[Ft]-this[Nt])),this[bt]=!0,this[wt]=n,t<=0?this.nextTick(this[vt],null,[]):this._nextv(t,e,this[vt])),n[Et]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[Et])}_nextv(t,e,n){const r=[],o=(e,i,s)=>e?n(e):(this[$t]?void 0===i&&void 0===s:void 0===i)?n(null,r):(r.push(this[$t]?[i,s]:i),void(r.length===t?n(null,r):this._next(o)));this._next(o)}all(t,e){return e=mt(t,e),e=pt(e,Et),t=It(t,Pt),this[St]?this.nextTick(e,new yt("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[bt]?this.nextTick(e,new yt("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[bt]=!0,this[wt]=e,this[Bt]=!0,this[Nt]>=this[Ft]?this.nextTick(this[vt],null,[]):this._all(t,this[vt])),e[Et]}_all(t,e){let n=this[Nt];const r=[],o=()=>{const t=this[Ft]<1/0?Math.min(1e3,this[Ft]-n):1e3;t<=0?this.nextTick(e,null,r):this._nextv(t,Pt,i)},i=(t,i)=>{t?e(t):0===i.length?e(null,r):(r.push.apply(r,i),n+=i.length,o())};o()}[_t](){const t=this[wt];return this[Tt]&&null===t?Yt:(this[bt]=!1,this[wt]=null,this[St]&&this._close(this[kt]),t)}[xt](t,e,n){this[Bt]?this.close(t.bind(null,e,n)):t(e,n)}seek(t,e){if(e=It(e,Pt),this[St]);else{if(this[bt])throw new yt("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const n=this.db.keyEncoding(e.keyEncoding||this[Dt]),r=n.format;e.keyEncoding!==r&&(e={...e,keyEncoding:r});const o=this.db.prefixKey(n.encode(t),r);this._seek(o,e)}}}_seek(t,e){throw new yt("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(t){if(t=pt(t,Et),this[Qt])this.nextTick(t);else if(this[St])this[Mt].push(t);else if(this[St]=!0,this[Mt].push(t),this[bt]){if(this[Tt]){this[_t]()(new yt("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))}}else this._close(this[kt]);return t[Et]}_close(t){this.nextTick(t)}[kt](){this[Qt]=!0,this.db.detachResource(this);const t=this[Mt];this[Mt]=[];for(const e of t)e()}async*[Symbol.asyncIterator](){try{let t;for(;void 0!==(t=await this.next());)yield t}finally{this[Qt]||await this.close()}}}class jt extends Rt{constructor(t,e){super(t,e,!0),this[Ut]=!1!==e.keys,this[Ot]=!1!==e.values}[Ct](t,e,n){const r=this[_t]();if(t)return r(t);try{e=this[Ut]&&void 0!==e?this[Dt].decode(e):void 0,n=this[Ot]&&void 0!==n?this[Lt].decode(n):void 0}catch(t){return r(new Ht("entry",t))}void 0===e&&void 0===n||this[Nt]++,r(null,e,n)}[vt](t,e){const n=this[_t]();if(t)return this[xt](n,t);try{for(const t of e){const e=t[0],n=t[1];t[0]=this[Ut]&&void 0!==e?this[Dt].decode(e):void 0,t[1]=this[Ot]&&void 0!==n?this[Lt].decode(n):void 0}}catch(t){return this[xt](n,new Ht("entries",t))}this[Nt]+=e.length,this[xt](n,null,e)}end(t){return Kt||"undefined"==typeof console||(Kt=!0,console.warn(new yt("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(t)}}class Ht extends yt{constructor(t,e){super(`Iterator could not decode ${t}`,{code:"LEVEL_DECODE_ERROR",cause:e})}}for(const t of["_ended property","_nexting property","_end method"])Object.defineProperty(jt.prototype,t.split(" ")[0],{get(){throw new yt(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new yt(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})}});jt.keyEncoding=Dt,jt.valueEncoding=Lt,At.AbstractIterator=jt,At.AbstractKeyIterator=class extends Rt{constructor(t,e){super(t,e,!1)}[Ct](t,e){const n=this[_t]();if(t)return n(t);try{e=void 0!==e?this[Dt].decode(e):void 0}catch(t){return n(new Ht("key",t))}void 0!==e&&this[Nt]++,n(null,e)}[vt](t,e){const n=this[_t]();if(t)return this[xt](n,t);try{for(let t=0;t<e.length;t++){const n=e[t];e[t]=void 0!==n?this[Dt].decode(n):void 0}}catch(t){return this[xt](n,new Ht("keys",t))}this[Nt]+=e.length,this[xt](n,null,e)}},At.AbstractValueIterator=class extends Rt{constructor(t,e){super(t,e,!1)}[Ct](t,e){const n=this[_t]();if(t)return n(t);try{e=void 0!==e?this[Lt].decode(e):void 0}catch(t){return n(new Ht("value",t))}void 0!==e&&this[Nt]++,n(null,e)}[vt](t,e){const n=this[_t]();if(t)return this[xt](n,t);try{for(let t=0;t<e.length;t++){const n=e[t];e[t]=void 0!==n?this[Lt].decode(n):void 0}}catch(t){return this[xt](n,new Ht("values",t))}this[Nt]+=e.length,this[xt](n,null,e)}};var Vt={};const{AbstractKeyIterator:Gt,AbstractValueIterator:qt}=At,zt=Symbol("iterator"),Jt=Symbol("callback"),Wt=Symbol("handleOne"),Xt=Symbol("handleMany");class Zt extends Gt{constructor(t,e){super(t,e),this[zt]=t.iterator({...e,keys:!0,values:!1}),this[Wt]=this[Wt].bind(this),this[Xt]=this[Xt].bind(this)}}class te extends qt{constructor(t,e){super(t,e),this[zt]=t.iterator({...e,keys:!1,values:!0}),this[Wt]=this[Wt].bind(this),this[Xt]=this[Xt].bind(this)}}for(const t of[Zt,te]){const e=t===Zt,n=e?t=>t[0]:t=>t[1];t.prototype._next=function(t){this[Jt]=t,this[zt].next(this[Wt])},t.prototype[Wt]=function(t,n,r){const o=this[Jt];t?o(t):o(null,e?n:r)},t.prototype._nextv=function(t,e,n){this[Jt]=n,this[zt].nextv(t,e,this[Xt])},t.prototype._all=function(t,e){this[Jt]=e,this[zt].all(t,this[Xt])},t.prototype[Xt]=function(t,e){const r=this[Jt];t?r(t):r(null,e.map(n))},t.prototype._seek=function(t,e){this[zt].seek(t,e)},t.prototype._close=function(t){this[zt].close(t)}}Vt.DefaultKeyIterator=Zt,Vt.DefaultValueIterator=te;var ee={};const{AbstractIterator:ne,AbstractKeyIterator:re,AbstractValueIterator:oe}=At,ie=I,se=Symbol("nut"),ae=Symbol("undefer"),ce=Symbol("factory");class ue extends ne{constructor(t,e){super(t,e),this[se]=null,this[ce]=()=>t.iterator(e),this.db.defer((()=>this[ae]()))}}class le extends re{constructor(t,e){super(t,e),this[se]=null,this[ce]=()=>t.keys(e),this.db.defer((()=>this[ae]()))}}class he extends oe{constructor(t,e){super(t,e),this[se]=null,this[ce]=()=>t.values(e),this.db.defer((()=>this[ae]()))}}for(const t of[ue,le,he])t.prototype[ae]=function(){"open"===this.db.status&&(this[se]=this[ce]())},t.prototype._next=function(t){null!==this[se]?this[se].next(t):"opening"===this.db.status?this.db.defer((()=>this._next(t))):this.nextTick(t,new ie("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._nextv=function(t,e,n){null!==this[se]?this[se].nextv(t,e,n):"opening"===this.db.status?this.db.defer((()=>this._nextv(t,e,n))):this.nextTick(n,new ie("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._all=function(t,e){null!==this[se]?this[se].all(e):"opening"===this.db.status?this.db.defer((()=>this._all(t,e))):this.nextTick(e,new ie("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._seek=function(t,e){null!==this[se]?this[se]._seek(t,e):"opening"===this.db.status&&this.db.defer((()=>this._seek(t,e)))},t.prototype._close=function(t){null!==this[se]?this[se].close(t):"opening"===this.db.status?this.db.defer((()=>this._close(t))):this.nextTick(t)};ee.DeferredIterator=ue,ee.DeferredKeyIterator=le,ee.DeferredValueIterator=he;var fe={},ge={};const{fromCallback:Ae}=ft,de=I,{getCallback:pe,getOptions:ye}=dt,Ie=Symbol("promise"),me=Symbol("status"),Ee=Symbol("operations"),we=Symbol("finishClose"),be=Symbol("closeCallbacks");ge.AbstractChainedBatch=class{constructor(t){if("object"!=typeof t||null===t){throw new TypeError(`The first argument must be an abstract-level database, received ${null===t?"null":typeof t}`)}this[Ee]=[],this[be]=[],this[me]="open",this[we]=this[we].bind(this),this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get length(){return this[Ee].length}put(t,e,n){if("open"!==this[me])throw new de("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const r=this.db._checkKey(t)||this.db._checkValue(e);if(r)throw r;const o=n&&null!=n.sublevel?n.sublevel:this.db,i=n,s=o.keyEncoding(n&&n.keyEncoding),a=o.valueEncoding(n&&n.valueEncoding),c=s.format;n={...n,keyEncoding:c,valueEncoding:a.format},o!==this.db&&(n.sublevel=null);const u=o.prefixKey(s.encode(t),c),l=a.encode(e);return this._put(u,l,n),this[Ee].push({...i,type:"put",key:t,value:e}),this}_put(t,e,n){}del(t,e){if("open"!==this[me])throw new de("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const n=this.db._checkKey(t);if(n)throw n;const r=e&&null!=e.sublevel?e.sublevel:this.db,o=e,i=r.keyEncoding(e&&e.keyEncoding),s=i.format;return e={...e,keyEncoding:s},r!==this.db&&(e.sublevel=null),this._del(r.prefixKey(i.encode(t),s),e),this[Ee].push({...o,type:"del",key:t}),this}_del(t,e){}clear(){if("open"!==this[me])throw new de("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[Ee]=[],this}_clear(){}write(t,e){return e=pe(t,e),e=Ae(e,Ie),t=ye(t),"open"!==this[me]?this.nextTick(e,new de("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):0===this.length?this.close(e):(this[me]="writing",this._write(t,(t=>{this[me]="closing",this[be].push((()=>e(t))),t||this.db.emit("batch",this[Ee]),this._close(this[we])}))),e[Ie]}_write(t,e){}close(t){return t=Ae(t,Ie),"closing"===this[me]?this[be].push(t):"closed"===this[me]?this.nextTick(t):(this[be].push(t),"writing"!==this[me]&&(this[me]="closing",this._close(this[we]))),t[Ie]}_close(t){this.nextTick(t)}[we](){this[me]="closed",this.db.detachResource(this);const t=this[be];this[be]=[];for(const e of t)e()}};const{AbstractChainedBatch:Ce}=ge,ve=I,Be=Symbol("encoded");fe.DefaultChainedBatch=class extends Ce{constructor(t){super(t),this[Be]=[]}_put(t,e,n){this[Be].push({...n,type:"put",key:t,value:e})}_del(t,e){this[Be].push({...e,type:"del",key:t})}_clear(){this[Be]=[]}_write(t,e){"opening"===this.db.status?this.db.defer((()=>this._write(t,e))):"open"===this.db.status?0===this[Be].length?this.nextTick(e):this.db._batch(this[Be],t,e):this.nextTick(e,new ve("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};const _e=I,xe=Object.prototype.hasOwnProperty,Se=new Set(["lt","lte","gt","gte"]);
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
let ke;var Qe,Me,De="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:t):t=>(ke||(ke=Promise.resolve())).then(t).catch((t=>setTimeout((()=>{throw t}),0)));var Le,Te,$e,Ue={};const{supports:Oe}=p,{Transcoder:Fe}=y,{EventEmitter:Ne}=W.exports,{fromCallback:Pe}=ft,Ye=I,{AbstractIterator:Ke}=At,{DefaultKeyIterator:Re,DefaultValueIterator:je}=Vt,{DeferredIterator:He,DeferredKeyIterator:Ve,DeferredValueIterator:Ge}=ee,{DefaultChainedBatch:qe}=fe,{getCallback:ze,getOptions:Je}=dt,We=function(t,e){const n={};for(const r in t)if(xe.call(t,r)&&"keyEncoding"!==r&&"valueEncoding"!==r){if("start"===r||"end"===r)throw new _e(`The legacy range option '${r}' has been removed`,{code:"LEVEL_LEGACY"});if("encoding"===r)throw new _e("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});Se.has(r)?n[r]=e.encode(t[r]):n[r]=t[r]}return n.reverse=!!n.reverse,n.limit=Number.isInteger(n.limit)&&n.limit>=0?n.limit:-1,n},Xe=Symbol("promise"),Ze=Symbol("landed"),tn=Symbol("resources"),en=Symbol("closeResources"),nn=Symbol("operations"),rn=Symbol("undefer"),on=Symbol("deferOpen"),sn=Symbol("options"),an=Symbol("status"),cn=Symbol("defaultOptions"),un=Symbol("transcoder"),ln=Symbol("keyEncoding"),hn=Symbol("valueEncoding"),fn=()=>{};class gn extends Ne{constructor(t,e){if(super(),"object"!=typeof t||null===t)throw new TypeError("The first argument 'manifest' must be an object");e=Je(e);const{keyEncoding:n,valueEncoding:r,passive:o,...i}=e;this[tn]=new Set,this[nn]=[],this[on]=!0,this[sn]=i,this[an]="opening",this.supports=Oe(t,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:!1!==t.snapshots,permanence:!1!==t.permanence,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:t.encodings||{},events:Object.assign({},t.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[un]=new Fe(pn(this)),this[ln]=this[un].encoding(n||"utf8"),this[hn]=this[un].encoding(r||"utf8");for(const t of this[un].encodings())this.supports.encodings[t.commonName]||(this.supports.encodings[t.commonName]=!0);this[cn]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[ln].commonName,valueEncoding:this[hn].commonName}),key:Object.freeze({keyEncoding:this[ln].commonName})},this.nextTick((()=>{this[on]&&this.open({passive:!1},fn)}))}get status(){return this[an]}keyEncoding(t){return this[un].encoding(null!=t?t:this[ln])}valueEncoding(t){return this[un].encoding(null!=t?t:this[hn])}open(t,e){e=ze(t,e),e=Pe(e,Xe),(t={...this[sn],...Je(t)}).createIfMissing=!1!==t.createIfMissing,t.errorIfExists=!!t.errorIfExists;const n=t=>{"closing"===this[an]||"opening"===this[an]?this.once(Ze,t?()=>n(t):n):"open"!==this[an]?e(new Ye("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:t})):e()};return t.passive?"opening"===this[an]?this.once(Ze,n):this.nextTick(n):"closed"===this[an]||this[on]?(this[on]=!1,this[an]="opening",this.emit("opening"),this._open(t,(t=>{if(t)return this[an]="closed",this[en]((()=>{this.emit(Ze),n(t)})),void this[rn]();this[an]="open",this[rn](),this.emit(Ze),"open"===this[an]&&this.emit("open"),"open"===this[an]&&this.emit("ready"),n()}))):"open"===this[an]?this.nextTick(n):this.once(Ze,(()=>this.open(t,e))),e[Xe]}_open(t,e){this.nextTick(e)}close(t){t=Pe(t,Xe);const e=n=>{"opening"===this[an]||"closing"===this[an]?this.once(Ze,n?e(n):e):"closed"!==this[an]?t(new Ye("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):t()};if("open"===this[an]){this[an]="closing",this.emit("closing");const t=t=>{this[an]="open",this[rn](),this.emit(Ze),e(t)};this[en]((()=>{this._close((n=>{if(n)return t(n);this[an]="closed",this[rn](),this.emit(Ze),"closed"===this[an]&&this.emit("closed"),e()}))}))}else"closed"===this[an]?this.nextTick(e):this.once(Ze,(()=>this.close(t)));return t[Xe]}[en](t){if(0===this[tn].size)return this.nextTick(t);let e=this[tn].size,n=!0;const r=()=>{0==--e&&(n?this.nextTick(t):t())};for(const t of this[tn])t.close(r);n=!1,this[tn].clear()}_close(t){this.nextTick(t)}get(t,e,n){if(n=ze(e,n),n=Pe(n,Xe),e=Je(e,this[cn].entry),"opening"===this[an])return this.defer((()=>this.get(t,e,n))),n[Xe];if(dn(this,n))return n[Xe];const r=this._checkKey(t);if(r)return this.nextTick(n,r),n[Xe];const o=this.keyEncoding(e.keyEncoding),i=this.valueEncoding(e.valueEncoding),s=o.format,a=i.format;return e.keyEncoding===s&&e.valueEncoding===a||(e=Object.assign({},e,{keyEncoding:s,valueEncoding:a})),this._get(this.prefixKey(o.encode(t),s),e,((t,e)=>{if(t)return("LEVEL_NOT_FOUND"===t.code||t.notFound||/NotFound/i.test(t))&&(t.code||(t.code="LEVEL_NOT_FOUND"),t.notFound||(t.notFound=!0),t.status||(t.status=404)),n(t);try{e=i.decode(e)}catch(t){return n(new Ye("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:t}))}n(null,e)})),n[Xe]}_get(t,e,n){this.nextTick(n,new Error("NotFound"))}getMany(t,e,n){if(n=ze(e,n),n=Pe(n,Xe),e=Je(e,this[cn].entry),"opening"===this[an])return this.defer((()=>this.getMany(t,e,n))),n[Xe];if(dn(this,n))return n[Xe];if(!Array.isArray(t))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[Xe];if(0===t.length)return this.nextTick(n,null,[]),n[Xe];const r=this.keyEncoding(e.keyEncoding),o=this.valueEncoding(e.valueEncoding),i=r.format,s=o.format;e.keyEncoding===i&&e.valueEncoding===s||(e=Object.assign({},e,{keyEncoding:i,valueEncoding:s}));const a=new Array(t.length);for(let e=0;e<t.length;e++){const o=t[e],s=this._checkKey(o);if(s)return this.nextTick(n,s),n[Xe];a[e]=this.prefixKey(r.encode(o),i)}return this._getMany(a,e,((t,e)=>{if(t)return n(t);try{for(let t=0;t<e.length;t++)void 0!==e[t]&&(e[t]=o.decode(e[t]))}catch(t){return n(new Ye(`Could not decode one or more of ${e.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:t}))}n(null,e)})),n[Xe]}_getMany(t,e,n){this.nextTick(n,null,new Array(t.length).fill(void 0))}put(t,e,n,r){if(r=ze(n,r),r=Pe(r,Xe),n=Je(n,this[cn].entry),"opening"===this[an])return this.defer((()=>this.put(t,e,n,r))),r[Xe];if(dn(this,r))return r[Xe];const o=this._checkKey(t)||this._checkValue(e);if(o)return this.nextTick(r,o),r[Xe];const i=this.keyEncoding(n.keyEncoding),s=this.valueEncoding(n.valueEncoding),a=i.format,c=s.format;n.keyEncoding===a&&n.valueEncoding===c||(n=Object.assign({},n,{keyEncoding:a,valueEncoding:c}));const u=this.prefixKey(i.encode(t),a),l=s.encode(e);return this._put(u,l,n,(n=>{if(n)return r(n);this.emit("put",t,e),r()})),r[Xe]}_put(t,e,n,r){this.nextTick(r)}del(t,e,n){if(n=ze(e,n),n=Pe(n,Xe),e=Je(e,this[cn].key),"opening"===this[an])return this.defer((()=>this.del(t,e,n))),n[Xe];if(dn(this,n))return n[Xe];const r=this._checkKey(t);if(r)return this.nextTick(n,r),n[Xe];const o=this.keyEncoding(e.keyEncoding),i=o.format;return e.keyEncoding!==i&&(e=Object.assign({},e,{keyEncoding:i})),this._del(this.prefixKey(o.encode(t),i),e,(e=>{if(e)return n(e);this.emit("del",t),n()})),n[Xe]}_del(t,e,n){this.nextTick(n)}batch(t,e,n){if(!arguments.length){if("opening"===this[an])return new qe(this);if("open"!==this[an])throw new Ye("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(n="function"==typeof t?t:ze(e,n),n=Pe(n,Xe),e=Je(e,this[cn].empty),"opening"===this[an])return this.defer((()=>this.batch(t,e,n))),n[Xe];if(dn(this,n))return n[Xe];if(!Array.isArray(t))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[Xe];if(0===t.length)return this.nextTick(n),n[Xe];const r=new Array(t.length),{keyEncoding:o,valueEncoding:i,...s}=e;for(let e=0;e<t.length;e++){if("object"!=typeof t[e]||null===t[e])return this.nextTick(n,new TypeError("A batch operation must be an object")),n[Xe];const s=Object.assign({},t[e]);if("put"!==s.type&&"del"!==s.type)return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[Xe];const a=this._checkKey(s.key);if(a)return this.nextTick(n,a),n[Xe];const c=null!=s.sublevel?s.sublevel:this,u=c.keyEncoding(s.keyEncoding||o),l=u.format;if(s.key=c.prefixKey(u.encode(s.key),l),s.keyEncoding=l,"put"===s.type){const t=this._checkValue(s.value);if(t)return this.nextTick(n,t),n[Xe];const e=c.valueEncoding(s.valueEncoding||i);s.value=e.encode(s.value),s.valueEncoding=e.format}c!==this&&(s.sublevel=null),r[e]=s}return this._batch(r,s,(e=>{if(e)return n(e);this.emit("batch",t),n()})),n[Xe]}_batch(t,e,n){this.nextTick(n)}sublevel(t,e){return this._sublevel(t,An.defaults(e))}_sublevel(t,e){return new An(this,t,e)}prefixKey(t,e){return t}clear(t,e){if(e=ze(t,e),e=Pe(e,Xe),t=Je(t,this[cn].empty),"opening"===this[an])return this.defer((()=>this.clear(t,e))),e[Xe];if(dn(this,e))return e[Xe];const n=t,r=this.keyEncoding(t.keyEncoding);return(t=We(t,r)).keyEncoding=r.format,0===t.limit?this.nextTick(e):this._clear(t,(t=>{if(t)return e(t);this.emit("clear",n),e()})),e[Xe]}_clear(t,e){this.nextTick(e)}iterator(t){const e=this.keyEncoding(t&&t.keyEncoding),n=this.valueEncoding(t&&t.valueEncoding);if((t=We(t,e)).keys=!1!==t.keys,t.values=!1!==t.values,t[Ke.keyEncoding]=e,t[Ke.valueEncoding]=n,t.keyEncoding=e.format,t.valueEncoding=n.format,"opening"===this[an])return new He(this,t);if("open"!==this[an])throw new Ye("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(t)}_iterator(t){return new Ke(this,t)}keys(t){const e=this.keyEncoding(t&&t.keyEncoding),n=this.valueEncoding(t&&t.valueEncoding);if((t=We(t,e))[Ke.keyEncoding]=e,t[Ke.valueEncoding]=n,t.keyEncoding=e.format,t.valueEncoding=n.format,"opening"===this[an])return new Ve(this,t);if("open"!==this[an])throw new Ye("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(t)}_keys(t){return new Re(this,t)}values(t){const e=this.keyEncoding(t&&t.keyEncoding),n=this.valueEncoding(t&&t.valueEncoding);if((t=We(t,e))[Ke.keyEncoding]=e,t[Ke.valueEncoding]=n,t.keyEncoding=e.format,t.valueEncoding=n.format,"opening"===this[an])return new Ge(this,t);if("open"!==this[an])throw new Ye("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(t)}_values(t){return new je(this,t)}defer(t){if("function"!=typeof t)throw new TypeError("The first argument must be a function");this[nn].push(t)}[rn](){if(0===this[nn].length)return;const t=this[nn];this[nn]=[];for(const e of t)e()}attachResource(t){if("object"!=typeof t||null===t||"function"!=typeof t.close)throw new TypeError("The first argument must be a resource object");this[tn].add(t)}detachResource(t){this[tn].delete(t)}_chainedBatch(){return new qe(this)}_checkKey(t){if(null==t)return new Ye("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(t){if(null==t)return new Ye("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}}gn.prototype.nextTick=function(){if(Me)return Qe;Me=1;const t=De;return Qe=function(e,...n){0===n.length?t(e):t((()=>e(...n)))}}();const{AbstractSublevel:An}=function(){if($e)return Te;$e=1;const t=I,{Buffer:e}=r||{},{AbstractSublevelIterator:n,AbstractSublevelKeyIterator:o,AbstractSublevelValueIterator:i}=function(){if(Le)return Ue;Le=1;const{AbstractIterator:t,AbstractKeyIterator:e,AbstractValueIterator:n}=At,r=Symbol("unfix"),o=Symbol("iterator"),i=Symbol("handleOne"),s=Symbol("handleMany"),a=Symbol("callback");class c extends t{constructor(t,e,n,c){super(t,e),this[o]=n,this[r]=c,this[i]=this[i].bind(this),this[s]=this[s].bind(this),this[a]=null}[i](t,e,n){const o=this[a];if(t)return o(t);void 0!==e&&(e=this[r](e)),o(t,e,n)}[s](t,e){const n=this[a];if(t)return n(t);for(const t of e){const e=t[0];void 0!==e&&(t[0]=this[r](e))}n(t,e)}}class u extends e{constructor(t,e,n,c){super(t,e),this[o]=n,this[r]=c,this[i]=this[i].bind(this),this[s]=this[s].bind(this),this[a]=null}[i](t,e){const n=this[a];if(t)return n(t);void 0!==e&&(e=this[r](e)),n(t,e)}[s](t,e){const n=this[a];if(t)return n(t);for(let t=0;t<e.length;t++){const n=e[t];void 0!==n&&(e[t]=this[r](n))}n(t,e)}}class l extends n{constructor(t,e,n){super(t,e),this[o]=n}}for(const t of[c,u])t.prototype._next=function(t){this[a]=t,this[o].next(this[i])},t.prototype._nextv=function(t,e,n){this[a]=n,this[o].nextv(t,e,this[s])},t.prototype._all=function(t,e){this[a]=e,this[o].all(t,this[s])};for(const t of[l])t.prototype._next=function(t){this[o].next(t)},t.prototype._nextv=function(t,e,n){this[o].nextv(t,e,n)},t.prototype._all=function(t,e){this[o].all(t,e)};for(const t of[c,u,l])t.prototype._seek=function(t,e){this[o].seek(t,e)},t.prototype._close=function(t){this[o].close(t)};return Ue.AbstractSublevelIterator=c,Ue.AbstractSublevelKeyIterator=u,Ue.AbstractSublevelValueIterator=l,Ue}(),s=Symbol("prefix"),a=Symbol("upperBound"),c=Symbol("prefixRange"),u=Symbol("parent"),l=Symbol("unfix"),h=new TextEncoder,f={separator:"!"};Te=function({AbstractLevel:r}){class A extends r{static defaults(e){if("string"==typeof e)throw new t("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(e&&e.open)throw new t("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return null==e?f:e.separator?e:{...e,separator:"!"}}constructor(e,n,r){const{separator:o,manifest:i,...c}=A.defaults(r);n=y(n,o);const f=o.charCodeAt(0)+1,I=e[u]||e;if(!h.encode(n).every((t=>t>f&&t<127)))throw new t(`Prefix must use bytes > ${f} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(g(I,i),c);const m=(e.prefix||"")+o+n+o,E=m.slice(0,-1)+String.fromCharCode(f);this[u]=I,this[s]=new d(m),this[a]=new d(E),this[l]=new p,this.nextTick=I.nextTick}prefixKey(t,n){if("utf8"===n)return this[s].utf8+t;if(0===t.byteLength)return this[s][n];if("view"===n){const e=this[s].view,n=new Uint8Array(e.byteLength+t.byteLength);return n.set(e,0),n.set(t,e.byteLength),n}{const n=this[s].buffer;return e.concat([n,t],n.byteLength+t.byteLength)}}[c](t,e){void 0!==t.gte?t.gte=this.prefixKey(t.gte,e):void 0!==t.gt?t.gt=this.prefixKey(t.gt,e):t.gte=this[s][e],void 0!==t.lte?t.lte=this.prefixKey(t.lte,e):void 0!==t.lt?t.lt=this.prefixKey(t.lt,e):t.lte=this[a][e]}get prefix(){return this[s].utf8}get db(){return this[u]}_open(t,e){this[u].open({passive:!0},e)}_put(t,e,n,r){this[u].put(t,e,n,r)}_get(t,e,n){this[u].get(t,e,n)}_getMany(t,e,n){this[u].getMany(t,e,n)}_del(t,e,n){this[u].del(t,e,n)}_batch(t,e,n){this[u].batch(t,e,n)}_clear(t,e){this[c](t,t.keyEncoding),this[u].clear(t,e)}_iterator(t){this[c](t,t.keyEncoding);const e=this[u].iterator(t),r=this[l].get(this[s].utf8.length,t.keyEncoding);return new n(this,t,e,r)}_keys(t){this[c](t,t.keyEncoding);const e=this[u].keys(t),n=this[l].get(this[s].utf8.length,t.keyEncoding);return new o(this,t,e,n)}_values(t){this[c](t,t.keyEncoding);const e=this[u].values(t);return new i(this,t,e)}}return{AbstractSublevel:A}};const g=function(t,e){return{...t.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:A(t,"utf8"),buffer:A(t,"buffer"),view:A(t,"view")}}},A=function(t,e){return!!t.supports.encodings[e]&&t.keyEncoding(e).name===e};class d{constructor(t){this.utf8=t,this.view=h.encode(t),this.buffer=e?e.from(this.view.buffer,0,this.view.byteLength):{}}}class p{constructor(){this.cache=new Map}get(t,e){let n=this.cache.get(e);return void 0===n&&(n="view"===e?function(t,e){return e.subarray(t)}.bind(null,t):function(t,e){return e.slice(t)}.bind(null,t),this.cache.set(e,n)),n}}const y=function(t,e){let n=0,r=t.length;for(;n<r&&t[n]===e;)n++;for(;r>n&&t[r-1]===e;)r--;return t.slice(n,r)};return Te}()({AbstractLevel:gn});d.AbstractLevel=gn,d.AbstractSublevel=An;const dn=function(t,e){return"open"!==t[an]&&(t.nextTick(e,new Ye("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0)},pn=function(t){return Object.keys(t.supports.encodings).filter((e=>!!t.supports.encodings[e]))};A.AbstractLevel=d.AbstractLevel,A.AbstractSublevel=d.AbstractSublevel,A.AbstractIterator=At.AbstractIterator,A.AbstractKeyIterator=At.AbstractKeyIterator,A.AbstractValueIterator=At.AbstractValueIterator,A.AbstractChainedBatch=ge.AbstractChainedBatch;
/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var yn=function(t,e,n){if("number"!=typeof e)throw new Error("second argument must be a Number");let r,o,i,s,a,c,u=!0;Array.isArray(t)?(r=[],i=o=t.length):(s=Object.keys(t),r={},i=o=s.length);function l(t){function e(){n&&n(t,r),n=null}u?In(e):e()}function h(e,n,u){if(r[e]=u,n&&(a=!0),0==--i||n)l(n);else if(!a&&c<o){let e;s?(e=s[c],c+=1,t[e]((function(t,n){h(e,t,n)}))):(e=c,c+=1,t[e]((function(t,n){h(e,t,n)})))}}c=e,i?s?s.some((function(n,r){return t[n]((function(t,e){h(n,t,e)})),r===e-1})):t.some((function(t,n){return t((function(t,e){h(n,t,e)})),n===e-1})):l(null);u=!1};const In=De;var mn={},En="function"==typeof queueMicrotask?queueMicrotask:t=>Promise.resolve().then(t);mn.fromCallback=function(t,e){if(void 0===t){var n=new Promise((function(e,n){t=function(t,r){t?n(t):e(r)}}));t[void 0!==e?e:"promise"]=n}else if("function"!=typeof t)throw new TypeError("Callback must be a function");return t},mn.fromPromise=function(t,e){if(void 0===e)return t;t.then((function(t){En((()=>e(null,t)))})).catch((function(t){En((()=>e(t)))}))};var wn={},bn=function(t){const e=void 0!==t.gte?t.gte:void 0!==t.gt?t.gt:void 0,n=void 0!==t.lte?t.lte:void 0!==t.lt?t.lt:void 0,r=void 0===t.gte,o=void 0===t.lte;return void 0!==e&&void 0!==n?IDBKeyRange.bound(e,n,r,o):void 0!==e?IDBKeyRange.lowerBound(e,r):void 0!==n?IDBKeyRange.upperBound(n,o):null};const Cn=new TextEncoder;var vn=function(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):Cn.encode(t)};const{AbstractIterator:Bn}=A,_n=bn,xn=vn,Sn=Symbol("cache"),kn=Symbol("finished"),Qn=Symbol("options"),Mn=Symbol("currentOptions"),Dn=Symbol("position"),Ln=Symbol("location"),Tn=Symbol("first"),$n={};function Un(t){"function"==typeof t.commit&&t.commit()}wn.Iterator=class extends Bn{constructor(t,e,n){super(t,n),this[Sn]=[],this[kn]=0===this.limit,this[Qn]=n,this[Mn]={...n},this[Dn]=void 0,this[Ln]=e,this[Tn]=!0}_nextv(t,e,n){if(this[Tn]=!1,this[kn])return this.nextTick(n,null,[]);if(this[Sn].length>0)return t=Math.min(t,this[Sn].length),this.nextTick(n,null,this[Sn].splice(0,t));let r;void 0!==this[Dn]&&(this[Qn].reverse?(this[Mn].lt=this[Dn],this[Mn].lte=void 0):(this[Mn].gt=this[Dn],this[Mn].gte=void 0));try{r=_n(this[Mn])}catch(t){return this[kn]=!0,this.nextTick(n,null,[])}const o=this.db.db.transaction([this[Ln]],"readonly"),i=o.objectStore(this[Ln]),s=[];if(this[Qn].reverse){i[!this[Qn].values&&i.openKeyCursor?"openKeyCursor":"openCursor"](r,"prev").onsuccess=e=>{const n=e.target.result;if(n){const{key:e,value:r}=n;this[Dn]=e,s.push([this[Qn].keys&&void 0!==e?xn(e):void 0,this[Qn].values&&void 0!==r?xn(r):void 0]),s.length<t?n.continue():Un(o)}else this[kn]=!0}}else{let e,n;const a=()=>{if(void 0===e||void 0===n)return;const r=Math.max(e.length,n.length);0===r||t===1/0?this[kn]=!0:this[Dn]=e[r-1],s.length=r;for(let t=0;t<r;t++){const r=e[t],o=n[t];s[t]=[this[Qn].keys&&void 0!==r?xn(r):void 0,this[Qn].values&&void 0!==o?xn(o):void 0]}Un(o)};this[Qn].keys||t<1/0?i.getAllKeys(r,t<1/0?t:void 0).onsuccess=t=>{e=t.target.result,a()}:(e=[],this.nextTick(a)),this[Qn].values?i.getAll(r,t<1/0?t:void 0).onsuccess=t=>{n=t.target.result,a()}:(n=[],this.nextTick(a))}o.onabort=()=>{n(o.error||new Error("aborted by user")),n=null},o.oncomplete=()=>{n(null,s),n=null}}_next(t){if(this[Sn].length>0){const[e,n]=this[Sn].shift();this.nextTick(t,null,e,n)}else if(this[kn])this.nextTick(t);else{let e=Math.min(100,this.limit-this.count);this[Tn]&&(this[Tn]=!1,e=1),this._nextv(e,$n,((e,n)=>{if(e)return t(e);this[Sn]=n,this._next(t)}))}}_all(t,e){this[Tn]=!1;const n=this[Sn].splice(0,this[Sn].length),r=this.limit-this.count-n.length;if(r<=0)return this.nextTick(e,null,n);this._nextv(r,$n,((t,r)=>{if(t)return e(t);n.length>0&&(r=n.concat(r)),e(null,r)}))}_seek(t,e){let n;this[Tn]=!0,this[Sn]=[],this[kn]=!1,this[Dn]=void 0,this[Mn]={...this[Qn]};try{n=_n(this[Qn])}catch(t){return void(this[kn]=!0)}null===n||n.includes(t)?this[Qn].reverse?this[Mn].lte=t:this[Mn].gte=t:this[kn]=!0}};const{AbstractLevel:On}=A,Fn=I,Nn=yn,{fromCallback:Pn}=mn,{Iterator:Yn}=wn,Kn=vn,Rn=function(t,e,n,r,o){if(0===r.limit)return t.nextTick(o);const i=t.db.transaction([e],"readwrite"),s=i.objectStore(e);let a=0;i.oncomplete=function(){o()},i.onabort=function(){o(i.error||new Error("aborted by user"))};const c=s.openKeyCursor?"openKeyCursor":"openCursor",u=r.reverse?"prev":"next";s[c](n,u).onsuccess=function(t){const e=t.target.result;e&&(s.delete(e.key).onsuccess=function(){(r.limit<=0||++a<r.limit)&&e.continue()})}},jn=bn,Hn="level-js-",Vn=Symbol("idb"),Gn=Symbol("namePrefix"),qn=Symbol("location"),zn=Symbol("version"),Jn=Symbol("store"),Wn=Symbol("onComplete"),Xn=Symbol("promise");class Zn extends On{constructor(t,e,n){if("function"==typeof e||"function"==typeof n)throw new Fn("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});const{prefix:r,version:o,...i}=e||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},i),"string"!=typeof t)throw new Error("constructor requires a location string argument");this[qn]=t,this[Gn]=null==r?Hn:r,this[zn]=parseInt(o||1,10),this[Vn]=null}get location(){return this[qn]}get namePrefix(){return this[Gn]}get version(){return this[zn]}get db(){return this[Vn]}get type(){return"browser-level"}_open(t,e){const n=indexedDB.open(this[Gn]+this[qn],this[zn]);n.onerror=function(){e(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[Vn]=n.result,e()},n.onupgradeneeded=t=>{const e=t.target.result;e.objectStoreNames.contains(this[qn])||e.createObjectStore(this[qn])}}[Jn](t){return this[Vn].transaction([this[qn]],t).objectStore(this[qn])}[Wn](t,e){const n=t.transaction;n.onabort=function(){e(n.error||new Error("aborted by user"))},n.oncomplete=function(){e(null,t.result)}}_get(t,e,n){const r=this[Jn]("readonly");let o;try{o=r.get(t)}catch(t){return this.nextTick(n,t)}this[Wn](o,(function(t,e){return t?n(t):void 0===e?n(new Fn("Entry not found",{code:"LEVEL_NOT_FOUND"})):void n(null,Kn(e))}))}_getMany(t,e,n){const r=this[Jn]("readonly"),o=t.map((t=>e=>{let n;try{n=r.get(t)}catch(t){return e(t)}n.onsuccess=()=>{const t=n.result;e(null,void 0===t?t:Kn(t))},n.onerror=t=>{t.stopPropagation(),e(n.error)}}));Nn(o,16,n)}_del(t,e,n){const r=this[Jn]("readwrite");let o;try{o=r.delete(t)}catch(t){return this.nextTick(n,t)}this[Wn](o,n)}_put(t,e,n,r){const o=this[Jn]("readwrite");let i;try{i=o.put(e,t)}catch(t){return this.nextTick(r,t)}this[Wn](i,r)}_iterator(t){return new Yn(this,this[qn],t)}_batch(t,e,n){const r=this[Jn]("readwrite"),o=r.transaction;let i,s=0;o.onabort=function(){n(i||o.error||new Error("aborted by user"))},o.oncomplete=function(){n()},function e(){const n=t[s++],a=n.key;let c;try{c="del"===n.type?r.delete(a):r.put(n.value,a)}catch(t){return i=t,void o.abort()}s<t.length?c.onsuccess=e:"function"==typeof o.commit&&o.commit()}()}_clear(t,e){let n,r;try{n=jn(t)}catch(t){return this.nextTick(e)}if(t.limit>=0)return Rn(this,this[qn],n,t,e);try{const t=this[Jn]("readwrite");r=n?t.delete(n):t.clear()}catch(t){return this.nextTick(e,t)}this[Wn](r,e)}_close(t){this[Vn].close(),this.nextTick(t)}}Zn.destroy=function(t,e,n){"function"==typeof e&&(n=e,e=Hn),n=Pn(n,Xn);const r=indexedDB.deleteDatabase(e+t);return r.onsuccess=function(){n()},r.onerror=function(t){n(t)},n[Xn]};var tr=Zn;const er="0123456789bcdefghjkmnpqrstuvwxyz";class nr{static encode(t,e,n){if(void 0===n){for(let n=1;n<=12;n++){const r=nr.encode(t,e,n),o=nr.decode(r);if(o.lat==t&&o.lon==e)return r}n=12}if(t=Number(t),e=Number(e),n=Number(n),isNaN(t)||isNaN(e)||isNaN(n))throw new Error("Invalid geohash");let r=0,o=0,i=!0,s="",a=-90,c=90,u=-180,l=180;for(;s.length<n;){if(i){const t=(u+l)/2;e>=t?(r=2*r+1,u=t):(r*=2,l=t)}else{const e=(a+c)/2;t>=e?(r=2*r+1,a=e):(r*=2,c=e)}i=!i,5==++o&&(s+=er.charAt(r),o=0,r=0)}return s}static decode(t){const e=nr.bounds(t),n=e.sw.lat,r=e.sw.lon,o=e.ne.lat,i=e.ne.lon;let s=(n+o)/2,a=(r+i)/2;return s=s.toFixed(Math.floor(2-Math.log(o-n)/Math.LN10)),a=a.toFixed(Math.floor(2-Math.log(i-r)/Math.LN10)),{lat:Number(s),lon:Number(a)}}static bounds(t){if(0==t.length)throw new Error("Invalid geohash");t=t.toLowerCase();let e=!0,n=-90,r=90,o=-180,i=180;for(let s=0;s<t.length;s++){const a=t.charAt(s),c=er.indexOf(a);if(-1==c)throw new Error("Invalid geohash");for(let t=4;t>=0;t--){const s=c>>t&1;if(e){const t=(o+i)/2;1==s?o=t:i=t}else{const t=(n+r)/2;1==s?n=t:r=t}e=!e}}return{sw:{lat:n,lon:o},ne:{lat:r,lon:i}}}static adjacent(t,e){if(t=t.toLowerCase(),e=e.toLowerCase(),0==t.length)throw new Error("Invalid geohash");if(-1=="nsew".indexOf(e))throw new Error("Invalid direction");const n=t.slice(-1);let r=t.slice(0,-1);const o=t.length%2;return-1!={n:["prxz","bcfguvyz"],s:["028b","0145hjnp"],e:["bcfguvyz","prxz"],w:["0145hjnp","028b"]}[e][o].indexOf(n)&&""!=r&&(r=nr.adjacent(r,e)),r+er.charAt({n:["p0r21436x8zb9dcf5h7kjnmqesgutwvy","bc01fg45238967deuvhjyznpkmstqrwx"],s:["14365h7k9dcfesgujnmqp0r2twvyx8zb","238967debc01fg45kmstqrwxuvhjyznp"],e:["bc01fg45238967deuvhjyznpkmstqrwx","p0r21436x8zb9dcf5h7kjnmqesgutwvy"],w:["238967debc01fg45kmstqrwxuvhjyznp","14365h7k9dcfesgujnmqp0r2twvyx8zb"]}[e][o].indexOf(n))}static neighbours(t){return{n:nr.adjacent(t,"n"),ne:nr.adjacent(nr.adjacent(t,"n"),"e"),e:nr.adjacent(t,"e"),se:nr.adjacent(nr.adjacent(t,"s"),"e"),s:nr.adjacent(t,"s"),sw:nr.adjacent(nr.adjacent(t,"s"),"w"),w:nr.adjacent(t,"w"),nw:nr.adjacent(nr.adjacent(t,"n"),"w")}}}var rr={exports:{}},or={exports:{}};function ir(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var sr,ar={exports:{}},cr=function t(e,n){if(!e){var r=new ur(n);throw Error.captureStackTrace&&Error.captureStackTrace(r,t),r}};class ur extends Error{}function lr(t){t.fill(0)}ur.prototype.name="AssertionError",function(t){var e,n=cr,r=(e=globalThis.crypto||globalThis.msCrypto)&&e.getRandomValues?function(t,n){for(let r=0;r<n;r+=65536)e.getRandomValues(new Uint8Array(t.buffer,r+t.byteOffset,Math.min(n-r,65536)))}:null!=ir&&(e=ir("crypto"))&&e.randomBytes?function(t,n){new Uint8Array(t.buffer,t.byteOffset,n).set(e.randomBytes(n))}:function(){throw new Error("No secure random number generator available")};Object.defineProperty(t.exports,"randombytes",{value:r}),t.exports.randombytes_buf=function(t){n(t,"out must be given"),r(t,t.byteLength)}}(ar);var hr={sodium_malloc:function(t){return new Uint8Array(t)},sodium_free:function(t){lr(t),function(){if(sr)return sr;var t=globalThis.MessageChannel;null==t&&({MessageChannel:t}=ir("worker_threads"));return sr=new t}().port1.postMessage(t.buffer,[t.buffer])},sodium_memzero:lr},fr={exports:{}};!function(t){function e(t,e,n,r,o){var i=0;for(let s=0;s<o;s++)i|=t[e+s]^n[r+s];return(1&i-1>>>8)-1}t.exports={crypto_verify_16:function(t,n,r,o){return 0===e(t,n,r,o,16)},crypto_verify_32:function(t,n,r,o){return 0===e(t,n,r,o,32)},crypto_verify_64:function(t,n,r,o){return 0===e(t,n,r,o,64)}},Object.defineProperty(t.exports,"vn",{value:e})}(fr);const gr=cr,{vn:Ar}=fr.exports;var dr={sodium_increment:function(t){const e=t.byteLength;for(var n=1,r=0;r<e;r++)n+=t[r],t[r]=n,n>>=8},sodium_memcmp:function(t,e){return gr(t.byteLength===e.byteLength,"buffers must be the same size"),0===Ar(t,0,e,0,t.byteLength)},sodium_is_zero:function(t){var e=0;for(let n=0;n<t.length;n++)e|=t[n];return 0===e}},pr={exports:{}};function yr(t){return t.length}var Ir={byteLength:yr,toString:function(t){const e=t.byteLength;let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n},write:function(t,e,n=0,r=yr(e)){const o=Math.min(r,t.byteLength-n);for(let r=0;r<o;r++)t[n+r]=e.charCodeAt(r);return o}};const mr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Er=new Uint8Array(256);for(let t=0;t<mr.length;t++)Er[mr.charCodeAt(t)]=t;function wr(t){let e=t.length;return 61===t.charCodeAt(e-1)&&e--,e>1&&61===t.charCodeAt(e-1)&&e--,3*e>>>2}Er[45]=62,Er[95]=63;var br={byteLength:wr,toString:function(t){const e=t.byteLength;let n="";for(let r=0;r<e;r+=3)n+=mr[t[r]>>2]+mr[(3&t[r])<<4|t[r+1]>>4]+mr[(15&t[r+1])<<2|t[r+2]>>6]+mr[63&t[r+2]];return e%3==2?n=n.substring(0,n.length-1)+"=":e%3==1&&(n=n.substring(0,n.length-2)+"=="),n},write:function(t,e,n=0,r=wr(e)){const o=Math.min(r,t.byteLength-n);for(let n=0,r=0;n<o;n+=4){const o=Er[e.charCodeAt(n)],i=Er[e.charCodeAt(n+1)],s=Er[e.charCodeAt(n+2)],a=Er[e.charCodeAt(n+3)];t[r++]=o<<2|i>>4,t[r++]=(15&i)<<4|s>>2,t[r++]=(3&s)<<6|63&a}return o}};function Cr(t){return t.length>>>1}var vr={byteLength:Cr,toString:function(t){const e=t.byteLength;t=new DataView(t.buffer,t.byteOffset,e);let n="",r=0;for(let o=e-e%4;r<o;r+=4)n+=t.getUint32(r).toString(16).padStart(8,"0");for(;r<e;r++)n+=t.getUint8(r).toString(16).padStart(2,"0");return n},write:function(t,e,n=0,r=Cr(e)){const o=Math.min(r,t.byteLength-n);for(let r=0;r<o;r++){const o=Br(e.charCodeAt(2*r)),i=Br(e.charCodeAt(2*r+1));if(void 0===o||void 0===i)return t.subarray(0,r);t[n+r]=o<<4|i}return o}};function Br(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:void 0}function _r(t){let e=0;for(let n=0,r=t.length;n<r;n++){const o=t.charCodeAt(n);if(o>=55296&&o<=56319&&n+1<r){const r=t.charCodeAt(n+1);if(r>=56320&&r<=57343){e+=4,n++;continue}}e+=o<=127?1:o<=2047?2:3}return e}let xr,Sr;if("undefined"!=typeof TextDecoder){const t=new TextDecoder;xr=function(e){return t.decode(e)}}else xr=function(t){const e=t.byteLength;let n="",r=0;for(;r<e;){let o=t[r];if(o<=127){n+=String.fromCharCode(o),r++;continue}let i=0,s=0;if(o<=223?(i=1,s=31&o):o<=239?(i=2,s=15&o):o<=244&&(i=3,s=7&o),e-r-i>0){let e=0;for(;e<i;)o=t[r+e+1],s=s<<6|63&o,e+=1}else s=65533,i=e-r;n+=String.fromCodePoint(s),r+=i+1}return n};if("undefined"!=typeof TextEncoder){const t=new TextEncoder;Sr=function(e,n,r=0,o=_r(n)){const i=Math.min(o,e.byteLength-r);return t.encodeInto(n,e.subarray(r,r+i)),i}}else Sr=function(t,e,n=0,r=_r(e)){const o=Math.min(r,t.byteLength-n);t=t.subarray(n,n+o);let i=0,s=0;for(;i<e.length;){const n=e.codePointAt(i);if(n<=127){t[s++]=n,i++;continue}let r=0,o=0;for(n<=2047?(r=6,o=192):n<=65535?(r=12,o=224):n<=2097151&&(r=18,o=240),t[s++]=o|n>>r,r-=6;r>=0;)t[s++]=128|n>>r&63,r-=6;i+=n>=65536?2:1}return o};function kr(t){return 2*t.length}var Qr={byteLength:kr,toString:function(t){const e=t.byteLength;let n="";for(let r=0;r<e-1;r+=2)n+=String.fromCharCode(t[r]+256*t[r+1]);return n},write:function(t,e,n=0,r=kr(e)){const o=Math.min(r,t.byteLength-n);let i=o;for(let r=0;r<e.length&&!((i-=2)<0);++r){const o=e.charCodeAt(r),i=o>>8,s=o%256;t[n+2*r]=s,t[n+2*r+1]=i}return o}};const Mr=Ir,Dr=br,Lr=vr,Tr={byteLength:_r,toString:xr,write:Sr},$r=Qr;function Ur(t){switch(t){case"ascii":return Mr;case"base64":return Dr;case"hex":return Lr;case"utf8":case"utf-8":case void 0:return Tr;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $r;default:throw new Error(`Unknown encoding: ${t}`)}}function Or(t){return t instanceof Uint8Array}function Fr(t,e,n){return"string"==typeof t?function(t,e){const n=Ur(e),r=new Uint8Array(n.byteLength(t));return n.write(r,t,0,r.byteLength),r}(t,e):Array.isArray(t)?function(t){const e=new Uint8Array(t.length);return e.set(t),e}(t):ArrayBuffer.isView(t)?function(t){const e=new Uint8Array(t.byteLength);return e.set(t),e}(t):function(t,e,n){return new Uint8Array(t,e,n)}(t,e,n)}function Nr(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}var Pr={isBuffer:Or,alloc:function(t,e,n){const r=new Uint8Array(t);return void 0!==e&&e(r,e,0,r.byteLength,n),r},allocUnsafe:function(t){return new Uint8Array(t)},allocUnsafeSlow:function(t){return new Uint8Array(t)},byteLength:function(t,e){return Ur(e).byteLength(t)},compare:function(t,e){if(t===e)return 0;const n=Math.min(t.byteLength,e.byteLength);t=new DataView(t.buffer,t.byteOffset,t.byteLength),e=new DataView(e.buffer,e.byteOffset,e.byteLength);let r=0;for(let o=n-n%4;r<o;r+=4){const n=t.getUint32(r),o=e.getUint32(r);if(n<o)return-1;if(n>o)return 1}for(;r<n;r++){const n=t.getUint8(r),o=e.getUint8(r);if(n<o)return-1;if(n>o)return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0},concat:function(t,e){void 0===e&&(e=t.reduce(((t,e)=>t+e.byteLength),0));const n=new Uint8Array(e);return t.reduce(((t,e)=>(n.set(e,t),t+e.byteLength)),0),n},copy:function(t,e,n=0,r=0,o=t.byteLength){if(o>0&&o<r)return 0;if(o===r)return 0;if(0===t.byteLength||0===e.byteLength)return 0;if(n<0)throw new RangeError("targetStart is out of range");if(r<0||r>=t.byteLength)throw new RangeError("sourceStart is out of range");if(o<0)throw new RangeError("sourceEnd is out of range");n>=e.byteLength&&(n=e.byteLength),o>t.byteLength&&(o=t.byteLength),e.byteLength-n<o-r&&(o=e.length-n+r);const i=o-r;return t===e?e.copyWithin(n,r,o):e.set(t.subarray(r,o),n),i},equals:function(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;const n=t.byteLength;t=new DataView(t.buffer,t.byteOffset,t.byteLength),e=new DataView(e.buffer,e.byteOffset,e.byteLength);let r=0;for(let o=n-n%4;r<o;r+=4)if(t.getUint32(r)!==e.getUint32(r))return!1;for(;r<n;r++)if(t.getUint8(r)!==e.getUint8(r))return!1;return!0},fill:function(t,e,n,r,o){if("string"==typeof e?"string"==typeof n?(o=n,n=0,r=t.byteLength):"string"==typeof r&&(o=r,r=t.byteLength):"number"==typeof val?e&=255:"boolean"==typeof val&&(e=+e),n<0||t.byteLength<n||t.byteLength<r)throw new RangeError("Out of range index");if(void 0===n&&(n=0),void 0===r&&(r=t.byteLength),r<=n)return t;if(e||(e=0),"number"==typeof e)for(let o=n;o<r;++o)t[o]=e;else{const i=(e=Or(e)?e:Fr(e,o)).byteLength;for(let o=0;o<r-n;++o)t[o+n]=e[o%i]}return t},from:Fr,swap16:function(t){const e=t.byteLength;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let n=0;n<e;n+=2)Nr(t,n,n+1);return t},swap32:function(t){const e=t.byteLength;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let n=0;n<e;n+=4)Nr(t,n,n+3),Nr(t,n+1,n+2);return t},swap64:function(t){const e=t.byteLength;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let n=0;n<e;n+=8)Nr(t,n,n+7),Nr(t,n+1,n+6),Nr(t,n+2,n+5),Nr(t,n+3,n+4);return t},toBuffer:function(t){return t},toString:function(t,e,n=0,r=t.byteLength){const o=t.byteLength;return n>=o||r<=n?"":(n<0&&(n=0),r>o&&(r=o),(0!==n||r<o)&&(t=t.subarray(n,r)),Ur(e).toString(t))},write:function(t,e,n,r,o){return void 0===n?o="utf8":void 0===r&&"string"==typeof n?(o=n,n=void 0):void 0===o&&"string"==typeof r&&(o=r,r=void 0),Ur(o).write(t,e,n,r)}};const Yr=cr,Kr=Pr;var Rr=Vr;const jr=128;var Hr=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Vr(){return this instanceof Vr?(this.hh=new Int32Array(8),this.hl=new Int32Array(8),this.buffer=new Uint8Array(128),this.finalised=!1,this.bytesRead=0,this.pos=0,this.hh[0]=1779033703,this.hh[1]=3144134277,this.hh[2]=1013904242,this.hh[3]=2773480762,this.hh[4]=1359893119,this.hh[5]=2600822924,this.hh[6]=528734635,this.hh[7]=1541459225,this.hl[0]=4089235720,this.hl[1]=2227873595,this.hl[2]=4271175723,this.hl[3]=1595750129,this.hl[4]=2917565137,this.hl[5]=725511199,this.hl[6]=4215389547,this.hl[7]=327033209,this):new Vr}function Gr(t,e,n,r){t[e]=n>>24&255,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n,t[e+4]=r>>24&255,t[e+5]=r>>16&255,t[e+6]=r>>8&255,t[e+7]=255&r}function qr(t,e,n,r){for(var o,i,s,a,c,u,l,h,f,g,A,d,p,y,I,m,E,w,b,C,v,B,_,x,S,k,Q=new Int32Array(16),M=new Int32Array(16),D=t[0],L=t[1],T=t[2],$=t[3],U=t[4],O=t[5],F=t[6],N=t[7],P=e[0],Y=e[1],K=e[2],R=e[3],j=e[4],H=e[5],V=e[6],G=e[7],q=0;r>=128;){for(b=0;b<16;b++)C=8*b+q,Q[b]=n[C+0]<<24|n[C+1]<<16|n[C+2]<<8|n[C+3],M[b]=n[C+4]<<24|n[C+5]<<16|n[C+6]<<8|n[C+7];for(b=0;b<80;b++)if(o=D,i=L,s=T,a=$,c=U,u=O,l=F,N,f=P,g=Y,A=K,d=R,p=j,y=H,I=V,G,_=65535&(B=G),x=B>>>16,S=65535&(v=N),k=v>>>16,_+=65535&(B=(j>>>14|U<<18)^(j>>>18|U<<14)^(U>>>9|j<<23)),x+=B>>>16,S+=65535&(v=(U>>>14|j<<18)^(U>>>18|j<<14)^(j>>>9|U<<23)),k+=v>>>16,_+=65535&(B=j&H^~j&V),x+=B>>>16,S+=65535&(v=U&O^~U&F),k+=v>>>16,_+=65535&(B=Hr[2*b+1]),x+=B>>>16,S+=65535&(v=Hr[2*b]),k+=v>>>16,v=Q[b%16],x+=(B=M[b%16])>>>16,S+=65535&v,k+=v>>>16,S+=(x+=(_+=65535&B)>>>16)>>>16,_=65535&(B=w=65535&_|x<<16),x=B>>>16,S=65535&(v=E=65535&S|(k+=S>>>16)<<16),k=v>>>16,_+=65535&(B=(P>>>28|D<<4)^(D>>>2|P<<30)^(D>>>7|P<<25)),x+=B>>>16,S+=65535&(v=(D>>>28|P<<4)^(P>>>2|D<<30)^(P>>>7|D<<25)),k+=v>>>16,x+=(B=P&Y^P&K^Y&K)>>>16,S+=65535&(v=D&L^D&T^L&T),k+=v>>>16,h=65535&(S+=(x+=(_+=65535&B)>>>16)>>>16)|(k+=S>>>16)<<16,m=65535&_|x<<16,_=65535&(B=d),x=B>>>16,S=65535&(v=a),k=v>>>16,x+=(B=w)>>>16,S+=65535&(v=E),k+=v>>>16,L=o,T=i,$=s,U=a=65535&(S+=(x+=(_+=65535&B)>>>16)>>>16)|(k+=S>>>16)<<16,O=c,F=u,N=l,D=h,Y=f,K=g,R=A,j=d=65535&_|x<<16,H=p,V=y,G=I,P=m,b%16==15)for(C=0;C<16;C++)v=Q[C],_=65535&(B=M[C]),x=B>>>16,S=65535&v,k=v>>>16,v=Q[(C+9)%16],_+=65535&(B=M[(C+9)%16]),x+=B>>>16,S+=65535&v,k+=v>>>16,E=Q[(C+1)%16],_+=65535&(B=((w=M[(C+1)%16])>>>1|E<<31)^(w>>>8|E<<24)^(w>>>7|E<<25)),x+=B>>>16,S+=65535&(v=(E>>>1|w<<31)^(E>>>8|w<<24)^E>>>7),k+=v>>>16,E=Q[(C+14)%16],x+=(B=((w=M[(C+14)%16])>>>19|E<<13)^(E>>>29|w<<3)^(w>>>6|E<<26))>>>16,S+=65535&(v=(E>>>19|w<<13)^(w>>>29|E<<3)^E>>>6),k+=v>>>16,k+=(S+=(x+=(_+=65535&B)>>>16)>>>16)>>>16,Q[C]=65535&S|k<<16,M[C]=65535&_|x<<16;_=65535&(B=P),x=B>>>16,S=65535&(v=D),k=v>>>16,v=t[0],x+=(B=e[0])>>>16,S+=65535&v,k+=v>>>16,k+=(S+=(x+=(_+=65535&B)>>>16)>>>16)>>>16,t[0]=D=65535&S|k<<16,e[0]=P=65535&_|x<<16,_=65535&(B=Y),x=B>>>16,S=65535&(v=L),k=v>>>16,v=t[1],x+=(B=e[1])>>>16,S+=65535&v,k+=v>>>16,k+=(S+=(x+=(_+=65535&B)>>>16)>>>16)>>>16,t[1]=L=65535&S|k<<16,e[1]=Y=65535&_|x<<16,_=65535&(B=K),x=B>>>16,S=65535&(v=T),k=v>>>16,v=t[2],x+=(B=e[2])>>>16,S+=65535&v,k+=v>>>16,k+=(S+=(x+=(_+=65535&B)>>>16)>>>16)>>>16,t[2]=T=65535&S|k<<16,e[2]=K=65535&_|x<<16,_=65535&(B=R),x=B>>>16,S=65535&(v=$),k=v>>>16,v=t[3],x+=(B=e[3])>>>16,S+=65535&v,k+=v>>>16,k+=(S+=(x+=(_+=65535&B)>>>16)>>>16)>>>16,t[3]=$=65535&S|k<<16,e[3]=R=65535&_|x<<16,_=65535&(B=j),x=B>>>16,S=65535&(v=U),k=v>>>16,v=t[4],x+=(B=e[4])>>>16,S+=65535&v,k+=v>>>16,k+=(S+=(x+=(_+=65535&B)>>>16)>>>16)>>>16,t[4]=U=65535&S|k<<16,e[4]=j=65535&_|x<<16,_=65535&(B=H),x=B>>>16,S=65535&(v=O),k=v>>>16,v=t[5],x+=(B=e[5])>>>16,S+=65535&v,k+=v>>>16,k+=(S+=(x+=(_+=65535&B)>>>16)>>>16)>>>16,t[5]=O=65535&S|k<<16,e[5]=H=65535&_|x<<16,_=65535&(B=V),x=B>>>16,S=65535&(v=F),k=v>>>16,v=t[6],x+=(B=e[6])>>>16,S+=65535&v,k+=v>>>16,k+=(S+=(x+=(_+=65535&B)>>>16)>>>16)>>>16,t[6]=F=65535&S|k<<16,e[6]=V=65535&_|x<<16,_=65535&(B=G),x=B>>>16,S=65535&(v=N),k=v>>>16,v=t[7],x+=(B=e[7])>>>16,S+=65535&v,k+=v>>>16,k+=(S+=(x+=(_+=65535&B)>>>16)>>>16)>>>16,t[7]=N=65535&S|k<<16,e[7]=G=65535&_|x<<16,q+=128,r-=128}}function zr(t){if(!(this instanceof zr))return new zr(t);this.pad=Kr.alloc(128),this.inner=Vr(),this.outer=Vr();const e=Kr.alloc(64);t.byteLength>128&&(Vr().update(t).digest(e),t=e),this.pad.fill(54);for(let e=0;e<t.byteLength;e++)this.pad[e]^=t[e];this.inner.update(this.pad),this.pad.fill(92);for(let e=0;e<t.byteLength;e++)this.pad[e]^=t[e];this.outer.update(this.pad),this.pad.fill(0),e.fill(0)}Vr.prototype.update=function(t,e){Yr(!1===this.finalised,"Hash instance finalised");var[n,r]=function(t,e){var n=Kr.from(t,e);return[n,n.byteLength]}(t,e);this.bytesRead+=r;const o=r+this.pos&-128;this.buffer.set(n.subarray(0,jr-this.pos),this.pos);const i=this.pos;return(r-=jr-this.pos)>=0&&(qr(this.hh,this.hl,this.buffer,128),this.pos=0),r>127&&(qr(this.hh,this.hl,n.subarray(jr-i,o-i),o-jr),r%=128),this.buffer.set(n.subarray(n.byteLength-r)),this.pos=127&this.bytesRead,this.buffer.fill(0,this.pos),this},Vr.prototype.digest=function(t,e=0){if(Yr(!1===this.finalised,"Hash instance finalised"),this.finalised=!0,this.buffer.fill(0,this.pos),this.buffer[this.pos]=128,this.pos>111&&(qr(this.hh,this.hl,this.buffer,128),this.buffer.fill(0),this.pos=0),Gr(this.buffer,120,this.bytesRead/536870912|0,this.bytesRead<<3),qr(this.hh,this.hl,this.buffer,128),t instanceof Uint8Array&&t.byteLength>63){for(let n=0;n<8;n++)Gr(t,8*n+e,this.hh[n],this.hl[n]);return t}const n=new Uint8Array(64);for(let t=0;t<8;t++)Gr(n,8*t,this.hh[t],this.hl[t]);return"string"==typeof t?Kr.toString(n,t):n},zr.prototype.update=function(t,e){return this.inner.update(t,e),this},zr.prototype.digest=function(t,e=0){return this.outer.update(this.inner.digest()),this.outer.digest(t,e)},Vr.HMAC=zr;var Jr,Wr,Xr={exports:{}},Zr=(()=>{for(var t=new Uint8Array(128),e=0;e<64;e++)t[e<26?e+65:e<52?e+71:e<62?e-4:4*e-205]=e;return e=>{for(var n=e.length,r=new Uint8Array(3*(n-("="==e[n-1])-("="==e[n-2]))/4|0),o=0,i=0;o<n;){var s=t[e.charCodeAt(o++)],a=t[e.charCodeAt(o++)],c=t[e.charCodeAt(o++)],u=t[e.charCodeAt(o++)];r[i++]=s<<2|a>>4,r[i++]=a<<4|c>>2,r[i++]=c<<6|u}return r}})(),to=(Jr={"wasm-binary:./sha512.wat"(t,e){e.exports=Zr("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")}},function(){return Wr||(0,Jr[Object.keys(Jr)[0]])((Wr={exports:{}}).exports,Wr),Wr.exports})(),eo=new WebAssembly.Module(to);const no=cr,ro=Pr,oo=(io={imports:{debug:{log(...t){console.log(...t.map((t=>(t>>>0).toString(16).padStart(8,"0"))))},log_tee:t=>(console.log((t>>>0).toString(16).padStart(8,"0")),t)}}},new WebAssembly.Instance(eo,io).exports);var io;let so=0;const ao=[];Xr.exports=lo;const co=Xr.exports.SHA512_BYTES=64,uo=128;function lo(){if(!(this instanceof lo))return new lo;if(!oo)throw new Error("WASM not loaded. Wait for Sha512.ready(cb)");ao.length||(ao.push(so),so+=216),this.finalized=!1,this.digestLength=co,this.pointer=ao.pop(),this.pos=0,this.wasm=oo,this._memory=new Uint8Array(oo.memory.buffer),this._memory.fill(0,this.pointer,this.pointer+216),this.pointer+this.digestLength>this._memory.length&&this._realloc(this.pointer+216)}function ho(t){if(!(this instanceof ho))return new ho(t);this.pad=ro.alloc(128),this.inner=lo(),this.outer=lo();const e=ro.alloc(64);t.byteLength>128&&(lo().update(t).digest(e),t=e),this.pad.fill(54);for(let e=0;e<t.byteLength;e++)this.pad[e]^=t[e];this.inner.update(this.pad),this.pad.fill(92);for(let e=0;e<t.byteLength;e++)this.pad[e]^=t[e];this.outer.update(this.pad),this.pad.fill(0),e.fill(0)}function fo(){}lo.prototype._realloc=function(t){oo.memory.grow(Math.max(0,Math.ceil(Math.abs(t-this._memory.length)/65536))),this._memory=new Uint8Array(oo.memory.buffer)},lo.prototype.update=function(t,e){no(!1===this.finalized,"Hash instance finalized"),so%8!=0&&(so+=8-so%8),no(so%8==0,"input should be aligned for int64");const[n,r]=function(t,e){var n=ro.from(t,e);return[n,n.byteLength]}(t,e);return no(n instanceof Uint8Array,"input must be Uint8Array or Buffer"),so+t.length>this._memory.length&&this._realloc(so+t.length),this._memory.fill(0,so,so+function(t,e){return t+e-1&-e}(r,uo)-uo),this._memory.set(n.subarray(0,uo-this.pos),this.pointer+80+this.pos),this._memory.set(n.subarray(uo-this.pos),so),this.pos=this.pos+r&127,oo.sha512(this.pointer,so,r,0),this},lo.prototype.digest=function(t,e=0){no(!1===this.finalized,"Hash instance finalized"),this.finalized=!0,ao.push(this.pointer);const n=this.pointer+80+this.pos;this._memory.fill(0,n,this.pointer+80+uo),oo.sha512(this.pointer,so,0,1);const r=this._memory.subarray(this.pointer,this.pointer+this.digestLength);if(!t)return r;if("string"==typeof t)return ro.toString(r,t);no(t instanceof Uint8Array,"output must be Uint8Array or Buffer"),no(t.byteLength>=this.digestLength+e,"output must have at least 'SHA512_BYTES' bytes remaining");for(let n=0;n<this.digestLength;n++)t[n+e]=r[n];return t},lo.WASM=oo,lo.WASM_SUPPORTED="undefined"!=typeof WebAssembly,lo.ready=function(t){return t||(t=fo),oo?(t(),Promise.resolve()):t(new Error("WebAssembly not supported"))},lo.prototype.ready=lo.ready,ho.prototype.update=function(t,e){return this.inner.update(t,e),this},ho.prototype.digest=function(t,e=0){return this.outer.update(this.inner.digest()),this.outer.digest(t,e)},lo.HMAC=ho;const go=Rr,Ao=Xr.exports;var po=go;pr.exports=function(){return new po},pr.exports.ready=function(t){Ao.ready((function(){t()}))},pr.exports.WASM_SUPPORTED=Ao.SUPPORTED,pr.exports.WASM_LOADED=!1,pr.exports.SHA512_BYTES=64,Ao.ready((function(t){t||(pr.exports.WASM_LOADED=!0,pr.exports=po=Ao)}));const{crypto_verify_32:yo}=fr.exports,Io=pr.exports,mo=cr;var Eo={crypto_auth_BYTES:32,crypto_auth_KEYBYTES:32,crypto_auth:function(t,e,n){mo(32===t.byteLength,"out should be 'crypto_auth_BYTES' in length"),mo(32===n.byteLength,"key should be 'crypto_auth_KEYBYTES' in length");const r=new Uint8Array(64),o=Io.HMAC(n);o.update(e),o.digest(r),t.set(r.subarray(0,32))},crypto_auth_verify:function(t,e,n){mo(32===t.byteLength,"h should be 'crypto_auth_BYTES' in length"),mo(32===n.byteLength,"key should be 'crypto_auth_KEYBYTES' in length");const r=Io.HMAC(n).update(e).digest();return yo(t,0,r,0)}};const wo=pr.exports,bo=cr;if(1!==new Uint16Array([1])[0])throw new Error("Big endian architecture is not supported.");function Co(t,e,n){return bo(64===t.byteLength,"out must be 'crypto_hash_sha512_BYTES' bytes long"),wo().update(e.subarray(0,n)).digest(t),0}var vo={crypto_hash:function(t,e,n){return Co(t,e,n)},crypto_hash_sha512:Co,crypto_hash_sha512_BYTES:64,crypto_hash_BYTES:64};if(1!==new Uint16Array([1])[0])throw new Error("Big endian architecture is not supported.");var Bo=function(t){var e,n=new Float64Array(16);if(t)for(e=0;e<t.length;e++)n[e]=t[e];return n},_o=new Uint8Array(32);_o[0]=9;var xo=Bo(),So=Bo([1]),ko=Bo([56129,1]),Qo=Bo([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),Mo=Bo([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),Do=Bo([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Lo=Bo([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),To=Bo([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function $o(t,e,n){var r,o,i=0,s=0,a=0,c=0,u=0,l=0,h=0,f=0,g=0,A=0,d=0,p=0,y=0,I=0,m=0,E=0,w=0,b=0,C=0,v=0,B=0,_=0,x=0,S=0,k=0,Q=0,M=0,D=0,L=0,T=0,$=0,U=n[0],O=n[1],F=n[2],N=n[3],P=n[4],Y=n[5],K=n[6],R=n[7],j=n[8],H=n[9],V=n[10],G=n[11],q=n[12],z=n[13],J=n[14],W=n[15];i+=(r=e[0])*U,s+=r*O,a+=r*F,c+=r*N,u+=r*P,l+=r*Y,h+=r*K,f+=r*R,g+=r*j,A+=r*H,d+=r*V,p+=r*G,y+=r*q,I+=r*z,m+=r*J,E+=r*W,s+=(r=e[1])*U,a+=r*O,c+=r*F,u+=r*N,l+=r*P,h+=r*Y,f+=r*K,g+=r*R,A+=r*j,d+=r*H,p+=r*V,y+=r*G,I+=r*q,m+=r*z,E+=r*J,w+=r*W,a+=(r=e[2])*U,c+=r*O,u+=r*F,l+=r*N,h+=r*P,f+=r*Y,g+=r*K,A+=r*R,d+=r*j,p+=r*H,y+=r*V,I+=r*G,m+=r*q,E+=r*z,w+=r*J,b+=r*W,c+=(r=e[3])*U,u+=r*O,l+=r*F,h+=r*N,f+=r*P,g+=r*Y,A+=r*K,d+=r*R,p+=r*j,y+=r*H,I+=r*V,m+=r*G,E+=r*q,w+=r*z,b+=r*J,C+=r*W,u+=(r=e[4])*U,l+=r*O,h+=r*F,f+=r*N,g+=r*P,A+=r*Y,d+=r*K,p+=r*R,y+=r*j,I+=r*H,m+=r*V,E+=r*G,w+=r*q,b+=r*z,C+=r*J,v+=r*W,l+=(r=e[5])*U,h+=r*O,f+=r*F,g+=r*N,A+=r*P,d+=r*Y,p+=r*K,y+=r*R,I+=r*j,m+=r*H,E+=r*V,w+=r*G,b+=r*q,C+=r*z,v+=r*J,B+=r*W,h+=(r=e[6])*U,f+=r*O,g+=r*F,A+=r*N,d+=r*P,p+=r*Y,y+=r*K,I+=r*R,m+=r*j,E+=r*H,w+=r*V,b+=r*G,C+=r*q,v+=r*z,B+=r*J,_+=r*W,f+=(r=e[7])*U,g+=r*O,A+=r*F,d+=r*N,p+=r*P,y+=r*Y,I+=r*K,m+=r*R,E+=r*j,w+=r*H,b+=r*V,C+=r*G,v+=r*q,B+=r*z,_+=r*J,x+=r*W,g+=(r=e[8])*U,A+=r*O,d+=r*F,p+=r*N,y+=r*P,I+=r*Y,m+=r*K,E+=r*R,w+=r*j,b+=r*H,C+=r*V,v+=r*G,B+=r*q,_+=r*z,x+=r*J,S+=r*W,A+=(r=e[9])*U,d+=r*O,p+=r*F,y+=r*N,I+=r*P,m+=r*Y,E+=r*K,w+=r*R,b+=r*j,C+=r*H,v+=r*V,B+=r*G,_+=r*q,x+=r*z,S+=r*J,k+=r*W,d+=(r=e[10])*U,p+=r*O,y+=r*F,I+=r*N,m+=r*P,E+=r*Y,w+=r*K,b+=r*R,C+=r*j,v+=r*H,B+=r*V,_+=r*G,x+=r*q,S+=r*z,k+=r*J,Q+=r*W,p+=(r=e[11])*U,y+=r*O,I+=r*F,m+=r*N,E+=r*P,w+=r*Y,b+=r*K,C+=r*R,v+=r*j,B+=r*H,_+=r*V,x+=r*G,S+=r*q,k+=r*z,Q+=r*J,M+=r*W,y+=(r=e[12])*U,I+=r*O,m+=r*F,E+=r*N,w+=r*P,b+=r*Y,C+=r*K,v+=r*R,B+=r*j,_+=r*H,x+=r*V,S+=r*G,k+=r*q,Q+=r*z,M+=r*J,D+=r*W,I+=(r=e[13])*U,m+=r*O,E+=r*F,w+=r*N,b+=r*P,C+=r*Y,v+=r*K,B+=r*R,_+=r*j,x+=r*H,S+=r*V,k+=r*G,Q+=r*q,M+=r*z,D+=r*J,L+=r*W,m+=(r=e[14])*U,E+=r*O,w+=r*F,b+=r*N,C+=r*P,v+=r*Y,B+=r*K,_+=r*R,x+=r*j,S+=r*H,k+=r*V,Q+=r*G,M+=r*q,D+=r*z,L+=r*J,T+=r*W,E+=(r=e[15])*U,s+=38*(b+=r*F),a+=38*(C+=r*N),c+=38*(v+=r*P),u+=38*(B+=r*Y),l+=38*(_+=r*K),h+=38*(x+=r*R),f+=38*(S+=r*j),g+=38*(k+=r*H),A+=38*(Q+=r*V),d+=38*(M+=r*G),p+=38*(D+=r*q),y+=38*(L+=r*z),I+=38*(T+=r*J),m+=38*($+=r*W),i=(r=(i+=38*(w+=r*O))+(o=1)+65535)-65536*(o=Math.floor(r/65536)),s=(r=s+o+65535)-65536*(o=Math.floor(r/65536)),a=(r=a+o+65535)-65536*(o=Math.floor(r/65536)),c=(r=c+o+65535)-65536*(o=Math.floor(r/65536)),u=(r=u+o+65535)-65536*(o=Math.floor(r/65536)),l=(r=l+o+65535)-65536*(o=Math.floor(r/65536)),h=(r=h+o+65535)-65536*(o=Math.floor(r/65536)),f=(r=f+o+65535)-65536*(o=Math.floor(r/65536)),g=(r=g+o+65535)-65536*(o=Math.floor(r/65536)),A=(r=A+o+65535)-65536*(o=Math.floor(r/65536)),d=(r=d+o+65535)-65536*(o=Math.floor(r/65536)),p=(r=p+o+65535)-65536*(o=Math.floor(r/65536)),y=(r=y+o+65535)-65536*(o=Math.floor(r/65536)),I=(r=I+o+65535)-65536*(o=Math.floor(r/65536)),m=(r=m+o+65535)-65536*(o=Math.floor(r/65536)),E=(r=E+o+65535)-65536*(o=Math.floor(r/65536)),i=(r=(i+=o-1+37*(o-1))+(o=1)+65535)-65536*(o=Math.floor(r/65536)),s=(r=s+o+65535)-65536*(o=Math.floor(r/65536)),a=(r=a+o+65535)-65536*(o=Math.floor(r/65536)),c=(r=c+o+65535)-65536*(o=Math.floor(r/65536)),u=(r=u+o+65535)-65536*(o=Math.floor(r/65536)),l=(r=l+o+65535)-65536*(o=Math.floor(r/65536)),h=(r=h+o+65535)-65536*(o=Math.floor(r/65536)),f=(r=f+o+65535)-65536*(o=Math.floor(r/65536)),g=(r=g+o+65535)-65536*(o=Math.floor(r/65536)),A=(r=A+o+65535)-65536*(o=Math.floor(r/65536)),d=(r=d+o+65535)-65536*(o=Math.floor(r/65536)),p=(r=p+o+65535)-65536*(o=Math.floor(r/65536)),y=(r=y+o+65535)-65536*(o=Math.floor(r/65536)),I=(r=I+o+65535)-65536*(o=Math.floor(r/65536)),m=(r=m+o+65535)-65536*(o=Math.floor(r/65536)),E=(r=E+o+65535)-65536*(o=Math.floor(r/65536)),i+=o-1+37*(o-1),t[0]=i,t[1]=s,t[2]=a,t[3]=c,t[4]=u,t[5]=l,t[6]=h,t[7]=f,t[8]=g,t[9]=A,t[10]=d,t[11]=p,t[12]=y,t[13]=I,t[14]=m,t[15]=E}function Uo(t,e){$o(t,e,e)}function Oo(t,e,n){for(var r,o=~(n-1),i=0;i<16;i++)r=o&(t[i]^e[i]),t[i]^=r,e[i]^=r}function Fo(t){var e,n,r=1;for(e=0;e<16;e++)n=t[e]+r+65535,r=Math.floor(n/65536),t[e]=n-65536*r;t[0]+=r-1+37*(r-1)}var No={gf:Bo,A:function(t,e,n){for(var r=0;r<16;r++)t[r]=e[r]+n[r]},Z:function(t,e,n){for(var r=0;r<16;r++)t[r]=e[r]-n[r]},M:$o,S:Uo,sel25519:Oo,pack25519:function(t,e){var n,r,o,i=Bo(),s=Bo();for(n=0;n<16;n++)s[n]=e[n];for(Fo(s),Fo(s),Fo(s),r=0;r<2;r++){for(i[0]=s[0]-65517,n=1;n<15;n++)i[n]=s[n]-65535-(i[n-1]>>16&1),i[n-1]&=65535;i[15]=s[15]-32767-(i[14]>>16&1),o=i[15]>>16&1,i[14]&=65535,Oo(s,i,1-o)}for(n=0;n<16;n++)t[2*n]=255&s[n],t[2*n+1]=s[n]>>8},unpack25519:function(t,e){var n;for(n=0;n<16;n++)t[n]=e[2*n]+(e[2*n+1]<<8);t[15]&=32767},inv25519:function(t,e){var n,r=Bo();for(n=0;n<16;n++)r[n]=e[n];for(n=253;n>=0;n--)Uo(r,r),2!==n&&4!==n&&$o(r,r,e);for(n=0;n<16;n++)t[n]=r[n]},gf0:xo,gf1:So,_9:_o,_121665:ko,D:Qo,D2:Mo,X:Do,Y:Lo,I:To};const{_9:Po,_121665:Yo,gf:Ko,inv25519:Ro,pack25519:jo,unpack25519:Ho,sel25519:Vo,A:Go,M:qo,Z:zo,S:Jo}=No;var Wo={crypto_scalarmult:Xo,crypto_scalarmult_base:function(t,e){return Xo(t,e,Po)},crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32};function Xo(t,e,n){Zo(t,32),Zo(e,32),Zo(n,32);var r,o,i=new Uint8Array(32),s=new Float64Array(80),a=Ko(),c=Ko(),u=Ko(),l=Ko(),h=Ko(),f=Ko();for(o=0;o<31;o++)i[o]=e[o];for(i[31]=127&e[31]|64,i[0]&=248,Ho(s,n),o=0;o<16;o++)c[o]=s[o],l[o]=a[o]=u[o]=0;for(a[0]=l[0]=1,o=254;o>=0;--o)r=i[o>>>3]>>>(7&o)&1,Vo(a,c,r),Vo(u,l,r),Go(h,a,u),zo(a,a,u),Go(u,c,l),zo(c,c,l),Jo(l,h),Jo(f,a),qo(a,u,a),qo(u,c,h),Go(h,a,u),zo(a,a,u),Jo(c,a),zo(u,l,f),qo(a,u,Yo),Go(a,a,l),qo(u,u,a),qo(a,l,f),qo(l,c,s),Jo(c,h),Vo(a,c,r),Vo(u,l,r);for(o=0;o<16;o++)s[o+16]=a[o],s[o+32]=u[o],s[o+48]=c[o],s[o+64]=l[o];var g=s.subarray(32),A=s.subarray(16);return Ro(g,g),qo(A,A,g),jo(t,A),0}function Zo(t,e){if(!t||e&&t.length<e)throw new Error("Argument must be a buffer"+(e?" of length "+e:""))}var ti,ei,ni={exports:{}},ri={exports:{}},oi={exports:{}};var ii=cr,si=Pr,ai=null,ci="undefined"!=typeof WebAssembly&&function(){if(ei)return ti;ei=1;var t=(()=>{for(var t=new Uint8Array(128),e=0;e<64;e++)t[e<26?e+65:e<52?e+71:e<62?e-4:4*e-205]=e;return e=>{for(var n=e.length,r=new Uint8Array(3*(n-("="==e[n-1])-("="==e[n-2]))/4|0),o=0,i=0;o<n;){var s=t[e.charCodeAt(o++)],a=t[e.charCodeAt(o++)],c=t[e.charCodeAt(o++)],u=t[e.charCodeAt(o++)];r[i++]=s<<2|a>>4,r[i++]=a<<4|c>>2,r[i++]=c<<6|u}return r}})(),e=((t,e)=>function(){return e||(0,t[Object.keys(t)[0]])((e={exports:{}}).exports,e),e.exports})({"wasm-binary:./blake2b.wat"(e,n){n.exports=t("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")}}),n=e(),r=WebAssembly.compile(n);return ti=async t=>(await WebAssembly.instantiate(await r,t)).exports,ti}()().then((t=>{ai=t})),ui=64,li=[];oi.exports=yi;var hi=oi.exports.BYTES_MIN=16,fi=oi.exports.BYTES_MAX=64;oi.exports.BYTES=32;var gi=oi.exports.KEYBYTES_MIN=16,Ai=oi.exports.KEYBYTES_MAX=64;oi.exports.KEYBYTES=32;var di=oi.exports.SALTBYTES=16,pi=oi.exports.PERSONALBYTES=16;function yi(t,e,n,r,o){if(!(this instanceof yi))return new yi(t,e,n,r,o);if(!ai)throw new Error("WASM not loaded. Wait for Blake2b.ready(cb)");t||(t=32),!0!==o&&(ii(t>=hi,"digestLength must be at least "+hi+", was given "+t),ii(t<=fi,"digestLength must be at most "+fi+", was given "+t),null!=e&&(ii(e instanceof Uint8Array,"key must be Uint8Array or Buffer"),ii(e.length>=gi,"key must be at least "+gi+", was given "+e.length),ii(e.length<=Ai,"key must be at least "+Ai+", was given "+e.length)),null!=n&&(ii(n instanceof Uint8Array,"salt must be Uint8Array or Buffer"),ii(n.length===di,"salt must be exactly "+di+", was given "+n.length)),null!=r&&(ii(r instanceof Uint8Array,"personal must be Uint8Array or Buffer"),ii(r.length===pi,"personal must be exactly "+pi+", was given "+r.length))),li.length||(li.push(ui),ui+=216),this.digestLength=t,this.finalized=!1,this.pointer=li.pop(),this._memory=new Uint8Array(ai.memory.buffer),this._memory.fill(0,0,64),this._memory[0]=this.digestLength,this._memory[1]=e?e.length:0,this._memory[2]=1,this._memory[3]=1,n&&this._memory.set(n,32),r&&this._memory.set(r,48),this.pointer+216>this._memory.length&&this._realloc(this.pointer+216),ai.blake2b_init(this.pointer,this.digestLength),e&&(this.update(e),this._memory.fill(0,ui,ui+e.length),this._memory[this.pointer+200]=128)}function Ii(){}yi.prototype._realloc=function(t){ai.memory.grow(Math.max(0,Math.ceil(Math.abs(t-this._memory.length)/65536))),this._memory=new Uint8Array(ai.memory.buffer)},yi.prototype.update=function(t){return ii(!1===this.finalized,"Hash instance finalized"),ii(t instanceof Uint8Array,"input must be Uint8Array or Buffer"),ui+t.length>this._memory.length&&this._realloc(ui+t.length),this._memory.set(t,ui),ai.blake2b_update(this.pointer,ui,ui+t.length),this},yi.prototype.digest=function(t){if(ii(!1===this.finalized,"Hash instance finalized"),this.finalized=!0,li.push(this.pointer),ai.blake2b_final(this.pointer),!t||"binary"===t)return this._memory.slice(this.pointer+128,this.pointer+128+this.digestLength);if("string"==typeof t)return si.toString(this._memory,t,this.pointer+128,this.pointer+128+this.digestLength);ii(t instanceof Uint8Array&&t.length>=this.digestLength,"input must be Uint8Array or Buffer");for(var e=0;e<this.digestLength;e++)t[e]=this._memory[this.pointer+128+e];return t},yi.prototype.final=yi.prototype.digest,yi.WASM=ai,yi.SUPPORTED="undefined"!=typeof WebAssembly,yi.ready=function(t){return t||(t=Ii),ci?ci.then((()=>t()),t):t(new Error("WebAssembly not supported"))},yi.prototype.ready=yi.ready,yi.prototype.getPartialHash=function(){return this._memory.slice(this.pointer,this.pointer+216)},yi.prototype.setPartialHash=function(t){this._memory.set(t,this.pointer)};var mi=cr,Ei=oi.exports;function wi(t,e,n){var r=t[e]+t[n],o=t[e+1]+t[n+1];r>=4294967296&&o++,t[e]=r,t[e+1]=o}function bi(t,e,n,r){var o=t[e]+n;n<0&&(o+=4294967296);var i=t[e+1]+r;o>=4294967296&&i++,t[e]=o,t[e+1]=i}function Ci(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function vi(t,e,n,r,o,i){var s=Si[o],a=Si[o+1],c=Si[i],u=Si[i+1];wi(xi,t,e),bi(xi,t,s,a);var l=xi[r]^xi[t],h=xi[r+1]^xi[t+1];xi[r]=h,xi[r+1]=l,wi(xi,n,r),l=xi[e]^xi[n],h=xi[e+1]^xi[n+1],xi[e]=l>>>24^h<<8,xi[e+1]=h>>>24^l<<8,wi(xi,t,e),bi(xi,t,c,u),l=xi[r]^xi[t],h=xi[r+1]^xi[t+1],xi[r]=l>>>16^h<<16,xi[r+1]=h>>>16^l<<16,wi(xi,n,r),l=xi[e]^xi[n],h=xi[e+1]^xi[n+1],xi[e]=h>>>31^l<<1,xi[e+1]=l>>>31^h<<1}var Bi=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),_i=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map((function(t){return 2*t}))),xi=new Uint32Array(32),Si=new Uint32Array(32);function ki(t,e){var n=0;for(n=0;n<16;n++)xi[n]=t.h[n],xi[n+16]=Bi[n];for(xi[24]=xi[24]^t.t,xi[25]=xi[25]^t.t/4294967296,e&&(xi[28]=~xi[28],xi[29]=~xi[29]),n=0;n<32;n++)Si[n]=Ci(t.b,4*n);for(n=0;n<12;n++)vi(0,8,16,24,_i[16*n+0],_i[16*n+1]),vi(2,10,18,26,_i[16*n+2],_i[16*n+3]),vi(4,12,20,28,_i[16*n+4],_i[16*n+5]),vi(6,14,22,30,_i[16*n+6],_i[16*n+7]),vi(0,10,20,30,_i[16*n+8],_i[16*n+9]),vi(2,12,22,24,_i[16*n+10],_i[16*n+11]),vi(4,14,16,26,_i[16*n+12],_i[16*n+13]),vi(6,8,18,28,_i[16*n+14],_i[16*n+15]);for(n=0;n<16;n++)t.h[n]=t.h[n]^xi[n]^xi[n+16]}var Qi=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function Mi(t,e,n,r){Qi.fill(0),this.b=new Uint8Array(128),this.h=new Uint32Array(16),this.t=0,this.c=0,this.outlen=t,Qi[0]=t,e&&(Qi[1]=e.length),Qi[2]=1,Qi[3]=1,n&&Qi.set(n,32),r&&Qi.set(r,48);for(var o=0;o<16;o++)this.h[o]=Bi[o]^Ci(Qi,4*o);e&&(Di(this,e),this.c=128)}function Di(t,e){for(var n=0;n<e.length;n++)128===t.c&&(t.t+=t.c,ki(t,!1),t.c=0),t.b[t.c++]=e[n]}function Li(t){return t<16?"0"+t.toString(16):t.toString(16)}Mi.prototype.update=function(t){return mi(t instanceof Uint8Array,"input must be Uint8Array or Buffer"),Di(this,t),this},Mi.prototype.digest=function(t){var e=t&&"binary"!==t&&"hex"!==t?t:new Uint8Array(this.outlen);return mi(e instanceof Uint8Array,'out must be "binary", "hex", Uint8Array, or Buffer'),mi(e.length>=this.outlen,"out must have at least outlen bytes of space"),function(t,e){t.t+=t.c;for(;t.c<128;)t.b[t.c++]=0;ki(t,!0);for(var n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(3&n)}(this,e),"hex"===t?function(t){for(var e="",n=0;n<t.length;n++)e+=Li(t[n]);return e}(e):e},Mi.prototype.final=Mi.prototype.digest,Mi.ready=function(t){Ei.ready((function(){t()}))};var Ti=Mi;ri.exports=function(t,e,n,r,o){return!0!==o&&(mi(t>=$i,"outlen must be at least "+$i+", was given "+t),mi(t<=Ui,"outlen must be at most "+Ui+", was given "+t),null!=e&&(mi(e instanceof Uint8Array,"key must be Uint8Array or Buffer"),mi(e.length>=Oi,"key must be at least "+Oi+", was given "+e.length),mi(e.length<=Fi,"key must be at most "+Fi+", was given "+e.length)),null!=n&&(mi(n instanceof Uint8Array,"salt must be Uint8Array or Buffer"),mi(n.length===Ni,"salt must be exactly "+Ni+", was given "+n.length)),null!=r&&(mi(r instanceof Uint8Array,"personal must be Uint8Array or Buffer"),mi(r.length===Pi,"personal must be exactly "+Pi+", was given "+r.length))),new Ti(t,e,n,r)},ri.exports.ready=function(t){Ei.ready((function(){t()}))},ri.exports.WASM_SUPPORTED=Ei.SUPPORTED,ri.exports.WASM_LOADED=!1;var $i=ri.exports.BYTES_MIN=16,Ui=ri.exports.BYTES_MAX=64;ri.exports.BYTES=32;var Oi=ri.exports.KEYBYTES_MIN=16,Fi=ri.exports.KEYBYTES_MAX=64;ri.exports.KEYBYTES=32;var Ni=ri.exports.SALTBYTES=16,Pi=ri.exports.PERSONALBYTES=16;Ei.ready((function(t){t||(ri.exports.WASM_LOADED=!0,ri.exports=Ei)})),function(t){var e=ri.exports;if(1!==new Uint16Array([1])[0])throw new Error("Big endian architecture is not supported.");t.exports.crypto_generichash_PRIMITIVE="blake2b",t.exports.crypto_generichash_BYTES_MIN=e.BYTES_MIN,t.exports.crypto_generichash_BYTES_MAX=e.BYTES_MAX,t.exports.crypto_generichash_BYTES=e.BYTES,t.exports.crypto_generichash_KEYBYTES_MIN=e.KEYBYTES_MIN,t.exports.crypto_generichash_KEYBYTES_MAX=e.KEYBYTES_MAX,t.exports.crypto_generichash_KEYBYTES=e.KEYBYTES,t.exports.crypto_generichash_WASM_SUPPORTED=e.WASM_SUPPORTED,t.exports.crypto_generichash_WASM_LOADED=!1,t.exports.crypto_generichash=function(t,n,r){e(t.length,r).update(n).final(t)},t.exports.crypto_generichash_ready=e.ready,t.exports.crypto_generichash_batch=function(t,n,r){for(var o=e(t.length,r),i=0;i<n.length;i++)o.update(n[i]);o.final(t)},t.exports.crypto_generichash_instance=function(n,r){return null==r&&(r=t.exports.crypto_generichash_BYTES),e(r,n)},e.ready((function(n){t.exports.crypto_generichash_WASM_LOADED=e.WASM_LOADED}))}(ni);var Yi,Ki,Ri={};var ji="undefined"!=typeof WebAssembly&&function(){if(Ki)return Yi;Ki=1;var t=(()=>{for(var t=new Uint8Array(128),e=0;e<64;e++)t[e<26?e+65:e<52?e+71:e<62?e-4:4*e-205]=e;return e=>{for(var n=e.length,r=new Uint8Array(3*(n-("="==e[n-1])-("="==e[n-2]))/4|0),o=0,i=0;o<n;){var s=t[e.charCodeAt(o++)],a=t[e.charCodeAt(o++)],c=t[e.charCodeAt(o++)],u=t[e.charCodeAt(o++)];r[i++]=s<<2|a>>4,r[i++]=a<<4|c>>2,r[i++]=c<<6|u}return r}})(),e=((t,e)=>function(){return e||(0,t[Object.keys(t)[0]])((e={exports:{}}).exports,e),e.exports})({"wasm-binary:./xsalsa20.wat"(e,n){n.exports=t("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")}}),n=e(),r=new WebAssembly.Module(n);return Yi=t=>new WebAssembly.Instance(r,t).exports,Yi}()(),Hi=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]),Vi=144,Gi=Vi,qi=[],zi=Ji;function Ji(t,e){if(!(this instanceof Ji))return new Ji(t,e);if(!t||t.length<24)throw new Error("nonce must be at least 24 bytes");if(!e||e.length<32)throw new Error("key must be at least 32 bytes");this._xor=ji?new Wi(t,e):new Xi(t,e)}function Wi(t,e){qi.length||(qi.push(Vi),Vi+=64),this._pointer=qi.pop(),this._nonce=this._pointer+8,this._key=this._nonce+24,this._overflow=0,this._memory=new Uint8Array(ji.memory.buffer),this._memory.fill(0,this._pointer,this._pointer+8),this._memory.set(t,this._nonce),this._memory.set(e,this._key)}function Xi(t,e){this._s=new Uint8Array(32),this._z=new Uint8Array(16),this._overflow=0,ts(this._s,t,e,Hi);for(var n=0;n<8;n++)this._z[n]=t[n+16]}function Zi(t,e,n,r){for(var o,i=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,s=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,a=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,c=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,u=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,l=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,h=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,f=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,g=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,A=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,d=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,p=255&n[16]|(255&n[17])<<8|(255&n[18])<<16|(255&n[19])<<24,y=255&n[20]|(255&n[21])<<8|(255&n[22])<<16|(255&n[23])<<24,I=255&n[24]|(255&n[25])<<8|(255&n[26])<<16|(255&n[27])<<24,m=255&n[28]|(255&n[29])<<8|(255&n[30])<<16|(255&n[31])<<24,E=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,w=i,b=s,C=a,v=c,B=u,_=l,x=h,S=f,k=g,Q=A,M=d,D=p,L=y,T=I,$=m,U=E,O=0;O<20;O+=2)w^=(o=(L^=(o=(k^=(o=(B^=(o=w+L|0)<<7|o>>>25)+w|0)<<9|o>>>23)+B|0)<<13|o>>>19)+k|0)<<18|o>>>14,_^=(o=(b^=(o=(T^=(o=(Q^=(o=_+b|0)<<7|o>>>25)+_|0)<<9|o>>>23)+Q|0)<<13|o>>>19)+T|0)<<18|o>>>14,M^=(o=(x^=(o=(C^=(o=($^=(o=M+x|0)<<7|o>>>25)+M|0)<<9|o>>>23)+$|0)<<13|o>>>19)+C|0)<<18|o>>>14,U^=(o=(D^=(o=(S^=(o=(v^=(o=U+D|0)<<7|o>>>25)+U|0)<<9|o>>>23)+v|0)<<13|o>>>19)+S|0)<<18|o>>>14,w^=(o=(v^=(o=(C^=(o=(b^=(o=w+v|0)<<7|o>>>25)+w|0)<<9|o>>>23)+b|0)<<13|o>>>19)+C|0)<<18|o>>>14,_^=(o=(B^=(o=(S^=(o=(x^=(o=_+B|0)<<7|o>>>25)+_|0)<<9|o>>>23)+x|0)<<13|o>>>19)+S|0)<<18|o>>>14,M^=(o=(Q^=(o=(k^=(o=(D^=(o=M+Q|0)<<7|o>>>25)+M|0)<<9|o>>>23)+D|0)<<13|o>>>19)+k|0)<<18|o>>>14,U^=(o=($^=(o=(T^=(o=(L^=(o=U+$|0)<<7|o>>>25)+U|0)<<9|o>>>23)+L|0)<<13|o>>>19)+T|0)<<18|o>>>14;w=w+i|0,b=b+s|0,C=C+a|0,v=v+c|0,B=B+u|0,_=_+l|0,x=x+h|0,S=S+f|0,k=k+g|0,Q=Q+A|0,M=M+d|0,D=D+p|0,L=L+y|0,T=T+I|0,$=$+m|0,U=U+E|0,t[0]=w>>>0&255,t[1]=w>>>8&255,t[2]=w>>>16&255,t[3]=w>>>24&255,t[4]=b>>>0&255,t[5]=b>>>8&255,t[6]=b>>>16&255,t[7]=b>>>24&255,t[8]=C>>>0&255,t[9]=C>>>8&255,t[10]=C>>>16&255,t[11]=C>>>24&255,t[12]=v>>>0&255,t[13]=v>>>8&255,t[14]=v>>>16&255,t[15]=v>>>24&255,t[16]=B>>>0&255,t[17]=B>>>8&255,t[18]=B>>>16&255,t[19]=B>>>24&255,t[20]=_>>>0&255,t[21]=_>>>8&255,t[22]=_>>>16&255,t[23]=_>>>24&255,t[24]=x>>>0&255,t[25]=x>>>8&255,t[26]=x>>>16&255,t[27]=x>>>24&255,t[28]=S>>>0&255,t[29]=S>>>8&255,t[30]=S>>>16&255,t[31]=S>>>24&255,t[32]=k>>>0&255,t[33]=k>>>8&255,t[34]=k>>>16&255,t[35]=k>>>24&255,t[36]=Q>>>0&255,t[37]=Q>>>8&255,t[38]=Q>>>16&255,t[39]=Q>>>24&255,t[40]=M>>>0&255,t[41]=M>>>8&255,t[42]=M>>>16&255,t[43]=M>>>24&255,t[44]=D>>>0&255,t[45]=D>>>8&255,t[46]=D>>>16&255,t[47]=D>>>24&255,t[48]=L>>>0&255,t[49]=L>>>8&255,t[50]=L>>>16&255,t[51]=L>>>24&255,t[52]=T>>>0&255,t[53]=T>>>8&255,t[54]=T>>>16&255,t[55]=T>>>24&255,t[56]=$>>>0&255,t[57]=$>>>8&255,t[58]=$>>>16&255,t[59]=$>>>24&255,t[60]=U>>>0&255,t[61]=U>>>8&255,t[62]=U>>>16&255,t[63]=U>>>24&255}function ts(t,e,n,r){for(var o,i=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,s=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,a=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,c=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,u=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,l=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,h=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,f=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,g=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,A=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,d=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,p=255&n[16]|(255&n[17])<<8|(255&n[18])<<16|(255&n[19])<<24,y=255&n[20]|(255&n[21])<<8|(255&n[22])<<16|(255&n[23])<<24,I=255&n[24]|(255&n[25])<<8|(255&n[26])<<16|(255&n[27])<<24,m=255&n[28]|(255&n[29])<<8|(255&n[30])<<16|(255&n[31])<<24,E=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,w=0;w<20;w+=2)i^=(o=(y^=(o=(g^=(o=(u^=(o=i+y|0)<<7|o>>>25)+i|0)<<9|o>>>23)+u|0)<<13|o>>>19)+g|0)<<18|o>>>14,l^=(o=(s^=(o=(I^=(o=(A^=(o=l+s|0)<<7|o>>>25)+l|0)<<9|o>>>23)+A|0)<<13|o>>>19)+I|0)<<18|o>>>14,d^=(o=(h^=(o=(a^=(o=(m^=(o=d+h|0)<<7|o>>>25)+d|0)<<9|o>>>23)+m|0)<<13|o>>>19)+a|0)<<18|o>>>14,E^=(o=(p^=(o=(f^=(o=(c^=(o=E+p|0)<<7|o>>>25)+E|0)<<9|o>>>23)+c|0)<<13|o>>>19)+f|0)<<18|o>>>14,i^=(o=(c^=(o=(a^=(o=(s^=(o=i+c|0)<<7|o>>>25)+i|0)<<9|o>>>23)+s|0)<<13|o>>>19)+a|0)<<18|o>>>14,l^=(o=(u^=(o=(f^=(o=(h^=(o=l+u|0)<<7|o>>>25)+l|0)<<9|o>>>23)+h|0)<<13|o>>>19)+f|0)<<18|o>>>14,d^=(o=(A^=(o=(g^=(o=(p^=(o=d+A|0)<<7|o>>>25)+d|0)<<9|o>>>23)+p|0)<<13|o>>>19)+g|0)<<18|o>>>14,E^=(o=(m^=(o=(I^=(o=(y^=(o=E+m|0)<<7|o>>>25)+E|0)<<9|o>>>23)+y|0)<<13|o>>>19)+I|0)<<18|o>>>14;t[0]=i>>>0&255,t[1]=i>>>8&255,t[2]=i>>>16&255,t[3]=i>>>24&255,t[4]=l>>>0&255,t[5]=l>>>8&255,t[6]=l>>>16&255,t[7]=l>>>24&255,t[8]=d>>>0&255,t[9]=d>>>8&255,t[10]=d>>>16&255,t[11]=d>>>24&255,t[12]=E>>>0&255,t[13]=E>>>8&255,t[14]=E>>>16&255,t[15]=E>>>24&255,t[16]=h>>>0&255,t[17]=h>>>8&255,t[18]=h>>>16&255,t[19]=h>>>24&255,t[20]=f>>>0&255,t[21]=f>>>8&255,t[22]=f>>>16&255,t[23]=f>>>24&255,t[24]=g>>>0&255,t[25]=g>>>8&255,t[26]=g>>>16&255,t[27]=g>>>24&255,t[28]=A>>>0&255,t[29]=A>>>8&255,t[30]=A>>>16&255,t[31]=A>>>24&255}if(Ji.NONCEBYTES=24,Ji.KEYBYTES=32,Ji.core_hsalsa20=ts,Ji.SIGMA=Hi,Ji.prototype.update=function(t,e){if(!t)throw new Error("input must be Uint8Array or Buffer");return e||(e=new Uint8Array(t.length)),t.length&&this._xor.update(t,e),e},Ji.prototype.final=Ji.prototype.finalize=function(){this._xor.finalize(),this._xor=null},Wi.prototype.realloc=function(t){ji.memory.grow(Math.ceil(Math.abs(t-this._memory.length)/65536)),this._memory=new Uint8Array(ji.memory.buffer)},Wi.prototype.update=function(t,e){var n=this._overflow+t.length,r=Vi+this._overflow;(Gi=Vi+n)>=this._memory.length&&this.realloc(Gi),this._memory.set(t,r),ji.xsalsa20_xor(this._pointer,Vi,Vi,n,this._nonce,this._key),e.set(this._memory.subarray(r,Vi+n)),this._overflow=63&n},Wi.prototype.finalize=function(){this._memory.fill(0,this._pointer,this._key+32),Gi>Vi&&(this._memory.fill(0,Vi,Gi),Gi=0),qi.push(this._pointer)},Xi.prototype.update=function(t,e){for(var n=new Uint8Array(64),r=0,o=this._overflow,i=t.length+this._overflow,s=this._z,a=-this._overflow,c=-this._overflow;i>=64;){for(Zi(n,s,this._s,Hi);o<64;o++)e[c+o]=t[a+o]^n[o];for(r=1,o=8;o<16;o++)r+=255&s[o]|0,s[o]=255&r,r>>>=8;i-=64,c+=64,a+=64,o=0}if(i>0)for(Zi(n,s,this._s,Hi);o<i;o++)e[c+o]=t[a+o]^n[o];this._overflow=63&i},Xi.prototype.finalize=function(){this._s.fill(0),this._z.fill(0)},function(t){const e=zi;if(1!==new Uint16Array([1])[0])throw new Error("Big endian architecture is not supported.");function n(t,n){this._instance=e(t,n)}t.crypto_stream_KEYBYTES=32,t.crypto_stream_NONCEBYTES=24,t.crypto_stream_PRIMITIVE="xsalsa20",t.crypto_stream_xsalsa20_MESSAGEBYTES_MAX=Number.MAX_SAFE_INTEGER,t.crypto_stream=function(e,n,r){e.fill(0),t.crypto_stream_xor(e,e,n,r)},t.crypto_stream_xor=function(t,n,r,o){const i=e(r,o);i.update(n,t),i.final()},t.crypto_stream_xor_instance=function(t,e){return new n(t,e)},n.prototype.update=function(t,e){this._instance.update(e,t)},n.prototype.final=function(){this._instance.finalize(),this._instance=null}}(Ri),1!==new Uint16Array([1])[0])throw new Error("Big endian architecture is not supported.");var es=function(t){var e,n,r,o,i,s,a,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,e=255&t[0]|(255&t[1])<<8,this.r[0]=8191&e,n=255&t[2]|(255&t[3])<<8,this.r[1]=8191&(e>>>13|n<<3),r=255&t[4]|(255&t[5])<<8,this.r[2]=7939&(n>>>10|r<<6),o=255&t[6]|(255&t[7])<<8,this.r[3]=8191&(r>>>7|o<<9),i=255&t[8]|(255&t[9])<<8,this.r[4]=255&(o>>>4|i<<12),this.r[5]=i>>>1&8190,s=255&t[10]|(255&t[11])<<8,this.r[6]=8191&(i>>>14|s<<2),a=255&t[12]|(255&t[13])<<8,this.r[7]=8065&(s>>>11|a<<5),c=255&t[14]|(255&t[15])<<8,this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127,this.pad[0]=255&t[16]|(255&t[17])<<8,this.pad[1]=255&t[18]|(255&t[19])<<8,this.pad[2]=255&t[20]|(255&t[21])<<8,this.pad[3]=255&t[22]|(255&t[23])<<8,this.pad[4]=255&t[24]|(255&t[25])<<8,this.pad[5]=255&t[26]|(255&t[27])<<8,this.pad[6]=255&t[28]|(255&t[29])<<8,this.pad[7]=255&t[30]|(255&t[31])<<8};es.prototype.blocks=function(t,e,n){for(var r,o,i,s,a,c,u,l,h,f,g,A,d,p,y,I,m,E,w,b=this.fin?0:2048,C=this.h[0],v=this.h[1],B=this.h[2],_=this.h[3],x=this.h[4],S=this.h[5],k=this.h[6],Q=this.h[7],M=this.h[8],D=this.h[9],L=this.r[0],T=this.r[1],$=this.r[2],U=this.r[3],O=this.r[4],F=this.r[5],N=this.r[6],P=this.r[7],Y=this.r[8],K=this.r[9];n>=16;)f=h=0,f+=(C+=8191&(r=255&t[e+0]|(255&t[e+1])<<8))*L,f+=(v+=8191&(r>>>13|(o=255&t[e+2]|(255&t[e+3])<<8)<<3))*(5*K),f+=(B+=8191&(o>>>10|(i=255&t[e+4]|(255&t[e+5])<<8)<<6))*(5*Y),f+=(_+=8191&(i>>>7|(s=255&t[e+6]|(255&t[e+7])<<8)<<9))*(5*P),h=(f+=(x+=8191&(s>>>4|(a=255&t[e+8]|(255&t[e+9])<<8)<<12))*(5*N))>>>13,f&=8191,f+=(S+=a>>>1&8191)*(5*F),f+=(k+=8191&(a>>>14|(c=255&t[e+10]|(255&t[e+11])<<8)<<2))*(5*O),f+=(Q+=8191&(c>>>11|(u=255&t[e+12]|(255&t[e+13])<<8)<<5))*(5*U),f+=(M+=8191&(u>>>8|(l=255&t[e+14]|(255&t[e+15])<<8)<<8))*(5*$),g=h+=(f+=(D+=l>>>5|b)*(5*T))>>>13,g+=C*T,g+=v*L,g+=B*(5*K),g+=_*(5*Y),h=(g+=x*(5*P))>>>13,g&=8191,g+=S*(5*N),g+=k*(5*F),g+=Q*(5*O),g+=M*(5*U),h+=(g+=D*(5*$))>>>13,g&=8191,A=h,A+=C*$,A+=v*T,A+=B*L,A+=_*(5*K),h=(A+=x*(5*Y))>>>13,A&=8191,A+=S*(5*P),A+=k*(5*N),A+=Q*(5*F),A+=M*(5*O),d=h+=(A+=D*(5*U))>>>13,d+=C*U,d+=v*$,d+=B*T,d+=_*L,h=(d+=x*(5*K))>>>13,d&=8191,d+=S*(5*Y),d+=k*(5*P),d+=Q*(5*N),d+=M*(5*F),p=h+=(d+=D*(5*O))>>>13,p+=C*O,p+=v*U,p+=B*$,p+=_*T,h=(p+=x*L)>>>13,p&=8191,p+=S*(5*K),p+=k*(5*Y),p+=Q*(5*P),p+=M*(5*N),y=h+=(p+=D*(5*F))>>>13,y+=C*F,y+=v*O,y+=B*U,y+=_*$,h=(y+=x*T)>>>13,y&=8191,y+=S*L,y+=k*(5*K),y+=Q*(5*Y),y+=M*(5*P),I=h+=(y+=D*(5*N))>>>13,I+=C*N,I+=v*F,I+=B*O,I+=_*U,h=(I+=x*$)>>>13,I&=8191,I+=S*T,I+=k*L,I+=Q*(5*K),I+=M*(5*Y),m=h+=(I+=D*(5*P))>>>13,m+=C*P,m+=v*N,m+=B*F,m+=_*O,h=(m+=x*U)>>>13,m&=8191,m+=S*$,m+=k*T,m+=Q*L,m+=M*(5*K),E=h+=(m+=D*(5*Y))>>>13,E+=C*Y,E+=v*P,E+=B*N,E+=_*F,h=(E+=x*O)>>>13,E&=8191,E+=S*U,E+=k*$,E+=Q*T,E+=M*L,w=h+=(E+=D*(5*K))>>>13,w+=C*K,w+=v*Y,w+=B*P,w+=_*N,h=(w+=x*F)>>>13,w&=8191,w+=S*O,w+=k*U,w+=Q*$,w+=M*T,C=f=8191&(h=(h=((h+=(w+=D*L)>>>13)<<2)+h|0)+(f&=8191)|0),v=g+=h>>>=13,B=A&=8191,_=d&=8191,x=p&=8191,S=y&=8191,k=I&=8191,Q=m&=8191,M=E&=8191,D=w&=8191,e+=16,n-=16;this.h[0]=C,this.h[1]=v,this.h[2]=B,this.h[3]=_,this.h[4]=x,this.h[5]=S,this.h[6]=k,this.h[7]=Q,this.h[8]=M,this.h[9]=D},es.prototype.finish=function(t,e){var n,r,o,i,s=new Uint16Array(10);if(this.leftover){for(i=this.leftover,this.buffer[i++]=1;i<16;i++)this.buffer[i]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(n=this.h[1]>>>13,this.h[1]&=8191,i=2;i<10;i++)this.h[i]+=n,n=this.h[i]>>>13,this.h[i]&=8191;for(this.h[0]+=5*n,n=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=n,n=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=n,s[0]=this.h[0]+5,n=s[0]>>>13,s[0]&=8191,i=1;i<10;i++)s[i]=this.h[i]+n,n=s[i]>>>13,s[i]&=8191;for(s[9]-=8192,r=(1^n)-1,i=0;i<10;i++)s[i]&=r;for(r=~r,i=0;i<10;i++)this.h[i]=this.h[i]&r|s[i];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),o=this.h[0]+this.pad[0],this.h[0]=65535&o,i=1;i<8;i++)o=(this.h[i]+this.pad[i]|0)+(o>>>16)|0,this.h[i]=65535&o;t[e+0]=this.h[0]>>>0&255,t[e+1]=this.h[0]>>>8&255,t[e+2]=this.h[1]>>>0&255,t[e+3]=this.h[1]>>>8&255,t[e+4]=this.h[2]>>>0&255,t[e+5]=this.h[2]>>>8&255,t[e+6]=this.h[3]>>>0&255,t[e+7]=this.h[3]>>>8&255,t[e+8]=this.h[4]>>>0&255,t[e+9]=this.h[4]>>>8&255,t[e+10]=this.h[5]>>>0&255,t[e+11]=this.h[5]>>>8&255,t[e+12]=this.h[6]>>>0&255,t[e+13]=this.h[6]>>>8&255,t[e+14]=this.h[7]>>>0&255,t[e+15]=this.h[7]>>>8&255},es.prototype.update=function(t,e,n){var r,o;if(this.leftover){for((o=16-this.leftover)>n&&(o=n),r=0;r<o;r++)this.buffer[this.leftover+r]=t[e+r];if(n-=o,e+=o,this.leftover+=o,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(n>=16&&(o=n-n%16,this.blocks(t,e,o),e+=o,n-=o),n){for(r=0;r<n;r++)this.buffer[this.leftover+r]=t[e+r];this.leftover+=n}};var ns=es;const rs=cr,os=ns,{crypto_verify_16:is}=fr.exports;var ss={crypto_onetimeauth:as,crypto_onetimeauth_verify:function(t,e,n){rs(16===t.byteLength,"mac must be 'crypto_onetimeauth_BYTES' bytes"),rs(null!=e.byteLength,"msg must be buffer"),rs(32===n.byteLength,"key must be 'crypto_onetimeauth_KEYBYTES' bytes");var r=new Uint8Array(16);return as(r,e,n),is(t,0,r,0)},crypto_onetimeauth_BYTES:16,crypto_onetimeauth_KEYBYTES:32,crypto_onetimeauth_PRIMITIVE:"poly1305"};function as(t,e,n){rs(16===t.byteLength,"mac must be 'crypto_onetimeauth_BYTES' bytes"),rs(null!=e.byteLength,"msg must be buffer"),rs(32===n.byteLength,"key must be 'crypto_onetimeauth_KEYBYTES' bytes");var r=new os(n);r.update(e,0,e.byteLength),r.finish(t,0)}const cs=cr,{crypto_stream:us,crypto_stream_xor:ls}=Ri,{crypto_onetimeauth:hs,crypto_onetimeauth_verify:fs,crypto_onetimeauth_BYTES:gs,crypto_onetimeauth_KEYBYTES:As}=ss,ds=32,ps=24,ys=32,Is=16;var ms={crypto_secretbox:Es,crypto_secretbox_open:ws,crypto_secretbox_detached:function(t,e,n,r,o){cs(t.byteLength===n.byteLength,"o must be 'msg.byteLength' bytes"),cs(16===e.byteLength,"mac must be 'crypto_secretbox_MACBYTES' bytes"),cs(r.byteLength===ps,"n must be 'crypto_secretbox_NONCEBYTES' bytes"),cs(o.byteLength===ds,"k must be 'crypto_secretbox_KEYBYTES' bytes");const i=new Uint8Array(n.byteLength+e.byteLength);return bs(i,n,r,o),e.set(i.subarray(0,e.byteLength)),t.set(i.subarray(e.byteLength)),!0},crypto_secretbox_open_detached:function(t,e,n,r,o){cs(e.byteLength===t.byteLength,"o must be 'msg.byteLength' bytes"),cs(16===n.byteLength,"mac must be 'crypto_secretbox_MACBYTES' bytes"),cs(r.byteLength===ps,"n must be 'crypto_secretbox_NONCEBYTES' bytes"),cs(o.byteLength===ds,"k must be 'crypto_secretbox_KEYBYTES' bytes");const i=new Uint8Array(e.byteLength+n.byteLength);return i.set(n),i.set(e,n.byteLength),Cs(t,i,r,o)},crypto_secretbox_easy:bs,crypto_secretbox_open_easy:Cs,crypto_secretbox_KEYBYTES:ds,crypto_secretbox_NONCEBYTES:ps,crypto_secretbox_ZEROBYTES:ys,crypto_secretbox_BOXZEROBYTES:Is,crypto_secretbox_MACBYTES:16};function Es(t,e,n,r){cs(t.byteLength===e.byteLength,"c must be 'm.byteLength' bytes");const o=e.byteLength;cs(o>=ys,"mlen must be at least 'crypto_secretbox_ZEROBYTES'"),cs(n.byteLength===ps,"n must be 'crypto_secretbox_NONCEBYTES' bytes"),cs(r.byteLength===ds,"k must be 'crypto_secretbox_KEYBYTES' bytes"),ls(t,e,n,r),hs(t.subarray(Is,Is+gs),t.subarray(Is+gs,t.byteLength),t.subarray(0,As)),t.fill(0,0,Is)}function ws(t,e,n,r){cs(e.byteLength===t.byteLength,"c must be 'm.byteLength' bytes");const o=t.byteLength;cs(o>=ys,"mlen must be at least 'crypto_secretbox_ZEROBYTES'"),cs(n.byteLength===ps,"n must be 'crypto_secretbox_NONCEBYTES' bytes"),cs(r.byteLength===ds,"k must be 'crypto_secretbox_KEYBYTES' bytes");const i=new Uint8Array(As);us(i,n,r);return!1!==fs(e.subarray(Is,Is+gs),e.subarray(Is+gs,e.byteLength),i)&&(ls(t,e,n,r),t.fill(0,0,32),!0)}function bs(t,e,n,r){cs(t.byteLength===e.byteLength+16,"o must be 'msg.byteLength + crypto_secretbox_MACBYTES' bytes"),cs(n.byteLength===ps,"n must be 'crypto_secretbox_NONCEBYTES' bytes"),cs(r.byteLength===ds,"k must be 'crypto_secretbox_KEYBYTES' bytes");const o=new Uint8Array(ys+e.byteLength),i=new Uint8Array(o.byteLength);o.set(e,ys),Es(i,o,n,r),t.set(i.subarray(Is))}function Cs(t,e,n,r){cs(e.byteLength===t.byteLength+16,"box must be 'msg.byteLength + crypto_secretbox_MACBYTES' bytes"),cs(n.byteLength===ps,"n must be 'crypto_secretbox_NONCEBYTES' bytes"),cs(r.byteLength===ds,"k must be 'crypto_secretbox_KEYBYTES' bytes");const o=new Uint8Array(Is+e.byteLength),i=new Uint8Array(o.byteLength);return o.set(e,Is),!1!==ws(i,o,n,r)&&(t.set(i.subarray(ys)),!0)}const{crypto_hash_sha512:vs}=vo,{crypto_scalarmult:Bs,crypto_scalarmult_base:_s}=Wo,{randombytes:xs}=ar.exports,{crypto_generichash_batch:Ss}=ni.exports,{crypto_stream_xsalsa20_MESSAGEBYTES_MAX:ks}=Ri,{crypto_secretbox_open_easy:Qs,crypto_secretbox_easy:Ms,crypto_secretbox_detached:Ds,crypto_secretbox_open_detached:Ls}=ms,Ts=zi,$s=cr,Us=32,Os=32,Fs=16,Ns=ks-16;var Ps={crypto_box_easy:function(t,e,n,r,o){return $s(t.length>=e.length+Fs,"c should be at least 'm.length + crypto_box_MACBYTES' bytes"),$s(e.length<=Ns,"m should be at most 'crypto_box_MESSAGEBYTES_MAX' bytes"),Rs(t.subarray(Fs,e.length+Fs),t.subarray(0,Fs),e,n,r,o)},crypto_box_open_easy:function(t,e,n,r,o){return $s(e.length>=t.length+Fs,"c should be at least 'm.length + crypto_box_MACBYTES' bytes"),js(t,e.subarray(Fs,t.length+Fs),e.subarray(0,Fs),n,r,o)},crypto_box_keypair:Ys,crypto_box_seed_keypair:function(t,e,n){$s(t.byteLength===Us,"pk should be 'crypto_box_PUBLICKEYBYTES' bytes"),$s(e.byteLength===Os,"sk should be 'crypto_box_SECRETKEYBYTES' bytes"),$s(32===e.byteLength,"sk should be 'crypto_box_SEEDBYTES' bytes");const r=new Uint8Array(64);return vs(r,n,32),e.set(r.subarray(0,32)),r.fill(0),_s(t,e)},crypto_box_seal:function(t,e,n){Hs(t,48+e.length),Hs(n,Us);var r=t.subarray(0,Us),o=new Uint8Array(Os);Ys(r,o);var i=new Uint8Array(24);Ss(i,[r,n]);var s=new Uint8Array(Us);Bs(s,o,n);var a=new Uint8Array(32),c=new Uint8Array(16);Ts.core_hsalsa20(a,c,s,Ts.SIGMA),Ms(t.subarray(r.length),e,i,a),Vs(o)},crypto_box_seal_open:function(t,e,n,r){Hs(e,48),Hs(t,e.length-48),Hs(n,Us),Hs(r,Os);var o=e.subarray(0,Us),i=new Uint8Array(24);Ss(i,[o,n]);var s=new Uint8Array(Us);Bs(s,r,o);var a=new Uint8Array(32),c=new Uint8Array(16);return Ts.core_hsalsa20(a,c,s,Ts.SIGMA),Qs(t,e.subarray(o.length),i,a)},crypto_box_PUBLICKEYBYTES:Us,crypto_box_SECRETKEYBYTES:Os,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_box_SEALBYTES:48,crypto_box_SEEDBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_MACBYTES:Fs};function Ys(t,e){return Hs(t,Us),Hs(e,Os),xs(e,32),_s(t,e)}function Ks(t,e,n){const r=new Uint8Array(16),o=new Uint8Array(32);return $s(0===Bs(o,n,e)),Ts.core_hsalsa20(t,r,o,Ts.SIGMA),!0}function Rs(t,e,n,r,o,i){Hs(e,Fs),Hs(r,24),Hs(o,Us),Hs(i,Os);const s=new Uint8Array(32);$s(Ks(s,o,i));const a=function(t,e,n,r,o){return Ds(t,e,n,r,o)}(t,e,n,r,s);return Vs(s),a}function js(t,e,n,r,o,i){const s=new Uint8Array(32);$s(Ks(s,o,i));const a=function(t,e,n,r,o){return Ls(t,e,n,r,o)}(t,e,n,r,s);return Vs(s),a}function Hs(t,e){if(!t||e&&t.length<e)throw new Error("Argument must be a buffer"+(e?" of length "+e:""))}function Vs(t){for(let e=0;e<t.length;e++)t[e]=0}var Gs={exports:{}},qs={exports:{}};const zs=cr,Js=Pr;qs.exports=ea;const Ws=qs.exports.SHA256_BYTES=32,Xs=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Zs(t,e,n,r){return((t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)+e+(((n>>>7|n<<25)^(n>>>18|n<<14)^n>>>3)+r)<<0}function ta(t,e){var n,r,o,[i,s,a,c,u,l,h,f]=t;const g=new Uint32Array(64);for(let t=0;t<16;t++)g[t]=ra(e[t]);for(let t=16;t<64;t++)g[t]=Zs(g[t-2],g[t-7],g[t-15],g[t-16]);for(let t=0;t<64;t+=4)A(t);function A(t){n=i&s^i&a^s&a,r=(i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10),o=f+(u&l^~u&h)+((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+g[t]+Xs[t],f=c+o,n=(c=o+(r+n))&i^c&s^i&s,r=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),o=h+(f&u^~f&l)+((f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+g[t+1]+Xs[t+1],h=a+o,n=(a=o+(r+n))&c^a&i^c&i,r=(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10),o=l+(h&f^~h&u)+((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+g[t+2]+Xs[t+2],l=s+o,n=(s=o+(r+n))&a^s&c^a&c,r=(s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10),o=u+(l&h^~l&f)+((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+g[t+3]+Xs[t+3],u=i+o,i=o+(r+n)}t[0]=t[0]+i,t[1]=t[1]+s,t[2]=t[2]+a,t[3]=t[3]+c,t[4]=t[4]+u,t[5]=t[5]+l,t[6]=t[6]+h,t[7]=t[7]+f}function ea(){return this instanceof ea?(this.buffer=new ArrayBuffer(64),this.bytesRead=0,this.pos=0,this.digestLength=Ws,this.finalised=!1,this.load=new Uint8Array(this.buffer),this.words=new Uint32Array(this.buffer),this.state=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),this):new ea}function na(t){if(!(this instanceof na))return new na(t);this.pad=Js.alloc(64),this.inner=ea(),this.outer=ea();const e=Js.alloc(32);t.byteLength>64&&(ea().update(t).digest(e),t=e),this.pad.fill(54);for(let e=0;e<t.byteLength;e++)this.pad[e]^=t[e];this.inner.update(this.pad),this.pad.fill(92);for(let e=0;e<t.byteLength;e++)this.pad[e]^=t[e];this.outer.update(this.pad),this.pad.fill(0),e.fill(0)}function ra(t){return(16711935&t)>>>8|(16711935&t)<<24|((4278255360&t)<<8|(4278255360&t)>>>24)}ea.prototype.update=function(t,e){zs(!1===this.finalised,"Hash instance finalised");var[n,r]=function(t,e){var n=Js.from(t,e);return[n,n.byteLength]}(t,e),o=0;for(this.bytesRead+=r;r>0&&(this.load.set(n.subarray(o,o+64-this.pos),this.pos),o+=64-this.pos,!((r-=64-this.pos)<0));)this.pos=0,ta(this.state,this.words);return this.pos=63&this.bytesRead,this.load.fill(0,this.pos),this},ea.prototype.digest=function(t,e=0){zs(!1===this.finalised,"Hash instance finalised"),this.finalised=!0,this.load.fill(0,this.pos),this.load[this.pos]=128,this.pos>55&&(ta(this.state,this.words),this.words.fill(0),this.pos=0);const n=new DataView(this.buffer);n.setUint32(56,this.bytesRead/2**29),n.setUint32(60,this.bytesRead<<3),ta(this.state,this.words);const r=new Uint8Array(this.state.map(ra).buffer);if(!t)return new Uint8Array(r);if("string"==typeof t)return Js.toString(r,t);zs(t instanceof Uint8Array,"input must be Uint8Array or Buffer"),zs(t.byteLength>=this.digestLength+e,"input not large enough for digest");for(let n=0;n<this.digestLength;n++)t[n+e]=r[n];return t},na.prototype.update=function(t,e){return this.inner.update(t,e),this},na.prototype.digest=function(t,e=0){return this.outer.update(this.inner.digest()),this.outer.digest(t,e)},ea.HMAC=na;var oa,ia,sa={exports:{}};const aa=cr,ca=Pr,ua="undefined"!=typeof WebAssembly&&function(){if(ia)return oa;ia=1;var t=(()=>{for(var t=new Uint8Array(128),e=0;e<64;e++)t[e<26?e+65:e<52?e+71:e<62?e-4:4*e-205]=e;return e=>{for(var n=e.length,r=new Uint8Array(3*(n-("="==e[n-1])-("="==e[n-2]))/4|0),o=0,i=0;o<n;){var s=t[e.charCodeAt(o++)],a=t[e.charCodeAt(o++)],c=t[e.charCodeAt(o++)],u=t[e.charCodeAt(o++)];r[i++]=s<<2|a>>4,r[i++]=a<<4|c>>2,r[i++]=c<<6|u}return r}})(),e=((t,e)=>function(){return e||(0,t[Object.keys(t)[0]])((e={exports:{}}).exports,e),e.exports})({"wasm-binary:./sha256.wat"(e,n){n.exports=t("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")}}),n=e(),r=new WebAssembly.Module(n);return oa=t=>new WebAssembly.Instance(r,t).exports,oa}()({imports:{debug:{log(...t){console.log(...t.map((t=>(t>>>0).toString(16).padStart(8,"0"))))},log_tee:t=>(console.log((t>>>0).toString(16).padStart(8,"0")),t)}}});let la=0;const ha=[];sa.exports=ga;const fa=sa.exports.SHA256_BYTES=32;function ga(){if(!(this instanceof ga))return new ga;if(!ua)throw new Error("WASM not loaded. Wait for Sha256.ready(cb)");ha.length||(ha.push(la),la+=108),this.finalized=!1,this.digestLength=fa,this.pointer=ha.pop(),this.pos=0,this._memory=new Uint8Array(ua.memory.buffer),this._memory.fill(0,this.pointer,this.pointer+108),this.pointer+this.digestLength>this._memory.length&&this._realloc(this.pointer+108)}function Aa(t){if(!(this instanceof Aa))return new Aa(t);this.pad=ca.alloc(64),this.inner=ga(),this.outer=ga();const e=ca.alloc(32);t.byteLength>64&&(ga().update(t).digest(e),t=e),this.pad.fill(54);for(let e=0;e<t.byteLength;e++)this.pad[e]^=t[e];this.inner.update(this.pad),this.pad.fill(92);for(let e=0;e<t.byteLength;e++)this.pad[e]^=t[e];this.outer.update(this.pad),this.pad.fill(0),e.fill(0)}function da(){}ga.prototype._realloc=function(t){ua.memory.grow(Math.max(0,Math.ceil(Math.abs(t-this._memory.length)/65536))),this._memory=new Uint8Array(ua.memory.buffer)},ga.prototype.update=function(t,e){aa(!1===this.finalized,"Hash instance finalized"),la%4!=0&&(la+=4-la%4),aa(la%4==0,"input shoud be aligned for int32");const[n,r]=function(t,e){var n=ca.from(t,e);return[n,n.byteLength]}(t,e);return aa(n instanceof Uint8Array,"input must be Uint8Array or Buffer"),la+r>this._memory.length&&this._realloc(la+t.length),this._memory.fill(0,la,la+function(t,e){return t+e-1&-e}(r,64)-64),this._memory.set(n.subarray(0,64-this.pos),this.pointer+40+this.pos),this._memory.set(n.subarray(64-this.pos),la),this.pos=this.pos+r&63,ua.sha256(this.pointer,la,r,0),this},ga.prototype.digest=function(t,e=0){aa(!1===this.finalized,"Hash instance finalized"),this.finalized=!0,ha.push(this.pointer);const n=this.pointer+40+this.pos;this._memory.fill(0,n,this.pointer+40+64),ua.sha256(this.pointer,la,0,1);const r=this._memory.subarray(this.pointer,this.pointer+this.digestLength);if(!t)return r;if("string"==typeof t)return ca.toString(r,t);aa(t instanceof Uint8Array,"output must be Uint8Array or Buffer"),aa(t.byteLength>=this.digestLength+e,"output must have at least 'SHA256_BYTES' bytes remaining");for(let n=0;n<this.digestLength;n++)t[n+e]=r[n];return t},ga.WASM=ua,ga.WASM_SUPPORTED="undefined"!=typeof WebAssembly,ga.ready=function(t){return t||(t=da),ua?(t(),Promise.resolve()):t(new Error("WebAssembly not supported"))},ga.prototype.ready=ga.ready,Aa.prototype.update=function(t,e){return this.inner.update(t,e),this},Aa.prototype.digest=function(t,e=0){return this.outer.update(this.inner.digest()),this.outer.digest(t,e)},ga.HMAC=Aa;const pa=qs.exports,ya=sa.exports;var Ia=pa;Gs.exports=function(){return new Ia},Gs.exports.ready=function(t){ya.ready((function(){t()}))},Gs.exports.WASM_SUPPORTED=ya.WASM_SUPPORTED,Gs.exports.WASM_LOADED=!1,Gs.exports.SHA256_BYTES=32,ya.ready((function(t){t||(Gs.exports.WASM_LOADED=!0,Gs.exports=Ia=ya)}));const ma=Gs.exports,Ea=cr;if(1!==new Uint16Array([1])[0])throw new Error("Big endian architecture is not supported.");var wa={crypto_hash_sha256:function(t,e,n){return Ea(32===t.byteLength,"out must be 'crypto_hash_sha256_BYTES' bytes long"),ma().update(e.subarray(0,n)).digest(t),0},crypto_hash_sha256_BYTES:32},ba={exports:{}};!function(t){const e=cr,n=ar.exports.randombytes_buf,r=ri.exports;t.exports.crypto_kdf_PRIMITIVE="blake2b",t.exports.crypto_kdf_BYTES_MIN=16,t.exports.crypto_kdf_BYTES_MAX=64,t.exports.crypto_kdf_CONTEXTBYTES=8,t.exports.crypto_kdf_KEYBYTES=32,t.exports.crypto_kdf_derive_from_key=function(n,o,i,s){e(n.length>=t.exports.crypto_kdf_BYTES_MIN,"subkey must be at least crypto_kdf_BYTES_MIN"),e(o>=0&&o<=9007199254740991,"subkey_id must be safe integer"),e(i.length>=t.exports.crypto_kdf_CONTEXTBYTES,"context must be at least crypto_kdf_CONTEXTBYTES");var a=new Uint8Array(r.PERSONALBYTES),c=new Uint8Array(r.SALTBYTES);a.set(i,0,t.exports.crypto_kdf_CONTEXTBYTES),function(t,e){var n=1,r=0;for(t[0]=255&e;++r<8&&(n*=256);)t[r]=e/n&255}(c,o);var u=Math.min(n.length,t.exports.crypto_kdf_BYTES_MAX);r(u,s.subarray(0,t.exports.crypto_kdf_KEYBYTES),c,a,!0).final(n)},t.exports.crypto_kdf_keygen=function(r){e(r.length>=t.exports.crypto_kdf_KEYBYTES,"out.length must be crypto_kdf_KEYBYTES"),n(r.subarray(0,t.exports.crypto_kdf_KEYBYTES))}}(ba);const{crypto_scalarmult_base:Ca}=Wo,{crypto_generichash:va}=ni.exports,{randombytes_buf:Ba}=ar.exports,_a=cr;var xa={crypto_kx_keypair:function(t,e){return _a(32===t.byteLength,"pk must be 'crypto_kx_PUBLICKEYBYTES' bytes"),_a(32===e.byteLength,"sk must be 'crypto_kx_SECRETKEYBYTES' bytes"),Ba(e,32),Ca(t,e)},crypto_kx_seed_keypair:function(t,e,n){return _a(32===t.byteLength,"pk must be 'crypto_kx_PUBLICKEYBYTES' bytes"),_a(32===e.byteLength,"sk must be 'crypto_kx_SECRETKEYBYTES' bytes"),_a(32===n.byteLength,"seed must be 'crypto_kx_SEEDBYTES' bytes"),va(e,n),Ca(t,e)},crypto_kx_SEEDBYTES:32,crypto_kx_SECRETKEYBYTES:32,crypto_kx_PUBLICKEYBYTES:32},Sa={};const ka=cr;var Qa=Da;const Ma=[1634760805,857760878,2036477234,1797285236];function Da(t,e,n){ka(32===e.byteLength),ka(8===t.byteLength||12===t.byteLength);const r=new Uint32Array(t.buffer,t.byteOffset,t.byteLength/4),o=new Uint32Array(e.buffer,e.byteOffset,e.byteLength/4);n||(n=0),ka(n<Number.MAX_SAFE_INTEGER),this.finalized=!1,this.pos=0,this.state=new Uint32Array(16);for(let t=0;t<4;t++)this.state[t]=Ma[t];for(let t=0;t<8;t++)this.state[4+t]=o[t];return this.state[12]=4294967295&n,8===r.byteLength?(this.state[13]=(n&&0xffffffff00000000)>>32,this.state[14]=r[0],this.state[15]=r[1]):(this.state[13]=r[0],this.state[14]=r[1],this.state[15]=r[2]),this}function La(t){const e=new Uint32Array(16);for(let n=16;n--;)e[n]=t[n];for(let t=0;t<20;t+=2)$a(e,0,4,8,12),$a(e,1,5,9,13),$a(e,2,6,10,14),$a(e,3,7,11,15),$a(e,0,5,10,15),$a(e,1,6,11,12),$a(e,2,7,8,13),$a(e,3,4,9,14);for(let n=0;n<16;n++)e[n]+=t[n];return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function Ta(t,e){return t<<e|t>>>32-e}function $a(t,e,n,r,o){t[e]+=t[n],t[o]^=t[e],t[o]=Ta(t[o],16),t[r]+=t[o],t[n]^=t[r],t[n]=Ta(t[n],12),t[e]+=t[n],t[o]^=t[e],t[o]=Ta(t[o],8),t[r]+=t[o],t[n]^=t[r],t[n]=Ta(t[n],7)}Da.prototype.update=function(t,e){ka(!this.finalized,"cipher finalized."),ka(t.byteLength>=e.byteLength,"output cannot be shorter than input.");let n=e.length,r=this.pos%64;this.pos+=n;let o=0,i=La(this.state);for(;r>0&&n>0;)t[o]=e[o++]^i[r],r=r+1&63,r||this.state[12]++,n--;for(;n>0;){if(i=La(this.state),n<64){for(let s=0;s<n;s++)t[o]=e[o++]^i[r++],r&=63;return}for(;r<64;)t[o]=e[o++]^i[r++];this.state[12]++,r=0,n-=64}},Da.prototype.final=function(){this.state.fill(0),this.pos=0,this.finalized=!0},function(t){const e=cr,n=Qa;if(1!==new Uint16Array([1])[0])throw new Error("Big endian architecture is not supported.");t.crypto_stream_chacha20_KEYBYTES=32,t.crypto_stream_chacha20_NONCEBYTES=8,t.crypto_stream_chacha20_MESSAGEBYTES_MAX=Number.MAX_SAFE_INTEGER,t.crypto_stream_chacha20_ietf_KEYBYTES=32,t.crypto_stream_chacha20_ietf_NONCEBYTES=12,t.crypto_stream_chacha20_ietf_MESSAGEBYTES_MAX=2**32,t.crypto_stream_chacha20=function(e,n,r){e.fill(0),t.crypto_stream_chacha20_xor(e,e,n,r)},t.crypto_stream_chacha20_xor=function(r,o,i,s){e(i.byteLength===t.crypto_stream_chacha20_NONCEBYTES,"n should be crypto_stream_chacha20_NONCEBYTES"),e(s.byteLength===t.crypto_stream_chacha20_KEYBYTES,"k should be crypto_stream_chacha20_KEYBYTES");const a=new n(i,s);a.update(r,o),a.final()},t.crypto_stream_chacha20_xor_ic=function(r,o,i,s,a){e(i.byteLength===t.crypto_stream_chacha20_NONCEBYTES,"n should be crypto_stream_chacha20_NONCEBYTES"),e(a.byteLength===t.crypto_stream_chacha20_KEYBYTES,"k should be crypto_stream_chacha20_KEYBYTES");const c=new n(i,a,s);c.update(r,o),c.final()},t.crypto_stream_chacha20_xor_instance=function(r,o){return e(r.byteLength===t.crypto_stream_chacha20_NONCEBYTES,"n should be crypto_stream_chacha20_NONCEBYTES"),e(o.byteLength===t.crypto_stream_chacha20_KEYBYTES,"k should be crypto_stream_chacha20_KEYBYTES"),new n(r,o)},t.crypto_stream_chacha20_ietf=function(e,n,r){e.fill(0),t.crypto_stream_chacha20_ietf_xor(e,e,n,r)},t.crypto_stream_chacha20_ietf_xor=function(r,o,i,s){e(i.byteLength===t.crypto_stream_chacha20_ietf_NONCEBYTES,"n should be crypto_stream_chacha20_ietf_NONCEBYTES"),e(s.byteLength===t.crypto_stream_chacha20_ietf_KEYBYTES,"k should be crypto_stream_chacha20_ietf_KEYBYTES");const a=new n(i,s);a.update(r,o),a.final()},t.crypto_stream_chacha20_ietf_xor_ic=function(r,o,i,s,a){e(i.byteLength===t.crypto_stream_chacha20_ietf_NONCEBYTES,"n should be crypto_stream_chacha20_ietf_NONCEBYTES"),e(a.byteLength===t.crypto_stream_chacha20_ietf_KEYBYTES,"k should be crypto_stream_chacha20_ietf_KEYBYTES");const c=new n(i,a,s);c.update(r,o),c.final()},t.crypto_stream_chacha20_ietf_xor_instance=function(r,o){return e(r.byteLength===t.crypto_stream_chacha20_ietf_NONCEBYTES,"n should be crypto_stream_chacha20_ietf_NONCEBYTES"),e(o.byteLength===t.crypto_stream_chacha20_ietf_KEYBYTES,"k should be crypto_stream_chacha20_ietf_KEYBYTES"),new n(r,o)}}(Sa);const{crypto_stream_chacha20_ietf:Ua,crypto_stream_chacha20_ietf_xor_ic:Oa}=Sa,{crypto_verify_16:Fa}=fr.exports,Na=ns,Pa=cr,Ya=16,Ka=Number.MAX_SAFE_INTEGER,Ra=new Uint8Array(16);function ja(t,e,n,r,o,i,s){if(null===r)return ja(t,e,n,new Uint8Array(0),o,i,s);Pa(t.byteLength===n.byteLength,"ciphertext should be same length than message"),Pa(12===i.byteLength,"npub should be 'crypto_aead_chacha20poly1305_ietf_NPUBBYTES' long"),Pa(32===s.byteLength,"k should be 'crypto_aead_chacha20poly1305_ietf_KEYBYTES' long"),Pa(n.byteLength<=Ka,"message is too large"),Pa(e.byteLength<=Ya,"mac should be 'crypto_aead_chacha20poly1305_ietf_ABYTES' long");const a=new Uint8Array(64);var c=new Uint8Array(8);Ua(a,i,s);const u=new Na(a);return a.fill(0),u.update(r,0,r.byteLength),u.update(Ra,0,16-r.byteLength&15),Oa(t,n,i,1,s),u.update(t,0,n.byteLength),u.update(Ra,0,16-n.byteLength&15),Va(c,0,r.byteLength),u.update(c,0,c.byteLength),Va(c,0,n.byteLength),u.update(c,0,c.byteLength),u.finish(e,0),c.fill(0),Ya}function Ha(t,e,n,r,o,i,s){if(null===o)return Ha(t,e,n,r,new Uint8Array(0),i,s);Pa(n.byteLength===t.byteLength,"message should be same length than ciphertext"),Pa(12===i.byteLength,"npub should be 'crypto_aead_chacha20poly1305_ietf_NPUBBYTES' long"),Pa(32===s.byteLength,"k should be 'crypto_aead_chacha20poly1305_ietf_KEYBYTES' long"),Pa(t.byteLength<=Ka,"message is too large"),Pa(r.byteLength<=Ya,"mac should be 'crypto_aead_chacha20poly1305_ietf_ABYTES' long");const a=new Uint8Array(64),c=new Uint8Array(8),u=new Uint8Array(Ya);Ua(a,i,s);const l=new Na(a);a.fill(0),l.update(o,0,o.byteLength),l.update(Ra,0,16-o.byteLength&15);const h=n.byteLength;l.update(n,0,h),l.update(Ra,0,16-h&15),Va(c,0,o.byteLength),l.update(c,0,c.byteLength),Va(c,0,h),l.update(c,0,c.byteLength),l.finish(u,0),Pa(16===u.byteLength);const f=Fa(u,0,r,0);if(u.fill(0),c.fill(0),!f)throw t.fill(0),new Error("could not verify data");Oa(t,n,i,1,s)}function Va(t,e,n){t.fill(0,0,8);const r=new DataView(t.buffer,t.byteOffset,t.byteLength);r.setUint32(e,4294967295&n,!0),r.setUint32(e+4,n/2**32&4294967295,!0)}var Ga,qa,za={crypto_aead_chacha20poly1305_ietf_encrypt:function t(e,n,r,o,i,s){if(null===r)return t(e,n,new Uint8Array(0),o,i,s);Pa(e.byteLength===n.byteLength+Ya,"ciphertext should be 'crypto_aead_chacha20poly1305_ietf_ABYTES' longer than message"),Pa(12===i.byteLength,"npub should be 'crypto_aead_chacha20poly1305_ietf_NPUBBYTES' long"),Pa(32===s.byteLength,"k should be 'crypto_aead_chacha20poly1305_ietf_KEYBYTES' long"),Pa(n.byteLength<=Ka,"message is too large");const a=ja(e.subarray(0,n.byteLength),e.subarray(n.byteLength),n,r,o,i,s);return n.byteLength+a},crypto_aead_chacha20poly1305_ietf_encrypt_detached:ja,crypto_aead_chacha20poly1305_ietf_decrypt:function t(e,n,r,o,i,s){if(null===o)return t(e,n,r,new Uint8Array(0),i,s);if(Pa(e.byteLength===r.byteLength-Ya,"message should be 'crypto_aead_chacha20poly1305_ietf_ABYTES' shorter than ciphertext"),Pa(12===i.byteLength,"npub should be 'crypto_aead_chacha20poly1305_ietf_NPUBBYTES' long"),Pa(32===s.byteLength,"k should be 'crypto_aead_chacha20poly1305_ietf_KEYBYTES' long"),Pa(e.byteLength<=Ka,"message is too large"),r.byteLength<Ya)throw new Error("could not verify data");return Ha(e,n,r.subarray(0,r.byteLength-Ya),r.subarray(r.byteLength-Ya),o,i,s),r.byteLength-Ya},crypto_aead_chacha20poly1305_ietf_decrypt_detached:Ha,crypto_aead_chacha20poly1305_ietf_ABYTES:Ya,crypto_aead_chacha20poly1305_ietf_KEYBYTES:32,crypto_aead_chacha20poly1305_ietf_NPUBBYTES:12,crypto_aead_chacha20poly1305_ietf_NSECBYTES:0,crypto_aead_chacha20poly1305_ietf_MESSAGEBYTES_MAX:Ka},Ja={};var Wa=function(t,e,n){var r,o={h:rc(n,4),l:rc(n,0)},i={h:rc(n,12),l:rc(n,8)},s={h:o.h,l:o.l},a=o,c={h:i.h,l:i.l},u=i,l=0,h=e.length,f=h-7,g=new Uint8Array(new ArrayBuffer(8));Za(s,{h:1936682341,l:1886610805}),Za(c,{h:1685025377,l:1852075885}),Za(a,{h:1819895653,l:1852142177}),Za(u,{h:1952801890,l:2037671283});for(;l<f;)r={h:rc(e,l+4),l:rc(e,l)},Za(u,r),nc(s,c,a,u),nc(s,c,a,u),Za(s,r),l+=8;g[7]=h;var A=0;for(;l<h;)g[A++]=e[l++];for(;A<7;)g[A++]=0;r={h:g[7]<<24|g[6]<<16|g[5]<<8|g[4],l:g[3]<<24|g[2]<<16|g[1]<<8|g[0]},Za(u,r),nc(s,c,a,u),nc(s,c,a,u),Za(s,r),Za(a,{h:0,l:255}),nc(s,c,a,u),nc(s,c,a,u),nc(s,c,a,u),nc(s,c,a,u);var d=s;Za(d,c),Za(d,a),Za(d,u),t[0]=255&d.l,t[1]=d.l>>8&255,t[2]=d.l>>16&255,t[3]=d.l>>24&255,t[4]=255&d.h,t[5]=d.h>>8&255,t[6]=d.h>>16&255,t[7]=d.h>>24&255};function Xa(t,e){var n=t.l+e.l,r={h:t.h+e.h+(n/2>>>31)>>>0,l:n>>>0};t.h=r.h,t.l=r.l}function Za(t,e){t.h^=e.h,t.h>>>=0,t.l^=e.l,t.l>>>=0}function tc(t,e){var n={h:t.h<<e|t.l>>>32-e,l:t.l<<e|t.h>>>32-e};t.h=n.h,t.l=n.l}function ec(t){var e=t.l;t.l=t.h,t.h=e}function nc(t,e,n,r){Xa(t,e),Xa(n,r),tc(e,13),tc(r,16),Za(e,t),Za(r,n),ec(t),Xa(n,e),Xa(t,r),tc(e,17),tc(r,21),Za(e,n),Za(r,t),ec(n)}function rc(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}var oc=cr,ic="undefined"!=typeof WebAssembly&&function(){if(qa)return Ga;qa=1;var t=(()=>{for(var t=new Uint8Array(128),e=0;e<64;e++)t[e<26?e+65:e<52?e+71:e<62?e-4:4*e-205]=e;return e=>{for(var n=e.length,r=new Uint8Array(3*(n-("="==e[n-1])-("="==e[n-2]))/4|0),o=0,i=0;o<n;){var s=t[e.charCodeAt(o++)],a=t[e.charCodeAt(o++)],c=t[e.charCodeAt(o++)],u=t[e.charCodeAt(o++)];r[i++]=s<<2|a>>4,r[i++]=a<<4|c>>2,r[i++]=c<<6|u}return r}})(),e=((t,e)=>function(){return e||(0,t[Object.keys(t)[0]])((e={exports:{}}).exports,e),e.exports})({"wasm-binary:./siphash24.wat"(e,n){n.exports=t("AGFzbQEAAAABBgFgAn9/AAMCAQAFBQEBCpBOBxQCBm1lbW9yeQIAB3NpcGhhc2gAAArdCAHaCAIIfgJ/QvXKzYPXrNu38wAhAkLt3pHzlszct+QAIQNC4eSV89bs2bzsACEEQvPK0cunjNmy9AAhBUEIKQMAIQdBECkDACEIIAGtQjiGIQYgAUEHcSELIAAgAWogC2shCiAFIAiFIQUgBCAHhSEEIAMgCIUhAyACIAeFIQICQANAIAAgCkYNASAAKQMAIQkgBSAJhSEFIAIgA3whAiADQg2JIQMgAyAChSEDIAJCIIkhAiAEIAV8IQQgBUIQiSEFIAUgBIUhBSACIAV8IQIgBUIViSEFIAUgAoUhBSAEIAN8IQQgA0IRiSEDIAMgBIUhAyAEQiCJIQQgAiADfCECIANCDYkhAyADIAKFIQMgAkIgiSECIAQgBXwhBCAFQhCJIQUgBSAEhSEFIAIgBXwhAiAFQhWJIQUgBSAChSEFIAQgA3whBCADQhGJIQMgAyAEhSEDIARCIIkhBCACIAmFIQIgAEEIaiEADAALCwJAAkACQAJAAkACQAJAAkAgCw4HBwYFBAMCAQALIAYgADEABkIwhoQhBgsgBiAAMQAFQiiGhCEGCyAGIAAxAARCIIaEIQYLIAYgADEAA0IYhoQhBgsgBiAAMQACQhCGhCEGCyAGIAAxAAFCCIaEIQYLIAYgADEAAIQhBgsgBSAGhSEFIAIgA3whAiADQg2JIQMgAyAChSEDIAJCIIkhAiAEIAV8IQQgBUIQiSEFIAUgBIUhBSACIAV8IQIgBUIViSEFIAUgAoUhBSAEIAN8IQQgA0IRiSEDIAMgBIUhAyAEQiCJIQQgAiADfCECIANCDYkhAyADIAKFIQMgAkIgiSECIAQgBXwhBCAFQhCJIQUgBSAEhSEFIAIgBXwhAiAFQhWJIQUgBSAChSEFIAQgA3whBCADQhGJIQMgAyAEhSEDIARCIIkhBCACIAaFIQIgBEL/AYUhBCACIAN8IQIgA0INiSEDIAMgAoUhAyACQiCJIQIgBCAFfCEEIAVCEIkhBSAFIASFIQUgAiAFfCECIAVCFYkhBSAFIAKFIQUgBCADfCEEIANCEYkhAyADIASFIQMgBEIgiSEEIAIgA3whAiADQg2JIQMgAyAChSEDIAJCIIkhAiAEIAV8IQQgBUIQiSEFIAUgBIUhBSACIAV8IQIgBUIViSEFIAUgAoUhBSAEIAN8IQQgA0IRiSEDIAMgBIUhAyAEQiCJIQQgAiADfCECIANCDYkhAyADIAKFIQMgAkIgiSECIAQgBXwhBCAFQhCJIQUgBSAEhSEFIAIgBXwhAiAFQhWJIQUgBSAChSEFIAQgA3whBCADQhGJIQMgAyAEhSEDIARCIIkhBCACIAN8IQIgA0INiSEDIAMgAoUhAyACQiCJIQIgBCAFfCEEIAVCEIkhBSAFIASFIQUgAiAFfCECIAVCFYkhBSAFIAKFIQUgBCADfCEEIANCEYkhAyADIASFIQMgBEIgiSEEQQAgAiADIAQgBYWFhTcDAAs=")}}),n=e(),r=new WebAssembly.Module(n);return Ga=t=>new WebAssembly.Instance(r,t).exports,Ga}()(),sc=Wa,ac=hc,cc=hc.BYTES=8,uc=hc.KEYBYTES=16;hc.WASM_SUPPORTED=!!ic,hc.WASM_LOADED=!!ic;var lc=new Uint8Array(ic.memory.buffer);function hc(t,e,n,r){var o;return n||(n=new Uint8Array(8)),!0!==r&&(oc(n.length>=cc,"output must be at least "+cc),oc(e.length>=uc,"key must be at least "+uc)),ic?(t.length+24>lc.length&&(o=t.length+24,ic.memory.grow(Math.max(0,Math.ceil(Math.abs(o-lc.length)/65536))),lc=new Uint8Array(ic.memory.buffer)),lc.set(e,8),lc.set(t,24),ic.siphash(24,t.length),n.set(lc.subarray(0,8))):sc(n,t,e),n}var fc=ac;if(1!==new Uint16Array([1])[0])throw new Error("Big endian architecture is not supported.");Ja.crypto_shorthash_PRIMITIVE="siphash24",Ja.crypto_shorthash_BYTES=fc.BYTES,Ja.crypto_shorthash_KEYBYTES=fc.KEYBYTES,Ja.crypto_shorthash_WASM_SUPPORTED=fc.WASM_SUPPORTED,Ja.crypto_shorthash_WASM_LOADED=fc.WASM_LOADED,Ja.crypto_shorthash=function(t,e,n,r){fc(e,n,t,r)};const{crypto_verify_32:gc}=fr.exports,{crypto_hash:Ac}=vo,{gf:dc,gf0:pc,gf1:yc,D:Ic,D2:mc,X:Ec,Y:wc,I:bc,A:Cc,Z:vc,M:Bc,S:_c,sel25519:xc,pack25519:Sc,inv25519:kc,unpack25519:Qc}=No,{randombytes:Mc}=ar.exports,{crypto_scalarmult_BYTES:Dc}=Wo,{crypto_hash_sha512_BYTES:Lc}=vo,Tc=cr,$c=64;var Uc={crypto_sign_keypair:Rc,crypto_sign_seed_keypair:function(t,e,n){return Xc(n,32),e.set(n),Rc(t,e,!0)},crypto_sign:Gc,crypto_sign_detached:function(t,e,n){var r=new Uint8Array(e.length+$c);Gc(r,e,n);for(let e=0;e<$c;e++)t[e]=r[e]},crypto_sign_open:zc,crypto_sign_verify_detached:function(t,e,n){Xc(t,$c);var r=new Uint8Array(e.length+$c),o=0;for(o=0;o<$c;o++)r[o]=t[o];for(o=0;o<e.length;o++)r[o+$c]=e[o];return zc(e,r,n)},crypto_sign_BYTES:$c,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_sign_ed25519_PUBLICKEYBYTES:32,crypto_sign_ed25519_SECRETKEYBYTES:64,crypto_sign_ed25519_SEEDBYTES:32,crypto_sign_ed25519_BYTES:64,crypto_sign_ed25519_pk_to_curve25519:function(t,e){Xc(t,32),Xc(e,32);var n=[dc(),dc(),dc(),dc()],r=dc([1]),o=dc([1]);Tc(function(t){var e,n=[Uint8Array.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Uint8Array.from([1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Uint8Array.from([38,232,149,143,194,178,39,176,69,195,244,137,242,239,152,240,213,223,172,5,211,198,51,57,177,56,2,136,109,83,252,5]),Uint8Array.from([199,23,106,112,61,77,216,79,186,60,11,118,13,16,103,15,42,32,83,250,44,57,204,198,78,199,253,119,146,172,3,122]),Uint8Array.from([236,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,127]),Uint8Array.from([237,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,127]),Uint8Array.from([238,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,127])],r=new Uint8Array(7);Xc(n,7);for(let o=0;o<n.length;o++)for(e=0;e<31;e++)r[o]|=t[e]^n[o][e];for(let o=0;o<n.length;o++)r[o]|=127&t[e]^n[o][e];var o=0;for(let t=0;t<n.length;t++)o|=r[t]-1;return 0==(o>>8&1)}(e)&&qc(n,e)&&function(t){var e=[dc(),dc(),dc(),dc()];!function(t,e){Yc(t,e,jc)}(e,t);var n=0;for(let t=0;t<16;t++)n|=65535&e[0][t];return 0===n}(n),"Cannot convert key: bad point");for(let e=0;e<n.length;e++)Sc(t,n[e]);return vc(o,o,n[1]),Cc(r,r,n[1]),kc(o,o),Bc(r,r,o),Sc(t,r),0},crypto_sign_ed25519_sk_to_curve25519:function(t,e){Tc(t&&t.byteLength===Dc,"curveSk must be 'crypto_sign_SECRETKEYBYTES' long"),Tc(e&&64===e.byteLength,"edSk must be 'crypto_sign_ed25519_SECRETKEYBYTES' long");var n=new Uint8Array(Lc);return Ac(n,e,32),n[0]&=248,n[31]&=127,n[31]|=64,t.set(n.subarray(0,Dc)),n.fill(0),t},crypto_sign_ed25519_sk_to_pk:function(t,e){return Xc(t,32),t.set(e.subarray(32)),t},unpackneg:qc,pack:Pc};function Oc(t,e){for(let n=0;n<16;n++)t[n]=0|e[n]}function Fc(t,e){var n=dc(),r=dc(),o=dc(),i=dc(),s=dc(),a=dc(),c=dc(),u=dc(),l=dc();vc(n,t[1],t[0]),vc(l,e[1],e[0]),Bc(n,n,l),Cc(r,t[0],t[1]),Cc(l,e[0],e[1]),Bc(r,r,l),Bc(o,t[3],e[3]),Bc(o,o,mc),Bc(i,t[2],e[2]),Cc(i,i,i),vc(s,r,n),vc(a,i,o),Cc(c,i,o),Cc(u,r,n),Bc(t[0],s,a),Bc(t[1],u,c),Bc(t[2],c,a),Bc(t[3],s,u)}function Nc(t,e,n){var r;for(r=0;r<4;r++)xc(t[r],e[r],n)}function Pc(t,e){var n=dc(),r=dc(),o=dc();kc(o,e[2]),Bc(n,e[0],o),Bc(r,e[1],o),Sc(t,r),t[31]^=Jc(n)<<7}function Yc(t,e,n){var r,o,i=[dc(e[0]),dc(e[1]),dc(e[2]),dc(e[3])];for(Oc(t[0],pc),Oc(t[1],yc),Oc(t[2],yc),Oc(t[3],pc),o=255;o>=0;--o)Nc(t,i,r=n[o/8|0]>>(7&o)&1),Fc(i,t),Fc(t,t),Nc(t,i,r)}function Kc(t,e){var n=[dc(),dc(),dc(),dc()];Oc(n[0],Ec),Oc(n[1],wc),Oc(n[2],yc),Bc(n[3],Ec,wc),Yc(t,n,e)}function Rc(t,e,n){Xc(t,32),Xc(e,64);var r,o=new Uint8Array(64),i=[dc(),dc(),dc(),dc()];for(n||Mc(e,32),Ac(o,e,32),o[0]&=248,o[31]&=127,o[31]|=64,Kc(i,o),Pc(t,i),r=0;r<32;r++)e[r+32]=t[r]}var jc=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Hc(t,e){var n,r,o,i;for(r=63;r>=32;--r){for(n=0,o=r-32,i=r-12;o<i;++o)e[o]+=n-16*e[r]*jc[o-(r-32)],n=e[o]+128>>8,e[o]-=256*n;e[o]+=n,e[r]=0}for(n=0,o=0;o<32;o++)e[o]+=n-(e[31]>>4)*jc[o],n=e[o]>>8,e[o]&=255;for(o=0;o<32;o++)e[o]-=n*jc[o];for(r=0;r<32;r++)e[r+1]+=e[r]>>8,t[r]=255&e[r]}function Vc(t){var e=new Float64Array(64);for(let n=0;n<64;n++)e[n]=t[n];for(let e=0;e<64;e++)t[e]=0;Hc(t,e)}function Gc(t,e,n){Xc(t,$c+e.length),Xc(e,0),Xc(n,64);var r,o,i=e.length,s=new Uint8Array(64),a=new Uint8Array(64),c=new Uint8Array(64),u=new Float64Array(64),l=[dc(),dc(),dc(),dc()];Ac(s,n,32),s[0]&=248,s[31]&=127,s[31]|=64;var h=i+64;for(r=0;r<i;r++)t[64+r]=e[r];for(r=0;r<32;r++)t[32+r]=s[32+r];for(Ac(c,t.subarray(32),i+32),Vc(c),Kc(l,c),Pc(t,l),r=32;r<64;r++)t[r]=n[r];for(Ac(a,t,i+64),Vc(a),r=0;r<64;r++)u[r]=0;for(r=0;r<32;r++)u[r]=c[r];for(r=0;r<32;r++)for(o=0;o<32;o++)u[r+o]+=a[r]*s[o];return Hc(t.subarray(32),u),h}function qc(t,e){var n=dc(),r=dc(),o=dc(),i=dc(),s=dc(),a=dc(),c=dc();return Oc(t[2],yc),Qc(t[1],e),_c(o,t[1]),Bc(i,o,Ic),vc(o,o,t[2]),Cc(i,t[2],i),_c(s,i),_c(a,s),Bc(c,a,s),Bc(n,c,o),Bc(n,n,i),function(t,e){var n,r=dc();for(n=0;n<16;n++)r[n]=e[n];for(n=250;n>=0;n--)_c(r,r),1!==n&&Bc(r,r,e);for(n=0;n<16;n++)t[n]=r[n]}(n,n),Bc(n,n,o),Bc(n,n,i),Bc(n,n,i),Bc(t[0],n,i),_c(r,t[0]),Bc(r,r,i),Wc(r,o)||Bc(t[0],t[0],bc),_c(r,t[0]),Bc(r,r,i),!!Wc(r,o)&&(Jc(t[0])===e[31]>>7&&vc(t[0],dc(),t[0]),Bc(t[3],t[0],t[1]),!0)}function zc(t,e,n){Xc(t,e.length-$c),Xc(e,$c),Xc(n,32);var r,o=e.length,i=new Uint8Array(e.length),s=new Uint8Array(32),a=new Uint8Array(64),c=[dc(),dc(),dc(),dc()],u=[dc(),dc(),dc(),dc()];if(o<64)return!1;if(!qc(u,n))return!1;for(r=0;r<o;r++)i[r]=e[r];for(r=0;r<32;r++)i[r+32]=n[r];if(Ac(a,i,o),Vc(a),Yc(c,u,a),Kc(u,e.subarray(32)),Fc(c,u),Pc(s,c),o-=64,!gc(e,0,s,0)){for(r=0;r<o;r++)i[r]=0;return!1}for(r=0;r<o;r++)t[r]=e[r+64];return!0}function Jc(t){var e=new Uint8Array(32);return Sc(e,t),1&e[0]}function Wc(t,e){var n=new Uint8Array(32),r=new Uint8Array(32);return Sc(n,t),Sc(r,e),gc(n,0,r,0)}function Xc(t,e,n="Argument"){if(!t||e&&t.length<e)throw new Error(n+" must be a buffer"+(e?" of length "+e:""))}!function(t){function e(e){Object.keys(e).forEach((function(n){t.exports[n]=e[n]}))}e(ar.exports),e(hr),e(dr),e(fr.exports),e(Eo),e(Ps),e(ni.exports),e(vo),e(wa),e(ba.exports),e(xa),e(za),e(ss),e(Wo),e(ms),e(Ja),e(Uc),e(Ri),e(Sa)}(or),rr.exports=or.exports;var Zc=Symbol.for("nodejs.util.inspect.custom");const{crypto_sign_BYTES:tu,crypto_sign_SECRETKEYBYTES:eu,crypto_sign_PUBLICKEYBYTES:nu,crypto_sign_detached:ru,crypto_sign_verify_detached:ou,crypto_sign_keypair:iu}=rr.exports,su=Zc,au=Symbol.for("Pico::block"),cu=Symbol.for("Pico::feed"),uu=r.Buffer.alloc(tu).fill(0);var lu=class t{static get MAX_FEED_SIZE(){return 65536}static get INITIAL_FEED_SIZE(){return 1024}static get PICKLE(){return r.Buffer.from("PIC0.")}static get KEY(){return r.Buffer.from("K0.")}static get BLOCK(){return r.Buffer.from("B0.")}static get KEY_SIZE(){return nu}static get SIGNATURE_SIZE(){return tu}static get COUNTER_SIZE(){return 4}static get META_SIZE(){return 2*t.SIGNATURE_SIZE+t.COUNTER_SIZE}static get BLOCK_SYMBOL(){return au}static get FEED_SYMBOL(){return cu}static get GENESIS(){return uu}constructor(e={}){this[cu]=!0,this.tail=0,this._hasGenisis=null,this._keychain=[],this._cache=[],this._MAX_FEED_SIZE=e.maxSize||t.MAX_FEED_SIZE,this.buf=r.Buffer.alloc(e.initialSize||t.INITIAL_FEED_SIZE)}get partial(){return!(null===this._hasGenisis&&!this.length)&&!this._hasGenisis}get free(){return this._MAX_FEED_SIZE-this.tail}get _isDirty(){if(!this.tail)return!1;if(!this._cache.length)return!0;const e=this._cache[this._cache.length-1];return t.mapBlock(this.buf,e.offset).end!==this.tail}get length(){return this._reIndex(),this._cache.length}get last(){return this.get(this.length-1)}get first(){return this.get(0)}get keys(){return this._reIndex(),[...this._keychain]}_reIndex(t=!1){if(!t&&!this._isDirty)return;const e=this._index(t);for(;!e.next().done;)continue}_appendKey(e){this._ensureMinimumCapacity(this.tail+t.KEY.length+e.length),this.tail+=t.KEY.copy(this.buf,this.tail),this.tail+=e.copy(this.buf,this.tail)}_appendBlock(t){this._ensureMinimumCapacity(this.tail+t.length),this.tail+=t.copy(this.buf,this.tail)}_ensureMinimumCapacity(t){if(this.buf.length<t){const e=r.Buffer.allocUnsafe(t+32);this.buf.copy(e),this.buf=e}}_ensureKey(t){for(const e of this.keys)if(t.equals(e))return;this._appendKey(t)}get(e){this._isDirty&&this._reIndex(),e<0&&(e=this.length+e);const n=this._cache[e];if(n)return t.mapBlock(this.buf,n.offset,this._keychain[n.keyId])}toArray(){const t=[];for(const e of this.blocks())t.push(e);return t}append(e,n,o){if(!n)throw new Error("Can't append without a signing secret");if(64!==n.length)throw new Error("Unknown signature secret key format");const i=n.slice(t.KEY_SIZE);this._ensureKey(i);const s=t.META_SIZE,a=this.last;r.Buffer.isBuffer(e)||(e=r.Buffer.from(e));const c=e.length,u=this.tail+c+s;if(this._MAX_FEED_SIZE<u){console.error(`MAX_FEED_SIZE reached, block won't fit: ${u} > ${this._MAX_FEED_SIZE}`);const t=new Error("FeedOverflowError");throw t.type=t.message,t.maxSize=this._MAX_FEED_SIZE,t.requestedSize=u,t.bytesOverflow=u-this._MAX_FEED_SIZE,t}this._ensureMinimumCapacity(u);const l=t.mapBlock(this.buf,this.tail);if(l.header.fill(0),l.size=c,e.copy(l.body),a&&a.sig.copy(l.parentSig),ru(l.sig,l.dat,n),!l.verify(i))throw new Error("newly stored block is invalid. something went wrong");return this.tail=u,"function"==typeof o&&o(null,this.length),this.length}*_index(e=!1){let n=0,o=0;e&&this._clearCache();const i=t.KEY,s=t.KEY_SIZE;let a=null;for(;;){if(n>=this.tail)return;if(n+i.length>this.buf.length)return;if(i.equals(this.buf.slice(n,n+i.length))){const t=this.buf.slice(n+i.length,n+i.length+s);let e=this._keychain.findIndex((e=>e.equals(t)));~e||(e=this._keychain.length,this._keychain.push(t)),yield{type:0,id:e,key:t,offset:n},n+=i.length+s}else if(this._cache[o]&&this._cache[o].offset===n){const e=o++,r=this._cache[e],i=this._keychain[r.keyId];if(!i)throw new Error("InternalError:KeyCacheBroken");const s=t.mapBlock(this.buf,r.offset,i);yield{type:1,seq:e,key:i,block:s,offset:r.offset},a=s.sig,n=s.end}else{const e=t.mapBlock(this.buf,n);if(0===e.size)return;if(n+e.size>this.buf.length)return;if(o){if(!a.equals(e.parentSig))return}else this._hasGenisis=e.parentSig.equals(r.Buffer.alloc(64));let i=!1;for(let t=this._keychain.length-1;t>=0;t--){if(i=e.verify(this._keychain[t]),!i)continue;const r=o++;e.key=this._keychain[t],this._cache[r]={offset:n,keyId:t},yield{type:1,seq:r,block:e,offset:n,key:this._keychain[t]},a=e.sig,n=e.end;break}if(!i)return}}}toString(){return this.pickle()}pickle(e=0){let n=encodeURIComponent(t.PICKLE.toString("utf8"));const r=t.KEY,o=t.BLOCK,i=(e?this.slice(e):this)._index();for(const t of i)n+=t.type?o+hu(t.block.buffer):r+hu(t.key);return n}slice(e=0,n,r=!1){const o=new t;for(const t of this.blocks(e,n))r||o._ensureKey(t.key),o._appendBlock(t.buffer);return o}_unpack(e){if(!e)throw new Error("Missing first argument");if("string"!=typeof e)throw new Error("url-friendly string expected");const n=encodeURIComponent(t.PICKLE),r=encodeURIComponent(t.KEY),o=encodeURIComponent(t.BLOCK),i=e.indexOf(n);if(-1===i)throw new Error("NotPickleError");let s=n.length+i,a=0,c=0,u=-1,l=-1;const h=()=>{if(-1!==u){const n=decodeURIComponent(e.substr(l,s-l-c-a+1));if(u)this._appendBlock(fu(n));else{const e=fu(n);if(e.length!==t.KEY_SIZE)throw new Error("PSIG key wrong size: ");this._ensureKey(e)}u=-1}l=s+1,u=a?0:1,a=c=0};for(;s<e.length;)e[s]===r[a]?++a===r.length&&h():a=0,e[s]===o[c]?++c===o.length&&h():c=0,s++;h()}truncate(t){if(0===t)return this.tail=0,this._cache=[],this._keychain=[],!0;const e=this.tail,n=this.get(t-1);if(this.tail=n.end,e===this.tail)return!1;let r=this._cache.length-t;for(;r--;)this._cache.pop();return!0}*blocks(t=0,e=0){for(t<0&&(t=this.length+t),e||(e=this.length),e<0&&(e=this.length+e+1);t<e;)yield this.get(t++)}_steal(t,e=!1){return e?(this.buf=r.Buffer.alloc(t.buf.length),t.buf.copy(this.buf),this._cache=t._cache.map((t=>({...t})))):(this.buf=t.buf,this._cache=[...t._cache]),this._keychain=[...t._keychain],this._hasGenisis=t._hasGenisis,this.tail=t.tail,t._robbed=!0,!0}_clearCache(){this._keychain=[],this._cache=[]}merge(e,n={},r=null){if("function"==typeof n)return this.merge(e,void 0,n);const o=n.forceCopy||!1;if(!e)throw new Error("First argument `source` expected by merge");const i=t.from(e),s="function"==typeof r,a=s?t=>{let e=!1;return r(t,(()=>{e=!0})),e}:()=>!1,c=t=>{let e=!1;for(const n of t){const t=n.key;if(s){if(a(n))return e}this._ensureKey(t),this._appendBlock(n.buffer),e=!0}return e};if(!this.length)return s?c(i.blocks()):this._steal(i,o);const u=()=>{if(this._reverseMergeFlag)return!1;const t=i.clone();t._reverseMergeFlag=!0;const e=t.length;if((!s||!a(t.get(0)))&&t.merge(this,n,r)){if(e===t.length)throw new Error("InternalError:NothingMerged");return this._steal(t)}return!1};try{const t=this._compare(i);return t<1||c(i.blocks(i.length-t))}catch(t){switch(t.type){case"BlockConflict":return!1;case"NoCommonParent":return!!this.partial&&u()}throw t}}clone(){const e=new t;return e._steal(this,!0),e}_compare(t){if(this===t)return 0;const e=[-1,-1],n=[this._index(),t._index()],r=[],o=[!1,!1],i=t=>{for(r[t]&&r[t].sig,r[t]=null;!r[t]&&!o[t];){const i=n[t].next();if(o[t]=o[t]||i.done,i.done&&void 0===i.value)break;i.value.type&&(e[t]++,r[t]=i.value.block)}},s=t=>{const n=e[t]-1;for(;r[t];)i(t);return e[t]-n},a=t=>{const n=new Error(t);return n.type=t,n.idxA=e[0],n.idxB=e[1],n};if(i(1),!r[1])return-s(0);const c=r[1].parentSig;for(;!o[0]&&(i(0),r[0])&&!r[0].parentSig.equals(c);)if(r[0].sig.equals(c)&&this.length===e[0]+1)return s(1);if(!r[0])throw a("NoCommonParent");if(!r[0].sig.equals(r[1].sig))throw a("BlockConflict");for(;;){if(i(0),i(1),!r[0]||!r[1])return r[0]||r[1]?r[0]?-s(0):s(1):0;if(!r[0].sig.equals(r[1].sig))throw a("BlockConflict")}}inspect(t=!1){const e=[["ID","KEY","SIG","PARENT","HEX","ASCII"]],n=[2];let r=0;for(const t of this.blocks()){const o=t.body.slice(0,12).toString("utf8"),i=[""+r++,t.key.slice(0,2).toString("hex"),t.sig.slice(0,4).toString("hex"),t.isGenesis?"_GENESIS":t.parentSig.slice(0,4).toString("hex"),t.body.slice(0,6).toString("hex").replace(/(.{2})/g,"$1 ").trimEnd(),o];for(let t=0;t<i.length;t++)n[t]=Math.max(n[t]||0,i[t].length);e.push(i)}const o=[];for(const t of e)o.push("│ "+t.map(((t,e)=>t.padEnd(n[e]))).join(" │ ")+" │");if(o.splice(1,0,"├".padEnd(o[0].length-1,"─")+"┤"),t)return o.join("\n");console.log(o.join("\n"))}static isFeed(t){return t&&t[cu]}static from(e,n={}){if(t.isFeed(e))return e;const o=new t(n);if(e[au])o._ensureKey(e.key),o._appendBlock(e.buffer);else if("string"==typeof e)o._unpack(e);else if("string"==typeof e.hash)o._unpack(e.hash);else{if(!r.Buffer.isBuffer(e))throw new Error("NotAFeed");o._unpack(e.toString("utf8"))}return o}static fromBlockArray(e){if(!Array.isArray(e))throw new Error("fromBlockArray() expects an Array of blocks");const n={};let o=0;for(const t of e)o+=t.size,n[t.key.toString("hex")]=1;const i=new t,s=Object.keys(n).length*(t.KEY_SIZE+t.KEY.length)+e.length*t.META_SIZE+o;i.buf=r.Buffer.alloc(s);for(const t of e)n[t.key.toString("hex")]<2&&i._appendKey(t.key),i._appendBlock(t.buffer);return i._reIndex(!0),i}static signPair(){const t=r.Buffer.allocUnsafe(eu),e=r.Buffer.allocUnsafe(nu);return iu(e,t),{sk:t,pk:e}}static mapBlock(e,n=0,r=null){const o=t.SIGNATURE_SIZE,i=t.COUNTER_SIZE,s=o+i,a={[au]:!0,get start(){return n},get sig(){return e.subarray(n,n+o)},get header(){return e.subarray(n+o,n+o+s)},get parentSig(){return e.subarray(n+o,n+o+o)},get size(){return e.readUInt32BE(n+2*o)},set size(t){if("number"!=typeof t||t<0||t+n+o+s>e.length)throw new Error("Invalid blob size");return e.writeUInt32BE(t,n+2*o)},get body(){return e.subarray(n+o+s,a.safeEnd)},get dat(){return e.subarray(n+o,a.safeEnd)},get end(){return n+o+s+a.size},get safeEnd(){const t=a.size;if(t<1)throw new Error("Invalid blob size: "+t);const r=n+o+s+t;if(r>e.length)throw new Error("Incomplete or invalid block: end overflows buffer length"+r);return r},get next(){return t.mapBlock(e,a.safeEnd)},verify:t=>ou(a.sig,a.dat,t),get buffer(){return e.subarray(n,a.safeEnd)},get key(){if(!r)throw new Error("InternalError:MissingKey");return r},set key(t){if(r)throw new Error("InternalError:KeyExists");r=t},get isGenesis(){return uu.equals(a.parentSig)},[su]:()=>`[BlockMapper] start: ${a.start}, blocksize: ${a.size}, id: ${a.sig.slice(0,6).toString("hex")}, parent: ${a.parentSig.slice(0,6).toString("hex")}`};return a}};function hu(t){return t.toString("base64").replace(/\+/,"-").replace(/\//g,"_").replace(/=+$/,"")}function fu(t){return t=(t=(t+"===").slice(0,t.length+t.length%4)).replace(/-/g,"+").replace(/_/g,"/"),r.Buffer.from(t,"base64")}const gu=lu,Au=Symbol.for("PicoRepo");function du(t,e){if(!r.Buffer.isBuffer(e))throw new Error("Expected key to be a Buffer");const n=r.Buffer.alloc(1+e.length);return e.copy(n,1),n[0]=t,n}var pu,yu,Iu,mu=class{static isRepo(t){return t&&t[Au]}constructor(t,e=[]){this[Au]=!0,this._db=t,this.allowDetached=!1,this._strategies=Array.isArray(e)?e:[e];for(const t of this._strategies)if("function"!=typeof t)throw new Error("ExpectedCallback")}get mkKey(){return du}async _setHeadPtr(t,e){const n=du(0,t);return await this._db.put(n,e),e}async _setLatestPtr(t,e){const n=du(3,t);return await this._db.put(n,e),e}async _getTag(t,e){const n=du(t,e);return await this._db.get(n).catch((t=>{if(!t.notFound)throw t}))}async _getHeadPtr(t){return this._getTag(0,t)}async _getTailPtr(t){return this._getTag(2,t)}async _getLatestPtr(t){return this._getTag(3,t)}async _getChainPtr(t){return this._getTag(5,t)}async writeBlock(t){const e=du(1,t.sig),n=r.Buffer.alloc(32+t.buffer.length);t.key.copy(n,0),t.buffer.copy(n,32);const o=[];if(o.push({type:"put",key:e,value:n}),t.isGenesis)o.push({type:"put",key:du(2,t.key),value:t.sig}),o.push({type:"put",key:du(5,t.sig),value:t.sig}),o.push({type:"put",key:du(6,t.sig),value:t.sig});else{const e=du(5,t.parentSig),n=await this._db.get(e);o.push({type:"del",key:e}),o.push({type:"put",key:du(5,t.sig),value:n}),o.push({type:"put",key:du(6,n),value:t.sig})}return await this._db.batch(o),!0}async readBlock(t){const e=du(1,t),n=await this._db.get(e).catch((t=>{if(!t.notFound)throw t}));if(n)return gu.mapBlock(n,32,n.slice(0,32))}async _hasBlock(t){return!!await this.readBlock(t)}async _traceOwnerOf(t){let e=0;for await(const n of this._chainLoad(t)){if(n.isGenesis)return n.key;e++}if(e)throw new Error("Orphaned Chain")}async resolveFeed(t,e){let n=await this._getTag(5,t);if(n)return this.loadFeed(t,e);for await(const e of this._chainLoad(t))e.isGenesis&&(n=await this._getTag(6,e.sig));if(!n)throw new Error("Unknown feed");return this.loadFeed(n,e)}async merge(t,e){if(gu.isFeed(t)||(t=gu.from(t)),!t.length)return 0;let n=0,r=null;const o=t.first;if(r=o.isGenesis?o.key:await this._traceOwnerOf(o.parentSig),!r)throw new Error("CannotMerge: Unknown Chain");for(const o of t.blocks()){const t=o.key,i=o.sig;if(await this._hasBlock(i))continue;const s=async()=>{await this.writeBlock(o),await this._setHeadPtr(r,o.sig),await this._setLatestPtr(t,o.sig),n++},a=await this._getHeadPtr(r);if(!a){await s();continue}if(a.equals(o.parentSig)){await s();continue}if(this.allowDetached&&(o.isGenesis||await this._hasBlock(o.parentSig))){await s();continue}if(!await this._hasBlock(o.parentSig))break;let c=!1;for await(const t of this._chainLoad(o.parentSig))if(a.equals(t.sig)){c=!0;break}if(c)await s();else{if(!await this._queryUserStrategy(o,e))break;await s()}}return n}async _queryUserStrategy(t,e){for(const n of[e,...this._strategies]){if(!n)continue;const e=n(t,this);if("function"!=typeof e.then)throw new Error("PromiseExpected");if(await e)return!0}return!1}async loadHead(t,e){const n=await this._getHeadPtr(t);if(n)return this.loadFeed(n,e)}async loadLatest(t,e){const n=await this._getLatestPtr(t);if(n)return this.loadFeed(n,e)}async loadFeed(t,e){let n=0;Number.isInteger(e)&&e>0&&(n=e),n&&(e=(t,e)=>!--n&&e(!0));const r=[];for await(const n of this._chainLoad(t)){let t=!1,o=!1;if("function"==typeof e&&e(n,(e=>{e?o=!0:t=!0})),t||r.unshift(n),o||t)break}const o=gu.fromBlockArray(r);if(o.length)return o}async*_chainLoad(t){let e=!0;for(;;){const n=await this.readBlock(t);if(!n&&e)break;if(e=!1,!n)throw new Error("ParentNotFound");if(yield n,n.isGenesis)break;t=n.parentSig}}async rollback(t,e){let n=!1;const r=await this.loadHead(t,((t,r)=>{e&&t.sig.equals(e)&&(n=!0,r())}));if(e&&!n)throw new Error("ReferenceNotFound");const o=[],i=[],s={};for(let t=r.length-1;t>=0;t--){const e=r.get(t),n=e.key.toString("hex");s[n]||(s[n]=await this._getLatestPtr(e.key)),s[n]?.equals(e.sig)&&i.push(e.key),o.push({type:"del",key:du(1,e.sig)})}const a=r.first.isGenesis;a&&o.push({type:"del",key:du(2,t)}),o.push({type:"del",key:du(0,t)}),e?o.push({type:"put",key:du(0,t),value:e}):a||o.push({type:"put",key:du(0,t),value:r.first.parentSig}),o.push({type:"del",key:du(5,r.last.sig)});const c=await this._getTag(5,r.last.sig);c&&o.push({type:"del",key:du(6,c)}),c&&!a&&(o.push({type:"put",key:du(5,r.first.parentSig),value:c}),o.push({type:"put",key:du(6,c),value:r.first.parentSig}));for(const t of i)o.push({type:"del",key:du(3,t)});return await this._db.batch(o),r}get headOf(){return this._getHeadPtr}get tailOf(){return this._getTailPtr}get latestOf(){return this._getLatestPtr}get chainload(){return this._chainLoad}get ownerOf(){return this._traceOwnerOf}async writeReg(t,e){const n=du(4,r.Buffer.from(t));return await this._db.put(n,r.Buffer.from(e)),!0}async readReg(t){const e=du(4,r.Buffer.from(t));return await this._db.get(e).catch((t=>{if(!t.notFound)throw t}))}async listHeads(){return this._listRange({gt:du(0,r.Buffer.alloc(32).fill(0)),lt:du(0,r.Buffer.alloc(32).fill(255))})}async listTails(){return this._listRange({gt:du(2,r.Buffer.alloc(32).fill(0)),lt:du(2,r.Buffer.alloc(32).fill(255))})}async listLatest(){return this._listRange({gt:du(3,r.Buffer.alloc(32).fill(0)),lt:du(3,r.Buffer.alloc(32).fill(255))})}async listFeeds(){return this._listRange({gt:du(5,r.Buffer.alloc(32).fill(0)),lt:du(5,r.Buffer.alloc(32).fill(255))})}async listFeedHeads(){return this._listRange({gt:du(6,r.Buffer.alloc(32).fill(0)),lt:du(6,r.Buffer.alloc(32).fill(255))})}async _listRange(t){const e=this._db.iterator(t),n=[];for(;;)try{const[t,r]=await new Promise(((t,n)=>{e.next(((e,r,o)=>{e?n(e):t([r,o])}))}));if(!t)break;n.push({key:t.slice(1),value:r})}catch(t){console.warn("Iterator died with an error",t);break}return await new Promise(((t,n)=>{e.close((e=>e?n(e):t()))})),n}};try{pu=new TextDecoder}catch(t){}var Eu,wu,bu,Cu,vu,Bu=0,_u={},xu=0,Su=0,ku=[],Qu={useRecords:!1,mapsAsObjects:!0};class Mu{}const Du=new Mu;Du.name="MessagePack 0xC1";var Lu=!1,Tu=2;try{new Function("")}catch(t){Tu=1/0}class $u{constructor(t){t&&(!1===t.useRecords&&void 0===t.mapsAsObjects&&(t.mapsAsObjects=!0),t.sequential&&!1!==t.trusted&&(t.trusted=!0,t.structures||0==t.useRecords||(t.structures=[],t.maxSharedStructures||(t.maxSharedStructures=0))),t.structures?t.structures.sharedLength=t.structures.length:t.getStructures&&((t.structures=[]).uninitialized=!0,t.structures.sharedLength=0)),Object.assign(this,t)}unpack(t,e){if(yu)return al((()=>(cl(),this?this.unpack(t,e):$u.prototype.unpack.call(Qu,t,e))));Iu=e>-1?e:t.length,Bu=0,Su=0,wu=null,bu=null,yu=t;try{vu=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(e){if(yu=null,t instanceof Uint8Array)throw e;throw new Error("Source must be a Uint8Array or Buffer but was a "+(t&&"object"==typeof t?t.constructor.name:typeof t))}if(this instanceof $u){if(_u=this,this.structures)return Eu=this.structures,Uu();(!Eu||Eu.length>0)&&(Eu=[])}else _u=Qu,(!Eu||Eu.length>0)&&(Eu=[]);return Uu()}unpackMultiple(t,e){let n,r=0;try{Lu=!0;let o=t.length,i=this?this.unpack(t,o):hl.unpack(t,o);if(!e){for(n=[i];Bu<o;)r=Bu,n.push(Uu());return n}for(e(i);Bu<o;)if(r=Bu,!1===e(Uu()))return}catch(t){throw t.lastPosition=r,t.values=n,t}finally{Lu=!1,cl()}}_mergeStructures(t,e){for(let e=0,n=(t=t||[]).length;e<n;e++){let n=t[e];n&&(n.isShared=!0,e>=32&&(n.highByte=e-32>>5))}t.sharedLength=t.length;for(let n in e||[])if(n>=0){let r=t[n],o=e[n];o&&(r&&((t.restoreStructures||(t.restoreStructures=[]))[n]=r),t[n]=o)}return this.structures=t}decode(t,e){return this.unpack(t,e)}}function Uu(){try{if(!_u.trusted&&!Lu){let t=Eu.sharedLength||0;t<Eu.length&&(Eu.length=t)}let t=Fu();if(bu&&(Bu=bu.postBundlePosition),Bu==Iu)Eu.restoreStructures&&Ou(),Eu=null,yu=null,Cu&&(Cu=null);else{if(Bu>Iu)throw new Error("Unexpected end of MessagePack data");if(!Lu)throw new Error("Data read, but end of buffer not reached "+JSON.stringify(t).slice(0,100))}return t}catch(t){throw Eu.restoreStructures&&Ou(),cl(),(t instanceof RangeError||t.message.startsWith("Unexpected end of buffer")||Bu>Iu)&&(t.incomplete=!0),t}}function Ou(){for(let t in Eu.restoreStructures)Eu[t]=Eu.restoreStructures[t];Eu.restoreStructures=null}function Fu(){let t=yu[Bu++];if(t<160){if(t<128){if(t<64)return t;{let e=Eu[63&t]||_u.getStructures&&Ku()[63&t];return e?(e.read||(e.read=Pu(e,63&t)),e.read()):t}}if(t<144){if(t-=128,_u.mapsAsObjects){let e={};for(let n=0;n<t;n++)e[rl()]=Fu();return e}{let e=new Map;for(let n=0;n<t;n++)e.set(Fu(),Fu());return e}}{t-=144;let e=new Array(t);for(let n=0;n<t;n++)e[n]=Fu();return e}}if(t<192){let e=t-160;if(Su>=Bu)return wu.slice(Bu-xu,(Bu+=e)-xu);if(0==Su&&Iu<140){let t=e<16?Xu(e):Wu(e);if(null!=t)return t}return Ru(e)}{let e;switch(t){case 192:return null;case 193:return bu?(e=Fu(),e>0?bu[1].slice(bu.position1,bu.position1+=e):bu[0].slice(bu.position0,bu.position0-=e)):Du;case 194:return!1;case 195:return!0;case 196:if(e=yu[Bu++],void 0===e)throw new Error("Unexpected end of buffer");return tl(e);case 197:return e=vu.getUint16(Bu),Bu+=2,tl(e);case 198:return e=vu.getUint32(Bu),Bu+=4,tl(e);case 199:return el(yu[Bu++]);case 200:return e=vu.getUint16(Bu),Bu+=2,el(e);case 201:return e=vu.getUint32(Bu),Bu+=4,el(e);case 202:if(e=vu.getFloat32(Bu),_u.useFloat32>2){let t=ul[(127&yu[Bu])<<1|yu[Bu+1]>>7];return Bu+=4,(t*e+(e>0?.5:-.5)>>0)/t}return Bu+=4,e;case 203:return e=vu.getFloat64(Bu),Bu+=8,e;case 204:return yu[Bu++];case 205:return e=vu.getUint16(Bu),Bu+=2,e;case 206:return e=vu.getUint32(Bu),Bu+=4,e;case 207:return _u.int64AsNumber?(e=4294967296*vu.getUint32(Bu),e+=vu.getUint32(Bu+4)):e=vu.getBigUint64(Bu),Bu+=8,e;case 208:return vu.getInt8(Bu++);case 209:return e=vu.getInt16(Bu),Bu+=2,e;case 210:return e=vu.getInt32(Bu),Bu+=4,e;case 211:return _u.int64AsNumber?(e=4294967296*vu.getInt32(Bu),e+=vu.getUint32(Bu+4)):e=vu.getBigInt64(Bu),Bu+=8,e;case 212:if(e=yu[Bu++],114==e)return ol(63&yu[Bu++]);{let t=ku[e];if(t)return t.read?(Bu++,t.read(Fu())):t.noBuffer?(Bu++,t()):t(yu.subarray(Bu,++Bu));throw new Error("Unknown extension "+e)}case 213:return e=yu[Bu],114==e?(Bu++,ol(63&yu[Bu++],yu[Bu++])):el(2);case 214:return el(4);case 215:return el(8);case 216:return el(16);case 217:return e=yu[Bu++],Su>=Bu?wu.slice(Bu-xu,(Bu+=e)-xu):ju(e);case 218:return e=vu.getUint16(Bu),Su>=(Bu+=2)?wu.slice(Bu-xu,(Bu+=e)-xu):Hu(e);case 219:return e=vu.getUint32(Bu),Su>=(Bu+=4)?wu.slice(Bu-xu,(Bu+=e)-xu):Vu(e);case 220:return e=vu.getUint16(Bu),Bu+=2,qu(e);case 221:return e=vu.getUint32(Bu),Bu+=4,qu(e);case 222:return e=vu.getUint16(Bu),Bu+=2,zu(e);case 223:return e=vu.getUint32(Bu),Bu+=4,zu(e);default:if(t>=224)return t-256;if(void 0===t){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}throw new Error("Unknown MessagePack token "+t)}}}const Nu=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Pu(t,e){function n(){if(n.count++>Tu){let n=t.read=new Function("r","return function(){return {"+t.map((t=>Nu.test(t)?t+":r()":"["+JSON.stringify(t)+"]:r()")).join(",")+"}}")(Fu);return 0===t.highByte&&(t.read=Yu(e,t.read)),n()}let r={};for(let e=0,n=t.length;e<n;e++){r[t[e]]=Fu()}return r}return n.count=0,0===t.highByte?Yu(e,n):n}const Yu=(t,e)=>function(){let n=yu[Bu++];if(0===n)return e();let r=t<32?-(t+(n<<5)):t+(n<<5),o=Eu[r]||Ku()[r];if(!o)throw new Error("Record id is not defined for "+r);return o.read||(o.read=Pu(o,t)),o.read()};function Ku(){let t=al((()=>(yu=null,_u.getStructures())));return Eu=_u._mergeStructures(t,Eu)}var Ru=Gu,ju=Gu,Hu=Gu,Vu=Gu;function Gu(t){let e;if(t<16&&(e=Xu(t)))return e;if(t>64&&pu)return pu.decode(yu.subarray(Bu,Bu+=t));const n=Bu+t,r=[];for(e="";Bu<n;){const t=yu[Bu++];if(0==(128&t))r.push(t);else if(192==(224&t)){const e=63&yu[Bu++];r.push((31&t)<<6|e)}else if(224==(240&t)){const e=63&yu[Bu++],n=63&yu[Bu++];r.push((31&t)<<12|e<<6|n)}else if(240==(248&t)){let e=(7&t)<<18|(63&yu[Bu++])<<12|(63&yu[Bu++])<<6|63&yu[Bu++];e>65535&&(e-=65536,r.push(e>>>10&1023|55296),e=56320|1023&e),r.push(e)}else r.push(t);r.length>=4096&&(e+=Ju.apply(String,r),r.length=0)}return r.length>0&&(e+=Ju.apply(String,r)),e}function qu(t){let e=new Array(t);for(let n=0;n<t;n++)e[n]=Fu();return e}function zu(t){if(_u.mapsAsObjects){let e={};for(let n=0;n<t;n++)e[rl()]=Fu();return e}{let e=new Map;for(let n=0;n<t;n++)e.set(Fu(),Fu());return e}}var Ju=String.fromCharCode;function Wu(t){let e=Bu,n=new Array(t);for(let r=0;r<t;r++){const t=yu[Bu++];if((128&t)>0)return void(Bu=e);n[r]=t}return Ju.apply(String,n)}function Xu(t){if(t<4){if(t<2){if(0===t)return"";{let t=yu[Bu++];return(128&t)>1?void(Bu-=1):Ju(t)}}{let e=yu[Bu++],n=yu[Bu++];if((128&e)>0||(128&n)>0)return void(Bu-=2);if(t<3)return Ju(e,n);let r=yu[Bu++];return(128&r)>0?void(Bu-=3):Ju(e,n,r)}}{let e=yu[Bu++],n=yu[Bu++],r=yu[Bu++],o=yu[Bu++];if((128&e)>0||(128&n)>0||(128&r)>0||(128&o)>0)return void(Bu-=4);if(t<6){if(4===t)return Ju(e,n,r,o);{let t=yu[Bu++];return(128&t)>0?void(Bu-=5):Ju(e,n,r,o,t)}}if(t<8){let i=yu[Bu++],s=yu[Bu++];if((128&i)>0||(128&s)>0)return void(Bu-=6);if(t<7)return Ju(e,n,r,o,i,s);let a=yu[Bu++];return(128&a)>0?void(Bu-=7):Ju(e,n,r,o,i,s,a)}{let i=yu[Bu++],s=yu[Bu++],a=yu[Bu++],c=yu[Bu++];if((128&i)>0||(128&s)>0||(128&a)>0||(128&c)>0)return void(Bu-=8);if(t<10){if(8===t)return Ju(e,n,r,o,i,s,a,c);{let t=yu[Bu++];return(128&t)>0?void(Bu-=9):Ju(e,n,r,o,i,s,a,c,t)}}if(t<12){let u=yu[Bu++],l=yu[Bu++];if((128&u)>0||(128&l)>0)return void(Bu-=10);if(t<11)return Ju(e,n,r,o,i,s,a,c,u,l);let h=yu[Bu++];return(128&h)>0?void(Bu-=11):Ju(e,n,r,o,i,s,a,c,u,l,h)}{let u=yu[Bu++],l=yu[Bu++],h=yu[Bu++],f=yu[Bu++];if((128&u)>0||(128&l)>0||(128&h)>0||(128&f)>0)return void(Bu-=12);if(t<14){if(12===t)return Ju(e,n,r,o,i,s,a,c,u,l,h,f);{let t=yu[Bu++];return(128&t)>0?void(Bu-=13):Ju(e,n,r,o,i,s,a,c,u,l,h,f,t)}}{let g=yu[Bu++],A=yu[Bu++];if((128&g)>0||(128&A)>0)return void(Bu-=14);if(t<15)return Ju(e,n,r,o,i,s,a,c,u,l,h,f,g,A);let d=yu[Bu++];return(128&d)>0?void(Bu-=15):Ju(e,n,r,o,i,s,a,c,u,l,h,f,g,A,d)}}}}}function Zu(){let t,e=yu[Bu++];if(e<192)t=e-160;else switch(e){case 217:t=yu[Bu++];break;case 218:t=vu.getUint16(Bu),Bu+=2;break;case 219:t=vu.getUint32(Bu),Bu+=4;break;default:throw new Error("Expected string")}return Gu(t)}function tl(t){return _u.copyBuffers?Uint8Array.prototype.slice.call(yu,Bu,Bu+=t):yu.subarray(Bu,Bu+=t)}function el(t){let e=yu[Bu++];if(ku[e])return ku[e](yu.subarray(Bu,Bu+=t));throw new Error("Unknown extension type "+e)}var nl=new Array(4096);function rl(){let t=yu[Bu++];if(!(t>=160&&t<192))return Bu--,Fu();if(t-=160,Su>=Bu)return wu.slice(Bu-xu,(Bu+=t)-xu);if(!(0==Su&&Iu<180))return Ru(t);let e,n=4095&(t<<5^(t>1?vu.getUint16(Bu):t>0?yu[Bu]:0)),r=nl[n],o=Bu,i=Bu+t-3,s=0;if(r&&r.bytes==t){for(;o<i;){if(e=vu.getUint32(o),e!=r[s++]){o=1879048192;break}o+=4}for(i+=3;o<i;)if(e=yu[o++],e!=r[s++]){o=1879048192;break}if(o===i)return Bu=o,r.string;i-=3,o=Bu}for(r=[],nl[n]=r,r.bytes=t;o<i;)e=vu.getUint32(o),r.push(e),o+=4;for(i+=3;o<i;)e=yu[o++],r.push(e);let a=t<16?Xu(t):Wu(t);return r.string=null!=a?a:Ru(t)}const ol=(t,e)=>{var n=Fu();let r=t;void 0!==e&&(t=t<32?-((e<<5)+t):(e<<5)+t,n.highByte=e);let o=Eu[t];return o&&o.isShared&&((Eu.restoreStructures||(Eu.restoreStructures=[]))[t]=o),Eu[t]=n,n.read=Pu(n,r),n.read()};ku[0]=()=>{},ku[0].noBuffer=!0,ku[101]=()=>{let t=Fu();return(globalThis[t[0]]||Error)(t[1])},ku[105]=t=>{let e=vu.getUint32(Bu-4);Cu||(Cu=new Map);let n,r=yu[Bu];n=r>=144&&r<160||220==r||221==r?[]:{};let o={target:n};Cu.set(e,o);let i=Fu();return o.used?Object.assign(n,i):(o.target=i,i)},ku[112]=t=>{let e=vu.getUint32(Bu-4),n=Cu.get(e);return n.used=!0,n.target},ku[115]=()=>new Set(Fu());const il=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map((t=>t+"Array"));ku[116]=t=>{let e=t[0],n=il[e];if(!n)throw new Error("Could not find typed array for code "+e);return new globalThis[n](Uint8Array.prototype.slice.call(t,1).buffer)},ku[120]=()=>{let t=Fu();return new RegExp(t[0],t[1])};const sl=[];function al(t){let e=Iu,n=Bu,r=xu,o=Su,i=wu,s=Cu,a=bu,c=new Uint8Array(yu.slice(0,Iu)),u=Eu,l=Eu.slice(0,Eu.length),h=_u,f=Lu,g=t();return Iu=e,Bu=n,xu=r,Su=o,wu=i,Cu=s,bu=a,yu=c,Lu=f,(Eu=u).splice(0,Eu.length,...l),_u=h,vu=new DataView(yu.buffer,yu.byteOffset,yu.byteLength),g}function cl(){yu=null,Cu=null,Eu=null}ku[98]=t=>{let e=(t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3],n=Bu;return Bu+=e-t.length,bu=sl,(bu=[Zu(),Zu()]).position0=0,bu.position1=0,bu.postBundlePosition=Bu,Bu=n,Fu()},ku[255]=t=>4==t.length?new Date(1e3*(16777216*t[0]+(t[1]<<16)+(t[2]<<8)+t[3])):8==t.length?new Date(((t[0]<<22)+(t[1]<<14)+(t[2]<<6)+(t[3]>>2))/1e6+1e3*(4294967296*(3&t[3])+16777216*t[4]+(t[5]<<16)+(t[6]<<8)+t[7])):12==t.length?new Date(((t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3])/1e6+1e3*((128&t[4]?-281474976710656:0)+1099511627776*t[6]+4294967296*t[7]+16777216*t[8]+(t[9]<<16)+(t[10]<<8)+t[11])):new Date("invalid");const ul=new Array(147);for(let t=0;t<256;t++)ul[t]=+("1e"+Math.floor(45.15-.30103*t));const ll=$u;var hl=new $u({useRecords:!1});const fl=hl.unpack,gl=hl.unpackMultiple,Al=hl.unpack,dl={NEVER:0,ALWAYS:1,DECIMAL_ROUND:3,DECIMAL_FIT:4};let pl,yl,Il,ml=new Float32Array(1),El=new Uint8Array(ml.buffer,0,4);try{pl=new TextEncoder}catch(t){}const wl=void 0!==r.Buffer,bl=wl?function(t){return r.Buffer.allocUnsafeSlow(t)}:Uint8Array,Cl=wl?r.Buffer:Uint8Array,vl=wl?4294967296:2144337920;let Bl,_l,xl,Sl,kl=0,Ql=null;const Ml=/[\u0080-\uFFFF]/,Dl=Symbol("record-id");class Ll extends $u{constructor(t){let e,n,r,o;super(t),this.offset=0;let i=0,s=Cl.prototype.utf8Write?function(t,e){return Bl.utf8Write(t,e,4294967295)}:!(!pl||!pl.encodeInto)&&function(t,e){return pl.encodeInto(t,Bl.subarray(e)).written},a=this;t||(t={});let c=t&&t.sequential,u=t.structures||t.saveStructures,l=t.maxSharedStructures;if(null==l&&(l=u?32:0),l>8160)throw new Error("Maximum maxSharedStructure is 8160");t.structuredClone&&null==t.moreTypes&&(t.moreTypes=!0);let h=t.maxOwnStructures;null==h&&(h=u?32:64),this.structures||0==t.useRecords||(this.structures=[]);let f=l>32||h+l>64,g=l+64,A=l+h+64;if(A>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let d=[],p=0,y=0;this.pack=this.encode=function(t,s){if(Bl||(Bl=new bl(8192),xl=new DataView(Bl.buffer,0,8192),kl=0),Sl=Bl.length-10,Sl-kl<2048?(Bl=new bl(Bl.length),xl=new DataView(Bl.buffer,0,Bl.length),Sl=Bl.length-10,kl=0):kl=kl+7&2147483640,e=kl,o=a.structuredClone?new Map:null,a.bundleStrings&&"string"!=typeof t?(Ql=[],Ql.size=1/0):Ql=null,r=a.structures,r){r.uninitialized&&(r=a._mergeStructures(a.getStructures()));let t=r.sharedLength||0;if(t>l)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+r.sharedLength);if(!r.transitions){r.transitions=Object.create(null);for(let e=0;e<t;e++){let t=r[e];if(!t)continue;let n,o=r.transitions;for(let e=0,r=t.length;e<r;e++){let r=t[e];n=o[r],n||(n=o[r]=Object.create(null)),o=n}o[Dl]=e+64}i=t}c||(r.nextId=t+64)}n&&(n=!1);try{if(I(t),Ql&&Ol(e,I),a.offset=kl,o&&o.idsToInsert){kl+=6*o.idsToInsert.length,kl>Sl&&E(kl),a.offset=kl;let t=function(t,e){let n,r=6*e.length,o=t.length-r;e.sort(((t,e)=>t.offset>e.offset?1:-1));for(;n=e.pop();){let e=n.offset,i=n.id;t.copyWithin(e+r,e,o),r-=6;let s=e+r;t[s++]=214,t[s++]=105,t[s++]=i>>24,t[s++]=i>>16&255,t[s++]=i>>8&255,t[s++]=255&i,o=e}return t}(Bl.subarray(e,kl),o.idsToInsert);return o=null,t}return s&Vl?(Bl.start=e,Bl.end=kl,Bl):Bl.subarray(e,kl)}finally{if(r){y<10&&y++;let o=r.sharedLength||l;if(r.length>o&&(r.length=o),p>1e4)r.transitions=null,y=0,p=0,d.length>0&&(d=[]);else if(d.length>0&&!c){for(let t=0,e=d.length;t<e;t++)d[t][Dl]=0;d=[]}if(n&&a.saveStructures){let n=Bl.subarray(e,kl);return!1===a.saveStructures(r,i)?(a._mergeStructures(a.getStructures()),a.pack(t)):(i=o,n)}}s&Gl&&(kl=e)}};const I=t=>{kl>Sl&&(Bl=E(kl));var n,r=typeof t;if("string"===r){let r,o=t.length;if(Ql&&o>=4&&o<4096){if((Ql.size+=o)>61440){let t,n=(Ql[0]?3*Ql[0].length+Ql[1].length:0)+10;kl+n>Sl&&(Bl=E(kl+n)),Ql.position?(Bl[kl]=200,kl+=3,Bl[kl++]=98,t=kl-e,kl+=4,Ol(e,I),xl.setUint16(t+e-3,kl-e-t)):(Bl[kl++]=214,Bl[kl++]=98,t=kl-e,kl+=4),Ql=["",""],Ql.size=0,Ql.position=t}let n=Ml.test(t);return Ql[n?0:1]+=t,Bl[kl++]=193,void I(n?-o:o)}r=o<32?1:o<256?2:o<65536?3:5;let i=3*o;if(kl+i>Sl&&(Bl=E(kl+i)),o<64||!s){let e,i,s,a=kl+r;for(e=0;e<o;e++)i=t.charCodeAt(e),i<128?Bl[a++]=i:i<2048?(Bl[a++]=i>>6|192,Bl[a++]=63&i|128):55296==(64512&i)&&56320==(64512&(s=t.charCodeAt(e+1)))?(i=65536+((1023&i)<<10)+(1023&s),e++,Bl[a++]=i>>18|240,Bl[a++]=i>>12&63|128,Bl[a++]=i>>6&63|128,Bl[a++]=63&i|128):(Bl[a++]=i>>12|224,Bl[a++]=i>>6&63|128,Bl[a++]=63&i|128);n=a-kl-r}else n=s(t,kl+r);n<32?Bl[kl++]=160|n:n<256?(r<2&&Bl.copyWithin(kl+2,kl+1,kl+1+n),Bl[kl++]=217,Bl[kl++]=n):n<65536?(r<3&&Bl.copyWithin(kl+3,kl+2,kl+2+n),Bl[kl++]=218,Bl[kl++]=n>>8,Bl[kl++]=255&n):(r<5&&Bl.copyWithin(kl+5,kl+3,kl+3+n),Bl[kl++]=219,xl.setUint32(kl,n),kl+=4),kl+=n}else if("number"===r)if(t>>>0===t)t<64||t<128&&!1===this.useRecords?Bl[kl++]=t:t<256?(Bl[kl++]=204,Bl[kl++]=t):t<65536?(Bl[kl++]=205,Bl[kl++]=t>>8,Bl[kl++]=255&t):(Bl[kl++]=206,xl.setUint32(kl,t),kl+=4);else if(t>>0===t)t>=-32?Bl[kl++]=256+t:t>=-128?(Bl[kl++]=208,Bl[kl++]=t+256):t>=-32768?(Bl[kl++]=209,xl.setInt16(kl,t),kl+=2):(Bl[kl++]=210,xl.setInt32(kl,t),kl+=4);else{let e;if((e=this.useFloat32)>0&&t<4294967296&&t>=-2147483648){let n;if(Bl[kl++]=202,xl.setFloat32(kl,t),e<4||(n=t*ul[(127&Bl[kl])<<1|Bl[kl+1]>>7])>>0===n)return void(kl+=4);kl--}Bl[kl++]=203,xl.setFloat64(kl,t),kl+=8}else if("object"===r)if(t){if(o){let n=o.get(t);if(n){if(!n.id){let t=o.idsToInsert||(o.idsToInsert=[]);n.id=t.push(n)}return Bl[kl++]=214,Bl[kl++]=112,xl.setUint32(kl,n.id),void(kl+=4)}o.set(t,{offset:kl-e})}let r=t.constructor;if(r===Object)m(t,!0);else if(r===Array){(n=t.length)<16?Bl[kl++]=144|n:n<65536?(Bl[kl++]=220,Bl[kl++]=n>>8,Bl[kl++]=255&n):(Bl[kl++]=221,xl.setUint32(kl,n),kl+=4);for(let e=0;e<n;e++)I(t[e])}else if(r===Map){(n=t.size)<16?Bl[kl++]=128|n:n<65536?(Bl[kl++]=222,Bl[kl++]=n>>8,Bl[kl++]=255&n):(Bl[kl++]=223,xl.setUint32(kl,n),kl+=4);for(let[e,n]of t)I(e),I(n)}else{for(let e=0,n=yl.length;e<n;e++){if(t instanceof Il[e]){let n=yl[e];if(n.write)return n.type&&(Bl[kl++]=212,Bl[kl++]=n.type,Bl[kl++]=0),void I(n.write.call(this,t));let r,o=Bl,i=xl,s=kl;Bl=null;try{r=n.pack.call(this,t,(t=>(Bl=o,o=null,kl+=t,kl>Sl&&E(kl),{target:Bl,targetView:xl,position:kl-t})),I)}finally{o&&(Bl=o,xl=i,kl=s,Sl=Bl.length-10)}return void(r&&(r.length+kl>Sl&&E(r.length+kl),kl=Ul(r,Bl,kl,n.type)))}}m(t,!t.hasOwnProperty)}}else Bl[kl++]=192;else if("boolean"===r)Bl[kl++]=t?195:194;else if("bigint"===r){if(t<BigInt(1)<<BigInt(63)&&t>=-(BigInt(1)<<BigInt(63)))Bl[kl++]=211,xl.setBigInt64(kl,t);else if(t<BigInt(1)<<BigInt(64)&&t>0)Bl[kl++]=207,xl.setBigUint64(kl,t);else{if(!this.largeBigIntToFloat)throw new RangeError(t+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");Bl[kl++]=203,xl.setFloat64(kl,Number(t))}kl+=8}else if("undefined"===r)this.encodeUndefinedAsNil?Bl[kl++]=192:(Bl[kl++]=212,Bl[kl++]=0,Bl[kl++]=0);else{if("function"!==r)throw new Error("Unknown type: "+r);I(this.writeFunction&&this.writeFunction())}},m=!1===this.useRecords?this.variableMapSize?t=>{let e,n=Object.keys(t),r=n.length;r<16?Bl[kl++]=128|r:r<65536?(Bl[kl++]=222,Bl[kl++]=r>>8,Bl[kl++]=255&r):(Bl[kl++]=223,xl.setUint32(kl,r),kl+=4);for(let o=0;o<r;o++)I(e=n[o]),I(t[e])}:(t,n)=>{Bl[kl++]=222;let r=kl-e;kl+=2;let o=0;for(let e in t)(n||t.hasOwnProperty(e))&&(I(e),I(t[e]),o++);Bl[r+++e]=o>>8,Bl[r+e]=255&o}:t.progressiveRecords&&!f?(t,n)=>{let o,i,s=r.transitions||(r.transitions=Object.create(null)),a=kl++-e;for(let c in t)if(n||t.hasOwnProperty(c)){if(o=s[c],o)s=o;else{let n=Object.keys(t),u=s;s=r.transitions;let l=0;for(let t=0,e=n.length;t<e;t++){let e=n[t];o=s[e],o||(o=s[e]=Object.create(null),l++),s=o}a+e+1==kl?(kl--,w(s,n,l)):b(s,n,a,l),i=!0,s=u[c]}I(t[c])}if(!i){let n=s[Dl];n?Bl[a+e]=n:b(s,Object.keys(t),a,0)}}:(t,e)=>{let n,o=r.transitions||(r.transitions=Object.create(null)),i=0;for(let r in t)(e||t.hasOwnProperty(r))&&(n=o[r],n||(n=o[r]=Object.create(null),i++),o=n);let s=o[Dl];s?s>=96&&f?(Bl[kl++]=96+(31&(s-=96)),Bl[kl++]=s>>5):Bl[kl++]=s:w(o,o.__keys__||Object.keys(t),i);for(let n in t)(e||t.hasOwnProperty(n))&&I(t[n])},E=t=>{let n;if(t>16777216){if(t-e>vl)throw new Error("Packed buffer would be larger than maximum buffer size");n=Math.min(vl,4096*Math.round(Math.max((t-e)*(t>67108864?1.25:2),4194304)/4096))}else n=1+(Math.max(t-e<<2,Bl.length-1)>>12)<<12;let r=new bl(n);return xl=new DataView(r.buffer,0,n),t=Math.min(t,Bl.length),Bl.copy?Bl.copy(r,0,e,t):r.set(Bl.slice(e,t)),kl-=e,e=0,Sl=r.length-10,Bl=r},w=(t,e,o)=>{let i=r.nextId;i||(i=64),i<g&&this.shouldShareStructure&&!this.shouldShareStructure(e)?(i=r.nextOwnId,i<A||(i=g),r.nextOwnId=i+1):(i>=A&&(i=g),r.nextId=i+1);let s=e.highByte=i>=96&&f?i-96>>5:-1;t[Dl]=i,t.__keys__=e,r[i-64]=e,i<g?(e.isShared=!0,r.sharedLength=i-63,n=!0,s>=0?(Bl[kl++]=96+(31&i),Bl[kl++]=s):Bl[kl++]=i):(s>=0?(Bl[kl++]=213,Bl[kl++]=114,Bl[kl++]=96+(31&i),Bl[kl++]=s):(Bl[kl++]=212,Bl[kl++]=114,Bl[kl++]=i),o&&(p+=y*o),d.length>=h&&(d.shift()[Dl]=0),d.push(t),I(e))},b=(t,n,r,o)=>{let i=Bl,s=kl,a=Sl,c=e;Bl=_l,kl=0,e=0,Bl||(_l=Bl=new bl(8192)),Sl=Bl.length-10,w(t,n,o),_l=Bl;let u=kl;if(Bl=i,kl=s,Sl=a,e=c,u>1){let t=kl+u-1;t>Sl&&E(t);let n=r+e;Bl.copyWithin(n+u,n+1,kl),Bl.set(_l.slice(0,u),n),kl=t}else Bl[r+e]=_l[0]}}useBuffer(t){Bl=t,xl=new DataView(Bl.buffer,Bl.byteOffset,Bl.byteLength),kl=0}clearSharedData(){this.structures&&(this.structures=[])}}function Tl(t,e,n,r){let o=t.byteLength;if(o+1<256){var{target:i,position:s}=n(4+o);i[s++]=199,i[s++]=o+1}else if(o+1<65536){var{target:i,position:s}=n(5+o);i[s++]=200,i[s++]=o+1>>8,i[s++]=o+1&255}else{var{target:i,position:s,targetView:a}=n(7+o);i[s++]=201,a.setUint32(s,o+1),s+=4}i[s++]=116,i[s++]=e,i.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),s)}function $l(t,e){let n=t.byteLength;var r,o;if(n<256){var{target:r,position:o}=e(n+2);r[o++]=196,r[o++]=n}else if(n<65536){var{target:r,position:o}=e(n+3);r[o++]=197,r[o++]=n>>8,r[o++]=255&n}else{var{target:r,position:o,targetView:i}=e(n+5);r[o++]=198,i.setUint32(o,n),o+=4}r.set(t,o)}function Ul(t,e,n,r){let o=t.length;switch(o){case 1:e[n++]=212;break;case 2:e[n++]=213;break;case 4:e[n++]=214;break;case 8:e[n++]=215;break;case 16:e[n++]=216;break;default:o<256?(e[n++]=199,e[n++]=o):o<65536?(e[n++]=200,e[n++]=o>>8,e[n++]=255&o):(e[n++]=201,e[n++]=o>>24,e[n++]=o>>16&255,e[n++]=o>>8&255,e[n++]=255&o)}return e[n++]=r,e.set(t,n),n+=o}function Ol(t,e){if(Ql.length>0){xl.setUint32(Ql.position+t,kl-Ql.position-t);let n=Ql;Ql=null,e(n[0]),e(n[1])}}Il=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,Mu],yl=[{pack(t,e,n){let r=t.getTime()/1e3;if((this.useTimestamp32||0===t.getMilliseconds())&&r>=0&&r<4294967296){let{target:t,targetView:n,position:o}=e(6);t[o++]=214,t[o++]=255,n.setUint32(o,r)}else if(r>0&&r<4294967296){let{target:n,targetView:o,position:i}=e(10);n[i++]=215,n[i++]=255,o.setUint32(i,4e6*t.getMilliseconds()+(r/1e3/4294967296>>0)),o.setUint32(i+4,r)}else if(isNaN(r)){if(this.onInvalidDate)return e(0),n(this.onInvalidDate());let{target:t,targetView:r,position:o}=e(3);t[o++]=212,t[o++]=255,t[o++]=255}else{let{target:n,targetView:o,position:i}=e(15);n[i++]=199,n[i++]=12,n[i++]=255,o.setUint32(i,1e6*t.getMilliseconds()),o.setBigInt64(i+4,BigInt(Math.floor(r)))}}},{pack(t,e,n){let r=Array.from(t),{target:o,position:i}=e(this.moreTypes?3:0);this.moreTypes&&(o[i++]=212,o[i++]=115,o[i++]=0),n(r)}},{pack(t,e,n){let{target:r,position:o}=e(this.moreTypes?3:0);this.moreTypes&&(r[o++]=212,r[o++]=101,r[o++]=0),n([t.name,t.message])}},{pack(t,e,n){let{target:r,position:o}=e(this.moreTypes?3:0);this.moreTypes&&(r[o++]=212,r[o++]=120,r[o++]=0),n([t.source,t.flags])}},{pack(t,e){this.moreTypes?Tl(t,16,e):$l(wl?r.Buffer.from(t):new Uint8Array(t),e)}},{pack(t,e){let n=t.constructor;n!==Cl&&this.moreTypes?Tl(t,il.indexOf(n.name),e):$l(t,e)}},{pack(t,e){let{target:n,position:r}=e(1);n[r]=193}}];let Fl=new Ll({useRecords:!1});const Nl=Fl.pack,Pl=Fl.pack,Yl=Ll,{NEVER:Kl,ALWAYS:Rl,DECIMAL_ROUND:jl,DECIMAL_FIT:Hl}=dl,Vl=512,Gl=1024;const ql=function(t,e={}){if(!t||"object"!=typeof t)throw new Error("first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a promise");const n=new $u(e);let o;const i=t=>{let e;o&&(t=r.Buffer.concat([o,t]),o=void 0);try{e=n.unpackMultiple(t)}catch(n){if(!n.incomplete)throw n;o=t.slice(n.lastPosition),e=n.values}return e};return"function"==typeof t[Symbol.iterator]?function*(){for(const e of t)yield*i(e)}():"function"==typeof t[Symbol.asyncIterator]?async function*(){for await(const e of t)yield*i(e)}():void 0},zl=function(t,e={}){if(t&&"object"==typeof t){if("function"==typeof t[Symbol.iterator])return function*(t,e){const n=new Ll(e);for(const e of t)yield n.pack(e)}(t,e);if("function"==typeof t.then||"function"==typeof t[Symbol.asyncIterator])return async function*(t,e){const n=new Ll(e);for await(const e of t)yield n.pack(e)}(t,e);throw new Error("first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a Promise")}throw new Error("first argument must be an Iterable, Async Iterable, or a Promise for an Async Iterable")};var Jl=e(Object.freeze({__proto__:null,useRecords:!1,mapsAsObjects:!0,Packr:Ll,Encoder:Yl,addExtension:function(t){if(t.Class){if(!t.pack&&!t.write)throw new Error("Extension has no pack or write function");if(t.pack&&!t.type)throw new Error("Extension has no type (numeric code to identify the extension)");Il.unshift(t.Class),yl.unshift(t)}!function(t){t.unpack?ku[t.type]=t.unpack:ku[t.type]=t}(t)},pack:Nl,encode:Pl,NEVER:Kl,ALWAYS:Rl,DECIMAL_ROUND:jl,DECIMAL_FIT:Hl,REUSE_BUFFER_MODE:Vl,Unpackr:$u,Decoder:ll,C1:Du,unpack:fl,unpackMultiple:gl,decode:Al,FLOAT32_OPTIONS:dl,clearSource:cl,roundFloat32:function(t){ml[0]=t;let e=ul[(127&El[3])<<1|El[2]>>7];return(e*t+(t>0?.5:-.5)>>0)/e},isNativeAccelerationEnabled:!1,decodeIter:ql,encodeIter:zl}));const Wl=mu,Xl=lu,{Packr:Zl,pack:th,unpack:eh}=Jl,nh="msgpackr::structs";var rh=class{constructor(t,e){this.repo=Wl.isRepo(t)?t:new Wl(t),this.cache=new oh(this.repo._db),this._strategy=e||(()=>{}),this._stores=[],this._loaded=!1,this._mutex=Promise.resolve(0),this._tap=null,this._packr=null,this.mutexTimeout=5e3}async _waitLock(){const t=this._mutex;let e,n;const r=new Promise(((t,r)=>{e=t,n=r}));this._mutex=r;let o=null;try{throw new Error("MutexTimeout")}catch(t){o=t}const i=setTimeout((()=>{console.error("MutexTimeout",o.stack),n(o)}),this.mutexTimeout);return await t,()=>{clearTimeout(i),e()}}register(t,e,n,r,o){if(this._loaded)throw new Error("register() must be invoked before load()");return"string"!=typeof t?this.register(t.name,t.initialValue,t.filter,t.reducer,t.trap):"function"==typeof e?this.register(t,void 0,e,n):void this._stores.push({name:t,validator:n,reducer:r,trap:o,version:0,head:void 0,value:e,initialValue:e,observers:new Set})}async load(){const t=await this._waitLock();if(this._loaded)throw new Error("Store already loaded");let e=await this.repo.readReg(nh);e=e?eh(e):[],this._packr=new Zl({structures:e,saveStructures:()=>this.repo.writeReg(nh,th(e)).catch(console.error.bind(null,"Failed saving msgpackr:structs"))});for(const t of this._stores){const e=await this.repo.readReg(`HEADS/${t.name}`);if(e){t.head=e,t.version=this._decodeValue(await this.repo.readReg(`VER/${t.name}`)),t.value=this._decodeValue(await this.repo.readReg(`STATES/${t.name}`));for(const e of t.observers)e(t.value)}}this._loaded=!0,t()}async dispatch(t,e){const n=await this._waitLock();try{const r=await this._dispatch(t,e);return n(),r}catch(t){throw n(),t}}async _dispatch(t,e=!1){if(!this._loaded)throw Error("Store not ready, call load()");t=Xl.from(t);let n=null;try{const e=t.first.isGenesis?t.first.sig:t.first.parentSig;n=await this.repo.resolveFeed(e)}catch(e){if("Unknown feed"!==e.message)throw e;if(!t.first.isGenesis)return await this.cache.push(t),[];n=new Xl}for(const e of t.blocks()){const[n,r]=await this.cache.pop(e.parentSig,e.sig);n&&sh(!t.merge(n),"Backward merge failed"),r&&sh(!t.merge(r),"Forwrad merge failed")}if(!n.clone().merge(t)){if(e)throw new Error("UnmergablePatch");return[]}const r={};n.first?.isGenesis?(r.HEAD=n.first.key,r.CHAIN=n.first.sig):!n.length&&t.first.isGenesis&&(r.HEAD=t.first.key,r.CHAIN=t.first.sig);const o=n.length?n._compare(t):t.length;if(o<1)return[];const i=new Set,s=this.state;let a=null;const c=t.get(-o);if(!c.isGenesis&&!n.length){if(e)throw new Error("NoCommonParent");return[]}if(!c.isGenesis&&n.length){const t=n.blocks();let e=t.next();for(;!a&&!e.done;)e.value.sig.equals(c.parentSig)&&(a=e.value),e=t.next();if(!a)throw new Error("ParentNotFound")}let u=0;for(const n of t.blocks(-o)){const t=[];for(const o of this._stores){if("function"!=typeof o.validator)continue;let i=o.validator({block:n,parentBlock:a,state:o.value,root:s,...r});if(i){if(!0===i);else if(e)throw"string"==typeof i&&(i=new Error(`InvalidBlock: ${i}`)),i}else t.push(o)}if(!t.length)break;const o=await this._mutateState(n,a,r,!1,e);for(const t of o)i.add(t);a=n,u++}this._notifyObservers(i);const l=Array.from(i);return Object.defineProperty(l,"patch",{enumerable:!1,get:()=>t.slice(-o,-o+u)}),l}async _mutateState(t,e,n,r=!1,o=!1){const i=[],s=[];for(const r of this._stores){if("function"!=typeof r.validator)continue;if("function"!=typeof r.reducer)continue;const o=this.state;r.validator({block:t,parentBlock:e,state:r.value,root:o,...n})||s.push(r)}if(s.length){const e=await this.repo.merge(t,this._strategy);if(!r&&!e)return o&&console.warn("RejectedByBucket: MergeStrategy failed"),i}const a=[],c=(t,e)=>a.push([t,e]);for(const r of s){const o=this.state,s=r.reducer({block:t,parentBlock:e,state:r.value,root:o,signal:c,...n});void 0===s&&console.warn("Reducer returned `undefined` state."),await this._commitHead(r,t.sig,s),i.push(r.name)}for(const[r,o]of a)for(const s of this._stores){if("function"!=typeof s.trap)continue;const a=this.state,c=s.trap({code:r,payload:o,block:t,parentBlock:e,state:s.value,root:a,...n});void 0!==c&&(await this._commitHead(s,t.sig,c),i.push(s.name))}if("function"==typeof this._tap)for(const[t,e]of a)this._tap(t,e);return i}_notifyObservers(t){for(const e of t){const t=this._stores.find((t=>t.name===e));for(const e of t.observers)e(t.value)}}async _commitHead(t,e,n){await this.repo.writeReg(`STATES/${t.name}`,this._encodeValue(n)),await this.repo.writeReg(`HEADS/${t.name}`,e),await this.repo.writeReg(`VER/${t.name}`,this._encodeValue(t.version++)),t.value=n,t.head=e}get state(){return this._stores.reduce(((t,e)=>(t[e.name]=e.value,t)),{})}async reload(){const t=await this._waitLock();try{const e=[],n=await this.repo.listFeeds();for(const t of this._stores){t.value=t.initialValue,t.version=0,t.head=void 0;for(const e of t.observers)e(t.value)}for(const{key:t,value:r}of n){const n=await this.repo.loadFeed(t),o={HEAD:n.first.key,CHAIN:r};let i=null;for(const t of n.blocks()){const n=await this._mutateState(t,i,o,!0);for(const t of n)~e.indexOf(t)||e.push(t);i=t}}return t(),this._notifyObservers(e),e}catch(e){throw t(),e}}on(t,e){const n=this._stores.find((e=>e.name===t));if(!n)throw new Error(`No such store: "${t}"`);if("function"!=typeof e)throw new Error("observer must be a function");return n.observers.add(e),e(n.value),()=>n.observers.delete(e)}hotswap(t){const e=this.repo;this.repo=t instanceof Wl?t:new Wl(t);return[this.reload(),e._db.clear()]}_decodeValue(t){return t?this._packr.unpack(t):t}_encodeValue(t){return this._packr.pack(t)}};class oh{constructor(t){this.blocks=t.sublevel("b",{keyEncoding:"buffer",valueEncoding:"buffer"}),this.refs=t.sublevel("r",{keyEncoding:"buffer",valueEncoding:"buffer"})}async push(t){if(t.first.isGenesis)throw new Error("GenesisRefused");for(const e of t.blocks())await this.refs.put(e.parentSig,e.sig),await this._writeBlock(e)}async pop(t,e){const n=[],r=[],o=[];let i=t,s=[];for(;;){const t=await this._readBlock(i);if(!t)break;n.push(t.parentSig),r.push(t.parentSig),s.push(t),i=t.parentSig}for(s.length&&o.push(Xl.fromBlockArray(s)),i=e,s=[];;){const t=await this.refs.get(i).catch(ih);if(!t)break;const e=await this._readBlock(t);n.push(t),r.push(e.sig),s.push(e),i=e.sig}return s.length&&o.push(Xl.fromBlockArray(s)),await Promise.all([this.blocks.batch(r.map((t=>({type:"del",key:t})))),this.refs.batch(n.map((t=>({type:"del",key:t}))))]),o}async _writeBlock(t){const e=t.sig,n=r.Buffer.alloc(32+t.buffer.length);t.key.copy(n,0),t.buffer.copy(n,32),await this.blocks.put(e,n)}async _readBlock(t){const e=await this.blocks.get(t).catch(ih);if(e)return Xl.mapBlock(e,32,e.slice(0,32))}async _hasBlock(t){return!!await this.readBlock(t)}}function ih(t){if(!t.notFound)throw t}function sh(t,e){if(t)throw new Error(e||"AssertionError")}var ah,ch,uh={exports:{}},lh={exports:{}},hh=lh.exports={};function fh(){throw new Error("setTimeout has not been defined")}function gh(){throw new Error("clearTimeout has not been defined")}function Ah(t){if(ah===setTimeout)return setTimeout(t,0);if((ah===fh||!ah)&&setTimeout)return ah=setTimeout,setTimeout(t,0);try{return ah(t,0)}catch(e){try{return ah.call(null,t,0)}catch(e){return ah.call(this,t,0)}}}!function(){try{ah="function"==typeof setTimeout?setTimeout:fh}catch(t){ah=fh}try{ch="function"==typeof clearTimeout?clearTimeout:gh}catch(t){ch=gh}}();var dh,ph=[],yh=!1,Ih=-1;function mh(){yh&&dh&&(yh=!1,dh.length?ph=dh.concat(ph):Ih=-1,ph.length&&Eh())}function Eh(){if(!yh){var t=Ah(mh);yh=!0;for(var e=ph.length;e;){for(dh=ph,ph=[];++Ih<e;)dh&&dh[Ih].run();Ih=-1,e=ph.length}dh=null,yh=!1,function(t){if(ch===clearTimeout)return clearTimeout(t);if((ch===gh||!ch)&&clearTimeout)return ch=clearTimeout,clearTimeout(t);try{ch(t)}catch(e){try{return ch.call(null,t)}catch(e){return ch.call(this,t)}}}(t)}}function wh(t,e){this.fun=t,this.array=e}function bh(){}hh.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];ph.push(new wh(t,e)),1!==ph.length||yh||Ah(Eh)},wh.prototype.run=function(){this.fun.apply(null,this.array)},hh.title="browser",hh.browser=!0,hh.env={},hh.argv=[],hh.version="",hh.versions={},hh.on=bh,hh.addListener=bh,hh.once=bh,hh.off=bh,hh.removeListener=bh,hh.removeAllListeners=bh,hh.emit=bh,hh.prependListener=bh,hh.prependOnceListener=bh,hh.listeners=function(t){return[]},hh.binding=function(t){throw new Error("process.binding is not supported")},hh.cwd=function(){return"/"},hh.chdir=function(t){throw new Error("process.chdir is not supported")},hh.umask=function(){return 0};var Ch,vh,Bh={exports:{}};function _h(){if(vh)return Ch;vh=1;var t=1e3,e=60*t,n=60*e,r=24*n,o=7*r,i=365.25*r;function s(t,e,n,r){var o=e>=1.5*n;return Math.round(t/n)+" "+r+(o?"s":"")}return Ch=function(a,c){c=c||{};var u=typeof a;if("string"===u&&a.length>0)return function(s){if((s=String(s)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(s);if(!a)return;var c=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*i;case"weeks":case"week":case"w":return c*o;case"days":case"day":case"d":return c*r;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*e;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(a);if("number"===u&&isFinite(a))return c.long?function(o){var i=Math.abs(o);if(i>=r)return s(o,i,r,"day");if(i>=n)return s(o,i,n,"hour");if(i>=e)return s(o,i,e,"minute");if(i>=t)return s(o,i,t,"second");return o+" ms"}(a):function(o){var i=Math.abs(o);if(i>=r)return Math.round(o/r)+"d";if(i>=n)return Math.round(o/n)+"h";if(i>=e)return Math.round(o/e)+"m";if(i>=t)return Math.round(o/t)+"s";return o+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))},Ch}var xh=function(t){function e(t){let r,o,i,s=null;function a(...t){if(!a.enabled)return;const n=a,o=Number(new Date),i=o-(r||o);n.diff=i,n.prev=r,n.curr=o,r=o,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let s=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((r,o)=>{if("%%"===r)return"%";s++;const i=e.formatters[o];if("function"==typeof i){const e=t[s];r=i.call(n,e),t.splice(s,1),s--}return r})),e.formatArgs.call(n,t);(n.log||e.log).apply(n,t)}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=n,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(o!==e.namespaces&&(o=e.namespaces,i=e.enabled(t)),i),set:t=>{s=t}}),"function"==typeof e.init&&e.init(a),a}function n(t,n){const r=e(this.namespace+(void 0===n?":":n)+t);return r.log=this.log,r}function r(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},e.disable=function(){const t=[...e.names.map(r),...e.skips.map(r).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let n;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const r=("string"==typeof t?t:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(t=r[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.slice(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=_h(),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((n=>{e[n]=t[n]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e};!function(t,e){e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let r=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(r++,"%c"===t&&(o=r))})),e.splice(o,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}!t&&void 0!==lh.exports&&"env"in lh.exports&&(t=lh.exports.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=xh(e);const{formatters:n}=t.exports;n.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}(Bh,Bh.exports);var Sh=Bh.exports;!function(t){const e=Bh.exports("pico-net"),n=Symbol.for("pico:plug");function o(o={}){const a=o?.timeout||3e4;let c=o?.id,l=!1,[h,f]=[!1,!1];const g=B(!0),A=B(!1),[d,p,y]=u(),[I,m,E]=u(),w=[!1,!1],[b,C]=u(),v=new Set;return[g,A];function B(t){const r={get name(){return`${c||"|"} ${t?"--\x3e":"<--"} `},get id(){return c},set id(t){if(c)throw new Error("ID has already been set");c=t},get onmessage(){return w[t?0:1]=!0,t?d:I},get opened(){return l?Promise.reject(new Error("Disconnected")):(w[t?1:0]=!0,(t?I:d).then((t=>!!t)))},get closed(){return b},set onmessage(e){if("function"!=typeof e)throw new Error("expected onmessage to be a function");if(t?h:f)throw new Error("Handler has already been set");t?(p(e),h=!0):(m(e),f=!0)},async postMessage(e,n){if(l)throw new Error("Disconnected");if(!r.isActive)throw new Error("Void");w[t?1:0]=!0;const o=await(t?I:d);return _(t,(t=>o(t)),e,n)},get isActive(){return(t?f:h)&&!l},get isClosed(){return l},open:t=>i(t)?s(r,t):(r.onmessage=t,r.opened.then((()=>[r.postMessage,r]))),close(n=null){!function(t,n=null){if(l)return!0;e("PipeClosed by: %s cause: %s pending: %d",t?"A":"B",n?.message,v.size),l=!0;for(const t of Array.from(v))v.delete(t),t.abort(n||new Error("Disconnected"));C(n),w[0]&&y(n||new Error("Disconnected"));w[1]&&E(n||new Error("Disconnected"))}(t,n)},get other(){return t?A:g}};return r[n]=!0,r}async function _(e,n,o,i){if(l)throw new Error("Disconnected");if("function"==typeof i)throw new Error("Callback API has been deprecated");const s=1&i||i,c=t.exports.V&&`${(e?g:A).name} = ${o.toString(r.Buffer.isBuffer(o)&&"hex").slice(0,14)}`,[h,f,d]=function(t,e=!1){const[n,r,o]=u(e),i=setTimeout(o.bind(null,new Error("Timeout")),t);return[n,(t,e)=>{clearTimeout(i),r(t,e)},function(t){clearTimeout(i),o(t||new Error("Aborted"))}]}(a,c);f.abort=d,s&&v.add(f),v.delete(n);const p=s?_.bind(null,!e,f):null;try{n([o,p,e?A:g]),s||f([])}catch(t){d(t),console.warn("Trap A: ",t.message)}return h.catch((t=>{throw console.warn("Trap B: ",t.message),t}))}}function i(t){return!(!t||!t[n])}function s(t,e){if(!i(t)||!i(e))throw new Error("Expected two pipe-ends");function n(t,e){if(!Array.isArray(e))throw new Error("DesignFlaw");const[r,o]=e;let i=t(r,!!o);return o&&(i=i.then(n.bind(null,o))),i.catch((t=>{console.warn("Trap S: ",t.message)}))}return t.onmessage=t=>n(e.postMessage,t),e.onmessage=e=>n(t.postMessage,e),t.closed.then(e.close).catch(e.close),e.closed.then(t.close).catch(t.close),t.close}let a=0;const c=[];function u(e=!1){if(e)return function(e="_"){const n=a++;let r=null;try{throw new Error}catch(t){r=t.stack}console.debug("[UNP]",n,e,"Promise Created\n",t.exports.V>1&&r);const[o,i,s]=u();return c[n]=s,[o.then((t=>(l("resolved",t),t))).catch((t=>{throw l("rejected",void 0,t),t})),t=>{l("set",t),i(t)},t=>{l("abort",void 0,t),s(t)}];function l(r,o,i){c[n]=void 0;const s=c.map(((t,e)=>t&&e)).filter((t=>t));if("set"!==r)console.debug("[UNP]",n,e,r,`P(${s.join(",")})`,i?i.message:Array.isArray(o)?`Arr[${o.length}]: ${o[0]||""}`:o);else{let r=null;try{throw new Error}catch(t){r=t.stack}t.exports.V>1&&console.debug("[UNP]",n,e,"SET at: \n",r)}}}(e);let n,r;return[new Promise(((t,e)=>{n=t,r=e})),n,r]}const l=3e4;function h(t,e){const n=(t,n,o,i)=>t(e.encode(n),o&&r.bind(null,o,i)),r=(t,r,o,i)=>t(e.decode(r),o&&n.bind(null,o,i));return e=>{const o=t(r.bind(null,e));return n.bind(null,o)}}t.exports=class{constructor(t,e){this._nodes=new Set,this._tap=null,"function"==typeof t&&(this._tap=t),"function"==typeof e&&(this._afterRemove=e)}createWire(t,e={}){const[n,r]=o(e);n.onmessage=([t,e])=>{if(!this._tap)return this.broadcast(t,e,n).catch((t=>console.error("_broadcast failed:",t)));this._tap(n,t,e).catch((t=>console.error("_tap failed:",t)))};const i=setTimeout((()=>n.close(new Error("NodeTimedout"))),3e4);return n.opened.then((e=>{if(!e)return console.warn("wire.opened resolved false?",e);clearTimeout(i),this._nodes.add(n),"function"==typeof t&&t(n)})).catch((t=>this.disconnect(n,t))),n.closed.then((t=>this.disconnect(n,t))),r}disconnect(t,e){if(!t)return!1;if(this._nodes.delete(t))return"function"==typeof this._afterRemove?this._afterRemove(t,e):e&&console.warn("NodeDisconnected",e),!0;for(const t of this._nodes)if(t.id===t&&this._nodes.delete(t))return"function"==typeof this._afterRemove?this._afterRemove(t,e):e&&console.warn("NodeDisconnected",e),!0}get count(){return this._nodes.size}async*survey(t,e,n){let r=!1;const o=new Set;for(const r of this._filterNodes(n)){const n=r.postMessage(t,e);o.add(n),n.catch((t=>{o.delete(n),console.warn("Survey node ignored:",t)}))}for(;!r&&o.size;){const t=await Promise.race(Array.from(o).map((t=>t.then((e=>({val:e,p:t}))))));if(!t)continue;o.delete(t.p);const e=()=>{r=!0};yield[...t.val,e]}}async broadcast(t,e,n){const r=this.survey(t,e,n),o=[];let i=await r.next();for(;!i.done;)o.push(i.value),i=await r.next();return o}_filterNodes(t){return t?(Array.isArray(t)||(t=[t]),Array.from(this._nodes).filter((e=>e.isActive&&!t.find((t=>i(t)?t===e:t===e.id))))):this._nodes}},t.exports.V=0,t.exports.picoWire=o,t.exports.simpleWire=function(t,e,n){const[r,i]=o();return r.closed.then(n).catch(n),r.opened.then(e).catch(e),r.onmessage=t,i},t.exports.streamWire=function(t,e){const n=new Map;let o=1,i=r.Buffer.alloc(256);const s=t(h.bind(null,0));e.on("data",u),e.once("close",c),e.once("error",c);const a=t=>t?e.end():e.destroy(t);return a;function c(t){e.off("data",u),e.off("error",c),e.off("close",c),s.close(t)}function u(t){const e=t.readUInt16BE(0),r=t.readUInt16BE(2);if(n.has(e)){const{replyTo:o,timer:i}=n.get(e);n.delete(e),clearTimeout(i),o(t.slice(6),((t,e)=>h(r,t,e)))}else 0===e?s(t.slice(6),((t,e)=>h(r,t,e))):console.warn("WARN: streamWire Message dropped",t[6])}function h(t,s,c){let u=0;"function"==typeof c&&(u=o++,function(t,e){const r=setTimeout((()=>{n.has(t)&&(n.delete(t),a(new Error("ResponseTimeout")))}),l);n.set(t,{replyTo:e,timer:r})}(u,c));const h=s.length+6;if(h>i.length){if(h>=262144)throw new Error("Message exceeds MTU");i=r.Buffer.alloc(h)}i.writeUInt16BE(t),i.writeUInt16BE(u,2),i.writeUInt16BE(h,4),s.copy(i,6),e.write(i.slice(0,h))}},t.exports.hyperWire=function(t,e,n,o=125){if(!i(t))throw new Error("Wire end expected");const s=new Map;let a=1;const c=e.open(n,{onextension:function(e,n){if(e!==o)return console.warn("Message dropped! multiple extensions on this channel??",o,e);const r=n.readUInt16BE(0),i=n.readUInt16BE(2),a=n[4],c=!!(1&a);if(s.has(r)){const{replyTo:t,timer:e}=s.get(r);s.delete(r),clearTimeout(e),t(n.slice(5),a).then(c&&h.bind(null,i)).catch((t=>console.error("Hyperwire writeerror",t)))}else 0===r?t.postMessage(n.slice(5),a).then(c&&h.bind(null,i)).catch((t=>console.error("Hyperwire writeerror",t))):console.warn("Hyperwire message dropped! unknown port",r,i)},onclose:t.close}),u=()=>{c.close()};return t.onmessage=t=>h(0,t),t.closed.then((()=>!c.closed&&u())).catch((t=>e.delete(t))),u;function h(t,e){const[n,i]=e;if(!r.Buffer.isBuffer(n))throw new Error("Binary message expected");let h=0,f=0;"function"==typeof i&&(h=a++,function(t,e){const n=setTimeout((()=>{s.has(t)&&(s.delete(t),u())}),l);s.set(t,{replyTo:e,timer:n})}(h,i),f|=1);const g=r.Buffer.alloc(n.length+5);g.writeUInt16BE(t),g.writeUInt16BE(h,2),g[4]=f,n.copy(g,5),c.extension(o,g)}},t.exports.spliceWires=s,t.exports.jsonTransformer=function(t){return h(t,{encode:t=>r.Buffer.from(JSON.stringify(t)),decode:t=>JSON.parse(t)})},t.exports.encodingTransformer=h,t.exports.messageIterator=async function*(t){const e=[],n=[];let r=!1;e.push(new Promise((t=>n.push(t))));const o=t(((t,i)=>{e.push(new Promise((t=>n.push(t)))),n.shift()([t,i,function(){o.close(),r=!0}])}));for(;!r;)yield await e.shift()},t.exports.unpromise=u}(uh);const kh=uh.exports,Qh=lu,{pack:Mh,unpack:Dh}=Jl,{write:Lh}=n.exports;var Th=class{constructor(t){this.nodeId=(t=>r.Buffer.from(Array.from(new Array(t)).map((t=>Math.floor(256*Math.random())))))(8),this._controller=this._controller.bind(this),this.hub=new kh(((...t)=>this._controller(...t)),((...t)=>this._ondisconnect(...t))),this.handlers=t;const[e,n]=Lh([]);this._setConnections=n,this.$connections=e}spawnWire(){return this.hub.createWire((t=>{t.postMessage($h(3,this.nodeId),!0).then((([e,n])=>{if(0===Oh(e).type)return this._setConnections(Array.from(this.hub._nodes)),this.handlers.onconnect(t)})).catch((t=>console.error("Handshake failed",t)))}))}_ondisconnect(...t){this._setConnections(Array.from(this.hub._nodes)),this.handlers.ondisconnect(...t)}async _controller(t,e,n){try{const{type:o,data:i}=Oh(e);switch(o){case 2:for await(const r of this._downloadFeeds(e,n)){const e=await this.handlers.onblocks(r);e&&this.shareBlocks(e,t).catch((t=>console.error("Gossip failed",t)))}break;case 1:{const t=await this.handlers.onquery(i);this._uploadFeeds(n,t).catch((t=>console.error("Failed uploading blocks",t)))}break;case 3:for(const e of this.hub._nodes)if(r.Buffer.isBuffer(e.id)&&e.id.equals(i))return n($h(-1)),t.close(new Error("DuplicatePeer"));t.id=i,await n($h(0));break;default:throw new Error(`Unknown message type: ${o}`)}}catch(t){console.error("RPC:internal error",t)}}async shareBlocks(t,e){Qh.isFeed(t)&&(t=[t]);const n=(t=[...t]).shift(),r=this.hub.survey($h(2,n),!!t.length,e);for await(const[e,n]of r)t.length&&(0===Uh(e)&&n?this._uploadFeeds(n,t).catch((t=>console.error("Failed sending subsequent feeds",t))):console.warn("Remote rejected subsequent blocks",Uh(e)))}async query(t,e={}){const[n,r]=await t.postMessage($h(1,e),!0);0!==Oh(n).type&&this._controller(t,n,r)}_uploadFeeds(t,e){if(!e||!e.length)return t($h(0));const n=[...e];return t($h(2,n.shift()),!!n.length).then((([t,e])=>{if(n.length)return t?0!==Uh(t)?console.warn("Peer rejected subsequent blocks",Uh(t)):this._uploadFeeds(e,n):console.warn("Empty scope")}))}async*_downloadFeeds(t,e){let n=!1;for(;!n;){n=!0;const{type:r,data:o}=Oh(t);if(2===r)yield o;else if(e){console.warn("Expected BLOCKS but got",r),await e($h(-1),!1);continue}if(!e)continue;const i=await e($h(0),!0);t=i[0],e=i[1],n=!1}}};function $h(t,e){let n=null;switch(t){case 2:if(!e)throw new Error("Feed expected");e=Qh.from(e),n=r.Buffer.alloc(e.tail+1),e.buf.copy(n,1,0,e.tail);break;case-1:case 0:n=r.Buffer.alloc(1);break;case 1:{const t=Mh(e);n=r.Buffer.alloc(t.length+1),t.copy(n,1)}break;case 3:n=r.Buffer.alloc(9),e.copy(n,1);break;default:throw new Error("UnknownMessageType: "+t)}return n[0]=t,n}function Uh(t){if(!r.Buffer.isBuffer(t))throw new Error("BufferExpected");return t[0]}function Oh(t){if(!r.Buffer.isBuffer(t))throw new Error("BufferExpected");const e=Uh(t);let n=null;switch(e){case 2:n=new Qh,n.buf=t.slice(1),n.tail=t.length-1;break;case 0:n="OK";break;case-1:n="ERROR";break;case 1:n=Dh(t.slice(1));break;case 3:n=t.slice(1,9);break;default:throw new Error("UnknownMessageType: "+e)}return{type:e,data:n}}const Fh=mu,Nh=rh,Ph=lu,{pack:Yh,unpack:Kh}=Jl,Rh=Th,jh="reg/sk";class Hh{constructor(t,e={}){this.db=t,this.repo=new Fh(t),this.store=new Nh(this.repo,this.mergeStrategy.bind(this)),this.ready=!1,this._secret=e.secret??null,this.rpc=new Rh({onconnect:t=>this.onconnect(t),ondisconnect:t=>this.ondisconnect(t),onquery:(t,e)=>this.onquery(t,e),onblocks:t=>this.onblocks(t)})}get pk(){return this._secret?.slice(32)}async boot(){return this.__loading||(this.__loading=(async()=>{if(!this._secret)try{this._secret=await this.repo.readReg(jh)}catch(t){if(!t.notFound)throw t}if(!this._secret){const{sk:t}=Ph.signPair();this._secret=t,await this.repo.writeReg(jh,t)}await this.store.load(),this.ready=!0})()),this.__loading}mergeStrategy(t,e){return!1}async feed(t){return this._checkReady(),this.repo.loadHead(this.pk)}_checkReady(){if(!this.ready)throw new Error("Kernel not ready, did you await kernel.boot()?")}async seq(){const t=await this.feed(1);return t?Hh.decodeBlock(t.last.body).seq:-1}async dispatch(t,e=!1){return this._checkReady(),await this.store.dispatch(t,e)}async createBlock(t,e,n){if("string"==typeof t)return this.createBlock(null,t,e);this._checkReady(),t=t||await this.feed()||new Ph;const r=await this.seq()+1,o=Hh.encodeBlock(e,r,n);t.append(o,this._secret);if(!(await this.dispatch(t,!0)).length)throw new Error("createBlock() failed: rejected by store");return this.rpc.shareBlocks(t.slice(-1)),t}spawnWire(){return this.rpc.spawnWire()}ondisconnect(t){}async onconnect(t){await this.rpc.query(t)}async onquery(t){const e=[],n=await this.repo.listHeads();for(const{key:t}of n){const n=await this.repo.loadHead(t);n&&e.push(n)}return e}async onblocks(t){return(await this.dispatch(t,!1)).patch}async _networkResolveFeed(t,e){}$connections(){return this.rpc.$connections}async close(){for(const t of this.rpc.hub._nodes)this.rpc.hub.disconnect(t);await this.db.close()}static encodeBlock(t,e,n){return Yh({...n,type:t,seq:e,date:(new Date).getTime()})}static decodeBlock(t){return Kh(t)}static typeOfBlock(t){return Hh.decodeBlock(t).type}}const Vh=lu,Gh=rh,qh=uh.exports,zh=Hh,Jh=Th,Wh=mu,{decodeBlock:Xh,encodeBlock:Zh}=zh;var tf={Feed:Vh,SimpleKernel:zh,decodeBlock:Xh,encodeBlock:Zh,n:n.exports,Store:Gh,Hub:qh,SimpleRPC:Jh,Repo:Wh},ef={exports:{}};const{crypto_box_seal:nf,crypto_box_seal_open:rf,crypto_box_keypair:of,crypto_box_SEALBYTES:sf,crypto_box_PUBLICKEYBYTES:af,crypto_box_SECRETKEYBYTES:cf}=rr.exports,uf=cr,lf=Bh.exports,{SimpleKernel:hf}=tf,ff=r.Buffer.from("💔"),gf=r.Buffer.from("😶"),{encodeBlock:Af,decodeBlock:df,typeOfBlock:pf}=hf;lf.formatters.h=t=>r.Buffer.isBuffer(t)&&t?.length?t.slice(0,Math.min(8,t.length)).toString("hex"):t,lf.formatters.H=t=>r.Buffer.isBuffer(t)&&t?.length?t.toString("hex"):t;var yf={KEY_SK:"reg/sk",KEY_BOX_LIKES_PK:"reg/likes_pk",KEY_BOX_LIKES_SK:"reg/likes_sk",TYPE_PROFILE:"profile",TYPE_VIBE:"vibe",TYPE_VIBE_RESP:"vibe-response",TYPE_MESSAGE:"message",TYPE_BYE:"bye",TYPE_BYE_RESP:"byebye",EV_CHAT_END:60,VIBE_REJECTED:ff,PASS_TURN:gf,PEACE:0,LOVE:2,UNDERSTANDING:1,G_M:0,G_F:1,G_NB:2,G_R:3,GEO_BITS:17,encodeBlock:Af,decodeBlock:df,typeOfBlock:pf,fixJsonBuffers:function t(e){if("object"==typeof e&&"Buffer"===e.type)return r.Buffer.from(e.data);if(Array.isArray(e))return e.map(t);if("object"==typeof e)for(const n in e)e[n]=t(e[n]);return e},toBuffer:function(t){return t?r.Buffer.isBuffer(t)?t:"string"==typeof t&&/^[0-9A-f]+$/.test(t)?r.Buffer.from(t,"hex"):"string"==typeof t?r.Buffer.from(t):"object"==typeof t&&"Buffer"===t.type?r.Buffer.from(t.data):t:t},boxPair:function(){const t=r.Buffer.allocUnsafe(af),e=r.Buffer.allocUnsafe(cf);return of(t,e),{pk:t,sk:e}},seal:function(t,e){const n=r.Buffer.allocUnsafe(sf+t.length);return nf(n,t,e),n},unseal:function(t,e,n){const o=r.Buffer.allocUnsafe(t.length-sf),i=rf(o,t,n,e);return uf(i,"DecryptionFailedError"),o},bufferReplacer:function(t,e){return e&&"object"==typeof e&&"Buffer"===e.type?r.Buffer.from(e.data):e},btok:function(t){return uf(r.Buffer.isBuffer(t),"Expected Buffer"),t.toString("hex")},ktob:function(t){return uf("string"==typeof t,"Expected string"),r.Buffer.from(t,"hex")}};const{typeOfBlock:If,TYPE_PROFILE:mf,TYPE_VIBE:Ef,TYPE_VIBE_RESP:wf,TYPE_MESSAGE:bf,TYPE_BYE:Cf,TYPE_BYE_RESP:vf,VIBE_REJECTED:Bf,PASS_TURN:_f,PEACE:xf,LOVE:Sf,UNDERSTANDING:kf,decodeBlock:Qf}=yf;function Mf(t,e=!0){switch(If(t.body)){case mf:return"ᚹ";case Ef:return"ᚲ";case wf:return Bf.equals(Qf(t.body).box)?"ᛟ":"ᛃ";case bf:return _f.equals(Qf(t.body).content)?e?"ᚦ":"ᚧ":e?"ᛖ":"ᛗ";case Cf:case vf:return e?"ᛒ":"ᛔ"}}function Df(t){const e=[[/ᚲᛃ/,"ᛄ"],[/(ᚦᚧᚦ|ᚧᚦᚧ)/,"ᚷ"],[/([ᛄᚴᚵᛆᚠᚯ])ᛖᛗ/,"$1ᚴ"],[/([ᛰᛐᛑᛅ])ᛗᛖ/,"$1ᛐ"],[/ᚴᚴ/,"ᚵ"],[/ᛐᛐ/,"ᛑ"],[/ᛒᛔ/,"ᛸ"],[/ᛔᛒ/,"ᛷ"],[/ᛖᚧ/,"ᛆ"],[/(ᚦᚧ|ᚧᚦ)/,"ᚺ"],[/ᚴᛆ/,"ᚠ"],[/ᚴᚦᛗ/,"ᛅ"],[/ᚵᚦᛗ/,"ᚯ"],[/ᚴᚺ/,"ᛰ"],[/ᛆᚦ/,"ᚢ"],[/ᛆᛆᚦᛷ/,"ᚤᛷ"],[/ᚴᛖᛷ/,"ᛈ"],[/ᚠᚠᛷ/,"ᚸᛷ"]];let n=null;for(;n!==t;){n=t;for(const[n,r]of e)t=t.replace(n,r)}return t}var Lf={feedToGraph:function(t){let e="",n=t.first.isGenesis?t.first.key:null;for(const r of t.blocks()){If(r.body)!==Ef||n||(n=r.key);const t=n&&r.key.equals(n);e+=Mf(r,t)}return e},scoreGraph:function(t){if(t=Df(t),/ᚷ/.test(t))return[0,0];const e={"ᛄ":[0,0],"ᛖ":[1,0],"ᛗ":[0,1],"ᛸ":[5,3],"ᛷ":[2,4],"ᚴ":[2,1],"ᛐ":[0,2],"ᚵ":[4,3],"ᛑ":[2,4],"ᛆ":[-1,2],"ᚠ":[-1,3],"ᛅ":[2,4],"ᚯ":[2,5],"ᛰ":[1,3],"ᛈ":[-1,0]};let n=0,r=0;for(const o of t.split(""))e[o]?(n+=e[o][0],r+=e[o][1]):console.warn("Unscored glyph: ",o);return[n,r]},blockToGlyph:Mf,rewrite:Df},Tf=Object.freeze({profile_timeout:108e5,vibe_timeout:3e5,vibe_response_timeout:18e4,chat_timeout:18e5,now:Date.now});const{TYPE_PROFILE:$f,EV_CHAT_END:Uf,decodeBlock:Of}=yf,{scoreGraph:Ff}=Lf,Nf="active",Pf="pending",Yf="locked",Kf="expired",{profile_timeout:Rf}=Tf;function jf(t){return{name:null,picture:null,pk:t,tagline:null,date:null,sex:2,sig:null,expiresAt:0,state:Nf,score:0}}function Hf(t){if(!t.picture)return"Profile Picture missing";if(r.Buffer.isBuffer(t.picture)){if(t.picture.length>21e3)return"Picture should be less than 21kB"}else if("string"!=typeof t.picture||t.picture.length>10)return"Picture should be an emoji";return Vf(t.tagline)?"URL in tagline not permitted":Vf(t.name)?"Links in name is not permitted":t.name.match(/^\s/)?"Name must contain only letters or numbers":"number"!=typeof t.age?"Age must be a number":t.age<18?"Kids not allowed into bars":!~[0,1,2].indexOf(t.sex)&&"Sex should be 0: female, 1: male, 2: other"}function Vf(t){return"string"==typeof t&&!!t.match("://")}ef.exports=()=>({name:"peers",initialValue:{},filter:({block:t,state:e})=>{const n=Of(t.body);return n.type!==$f||Hf(n)},reducer:({block:t,state:e,schedule:n})=>{const r=t.key.toString("hex");return e[r]=e[r]||jf(r),Object.assign(e[r],Of(t.body,1)),e[r].pk=t.key,e[r].sig=t.sig,e[r].expiresAt=e[r].date+Rf,n("peer",t.key,e[r].expiresAt),e},trap({code:t,payload:e,root:n,state:r}){if(t===Uf){const t=e.toString("hex"),o=n.chats.chats[t],i=Ff(o.graph);r[o.a.toString("hex")].score+=i[0],r[o.b.toString("hex")].score+=i[1]}}}),ef.exports.ProfileCtrl=function(t){let e=null;return{name:"peer",initialValue:jf(),filter({block:n}){if(e=e||t(),!e)return"Cannot process block without knowing own identity";if(!n.key.equals(e))return!0;const r=Of(n.body);return r.type!==$f||Hf(r)},reducer({block:t,state:e}){const n=Of(t.body);return Object.assign(e,n),e.pk=t.key,e.sig=t.sig,e.expiresAt=e.date+Rf,e},trap({code:t,payload:n,root:r,state:o}){if(t===Uf){const t=n.toString("hex"),i=r.chats.chats[t],s=e.equals(i.a);if(!s&&!e.equals(i.b))return;const a=Ff(i.graph);o.score+=a[s?0:1]}}}},ef.exports.stateOfPeer=function(t,e,n){if(t.state===Kf)return Kf;if(t.state!==Nf)throw new Error(`InvalidState: ${t.state}`);const r=t.pk.toString("hex"),o=e.seen[r]?.toString("hex");if(!o)return Nf;const i=e.matches[o];if(!i)throw new Error("MentalError");if("rejected"===i.state)return Nf;if("match"!==i.state)return Pf;const s=n.chats[o];return s&&"end"===s.state?Nf:Yf},ef.exports.ACTIVE=Nf,ef.exports.PENDING=Pf,ef.exports.LOCKED=Yf,ef.exports.EXPIRED=Kf;const{TYPE_VIBE:Gf,TYPE_VIBE_RESP:qf,TYPE_PROFILE:zf,TYPE_BYE_RESP:Jf,EV_CHAT_END:Wf,VIBE_REJECTED:Xf,decodeBlock:Zf,unseal:tg}=yf,eg=Bh.exports("picochat:slices:vibes"),{vibe_timeout:ng,vibe_response_timeout:rg}=Tf;const og=()=>({chatId:null,response:null,updatedAt:0,a:null,b:null,remoteBox:null});var ig=class{constructor(t=ng){this._sk=null,this._pk=null,this._reduceHasRun=!1,this.ttl=t,this.reducer=this.reducer.bind(this)}setKeys(t,{sk:e,pk:n}){if(this._sk)throw new Error("VibeBox secret has already been set");if(this._reduceHasRun)throw new Error("Reducer has already run without box secret");this._sk=e,this._pk=n,this._peerId=t}get name(){return"vibes"}get initialValue(){return{seen:{},matches:{},own:[]}}filter({block:t,parentBlock:e,state:n}){const r=Zf(t.body),{type:o}=r;if(o!==Gf&&o!==qf)return!0;const i=e&&Zf(e.body).type;if(o===Gf){if(i!==zf&&i!==Jf)return`InvalidParent: ${i}`;const e=t.key.toString("hex");if(r.date>(new Date).getTime())return"Vibe from the future";const o=n.seen[e];if(o){if(n.matches[o.toString("hex")].expiresAt>=Date.now())return"Only 1 active vibe allowed"}}return o===qf&&i!==Gf?`InvalidParent: ${i}`:(eg("Accepting Vibe %h",t.sig),!1)}reducer({block:t,state:e,parentBlock:n,root:r,schedule:o}){const i=Zf(t.body,1),{type:s}=i,a=s===Gf?t.sig:t.parentSig,c=a.toString("hex"),u=Xf.equals(i.box);if(s===Gf){if(eg("%s reducing vibe: %o %h",r.peer.name,!!e.matches[c],t.sig),e.matches[c])throw new Error("InternalError: Vibe already registered");e.seen[t.key.toString("hex")]=a;const n=e.matches[c]=og();n.chatId=a,n.a=t.key,n.updatedAt=i.date,n.createdAt=i.date,n.expiresAt=i.date+ng,n.state="wait"}else{const n=e.matches[c];if(!n)throw new Error("InternalError: MatchNotFound");n.response=t.sig,n.b=t.key,n.updatedAt=i.date,n.expiresAt=n.createdAt+rg,n.state=u?"rejected":"match"}const l=r.peer.pk,h=e.matches[c];s===Gf&&l.equals(t.key)&&e.own.push(a);let f=null;if(!u&&!l.equals(t.key)&&this._sk)try{f=tg(i.box,this._sk,this._pk)}catch(t){if("DecryptionFailedError"!==t.message)throw t}return f&&(e.own.find((t=>t.equals(a)))||e.own.push(a),h.remoteBox=f),this._reduceHasRun=!0,o("chat",h.chatId,h.expiresAt),e}trap({code:t,payload:e,root:n,state:r}){if(t===Wf){{const t=e.toString("hex"),o=n.chats.chats[t];delete r.seen[o.a.toString("hex")],eg("%s Peer Unseen %h => %h",n.peer.name,o.a.toString("hex"),e)}return r}}};const sg=Bh.exports("picochat:slice:chat"),{TYPE_VIBE_RESP:ag,TYPE_MESSAGE:cg,TYPE_BYE:ug,TYPE_BYE_RESP:lg,EV_CHAT_END:hg,PASS_TURN:fg,decodeBlock:gg}=yf,{blockToGlyph:Ag}=Lf;var dg=function(t={}){const{ttl:e,blockReward:n,health:r,regenerate:o}={ttl:18e4,blockReward:6e4,health:3,regenerate:.3,...t},i=()=>(new Date).getTime();return{name:"chats",initialValue:{chats:{},heads:{},own:[],stats:{}},filter({block:t,parentBlock:e,state:n,root:r}){const o=gg(t.body),{type:s}=o;if(!~[cg,ug,lg].indexOf(s))return!0;const a=e&&gg(e.body).type;if(sg("[%s] FilterOP: %s %h <-- %s %h",r.peer.name,a,e.sig,s,t.sig),s===cg&&a!==cg&&a!==ag||s===ug&&a!==cg||s===lg&&a!==ug)return`Invalid parent type: ${a}`;const c=t.key;if(c.equals(e.key))return"MonologueNotAllowed";if(a===ag){const t=e.parentSig,n=r.vibes.matches[t.toString("hex")];if(!n)return!0;if("match"!==n.state)return"MessagingNotAllowed";if(![n.a,n.b].find((t=>c.equals(t))))return"NotYourConversation";if(n.expiresAt<i())return"ConversationTimeout"}else{const e=n.heads[t.parentSig.toString("hex")];if(!e)return"ConversationNotFound";const r=n.chats[e.toString("hex")],o=r.mLength%2?r.b:r.a;if(!c.equals(o))return"NotYourConversation";if(r.expiresAt<i())return"ConversationTimeout";if(s!==lg&&"active"!==r.state)return"ConversationEnded";if(s===lg&&"finalizing"!==r.state)return"InvalidState"}return!1},reducer({block:t,parentBlock:i,root:s,state:a,schedule:c,signal:u}){const l=gg(t.body),{type:h}=l,f=gg(i.body).type,g=s.peer.pk,A=t.key;let d=null;d=f===ag?i.parentSig:a.heads[t.parentSig.toString("hex")];const p=d.toString("hex");if(f===ag){const t=s.vibes.matches[p],e=(t=>({id:t,head:null,messages:[],expiresAt:0,updatedAt:0,state:"active",a:null,b:null,hp:r,aEnd:-1,bEnd:-1,graph:"ᚲᛃ"}))(d);e.a=t.a,e.b=t.b,e.remoteBox=t.remoteBox,e.createdAt=t.createdAt,e.mLength=0,a.chats[p]=e}const y=a.chats[p];y.updatedAt=l.date,y.mLength++,y.expiresAt=y.createdAt+e+y.mLength*n,y.graph+=Ag(t,t.key.equals(y.a));const I=t.key.toString("hex");let m=a.stats[I];if(m||(m=a.stats[I]=(t=>({peerId:t,lastSeen:0,nMessages:0,nExhausted:0,nPassed:0,nEnded:0,nStarted:0,blocks:0,blockSize:0,hpRegenerated:0}))(t.key),m.nStarted++,sg("[%s] Initating new stats for %h",s.peer.name,t.key)),m.lastSeen=Math.max(m.lastSeen,l.date),m.nMessages++,m.blocks++,m.blockSize+=t.body.length,cg===h){const e=fg.equals(l.content);if(e&&m.nPassed++,e&&--y.hp<1?(y.state="exhausted",m.nExhausted++):e||(y.hp=Math.min(o+y.hp,r),m.hpRegenerated+=o),y.own=!![y.a,y.b].find((t=>g.equals(t))),y.own){const n=g.equals(A);y.messages.push({type:n?"sent":"received",date:l.date,content:n?null:l.content,pass:e,sig:t.sig})}y.own&&!a.own.find((t=>t.equals(d)))&&a.own.push(d)}else y.state=ug===h?"finalizing":"end",y.a.equals(A)?y.aEnd=l.gesture:y.bEnd=l.gesture,sg("ENDING: ",s.peer.name,h,y.state,y.aEnd,y.bEnd);if("end"===y.state){const t=a.stats[y.b.toString("hex")],e=a.stats[y.a.toString("hex")];t.nEnded++,e.nEnded++,u(hg,d)}return sg("[%s] Conversation(%h) state: %s mLength: %d, head: %h => %h",s.peer.name,d,y.state,y.mLength,t.parentSig,t.sig),delete a.heads[t.parentSig.toString("hex")],a.heads[t.sig.toString("hex")]=d,y.head=t.sig,c("chat",y.id,y.expiresAt),a}}};const pg=cr;var yg=class t{static ACTION_CONJURE_WATER=0;static ACTION_OFFER=1;static validate(e){if(!e)throw new Error("Must be an object");const{t:n,p:r}=e;let o;switch(n){case t.ACTION_CONJURE_WATER:pg(null==r,"PayloadNotSupported");break;case t.ACTION_OFFER:{const{i:t,q:e}=r;pg(function(t){return Number.isInteger(t)&&t>=0}(t),"p.i: ItemId missing"),pg(function(t){return Number.isInteger(t)}(e),"p.q: Quantity missing"),o={i:t,q:e}}break;default:pg(!1,`UnknownTransaction: ${n}`)}return{t:n,p:o}}};const{btok:Ig,decodeBlock:mg,EV_CHAT_END:Eg,TYPE_VIBE_RESP:wg,VIBE_REJECTED:bg}=yf,Cg=cr,{ACTIVE:vg,stateOfPeer:Bg}=ef.exports,_g=yg,xg=r.Buffer.from("vjbtsM2BFee1ExqsUJsJaoWLj8hXENll2/ePLeLz9c0=","base64");function Sg(t,e){return t[e]=t[e]||{},t[e]}function kg(t,e){return t[e]=t[e]||{id:e,qty:0,activatedAt:-1,expiresAt:-1},t[e]}var Qg={InventorySlice:function(){return{name:"inv",initialValue:{},filter({block:t,root:e,state:n,HEAD:r}){const o=mg(t.body);if("items"!==o.type)return!0;const i=Ig(r),s=e.peers[i],a=Bg(s,e.vibes,e.chats),c=o.items.find((t=>t.id<53760));return c&&!t.key.equals(xg)?"StampNotTrusted":a!==vg?"PeerBusy":Date.now()-o.date>=36e5&&"DeliveryTimeout"},reducer({block:t,state:e,schedule:n,HEAD:r}){const o=Ig(r),i=mg(t.body),s=Sg(e,o);for(const t of i.items){const e=kg(s,t.id);e.qty++,e.expiresAt=t.expiresAt}return e},trap({code:t,payload:e,root:n,state:r}){if(!Eg)return;const o=Ig(e),i=n.trs[o];if(i?.length){for(const t of i){kg(Sg(r,Ig(t.target)),t.item).qty+=t.qty}return r}}}},TransactionsSlice:function(){return{name:"trs",initialValue:{},filter({block:t,parentBlock:e,root:n,state:r}){const{type:o,box:i}=mg(t.body);if(o!==wg)return!0;if(bg.equals(i))return!0;const{t:s}=mg(e.body);try{for(const t of s){const{t:r,p:o}=_g.validate(t);if(r===_g.ACTION_OFFER){const t=Ig(e.key),r=n.inv[t];Cg(r,"InventoryEmpty");const i=r[o.i];Cg(i,"ItemNotHeld"),Cg(i.qty-o.q>=0,"NegativeQuantity")}}}catch(t){return t.message}return!1},reducer({block:t,parentBlock:e,root:n,state:r}){const o=Ig(e.sig),{t:i}=mg(e.body),s=r[o]=[];for(const{t:n,p:r}of i)switch(n){case _g.ACTION_CONJURE_WATER:s.push({item:55040,qty:1,target:e.key});break;case _g.ACTION_OFFER:s.push({item:r.i,qty:r.q,target:t.key}),s.push({item:r.i,qty:-r.q,target:e.key})}return r},trap({code:t,payload:e,root:n,state:r}){if(!Eg)return;return delete r[Ig(e)],r}}}};const Mg=Bh.exports("picochat:mod:chat"),{TYPE_MESSAGE:Dg,TYPE_BYE:Lg,TYPE_BYE_RESP:Tg,PASS_TURN:$g,PEACE:Ug,LOVE:Og,UNDERSTANDING:Fg,seal:Ng,unseal:Pg,toBuffer:Yg}=yf,{feedToGraph:Kg}=Lf,{combine:Rg,mute:jg,init:Hg,gate:Vg}=n.exports;const{SIGNATURE_SIZE:Gg}=lu,{toBuffer:qg}=yf;const zg=Bh.exports("picochat:mod:gc"),{EXPIRED:Jg}=ef.exports;function Wg(t){const e=r.Buffer.alloc(9);return e.writeBigUInt64BE(BigInt(t),1),e[0]=116,e}function Xg(t){const e=t[0];return{type:t.slice(e+1).toString(),id:t.slice(1,e+1)}}var Zg={exports:{}};const tA=Bh.exports("picochat:mod:peers"),eA=lu,{toBuffer:nA,boxPair:rA,btok:oA,TYPE_PROFILE:iA,KEY_SK:sA,KEY_BOX_LIKES_PK:aA,KEY_BOX_LIKES_SK:cA}=yf,{mute:uA,combine:lA,init:hA,gate:fA,when:gA}=n.exports,{EXPIRED:AA,stateOfPeer:dA}=ef.exports,pA=Object.freeze({state:"error",errorMessage:"PeerNotFound"}),yA=Object.freeze({state:"loading"});function IA([t,e,n,r]){if(!t)return pA;if(null===t.date)return yA;if("error"===t.state)return t;if(!t.pk)throw new Error("kernel.$peers invoked before kernel.load() finished?");const o=t.pk.toString("hex"),i=n.stats[o]||{nEnded:0,nStarted:0,nMessages:0,nPassed:0,nExhausted:0},s=i?42e4*i.nEnded:0,a=t.expiresAt+s,c=oA(t.pk),u=Object.values(r[c]||{}),l=!(!r[c]||!r[c][53249]);return{...t,stats:i,expiresAt:a,hasBadge:l,state:a<Date.now()?AA:dA(t,e,n),inventory:u}}function mA(t){if(!t||!(r.Buffer.isBuffer(t)&&32===t.length||"string"!=typeof t&&64===t.length))throw new Error(`PublicKey expected got "${t}"`);return nA(t)}Zg.exports=function(){let t=null;const e=new Promise((e=>{t=e}));return{__setHasProfile:t,hasProfile:e,async register(e,n){n=n||eA.signPair().sk,this._secret=n;const r=rA();this._vibeBox=r,this._vibeController.setKeys(this.pk,this._vibeBox),await this.updateProfile(e),await this.repo.writeReg(sA,n),await this.repo.writeReg(aA,r.pk),await this.repo.writeReg(cA,r.sk),t(!0)},async profileOf(t){t=mA(t);const e=this.store.state.peers[t.toString("hex")];return e||(tA("Peer does not exist in registry %h",t),pA)},async updateProfile(t){return await this.createBlock(iA,{...t,box:this._vibeBox.pk})},$peer(t){return fA(hA(yA,this._peer(t)))},_peer(t){try{t=mA(t)}catch(t){return hA({...pA,errorMessage:t.message})}if(this.pk.equals(t))return this.$profile();const e=uA((t=>this.store.on("peers",t)),(e=>e[t.toString("hex")]||pA));return uA(lA(e,(t=>this.store.on("vibes",t)),(t=>this.store.on("chats",t)),(t=>this.store.on("inv",t))),IA)},$peers(){const t=uA(this.store.on.bind(this.store,"peers"),(t=>{const e=Object.values(t);return this.pk?e.filter((t=>!this.pk.equals(t.pk))):e})),e=this.store.on.bind(this.store,"chats");return fA(hA([],uA(lA(t,(t=>this.store.on("vibes",t)),e,(t=>this.store.on("inv",t))),(([t,e,n,r])=>t.map((t=>IA([t,e,n,r]))).filter((t=>t.state!==AA))))))},$profile(){const t=gA(this.boot());return fA(hA(yA,uA(lA(uA((t=>this.store.on("peer",t)),(async t=>(await e,t))),(t=>this.store.on("vibes",t)),(t=>this.store.on("chats",t)),(t=>this.store.on("inv",t)),t),IA)))}}},Zg.exports.PEER_PLACEHOLDER=yA,Zg.exports.ERR_PEER_NOT_FOUND=pA;const EA=lu,{TYPE_VIBE:wA,TYPE_VIBE_RESP:bA,VIBE_REJECTED:CA,toBuffer:vA,seal:BA,boxPair:_A}=yf,{mute:xA,combine:SA,gate:kA,init:QA,until:MA}=n.exports,{PEER_PLACEHOLDER:DA}=Zg.exports,LA=yg,TA=Bh.exports("picochat:mod:vibes");async function $A(t){try{if(!t.peerId&&t.initiator){const e=r.Buffer.allocUnsafe(EA.SIGNATURE_SIZE+1);t.id.copy(e,1),e[0]=84;const n=await this._readReg(e);t.peerId=n}"loading"===t.peer.state&&(t.peer=await this.profileOf(t.peerId))}catch(e){console.warn("Failed resolving vibe.peer",e),t.peer={state:"error",errorMessage:e.message}}return t}function UA(t,e,n,r){const o={...function(t){return{id:t,head:null,peer:DA,peerId:null,box:null,state:"waiting",updatedAt:0,createdAt:1/0,expiresAt:0,remoteRejected:!1,localRejected:!1,a:null,b:null,myTurn:!1,health:-1}}(t),updatedAt:e.updatedAt,createdAt:e.createdAt,expiresAt:r?.expiresAt||e.expiresAt,box:e.remoteBox,initiator:n,localRejected:n&&"rejected"===e.state,remoteRejected:!n&&"rejected"===e.state,a:e.a,b:e.b,head:e.response};return n?e.b&&(o.peerId=o.b):o.peerId=o.a,"rejected"===e.state?o.state="rejected":e.a&&e.b?o.state="match":n||e.b?n&&!e.b?o.state="waiting_remote":o.state="mental_error":o.state="waiting_local",o.myTurn="match"===o.state?r?!(r.mLength%2^(n?0:1)):n:"waiting_local"===o.state,"end"===r?.state&&(o.myTurn=!1),o.health=r?Math.floor(r.hp):3,~["waiting_remote","waiting_local"].indexOf(o.state)&&o.expiresAt<Date.now()&&(o.state="expired"),o}const{mute:OA,combine:FA}=n.exports,{ACTIVE:NA}=ef.exports;const{SimpleKernel:PA}=tf,YA=ef.exports,KA=ig,RA=dg,{InventorySlice:jA,TransactionsSlice:HA}=Qg,VA=function(){return{$chats(){return jg(this.$vibes(),(t=>t.filter((t=>"match"===t.state))))},$chat(t){t=Yg(t);let e=null;const n=async(e,n=!1)=>{if(!i.myTurn)throw new Error("NotYourTurn");if(!n&&"string"!=typeof e)throw new Error("Message should be a string");if(!n&&!e.length)throw new Error("EmptyMessage");const o=await this._getRemoteChatKey(t),s=await this.repo.loadFeed(i.head),a=n?$g:Ng(r.Buffer.from(e),o);await this.createBlock(s,Dg,{content:a}),n||await this._setMessageBody(s.last.sig,r.Buffer.from(e))},o={id:t,state:"loading",initiator:!1,myTurn:null,peerId:null,peer:null,mLength:0,messages:[],updatedAt:0,createdAt:0,expiresAt:0,health:-1,errorMessage:null,head:null,send:async t=>n(t),pass:async()=>{if(!i.myTurn)throw new Error("NotYourTurn");return n(0,!0)},bye:async e=>{if(!i.myTurn)throw new Error("NotYourTurn");if(!~[Ug,Og,Fg].indexOf(e))throw new Error("InvalidGesture");if(!~["active","finalizing"].indexOf(i.state))throw new Error("InvalidState");const n=await this.loadChat(t);if(!n)return console.error("branch dissapeared, expected head sig:",i.head?.toString("hex"));await this.createBlock(n,"active"===i.state?Lg:Tg,{gesture:e})}};let i=o;return Vg(Hg(o,jg(Rg(this._vibe(t),(t=>this.store.on("chats",t))),(async([n,r])=>{const s=r.chats[t.toString("hex")];if(!n||"error"===n.state)return o.state="error",o.errorMessage="ChatNotFound",o;if("loading"===n.state)return o;if(o.head=n.head,"match"===n.state?o.state="active":"rejected"===n.state&&(o.state="rejected"),o.createdAt=s?s.createdAt:n.createdAt,o.updatedAt=s?s.updatedAt:n.updatedAt,o.expiresAt=s?s.expiresAt:n.expiresAt,o.peerId=n.peerId,o.peer=n.peer,o.initiator=n.initiator,o.myTurn=n.myTurn,o.health=n.health,!s)return o;if(o.head=s.head,o.graph=s.graph,o.state=s.state,"active"===o.state&&o.expiresAt<Date.now()&&(o.state="expired"),o.mLength=s.mLength,o.messages.length===s.messages.length)return o;try{e||(e=await this._getLocalChatKey(t)),o.messages=[...o.messages];for(let t=o.messages.length;t<s.messages.length;t++){const n={...s.messages[t]};n.pass?n.content=$g.toString():"received"===n.type?n.content=Pg(n.content,e.sk,e.pk).toString():n.content=await this._getMessageBody(n.sig),o.messages[t]=n}}catch(t){console.error("Message decryption failed",t)}return i=o,o}))))},async loadChat(t){const e=(t=Yg(t)).toString("hex");let n=null;const r=this.store.state.vibes.matches[e];n=r?.response||r?.chatId,r||Mg("vibe does not exist for chatId:",e);const o=this.store.state.chats.chats[e];if(r||o||Mg("conversation not found %h",t),n=o?.head||n,!n)return;return(await this._tracePath(n)).feed},async _inspectChat(t,e=!1){const n=await this.loadChat(t);console.log(Kg(n)),e&&n.inspect()}}},GA=function(){const t={};return{async _writeReg(e,n){if(await this.repo.writeReg(e,n),!t[e.toString()])return;const{set:r,timerId:o}=t[e.toString()];delete t[e.toString()],clearTimeout(o),r(n)},async _readReg(e){const n=await this.repo.readReg(e);if(n)return n;if(t[e.toString()])return t[e.toString()].promise;let r=null,o=null;const i=new Promise(((n,i)=>{r=n,o=setTimeout((()=>{delete t[e.toString()],i(new Error("BufferedReadTimedOut"))}),5e3)}));if(!r)throw new Error("ConcurrencyError");return t[e.toString()]={promise:i,set:r,timerId:o},i},async _storeLocalChatKey(t,e){const n=e.sk.length+e.pk.length;if(64!==n)throw new Error(`Expected box keypair to be 32bytes each, did algorithm change?: ${n}`);if((t=qg(t)).length!==Gg)throw new Error("Expected chatId to be a block signature");const o=r.Buffer.allocUnsafe(e.sk.length+e.pk.length);e.sk.copy(o),e.pk.copy(o,e.sk.length);const i=r.Buffer.allocUnsafe(Gg+1);return t.copy(i,1),i[0]=67,await this._writeReg(i,o)},async _getLocalChatKey(t){if("string"==typeof t&&(t=r.Buffer.from(t,"hex")),(t=qg(t)).length!==Gg)throw new Error("Expected chatId to be a block signature");const e=r.Buffer.allocUnsafe(Gg+1);t.copy(e,1),e[0]=67;const n=await this._readReg(e);if(!n)throw new Error("BoxPairNotFound");return{pk:n.slice(32),sk:n.slice(0,32)}},async _getRemoteChatKey(t){const e=t.toString("hex"),n=this.store.state.vibes.matches[e];if(!n)throw new Error("ConversationNotFound");if(!n.remoteBox)throw new Error("BoxPublicKeyNotAvailable");return n.remoteBox},async _setMessageBody(t,e){if(t=qg(t),!r.Buffer.isBuffer(t)||t.length!==Gg)throw new Error("Expected chatId to be a block signature");const n=r.Buffer.allocUnsafe(Gg+1);return t.copy(n,1),n[0]=77,await this._writeReg(n,qg(e))},async _getMessageBody(t){if(t=qg(t),!r.Buffer.isBuffer(t)||t.length!==Gg)throw new Error("Expected chatId to be a block signature");const e=r.Buffer.allocUnsafe(Gg+1);t.copy(e,1),e[0]=77;const n=await this._readReg(e);if(!n)throw new Error("MessageNotFound");return n.toString()}}},qA=function(t){const e=t.repo;let n=null;function o(t,n,o){const i=Wg(o);e._db.put(i,function(t,e){t=r.Buffer.from(t);const n=e.length,o=r.Buffer.alloc(1+n+t.length);return e.copy(o,1),t.copy(o,n+1),o[0]=n,o}(t,n)).catch((t=>console.error("Failed queing GC: ",t)))}for(const e of t._stores)e._originalReducer=e.reducer,e.reducer=t=>e._originalReducer({...t,schedule:o});return{async _collectGarbage(e){zg("Locking store");const n=await t._waitLock();try{const t=await i.bind(this)(e);return n(),t}catch(t){throw n(),t}},startGC(t=3e3){this.ready&&!n&&(n=setInterval(this._collectGarbage.bind(this),t))},stopGC(){n&&(clearInterval(n),n=null)}};async function i(n=Date.now()){zg("Starting collecting garbage...");const r=await async function(t,e){const n={gt:Wg(0),lt:Wg(e)},r=t.iterator(n),o=[];for(;;)try{const[t,e]=await new Promise(((t,e)=>{r.next(((n,r,o)=>{n?e(n):t([r,o])}))}));if(!t)break;o.push({key:t,value:e})}catch(t){console.warn("Iterator died with an error",t);break}return await new Promise(((t,e)=>{r.close((n=>n?e(n):t()))})),o}(e._db,n);zg("Fetched pending from store:",r.length);let o=new Set;const i=[];for(const e of r){const{type:r,id:a}=Xg(e.value);if(!r)throw new Error("GC OP missing");await s({now:n,id:a,gcType:r,rootState:t.state,didMutate:t=>o.add(t),drop:t=>i.push([t,"chat"===r?a:null])})}const a=[];for(const[t,e]of i)try{const n=await this._tracePath(t);if(e){if(!e.equals(n.chatId))throw new Error("InternalError: Attempted to evict wrong segment");const t=await this.repo.rollback(n.keys[0],n.heads[0]);a.push(t)}else a.push(await this.repo.rollback(n.keys[0]))}catch(t){"FeedNotFound"===t.message?zg("RollbackFailed, Feed already gone",t):console.error("Rollback failed",t)}return o=Array.from(o),t._notifyObservers(o),zg("Stores mutated",o,"segments evicted",a.length),{mutated:o,evicted:a}}function s({now:t,rootState:e,drop:n,gcType:r,id:o,didMutate:i}){if("chat"===r){const r=e.vibes.matches[o.toString("hex")],s=e.chats.chats[o.toString("hex")],a=s?.head||r?.response||r?.chatId;let c=!1;if(!a)return;const u=s?.expiresAt||r?.expiresAt||0,l=u<t;if(zg("Chat[%h] expired: %s, timeLeft: %d",o,l,u-t),!l)return;if(s){const{chats:t,heads:n,own:r}=e.chats;delete t[o.toString("hex")],delete n[a.toString("hex")];const s=r.findIndex((t=>t.equals(o)));~s&&r.splice(s,1),i("chats"),c=!0}if(r){const{seen:t,matches:n,own:s}=e.vibes;r.a&&t[r.a.toString("hex")]?.equals(o)&&delete t[r.a.toString("hex")],r.b&&t[r.b.toString("hex")]?.equals(o)&&delete t[r.b.toString("hex")],delete n[o.toString("hex")];const a=s.findIndex((t=>t.equals(o)));~a&&s.splice(a,1),i("vibes"),c=!0}c&&n(a,o)}else{if("peer"!==r)throw new Error(`Garbage collection for "${r}" not supported!`);{const{peers:r}=e,s=e.peer.pk?.equals(o);s&&e.peer.expiresAt<t&&(e.peer.state=Jg,i("peer"));const a=r[o.toString("hex")];a&&a.expiresAt<t&&(a.state=Jg,i("peers"),s||(delete r[o.toString("hex")],n(a.sig)))}}}},zA=Zg.exports,JA=function(){return{async sendVibe(t,e=[]){if(t=vA(t),this.pk.equals(t))throw new Error("SelfVibeNotAllowed");const{matches:n,own:o}=this.store.state.vibes;for(const e of o){const r=n[e.toString("hex")];if("wait"===r.state&&t.equals(r.a))return this.respondVibe(r.chatId)}Array.isArray(e)||(e=[e]),e=e.map((t=>LA.validate(t)));if(!(await MA(this.$cooldowns(),(t=>"loading"!==t.state))).canVibe)throw new Error("VibeNotReady");const i=_A(),s=await this.profileOf(t);if("error"===s.state)throw new Error(s.errorMessage);const a=BA(i.pk,s.box),c=(await this.createBlock(wA,{box:a,t:e})).last.sig;await this._storeLocalChatKey(c,i);const u=r.Buffer.allocUnsafe(EA.SIGNATURE_SIZE+1);return c.copy(u,1),u[0]=84,await this._writeReg(u,s.pk),c},async respondVibe(t,e=!0){t=vA(t);const n=_A(),{own:r,matches:o}=this.store.state.vibes;if(!r.find((e=>e.equals(t))))throw new Error("NotYourVibe");const i=o[t.toString("hex")];if(!i)throw new Error("VibeNotFound");if("wait"!==i.state)throw new Error("VibeResponseNotApplicable");const s=await this.profileOf(i.a);if(!s)throw new Error("PeerNotFound");const a=BA(n.pk,s.box),c=await this.repo.readBlock(t);if(!c)throw new Error("Vibe no longer exists");if(!await this.createBlock(EA.from(c),bA,{box:e?a:CA,link:this.store.state.peer.sig}))throw new Error("Failed creating block");return e&&await this._storeLocalChatKey(i.chatId,n),t},$vibe(t){return kA(QA({state:"loading",type:"vibe"},this._vibe(t)))},_vibe(t){try{t=function(t){if(!t||!(r.Buffer.isBuffer(t)&&64===t.length||"string"!=typeof t&&128===t.length))throw new Error(`ChatID expected got "${t}"`);return vA(t)}(t)}catch(t){return QA({state:"error",errorMessage:t.message})}return xA(SA((t=>this.store.on("chats",t)),(t=>this.store.on("vibes",t))),(([e,{matches:n}])=>{const r=n[t.toString("hex")],o=e.chats[t.toString("hex")];if(!r)return{state:"error",errorMessage:"VibeNotFound"};const i=this.pk.equals(r.a),s=UA(t,r,i,o);return $A.bind(this)(s)}))},$vibes(){return kA(QA([],xA(this._vibes(),(async t=>{const e=[];for(let n=0;n<t.length;n++){const r={...t[n]};await $A.bind(this)(r),e.push(r)}return TA("emit $vibes async"),e}))))},_vibes(){return xA(SA((t=>this.store.on("chats",t)),(t=>this.store.on("vibes",t))),(([t,{sent:e,received:n,own:r,matches:o}],i)=>{const s=[];for(const e of r){const n=o[e.toString("hex")],r=t.chats[e.toString("hex")],i=UA(e,n,this.pk.equals(n.a),r);"expired"!==i.state&&(r&&"end"===r.state||s.push(i))}return TA("emit _vibes"),s}))}}},WA=function(){return{$cooldowns(){return OA(FA(this.$profile(),(t=>this.store.on("vibes",t)),(t=>this.store.on("chats",t))),(([t,e,n])=>{const r={canVibe:t.state===NA,vibe:-1};if("loading"===t.state)return{state:"loading",...r};const o=e.seen[t.pk.toString("hex")];if(!o)return r.vibe=0,r;const i=e.matches[o.toString("hex")];if(!i)throw new Error("MentalError");r.vibe=i.expiresAt;const s=n.chats[o.toString("hex")];return s&&(r.vibe=s.expiresAt),r}))}}},{KEY_SK:XA,KEY_BOX_LIKES_PK:ZA,KEY_BOX_LIKES_SK:td,TYPE_VIBE:ed,TYPE_VIBE_RESP:nd,TYPE_MESSAGE:rd,TYPE_PROFILE:od,TYPE_BYE:id,TYPE_BYE_RESP:sd,VIBE_REJECTED:ad,decodeBlock:cd,typeOfBlock:ud}=yf,ld=yg,hd=(0,Bh.exports)("picochat:kernel");var fd=class extends PA{static Transactions=ld;constructor(t,e={}){super(t,e),this._vibeBox=e.box??null,this.store.register(YA.ProfileCtrl((()=>this.pk))),this.store.register(YA()),this._vibeController=new KA,this.store.register(this._vibeController),this.store.register(RA()),this.store.register(jA()),this.store.register(HA()),Object.assign(this,zA()),Object.assign(this,JA()),Object.assign(this,VA()),Object.assign(this,GA()),Object.assign(this,qA(this.store)),Object.assign(this,WA())}async boot(){return this.__loading||(this.__loading=(async()=>{if(!this._secret)try{this._secret=await this.repo.readReg(XA)}catch(t){if(!t.notFound)throw t}return this._secret&&(this._vibeBox={sk:await this.repo.readReg(td),pk:await this.repo.readReg(ZA)},this._vibeController.setKeys(this.pk,this._vibeBox)),await this.store.load(),this.ready=!0,!(!this._secret||!this.store.state.peer)&&(this.__setHasProfile(!0),!0)})()),this.__loading}async _tracePath(t){const e=[],n=[];let r=null,o=0;const i=await this.repo.loadFeed(t,((t,i)=>{switch(ud(t.body)){case nd:e[1]=t.key,n[1]=cd(t.body).link;break;case od:case sd:e[0]=t.key,n[0]=t.sig,o&&i();break;case ed:r=t.sig}o++}));if(!i)throw new Error("FeedNotFound");return{keys:e,heads:n,feed:i,chatId:r}}async mergeStrategy(t,e){const n=cd(t.body),{type:r}=n,o=await e.readBlock(t.parentSig),i=ud(o.body);if(r===nd){const r=await e.readBlock(t.parentSig);return i===ed&&(ad.equals(n.box)?hd("Rejection detected: %h </3 %h",t.key,r.key):hd("Match detected: %h <3 %h",t.key,r.key),!0)}return r===rd&&i===rd||(r===id&&i===rd||(r===sd&&i===id||(console.warn("MergeStrategy rejected",i,"<--",r),!1)))}},gd={binstr:function(t,e){e=e||8*t.length;let n="";for(let r=0;r<t.length;r++)for(let o=0;o<8;o++)e===8*r+o&&(n+="|"),n+=t[r]&1<<o?"1":"0";return n},roundByte:Ad,shift:dd,unshift:pd,countTrailingZeroes:function(t){let e=t.length,n=0;for(;e--;)for(let r=7;r>=0;r--){if(t[e]&1<<r)return n;n++}return n},countOnes:function(t){let e=0;for(let n=0;n<t.length;n++){let r=t[n];for(;r;)1&r&&e++,r>>=1}return e},proximityOf:function(t,e){let n=0;for(;n<t.length&&Ed(t,n)===Ed(e,n);n++);return n},mapOverlap:function(t,e){e=e||(()=>{});const n=t.map((()=>0)),r=t.map((()=>0)),o=t.map((()=>0));let i=!1;const s=[];let a=!1;for(;!a;){for(let e=0;e<t.length;e++){if(!i&&r[e])continue;const a=t[e],c=n[e]++,u=a.length-1-(c>>3);if(u<0)return s;const l=a[u]>>7-c%8&1;r[e]?o[e]=l:l&&(r[e]=!0)}if(!i){i=r.reduce(((t,e)=>t&&e),!0);continue}const c=e(o,(()=>{a=!0}));dd(s,c)&&(s[s.length]=1)}return s},packGeo:function(t,e,n){e||(e=5*t.length);if(e<5)throw new Error("precision has to be at least 5");const o=Ad(e);n||(n=r.Buffer.alloc(o));const i=t.split("").reverse().reduce(((t,e,n)=>t+Id[e]*32**n),0).toString(2).slice(0,e).split("").reverse();for(const t of i)dd(n,"0"===t?0:1);return n},unpackGeo:md,gammaShift:function(t,e){const n=Math.ceil(Math.log2(e));for(let e=0;e<n;e++)pd(t,0);pd(t,1);for(let r=0;r<n;r++)pd(t,e>>r&1)},gammaUnshift:function(t){let e=0;const n=8*t.length;for(;e<n;e++){const r=pd(t);if(r)break;if(e===n-1&&!r)throw new Error("NBitNotFound: end of buffer reached")}let r=1<<e;for(;e--;)r|=pd(t)<<e;return r},dGapEncode:function(t,e){e||(e=8*t.length);const n=[Ed(t,0)];let r=0,o=n[0],i=0;for(;i<e;){const e=Ed(t,i);e!==o&&(o=e,n.push(r),r=0),r++,i++}return n.push(r),n},decodeSL:function(t,e=16){const n=e+1,r=[];for(let e=0;e<Ad(n);e++)r[e]=t[e];const o=pd(r),i=md(r,e);return{sex:o,geohash:i}},bitAt:Ed,setBit:function(t,e,n=1){t[e>>3]=n?(t[e>>3]||0)|1<<e%8:(t[e>>3]||0)&~(1<<e%8);return t}};function Ad(t){return(t>>3)+(t%8?1:0)}function dd(t,e=0){let n=e?1:0;for(let e=0;e<t.length;e++){const r=t[e]>>7&1;t[e]=t[e]<<1|n,n=r}return n}function pd(t,e=0){let n=t.length,r=(e?1:0)<<7;for(;n--;){const e=(1&t[n])<<7;t[n]=r|t[n]>>1,r=e}return r?1:0}const yd="0123456789bcdefghjkmnpqrstuvwxyz",Id=yd.split("").reduce(((t,e,n)=>(t[e]=n,t)),{});function md(t,e=16){const n=Ad(e);if(t.length<n)throw new Error("BufferUnderflow, dst buffer too small");const r=[];for(let e=0;e<n;e++)r[e]=t[e];let o="",i=0;for(let t=0;t<e;t++){i|=pd(r)<<4-t%5,!t||t%5||(o+=yd.charAt(i),i=0)}return o+=yd.charAt(i),o.replace(/0+$/,"")}function Ed(t,e){return t[e>>3]>>e%8&1}const{crypto_sign_SECRETKEYBYTES:wd,crypto_sign_PUBLICKEYBYTES:bd,crypto_sign_keypair:Cd}=rr.exports,{packGeo:vd,shift:Bd,binstr:_d,roundByte:xd,decodeSL:Sd}=gd,{GEO_BITS:kd}=yf,{pack:Qd,unpack:Md}=Jl,Dd="default_signpair",Ld="default_profile";class Td{constructor(t){this.db=t}async readIdentity(t=Dd){return this.db.get(t).catch((t=>{if(!t.notFound)throw t}))}async writeIdentity(t,e=Dd){if(!r.Buffer.isBuffer(t)||t.length!==wd)throw new Error("Expected SigningSecret");return this.db.put(e,t)}async writeProfile(t,e=Ld){return this.db.put(e,Qd(t))}async readProfile(t=Ld){const e=await this.db.get(t).catch((t=>{if(!t.notFound)throw t}));if(e)return Md(e)}static generateAnonymous(){const t=r.Buffer.allocUnsafe(wd),e=r.Buffer.allocUnsafe(bd);return Cd(e,t),{pk:e,sk:t}}static generate(t,e,n){if(console.info("generate(",t,e,n,")"),666===(t=t??666)&&!e)return Td.generateAnonymous();if(!e)return $d(r.Buffer.from([t]),3,n);const o=kd+1,i=r.Buffer.allocUnsafe(xd(o)),s=vd(e,kd,i);Bd(s,1&t);const a=o%8?(1<<o%8)-1:255;return console.info("Searching for",o,s.toString("hex"),_d(s).length,"mask",a.toString(2)),$d(s,a,n)}static decodePk(t){return Sd(t,kd)}}function $d(t,e=255,n=5e5){if(!r.Buffer.isBuffer(t)&&!Array.isArray(t))throw new Error("Array or Buffer Expected");const o=r.Buffer.allocUnsafe(bd),i=r.Buffer.allocUnsafe(wd),s=t.length;for(let r=0;r<n;r++){Cd(o,i);let n=!0;for(let r=0;n&&r<s;r++)n=r+1===s?(o[r]&e)==(t[r]&e):n=o[r]===t[r];if(n)return{pk:o,sk:i}}}var Ud=Td,Od="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Fd(){}function Nd(t){return t()}function Pd(){return Object.create(null)}function Yd(t){t.forEach(Nd)}function Kd(t){return"function"==typeof t}function Rd(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let jd,Hd;function Vd(t,e){return jd||(jd=document.createElement("a")),jd.href=e,t===jd.href}function Gd(t,...e){if(null==t)return Fd;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function qd(t,e,n){t.$$.on_destroy.push(Gd(e,n))}function zd(t,e,n,r){if(t){const o=Jd(t,e,n,r);return t[0](o)}}function Jd(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function Wd(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}function Xd(t,e,n,r,o,i){if(o){const s=Jd(e,n,r,i);t.p(s,o)}}function Zd(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function tp(t){return null==t?"":t}function ep(t,e,n){return t.set(n),e}function np(t,e){t.appendChild(e)}function rp(t,e,n){t.insertBefore(e,n||null)}function op(t){t.parentNode.removeChild(t)}function ip(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function sp(t){return document.createElement(t)}function ap(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function cp(t){return document.createTextNode(t)}function up(){return cp(" ")}function lp(){return cp("")}function hp(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function fp(t){return function(e){return e.preventDefault(),t.call(this,e)}}function gp(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ap(t,e,n){e in t?t[e]="boolean"==typeof t[e]&&""===n||n:gp(t,e,n)}function dp(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function pp(t,e){t.value=null==e?"":e}function yp(t,e,n,r){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function Ip(t,e,n){t.classList[n?"add":"remove"](e)}class mp{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,e,n=null){this.e||(this.is_svg?this.e=ap(e.nodeName):this.e=sp(e.nodeName),this.t=e,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)rp(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(op)}}function Ep(t){Hd=t}function wp(){if(!Hd)throw new Error("Function called outside component initialization");return Hd}function bp(t){wp().$$.on_mount.push(t)}function Cp(){const t=wp();return(e,n,{cancelable:r=!1}={})=>{const o=t.$$.callbacks[e];if(o){const i=function(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,r,e),o}(e,n,{cancelable:r});return o.slice().forEach((e=>{e.call(t,i)})),!i.defaultPrevented}return!0}}function vp(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const Bp=[],_p=[],xp=[],Sp=[],kp=Promise.resolve();let Qp=!1;function Mp(t){xp.push(t)}function Dp(t){Sp.push(t)}const Lp=new Set;let Tp=0;function $p(){const t=Hd;do{for(;Tp<Bp.length;){const t=Bp[Tp];Tp++,Ep(t),Up(t.$$)}for(Ep(null),Bp.length=0,Tp=0;_p.length;)_p.pop()();for(let t=0;t<xp.length;t+=1){const e=xp[t];Lp.has(e)||(Lp.add(e),e())}xp.length=0}while(Bp.length);for(;Sp.length;)Sp.pop()();Qp=!1,Lp.clear(),Ep(t)}function Up(t){if(null!==t.fragment){t.update(),Yd(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Mp)}}const Op=new Set;let Fp;function Np(){Fp={r:0,c:[],p:Fp}}function Pp(){Fp.r||Yd(Fp.c),Fp=Fp.p}function Yp(t,e){t&&t.i&&(Op.delete(t),t.i(e))}function Kp(t,e,n,r){if(t&&t.o){if(Op.has(t))return;Op.add(t),Fp.c.push((()=>{Op.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}else r&&r()}function Rp(t,e){const n=e.token={};function r(t,r,o,i){if(e.token!==n)return;e.resolved=i;let s=e.ctx;void 0!==o&&(s=s.slice(),s[o]=i);const a=t&&(e.current=t)(s);let c=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==r&&t&&(Np(),Kp(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),Pp())})):e.block.d(1),a.c(),Yp(a,1),a.m(e.mount(),e.anchor),c=!0),e.block=a,e.blocks&&(e.blocks[r]=a),c&&$p()}if((o=t)&&"object"==typeof o&&"function"==typeof o.then){const n=wp();if(t.then((t=>{Ep(n),r(e.then,1,e.value,t),Ep(null)}),(t=>{if(Ep(n),r(e.catch,2,e.error,t),Ep(null),!e.hasCatch)throw t})),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}var o}function jp(t,e,n){const r=e.slice(),{resolved:o}=t;t.current===t.then&&(r[t.value]=o),t.current===t.catch&&(r[t.error]=o),t.block.p(r,n)}const Hp="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:Od;function Vp(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function Gp(t){t&&t.c()}function qp(t,e,n,r){const{fragment:o,on_mount:i,on_destroy:s,after_update:a}=t.$$;o&&o.m(e,n),r||Mp((()=>{const e=i.map(Nd).filter(Kd);s?s.push(...e):Yd(e),t.$$.on_mount=[]})),a.forEach(Mp)}function zp(t,e){const n=t.$$;null!==n.fragment&&(Yd(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Jp(t,e){-1===t.$$.dirty[0]&&(Bp.push(t),Qp||(Qp=!0,kp.then($p)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Wp(t,e,n,r,o,i,s,a=[-1]){const c=Hd;Ep(t);const u=t.$$={fragment:null,ctx:null,props:i,update:Fd,not_equal:o,bound:Pd(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Pd(),dirty:a,skip_bound:!1,root:e.target||c.$$.root};s&&s(u.root);let l=!1;if(u.ctx=n?n(t,e.props||{},((e,n,...r)=>{const i=r.length?r[0]:n;return u.ctx&&o(u.ctx[e],u.ctx[e]=i)&&(!u.skip_bound&&u.bound[e]&&u.bound[e](i),l&&Jp(t,e)),n})):[],u.update(),l=!0,Yd(u.before_update),u.fragment=!!r&&r(u.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);u.fragment&&u.fragment.l(t),t.forEach(op)}else u.fragment&&u.fragment.c();e.intro&&Yp(t.$$.fragment),qp(t,e.target,e.anchor,e.customElement),$p()}Ep(c)}class Xp{$destroy(){zp(this,1),this.$destroy=Fd}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Zp=[];function ty(t,e){return{subscribe:ey(t,e).subscribe}}function ey(t,e=Fd){let n;const r=new Set;function o(e){if(Rd(t,e)&&(t=e,n)){const e=!Zp.length;for(const e of r)e[1](),Zp.push(e,t);if(e){for(let t=0;t<Zp.length;t+=2)Zp[t][0](Zp[t+1]);Zp.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(i,s=Fd){const a=[i,s];return r.add(a),1===r.size&&(n=e(o)||Fd),i(t),()=>{r.delete(a),0===r.size&&(n(),n=null)}}}}function ny(t,e,n){const r=!Array.isArray(t),o=r?[t]:t,i=e.length<2;return ty(n,(t=>{let n=!1;const s=[];let a=0,c=Fd;const u=()=>{if(a)return;c();const n=e(r?s[0]:s,t);i?t(n):c=Kd(n)?n:Fd},l=o.map(((t,e)=>Gd(t,(t=>{s[e]=t,a&=~(1<<e),n&&u()}),(()=>{a|=1<<e}))));return n=!0,u(),function(){Yd(l),c()}}))}var ry={drinks:[{id:53505,name:"Lager",time:20,short:"Cold, quenching",price:200,image:"🍺"},{id:53506,name:"Kosmo",time:18,short:"Sweet",price:300,mod:"Random perk",image:"🍹"},{id:53507,name:"White",time:22,short:"Dry refreshing",price:320,image:"🍷"},{id:53508,name:"Stout",time:30,price:500,mod:"silence",short:"Liquid darkness",image:"🍫"},{id:53509,name:"Sparkly Wine",time:15,mod:"1.5X Rewards",price:600,short:"Proof of Prestige",image:"🍾"}],misc:[{id:53504,name:"Tip",image:"🤌"},{id:53249,time:60,name:"Verified Badge",short:"Not a robot",image:"🏅"},{id:55040,name:"Water",price:0,short:"The developers best friend",image:"🚰"}],gear:[{id:53760,name:"B.A.B.",slot:"head",price:1200,mod:"1.1X rewards",short:"Never leave home without it",image:"☮️"},{id:53761,name:"Fades",slot:"eyes",price:3800,mod:"Silenced, Timestrech 3X",short:"Lean back and enjoy your stay",image:"🕶️"},{id:53762,name:"Boom Deck D202",slot:"hands",price:24e4,mod:"DJ mode",short:"Play the song of your people",image:"📻"}]};const oy=window.Modem56;function iy(t,e){return ty(null,(r=>e?n.exports.nfo(t,e)(r):t(r)))}const sy=new tr("PC",{keyEncoding:"buffer",valueEncoding:"buffer"}),ay=sy.sublevel("KC",{valueEncoding:"buffer"}),cy=new fd(sy),uy=new Ud(ay),ly=(t,e,n)=>Ud.generate(t,e,n);function hy(t){const e=Ud.decodePk(t),n=nr.decode(e.geohash);return{...e,...n}}function fy(t){return iy(cy.$profile(),t)}function gy(t){return iy(cy.$vibes(),t)}let Ay=null;const[dy,py]=n.exports.write("loading"),[yy,Iy]=n.exports.write(),[my,Ey]=n.exports.write(!1),[wy,by]=n.exports.write(!1),[Cy,vy]=n.exports.write(!1),[By,_y]=n.exports.write(!1),[xy,Sy]=n.exports.write(null),ky=n.exports.combine({state:dy,error:yy,hasKey:Cy,hasProfile:By,entered:my,swarming:wy}),Qy=iy(ky),My=iy(xy);function Dy(){return Ay||(Ay=uy.readIdentity().then((t=>(vy(!!t),uy.readProfile()))).then((t=>(_y(!!t),t?.picture&&Sy(t.picture),cy.boot()))).then((t=>{Ey(t),cy.startGC()})).catch((t=>{throw console.error("kernel boot failure",t),Iy(t),py("error"),t})).then((t=>{py("running");const e=n.exports.get(ky);console.info("Final state",e);const r=JSON.parse(window.localStorage.getItem("auto_swarm"));if(e.error)window.location.hash="/error?message="+e.error.message;else if(e.hasKey){if(e.hasProfile)return r&&$y();Xv("/profile")}else Xv("/keygen")}))),Ay}function Ly(t,e){return"mock"===t?iy(function(){const[t,e]=n.exports.write(!0),[r,o]=n.exports.write(!0),i=n.exports.init(["Hello","Hi","Weather's nice! 🔥","You're joking right?",void 0,"There's a thunderstorm going on!","No way! That's so cool!","The roof is gone 🥲","Is your pants still on?",void 0,"Please tell me you're not stroking yourself during a hurricane","Yup!"]);return n.exports.mute(n.exports.combine(t,r,i,xy),(([t,n,r,i])=>{let s="ᚲᛃ";const a=r.map(((e,n)=>{const r=n%2;return s+=e?r?"ᛗ":"ᛖ":r?"ᚧ":"ᚦ",{type:r^t?"sent":"received",content:e||"",pass:!e}}));return{peer:{name:t?"Blackie":"Whitemane",picture:i,tagline:"mock tag",date:Date.now(),sex:0,score:99,age:23},myTurn:n,initiator:t,state:"active",graph:s,health:2,expiresAt:Date.now()+864e5,async send(){},pass:async()=>(o(!1),new Promise((t=>{setTimeout((()=>{o(!0),t()}),1e3)}))),async bye(){e(!t)},mLength:a.length,messages:a}}))}()):iy(cy.$chat(t),e)}let Ty=null;async function $y(){if(!oy)throw new Error("Modem not available, did you load it?");Ty||(Ty=new oy(null,{}),Ty.join("picochat-testnet",cy.spawnWire.bind(cy)),by(!0))}function Uy(t){return"data:image/jpeg;base64,"+t?.toString("base64")}async function Oy(t=!1){const e=t?"You are about to burn your passport and everything with it... you sure about this?":"Permanently wipe ALL data, you sure?";window.confirm(e)&&(t&&await uy.db.clear(),await cy.db.clear(),window.location.reload())}async function Fy(){const t=new(0,window.File)([(await uy.readIdentity()).toString("hex")],"idsqr-insecure-backup.txt",{type:"application/text"}),e=URL.createObjectURL(t);window.open(e,"_blank")}const Ny=ry,Py=Object.keys(Ny).reduce(((t,e)=>{for(const n of ry[e])n.category=e,t[n.id]=n;return t}),{});function Yy(t){let e,n,r,o,i;const s=t[4].default,a=zd(s,t,t[3],null),c=a||function(t){let e;return{c(){e=cp("Empty Modal")},m(t,n){rp(t,e,n)},d(t){t&&op(e)}}}();return{c(){e=sp("dialog"),c&&c.c()},m(s,a){var u;rp(s,e,a),c&&c.m(e,null),t[5](e),r=!0,o||(i=[(u=n=Ry.call(null,e,["open",!!t[0]]),u&&Kd(u.destroy)?u.destroy:Fd),hp(e,"click",t[2])],o=!0)},p(t,[e]){a&&a.p&&(!r||8&e)&&Xd(a,s,t,t[3],r?Wd(s,t[3],e,null):Zd(t[3]),null),n&&Kd(n.update)&&1&e&&n.update.call(null,["open",!!t[0]])},i(t){r||(Yp(c,t),r=!0)},o(t){Kp(c,t),r=!1},d(n){n&&op(e),c&&c.d(n),t[5](null),o=!1,Yd(i)}}}function Ky(t,e,n){null===n||!1===n?t.removeAttribute(e):t.setAttribute(e,n+"")}function Ry(t,e){return e&&Ky(t,e[0],e[1]),{update(e){e&&Ky(t,e[0],e[1])}}}function jy(t,e,n){let{$$slots:r={},$$scope:o}=e,{open:i=!1}=e;const s=Cp();let a;return t.$$set=t=>{"open"in t&&n(0,i=t.open),"$$scope"in t&&n(3,o=t.$$scope)},[i,a,function(t){t.target===a&&s("fade")},o,r,function(t){_p[t?"unshift":"push"]((()=>{a=t,n(1,a)}))}]}class Hy extends Xp{constructor(t){super(),Wp(this,t,jy,Yy,Rd,{open:0})}}function Vy(t){let e,n;return{c(){var r,o,i;e=ap("svg"),n=ap("use"),r=n,o="xlink:href",i=t[1],r.setAttributeNS("http://www.w3.org/1999/xlink",o,i),gp(n,"href",t[1]),gp(e,"class",tp(t[2])+" svelte-16ydb8b"),Ip(e,"nofill",t[0])},m(t,r){rp(t,e,r),np(e,n)},p(t,[n]){1&n&&Ip(e,"nofill",t[0])},i:Fd,o:Fd,d(t){t&&op(e)}}}function Gy(t,e,n){let{id:r=""}=e,{tag:o=""}=e,{nofill:i=!1}=e;const s=`build/sprites.svg#${r}`,a=`icon ${o}`.trim();return t.$$set=t=>{"id"in t&&n(3,r=t.id),"tag"in t&&n(4,o=t.tag),"nofill"in t&&n(0,i=t.nofill)},[i,s,a,r,o]}class qy extends Xp{constructor(t){super(),Wp(this,t,Gy,Vy,Rd,{id:3,tag:4,nofill:0})}}var zy={exports:{}};!function(t,e){var n=function(){var t=function(t,e){var n=t,r=l[e],o=null,i=0,s=null,a=[],c={},u=function(t,e){o=function(t){for(var e=new Array(t),n=0;n<t;n+=1){e[n]=new Array(t);for(var r=0;r<t;r+=1)e[n][r]=null}return e}(i=4*n+17),h(0,0),h(i-7,0),h(0,i-7),g(),f(),d(t,e),n>=7&&A(t),null==s&&(s=y(n,r,a)),p(s,e)},h=function(t,e){for(var n=-1;n<=7;n+=1)if(!(t+n<=-1||i<=t+n))for(var r=-1;r<=7;r+=1)e+r<=-1||i<=e+r||(o[t+n][e+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},f=function(){for(var t=8;t<i-8;t+=1)null==o[t][6]&&(o[t][6]=t%2==0);for(var e=8;e<i-8;e+=1)null==o[6][e]&&(o[6][e]=e%2==0)},g=function(){for(var t=m.getPatternPosition(n),e=0;e<t.length;e+=1)for(var r=0;r<t.length;r+=1){var i=t[e],s=t[r];if(null==o[i][s])for(var a=-2;a<=2;a+=1)for(var c=-2;c<=2;c+=1)o[i+a][s+c]=-2==a||2==a||-2==c||2==c||0==a&&0==c}},A=function(t){for(var e=m.getBCHTypeNumber(n),r=0;r<18;r+=1){var s=!t&&1==(e>>r&1);o[Math.floor(r/3)][r%3+i-8-3]=s}for(r=0;r<18;r+=1){s=!t&&1==(e>>r&1);o[r%3+i-8-3][Math.floor(r/3)]=s}},d=function(t,e){for(var n=r<<3|e,s=m.getBCHTypeInfo(n),a=0;a<15;a+=1){var c=!t&&1==(s>>a&1);a<6?o[a][8]=c:a<8?o[a+1][8]=c:o[i-15+a][8]=c}for(a=0;a<15;a+=1){c=!t&&1==(s>>a&1);a<8?o[8][i-a-1]=c:a<9?o[8][15-a-1+1]=c:o[8][15-a-1]=c}o[i-8][8]=!t},p=function(t,e){for(var n=-1,r=i-1,s=7,a=0,c=m.getMaskFunction(e),u=i-1;u>0;u-=2)for(6==u&&(u-=1);;){for(var l=0;l<2;l+=1)if(null==o[r][u-l]){var h=!1;a<t.length&&(h=1==(t[a]>>>s&1)),c(r,u-l)&&(h=!h),o[r][u-l]=h,-1==(s-=1)&&(a+=1,s=7)}if((r+=n)<0||i<=r){r-=n,n=-n;break}}},y=function(t,e,n){for(var r=b.getRSBlocks(t,e),o=C(),i=0;i<n.length;i+=1){var s=n[i];o.put(s.getMode(),4),o.put(s.getLength(),m.getLengthInBits(s.getMode(),t)),s.write(o)}var a=0;for(i=0;i<r.length;i+=1)a+=r[i].dataCount;if(o.getLengthInBits()>8*a)throw"code length overflow. ("+o.getLengthInBits()+">"+8*a+")";for(o.getLengthInBits()+4<=8*a&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*a||(o.put(236,8),o.getLengthInBits()>=8*a));)o.put(17,8);return function(t,e){for(var n=0,r=0,o=0,i=new Array(e.length),s=new Array(e.length),a=0;a<e.length;a+=1){var c=e[a].dataCount,u=e[a].totalCount-c;r=Math.max(r,c),o=Math.max(o,u),i[a]=new Array(c);for(var l=0;l<i[a].length;l+=1)i[a][l]=255&t.getBuffer()[l+n];n+=c;var h=m.getErrorCorrectPolynomial(u),f=w(i[a],h.getLength()-1).mod(h);for(s[a]=new Array(h.getLength()-1),l=0;l<s[a].length;l+=1){var g=l+f.getLength()-s[a].length;s[a][l]=g>=0?f.getAt(g):0}}var A=0;for(l=0;l<e.length;l+=1)A+=e[l].totalCount;var d=new Array(A),p=0;for(l=0;l<r;l+=1)for(a=0;a<e.length;a+=1)l<i[a].length&&(d[p]=i[a][l],p+=1);for(l=0;l<o;l+=1)for(a=0;a<e.length;a+=1)l<s[a].length&&(d[p]=s[a][l],p+=1);return d}(o,r)};c.addData=function(t,e){var n=null;switch(e=e||"Byte"){case"Numeric":n=v(t);break;case"Alphanumeric":n=B(t);break;case"Byte":n=_(t);break;case"Kanji":n=x(t);break;default:throw"mode:"+e}a.push(n),s=null},c.isDark=function(t,e){if(t<0||i<=t||e<0||i<=e)throw t+","+e;return o[t][e]},c.getModuleCount=function(){return i},c.make=function(){if(n<1){for(var t=1;t<40;t++){for(var e=b.getRSBlocks(t,r),o=C(),i=0;i<a.length;i++){var s=a[i];o.put(s.getMode(),4),o.put(s.getLength(),m.getLengthInBits(s.getMode(),t)),s.write(o)}var l=0;for(i=0;i<e.length;i++)l+=e[i].dataCount;if(o.getLengthInBits()<=8*l)break}n=t}u(!1,function(){for(var t=0,e=0,n=0;n<8;n+=1){u(!0,n);var r=m.getLostPoint(c);(0==n||t>r)&&(t=r,e=n)}return e}())},c.createTableTag=function(t,e){t=t||2;var n="";n+='<table style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: "+(e=void 0===e?4*t:e)+"px;",n+='">',n+="<tbody>";for(var r=0;r<c.getModuleCount();r+=1){n+="<tr>";for(var o=0;o<c.getModuleCount();o+=1)n+='<td style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: 0px;",n+=" width: "+t+"px;",n+=" height: "+t+"px;",n+=" background-color: ",n+=c.isDark(r,o)?"#000000":"#ffffff",n+=";",n+='"/>';n+="</tr>"}return n+="</tbody>",n+="</table>"},c.createSvgTag=function(t,e,n,r){var o={};"object"==typeof arguments[0]&&(t=(o=arguments[0]).cellSize,e=o.margin,n=o.alt,r=o.title),t=t||2,e=void 0===e?4*t:e,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-description":null,(r="string"==typeof r?{text:r}:r||{}).text=r.text||null,r.id=r.text?r.id||"qrcode-title":null;var i,s,a,u,l=c.getModuleCount()*t+2*e,h="";for(u="l"+t+",0 0,"+t+" -"+t+",0 0,-"+t+"z ",h+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',h+=o.scalable?"":' width="'+l+'px" height="'+l+'px"',h+=' viewBox="0 0 '+l+" "+l+'" ',h+=' preserveAspectRatio="xMinYMin meet"',h+=r.text||n.text?' role="img" aria-labelledby="'+I([r.id,n.id].join(" ").trim())+'"':"",h+=">",h+=r.text?'<title id="'+I(r.id)+'">'+I(r.text)+"</title>":"",h+=n.text?'<description id="'+I(n.id)+'">'+I(n.text)+"</description>":"",h+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',h+='<path d="',s=0;s<c.getModuleCount();s+=1)for(a=s*t+e,i=0;i<c.getModuleCount();i+=1)c.isDark(s,i)&&(h+="M"+(i*t+e)+","+a+u);return h+='" stroke="transparent" fill="black"/>',h+="</svg>"},c.createDataURL=function(t,e){t=t||2,e=void 0===e?4*t:e;var n=c.getModuleCount()*t+2*e,r=e,o=n-e;return Q(n,n,(function(e,n){if(r<=e&&e<o&&r<=n&&n<o){var i=Math.floor((e-r)/t),s=Math.floor((n-r)/t);return c.isDark(s,i)?0:1}return 1}))},c.createImgTag=function(t,e,n){t=t||2,e=void 0===e?4*t:e;var r=c.getModuleCount()*t+2*e,o="";return o+="<img",o+=' src="',o+=c.createDataURL(t,e),o+='"',o+=' width="',o+=r,o+='"',o+=' height="',o+=r,o+='"',n&&(o+=' alt="',o+=I(n),o+='"'),o+="/>"};var I=function(t){for(var e="",n=0;n<t.length;n+=1){var r=t.charAt(n);switch(r){case"<":e+="&lt;";break;case">":e+="&gt;";break;case"&":e+="&amp;";break;case'"':e+="&quot;";break;default:e+=r}}return e};return c.createASCII=function(t,e){if((t=t||1)<2)return function(t){t=void 0===t?2:t;var e,n,r,o,i,s=1*c.getModuleCount()+2*t,a=t,u=s-t,l={"██":"█","█ ":"▀"," █":"▄","  ":" "},h={"██":"▀","█ ":"▀"," █":" ","  ":" "},f="";for(e=0;e<s;e+=2){for(r=Math.floor((e-a)/1),o=Math.floor((e+1-a)/1),n=0;n<s;n+=1)i="█",a<=n&&n<u&&a<=e&&e<u&&c.isDark(r,Math.floor((n-a)/1))&&(i=" "),a<=n&&n<u&&a<=e+1&&e+1<u&&c.isDark(o,Math.floor((n-a)/1))?i+=" ":i+="█",f+=t<1&&e+1>=u?h[i]:l[i];f+="\n"}return s%2&&t>0?f.substring(0,f.length-s-1)+Array(s+1).join("▀"):f.substring(0,f.length-1)}(e);t-=1,e=void 0===e?2*t:e;var n,r,o,i,s=c.getModuleCount()*t+2*e,a=e,u=s-e,l=Array(t+1).join("██"),h=Array(t+1).join("  "),f="",g="";for(n=0;n<s;n+=1){for(o=Math.floor((n-a)/t),g="",r=0;r<s;r+=1)i=1,a<=r&&r<u&&a<=n&&n<u&&c.isDark(o,Math.floor((r-a)/t))&&(i=0),g+=i?l:h;for(o=0;o<t;o+=1)f+=g+"\n"}return f.substring(0,f.length-1)},c.renderTo2dContext=function(t,e){e=e||2;for(var n=c.getModuleCount(),r=0;r<n;r++)for(var o=0;o<n;o++)t.fillStyle=c.isDark(r,o)?"black":"white",t.fillRect(r*e,o*e,e,e)},c};t.stringToBytes=(t.stringToBytesFuncs={default:function(t){for(var e=[],n=0;n<t.length;n+=1){var r=t.charCodeAt(n);e.push(255&r)}return e}}).default,t.createStringToBytes=function(t,e){var n=function(){for(var n=k(t),r=function(){var t=n.read();if(-1==t)throw"eof";return t},o=0,i={};;){var s=n.read();if(-1==s)break;var a=r(),c=r()<<8|r();i[String.fromCharCode(s<<8|a)]=c,o+=1}if(o!=e)throw o+" != "+e;return i}(),r="?".charCodeAt(0);return function(t){for(var e=[],o=0;o<t.length;o+=1){var i=t.charCodeAt(o);if(i<128)e.push(i);else{var s=n[t.charAt(o)];"number"==typeof s?(255&s)==s?e.push(s):(e.push(s>>>8),e.push(255&s)):e.push(r)}}return e}};var e,n,r,o,i,s=1,a=2,c=4,u=8,l={L:1,M:0,Q:3,H:2},h=0,f=1,g=2,A=3,d=4,p=5,y=6,I=7,m=(e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],n=1335,r=7973,i=function(t){for(var e=0;0!=t;)e+=1,t>>>=1;return e},(o={}).getBCHTypeInfo=function(t){for(var e=t<<10;i(e)-i(n)>=0;)e^=n<<i(e)-i(n);return 21522^(t<<10|e)},o.getBCHTypeNumber=function(t){for(var e=t<<12;i(e)-i(r)>=0;)e^=r<<i(e)-i(r);return t<<12|e},o.getPatternPosition=function(t){return e[t-1]},o.getMaskFunction=function(t){switch(t){case h:return function(t,e){return(t+e)%2==0};case f:return function(t,e){return t%2==0};case g:return function(t,e){return e%3==0};case A:return function(t,e){return(t+e)%3==0};case d:return function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0};case p:return function(t,e){return t*e%2+t*e%3==0};case y:return function(t,e){return(t*e%2+t*e%3)%2==0};case I:return function(t,e){return(t*e%3+(t+e)%2)%2==0};default:throw"bad maskPattern:"+t}},o.getErrorCorrectPolynomial=function(t){for(var e=w([1],0),n=0;n<t;n+=1)e=e.multiply(w([1,E.gexp(n)],0));return e},o.getLengthInBits=function(t,e){if(1<=e&&e<10)switch(t){case s:return 10;case a:return 9;case c:case u:return 8;default:throw"mode:"+t}else if(e<27)switch(t){case s:return 12;case a:return 11;case c:return 16;case u:return 10;default:throw"mode:"+t}else{if(!(e<41))throw"type:"+e;switch(t){case s:return 14;case a:return 13;case c:return 16;case u:return 12;default:throw"mode:"+t}}},o.getLostPoint=function(t){for(var e=t.getModuleCount(),n=0,r=0;r<e;r+=1)for(var o=0;o<e;o+=1){for(var i=0,s=t.isDark(r,o),a=-1;a<=1;a+=1)if(!(r+a<0||e<=r+a))for(var c=-1;c<=1;c+=1)o+c<0||e<=o+c||0==a&&0==c||s==t.isDark(r+a,o+c)&&(i+=1);i>5&&(n+=3+i-5)}for(r=0;r<e-1;r+=1)for(o=0;o<e-1;o+=1){var u=0;t.isDark(r,o)&&(u+=1),t.isDark(r+1,o)&&(u+=1),t.isDark(r,o+1)&&(u+=1),t.isDark(r+1,o+1)&&(u+=1),0!=u&&4!=u||(n+=3)}for(r=0;r<e;r+=1)for(o=0;o<e-6;o+=1)t.isDark(r,o)&&!t.isDark(r,o+1)&&t.isDark(r,o+2)&&t.isDark(r,o+3)&&t.isDark(r,o+4)&&!t.isDark(r,o+5)&&t.isDark(r,o+6)&&(n+=40);for(o=0;o<e;o+=1)for(r=0;r<e-6;r+=1)t.isDark(r,o)&&!t.isDark(r+1,o)&&t.isDark(r+2,o)&&t.isDark(r+3,o)&&t.isDark(r+4,o)&&!t.isDark(r+5,o)&&t.isDark(r+6,o)&&(n+=40);var l=0;for(o=0;o<e;o+=1)for(r=0;r<e;r+=1)t.isDark(r,o)&&(l+=1);return n+=Math.abs(100*l/e/e-50)/5*10},o),E=function(){for(var t=new Array(256),e=new Array(256),n=0;n<8;n+=1)t[n]=1<<n;for(n=8;n<256;n+=1)t[n]=t[n-4]^t[n-5]^t[n-6]^t[n-8];for(n=0;n<255;n+=1)e[t[n]]=n;var r={glog:function(t){if(t<1)throw"glog("+t+")";return e[t]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return t[e]}};return r}();function w(t,e){if(void 0===t.length)throw t.length+"/"+e;var n=function(){for(var n=0;n<t.length&&0==t[n];)n+=1;for(var r=new Array(t.length-n+e),o=0;o<t.length-n;o+=1)r[o]=t[o+n];return r}(),r={getAt:function(t){return n[t]},getLength:function(){return n.length},multiply:function(t){for(var e=new Array(r.getLength()+t.getLength()-1),n=0;n<r.getLength();n+=1)for(var o=0;o<t.getLength();o+=1)e[n+o]^=E.gexp(E.glog(r.getAt(n))+E.glog(t.getAt(o)));return w(e,0)},mod:function(t){if(r.getLength()-t.getLength()<0)return r;for(var e=E.glog(r.getAt(0))-E.glog(t.getAt(0)),n=new Array(r.getLength()),o=0;o<r.getLength();o+=1)n[o]=r.getAt(o);for(o=0;o<t.getLength();o+=1)n[o]^=E.gexp(E.glog(t.getAt(o))+e);return w(n,0).mod(t)}};return r}var b=function(){var t=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e=function(t,e){var n={};return n.totalCount=t,n.dataCount=e,n},n={};return n.getRSBlocks=function(n,r){var o=function(e,n){switch(n){case l.L:return t[4*(e-1)+0];case l.M:return t[4*(e-1)+1];case l.Q:return t[4*(e-1)+2];case l.H:return t[4*(e-1)+3];default:return}}(n,r);if(void 0===o)throw"bad rs block @ typeNumber:"+n+"/errorCorrectionLevel:"+r;for(var i=o.length/3,s=[],a=0;a<i;a+=1)for(var c=o[3*a+0],u=o[3*a+1],h=o[3*a+2],f=0;f<c;f+=1)s.push(e(u,h));return s},n}(),C=function(){var t=[],e=0,n={getBuffer:function(){return t},getAt:function(e){var n=Math.floor(e/8);return 1==(t[n]>>>7-e%8&1)},put:function(t,e){for(var r=0;r<e;r+=1)n.putBit(1==(t>>>e-r-1&1))},getLengthInBits:function(){return e},putBit:function(n){var r=Math.floor(e/8);t.length<=r&&t.push(0),n&&(t[r]|=128>>>e%8),e+=1}};return n},v=function(t){var e=s,n=t,r={getMode:function(){return e},getLength:function(t){return n.length},write:function(t){for(var e=n,r=0;r+2<e.length;)t.put(o(e.substring(r,r+3)),10),r+=3;r<e.length&&(e.length-r==1?t.put(o(e.substring(r,r+1)),4):e.length-r==2&&t.put(o(e.substring(r,r+2)),7))}},o=function(t){for(var e=0,n=0;n<t.length;n+=1)e=10*e+i(t.charAt(n));return e},i=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+t};return r},B=function(t){var e=a,n=t,r={getMode:function(){return e},getLength:function(t){return n.length},write:function(t){for(var e=n,r=0;r+1<e.length;)t.put(45*o(e.charAt(r))+o(e.charAt(r+1)),11),r+=2;r<e.length&&t.put(o(e.charAt(r)),6)}},o=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);if("A"<=t&&t<="Z")return t.charCodeAt(0)-"A".charCodeAt(0)+10;switch(t){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+t}};return r},_=function(e){var n=c,r=t.stringToBytes(e),o={getMode:function(){return n},getLength:function(t){return r.length},write:function(t){for(var e=0;e<r.length;e+=1)t.put(r[e],8)}};return o},x=function(e){var n=u,r=t.stringToBytesFuncs.SJIS;if(!r)throw"sjis not supported.";!function(t,e){var n=r("友");if(2!=n.length||38726!=(n[0]<<8|n[1]))throw"sjis not supported."}();var o=r(e),i={getMode:function(){return n},getLength:function(t){return~~(o.length/2)},write:function(t){for(var e=o,n=0;n+1<e.length;){var r=(255&e[n])<<8|255&e[n+1];if(33088<=r&&r<=40956)r-=33088;else{if(!(57408<=r&&r<=60351))throw"illegal char at "+(n+1)+"/"+r;r-=49472}r=192*(r>>>8&255)+(255&r),t.put(r,13),n+=2}if(n<e.length)throw"illegal char at "+(n+1)}};return i},S=function(){var t=[],e={writeByte:function(e){t.push(255&e)},writeShort:function(t){e.writeByte(t),e.writeByte(t>>>8)},writeBytes:function(t,n,r){n=n||0,r=r||t.length;for(var o=0;o<r;o+=1)e.writeByte(t[o+n])},writeString:function(t){for(var n=0;n<t.length;n+=1)e.writeByte(t.charCodeAt(n))},toByteArray:function(){return t},toString:function(){var e="";e+="[";for(var n=0;n<t.length;n+=1)n>0&&(e+=","),e+=t[n];return e+="]"}};return e},k=function(t){var e=t,n=0,r=0,o=0,i={read:function(){for(;o<8;){if(n>=e.length){if(0==o)return-1;throw"unexpected end of file./"+o}var t=e.charAt(n);if(n+=1,"="==t)return o=0,-1;t.match(/^\s$/)||(r=r<<6|s(t.charCodeAt(0)),o+=6)}var i=r>>>o-8&255;return o-=8,i}},s=function(t){if(65<=t&&t<=90)return t-65;if(97<=t&&t<=122)return t-97+26;if(48<=t&&t<=57)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw"c:"+t};return i},Q=function(t,e,n){for(var r=function(t,e){var n=t,r=e,o=new Array(t*e),i={setPixel:function(t,e,r){o[e*n+t]=r},write:function(t){t.writeString("GIF87a"),t.writeShort(n),t.writeShort(r),t.writeByte(128),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(255),t.writeByte(255),t.writeByte(255),t.writeString(","),t.writeShort(0),t.writeShort(0),t.writeShort(n),t.writeShort(r),t.writeByte(0);var e=s(2);t.writeByte(2);for(var o=0;e.length-o>255;)t.writeByte(255),t.writeBytes(e,o,255),o+=255;t.writeByte(e.length-o),t.writeBytes(e,o,e.length-o),t.writeByte(0),t.writeString(";")}},s=function(t){for(var e=1<<t,n=1+(1<<t),r=t+1,i=a(),s=0;s<e;s+=1)i.add(String.fromCharCode(s));i.add(String.fromCharCode(e)),i.add(String.fromCharCode(n));var c=S(),u=function(t){var e=t,n=0,r=0,o={write:function(t,o){if(t>>>o!=0)throw"length over";for(;n+o>=8;)e.writeByte(255&(t<<n|r)),o-=8-n,t>>>=8-n,r=0,n=0;r|=t<<n,n+=o},flush:function(){n>0&&e.writeByte(r)}};return o}(c);u.write(e,r);var l=0,h=String.fromCharCode(o[l]);for(l+=1;l<o.length;){var f=String.fromCharCode(o[l]);l+=1,i.contains(h+f)?h+=f:(u.write(i.indexOf(h),r),i.size()<4095&&(i.size()==1<<r&&(r+=1),i.add(h+f)),h=f)}return u.write(i.indexOf(h),r),u.write(n,r),u.flush(),c.toByteArray()},a=function(){var t={},e=0,n={add:function(r){if(n.contains(r))throw"dup key:"+r;t[r]=e,e+=1},size:function(){return e},indexOf:function(e){return t[e]},contains:function(e){return void 0!==t[e]}};return n};return i}(t,e),o=0;o<e;o+=1)for(var i=0;i<t;i+=1)r.setPixel(i,o,n(i,o));var s=S();r.write(s);for(var a=function(){var t=0,e=0,n=0,r="",o={},i=function(t){r+=String.fromCharCode(s(63&t))},s=function(t){if(t<0);else{if(t<26)return 65+t;if(t<52)return t-26+97;if(t<62)return t-52+48;if(62==t)return 43;if(63==t)return 47}throw"n:"+t};return o.writeByte=function(r){for(t=t<<8|255&r,e+=8,n+=1;e>=6;)i(t>>>e-6),e-=6},o.flush=function(){if(e>0&&(i(t<<6-e),t=0,e=0),n%3!=0)for(var o=3-n%3,s=0;s<o;s+=1)r+="="},o.toString=function(){return r},o}(),c=s.toByteArray(),u=0;u<c.length;u+=1)a.writeByte(c[u]);return a.flush(),"data:image/gif;base64,"+a};return t}();n.stringToBytesFuncs["UTF-8"]=function(t){return function(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e.push(r):r<2048?e.push(192|r>>6,128|63&r):r<55296||r>=57344?e.push(224|r>>12,128|r>>6&63,128|63&r):(n++,r=65536+((1023&r)<<10|1023&t.charCodeAt(n)),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return e}(t)},t.exports=n}(zy);var Jy=zy.exports;function Wy(t){let e,n;return{c(){e=sp("pico-qr"),n=sp("img"),Ap(e,"class","svelte-1qaazc0")},m(r,o){rp(r,e,o),np(e,n),t[5](n)},p:Fd,i:Fd,o:Fd,d(n){n&&op(e),t[5](null)}}}function Xy(t,e,n){let o,{data:i=null}=e,{size:s=2}=e,{margin:a=0}=e,{level:c="L"}=e;function u(t){if(!t)return;r.Buffer.isBuffer(t)&&(t=t.toString("base64"));const e=new Jy(0,c);e.addData(t),e.make();const i=e.createDataURL(s,a);n(0,o.src=i,o)}return bp((()=>{if("function"==typeof i?.subscribe)return i.subscribe(u);i&&u(i)})),t.$$set=t=>{"data"in t&&n(1,i=t.data),"size"in t&&n(2,s=t.size),"margin"in t&&n(3,a=t.margin),"level"in t&&n(4,c=t.level)},[o,i,s,a,c,function(t){_p[t?"unshift":"push"]((()=>{o=t,n(0,o)}))}]}class Zy extends Xp{constructor(t){super(),Wp(this,t,Xy,Wy,Rd,{data:1,size:2,margin:3,level:4})}}function tI(t){let e,n,r,o,i,s=t[38].message+"";return{c(){e=sp("div"),n=sp("h5"),n.textContent="Error:",r=up(),o=sp("danger"),i=cp(s),gp(o,"class","svelte-1rqfs0r")},m(t,s){rp(t,e,s),np(e,n),np(e,r),np(e,o),np(o,i)},p:Fd,i:Fd,o:Fd,d(t){t&&op(e)}}}function eI(t){let e,n,r,o;const i=[rI,nI],s=[];function a(t,e){return t[3]?1:0}return e=a(t),n=s[e]=i[e](t),{c(){n.c(),r=lp()},m(t,n){s[e].m(t,n),rp(t,r,n),o=!0},p(t,o){let c=e;e=a(t),e===c?s[e].p(t,o):(Np(),Kp(s[c],1,1,(()=>{s[c]=null})),Pp(),n=s[e],n?n.p(t,o):(n=s[e]=i[e](t),n.c()),Yp(n,1),n.m(r.parentNode,r))},i(t){o||(Yp(n),o=!0)},o(t){Kp(n),o=!1},d(t){s[e].d(t),t&&op(r)}}}function nI(t){let e,n;return e=new Zy({props:{data:t[3].slice(32),size:10}}),{c(){Gp(e.$$.fragment)},m(t,r){qp(e,t,r),n=!0},p(t,n){const r={};8&n[0]&&(r.data=t[3].slice(32)),e.$set(r)},i(t){n||(Yp(e.$$.fragment,t),n=!0)},o(t){Kp(e.$$.fragment,t),n=!1},d(t){zp(e,t)}}}function rI(t){let e,n,r,o,i,s,a,c,u,l,h;function f(t,e){return 100===t[0]?iI:oI}let g=f(t),A=g(t),d=t[1]>1&&sI(t),p=t[2]&&aI();return{c(){e=sp("div"),A.c(),n=up(),r=sp("div"),o=sp("div"),d&&d.c(),i=up(),s=sp("button"),a=cp("Create"),u=up(),p&&p.c(),s.disabled=c=100!==t[0]||t[3],gp(o,"class","row space-between xcenter")},m(c,f){rp(c,e,f),A.m(e,null),rp(c,n,f),rp(c,r,f),np(r,o),d&&d.m(o,null),np(o,i),np(o,s),np(s,a),np(r,u),p&&p.m(r,null),l||(h=hp(s,"click",t[25]),l=!0)},p(t,n){g===(g=f(t))&&A?A.p(t,n):(A.d(1),A=g(t),A&&(A.c(),A.m(e,null))),t[1]>1?d?d.p(t,n):(d=sI(t),d.c(),d.m(o,i)):d&&(d.d(1),d=null),9&n[0]&&c!==(c=100!==t[0]||t[3])&&(s.disabled=c),t[2]?p||(p=aI(),p.c(),p.m(r,null)):p&&(p.d(1),p=null)},i:Fd,o:Fd,d(t){t&&op(e),A.d(),t&&op(n),t&&op(r),d&&d.d(),p&&p.d(),l=!1,h()}}}function oI(t){let e;return{c(){e=sp("progress"),gp(e,"min","0"),gp(e,"max","100"),e.value=t[0]},m(t,n){rp(t,e,n)},p(t,n){1&n[0]&&(e.value=t[0])},d(t){t&&op(e)}}}function iI(t){let e;return{c(){e=sp("p"),e.textContent="Press the button to generate your own unique passport",gp(e,"class","text-center")},m(t,n){rp(t,e,n)},p:Fd,d(t){t&&op(e)}}}function sI(t){let e,n,r,o,i;return{c(){e=sp("button"),n=cp("Give up"),e.disabled=r=100!==t[0]},m(r,s){rp(r,e,s),np(e,n),o||(i=hp(e,"click",t[24]),o=!0)},p(t,n){1&n[0]&&r!==(r=100!==t[0])&&(e.disabled=r)},d(t){t&&op(e),o=!1,i()}}}function aI(t){let e;return{c(){e=sp("danger"),e.textContent="Sorry.. RNG0D ignored your prayers, please try again",gp(e,"class","svelte-1rqfs0r")},m(t,n){rp(t,e,n)},d(t){t&&op(e)}}}function cI(t){let e;return{c(){e=sp("h1"),e.textContent="%nbsp;",gp(e,"aria-busy","true")},m(t,n){rp(t,e,n)},p:Fd,i:Fd,o:Fd,d(t){t&&op(e)}}}function uI(t){let e,n,r,o,i;return{c(){e=sp("a"),e.textContent="Anonkey",n=cp(" |\n        "),r=sp("a"),r.textContent="Import"},m(s,a){rp(s,e,a),rp(s,n,a),rp(s,r,a),o||(i=[hp(e,"click",t[27]),hp(r,"click",t[28])],o=!0)},p:Fd,d(t){t&&op(e),t&&op(n),t&&op(r),o=!1,Yd(i)}}}function lI(t){let e,n,r,o,i;return{c(){e=sp("a"),e.textContent="Destroy",n=cp(" |\n        "),r=sp("a"),r.textContent="Backup"},m(s,a){rp(s,e,a),rp(s,n,a),rp(s,r,a),o||(i=[hp(e,"click",t[26]),hp(r,"click",Fy)],o=!0)},p:Fd,d(t){t&&op(e),t&&op(n),t&&op(r),o=!1,Yd(i)}}}function hI(t){let e,n;return e=new Hy({props:{open:!0,$$slots:{default:[fI]},$$scope:{ctx:t}}}),e.$on("fade",t[32]),{c(){Gp(e.$$.fragment)},m(t,r){qp(e,t,r),n=!0},p(t,n){const r={};192&n[0]|256&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(Yp(e.$$.fragment,t),n=!0)},o(t){Kp(e.$$.fragment,t),n=!1},d(t){zp(e,t)}}}function fI(t){let e,n,r,o,i,s,a,c,u,l,h,f,g,A;return{c(){e=sp("article"),n=sp("header"),n.innerHTML="<h5>Import Secret</h5>",r=up(),o=sp("p"),o.textContent="Paste the secret as a hex-string",i=up(),s=sp("textarea"),a=up(),c=sp("footer"),u=sp("div"),l=sp("a"),l.textContent="Cancel",h=up(),f=sp("a"),f.textContent="Import",gp(l,"role","button"),gp(f,"role","button"),gp(u,"class","row space-between")},m(d,p){rp(d,e,p),np(e,n),np(e,r),np(e,o),np(e,i),np(e,s),pp(s,t[7]),np(e,a),np(e,c),np(c,u),np(u,l),np(u,h),np(u,f),g||(A=[hp(s,"input",t[30]),hp(l,"click",t[31]),hp(f,"click",pI)],g=!0)},p(t,e){128&e[0]&&pp(s,t[7])},d(t){t&&op(e),g=!1,Yd(A)}}}function gI(t){let e,n;return e=new Hy({props:{open:!0,$$slots:{default:[AI]},$$scope:{ctx:t}}}),e.$on("fade",t[34]),{c(){Gp(e.$$.fragment)},m(t,r){qp(e,t,r),n=!0},p(t,n){const r={};32&n[0]|256&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(Yp(e.$$.fragment,t),n=!0)},o(t){Kp(e.$$.fragment,t),n=!1},d(t){zp(e,t)}}}function AI(t){let e,n,r,o,i,s,a,c,u;return{c(){e=sp("article"),n=sp("h3"),n.textContent="Welcome to True Decentralization",r=up(),o=sp("div"),o.innerHTML="<p>Picochat is a <strong>coinless blockchain</strong>, there\n            are no super-nodes and everything is slightly different from\n            what you&#39;re used to.<br/>\n            But don&#39;t worry, it&#39;s all good.</p> \n          <p>First of all, you have to generate your own key.<br/>\n            It takes about a minute or two on a handheld device.<br/>\n            Once you&#39;ve found a one, keep it safe, it&#39;s your passport to hyperspace.\n            ✨</p> \n          <p>If you don&#39;t care about location nor gender, then\n            feel free to use an <i>anonymous</i> key.<br/>\n            Trees say &quot;Thanks!&quot; 🌱</p> \n          <p>Please don&#39;t generate more keys than you need, mining of any form is a pointless waste of world-resources.\n            Hate to say it; but don&#39;t ever trade a key, it is <strong>insecure and dangerous</strong>.</p> \n          <p><i>The hyperspace is vast.<br/>\n            It&#39;s real-estate, just like air -\n            worth nothing while there&#39;s enough for everyone.<br/>\n            Let&#39;s keep it that way</i> 🙂</p>",i=up(),s=sp("footer"),a=sp("button"),a.textContent="gotcha",gp(o,"class","about svelte-1rqfs0r")},m(l,h){rp(l,e,h),np(e,n),np(e,r),np(e,o),np(e,i),np(e,s),np(s,a),c||(u=hp(a,"click",t[33]),c=!0)},p:Fd,d(t){t&&op(e),c=!1,u()}}}function dI(t){let e,n,r,o,i,s,a,c,u,l,h,f,g,A,d,p,y,I,m,E,w,b,C,v,B,_,x,S,k,Q,M,D,L,T,$,U,O,F,N,P;o=new qy({props:{id:"icon-info"}});let Y={ctx:t,current:null,token:null,hasCatch:!0,pending:cI,then:eI,catch:tI,error:38,blocks:[,,,]};function K(t,e){return t[3]?lI:uI}Rp(t[17](),Y);let R=K(t),j=R(t),H=t[6]&&hI(t),V=t[5]&&gI(t);return{c(){e=sp("keygen-view"),n=sp("h1"),r=cp("Setup\n    "),Gp(o.$$.fragment),i=up(),s=sp("h5"),s.textContent="Gender",a=up(),c=sp("fieldset"),u=sp("input"),l=up(),h=sp("label"),h.textContent="M",f=up(),g=sp("input"),A=up(),d=sp("label"),d.textContent="F",p=up(),y=sp("input"),I=up(),m=sp("label"),m.textContent="NB",E=up(),w=sp("br"),b=up(),C=sp("h5"),C.textContent="IDSQR",v=up(),B=sp("div"),_=sp("idsqr"),Y.block.c(),x=up(),S=sp("div"),k=sp("small"),j.c(),Q=up(),M=sp("br"),D=up(),L=sp("button"),T=cp("next"),U=up(),H&&H.c(),O=up(),V&&V.c(),gp(u,"type","radio"),u.__value=1,u.value=u.__value,gp(u,"id","M"),gp(u,"name","gender"),t[21][0].push(u),gp(h,"for","M"),gp(g,"type","radio"),g.__value=0,g.value=g.__value,gp(g,"id","F"),gp(g,"name","gender"),t[21][0].push(g),gp(d,"for","F"),gp(y,"type","radio"),y.__value=2,y.value=y.__value,gp(y,"id","NB"),gp(y,"name","gender"),t[21][0].push(y),gp(m,"for","NB"),gp(_,"data-theme","dark"),gp(_,"class","flex column space-around"),gp(B,"class","flex column xcenter"),gp(S,"class","row end hpad"),L.disabled=$=!t[3],Ap(e,"class","block container")},m($,K){rp($,e,K),np(e,n),np(n,r),qp(o,n,null),np(e,i),np(e,s),np(e,a),np(e,c),np(c,u),u.checked=u.__value===t[4],np(c,l),np(c,h),np(c,f),np(c,g),g.checked=g.__value===t[4],np(c,A),np(c,d),np(c,p),np(c,y),y.checked=y.__value===t[4],np(c,I),np(c,m),np(e,E),np(e,w),np(e,b),np(e,C),np(e,v),np(e,B),np(B,_),Y.block.m(_,Y.anchor=null),Y.mount=()=>_,Y.anchor=null,np(e,x),np(e,S),np(S,k),j.m(k,null),np(e,Q),np(e,M),np(e,D),np(e,L),np(L,T),np(e,U),H&&H.m(e,null),np(e,O),V&&V.m(e,null),F=!0,N||(P=[hp(n,"click",t[19]),hp(u,"change",t[20]),hp(g,"change",t[22]),hp(y,"change",t[23]),hp(L,"click",t[29])],N=!0)},p(n,r){t=n,16&r[0]&&(u.checked=u.__value===t[4]),16&r[0]&&(g.checked=g.__value===t[4]),16&r[0]&&(y.checked=y.__value===t[4]),jp(Y,t,r),R===(R=K(t))&&j?j.p(t,r):(j.d(1),j=R(t),j&&(j.c(),j.m(k,null))),(!F||8&r[0]&&$!==($=!t[3]))&&(L.disabled=$),t[6]?H?(H.p(t,r),64&r[0]&&Yp(H,1)):(H=hI(t),H.c(),Yp(H,1),H.m(e,O)):H&&(Np(),Kp(H,1,1,(()=>{H=null})),Pp()),t[5]?V?(V.p(t,r),32&r[0]&&Yp(V,1)):(V=gI(t),V.c(),Yp(V,1),V.m(e,null)):V&&(Np(),Kp(V,1,1,(()=>{V=null})),Pp())},i(t){F||(Yp(o.$$.fragment,t),Yp(Y.block),Yp(H),Yp(V),F=!0)},o(t){Kp(o.$$.fragment,t);for(let t=0;t<3;t+=1){Kp(Y.blocks[t])}Kp(H),Kp(V),F=!1},d(n){n&&op(e),zp(o),t[21][0].splice(t[21][0].indexOf(u),1),t[21][0].splice(t[21][0].indexOf(g),1),t[21][0].splice(t[21][0].indexOf(y),1),Y.block.d(),Y.token=null,Y=null,j.d(),H&&H.d(),V&&V.d(),N=!1,Yd(P)}}}async function pI(){console.error("TODO: not yet implemented")}function yI(t,e,n){let r,o,i,s,a,c,u,l,h;const f=ey(100);qd(t,f,(t=>n(0,o=t)));const g=ey();qd(t,g,(t=>n(3,a=t)));const A=ey(null);qd(t,A,(t=>n(35,r=t)));const d=ey(0);qd(t,d,(t=>n(4,c=t)));const p=ey(!1);qd(t,p,(t=>n(2,s=t)));const y=ey(0);qd(t,y,(t=>n(1,i=t)));const I=ey(!1);qd(t,I,(t=>n(6,l=t)));const m=ey("");qd(t,m,(t=>n(7,h=t)));const E=ey(!1);async function w(t=0){if(a)return;console.info(`roll(${t})`),ep(f,o=0,o),ep(p,s=!1,s);let e=null;for(let n=0;n<100&&(ep(f,o++,o),e=ly(t<2?c:null,t<1?r:null,500),!e);n++)await new Promise((t=>setTimeout(t,100)));e?(await async function(t){await uy.writeIdentity(t),vy(!0)}(e.sk),ep(g,a=e.sk,a)):(ep(p,s=!0,s),ep(y,i++,i)),ep(f,o=100,o)}qd(t,E,(t=>n(5,u=t)));return[o,i,s,a,c,u,l,h,f,g,A,d,p,y,I,m,E,async function(){try{const t=await uy.readIdentity();if(!t)return;ep(g,a=t,a);const e=hy(t.slice(32));ep(d,c=e.sex,c),ep(A,r=e.geohash,r)}catch(t){throw console.error("loadKeychain() failed:",t),t}},w,()=>ep(E,u=!0,u),function(){c=this.__value,d.set(c)},[[]],function(){c=this.__value,d.set(c)},function(){c=this.__value,d.set(c)},()=>w(1),()=>w(1),()=>Oy(!0),()=>w(2),()=>ep(I,l=!0,l),()=>Xv("/profile"),function(){h=this.value,m.set(h)},()=>ep(I,l=!1,l),()=>ep(I,l=!1,l),()=>ep(E,u=!1,u),()=>ep(E,u=!1,u)]}class II extends Xp{constructor(t){super(),Wp(this,t,yI,dI,Rd,{},null,[-1,-1])}}var mI={exports:{}};!function(t,e){t.exports=function(){var t=1e3,e=6e4,n=36e5,r="millisecond",o="second",i="minute",s="hour",a="day",c="week",u="month",l="quarter",h="year",f="date",g="Invalid Date",A=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},y=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},I={s:y,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),o=n%60;return(e<=0?"+":"-")+y(r,2,"0")+":"+y(o,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),o=e.clone().add(r,u),i=n-o<0,s=e.clone().add(r+(i?-1:1),u);return+(-(r+(n-o)/(i?o-s:s-o))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:u,y:h,w:c,d:a,D:f,h:s,m:i,s:o,ms:r,Q:l}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},m="en",E={};E[m]=p;var w=function(t){return t instanceof B},b=function t(e,n,r){var o;if(!e)return m;if("string"==typeof e){var i=e.toLowerCase();E[i]&&(o=i),n&&(E[i]=n,o=i);var s=e.split("-");if(!o&&s.length>1)return t(s[0])}else{var a=e.name;E[a]=e,o=a}return!r&&o&&(m=o),o||!r&&m},C=function(t,e){if(w(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new B(n)},v=I;v.l=b,v.i=w,v.w=function(t,e){return C(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var B=function(){function p(t){this.$L=b(t.locale,null,!0),this.parse(t)}var y=p.prototype;return y.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(v.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(A);if(r){var o=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},y.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},y.$utils=function(){return v},y.isValid=function(){return!(this.$d.toString()===g)},y.isSame=function(t,e){var n=C(t);return this.startOf(e)<=n&&n<=this.endOf(e)},y.isAfter=function(t,e){return C(t)<this.startOf(e)},y.isBefore=function(t,e){return this.endOf(e)<C(t)},y.$g=function(t,e,n){return v.u(t)?this[e]:this.set(n,t)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(t,e){var n=this,r=!!v.u(e)||e,l=v.p(t),g=function(t,e){var o=v.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?o:o.endOf(a)},A=function(t,e){return v.w(n.toDate()[t].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},d=this.$W,p=this.$M,y=this.$D,I="set"+(this.$u?"UTC":"");switch(l){case h:return r?g(1,0):g(31,11);case u:return r?g(1,p):g(0,p+1);case c:var m=this.$locale().weekStart||0,E=(d<m?d+7:d)-m;return g(r?y-E:y+(6-E),p);case a:case f:return A(I+"Hours",0);case s:return A(I+"Minutes",1);case i:return A(I+"Seconds",2);case o:return A(I+"Milliseconds",3);default:return this.clone()}},y.endOf=function(t){return this.startOf(t,!1)},y.$set=function(t,e){var n,c=v.p(t),l="set"+(this.$u?"UTC":""),g=(n={},n[a]=l+"Date",n[f]=l+"Date",n[u]=l+"Month",n[h]=l+"FullYear",n[s]=l+"Hours",n[i]=l+"Minutes",n[o]=l+"Seconds",n[r]=l+"Milliseconds",n)[c],A=c===a?this.$D+(e-this.$W):e;if(c===u||c===h){var d=this.clone().set(f,1);d.$d[g](A),d.init(),this.$d=d.set(f,Math.min(this.$D,d.daysInMonth())).$d}else g&&this.$d[g](A);return this.init(),this},y.set=function(t,e){return this.clone().$set(t,e)},y.get=function(t){return this[v.p(t)]()},y.add=function(r,l){var f,g=this;r=Number(r);var A=v.p(l),d=function(t){var e=C(g);return v.w(e.date(e.date()+Math.round(t*r)),g)};if(A===u)return this.set(u,this.$M+r);if(A===h)return this.set(h,this.$y+r);if(A===a)return d(1);if(A===c)return d(7);var p=(f={},f[i]=e,f[s]=n,f[o]=t,f)[A]||1,y=this.$d.getTime()+r*p;return v.w(y,this)},y.subtract=function(t,e){return this.add(-1*t,e)},y.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||g;var r=t||"YYYY-MM-DDTHH:mm:ssZ",o=v.z(this),i=this.$H,s=this.$m,a=this.$M,c=n.weekdays,u=n.months,l=function(t,n,o,i){return t&&(t[n]||t(e,r))||o[n].slice(0,i)},h=function(t){return v.s(i%12||12,t,"0")},f=n.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},A={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:v.s(a+1,2,"0"),MMM:l(n.monthsShort,a,u,3),MMMM:l(u,a),D:this.$D,DD:v.s(this.$D,2,"0"),d:String(this.$W),dd:l(n.weekdaysMin,this.$W,c,2),ddd:l(n.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(i),HH:v.s(i,2,"0"),h:h(1),hh:h(2),a:f(i,s,!0),A:f(i,s,!1),m:String(s),mm:v.s(s,2,"0"),s:String(this.$s),ss:v.s(this.$s,2,"0"),SSS:v.s(this.$ms,3,"0"),Z:o};return r.replace(d,(function(t,e){return e||A[t]||o.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(r,f,g){var A,d=v.p(f),p=C(r),y=(p.utcOffset()-this.utcOffset())*e,I=this-p,m=v.m(this,p);return m=(A={},A[h]=m/12,A[u]=m,A[l]=m/3,A[c]=(I-y)/6048e5,A[a]=(I-y)/864e5,A[s]=I/n,A[i]=I/e,A[o]=I/t,A)[d]||I,g?m:v.a(m)},y.daysInMonth=function(){return this.endOf(u).$D},y.$locale=function(){return E[this.$L]},y.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=b(t,e,!0);return r&&(n.$L=r),n},y.clone=function(){return v.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},p}(),_=B.prototype;return C.prototype=_,[["$ms",r],["$s",o],["$m",i],["$H",s],["$W",a],["$M",u],["$y",h],["$D",f]].forEach((function(t){_[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),C.extend=function(t,e){return t.$i||(t(e,B,C),t.$i=!0),C},C.locale=b,C.isDayjs=w,C.unix=function(t){return C(1e3*t)},C.en=E[m],C.Ls=E,C.p={},C}()}(mI);var EI=mI.exports;function wI(t){let e,n=EI.duration(t[1]>0?t[1]:0).format(t[0])+"";return{c(){e=cp(n)},m(t,n){rp(t,e,n)},p(t,r){3&r&&n!==(n=EI.duration(t[1]>0?t[1]:0).format(t[0])+"")&&dp(e,n)},d(t){t&&op(e)}}}function bI(t){let e,n,r=t[3](t[1]>0?t[1]:0)+"";return{c(){e=new mp(!1),n=lp(),e.a=n},m(t,o){e.m(r,t,o),rp(t,n,o)},p(t,n){2&n&&r!==(r=t[3](t[1]>0?t[1]:0)+"")&&e.p(r)},d(t){t&&op(n),t&&e.d()}}}function CI(t){let e,n;function r(t,e){return 1&e&&(n=null),null==n&&(n=!!/^¤+$/.test(t[0])),n?bI:wI}let o=r(t,-1),i=o(t);return{c(){e=sp("timer"),i.c()},m(t,n){rp(t,e,n),i.m(e,null)},p(t,[n]){o===(o=r(t,n))&&i?i.p(t,n):(i.d(1),i=o(t),i&&(i.c(),i.m(e,null)))},i:Fd,o:Fd,d(t){t&&op(e),i.d()}}}function vI(t,e,n){let r,{expiresAt:o}=e,{format:i="HH:mm"}=e,s=null;const a=ey(o-Date.now());return qd(t,a,(t=>n(1,r=t))),bp((()=>(s&&(clearInterval(s),s=null),s=setInterval((()=>{ep(a,r=o-Date.now(),r),r<=0&&clearInterval(s)}),200),()=>{clearInterval(s)}))),t.$$set=t=>{"expiresAt"in t&&n(4,o=t.expiresAt),"format"in t&&n(0,i=t.format)},[i,r,a,function(t){const e=t/1e3/60;switch(i){case"¤":return Math.floor(e);case"¤¤":return`${Math.floor(e)}<small>${(e-Math.floor(e)).toFixed(1).substr(1)}</small>`;case"¤¤¤":return`${Math.floor(e)}<small>${(e-Math.floor(e)).toFixed(2).substr(1)}</small>`}},o]}class BI extends Xp{constructor(t){super(),Wp(this,t,vI,CI,Rd,{expiresAt:4,format:0})}}var _I={},xI={},SI={},kI={};Object.defineProperty(kI,"__esModule",{value:!0}),kI.areaConversion=kI.timeConversion=kI.distanceConversion=kI.altitudeKeys=kI.latitudeKeys=kI.longitudeKeys=kI.MAXLON=kI.MINLON=kI.MAXLAT=kI.MINLAT=kI.earthRadius=kI.sexagesimalPattern=void 0;kI.sexagesimalPattern=/^([0-9]{1,3})°\s*([0-9]{1,3}(?:\.(?:[0-9]{1,}))?)['′]\s*(([0-9]{1,3}(\.([0-9]{1,}))?)["″]\s*)?([NEOSW]?)$/;kI.earthRadius=6378137;kI.MINLAT=-90;kI.MAXLAT=90;kI.MINLON=-180;kI.MAXLON=180;kI.longitudeKeys=["lng","lon","longitude",0];kI.latitudeKeys=["lat","latitude",1];kI.altitudeKeys=["alt","altitude","elevation","elev",2];kI.distanceConversion={m:1,km:.001,cm:100,mm:1e3,mi:1/1609.344,sm:1/1852.216,ft:100/30.48,in:100/2.54,yd:1/.9144};kI.timeConversion={m:60,h:3600,d:86400};var QI={m2:1,km2:1e-6,ha:1e-4,a:.01,ft2:10.763911,yd2:1.19599,in2:1550.0031};kI.areaConversion=QI,QI.sqm=QI.m2,QI.sqkm=QI.km2,QI.sqft=QI.ft2,QI.sqyd=QI.yd2,QI.sqin=QI.in2;var MI={};Object.defineProperty(MI,"__esModule",{value:!0}),MI.default=void 0;var DI=function(t,e){return e.reduce((function(e,n){if(null==t)throw new Error("'".concat(t,"' is no valid coordinate."));return Object.prototype.hasOwnProperty.call(t,n)&&void 0!==n&&void 0===e?(e=n,n):e}),void 0)};MI.default=DI;var LI={},TI={};Object.defineProperty(TI,"__esModule",{value:!0}),TI.default=void 0;var $I=function(t){var e=t.toString().trim();return!isNaN(parseFloat(e))&&parseFloat(e)===Number(e)};TI.default=$I;var UI={};Object.defineProperty(UI,"__esModule",{value:!0}),UI.default=void 0;var OI=kI,FI=function(t){return OI.sexagesimalPattern.test(t.toString().trim())};UI.default=FI;var NI={};Object.defineProperty(NI,"__esModule",{value:!0}),NI.default=void 0;var PI=kI,YI=function(t){var e=new RegExp(PI.sexagesimalPattern).exec(t.toString().trim());if(null==e)throw new Error("Given value is not in sexagesimal format");var n=Number(e[2])/60||0,r=Number(e[4])/3600||0,o=parseFloat(e[1])+n+r;return["S","W"].includes(e[7])?-o:o};NI.default=YI;var KI={},RI={};Object.defineProperty(RI,"__esModule",{value:!0}),RI.default=void 0;var jI,HI=kI,VI=(jI=MI)&&jI.__esModule?jI:{default:jI};function GI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function qI(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?GI(Object(n),!0).forEach((function(e){zI(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GI(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function zI(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var JI=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{longitude:HI.longitudeKeys,latitude:HI.latitudeKeys,altitude:HI.altitudeKeys},n=(0,VI.default)(t,e.longitude),r=(0,VI.default)(t,e.latitude),o=(0,VI.default)(t,e.altitude);return qI({latitude:r,longitude:n},o?{altitude:o}:{})};RI.default=JI;var WI={};Object.defineProperty(WI,"__esModule",{value:!0}),WI.default=void 0;var XI=nm(TI),ZI=nm(UI),tm=nm(NI),em=kI;function nm(t){return t&&t.__esModule?t:{default:t}}var rm=function t(e){return(0,XI.default)(e)?!(parseFloat(e)>em.MAXLAT||e<em.MINLAT):!!(0,ZI.default)(e)&&t((0,tm.default)(e))};WI.default=rm;var om={};Object.defineProperty(om,"__esModule",{value:!0}),om.default=void 0;var im=um(TI),sm=um(UI),am=um(NI),cm=kI;function um(t){return t&&t.__esModule?t:{default:t}}var lm=function t(e){return(0,im.default)(e)?!(parseFloat(e)>cm.MAXLON||e<cm.MINLON):!!(0,sm.default)(e)&&t((0,am.default)(e))};om.default=lm,Object.defineProperty(KI,"__esModule",{value:!0}),KI.default=void 0;var hm=Am(RI),fm=Am(WI),gm=Am(om);function Am(t){return t&&t.__esModule?t:{default:t}}var dm=function(t){var e=(0,hm.default)(t),n=e.latitude,r=e.longitude;if(Array.isArray(t)&&t.length>=2)return(0,gm.default)(t[0])&&(0,fm.default)(t[1]);if(void 0===n||void 0===r)return!1;var o=t[r],i=t[n];return void 0!==i&&void 0!==o&&(!1!==(0,fm.default)(i)&&!1!==(0,gm.default)(o))};KI.default=dm,Object.defineProperty(LI,"__esModule",{value:!0}),LI.default=void 0;var pm=wm(TI),ym=wm(UI),Im=wm(NI),mm=wm(KI),Em=wm(RI);function wm(t){return t&&t.__esModule?t:{default:t}}function bm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Cm(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?bm(Object(n),!0).forEach((function(e){vm(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bm(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function vm(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Bm=function t(e){if((0,pm.default)(e))return Number(e);if((0,ym.default)(e))return(0,Im.default)(e);if((0,mm.default)(e)){var n=(0,Em.default)(e);return Array.isArray(e)?e.map((function(e,n){return[0,1].includes(n)?t(e):e})):Cm(Cm(Cm({},e),n.latitude&&vm({},n.latitude,t(e[n.latitude]))),n.longitude&&vm({},n.longitude,t(e[n.longitude])))}return Array.isArray(e)?e.map((function(e){return(0,mm.default)(e)?t(e):e})):e};LI.default=Bm,Object.defineProperty(SI,"__esModule",{value:!0}),SI.default=void 0;var _m=kI,xm=km(MI),Sm=km(LI);function km(t){return t&&t.__esModule?t:{default:t}}var Qm=function(t,e){var n=(0,xm.default)(t,_m.latitudeKeys);if(null!=n){var r=t[n];return!0===e?r:(0,Sm.default)(r)}};SI.default=Qm;var Mm={};Object.defineProperty(Mm,"__esModule",{value:!0}),Mm.default=void 0;var Dm=kI,Lm=$m(MI),Tm=$m(LI);function $m(t){return t&&t.__esModule?t:{default:t}}var Um=function(t,e){var n=(0,Lm.default)(t,Dm.longitudeKeys);if(null!=n){var r=t[n];return!0===e?r:(0,Tm.default)(r)}};Mm.default=Um;var Om={};Object.defineProperty(Om,"__esModule",{value:!0}),Om.default=void 0;var Fm=function(t){return t*Math.PI/180};Om.default=Fm;var Nm={};Object.defineProperty(Nm,"__esModule",{value:!0}),Nm.default=void 0;var Pm=function(t){return 180*t/Math.PI};Nm.default=Pm,Object.defineProperty(xI,"__esModule",{value:!0}),xI.default=void 0;var Ym=Vm(SI),Km=Vm(Mm),Rm=Vm(Om),jm=Vm(Nm),Hm=kI;function Vm(t){return t&&t.__esModule?t:{default:t}}var Gm=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6371e3,o=(0,Ym.default)(t),i=(0,Km.default)(t),s=e/r,a=(0,Rm.default)(n),c=(0,Rm.default)(o),u=(0,Rm.default)(i),l=Math.asin(Math.sin(c)*Math.cos(s)+Math.cos(c)*Math.sin(s)*Math.cos(a)),h=u+Math.atan2(Math.sin(a)*Math.sin(s)*Math.cos(c),Math.cos(s)-Math.sin(c)*Math.sin(l)),f=(0,jm.default)(h);return(f<Hm.MINLON||f>Hm.MAXLON)&&(h=(h+3*Math.PI)%(2*Math.PI)-Math.PI,f=(0,jm.default)(h)),{latitude:(0,jm.default)(l),longitude:f}};xI.default=Gm;var qm={};Object.defineProperty(qm,"__esModule",{value:!0}),qm.default=void 0;var zm=kI,Jm=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m",n=zm.areaConversion[e];if(n)return t*n;throw new Error("Invalid unit used for area conversion.")};qm.default=Jm;var Wm={};Object.defineProperty(Wm,"__esModule",{value:!0}),Wm.default=void 0;var Xm=kI,Zm=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m",n=Xm.distanceConversion[e];if(n)return t*n;throw new Error("Invalid unit used for distance conversion.")};Wm.default=Zm;var tE={};Object.defineProperty(tE,"__esModule",{value:!0}),tE.default=void 0;var eE=kI,nE=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kmh";switch(e){case"kmh":return t*eE.timeConversion.h*eE.distanceConversion.km;case"mph":return t*eE.timeConversion.h*eE.distanceConversion.mi;default:return t}};tE.default=nE;var rE={};function oE(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return iE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iE(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iE(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Object.defineProperty(rE,"__esModule",{value:!0}),rE.default=void 0;var sE=function(t){var e=oE(t.toString().split("."),2),n=e[0],r=e[1],o=Math.abs(Number(n)),i=60*Number("0."+(r||0)),s=i.toString().split("."),a=Math.floor(i),c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=Math.pow(10,e);return Math.round(t*n)/n}(60*Number("0."+(s[1]||0))).toString(),u=oE(c.split("."),2),l=u[0],h=u[1],f=void 0===h?"0":h;return o+"° "+a.toString().padStart(2,"0")+"' "+l.padStart(2,"0")+"."+f.padEnd(1,"0")+'"'};rE.default=sE;var aE={},cE={},uE={},lE={};Object.defineProperty(lE,"__esModule",{value:!0}),lE.default=void 0;var hE=function(t){return t>1?1:t<-1?-1:t};lE.default=hE,Object.defineProperty(uE,"__esModule",{value:!0}),uE.default=void 0;var fE=yE(SI),gE=yE(Mm),AE=yE(Om),dE=yE(lE),pE=kI;function yE(t){return t&&t.__esModule?t:{default:t}}var IE=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;n=void 0===n||isNaN(n)?1:n;var r=(0,fE.default)(t),o=(0,gE.default)(t),i=(0,fE.default)(e),s=(0,gE.default)(e),a=Math.acos((0,dE.default)(Math.sin((0,AE.default)(i))*Math.sin((0,AE.default)(r))+Math.cos((0,AE.default)(i))*Math.cos((0,AE.default)(r))*Math.cos((0,AE.default)(o)-(0,AE.default)(s))))*pE.earthRadius;return Math.round(a/n)*n};uE.default=IE,Object.defineProperty(cE,"__esModule",{value:!0}),cE.default=void 0;var mE=function(t){return t&&t.__esModule?t:{default:t}}(uE);var EE=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mE.default;return n="function"==typeof n?n:mE.default,e.slice().sort((function(e,r){return n(t,e)-n(t,r)}))};cE.default=EE,Object.defineProperty(aE,"__esModule",{value:!0}),aE.default=void 0;var wE=function(t){return t&&t.__esModule?t:{default:t}}(cE);var bE=function(t,e){return(0,wE.default)(t,e)[0]};aE.default=bE;var CE={};Object.defineProperty(CE,"__esModule",{value:!0}),CE.default=void 0;var vE=SE(Om),BE=SE(SI),_E=SE(Mm),xE=kI;function SE(t){return t&&t.__esModule?t:{default:t}}var kE=function(t){var e=0;if(t.length>2){for(var n,r,o,i=0;i<t.length;i++){i===t.length-2?(n=t.length-2,r=t.length-1,o=0):i===t.length-1?(n=t.length-1,r=0,o=1):(n=i,r=i+1,o=i+2);var s=(0,_E.default)(t[n]),a=(0,BE.default)(t[r]),c=(0,_E.default)(t[o]);e+=((0,vE.default)(c)-(0,vE.default)(s))*Math.sin((0,vE.default)(a))}e=e*xE.earthRadius*xE.earthRadius/2}return Math.abs(e)};CE.default=kE;var QE={};Object.defineProperty(QE,"__esModule",{value:!0}),QE.default=void 0;var ME=LE(SI),DE=LE(Mm);function LE(t){return t&&t.__esModule?t:{default:t}}var TE=function(t){if(!1===Array.isArray(t)||0===t.length)throw new Error("No points were given.");return t.reduce((function(t,e){var n=(0,ME.default)(e),r=(0,DE.default)(e);return{maxLat:Math.max(n,t.maxLat),minLat:Math.min(n,t.minLat),maxLng:Math.max(r,t.maxLng),minLng:Math.min(r,t.minLng)}}),{maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0})};QE.default=TE;var $E={};Object.defineProperty($E,"__esModule",{value:!0}),$E.default=void 0;var UE=YE(SI),OE=YE(Mm),FE=YE(Om),NE=YE(Nm),PE=kI;function YE(t){return t&&t.__esModule?t:{default:t}}var KE=function(t,e){var n,r,o=(0,UE.default)(t),i=(0,OE.default)(t),s=(0,FE.default)(o),a=(0,FE.default)(i),c=e/PE.earthRadius,u=s-c,l=s+c,h=(0,FE.default)(PE.MAXLAT),f=(0,FE.default)(PE.MINLAT),g=(0,FE.default)(PE.MAXLON),A=(0,FE.default)(PE.MINLON);if(u>f&&l<h){var d=Math.asin(Math.sin(c)/Math.cos(s));(n=a-d)<A&&(n+=2*Math.PI),(r=a+d)>g&&(r-=2*Math.PI)}else u=Math.max(u,f),l=Math.min(l,h),n=A,r=g;return[{latitude:(0,NE.default)(u),longitude:(0,NE.default)(n)},{latitude:(0,NE.default)(l),longitude:(0,NE.default)(r)}]};$E.default=KE;var RE={};Object.defineProperty(RE,"__esModule",{value:!0}),RE.default=void 0;var jE=qE(SI),HE=qE(Mm),VE=qE(Om),GE=qE(Nm);function qE(t){return t&&t.__esModule?t:{default:t}}var zE=function(t){if(!1===Array.isArray(t)||0===t.length)return!1;var e=t.length,n=t.reduce((function(t,e){var n=(0,VE.default)((0,jE.default)(e)),r=(0,VE.default)((0,HE.default)(e));return{X:t.X+Math.cos(n)*Math.cos(r),Y:t.Y+Math.cos(n)*Math.sin(r),Z:t.Z+Math.sin(n)}}),{X:0,Y:0,Z:0}),r=n.X/e,o=n.Y/e,i=n.Z/e;return{longitude:(0,GE.default)(Math.atan2(o,r)),latitude:(0,GE.default)(Math.atan2(i,Math.sqrt(r*r+o*o)))}};RE.default=zE;var JE={};Object.defineProperty(JE,"__esModule",{value:!0}),JE.default=void 0;var WE=function(t){return t&&t.__esModule?t:{default:t}}(QE);var XE=function(t){var e=(0,WE.default)(t),n=e.minLat+(e.maxLat-e.minLat)/2,r=e.minLng+(e.maxLng-e.minLng)/2;return{latitude:parseFloat(n.toFixed(6)),longitude:parseFloat(r.toFixed(6))}};JE.default=XE;var ZE={},tw={};Object.defineProperty(tw,"__esModule",{value:!0}),tw.default=void 0;var ew=iw(SI),nw=iw(Mm),rw=iw(Om),ow=iw(Nm);function iw(t){return t&&t.__esModule?t:{default:t}}var sw=function(t,e){var n=(0,rw.default)((0,nw.default)(e))-(0,rw.default)((0,nw.default)(t)),r=Math.log(Math.tan((0,rw.default)((0,ew.default)(e))/2+Math.PI/4)/Math.tan((0,rw.default)((0,ew.default)(t))/2+Math.PI/4));return Math.abs(n)>Math.PI&&(n=n>0?-1*(2*Math.PI-n):2*Math.PI+n),((0,ow.default)(Math.atan2(n,r))+360)%360};tw.default=sw,Object.defineProperty(ZE,"__esModule",{value:!0}),ZE.default=void 0;var aw=function(t){return t&&t.__esModule?t:{default:t}}(tw);var cw=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:aw.default,r="function"==typeof n?n(t,e):(0,aw.default)(t,e);if(isNaN(r))throw new Error("Could not calculate bearing for given points. Check your bearing function");switch(Math.round(r/22.5)){case 1:return"NNE";case 2:return"NE";case 3:return"ENE";case 4:return"E";case 5:return"ESE";case 6:return"SE";case 7:return"SSE";case 8:return"S";case 9:return"SSW";case 10:return"SW";case 11:return"WSW";case 12:return"W";case 13:return"WNW";case 14:return"NW";case 15:return"NNW";default:return"N"}};ZE.default=cw;var uw={};Object.defineProperty(uw,"__esModule",{value:!0}),uw.default=void 0;var lw=fw(uE),hw=fw(lE);function fw(t){return t&&t.__esModule?t:{default:t}}var gw=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=(0,lw.default)(e,t,r),i=(0,lw.default)(t,n,r),s=(0,lw.default)(e,n,r),a=Math.acos((0,hw.default)((o*o+s*s-i*i)/(2*o*s))),c=Math.acos((0,hw.default)((i*i+s*s-o*o)/(2*i*s)));return a>Math.PI/2?o:c>Math.PI/2?i:Math.sin(a)*o};uw.default=gw;var Aw={};Object.defineProperty(Aw,"__esModule",{value:!0}),Aw.default=void 0;var dw=mw(SI),pw=mw(Mm),yw=mw(Om),Iw=mw(Nm);function mw(t){return t&&t.__esModule?t:{default:t}}var Ew=function(t,e){var n=(0,dw.default)(e),r=(0,pw.default)(e),o=(0,dw.default)(t),i=(0,pw.default)(t);return((0,Iw.default)(Math.atan2(Math.sin((0,yw.default)(r)-(0,yw.default)(i))*Math.cos((0,yw.default)(n)),Math.cos((0,yw.default)(o))*Math.sin((0,yw.default)(n))-Math.sin((0,yw.default)(o))*Math.cos((0,yw.default)(n))*Math.cos((0,yw.default)(r)-(0,yw.default)(i))))+360)%360};Aw.default=Ew;var ww={};Object.defineProperty(ww,"__esModule",{value:!0}),ww.default=void 0;var bw=function(t){return t&&t.__esModule?t:{default:t}}(uE);function Cw(t){return Cw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cw(t)}var vw=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bw.default;return t.reduce((function(t,n){return"object"===Cw(t)&&null!==t.last&&(t.distance+=e(n,t.last)),t.last=n,t}),{last:null,distance:0}).distance};ww.default=vw;var Bw={};Object.defineProperty(Bw,"__esModule",{value:!0}),Bw.default=void 0;var _w=Qw(SI),xw=Qw(Mm),Sw=Qw(Om),kw=kI;function Qw(t){return t&&t.__esModule?t:{default:t}}var Mw=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;n=void 0===n||isNaN(n)?1:n;var r,o,i,s,a,c,u,l=(0,_w.default)(t),h=(0,xw.default)(t),f=(0,_w.default)(e),g=(0,xw.default)(e),A=6356752.314245,d=1/298.257223563,p=(0,Sw.default)(g-h),y=Math.atan((1-d)*Math.tan((0,Sw.default)(parseFloat(l)))),I=Math.atan((1-d)*Math.tan((0,Sw.default)(parseFloat(f)))),m=Math.sin(y),E=Math.cos(y),w=Math.sin(I),b=Math.cos(I),C=p,v=100;do{var B=Math.sin(C),_=Math.cos(C);if(0===(c=Math.sqrt(b*B*(b*B)+(E*w-m*b*_)*(E*w-m*b*_))))return 0;r=m*w+E*b*_,o=Math.atan2(c,r),a=r-2*m*w/(s=1-(i=E*b*B/c)*i),isNaN(a)&&(a=0);var x=d/16*s*(4+d*(4-3*s));u=C,C=p+(1-x)*d*i*(o+x*c*(a+x*r*(2*a*a-1)))}while(Math.abs(C-u)>1e-12&&--v>0);if(0===v)return NaN;var S=s*(kw.earthRadius*kw.earthRadius-A*A)/(A*A),k=1+S/16384*(4096+S*(S*(320-175*S)-768)),Q=S/1024*(256+S*(S*(74-47*S)-128)),M=Q*c*(a+Q/4*(r*(2*a*a-1)-Q/6*a*(4*c*c-3)*(4*a*a-3))),D=A*k*(o-M);return Math.round(D/n)*n};Bw.default=Mw;var Dw={};Object.defineProperty(Dw,"__esModule",{value:!0}),Dw.default=void 0;var Lw=function(t){return/^NNE|NE|NNW|N$/.test(t)?"N":/^ENE|E|ESE|SE$/.test(t)?"E":/^SSE|S|SSW|SW$/.test(t)?"S":/^WSW|W|WNW|NW$/.test(t)?"W":void 0};Dw.default=Lw;var Tw={};Object.defineProperty(Tw,"__esModule",{value:!0}),Tw.default=void 0;var $w=function(t){return t&&t.__esModule?t:{default:t}}(uE);var Uw=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$w.default,r=n(t,e),o=Number(e.time)-Number(t.time),i=r/o*1e3;return i};Tw.default=Uw;var Ow={};Object.defineProperty(Ow,"__esModule",{value:!0}),Ow.default=void 0;var Fw=function(t){return t&&t.__esModule?t:{default:t}}(uE);var Nw=function(t,e,n){return(0,Fw.default)(e,t)+(0,Fw.default)(t,n)===(0,Fw.default)(e,n)};Ow.default=Nw;var Pw={};Object.defineProperty(Pw,"__esModule",{value:!0}),Pw.default=void 0;var Yw=Rw(SI),Kw=Rw(Mm);function Rw(t){return t&&t.__esModule?t:{default:t}}var jw=function(t,e){for(var n=!1,r=e.length,o=-1,i=r-1;++o<r;i=o)((0,Kw.default)(e[o])<=(0,Kw.default)(t)&&(0,Kw.default)(t)<(0,Kw.default)(e[i])||(0,Kw.default)(e[i])<=(0,Kw.default)(t)&&(0,Kw.default)(t)<(0,Kw.default)(e[o]))&&(0,Yw.default)(t)<((0,Yw.default)(e[i])-(0,Yw.default)(e[o]))*((0,Kw.default)(t)-(0,Kw.default)(e[o]))/((0,Kw.default)(e[i])-(0,Kw.default)(e[o]))+(0,Yw.default)(e[o])&&(n=!n);return n};Pw.default=jw;var Hw={};Object.defineProperty(Hw,"__esModule",{value:!0}),Hw.default=void 0;var Vw=function(t){return t&&t.__esModule?t:{default:t}}(uw);var Gw=function(t,e,n,r){return(0,Vw.default)(t,e,n)<r};Hw.default=Gw;var qw={};Object.defineProperty(qw,"__esModule",{value:!0}),qw.default=void 0;var zw=function(t){return t&&t.__esModule?t:{default:t}}(uE);var Jw=function(t,e,n){return(0,zw.default)(t,e)<n};qw.default=Jw;var Ww={};function Xw(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Zw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zw(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zw(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Object.defineProperty(Ww,"__esModule",{value:!0}),Ww.default=void 0;var tb=function(t){if(!t.startsWith("POLYGON"))throw new Error("Invalid wkt.");return t.slice(t.indexOf("(")+2,t.indexOf(")")).split(", ").map((function(t){var e=Xw(t.split(" "),2),n=e[0],r=e[1];return{longitude:parseFloat(n),latitude:parseFloat(r)}}))};function eb(t){let e,n;return{c(){e=sp("img"),gp(e,"class","bimg"),gp(e,"style",t[1]),Vd(e.src,n=Uy(t[0]))||gp(e,"src",n)},m(t,n){rp(t,e,n)},p(t,[r]){1&r&&!Vd(e.src,n=Uy(t[0]))&&gp(e,"src",n)},i:Fd,o:Fd,d(t){t&&op(e)}}}function nb(t,e,n){let{src:r=null}=e,{size:o=null}=e;const i=o?`width: ${o}; height: ${o}`:"";return t.$$set=t=>{"src"in t&&n(0,r=t.src),"size"in t&&n(2,o=t.size)},[r,i,o]}Ww.default=tb,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e={computeDestinationPoint:!0,convertArea:!0,convertDistance:!0,convertSpeed:!0,decimalToSexagesimal:!0,findNearest:!0,getAreaOfPolygon:!0,getBounds:!0,getBoundsOfDistance:!0,getCenter:!0,getCenterOfBounds:!0,getCompassDirection:!0,getCoordinateKey:!0,getCoordinateKeys:!0,getDistance:!0,getDistanceFromLine:!0,getGreatCircleBearing:!0,getLatitude:!0,getLongitude:!0,getPathLength:!0,getPreciseDistance:!0,getRhumbLineBearing:!0,getRoughCompassDirection:!0,getSpeed:!0,isDecimal:!0,isPointInLine:!0,isPointInPolygon:!0,isPointNearLine:!0,isPointWithinRadius:!0,isSexagesimal:!0,isValidCoordinate:!0,isValidLatitude:!0,isValidLongitude:!0,orderByDistance:!0,sexagesimalToDecimal:!0,toDecimal:!0,toRad:!0,toDeg:!0,wktToPolygon:!0};Object.defineProperty(t,"computeDestinationPoint",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"convertArea",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"convertDistance",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"convertSpeed",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"decimalToSexagesimal",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"findNearest",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"getAreaOfPolygon",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"getBounds",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"getBoundsOfDistance",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"getCenter",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"getCenterOfBounds",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"getCompassDirection",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"getCoordinateKey",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(t,"getCoordinateKeys",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"getDistance",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"getDistanceFromLine",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"getGreatCircleBearing",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(t,"getLatitude",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"getLongitude",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(t,"getPathLength",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(t,"getPreciseDistance",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"getRhumbLineBearing",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(t,"getRoughCompassDirection",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"getSpeed",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(t,"isDecimal",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(t,"isPointInLine",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(t,"isPointInPolygon",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(t,"isPointNearLine",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(t,"isPointWithinRadius",{enumerable:!0,get:function(){return Q.default}}),Object.defineProperty(t,"isSexagesimal",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(t,"isValidCoordinate",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(t,"isValidLatitude",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(t,"isValidLongitude",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(t,"orderByDistance",{enumerable:!0,get:function(){return $.default}}),Object.defineProperty(t,"sexagesimalToDecimal",{enumerable:!0,get:function(){return U.default}}),Object.defineProperty(t,"toDecimal",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(t,"toRad",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(t,"toDeg",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(t,"wktToPolygon",{enumerable:!0,get:function(){return P.default}});var n=K(xI),r=K(qm),o=K(Wm),i=K(tE),s=K(rE),a=K(aE),c=K(CE),u=K(QE),l=K($E),h=K(RE),f=K(JE),g=K(ZE),A=K(MI),d=K(RI),p=K(uE),y=K(uw),I=K(Aw),m=K(SI),E=K(Mm),w=K(ww),b=K(Bw),C=K(tw),v=K(Dw),B=K(Tw),_=K(TI),x=K(Ow),S=K(Pw),k=K(Hw),Q=K(qw),M=K(UI),D=K(KI),L=K(WI),T=K(om),$=K(cE),U=K(NI),O=K(LI),F=K(Om),N=K(Nm),P=K(Ww),Y=kI;function K(t){return t&&t.__esModule?t:{default:t}}Object.keys(Y).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(e,n)||Object.defineProperty(t,n,{enumerable:!0,get:function(){return Y[n]}}))}))}(_I);class rb extends Xp{constructor(t){super(),Wp(this,t,nb,eb,Rd,{src:0,size:2})}}const ob=t=>({}),ib=t=>({});function sb(t,e,n){const r=t.slice();return r[5]=e[n],r}function ab(t){let e,n=Py[t[5].id].image+"";return{c(){e=cp(n)},m(t,n){rp(t,e,n)},p(t,r){1&r&&n!==(n=Py[t[5].id].image+"")&&dp(e,n)},d(t){t&&op(e)}}}function cb(t){let e,n,r;return{c(){e=cp("Distance "),n=cp(t[1]),r=cp("Km")},m(t,o){rp(t,e,o),rp(t,n,o),rp(t,r,o)},p(t,e){2&e&&dp(n,t[1])},d(t){t&&op(e),t&&op(n),t&&op(r)}}}function ub(t){let e,n,r,o,i,s,a,c,u,l,h,f,g,A,d,p,y,I,m=t[0].score+"",E=t[0].name+"",w=t[0].inventory,b=[];for(let e=0;e<w.length;e+=1)b[e]=ab(sb(t,w,e));d=new rb({props:{src:t[0].picture}});const C=t[4].genderloc,v=zd(C,t,t[3],ib),B=v||function(t){let e,n=null!==t[1]&&cb(t);return{c(){n&&n.c(),e=lp()},m(t,r){n&&n.m(t,r),rp(t,e,r)},p(t,r){null!==t[1]?n?n.p(t,r):(n=cb(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&op(e)}}}(t),_=t[4].default,x=zd(_,t,t[3],null);return{c(){e=sp("article"),n=sp("legend"),r=sp("overlay"),o=sp("h3"),i=sp("dot"),i.textContent=" ",s=cp(m),a=up(),c=sp("div"),u=sp("h2"),l=cp(E),h=up(),f=sp("div"),g=sp("h2");for(let t=0;t<b.length;t+=1)b[t].c();A=up(),Gp(d.$$.fragment),p=up(),B&&B.c(),y=up(),x&&x.c(),gp(i,"class","vibing"),yp(o,"grid-area","nw"),yp(c,"grid-area","sw"),yp(c,"align-self","end"),yp(f,"grid-area","se"),yp(f,"align-self","end"),yp(f,"justify-self","end"),gp(f,"class","end"),gp(e,"class","peer")},m(t,m){rp(t,e,m),np(e,n),np(n,r),np(r,o),np(o,i),np(o,s),np(r,a),np(r,c),np(c,u),np(u,l),np(r,h),np(r,f),np(f,g);for(let t=0;t<b.length;t+=1)b[t].m(g,null);np(n,A),qp(d,n,null),np(e,p),B&&B.m(e,null),np(e,y),x&&x.m(e,null),I=!0},p(t,[e]){if((!I||1&e)&&m!==(m=t[0].score+"")&&dp(s,m),(!I||1&e)&&E!==(E=t[0].name+"")&&dp(l,E),1&e){let n;for(w=t[0].inventory,n=0;n<w.length;n+=1){const r=sb(t,w,n);b[n]?b[n].p(r,e):(b[n]=ab(r),b[n].c(),b[n].m(g,null))}for(;n<b.length;n+=1)b[n].d(1);b.length=w.length}const n={};1&e&&(n.src=t[0].picture),d.$set(n),v?v.p&&(!I||8&e)&&Xd(v,C,t,t[3],I?Wd(C,t[3],e,ob):Zd(t[3]),ib):B&&B.p&&(!I||2&e)&&B.p(t,I?e:-1),x&&x.p&&(!I||8&e)&&Xd(x,_,t,t[3],I?Wd(_,t[3],e,null):Zd(t[3]),null)},i(t){I||(Yp(d.$$.fragment,t),Yp(B,t),Yp(x,t),I=!0)},o(t){Kp(d.$$.fragment,t),Kp(B,t),Kp(x,t),I=!1},d(t){t&&op(e),ip(b,t),zp(d),B&&B.d(t),x&&x.d(t)}}}function lb(t,e,n){let{$$slots:r={},$$scope:o}=e,{peer:i}=e,{size:s="normal"}=e,a=null;if(cy.pk){const t=hy(cy.pk),e=hy(i.pk);a=_I.getDistance(t,e,1e3)}return t.$$set=t=>{"peer"in t&&n(0,i=t.peer),"size"in t&&n(2,s=t.size),"$$scope"in t&&n(3,o=t.$$scope)},[i,a,s,o,r]}class hb extends Xp{constructor(t){super(),Wp(this,t,lb,ub,Rd,{peer:0,size:2})}}function fb(t,e,n){const r=t.slice();return r[16]=e[n],r}function gb(t){let e,n,r,o;return r=new BI({props:{expiresAt:t[1].vibe,format:"mm:ss"}}),{c(){e=sp("small"),n=cp("Vibe available in "),Gp(r.$$.fragment)},m(t,i){rp(t,e,i),np(e,n),qp(r,e,null),o=!0},p(t,e){const n={};2&e&&(n.expiresAt=t[1].vibe),r.$set(n)},i(t){o||(Yp(r.$$.fragment,t),o=!0)},o(t){Kp(r.$$.fragment,t),o=!1},d(t){t&&op(e),zp(r)}}}function Ab(t){let e;return{c(){e=sp("small"),e.textContent="Your 〰️🔫 is primed and loaded!"},m(t,n){rp(t,e,n)},p:Fd,i:Fd,o:Fd,d(t){t&&op(e)}}}function db(t){let e,n,r;return{c(){e=cp("Press the "),n=sp("strong"),n.textContent="START",r=cp(" button to play.")},m(t,o){rp(t,e,o),rp(t,n,o),rp(t,r,o)},p:Fd,i:Fd,o:Fd,d(t){t&&op(e),t&&op(n),t&&op(r)}}}function pb(t){let e,n,r,o,i;function s(){return t[13](t[16])}return n=new qy({props:{id:"gfx-vibe"}}),{c(){e=sp("b"),Gp(n.$$.fragment),gp(e,"role","button"),gp(e,"class","nofill")},m(t,a){rp(t,e,a),qp(n,e,null),r=!0,o||(i=hp(e,"click",s),o=!0)},p(e,n){t=e},i(t){r||(Yp(n.$$.fragment,t),r=!0)},o(t){Kp(n.$$.fragment,t),r=!1},d(t){t&&op(e),zp(n),o=!1,i()}}}function yb(t){let e,n,r,o;function i(...e){return t[12](t[16],...e)}return r=new BI({props:{expiresAt:t[4].find(i).expiresAt,format:"mm:ss"}}),{c(){e=sp("small"),e.textContent="Waiting",n=up(),Gp(r.$$.fragment)},m(t,i){rp(t,e,i),rp(t,n,i),qp(r,t,i),o=!0},p(e,n){t=e;const o={};20&n&&(o.expiresAt=t[4].find(i).expiresAt),r.$set(o)},i(t){o||(Yp(r.$$.fragment,t),o=!0)},o(t){Kp(r.$$.fragment,t),o=!1},d(t){t&&op(e),t&&op(n),zp(r,t)}}}function Ib(t){let e,n,r,o,i,s,a,c,u,l,h=t[16].tagline+"";function f(...e){return t[10](t[16],...e)}const g=[yb,pb],A=[];function d(t,e){return 20&e&&(s=null),null==s&&(s=!!t[4].find(f)),s?0:t[0].entered&&!t[1].vibe?1:-1}return~(a=d(t,-1))&&(c=A[a]=g[a](t)),{c(){e=sp("div"),n=sp("p"),r=cp(h),o=up(),i=sp("div"),c&&c.c(),u=up(),gp(n,"class","hpad"),gp(e,"class","flex row space-between")},m(t,s){rp(t,e,s),np(e,n),np(n,r),np(e,o),np(e,i),~a&&A[a].m(i,null),rp(t,u,s),l=!0},p(e,n){t=e,(!l||4&n)&&h!==(h=t[16].tagline+"")&&dp(r,h);let o=a;a=d(t,n),a===o?~a&&A[a].p(t,n):(c&&(Np(),Kp(A[o],1,1,(()=>{A[o]=null})),Pp()),~a?(c=A[a],c?c.p(t,n):(c=A[a]=g[a](t),c.c()),Yp(c,1),c.m(i,null)):c=null)},i(t){l||(Yp(c),l=!0)},o(t){Kp(c),l=!1},d(t){t&&op(e),~a&&A[a].d(),t&&op(u)}}}function mb(t){let e,n;return e=new hb({props:{peer:t[16],$$slots:{default:[Ib]},$$scope:{ctx:t}}}),{c(){Gp(e.$$.fragment)},m(t,r){qp(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.peer=t[16]),524311&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(Yp(e.$$.fragment,t),n=!0)},o(t){Kp(e.$$.fragment,t),n=!1},d(t){zp(e,t)}}}function Eb(t){let e,n;return e=new Hy({props:{open:!0,$$slots:{default:[wb]},$$scope:{ctx:t}}}),e.$on("fade",t[15]),{c(){Gp(e.$$.fragment)},m(t,r){qp(e,t,r),n=!0},p(t,n){const r={};524296&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(Yp(e.$$.fragment,t),n=!0)},o(t){Kp(e.$$.fragment,t),n=!1},d(t){zp(e,t)}}}function wb(t){let e,n,r,o,i,s,a,c,u,l,h,f,g,A,d,p,y,I,m;return{c(){e=sp("article"),n=sp("h6"),n.textContent="Genders",r=up(),o=sp("fieldset"),o.innerHTML='<label for="m"><input type="checkbox" id="m" name="m" role="switch"/>\n            M</label>',i=up(),s=sp("fieldset"),s.innerHTML='<label for="f"><input type="checkbox" id="f" name="f" role="switch"/>\n            F</label>',a=up(),c=sp("fieldset"),c.innerHTML='<label for="nb"><input type="checkbox" id="nb" name="nb" role="switch"/>\n            NB</label>',u=up(),l=sp("h6"),l.textContent="Distance",h=up(),f=sp("label"),f.innerHTML='GLOBAL\n          <input type="range" min="0" max="100" value="100" id="distance" name="distance"/>',g=up(),A=sp("footer"),d=sp("b"),d.textContent="reset",p=up(),y=sp("b"),y.textContent="filter",gp(f,"for","distance"),gp(d,"role","button"),gp(y,"role","button")},m(E,w){rp(E,e,w),np(e,n),np(e,r),np(e,o),np(e,i),np(e,s),np(e,a),np(e,c),np(e,u),np(e,l),np(e,h),np(e,f),np(e,g),np(e,A),np(A,d),np(A,p),np(A,y),I||(m=hp(y,"click",t[14]),I=!0)},p:Fd,d(t){t&&op(e),I=!1,m()}}}function bb(t){let e,n,r,o,i,s,a,c,u,l,h,f,g,A,d,p,y,I,m,E,w=t[2].length+"";const b=[db,Ab,gb],C=[];function v(t,e){return t[0].entered?t[1].vibe?2:1:0}s=v(t),a=C[s]=b[s](t);let B=t[2],_=[];for(let e=0;e<B.length;e+=1)_[e]=mb(fb(t,B,e));const x=t=>Kp(_[t],1,1,(()=>{_[t]=null}));let S=t[3]&&Eb(t);return{c(){e=sp("pub-view"),n=sp("h1"),n.textContent="🪩 Club Room",r=up(),o=sp("p"),o.innerHTML="This is the common room, see someone interesting?<br/>\n    Shoot!",i=up(),a.c(),c=up(),u=sp("div"),l=sp("h6"),h=cp("Patrons "),f=cp(w),g=up(),A=sp("b"),A.textContent="Filter",d=up(),p=sp("peers");for(let t=0;t<_.length;t+=1)_[t].c();y=up(),S&&S.c(),gp(n,"class","view-header svelte-5c56af"),gp(l,"class","nogap"),gp(A,"role","button"),gp(A,"class","outline hpad vgap"),gp(u,"class","row space-between xcenter"),gp(p,"class","row wrap space-between"),Ap(e,"class","block container")},m(a,w){rp(a,e,w),np(e,n),np(e,r),np(e,o),np(e,i),C[s].m(e,null),np(e,c),np(e,u),np(u,l),np(l,h),np(l,f),np(u,g),np(u,A),np(e,d),np(e,p);for(let t=0;t<_.length;t+=1)_[t].m(p,null);np(e,y),S&&S.m(e,null),I=!0,m||(E=hp(A,"click",t[11]),m=!0)},p(t,[n]){let r=s;if(s=v(t),s===r?C[s].p(t,n):(Np(),Kp(C[r],1,1,(()=>{C[r]=null})),Pp(),a=C[s],a?a.p(t,n):(a=C[s]=b[s](t),a.c()),Yp(a,1),a.m(e,c)),(!I||4&n)&&w!==(w=t[2].length+"")&&dp(f,w),535&n){let e;for(B=t[2],e=0;e<B.length;e+=1){const r=fb(t,B,e);_[e]?(_[e].p(r,n),Yp(_[e],1)):(_[e]=mb(r),_[e].c(),Yp(_[e],1),_[e].m(p,null))}for(Np(),e=B.length;e<_.length;e+=1)x(e);Pp()}t[3]?S?(S.p(t,n),8&n&&Yp(S,1)):(S=Eb(t),S.c(),Yp(S,1),S.m(e,null)):S&&(Np(),Kp(S,1,1,(()=>{S=null})),Pp())},i(t){if(!I){Yp(a);for(let t=0;t<B.length;t+=1)Yp(_[t]);Yp(S),I=!0}},o(t){Kp(a),_=_.filter(Boolean);for(let t=0;t<_.length;t+=1)Kp(_[t]);Kp(S),I=!1},d(t){t&&op(e),C[s].d(),ip(_,t),S&&S.d(),m=!1,E()}}}function Cb(t,e,n){let r,o,i,s,a;qd(t,Qy,(t=>n(0,r=t)));const c=iy(cy.$cooldowns());qd(t,c,(t=>n(1,o=t)));const u=iy(cy.$peers(),l);var l;qd(t,u,(t=>n(2,i=t)));const h=gy();qd(t,h,(t=>n(4,a=t)));const f=ey(!1);function g(t){cy.sendVibe(t).catch((t=>console.error("Failed sending vibe",t)))}qd(t,f,(t=>n(3,s=t))),r.swarming||Dy().catch(console.error.bind(null,"Auto-connect failed"));return[r,o,i,s,a,c,u,h,f,g,(t,e)=>e.peerId?.equals(t.pk),()=>ep(f,s=!0,s),(t,e)=>e.peerId?.equals(t.pk),t=>g(t.pk),()=>ep(f,s=!1,s),()=>ep(f,s=!1,s)]}class vb extends Xp{constructor(t){super(),Wp(this,t,Cb,bb,Rd,{})}}function Bb(t,e,n){return t>=e*n?{width:e*n,height:e}:{width:t,height:t/n}}function _b(t,e,n,r){return{x:xb(t.x,e.width,n.width,r),y:xb(t.y,e.height,n.height,r)}}function xb(t,e,n,r){const o=e*r/2-n/2;return Math.min(o,Math.max(t,-o))}function Sb(t,e){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}function kb(t,e,n=!1){const r=n?Math.round(e):e;return Math.min(t,Math.max(0,r))}function Qb(t,e){return e}function Mb(t,e){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}const{window:Db}=Hp;function Lb(t){let e;return{c(){e=sp("div"),gp(e,"class","cropperArea svelte-12kodkg"),yp(e,"width",t[7].width+"px"),yp(e,"height",t[7].height+"px"),gp(e,"data-testid","cropper"),Ip(e,"round","round"===t[3]),Ip(e,"grid",t[4])},m(t,n){rp(t,e,n)},p(t,n){128&n[0]&&yp(e,"width",t[7].width+"px"),128&n[0]&&yp(e,"height",t[7].height+"px"),8&n[0]&&Ip(e,"round","round"===t[3]),16&n[0]&&Ip(e,"grid",t[4])},d(t){t&&op(e)}}}function Tb(t){let e,n,r,o,i,s,a=t[7]&&Lb(t);return{c(){e=sp("div"),n=sp("img"),o=up(),a&&a.c(),gp(n,"class","image svelte-12kodkg"),Vd(n.src,r=t[2])||gp(n,"src",r),gp(n,"alt",""),yp(n,"transform","translate("+t[1].x+"px, "+t[1].y+"px) scale("+t[0]+")"),gp(n,"crossorigin",t[5]),gp(e,"class","container svelte-12kodkg"),gp(e,"data-testid","container")},m(r,c){rp(r,e,c),np(e,n),t[22](n),np(e,o),a&&a.m(e,null),t[23](e),i||(s=[hp(Db,"resize",t[10]),hp(n,"load",t[9]),hp(e,"mousedown",fp(t[11])),hp(e,"touchstart",fp(t[12])),hp(e,"wheel",fp(t[13])),hp(e,"gesturestart",fp(t[20])),hp(e,"gesturechange",fp(t[21]))],i=!0)},p(t,o){4&o[0]&&!Vd(n.src,r=t[2])&&gp(n,"src",r),3&o[0]&&yp(n,"transform","translate("+t[1].x+"px, "+t[1].y+"px) scale("+t[0]+")"),32&o[0]&&gp(n,"crossorigin",t[5]),t[7]?a?a.p(t,o):(a=Lb(t),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i:Fd,o:Fd,d(n){n&&op(e),t[22](null),a&&a.d(),t[23](null),i=!1,Yd(s)}}}function $b(t,e,n){let{image:r}=e,{crop:o={x:0,y:0}}=e,{zoom:i=1}=e,{aspect:s=4/3}=e,{minZoom:a=1}=e,{maxZoom:c=3}=e,{cropSize:u=null}=e,{cropShape:l="rect"}=e,{showGrid:h=!0}=e,{zoomSpeed:f=1}=e,{crossOrigin:g=null}=e,{restrictPosition:A=!0}=e,d=null,p={width:0,height:0,naturalWidth:0,naturalHeight:0},y=null,I=null,m=null,E={x:0,y:0},w={x:0,y:0},b=0,C=null,v=null;const B=Cp();var _;bp((()=>{m&&m.complete&&S()})),_=()=>{x()},wp().$$.on_destroy.push(_);const x=()=>{document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",U),document.removeEventListener("touchmove",L),document.removeEventListener("touchend",U)},S=()=>{k(),P()},k=()=>{m&&(p={width:m.width,height:m.height,naturalWidth:m.naturalWidth,naturalHeight:m.naturalHeight},n(7,d=u||Bb(m.width,m.height,s))),y&&(I=y.getBoundingClientRect())},Q=t=>({x:Number(t.clientX),y:Number(t.clientY)}),M=t=>({x:Number(t.clientX),y:Number(t.clientY)}),D=t=>$(Q(t)),L=t=>{t.preventDefault(),2===t.touches.length?F(t):1===t.touches.length&&$(M(t.touches[0]))},T=({x:t,y:e})=>{E={x:t,y:e},w={x:o.x,y:o.y}},$=({x:t,y:e})=>{C&&window.cancelAnimationFrame(C),C=window.requestAnimationFrame((()=>{if(void 0===t||void 0===e)return;const r=t-E.x,s=e-E.y,a={x:w.x+r,y:w.y+s};n(1,o=A?_b(a,p,d,i):a)}))},U=()=>{x(),P()},O=t=>{const e=M(t.touches[0]),n=M(t.touches[1]);b=Sb(e,n),T(Mb(e,n))},F=t=>{const e=M(t.touches[0]),n=M(t.touches[1]),r=Mb(e,n);$(r),v&&window.cancelAnimationFrame(v),v=window.requestAnimationFrame((()=>{const t=Sb(e,n);N(i*(t/b),r),b=t}))},N=(t,e)=>{const r=(({x:t,y:e})=>{if(!I)throw new Error("The Cropper is not mounted");return{x:I.width/2-(t-I.left),y:I.height/2-(e-I.top)}})(e),s=(({x:t,y:e})=>({x:(t+o.x)/i,y:(e+o.y)/i}))(r);n(0,i=Math.min(c,Math.max(t,a)));const u={x:s.x*i-r.x,y:s.y*i-r.y};n(1,o=A?_b(u,p,d,i):u)},P=()=>{if(!d||0===d.width)return;const t=A?_b(o,p,d,i):o,{croppedAreaPercentages:e,croppedAreaPixels:n}=function(t,e,n,r,o,i=!0){const s=i?kb:Qb,a={x:s(100,((e.width-n.width/o)/2-t.x/o)/e.width*100),y:s(100,((e.height-n.height/o)/2-t.y/o)/e.height*100),width:s(100,n.width/e.width*100/o),height:s(100,n.height/e.height*100/o)},c=s(e.naturalWidth,a.width*e.naturalWidth/100,!0),u=s(e.naturalHeight,a.height*e.naturalHeight/100,!0),l=e.naturalWidth>=e.naturalHeight*r?{width:Math.round(u*r),height:u}:{width:c,height:Math.round(c/r)};return{croppedAreaPercentages:a,croppedAreaPixels:{...l,x:s(e.naturalWidth-l.width,a.x*e.naturalWidth/100,!0),y:s(e.naturalHeight-l.height,a.y*e.naturalHeight/100,!0)}}}(t,p,d,u?u.width/u.height:s,i,A);B("cropcomplete",{percent:e,pixels:n})};return t.$$set=t=>{"image"in t&&n(2,r=t.image),"crop"in t&&n(1,o=t.crop),"zoom"in t&&n(0,i=t.zoom),"aspect"in t&&n(14,s=t.aspect),"minZoom"in t&&n(15,a=t.minZoom),"maxZoom"in t&&n(16,c=t.maxZoom),"cropSize"in t&&n(17,u=t.cropSize),"cropShape"in t&&n(3,l=t.cropShape),"showGrid"in t&&n(4,h=t.showGrid),"zoomSpeed"in t&&n(18,f=t.zoomSpeed),"crossOrigin"in t&&n(5,g=t.crossOrigin),"restrictPosition"in t&&n(19,A=t.restrictPosition)},t.$$.update=()=>{147520&t.$$.dirty[0]&&m&&n(7,d=u||Bb(m.width,m.height,s)),1&t.$$.dirty[0]&&i&&P()},[i,o,r,l,h,g,m,d,y,S,k,t=>{document.addEventListener("mousemove",D),document.addEventListener("mouseup",U),T(Q(t))},t=>{document.addEventListener("touchmove",L,{passive:!1}),document.addEventListener("touchend",U),2===t.touches.length?O(t):1===t.touches.length&&T(M(t.touches[0]))},t=>{const e=Q(t),n=i-t.deltaY*f/200;N(n,e)},s,a,c,u,f,A,function(e){vp.call(this,t,e)},function(e){vp.call(this,t,e)},function(t){_p[t?"unshift":"push"]((()=>{m=t,n(6,m)}))},function(t){_p[t?"unshift":"push"]((()=>{y=t,n(8,y)}))}]}class Ub extends Xp{constructor(t){super(),Wp(this,t,$b,Tb,Rd,{image:2,crop:1,zoom:0,aspect:14,minZoom:15,maxZoom:16,cropSize:17,cropShape:3,showGrid:4,zoomSpeed:18,crossOrigin:5,restrictPosition:19},null,[-1,-1])}}function Ob(t){let e,n,r,o;return{c(){e=sp("div"),n=sp("canvas"),r=up(),o=sp("img"),gp(n,"width","300"),gp(n,"height","300"),gp(e,"class","row center"),gp(o,"alt","preview"),gp(o,"id","preview"),yp(o,"display","none"),gp(o,"class","svelte-7zl4gf")},m(i,s){rp(i,e,s),np(e,n),t[12](n),rp(i,r,s),rp(i,o,s),t[13](o)},p:Fd,i:Fd,o:Fd,d(n){n&&op(e),t[12](null),n&&op(r),n&&op(o),t[13](null)}}}function Fb(t){let e,n,r,o,i,s;function a(e){t[10](e)}function c(e){t[11](e)}let u={image:t[6],aspect:1,showGrid:!1};return void 0!==t[4]&&(u.crop=t[4]),void 0!==t[5]&&(u.zoom=t[5]),r=new Ub({props:u}),_p.push((()=>Vp(r,"crop",a))),_p.push((()=>Vp(r,"zoom",c))),r.$on("cropcomplete",t[8]),{c(){e=sp("button"),e.textContent="done",n=up(),Gp(r.$$.fragment)},m(t,o){rp(t,e,o),rp(t,n,o),qp(r,t,o),s=!0},p(t,e){const n={};64&e&&(n.image=t[6]),!o&&16&e&&(o=!0,n.crop=t[4],Dp((()=>o=!1))),!i&&32&e&&(i=!0,n.zoom=t[5],Dp((()=>i=!1))),r.$set(n)},i(t){s||(Yp(r.$$.fragment,t),s=!0)},o(t){Kp(r.$$.fragment,t),s=!1},d(t){t&&op(e),t&&op(n),zp(r,t)}}}function Nb(t){let e,n,r,o,i,s,a,c;const u=[Fb,Ob],l=[];return o=1,i=l[1]=u[1](t),{c(){e=sp("image-loader"),n=sp("input"),r=up(),i.c(),gp(n,"type","file"),gp(n,"accept","image/*"),gp(n,"id","picture"),gp(n,"name","picture")},m(o,i){rp(o,e,i),np(e,n),np(e,r),l[1].m(e,null),s=!0,a||(c=hp(n,"change",t[9]),a=!0)},p(t,[e]){i.p(t,e)},i(t){s||(Yp(i),s=!0)},o(t){Kp(i),s=!1},d(t){t&&op(e),l[1].d(),a=!1,c()}}}function Pb(t,e,n){let o,i,s=Fd,a=()=>(s(),s=Gd(h,(t=>n(15,o=t))),h);t.$$.on_destroy.push((()=>s()));let c,u,l,{output:h}=e;a();const f=ey();let g;qd(t,f,(t=>n(6,i=t)));let A={x:0,y:0},d=1;async function p(t){return new Promise((e=>{n(3,l.onload=()=>{""!==l.src&&(u.drawImage(l,0,0,300,300),n(3,l.src="",l),e())},l),n(3,l.src=t,l)}))}async function y(t){let e;try{e=URL.createObjectURL(t),await p(e),URL.revokeObjectURL(e);const n=c.toDataURL("image/jpeg",.35),i=function(t){const e=/^data:([^;]+);base64,/,n=t.match(e);if("image/jpeg"!==n[1])throw new Error("CanvasExportedUnexpectedFiletype: "+n[1]);return r.Buffer.from(t.replace(e,""),"base64")}(n);console.info(`DataURL: ${n.length}, Binary: ${i.length}, compression: ${i.length/n.length}`),ep(h,o=i,o)}catch(t){throw t}}return bp((()=>{u=c.getContext("2d"),u.fillStyle="gray",u.fillRect(0,0,300,300);const t=h?.subscribe((t=>{if(console.info("Redrawing preview due to change",t?.length),t){p(Uy(o))}}));return()=>{t&&t()}})),t.$$set=t=>{"output"in t&&a(n(0,h=t.output))},t.$$.update=()=>{if(2&t.$$.dirty&&g){y(g[0]).catch(console.error.bind(null,"Preprocess failed"))}},[h,g,c,l,A,d,i,f,function(t){const{percent:e,pixels:n}=t.detail;console.info("CropComplete",e,n),console.info("Crop",A,"Zoom",d),ep(h,o=!1,o)},function(){g=this.files,n(1,g)},function(t){A=t,n(4,A)},function(t){d=t,n(5,d)},function(t){_p[t?"unshift":"push"]((()=>{c=t,n(2,c)}))},function(t){_p[t?"unshift":"push"]((()=>{l=t,n(3,l)}))}]}class Yb extends Xp{constructor(t){super(),Wp(this,t,Pb,Nb,Rd,{output:0})}}function Kb(t){let e,n,r,o=t[2]?.length+"";return{c(){e=sp("small"),n=cp(o),r=cp(" B"),gp(e,"class","block text-center")},m(t,o){rp(t,e,o),np(e,n),np(e,r)},p(t,e){4&e[0]&&o!==(o=t[2]?.length+"")&&dp(n,o)},d(t){t&&op(e)}}}function Rb(t){let e,n,r,o,i,s,a=t[35].message+"",c=t[35].stack+"";return{c(){e=sp("danger"),n=cp("Loading profile failed "),r=cp(a),o=up(),i=sp("pre"),s=cp(c)},m(t,a){rp(t,e,a),np(e,n),np(e,r),rp(t,o,a),rp(t,i,a),np(i,s)},p(t,e){1&e[0]&&a!==(a=t[35].message+"")&&dp(r,a),1&e[0]&&c!==(c=t[35].stack+"")&&dp(s,c)},d(t){t&&op(e),t&&op(o),t&&op(i)}}}function jb(t){let e,n,r,o,i;return{c(){e=sp("button"),n=cp("save"),e.disabled=r=!t[5]},m(r,s){rp(r,e,s),np(e,n),o||(i=hp(e,"click",t[25]),o=!0)},p(t,n){32&n[0]&&r!==(r=!t[5])&&(e.disabled=r)},d(t){t&&op(e),o=!1,i()}}}function Hb(t){let e;return{c(){e=cp("Loading...")},m(t,n){rp(t,e,n)},p:Fd,d(t){t&&op(e)}}}function Vb(t){let e,n;return e=new Hy({props:{open:!0,$$slots:{default:[qb]},$$scope:{ctx:t}}}),e.$on("fade",t[28]),{c(){Gp(e.$$.fragment)},m(t,r){qp(e,t,r),n=!0},p(t,n){const r={};130&n[0]|32&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(Yp(e.$$.fragment,t),n=!0)},o(t){Kp(e.$$.fragment,t),n=!1},d(t){zp(e,t)}}}function Gb(t){let e,n,r,o,i,s,a,c,u=["F","M","NB"][hy(t[1]).sex]+"",l=hy(t[1]).geohash+"";return{c(){e=sp("ul"),n=sp("li"),r=cp("Gender: "),o=cp(u),i=up(),s=sp("li"),a=cp("Location: "),c=cp(l)},m(t,u){rp(t,e,u),np(e,n),np(n,r),np(n,o),np(e,i),np(e,s),np(s,a),np(s,c)},p(t,e){2&e[0]&&u!==(u=["F","M","NB"][hy(t[1]).sex]+"")&&dp(o,u),2&e[0]&&l!==(l=hy(t[1]).geohash+"")&&dp(c,l)},d(t){t&&op(e)}}}function qb(t){let e,n,r,o,i,s,a,c,u,l,h,f,g,A,d,p,y,I,m,E,w=t[1]&&Gb(t);return a=new Zy({props:{data:t[13],size:6}}),{c(){e=sp("article"),n=sp("header"),n.innerHTML="<h5>IDSQR</h5>",r=up(),o=sp("div"),w&&w.c(),i=up(),s=sp("div"),Gp(a.$$.fragment),c=up(),u=sp("p"),u.innerHTML="This is your cryptographic identity.\n            <br/>\n            Let your friends scan your code\n            but keep the backed up image safe.",l=up(),h=sp("footer"),f=sp("div"),g=sp("b"),g.textContent="purge",A=up(),d=sp("b"),d.textContent="backup",p=up(),y=sp("b"),y.textContent="close",gp(s,"class","vpad"),gp(o,"class","column xcenter"),gp(g,"role","button"),gp(d,"role","button"),gp(y,"role","button"),gp(f,"class","row space-between")},m(b,C){rp(b,e,C),np(e,n),np(e,r),np(e,o),w&&w.m(o,null),np(o,i),np(o,s),qp(a,s,null),np(o,c),np(o,u),np(e,l),np(e,h),np(h,f),np(f,g),np(f,A),np(f,d),np(f,p),np(f,y),I=!0,m||(E=[hp(g,"click",t[26]),hp(d,"click",Fy),hp(y,"click",t[27])],m=!0)},p(t,e){t[1]?w?w.p(t,e):(w=Gb(t),w.c(),w.m(o,i)):w&&(w.d(1),w=null)},i(t){I||(Yp(a.$$.fragment,t),I=!0)},o(t){Kp(a.$$.fragment,t),I=!1},d(t){t&&op(e),w&&w.d(),zp(a),m=!1,Yd(E)}}}function zb(t){let e,n;return e=new Hy({props:{open:!0,$$slots:{default:[Jb]},$$scope:{ctx:t}}}),e.$on("fade",t[30]),{c(){Gp(e.$$.fragment)},m(t,r){qp(e,t,r),n=!0},p(t,n){const r={};320&n[0]|32&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(Yp(e.$$.fragment,t),n=!0)},o(t){Kp(e.$$.fragment,t),n=!1},d(t){zp(e,t)}}}function Jb(t){let e,n,r,o,i,s,a,c,u,l;return o=new hb({props:{peer:t[8]}}),{c(){e=sp("article"),n=sp("header"),n.innerHTML="<h5>Preview</h5>",r=up(),Gp(o.$$.fragment),i=up(),s=sp("footer"),a=sp("button"),a.textContent="close"},m(h,f){rp(h,e,f),np(e,n),np(e,r),qp(o,e,null),np(e,i),np(e,s),np(s,a),c=!0,u||(l=hp(a,"click",t[29]),u=!0)},p(t,e){const n={};256&e[0]&&(n.peer=t[8]),o.$set(n)},i(t){c||(Yp(o.$$.fragment,t),c=!0)},o(t){Kp(o.$$.fragment,t),c=!1},d(t){t&&op(e),zp(o),u=!1,l()}}}function Wb(t){let e,n,r,o,i,s,a,c,u,l,h,f,g,A,d,p,y,I,m,E,w,b,C,v,B,_,x,S,k,Q,M,D,L;a=new qy({props:{id:"icon-qr"}}),l=new qy({props:{id:"icon-info"}}),d=new Yb({props:{output:t[11]}});let T=t[2]?.length&&Kb(t),$={ctx:t,current:null,token:null,hasCatch:!0,pending:Hb,then:jb,catch:Rb,error:35};Rp(S=t[0],$);let U=t[7]&&Vb(t),O=t[6]&&zb(t);return{c(){e=sp("profile-view"),n=sp("div"),r=sp("h1"),r.textContent="🕶️ Profile",o=up(),i=sp("div"),s=sp("h2"),Gp(a.$$.fragment),c=up(),u=sp("h2"),Gp(l.$$.fragment),h=up(),f=sp("label"),g=sp("h5"),g.textContent="picture",A=up(),Gp(d.$$.fragment),p=up(),T&&T.c(),y=up(),I=sp("label"),m=sp("h5"),m.textContent="name",E=up(),w=sp("input"),b=up(),C=sp("label"),v=sp("h5"),v.textContent="spark",B=up(),_=sp("input"),x=up(),$.block.c(),k=up(),U&&U.c(),Q=up(),O&&O.c(),gp(i,"class","row"),gp(n,"class","row space-between xstart"),gp(f,"for","file"),gp(w,"type","text"),gp(w,"placeholder","You got a street name?"),gp(w,"id","name"),gp(w,"name","name"),gp(I,"for","name"),gp(_,"type","text"),gp(_,"placeholder","what's on your mind?"),gp(_,"id","tagline"),gp(_,"name","tagline"),gp(C,"for","tagline"),Ap(e,"class","block container")},m(S,F){rp(S,e,F),np(e,n),np(n,r),np(n,o),np(n,i),np(i,s),qp(a,s,null),np(i,c),np(i,u),qp(l,u,null),np(e,h),np(e,f),np(f,g),np(f,A),qp(d,f,null),np(f,p),T&&T.m(f,null),np(e,y),np(e,I),np(I,m),np(I,E),np(I,w),pp(w,t[4]),np(e,b),np(e,C),np(C,v),np(C,B),np(C,_),pp(_,t[3]),np(e,x),$.block.m(e,$.anchor=null),$.mount=()=>e,$.anchor=k,np(e,k),U&&U.m(e,null),np(e,Q),O&&O.m(e,null),M=!0,D||(L=[hp(r,"click",t[20]),hp(s,"click",t[21]),hp(u,"click",t[22]),hp(w,"input",t[23]),hp(_,"input",t[24])],D=!0)},p(n,r){(t=n)[2]?.length?T?T.p(t,r):(T=Kb(t),T.c(),T.m(f,null)):T&&(T.d(1),T=null),16&r[0]&&w.value!==t[4]&&pp(w,t[4]),8&r[0]&&_.value!==t[3]&&pp(_,t[3]),$.ctx=t,1&r[0]&&S!==(S=t[0])&&Rp(S,$)||jp($,t,r),t[7]?U?(U.p(t,r),128&r[0]&&Yp(U,1)):(U=Vb(t),U.c(),Yp(U,1),U.m(e,Q)):U&&(Np(),Kp(U,1,1,(()=>{U=null})),Pp()),t[6]?O?(O.p(t,r),64&r[0]&&Yp(O,1)):(O=zb(t),O.c(),Yp(O,1),O.m(e,null)):O&&(Np(),Kp(O,1,1,(()=>{O=null})),Pp())},i(t){M||(Yp(a.$$.fragment,t),Yp(l.$$.fragment,t),Yp(d.$$.fragment,t),Yp(U),Yp(O),M=!0)},o(t){Kp(a.$$.fragment,t),Kp(l.$$.fragment,t),Kp(d.$$.fragment,t),Kp(U),Kp(O),M=!1},d(t){t&&op(e),zp(a),zp(l),zp(d),T&&T.d(),$.block.d(),$.token=null,$=null,U&&U.d(),O&&O.d(),D=!1,Yd(L)}}}function Xb(t,e,r){let o,i,s,a,c,u,l,h,f,g;const A=ey();qd(t,A,(t=>r(4,u=t)));const d=ey();qd(t,d,(t=>r(3,c=t)));const p=ey();qd(t,p,(t=>r(2,a=t)));const y=ey();qd(t,y,(t=>r(31,o=t)));const I=ey();qd(t,I,(t=>r(1,s=t)));const m=ey();qd(t,m,(t=>r(32,i=t)));const E=ey(!1);qd(t,E,(t=>r(7,f=t)));const w=ey(!0);qd(t,w,(t=>r(5,l=t)));const b=fy(!0);qd(t,b,(t=>r(8,g=t)));const C=ey(!1);async function v(){await async function(t){await uy.writeProfile(t),_y(!0),t.picture&&Sy(t.picture),n.exports.get(Cy)&&!n.exports.get(wy)&&(await $y(),Xv("/pub"))}({name:u,tagline:c,age:99,sex:0,picture:a,geohash:o}),ep(w,l=!1,l)}qd(t,C,(t=>r(6,h=t)));let B=async function(){const t=await uy.readProfile();if(t){if(ep(A,u=t.name,u),ep(d,c=t.tagline,c),ep(p,a=t.picture,a),ep(m,i=await uy.readIdentity(),i),ep(I,s=i.slice(32),s),ep(y,o=t.geohash,o),!o)try{ep(y,o=await async function(){const t=await r(),{latitude:e,longitude:n}=t.coords;return nr.encode(e,n,6);function r(t){return new Promise(((e,n)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e,n,t):n(new Error("Browser does not support geolocation APIs"))}))}}(),o)}catch(t){console.log("BrowserLocation failed, let user set manually",t)}return t}}();return[B,s,a,c,u,l,h,f,g,A,d,p,y,I,m,E,w,b,C,v,()=>ep(C,h=!0,h),()=>ep(E,f=!0,f),()=>Xv("/about"),function(){u=this.value,A.set(u)},function(){c=this.value,d.set(c)},()=>r(0,B=v()),()=>Oy(!0),()=>ep(E,f=!1,f),()=>ep(E,f=!1,f),()=>ep(C,h=!1,h),()=>ep(C,h=!1,h)]}class Zb extends Xp{constructor(t){super(),Wp(this,t,Xb,Wb,Rd,{},null,[-1,-1])}}const tC="https://api.pico.pub";async function eC(t,e,n={}){const r=new window.Headers,o={"Content-Type":"pico/feed",...n?.headers||{}};for(const t in o)r.append(t,o[t]);const i=await fetch(t,{method:"POST",headers:r,body:e.buf.slice(0,e.tail)}),s=await i.json();if(!i.ok)throw s.error||console.error(s),new Error(`[${i.status}] ${s.error}`);return s}async function nC(t,e){const n=await async function(t,e={}){const n=new window.Headers,r={...e?.headers||{}};for(const t in r)n.append(t,r[t]);const o=await fetch(t,{method:"GET",headers:n}),i=o.headers.get("Content-Type");let s;if(/application\/json/.test(i)&&(s=await o.json()),!o.ok)throw new Error(`[${o.status}] ${s?.error||""}`);if(!s?.feed)throw new Error("Feed missing");return lu.from(s.feed)}(tC+"/v0/checkout/redeem/"+t);if(!(await cy.dispatch(n,!0)).length)throw new Error("Merge Failed");return"Enjoy!"}function rC(t,e,n){const r=t.slice();return r[51]=e[n],r}function oC(t,e,n){const r=t.slice();return r[51]=e[n],r}function iC(t,e,n){const r=t.slice();return r[56]=e[n],r}function sC(t){let e,n,r;return{c(){e=sp("a"),e.innerHTML="<div>Verify your profile to buy drinks</div>",gp(e,"class","row xcenter center")},m(o,i){rp(o,e,i),n||(r=hp(e,"click",t[34]),n=!0)},p:Fd,d(t){t&&op(e),n=!1,r()}}}function aC(t){let e,n,r,o,i,s,a,c,u,l,h,f,g,A,d,p,y,I,m,E,w,b,C,v,B=t[56].image+"",_=t[56].name+"",x=t[56].time+"",S=t[56].short+"",k=t[56].price/100+"",Q=t[56].mod&&function(t){let e,n,r=t[56].mod+"";return{c(){e=cp("| "),n=cp(r)},m(t,r){rp(t,e,r),rp(t,n,r)},p:Fd,d(t){t&&op(e),t&&op(n)}}}(t);function M(){return t[35](t[56])}return{c(){e=sp("item"),n=sp("iimage"),r=cp(B),o=up(),i=sp("description"),s=sp("h3"),a=cp(_),c=up(),u=sp("h6"),l=cp("¤ "),h=cp(x),f=up(),Q&&Q.c(),g=up(),A=sp("short"),d=cp(S),p=up(),y=sp("buy"),I=sp("button"),m=cp("€ "),E=cp(k),b=up(),gp(n,"class","svelte-13pgpvq"),gp(s,"class","svelte-13pgpvq"),gp(u,"class","svelte-13pgpvq"),gp(A,"class","svelte-13pgpvq"),gp(i,"class","column xstart grow2 space-between svelte-13pgpvq"),gp(I,"class","blue svelte-13pgpvq"),I.disabled=w=!t[6],gp(y,"class","column center"),gp(e,"class","drink row xcenter svelte-13pgpvq")},m(t,w){rp(t,e,w),np(e,n),np(n,r),np(e,o),np(e,i),np(i,s),np(s,a),np(i,c),np(i,u),np(u,l),np(u,h),np(u,f),Q&&Q.m(u,null),np(i,g),np(i,A),np(A,d),np(e,p),np(e,y),np(y,I),np(I,m),np(I,E),np(e,b),C||(v=hp(I,"click",M),C=!0)},p(e,n){(t=e)[56].mod&&Q.p(t,n),64&n[0]&&w!==(w=!t[6])&&(I.disabled=w)},d(t){t&&op(e),Q&&Q.d(),C=!1,v()}}}function cC(t){let e,n,r,o,i,s,a,c,u,l,h,f,g,A,d,p,y,I,m=t[51].image+"",E=t[51].name+"",w=t[51].short+"",b=Math.ceil(t[51].price/100)+"",C=t[51].mod&&function(t){let e,n=t[51].mod+"";return{c(){e=cp(n)},m(t,n){rp(t,e,n)},p:Fd,d(t){t&&op(e)}}}(t);return{c(){e=sp("item"),n=sp("iimage"),r=cp(m),o=up(),i=sp("description"),s=sp("h3"),a=cp(E),c=up(),u=sp("h6"),C&&C.c(),l=up(),h=sp("short"),f=cp(w),g=up(),A=sp("buy"),d=sp("button"),p=cp("¤ "),y=cp(b),I=up(),gp(n,"class","svelte-13pgpvq"),gp(s,"class","svelte-13pgpvq"),gp(u,"class","svelte-13pgpvq"),gp(h,"class","svelte-13pgpvq"),gp(i,"class","column xstart grow2 space-between svelte-13pgpvq"),gp(d,"class","svelte-13pgpvq"),gp(A,"class","column center"),gp(e,"class","item row xcenter svelte-13pgpvq")},m(t,m){rp(t,e,m),np(e,n),np(n,r),np(e,o),np(e,i),np(i,s),np(s,a),np(i,c),np(i,u),C&&C.m(u,null),np(i,l),np(i,h),np(h,f),np(e,g),np(e,A),np(A,d),np(d,p),np(d,y),np(e,I)},p(t,e){t[51].mod&&C.p(t,e)},d(t){t&&op(e),C&&C.d()}}}function uC(t){let e,n;return e=new Hy({props:{open:!0,$$slots:{default:[gC]},$$scope:{ctx:t}}}),e.$on("fade",t[39]),{c(){Gp(e.$$.fragment)},m(t,r){qp(e,t,r),n=!0},p(t,n){const r={};184&n[0]|268435456&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(Yp(e.$$.fragment,t),n=!0)},o(t){Kp(e.$$.fragment,t),n=!1},d(t){zp(e,t)}}}function lC(t){let e,n,r=t[49].message+"";return{c(){e=sp("error"),n=cp(r)},m(t,r){rp(t,e,r),np(e,n)},p(t,e){32&e[0]&&r!==(r=t[49].message+"")&&dp(n,r)},d(t){t&&op(e)}}}function hC(t){let e,n,r=t[48]+"";return{c(){e=sp("p"),n=cp(r)},m(t,r){rp(t,e,r),np(e,n)},p(t,e){32&e[0]&&r!==(r=t[48]+"")&&dp(n,r)},d(t){t&&op(e)}}}function fC(t){let e;return{c(){e=sp("p"),e.textContent="Requesting badge",gp(e,"aria-busy","true")},m(t,n){rp(t,e,n)},p:Fd,d(t){t&&op(e)}}}function gC(t){let e,n,r,o,i,s,a,c,u,l,h,f,g,A,d,p,y,I,m,E,w,b={ctx:t,current:null,token:null,hasCatch:!0,pending:fC,then:hC,catch:lC,value:48,error:49};return Rp(h=t[5],b),{c(){e=sp("article"),n=sp("header"),n.innerHTML="<h5>Verify Profile</h5>",r=up(),o=sp("label"),i=sp("h5"),i.textContent="email",s=up(),a=sp("input"),u=up(),l=sp("div"),b.block.c(),f=up(),g=sp("footer"),A=sp("div"),d=sp("b"),d.textContent="close",p=up(),y=sp("b"),I=cp("verify"),gp(a,"type","email"),gp(a,"placeholder","name@host.tld"),a.disabled=c=t[3]?"true":null,gp(o,"for","email"),gp(l,"class","row center xcenter"),gp(d,"role","button"),gp(y,"role","button"),gp(y,"disabled",m=t[3]?"true":null),gp(A,"class","row space-between")},m(c,h){rp(c,e,h),np(e,n),np(e,r),np(e,o),np(o,i),np(o,s),np(o,a),pp(a,t[4]),np(e,u),np(e,l),b.block.m(l,b.anchor=null),b.mount=()=>l,b.anchor=null,np(e,f),np(e,g),np(g,A),np(A,d),np(A,p),np(A,y),np(y,I),E||(w=[hp(a,"input",t[36]),hp(a,"keypress",t[37]),hp(d,"click",t[38]),hp(y,"click",t[19])],E=!0)},p(e,n){t=e,8&n[0]&&c!==(c=t[3]?"true":null)&&(a.disabled=c),16&n[0]&&a.value!==t[4]&&pp(a,t[4]),b.ctx=t,32&n[0]&&h!==(h=t[5])&&Rp(h,b)||jp(b,t,n),8&n[0]&&m!==(m=t[3]?"true":null)&&gp(y,"disabled",m)},d(t){t&&op(e),b.block.d(),b.token=null,b=null,E=!1,Yd(w)}}}function AC(t){let e,n;return e=new Hy({props:{open:!0,$$slots:{default:[wC]},$$scope:{ctx:t}}}),e.$on("fade",t[43]),{c(){Gp(e.$$.fragment)},m(t,r){qp(e,t,r),n=!0},p(t,n){const r={};774&n[0]|268435456&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(Yp(e.$$.fragment,t),n=!0)},o(t){Kp(e.$$.fragment,t),n=!1},d(t){zp(e,t)}}}function dC(t){let e;return{c(){e=sp("h3"),e.textContent="Your cart is empty"},m(t,n){rp(t,e,n)},d(t){t&&op(e)}}}function pC(t){let e,n,r,o,i,s,a,c,u,l,h,f,g,A,d,p,y,I,m,E,w=Py[t[51].id].image+"",b=Py[t[51].id].name+"",C=Py[t[51].id].short+"",v=t[51].qty+"";function B(){return t[40](t[51])}function _(){return t[41](t[51])}return{c(){e=sp("item"),n=sp("iimage"),r=cp(w),o=up(),i=sp("description"),s=sp("h3"),a=cp(b),c=up(),u=sp("short"),l=cp(C),h=up(),f=sp("buy"),g=sp("b"),g.textContent="-",A=up(),d=sp("h3"),p=cp(v),y=up(),I=sp("b"),I.textContent="+",gp(n,"class","svelte-13pgpvq"),gp(s,"class","svelte-13pgpvq"),gp(u,"class","svelte-13pgpvq"),gp(i,"class","column xstart grow2 space-between svelte-13pgpvq"),gp(g,"role","button"),gp(g,"class","blue"),gp(d,"class","nogap nopad hpad svelte-13pgpvq"),gp(I,"role","button"),gp(I,"class","blue"),gp(f,"class","row center xcenter"),gp(e,"class","item row xcenter svelte-13pgpvq")},m(t,w){rp(t,e,w),np(e,n),np(n,r),np(e,o),np(e,i),np(i,s),np(s,a),np(i,c),np(i,u),np(u,l),np(e,h),np(e,f),np(f,g),np(f,A),np(f,d),np(d,p),np(f,y),np(f,I),m||(E=[hp(g,"click",B),hp(I,"click",_)],m=!0)},p(e,n){t=e,2&n[0]&&w!==(w=Py[t[51].id].image+"")&&dp(r,w),2&n[0]&&b!==(b=Py[t[51].id].name+"")&&dp(a,b),2&n[0]&&C!==(C=Py[t[51].id].short+"")&&dp(l,C),2&n[0]&&v!==(v=t[51].qty+"")&&dp(p,v)},d(t){t&&op(e),m=!1,Yd(E)}}}function yC(t){let e,n,r=t[49].message+"";return{c(){e=sp("p"),n=cp(r),gp(e,"class","error text-center")},m(t,r){rp(t,e,r),np(e,n)},p(t,e){4&e[0]&&r!==(r=t[49].message+"")&&dp(n,r)},d(t){t&&op(e)}}}function IC(t){let e,n=t[50]?.length&&mC(t);return{c(){n&&n.c(),e=lp()},m(t,r){n&&n.m(t,r),rp(t,e,r)},p(t,r){t[50]?.length?n?n.p(t,r):(n=mC(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&op(e)}}}function mC(t){let e,n,r,o;return{c(){e=sp("h3"),n=sp("a"),r=cp("Proceed to checkout"),gp(n,"href",o=t[50]),gp(e,"class","nogap text-center")},m(t,o){rp(t,e,o),np(e,n),np(n,r)},p(t,e){4&e[0]&&o!==(o=t[50])&&gp(n,"href",o)},d(t){t&&op(e)}}}function EC(t){let e;return{c(){e=sp("h2"),e.textContent="Loading...",gp(e,"aria-busy","true"),gp(e,"class","nogap text-center")},m(t,n){rp(t,e,n)},p:Fd,d(t){t&&op(e)}}}function wC(t){let e,n,r,o,i,s,a,c,u,l,h,f,g,A,d,p,y,I,m,E,w,b=(t[9]/100).toFixed(2)+"",C=!t[1].length&&dC(),v=t[1],B=[];for(let e=0;e<v.length;e+=1)B[e]=pC(rC(t,v,e));let _={ctx:t,current:null,token:null,hasCatch:!0,pending:EC,then:IC,catch:yC,value:50,error:49};return Rp(l=t[2],_),{c(){e=sp("article"),n=sp("header"),n.innerHTML="<h5>Cart</h5>",r=up(),C&&C.c(),o=up();for(let t=0;t<B.length;t+=1)B[t].c();i=up(),s=sp("h3"),a=cp("Sum € "),c=cp(b),u=up(),_.block.c(),h=up(),f=sp("footer"),g=sp("button"),g.textContent="hide",A=up(),d=sp("div"),d.textContent=" ",p=up(),y=sp("button"),I=cp("checkout"),gp(s,"class","text-right"),gp(y,"class","green"),y.disabled=m=!t[1].length,gp(f,"class","flex row space-between xcenter")},m(l,m){rp(l,e,m),np(e,n),np(e,r),C&&C.m(e,null),np(e,o);for(let t=0;t<B.length;t+=1)B[t].m(e,null);np(e,i),np(e,s),np(s,a),np(s,c),np(e,u),_.block.m(e,_.anchor=null),_.mount=()=>e,_.anchor=h,np(e,h),np(e,f),np(f,g),np(f,A),np(f,d),np(f,p),np(f,y),np(y,I),E||(w=[hp(g,"click",t[42]),hp(y,"click",t[27])],E=!0)},p(n,r){if((t=n)[1].length?C&&(C.d(1),C=null):C||(C=dC(),C.c(),C.m(e,o)),50331650&r[0]){let n;for(v=t[1],n=0;n<v.length;n+=1){const o=rC(t,v,n);B[n]?B[n].p(o,r):(B[n]=pC(o),B[n].c(),B[n].m(e,i))}for(;n<B.length;n+=1)B[n].d(1);B.length=v.length}512&r[0]&&b!==(b=(t[9]/100).toFixed(2)+"")&&dp(c,b),_.ctx=t,4&r[0]&&l!==(l=t[2])&&Rp(l,_)||jp(_,t,r),2&r[0]&&m!==(m=!t[1].length)&&(y.disabled=m)},d(t){t&&op(e),C&&C.d(),ip(B,t),_.block.d(),_.token=null,_=null,E=!1,Yd(w)}}}function bC(t){let e,n;return e=new Hy({props:{open:!0,$$slots:{default:[kC]},$$scope:{ctx:t}}}),{c(){Gp(e.$$.fragment)},m(t,r){qp(e,t,r),n=!0},p(t,n){const r={};1&n[0]|268435456&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(Yp(e.$$.fragment,t),n=!0)},o(t){Kp(e.$$.fragment,t),n=!1},d(t){zp(e,t)}}}function CC(t){let e,n,r,o,i,s,a,c,u,l,h,f,g,A,d,p=t[49].message+"",y=window.location+"",I=t[49].message+"",m=t[49].stack+"";return{c(){e=sp("emo"),e.textContent="😥",n=up(),r=sp("error"),o=cp(p),i=up(),s=sp("p"),s.innerHTML="Something went wrong, please contact support\n            tony@decentlabs.se and include error report\n            below in the message<br/>\n            We&#39;re very sorry to be us right now.",a=up(),c=sp("pre"),u=cp(""),l=cp(y),h=cp("\n"),f=cp(I),g=cp("\n"),A=cp(m),d=cp("\n"),gp(e,"class","svelte-13pgpvq"),gp(c,"class","error-report vgap svelte-13pgpvq")},m(t,p){rp(t,e,p),rp(t,n,p),rp(t,r,p),np(r,o),rp(t,i,p),rp(t,s,p),rp(t,a,p),rp(t,c,p),np(c,u),np(c,l),np(c,h),np(c,f),np(c,g),np(c,A),np(c,d)},p(t,e){1&e[0]&&p!==(p=t[49].message+"")&&dp(o,p),1&e[0]&&I!==(I=t[49].message+"")&&dp(f,I),1&e[0]&&m!==(m=t[49].stack+"")&&dp(A,m)},d(t){t&&op(e),t&&op(n),t&&op(r),t&&op(i),t&&op(s),t&&op(a),t&&op(c)}}}function vC(t){let e,n,r,o,i=t[48]+"";return{c(){e=sp("emo"),e.textContent="🥂",n=up(),r=sp("p"),o=cp(i),gp(e,"class","svelte-13pgpvq")},m(t,i){rp(t,e,i),rp(t,n,i),rp(t,r,i),np(r,o)},p(t,e){1&e[0]&&i!==(i=t[48]+"")&&dp(o,i)},d(t){t&&op(e),t&&op(n),t&&op(r)}}}function BC(t){let e;return{c(){e=sp("emo"),e.textContent="📦",gp(e,"aria-busy","true"),gp(e,"class","svelte-13pgpvq")},m(t,n){rp(t,e,n)},p:Fd,d(t){t&&op(e)}}}function _C(t){let e,n,r;return{c(){e=sp("button"),e.textContent="Retry",gp(e,"class","red")},m(o,i){rp(o,e,i),n||(r=hp(e,"click",t[31]),n=!0)},p:Fd,d(t){t&&op(e),n=!1,r()}}}function xC(t){let e,n,r;return{c(){e=sp("button"),e.textContent="Ok",gp(e,"class","green")},m(o,i){rp(o,e,i),n||(r=hp(e,"click",t[44]),n=!0)},p:Fd,d(t){t&&op(e),n=!1,r()}}}function SC(t){let e;return{c(){e=sp("button"),e.textContent="Ok",gp(e,"class","green"),e.disabled="true"},m(t,n){rp(t,e,n)},p:Fd,d(t){t&&op(e)}}}function kC(t){let e,n,r,o,i,s,a,c,u={ctx:t,current:null,token:null,hasCatch:!0,pending:BC,then:vC,catch:CC,value:48,error:49};Rp(i=t[0],u);let l={ctx:t,current:null,token:null,hasCatch:!0,pending:SC,then:xC,catch:_C};return Rp(c=t[0],l),{c(){e=sp("article"),n=sp("header"),n.innerHTML="<h5>Redeeming order</h5>",r=up(),o=sp("div"),u.block.c(),s=up(),a=sp("footer"),l.block.c(),gp(o,"class","flex column xcenter"),gp(a,"class","flex row space-between xcenter")},m(t,i){rp(t,e,i),np(e,n),np(e,r),np(e,o),u.block.m(o,u.anchor=null),u.mount=()=>o,u.anchor=null,np(e,s),np(e,a),l.block.m(a,l.anchor=null),l.mount=()=>a,l.anchor=null},p(e,n){t=e,u.ctx=t,1&n[0]&&i!==(i=t[0])&&Rp(i,u)||jp(u,t,n),l.ctx=t,1&n[0]&&c!==(c=t[0])&&Rp(c,l)||jp(l,t,n)},d(t){t&&op(e),u.block.d(),u.token=null,u=null,l.block.d(),l.token=null,l=null}}}function QC(t){let e,n,r,o,i,s,a,c,u,l,h,f,g,A,d,p,y,I,m,E,w,b,C,v,B,_,x,S,k,Q,M,D,L,T,$,U,O,F,N,P,Y,K,R,j,H,V,G=Math.floor(Math.max(t[11].expiresAt-Date.now(),0)/1e3)+"",q=!t[6]&&sC(t),z=Ny.drinks,J=[];for(let e=0;e<z.length;e+=1)J[e]=aC(iC(t,z,e));let W=Ny.gear,X=[];for(let e=0;e<W.length;e+=1)X[e]=cC(oC(t,W,e));let Z=t[7]&&uC(t),tt=t[8]&&AC(t),et=t[10]&&bC(t);return{c(){e=sp("shop-view"),n=sp("splash"),n.innerHTML='<img src="/gfx/shop.jpg" alt="The Bar"/>',r=up(),o=sp("section"),i=sp("h1"),i.textContent="The Bartender",s=up(),a=sp("drinks"),c=sp("item"),u=sp("iimage"),u.textContent=`${t[15].image}`,l=up(),h=sp("description"),f=sp("h3"),f.textContent=`${t[15].name}`,g=up(),A=sp("h6"),A.textContent=`¤ ${t[15].time} | ONE TIME`,d=up(),p=sp("short"),p.textContent=`${t[15].short}`,y=up(),I=sp("buy"),m=sp("button"),E=cp("free"),w=up(),b=sp("h2"),b.textContent="Drinks",C=up(),q&&q.c(),v=up();for(let t=0;t<J.length;t+=1)J[t].c();B=up(),_=sp("h2"),_.textContent="Gear",x=up(),S=sp("gear");for(let t=0;t<X.length;t+=1)X[t].c();k=up(),Z&&Z.c(),Q=up(),tt&&tt.c(),M=up(),et&&et.c(),D=up(),L=sp("bar"),T=sp("div"),$=sp("button"),$.textContent="back",U=up(),O=sp("h3"),F=cp("¤ "),N=cp(G),P=up(),Y=sp("h3"),K=cp("🛒 "),R=cp(t[12]),gp(n,"class","column xcenter svelte-13pgpvq"),gp(i,"class","text-center"),gp(u,"class","svelte-13pgpvq"),gp(f,"class","svelte-13pgpvq"),gp(A,"class","svelte-13pgpvq"),gp(p,"class","svelte-13pgpvq"),gp(h,"class","column xstart grow2 space-between svelte-13pgpvq"),m.disabled=t[6],gp(m,"class","green svelte-13pgpvq"),gp(I,"class","column center"),gp(c,"class","drink row xcenter svelte-13pgpvq"),gp(b,"class","text-center nogap"),gp(a,"class","svelte-13pgpvq"),gp(_,"class","text-center nogap"),gp(S,"class","svelte-13pgpvq"),gp(o,"class","block container"),gp($,"class","round"),gp(T,"class","flex row center xcenter"),gp(O,"class","stat nopad nogap"),gp(Y,"class","nopad nogap"),gp(L,"class","flex row space-between xcenter"),Ap(e,"data-theme","dark")},m(G,z){rp(G,e,z),np(e,n),np(e,r),np(e,o),np(o,i),np(o,s),np(o,a),np(a,c),np(c,u),np(c,l),np(c,h),np(h,f),np(h,g),np(h,A),np(h,d),np(h,p),np(c,y),np(c,I),np(I,m),np(m,E),np(a,w),np(a,b),np(a,C),q&&q.m(a,null),np(a,v);for(let t=0;t<J.length;t+=1)J[t].m(a,null);np(o,B),np(o,_),np(o,x),np(o,S);for(let t=0;t<X.length;t+=1)X[t].m(S,null);np(e,k),Z&&Z.m(e,null),np(e,Q),tt&&tt.m(e,null),np(e,M),et&&et.m(e,null),np(e,D),np(e,L),np(L,T),np(T,$),np(L,U),np(L,O),np(O,F),np(O,N),np(L,P),np(L,Y),np(Y,K),np(Y,R),j=!0,H||(V=[hp(m,"click",t[33]),hp($,"click",t[45]),hp(Y,"click",t[46])],H=!0)},p(t,n){if((!j||64&n[0])&&(m.disabled=t[6]),t[6]?q&&(q.d(1),q=null):q?q.p(t,n):(q=sC(t),q.c(),q.m(a,v)),16777280&n[0]){let e;for(z=Ny.drinks,e=0;e<z.length;e+=1){const r=iC(t,z,e);J[e]?J[e].p(r,n):(J[e]=aC(r),J[e].c(),J[e].m(a,null))}for(;e<J.length;e+=1)J[e].d(1);J.length=z.length}if(0&n){let e;for(W=Ny.gear,e=0;e<W.length;e+=1){const r=oC(t,W,e);X[e]?X[e].p(r,n):(X[e]=cC(r),X[e].c(),X[e].m(S,null))}for(;e<X.length;e+=1)X[e].d(1);X.length=W.length}t[7]?Z?(Z.p(t,n),128&n[0]&&Yp(Z,1)):(Z=uC(t),Z.c(),Yp(Z,1),Z.m(e,Q)):Z&&(Np(),Kp(Z,1,1,(()=>{Z=null})),Pp()),t[8]?tt?(tt.p(t,n),256&n[0]&&Yp(tt,1)):(tt=AC(t),tt.c(),Yp(tt,1),tt.m(e,M)):tt&&(Np(),Kp(tt,1,1,(()=>{tt=null})),Pp()),t[10]?et?(et.p(t,n),1024&n[0]&&Yp(et,1)):(et=bC(t),et.c(),Yp(et,1),et.m(e,D)):et&&(Np(),Kp(et,1,1,(()=>{et=null})),Pp()),(!j||2048&n[0])&&G!==(G=Math.floor(Math.max(t[11].expiresAt-Date.now(),0)/1e3)+"")&&dp(N,G),(!j||4096&n[0])&&dp(R,t[12])},i(t){j||(Yp(Z),Yp(tt),Yp(et),j=!0)},o(t){Kp(Z),Kp(tt),Kp(et),j=!1},d(t){t&&op(e),q&&q.d(),ip(J,t),ip(X,t),Z&&Z.d(),tt&&tt.d(),et&&et.d(),H=!1,Yd(V)}}}function MC(t,e,r){let o,i,s,a,c,u,l,h,f,g,A,d,p,{q:y={}}=e;const I=fy();qd(t,I,(t=>r(11,d=t)));const m=ny(I,(t=>t?.hasBadge));qd(t,m,(t=>r(6,l=t)));const E=Py[53249],w=ey(!1);qd(t,w,(t=>r(7,h=t)));const b=ey("");qd(t,b,(t=>r(4,c=t)));const C=ey(!1);function v(){ep(C,a=!0,a),ep(B,u=async function(t){const e=await cy.feed();return(await eC(tC+"/v0/verify",e,{headers:{"X-Email-Address":t}})).message}(c).catch((t=>{throw ep(C,a=!1,a),t})),u)}qd(t,C,(t=>r(3,a=t)));let B=ey(Promise.resolve(""));qd(t,B,(t=>r(5,u=t)));const _=ey([]);qd(t,_,(t=>r(1,i=t)));const x=ny(_,(t=>t.reduce(((t,e)=>t+Py[e.id].price*e.qty),0)));qd(t,x,(t=>r(9,g=t)));const S=ny(_,(t=>t.reduce(((t,e)=>t+e.qty),0)));function k(t){const e=i.find((e=>e.id===t))?.qty||0;M(t,e+1)}function Q(t){const e=i.find((e=>e.id===t))?.qty||0;M(t,e-1)}function M(t,e=0){let n=i.find((e=>e.id===t));n||(n={id:t,qty:0},i.push(n)),n.qty=Math.max(e,0),_.set(i)}qd(t,S,(t=>r(12,p=t)));const D=ey(Promise.resolve());qd(t,D,(t=>r(2,s=t)));const L=ey(!1);qd(t,L,(t=>r(8,f=t)));const T=ey(y.redeem);qd(t,T,(t=>r(10,A=t)));const $=ey(Promise.resolve());function U(){y.redeem;const t=y.session;ep($,o=nC(t),o)}qd(t,$,(t=>r(0,o=t))),y.redeem&&U();return t.$$set=t=>{"q"in t&&r(32,y=t.q)},[o,i,s,a,c,u,l,h,f,g,A,d,p,I,m,E,w,b,C,v,B,_,x,S,k,Q,D,function(){ep(D,s=async function(t){if(console.log("checkout cart",t),"active"!==(await n.exports.until(cy.$profile(),(t=>"loading"!==t.state))).state)throw new Error("Feed busy");const e=await cy.feed(),r=await cy.seq()+1;t=t.map((t=>({id:t.id,q:t.qty}))),e.append(cy.constructor.encodeBlock("cart",r,{items:t}),cy._secret);const o=await eC(tC+"/v0/checkout",e);return window.location=o.url,o.url}(i),s)},L,T,$,U,y,()=>ep(w,h=!0,h),()=>ep(w,h=!0,h),t=>k(t.id),function(){c=this.value,b.set(c)},t=>13===t.charCode&&v(),()=>ep(w,h=!1,h),()=>ep(w,h=!1,h),t=>Q(t.id),t=>k(t.id),()=>ep(L,f=!1,f),()=>ep(L,f=!1,f),()=>Xv("/wallet"),()=>Xv("/"),()=>ep(L,f=!f,f)]}class DC extends Xp{constructor(t){super(),Wp(this,t,MC,QC,Rd,{q:32},null,[-1,-1])}}function LC(t){let e,n,r,o,i,s,a,c;return a=new rb({props:{src:t[0].peer.picture}}),{c(){e=sp("vibe"),n=ap("mask"),r=ap("tint"),i=up(),s=sp("portrait"),Gp(a.$$.fragment),gp(r,"style",o=`width: ${100*t[1]}px;`),gp(r,"class","svelte-ns996z"),gp(n,"class","svelte-ns996z"),gp(s,"class","svelte-ns996z"),gp(e,"class","svelte-ns996z")},m(t,o){rp(t,e,o),np(e,n),np(n,r),np(e,i),np(e,s),qp(a,s,null),c=!0},p(t,[e]){(!c||2&e&&o!==(o=`width: ${100*t[1]}px;`))&&gp(r,"style",o);const n={};1&e&&(n.src=t[0].peer.picture),a.$set(n)},i(t){c||(Yp(a.$$.fragment,t),c=!0)},o(t){Kp(a.$$.fragment,t),c=!1},d(t){t&&op(e),zp(a)}}}function TC(t,e,n){let r,{vibe:o}=e;const i=o.expiresAt-o.createdAt,s=ty(1,(t=>{const e=setInterval((()=>{const n=o.expiresAt-Date.now();n<=0?(t(0),clearInterval(e)):t(n/i)}),1e3);return()=>clearInterval(e)}));return qd(t,s,(t=>n(1,r=t))),t.$$set=t=>{"vibe"in t&&n(0,o=t.vibe)},[o,r,s]}class $C extends Xp{constructor(t){super(),Wp(this,t,TC,LC,Rd,{vibe:0})}}function UC(t,e,n){const r=t.slice();return r[12]=e[n],r}function OC(t,e,n){const r=t.slice();return r[15]=e[n],r}function FC(t,e,n){const r=t.slice();return r[18]=e[n],r}function NC(t){let e,n,r,o,i,s;function a(){return t[7](t[18])}return n=new $C({props:{vibe:t[18]}}),{c(){e=sp("div"),Gp(n.$$.fragment),r=up()},m(t,c){rp(t,e,c),qp(n,e,null),np(e,r),o=!0,i||(s=hp(e,"click",a),i=!0)},p(e,r){t=e;const o={};2&r&&(o.vibe=t[18]),n.$set(o)},i(t){o||(Yp(n.$$.fragment,t),o=!0)},o(t){Kp(n.$$.fragment,t),o=!1},d(t){t&&op(e),zp(n),i=!1,s()}}}function PC(t){let e,n,r="match"!==t[18].state&&NC(t);return{c(){r&&r.c(),e=lp()},m(t,o){r&&r.m(t,o),rp(t,e,o),n=!0},p(t,n){"match"!==t[18].state?r?(r.p(t,n),2&n&&Yp(r,1)):(r=NC(t),r.c(),Yp(r,1),r.m(e.parentNode,e)):r&&(Np(),Kp(r,1,1,(()=>{r=null})),Pp())},i(t){n||(Yp(r),n=!0)},o(t){Kp(r),n=!1},d(t){r&&r.d(t),t&&op(e)}}}function YC(t){let e,n;return e=new qy({props:{id:"heal_resp",tag:"empty"}}),{c(){Gp(e.$$.fragment)},m(t,r){qp(e,t,r),n=!0},i(t){n||(Yp(e.$$.fragment,t),n=!0)},o(t){Kp(e.$$.fragment,t),n=!1},d(t){zp(e,t)}}}function KC(t){let e,n;return e=new qy({props:{id:"heal_resp",tag:"full"}}),{c(){Gp(e.$$.fragment)},m(t,r){qp(e,t,r),n=!0},i(t){n||(Yp(e.$$.fragment,t),n=!0)},o(t){Kp(e.$$.fragment,t),n=!1},d(t){zp(e,t)}}}function RC(t){let e,n,r,o;const i=[KC,YC],s=[];function a(t,e){return t[15]<t[12].health?0:1}return e=a(t),n=s[e]=i[e](t),{c(){n.c(),r=lp()},m(t,n){s[e].m(t,n),rp(t,r,n),o=!0},p(t,o){let c=e;e=a(t),e!==c&&(Np(),Kp(s[c],1,1,(()=>{s[c]=null})),Pp(),n=s[e],n||(n=s[e]=i[e](t),n.c()),Yp(n,1),n.m(r.parentNode,r))},i(t){o||(Yp(n),o=!0)},o(t){Kp(n),o=!1},d(t){s[e].d(t),t&&op(r)}}}function jC(t){let e,n,r,o,i,s,a,c,u,l,h,f,g,A,d,p,y,I,m,E,w=t[12].peer.name+"",b=t[12].myTurn?"your turn":"waiting";r=new rb({props:{src:t[12].peer.picture,size:"80px"}});let C=[0,1,2],v=[];for(let e=0;e<3;e+=1)v[e]=RC(OC(t,C,e));const B=t=>Kp(v[t],1,1,(()=>{v[t]=null}));function _(){return t[8](t[12])}return p=new BI({props:{expiresAt:t[12].expiresAt,format:"mm:ss"}}),{c(){e=sp("div"),n=sp("div"),Gp(r.$$.fragment),o=up(),i=sp("div"),s=sp("h3"),a=cp(w),c=up(),u=sp("h6"),l=cp(b),h=up(),f=sp("div"),g=sp("health");for(let t=0;t<3;t+=1)v[t].c();A=up(),d=sp("h3"),Gp(p.$$.fragment),y=up(),gp(s,"class","no-margin"),gp(u,"class","no-margin"),gp(i,"class","columns space-between gap"),gp(n,"class","row xcenter"),gp(d,"class","no-margin"),gp(f,"class","columns xcenter gap"),gp(e,"class","row space-between")},m(t,w){rp(t,e,w),np(e,n),qp(r,n,null),np(n,o),np(n,i),np(i,s),np(s,a),np(i,c),np(i,u),np(u,l),np(e,h),np(e,f),np(f,g);for(let t=0;t<3;t+=1)v[t].m(g,null);np(f,A),np(f,d),qp(p,d,null),np(e,y),I=!0,m||(E=hp(e,"click",_),m=!0)},p(e,n){t=e;const o={};if(4&n&&(o.src=t[12].peer.picture),r.$set(o),(!I||4&n)&&w!==(w=t[12].peer.name+"")&&dp(a,w),(!I||4&n)&&b!==(b=t[12].myTurn?"your turn":"waiting")&&dp(l,b),4&n){let e;for(C=[0,1,2],e=0;e<3;e+=1){const r=OC(t,C,e);v[e]?(v[e].p(r,n),Yp(v[e],1)):(v[e]=RC(r),v[e].c(),Yp(v[e],1),v[e].m(g,null))}for(Np(),e=3;e<3;e+=1)B(e);Pp()}const i={};4&n&&(i.expiresAt=t[12].expiresAt),p.$set(i)},i(t){if(!I){Yp(r.$$.fragment,t);for(let t=0;t<3;t+=1)Yp(v[t]);Yp(p.$$.fragment,t),I=!0}},o(t){Kp(r.$$.fragment,t),v=v.filter(Boolean);for(let t=0;t<3;t+=1)Kp(v[t]);Kp(p.$$.fragment,t),I=!1},d(t){t&&op(e),zp(r),ip(v,t),zp(p),m=!1,E()}}}function HC(t){let e,n;return e=new Hy({props:{open:!0,$$slots:{default:[zC]},$$scope:{ctx:t}}}),e.$on("fade",t[11]),{c(){Gp(e.$$.fragment)},m(t,r){qp(e,t,r),n=!0},p(t,n){const r={};2097153&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(Yp(e.$$.fragment,t),n=!0)},o(t){Kp(e.$$.fragment,t),n=!1},d(t){zp(e,t)}}}function VC(t){let e;return{c(){e=sp("div"),e.textContent="Waiting for player2",gp(e,"class","text-center")},m(t,n){rp(t,e,n)},p:Fd,d(t){t&&op(e)}}}function GC(t){let e,n,r,o,i,s;return{c(){e=sp("div"),n=sp("a"),n.textContent="reject",r=up(),o=sp("a"),o.textContent="accept",gp(n,"role","button"),gp(n,"class","reject svelte-wwtn89"),gp(o,"role","button"),gp(o,"class","accept svelte-wwtn89"),gp(e,"class","text-center")},m(a,c){rp(a,e,c),np(e,n),np(e,r),np(e,o),i||(s=[hp(n,"click",t[9]),hp(o,"click",t[10])],i=!0)},p:Fd,d(t){t&&op(e),i=!1,Yd(s)}}}function qC(t){let e,n,r,o,i,s,a,c,u,l,h,f=t[0].peer.tagline+"";function g(t,e){return t[0].initiator?VC:GC}a=new BI({props:{expiresAt:t[0].expiresAt,format:"mm:ss"}});let A=g(t),d=A(t);return{c(){e=sp("p"),n=cp(f),r=up(),o=sp("h6"),o.textContent="Vibe Expires in",i=up(),s=sp("h2"),Gp(a.$$.fragment),c=up(),d.c(),u=up(),l=sp("br"),gp(o,"class","text-center no-margin"),gp(s,"class","text-center timer svelte-wwtn89")},m(t,f){rp(t,e,f),np(e,n),rp(t,r,f),rp(t,o,f),rp(t,i,f),rp(t,s,f),qp(a,s,null),rp(t,c,f),d.m(t,f),rp(t,u,f),rp(t,l,f),h=!0},p(t,e){(!h||1&e)&&f!==(f=t[0].peer.tagline+"")&&dp(n,f);const r={};1&e&&(r.expiresAt=t[0].expiresAt),a.$set(r),A===(A=g(t))&&d?d.p(t,e):(d.d(1),d=A(t),d&&(d.c(),d.m(u.parentNode,u)))},i(t){h||(Yp(a.$$.fragment,t),h=!0)},o(t){Kp(a.$$.fragment,t),h=!1},d(t){t&&op(e),t&&op(r),t&&op(o),t&&op(i),t&&op(s),zp(a),t&&op(c),d.d(t),t&&op(u),t&&op(l)}}}function zC(t){let e,n;return e=new hb({props:{peer:t[0].peer,$$slots:{default:[qC]},$$scope:{ctx:t}}}),{c(){Gp(e.$$.fragment)},m(t,r){qp(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.peer=t[0].peer),2097153&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(Yp(e.$$.fragment,t),n=!0)},o(t){Kp(e.$$.fragment,t),n=!1},d(t){zp(e,t)}}}function JC(t){let e,n,r,o,i,s,a,c,u,l,h,f,g=t[1],A=[];for(let e=0;e<g.length;e+=1)A[e]=PC(FC(t,g,e));const d=t=>Kp(A[t],1,1,(()=>{A[t]=null}));let p=t[2],y=[];for(let e=0;e<p.length;e+=1)y[e]=jC(UC(t,p,e));const I=t=>Kp(y[t],1,1,(()=>{y[t]=null}));let m=t[0]&&HC(t);return{c(){e=sp("messages-view"),n=sp("h1"),n.textContent="💌 Messages",r=up(),o=sp("h5"),o.textContent="Vibes",i=up(),s=sp("vibes");for(let t=0;t<A.length;t+=1)A[t].c();a=up(),c=sp("h5"),c.textContent="Conversations",u=up(),l=sp("conversations");for(let t=0;t<y.length;t+=1)y[t].c();h=up(),m&&m.c(),gp(s,"class","row xcenter"),Ap(e,"class","block container")},m(t,g){rp(t,e,g),np(e,n),np(e,r),np(e,o),np(e,i),np(e,s);for(let t=0;t<A.length;t+=1)A[t].m(s,null);np(e,a),np(e,c),np(e,u),np(e,l);for(let t=0;t<y.length;t+=1)y[t].m(l,null);np(e,h),m&&m.m(e,null),f=!0},p(t,[n]){if(3&n){let e;for(g=t[1],e=0;e<g.length;e+=1){const r=FC(t,g,e);A[e]?(A[e].p(r,n),Yp(A[e],1)):(A[e]=PC(r),A[e].c(),Yp(A[e],1),A[e].m(s,null))}for(Np(),e=g.length;e<A.length;e+=1)d(e);Pp()}if(4&n){let e;for(p=t[2],e=0;e<p.length;e+=1){const r=UC(t,p,e);y[e]?(y[e].p(r,n),Yp(y[e],1)):(y[e]=jC(r),y[e].c(),Yp(y[e],1),y[e].m(l,null))}for(Np(),e=p.length;e<y.length;e+=1)I(e);Pp()}t[0]?m?(m.p(t,n),1&n&&Yp(m,1)):(m=HC(t),m.c(),Yp(m,1),m.m(e,null)):m&&(Np(),Kp(m,1,1,(()=>{m=null})),Pp())},i(t){if(!f){for(let t=0;t<g.length;t+=1)Yp(A[t]);for(let t=0;t<p.length;t+=1)Yp(y[t]);Yp(m),f=!0}},o(t){A=A.filter(Boolean);for(let t=0;t<A.length;t+=1)Kp(A[t]);y=y.filter(Boolean);for(let t=0;t<y.length;t+=1)Kp(y[t]);Kp(m),f=!1},d(t){t&&op(e),ip(A,t),ip(y,t),m&&m.d()}}}function WC(t,e,n){let r,o,i;const s=iy(cy.$chats());qd(t,s,(t=>n(2,i=t)));const a=gy();qd(t,a,(t=>n(1,o=t)));const c=ey(null);function u(t,e){cy.respondVibe(t,e).then((()=>{ep(c,r=null,r)})).catch((t=>console.error("Vibe response failed",t)))}qd(t,c,(t=>n(0,r=t)));return[r,o,i,s,a,c,u,t=>ep(c,r=t,r),t=>Xv("/chat/"+t.id.toString("hex")),()=>u(r.id,!0),()=>u(r.id),()=>ep(c,r=null,r)]}class XC extends Xp{constructor(t){super(),Wp(this,t,WC,JC,Rd,{})}}function ZC(t,e,n){const r=t.slice();return r[25]=e[n],r}function tv(t,e,n){const r=t.slice();return r[28]=e[n],r}function ev(t){let e;return{c(){e=sp("placeholder"),e.textContent=" ",gp(e,"aria-busy","true")},m(t,n){rp(t,e,n)},p:Fd,i:Fd,o:Fd,d(t){t&&op(e)}}}function nv(t){let e,n,r,o,i,s,a,c,u,l=t[0].peer.name+"";return n=new rb({props:{src:t[0].peer.picture,size:"70px"}}),{c(){e=sp("portrait"),Gp(n.$$.fragment),r=up(),o=sp("div"),i=sp("h1"),s=cp(l),a=up(),c=sp("div"),gp(e,"class","svelte-1secqat"),gp(i,"class","hgap svelte-1secqat"),gp(c,"class","hgap"),gp(o,"class","column")},m(t,l){rp(t,e,l),qp(n,e,null),rp(t,r,l),rp(t,o,l),np(o,i),np(i,s),np(o,a),np(o,c),u=!0},p(t,e){const r={};1&e&&(r.src=t[0].peer.picture),n.$set(r),(!u||1&e)&&l!==(l=t[0].peer.name+"")&&dp(s,l)},i(t){u||(Yp(n.$$.fragment,t),u=!0)},o(t){Kp(n.$$.fragment,t),u=!1},d(t){t&&op(e),zp(n),t&&op(r),t&&op(o)}}}function rv(t){let e,n;return e=new qy({props:{id:"heal_resp",tag:"empty"}}),{c(){Gp(e.$$.fragment)},m(t,r){qp(e,t,r),n=!0},i(t){n||(Yp(e.$$.fragment,t),n=!0)},o(t){Kp(e.$$.fragment,t),n=!1},d(t){zp(e,t)}}}function ov(t){let e,n;return e=new qy({props:{id:"heal_resp",tag:"full"}}),{c(){Gp(e.$$.fragment)},m(t,r){qp(e,t,r),n=!0},i(t){n||(Yp(e.$$.fragment,t),n=!0)},o(t){Kp(e.$$.fragment,t),n=!1},d(t){zp(e,t)}}}function iv(t){let e,n,r,o;const i=[ov,rv],s=[];function a(t,e){return t[28]?0:1}return e=a(t),n=s[e]=i[e](t),{c(){n.c(),r=lp()},m(t,n){s[e].m(t,n),rp(t,r,n),o=!0},p(t,o){let c=e;e=a(t),e!==c&&(Np(),Kp(s[c],1,1,(()=>{s[c]=null})),Pp(),n=s[e],n||(n=s[e]=i[e](t),n.c()),Yp(n,1),n.m(r.parentNode,r))},i(t){o||(Yp(n),o=!0)},o(t){Kp(n),o=!1},d(t){s[e].d(t),t&&op(r)}}}function sv(t){let e,n,r=t[25].content+"";return{c(){e=sp("txt"),n=cp(r),gp(e,"class","svelte-1secqat")},m(t,r){rp(t,e,r),np(e,n)},p(t,e){1&e&&r!==(r=t[25].content+"")&&dp(n,r)},d(t){t&&op(e)}}}function av(t){let e;function n(t,e){return t[0].initiator&&"sent"===t[25].type||!t[0].initiator&&"received"===t[25].type?uv:cv}let r=n(t),o=r(t);return{c(){e=sp("sym"),o.c(),gp(e,"class","hgap svelte-1secqat")},m(t,n){rp(t,e,n),o.m(e,null)},p(t,i){r!==(r=n(t))&&(o.d(1),o=r(t),o&&(o.c(),o.m(e,null)))},d(t){t&&op(e),o.d()}}}function cv(t){let e;return{c(){e=cp("ᚧ")},m(t,n){rp(t,e,n)},d(t){t&&op(e)}}}function uv(t){let e;return{c(){e=cp("ᚦ")},m(t,n){rp(t,e,n)},d(t){t&&op(e)}}}function lv(t){let e;function n(t,e){return t[25].pass?av:sv}let r=n(t),o=r(t);return{c(){e=sp("msg"),o.c(),gp(e,"class","row xcenter svelte-1secqat"),Ip(e,"start","received"===t[25].type),Ip(e,"remote","received"===t[25].type),Ip(e,"local","sent"===t[25].type),Ip(e,"end","sent"===t[25].type)},m(t,n){rp(t,e,n),o.m(e,null)},p(t,i){r===(r=n(t))&&o?o.p(t,i):(o.d(1),o=r(t),o&&(o.c(),o.m(e,null))),1&i&&Ip(e,"start","received"===t[25].type),1&i&&Ip(e,"remote","received"===t[25].type),1&i&&Ip(e,"local","sent"===t[25].type),1&i&&Ip(e,"end","sent"===t[25].type)},d(t){t&&op(e),o.d()}}}function hv(t){let e,n,r,o,i,s=t[6][0]+"",a=t[6][1]+"";return{c(){e=sp("white"),n=cp(s),r=up(),o=sp("black"),i=cp(a)},m(t,s){rp(t,e,s),np(e,n),rp(t,r,s),rp(t,o,s),np(o,i)},p(t,e){64&e&&s!==(s=t[6][0]+"")&&dp(n,s),64&e&&a!==(a=t[6][1]+"")&&dp(i,a)},d(t){t&&op(e),t&&op(r),t&&op(o)}}}function fv(t){let e,n,r,o,i,s=t[6][1]+"",a=t[6][0]+"";return{c(){e=sp("black"),n=cp(s),r=up(),o=sp("white"),i=cp(a)},m(t,s){rp(t,e,s),np(e,n),rp(t,r,s),rp(t,o,s),np(o,i)},p(t,e){64&e&&s!==(s=t[6][1]+"")&&dp(n,s),64&e&&a!==(a=t[6][0]+"")&&dp(i,a)},d(t){t&&op(e),t&&op(r),t&&op(o)}}}function gv(t){let e,n,r=t[0].state+"";return{c(){e=sp("h2"),n=cp(r),gp(e,"class","text-center nogap svelte-1secqat")},m(t,r){rp(t,e,r),np(e,n)},p(t,e){1&e&&r!==(r=t[0].state+"")&&dp(n,r)},d(t){t&&op(e)}}}function Av(t){let e;return{c(){e=sp("h2"),e.textContent="Conversion ended",gp(e,"class","text-center nogap svelte-1secqat")},m(t,n){rp(t,e,n)},p:Fd,d(t){t&&op(e)}}}function dv(t){let e,n,r,o,i,s,a,c,u,l,h,f,g,A=t[7][0].join("/")+"",d=t[7][1].join("/")+"",p=t[7][2].join("/")+"";function y(t,e){return t[0].myTurn?yv:pv}let I=y(t),m=I(t);function E(t,e){return t[3]?Iv:mv}let w=E(t),b=w(t);return{c(){e=sp("h2"),m.c(),n=up(),r=sp("div"),b.c(),o=up(),i=sp("div"),s=sp("samp"),a=cp(A),c=up(),u=sp("samp"),l=cp(d),h=up(),f=sp("samp"),g=cp(p),gp(e,"class","text-center nogap svelte-1secqat"),gp(r,"class","row space-between"),gp(i,"class","row space-between")},m(t,A){rp(t,e,A),m.m(e,null),rp(t,n,A),rp(t,r,A),b.m(r,null),rp(t,o,A),rp(t,i,A),np(i,s),np(s,a),np(i,c),np(i,u),np(u,l),np(i,h),np(i,f),np(f,g)},p(t,n){I!==(I=y(t))&&(m.d(1),m=I(t),m&&(m.c(),m.m(e,null))),w===(w=E(t))&&b?b.p(t,n):(b.d(1),b=w(t),b&&(b.c(),b.m(r,null))),128&n&&A!==(A=t[7][0].join("/")+"")&&dp(a,A),128&n&&d!==(d=t[7][1].join("/")+"")&&dp(l,d),128&n&&p!==(p=t[7][2].join("/")+"")&&dp(g,p)},d(t){t&&op(e),m.d(),t&&op(n),t&&op(r),b.d(),t&&op(o),t&&op(i)}}}function pv(t){let e;return{c(){e=cp("Waiting")},m(t,n){rp(t,e,n)},d(t){t&&op(e)}}}function yv(t){let e;return{c(){e=cp("Your turn")},m(t,n){rp(t,e,n)},d(t){t&&op(e)}}}function Iv(t){let e,n,r;return{c(){e=sp("input"),gp(e,"class","line")},m(o,i){rp(o,e,i),t[21](e),pp(e,t[4]),n||(r=[hp(e,"input",t[22]),hp(e,"keypress",t[16]),hp(e,"blur",t[23])],n=!0)},p(t,n){16&n&&e.value!==t[4]&&pp(e,t[4])},d(o){o&&op(e),t[21](null),n=!1,Yd(r)}}}function mv(t){let e,n,r,o,i,s,a,c,u,l,h,f,g;return{c(){e=sp("button"),n=cp("end"),o=up(),i=sp("button"),s=cp("msg"),c=up(),u=sp("button"),l=cp("pass"),gp(e,"class","hgap"),e.disabled=r=!t[0].myTurn,gp(i,"class","hgap"),i.disabled=a=!t[0].myTurn,gp(u,"class","hgap"),u.disabled=h=!t[0].myTurn},m(r,a){rp(r,e,a),np(e,n),rp(r,o,a),rp(r,i,a),np(i,s),rp(r,c,a),rp(r,u,a),np(u,l),f||(g=[hp(e,"click",t[19]),hp(i,"click",t[20]),hp(u,"click",t[15])],f=!0)},p(t,n){1&n&&r!==(r=!t[0].myTurn)&&(e.disabled=r),1&n&&a!==(a=!t[0].myTurn)&&(i.disabled=a),1&n&&h!==(h=!t[0].myTurn)&&(u.disabled=h)},d(t){t&&op(e),t&&op(o),t&&op(i),t&&op(c),t&&op(u),f=!1,Yd(g)}}}function Ev(t){let e,n,r,o,i,s,a,c,u,l,h,f,g,A,d,p,y,I,m,E,w,b,C=Lf.rewrite(t[0].graph||"")+"";const v=[nv,ev],B=[];function _(t,e){return t[0].peer?0:1}o=_(t),i=B[o]=v[o](t);let x=t[5],S=[];for(let e=0;e<x.length;e+=1)S[e]=iv(tv(t,x,e));const k=t=>Kp(S[t],1,1,(()=>{S[t]=null}));h=new BI({props:{expiresAt:t[0].expiresAt,format:"mm:ss"}});let Q=t[0].messages,M=[];for(let e=0;e<Q.length;e+=1)M[e]=lv(ZC(t,Q,e));function D(t,e){return t[0].initiator?fv:hv}let L=D(t),T=L(t);function $(t,e){return"active"===t[0].state?dv:"end"===t[0].state?Av:gv}let U=$(t),O=U(t);return{c(){e=sp("chat"),n=sp("header"),r=sp("div"),i.c(),s=up(),a=sp("div"),c=sp("health");for(let t=0;t<S.length;t+=1)S[t].c();u=up(),l=sp("h3"),Gp(h.$$.fragment),f=up(),g=sp("messages"),A=sp("p"),d=cp(C),p=up();for(let t=0;t<M.length;t+=1)M[t].c();y=up(),I=sp("msg"),m=sp("balance"),T.c(),E=up(),w=sp("ctrls"),O.c(),gp(r,"class","row xcenter"),gp(l,"class","svelte-1secqat"),gp(a,"class","column xend"),gp(n,"class","container row space-between svelte-1secqat"),gp(A,"class","text-center"),Ip(m,"inv",!t[0].initiator),gp(I,"class","row xcenter center svelte-1secqat"),gp(g,"class","container svelte-1secqat"),gp(e,"class","svelte-1secqat"),Ip(e,"white",t[0].initiator),Ip(e,"black",!t[0].initiator)},m(i,C){rp(i,e,C),np(e,n),np(n,r),B[o].m(r,null),np(n,s),np(n,a),np(a,c);for(let t=0;t<S.length;t+=1)S[t].m(c,null);np(a,u),np(a,l),qp(h,l,null),np(e,f),np(e,g),np(g,A),np(A,d),np(g,p);for(let t=0;t<M.length;t+=1)M[t].m(g,null);np(g,y),np(g,I),np(I,m),T.m(m,null),t[18](g),np(e,E),np(e,w),O.m(w,null),b=!0},p(t,[n]){let s=o;if(o=_(t),o===s?B[o].p(t,n):(Np(),Kp(B[s],1,1,(()=>{B[s]=null})),Pp(),i=B[o],i?i.p(t,n):(i=B[o]=v[o](t),i.c()),Yp(i,1),i.m(r,null)),32&n){let e;for(x=t[5],e=0;e<x.length;e+=1){const r=tv(t,x,e);S[e]?(S[e].p(r,n),Yp(S[e],1)):(S[e]=iv(r),S[e].c(),Yp(S[e],1),S[e].m(c,null))}for(Np(),e=x.length;e<S.length;e+=1)k(e);Pp()}const a={};if(1&n&&(a.expiresAt=t[0].expiresAt),h.$set(a),(!b||1&n)&&C!==(C=Lf.rewrite(t[0].graph||"")+"")&&dp(d,C),1&n){let e;for(Q=t[0].messages,e=0;e<Q.length;e+=1){const r=ZC(t,Q,e);M[e]?M[e].p(r,n):(M[e]=lv(r),M[e].c(),M[e].m(g,y))}for(;e<M.length;e+=1)M[e].d(1);M.length=Q.length}L===(L=D(t))&&T?T.p(t,n):(T.d(1),T=L(t),T&&(T.c(),T.m(m,null))),1&n&&Ip(m,"inv",!t[0].initiator),U===(U=$(t))&&O?O.p(t,n):(O.d(1),O=U(t),O&&(O.c(),O.m(w,null))),1&n&&Ip(e,"white",t[0].initiator),1&n&&Ip(e,"black",!t[0].initiator)},i(t){if(!b){Yp(i);for(let t=0;t<x.length;t+=1)Yp(S[t]);Yp(h.$$.fragment,t),b=!0}},o(t){Kp(i),S=S.filter(Boolean);for(let t=0;t<S.length;t+=1)Kp(S[t]);Kp(h.$$.fragment,t),b=!1},d(n){n&&op(e),B[o].d(),ip(S,n),zp(h),ip(M,n),T.d(),t[18](null),O.d()}}}function wv(t,e,n){let r,o,i,s,a,c,u,l,{id:h}=e;const f=Ly(h,"Chat");qd(t,f,(t=>n(0,r=t)));const g=ey(!1);qd(t,g,(t=>n(3,o=t)));const A=ey("");qd(t,A,(t=>n(4,i=t)));const d=ny(f,(t=>Array.from(new Array(3)).map(((e,n)=>n<t.health))));qd(t,d,(t=>n(5,s=t)));const p=ny(f,(t=>t.graph?t.initiator?Lf.scoreGraph(t.graph):Lf.scoreGraph(t.graph).reverse():[0,0]));qd(t,p,(t=>n(6,a=t)));const y=ny([f,p],(([t,e])=>t.graph?(t.initiator||(e=e.reverse()),[t.initiator?"ᛒᛔ":"ᛔᛒ",t.initiator?"ᛖ":"ᛗ",t.initiator?"ᚦ":"ᚧ"].map((n=>{const r=Lf.scoreGraph(t.graph+n).map(((t,n)=>t-e[n])).map((t=>function(t){return t>0?`+${t}`:t}(t)));return t.initiator?r:r.reverse()}))):[[0,0],[0,0],[0,0]]));var I;function m(t=0){console.log("Bye button pressed"),r.bye(t).then((()=>console.info("Bye published"))).catch((t=>console.error("Failed publishing Bye",t)))}qd(t,y,(t=>n(7,c=t))),I=()=>{u.scrollTo({top:u.scrollHeight,left:0,behaviour:"smooth"}),o&&l.focus()},wp().$$.after_update.push(I);return t.$$set=t=>{"id"in t&&n(17,h=t.id)},t.$$.update=()=>{1&t.$$.dirty&&"finalizing"===r.state&&r.myTurn&&m()},[r,u,l,o,i,s,a,c,f,g,A,d,p,y,m,function(){r.pass().then((()=>console.info("Pass published"))).catch((t=>console.error("Failed publishing Pass",t)))},function({charCode:t}){if(13===t)r.send(i.trim()).then((()=>{console.info("Message published"),ep(A,i="",i),ep(g,o=!1,o)})).catch((t=>console.error("Failed publishing Message",t)))},h,function(t){_p[t?"unshift":"push"]((()=>{u=t,n(1,u)}))},()=>m(0),()=>ep(g,o=!0,o),function(t){_p[t?"unshift":"push"]((()=>{l=t,n(2,l)}))},function(){i=this.value,A.set(i)},()=>ep(g,o=!!i.length,o)]}class bv extends Xp{constructor(t){super(),Wp(this,t,wv,Ev,Rd,{id:17})}}function Cv(t){let e,n,r,o,i,s,a,c,u,l,h,f,g,A,d,p,y,I,m,E,w,b,C,v,B,_,x,S,k,Q,M,D;return o=new qy({props:{id:"dl-logo-red"}}),{c(){e=sp("about"),n=sp("div"),r=sp("logo"),Gp(o.$$.fragment),i=up(),s=sp("h1"),a=cp("Picochat\n    "),c=sp("samp"),c.textContent=`${"3.0.0".replace(/^(\d+).+/,"$1")}`,u=up(),l=sp("p"),l.textContent="Where ever we're going, we'll get there eventually.\n    Meanwhile, come say hi!\n  ",h=sp("ul"),h.innerHTML='<li class="svelte-1eldk8a"><a href="https://discord.gg/K5XjmZx" class="svelte-1eldk8a">Discord (community chat)</a></li> \n    <li class="svelte-1eldk8a"><a href="https://github.com/telamon/picochat/issues" class="svelte-1eldk8a">Questions &amp; Support</a></li> \n    <li class="svelte-1eldk8a"><a href="https://github.com/telamon/picochat" class="svelte-1eldk8a">Source code</a></li>',f=up(),g=sp("h5"),g.textContent="Legalities",A=up(),d=sp("table"),p=sp("tdata"),y=sp("tr"),I=sp("td"),I.textContent="build",m=sp("td"),m.textContent=`production-3.0.0-${"64d0789084f9eb7ce8a689188c12285b877d86b4".substr(0,8)}`,E=up(),w=sp("tr"),w.innerHTML="<td>Cookies</td><td>none, zilch, zero</td>",b=up(),C=sp("tr"),C.innerHTML="<td>GDPR</td><td>All blocks are automatically erased when timers hit <code>00:00</code></td>",v=up(),B=sp("tr"),B.innerHTML="<td>User</td><td>We have absolutley no control over p2p interactions, apply common sense, be polite</td>",_=up(),x=sp("tr"),x.innerHTML="<td>License</td><td>GNU AGPL version 3</td>",S=up(),k=sp("tr"),k.innerHTML="<td>Motto</td><td>No servers, no supernodes, liberate humans and machines alike</td>",Q=up(),M=sp("p"),M.innerHTML="<sub>Bottom line</sub><br/> \n    <samp>This software is presented to you as is,\n      Decent Labs AB takes no responsibility for how this software is used or distributed.\n      <br/>\n      Refer to the contents of the aforementioned license for more details.</samp>",gp(n,"class","column xcenter vgap"),gp(h,"class","svelte-1eldk8a"),gp(e,"class","block container")},m(t,L){rp(t,e,L),np(e,n),np(n,r),qp(o,r,null),np(e,i),np(e,s),np(s,a),np(s,c),np(e,u),np(e,l),np(e,h),np(e,f),np(e,g),np(e,A),np(e,d),np(d,p),np(p,y),np(y,I),np(y,m),np(p,E),np(p,w),np(p,b),np(p,C),np(p,v),np(p,B),np(p,_),np(p,x),np(p,S),np(p,k),np(e,Q),np(e,M),D=!0},p:Fd,i(t){D||(Yp(o.$$.fragment,t),D=!0)},o(t){Kp(o.$$.fragment,t),D=!1},d(t){t&&op(e),zp(o)}}}class vv extends Xp{constructor(t){super(),Wp(this,t,null,Cv,Rd,{})}}function Bv(t){let e,n,r,o,i;return{c(){e=sp("h3"),e.textContent="Done!",n=up(),r=sp("button"),r.textContent="done"},m(s,a){rp(s,e,a),rp(s,n,a),rp(s,r,a),o||(i=hp(r,"click",t[3]),o=!0)},p:Fd,d(t){t&&op(e),t&&op(n),t&&op(r),o=!1,i()}}}function _v(t){let e,n,r,o,i=t[0].error+"";return{c(){e=sp("h3"),e.textContent="Not imported",n=up(),r=sp("danger"),o=cp(i)},m(t,i){rp(t,e,i),rp(t,n,i),rp(t,r,i),np(r,o)},p(t,e){1&e&&i!==(i=t[0].error+"")&&dp(o,i)},d(t){t&&op(e),t&&op(n),t&&op(r)}}}function xv(t){let e,n,r;return{c(){e=sp("h3"),e.textContent="Reading blocks...",n=up(),r=sp("h1"),gp(r,"aria-busy","true")},m(t,o){rp(t,e,o),rp(t,n,o),rp(t,r,o)},p:Fd,d(t){t&&op(e),t&&op(n),t&&op(r)}}}function Sv(t){let e,n,r,o;function i(t,e){return t[0].loading?xv:t[0].imported?Bv:_v}let s=i(t),a=s(t);return{c(){e=sp("append"),n=sp("div"),r=sp("h1"),r.textContent=" ",o=up(),a.c(),gp(n,"class","flex column xcenter center"),gp(e,"class","block container")},m(t,i){rp(t,e,i),np(e,n),np(n,r),np(n,o),a.m(n,null)},p(t,[e]){s===(s=i(t))&&a?a.p(t,e):(a.d(1),a=s(t),a&&(a.c(),a.m(n,null)))},i:Fd,o:Fd,d(t){t&&op(e),a.d()}}}function kv(t,e,r){let o,{id:i}=e;const s=iy(n.exports.init({loading:!0},n.exports.mute(qv,(async t=>{if(!t)return{loading:!0};const e=tf.Feed.from(t);let n=null,r=!1;if(!!await cy.repo.readBlock(e.last.sig))n="Already merged";else try{if(!(await cy.dispatch(e,!0)).length)throw new Error("Rejected by kernel");r=!0}catch(t){console.error(t),n=t.message}return{loading:!1,imported:r,error:n,feed:e}}))));qd(t,s,(t=>r(0,o=t)));return t.$$set=t=>{"id"in t&&r(2,i=t.id)},[o,s,i,()=>Xv("/")]}class Qv extends Xp{constructor(t){super(),Wp(this,t,kv,Sv,Rd,{id:2})}}function Mv(t,e,n){const r=t.slice();return r[2]=e[n],r}function Dv(t){let e,n=t[0].inventory,r=[];for(let e=0;e<n.length;e+=1)r[e]=Lv(Mv(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=lp()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);rp(t,e,n)},p(t,o){if(1&o){let i;for(n=t[0].inventory,i=0;i<n.length;i+=1){const s=Mv(t,n,i);r[i]?r[i].p(s,o):(r[i]=Lv(s),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(t){ip(r,t),t&&op(e)}}}function Lv(t){let e,n,r,o,i=Py[t[2].id].image+"",s=t[2].qty+"";return{c(){e=sp("item"),n=cp(i),r=up(),o=cp(s)},m(t,i){rp(t,e,i),np(e,n),np(e,r),np(e,o)},p(t,e){1&e&&i!==(i=Py[t[2].id].image+"")&&dp(n,i),1&e&&s!==(s=t[2].qty+"")&&dp(o,s)},d(t){t&&op(e)}}}function Tv(t){let e,n,r,o,i,s,a,c,u,l,h;s=new BI({props:{expiresAt:t[0].expiresAt,format:"¤¤"}});let f=t[0].inventory&&Dv(t);return{c(){e=sp("wallet-view"),n=sp("h2"),n.textContent="Balance",r=up(),o=sp("h1"),i=cp("¤ "),Gp(s.$$.fragment),a=up(),c=sp("h1"),c.textContent="Inventory",u=up(),l=sp("inventory"),f&&f.c(),gp(n,"class","text-center nogap"),gp(o,"class","text-center"),gp(c,"class","text-center nogap"),gp(l,"class","flex wrap")},m(t,g){rp(t,e,g),np(e,n),np(e,r),np(e,o),np(o,i),qp(s,o,null),np(e,a),np(e,c),np(e,u),np(e,l),f&&f.m(l,null),h=!0},p(t,[e]){const n={};1&e&&(n.expiresAt=t[0].expiresAt),s.$set(n),t[0].inventory?f?f.p(t,e):(f=Dv(t),f.c(),f.m(l,null)):f&&(f.d(1),f=null)},i(t){h||(Yp(s.$$.fragment,t),h=!0)},o(t){Kp(s.$$.fragment,t),h=!1},d(t){t&&op(e),zp(s),f&&f.d()}}}function $v(t,e,n){let r;const o=fy(!0);return qd(t,o,(t=>n(0,r=t))),[r,o]}class Uv extends Xp{constructor(t){super(),Wp(this,t,$v,Tv,Rd,{})}}const[Ov,Fv]=n.exports.writable(),[Nv,Pv]=n.exports.writable(),[Yv,Kv]=n.exports.writable(),Rv=n.exports.gate(n.exports.mute(Ov,(t=>{switch(t){case"shop":return DC;case"msgs":return XC;case"profile":return Zb;case"chat":return bv;case"about":return vv;case"keygen":return II;case"append":return Qv;case"wallet":return Uv;default:return vb}}))),jv=iy(Ov),Hv=iy(Rv),Vv=iy(Nv),Gv=iy(Yv),qv=Nv;let zv=null;function Jv(t,e,n){if(zv&&t===zv)return!1;zv=t,console.info("Rerouting to path:",t,"id:",e,"Q/Search:",n),Fv(t),Pv(e),Kv(n)}function Wv(){if(""===window.location.hash)return Jv("pub",null,new URLSearchParams);const t=new URL(window.location.hash.replace(/^#\/?/,"x:")),[e,n]=t.pathname.split("/"),r=new URLSearchParams(t.search),o={};let i=!0;for(const[t,e]of r.entries())o[t]=e,i=!1;Jv(e.toLowerCase(),n,i?void 0:o)}function Xv(t){window.history.pushState(null,null,`/#${t}`.replace(/^#\/+/,"#/")),Wv()}function Zv(t,e,n){const r=t.slice();return r[11]=e[n],r}function tB(t){let e,n,r,o,i,s,a=t[11]+"";function c(){return t[8](t[11])}return{c(){e=sp("div"),n=sp("a"),r=sp("code"),o=cp(a)},m(t,a){rp(t,e,a),np(e,n),np(n,r),np(r,o),i||(s=hp(n,"click",c),i=!0)},p(e,n){t=e},d(t){t&&op(e),i=!1,s()}}}function eB(t){let e,n,r,o,i,s,a,c,u,l,h,f,g,A,d,p=t[3],y=[];for(let e=0;e<p.length;e+=1)y[e]=tB(Zv(t,p,e));return{c(){e=sp("article"),n=sp("h6"),n.textContent="namespaces",r=up(),o=sp("input"),i=up(),s=sp("h6"),s.textContent="quickfilters",a=up(),c=sp("div"),u=sp("a"),u.innerHTML="<code>DEBUG:OFF</code>",l=up();for(let t=0;t<y.length;t+=1)y[t].c();h=up(),f=sp("footer"),g=sp("button"),g.textContent="ok",gp(o,"type","text")},m(p,I){rp(p,e,I),np(e,n),np(e,r),np(e,o),pp(o,t[1]),np(e,i),np(e,s),np(e,a),np(e,c),np(c,u),np(e,l);for(let t=0;t<y.length;t+=1)y[t].m(e,null);np(e,h),np(e,f),np(f,g),A||(d=[hp(o,"input",t[6]),hp(u,"click",t[7]),hp(g,"click",t[9])],A=!0)},p(t,n){if(2&n&&o.value!==t[1]&&pp(o,t[1]),40&n){let r;for(p=t[3],r=0;r<p.length;r+=1){const o=Zv(t,p,r);y[r]?y[r].p(o,n):(y[r]=tB(o),y[r].c(),y[r].m(e,h))}for(;r<y.length;r+=1)y[r].d(1);y.length=p.length}},d(t){t&&op(e),ip(y,t),A=!1,Yd(d)}}}function nB(t){let e,n;return e=new Hy({props:{open:t[2],$$slots:{default:[eB]},$$scope:{ctx:t}}}),e.$on("fade",t[10]),{c(){Gp(e.$$.fragment)},m(t,r){qp(e,t,r),n=!0},p(t,[n]){const r={};4&n&&(r.open=t[2]),16390&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(Yp(e.$$.fragment,t),n=!0)},o(t){Kp(e.$$.fragment,t),n=!1},d(t){zp(e,t)}}}function rB(t,e,n){let r,o,i=Fd,s=()=>(i(),i=Gd(a,(t=>n(2,o=t))),a);t.$$.on_destroy.push((()=>i()));let{open:a=ey(!1)}=e;s();const c=ey(Sh.namespaces);function u(t){""===t?(Sh.disable(),ep(c,r="",r)):(Sh.enable(t),ep(c,r=Sh.namespaces,r))}qd(t,c,(t=>n(1,r=t)));return t.$$set=t=>{"open"in t&&s(n(0,a=t.open))},[a,r,o,["*","hyper*","pico*","picochat:kernel","picochat:mod:*","picochat:mod:net","picochat:mod:gc","picochat:mod:reg","picochat:slice*"],c,u,function(){r=this.value,c.set(r)},()=>u(""),t=>u(t),()=>ep(a,o=!1,o),()=>ep(a,o=!1,o)]}window.addEventListener("popstate",Wv),Wv();class oB extends Xp{constructor(t){super(),Wp(this,t,rB,nB,Rd,{open:0})}}const{window:iB}=Hp;function sB(t){let e,n,r,o,i,s,a,c,u,l,h,f,g,A,d,p,y,I,m,E,w,b,C,v,B,_,x,S,k,Q=t[2]?.state[0]+"",M=(t[2].hasKey?1:0)+"",D=(t[2].hasProfile?1:0)+"",L=(t[2].entered?1:0)+"";function T(t,e){return t[2].swarming?t[3]?2>t[3]?cB:aB:uB:lB}let $=T(t),U=$(t);return _=new oB({props:{open:t[16]}}),{c(){e=sp("dev-bar"),n=sp("div"),r=cp("K["),o=cp(Q),i=cp("]\n      ID²["),s=cp(M),a=cp("]\n      P["),c=cp(D),u=cp("]\n      m56["),l=cp(t[3]),h=cp("]\n      E["),f=cp(L),g=cp("]"),A=up(),d=sp("div"),p=sp("btn"),U.c(),y=up(),I=sp("btn"),I.textContent="D",m=up(),E=sp("btn"),E.textContent="t",w=up(),b=sp("btn"),b.textContent="i",C=up(),v=sp("btn"),v.textContent="X",B=up(),Gp(_.$$.fragment),gp(p,"class",tp(t[21]?"m56 auto":"m56 no-auto")+" svelte-107qq9w"),gp(v,"class","danger"),Ap(e,"class","flex row xcenter space-between")},m(Q,M){rp(Q,e,M),np(e,n),np(n,r),np(n,o),np(n,i),np(n,s),np(n,a),np(n,c),np(n,u),np(n,l),np(n,h),np(n,f),np(n,g),np(e,A),np(e,d),np(d,p),U.m(p,null),np(d,y),np(d,I),np(d,m),np(d,E),np(d,w),np(d,b),np(d,C),np(d,v),rp(Q,B,M),qp(_,Q,M),x=!0,S||(k=[hp(p,"click",t[22]),hp(I,"click",t[23]),hp(E,"click",vB),hp(b,"click",t[19]),hp(v,"click",t[24])],S=!0)},p(t,e){(!x||4&e[0])&&Q!==(Q=t[2]?.state[0]+"")&&dp(o,Q),(!x||4&e[0])&&M!==(M=(t[2].hasKey?1:0)+"")&&dp(s,M),(!x||4&e[0])&&D!==(D=(t[2].hasProfile?1:0)+"")&&dp(c,D),(!x||8&e[0])&&dp(l,t[3]),(!x||4&e[0])&&L!==(L=(t[2].entered?1:0)+"")&&dp(f,L),$!==($=T(t))&&(U.d(1),U=$(t),U&&(U.c(),U.m(p,null)))},i(t){x||(Yp(_.$$.fragment,t),x=!0)},o(t){Kp(_.$$.fragment,t),x=!1},d(t){t&&op(e),U.d(),t&&op(B),zp(_,t),S=!1,Yd(k)}}}function aB(t){let e;return{c(){e=cp("|ó_ó|")},m(t,n){rp(t,e,n)},d(t){t&&op(e)}}}function cB(t){let e;return{c(){e=cp("|o_o|")},m(t,n){rp(t,e,n)},d(t){t&&op(e)}}}function uB(t){let e;return{c(){e=cp("|o_=|")},m(t,n){rp(t,e,n)},d(t){t&&op(e)}}}function lB(t){let e;return{c(){e=cp("|=_=|")},m(t,n){rp(t,e,n)},d(t){t&&op(e)}}}function hB(t){let e,n,r,o,i,s,a=t[31].message+"",c=t[31].stack+"";return{c(){e=sp("h3"),n=cp("KernelPanic! "),r=cp(a),o=up(),i=sp("pre"),s=cp(c)},m(t,a){rp(t,e,a),np(e,n),np(e,r),rp(t,o,a),rp(t,i,a),np(i,s)},p:Fd,i:Fd,o:Fd,d(t){t&&op(e),t&&op(o),t&&op(i)}}}function fB(t){let e,n,r,o;const i=[pB,dB,AB,gB],s=[];function a(t,e){return t[6]&&t[7]?0:t[7]?1:t[6]?2:3}return e=a(t),n=s[e]=i[e](t),{c(){n.c(),r=lp()},m(t,n){s[e].m(t,n),rp(t,r,n),o=!0},p(t,o){let c=e;e=a(t),e===c?s[e].p(t,o):(Np(),Kp(s[c],1,1,(()=>{s[c]=null})),Pp(),n=s[e],n?n.p(t,o):(n=s[e]=i[e](t),n.c()),Yp(n,1),n.m(r.parentNode,r))},i(t){o||(Yp(n),o=!0)},o(t){Kp(n),o=!1},d(t){s[e].d(t),t&&op(r)}}}function gB(t){let e,n,r;var o=t[8];return o&&(e=new o({})),{c(){e&&Gp(e.$$.fragment),n=lp()},m(t,o){e&&qp(e,t,o),rp(t,n,o),r=!0},p(t,r){if(o!==(o=t[8])){if(e){Np();const t=e;Kp(t.$$.fragment,1,0,(()=>{zp(t,1)})),Pp()}o?(e=new o({}),Gp(e.$$.fragment),Yp(e.$$.fragment,1),qp(e,n.parentNode,n)):e=null}},i(t){r||(e&&Yp(e.$$.fragment,t),r=!0)},o(t){e&&Kp(e.$$.fragment,t),r=!1},d(t){t&&op(n),e&&zp(e,t)}}}function AB(t){let e,n,r;var o=t[8];function i(t){return{props:{id:t[6]}}}return o&&(e=new o(i(t))),{c(){e&&Gp(e.$$.fragment),n=lp()},m(t,o){e&&qp(e,t,o),rp(t,n,o),r=!0},p(t,r){const s={};if(64&r[0]&&(s.id=t[6]),o!==(o=t[8])){if(e){Np();const t=e;Kp(t.$$.fragment,1,0,(()=>{zp(t,1)})),Pp()}o?(e=new o(i(t)),Gp(e.$$.fragment),Yp(e.$$.fragment,1),qp(e,n.parentNode,n)):e=null}else o&&e.$set(s)},i(t){r||(e&&Yp(e.$$.fragment,t),r=!0)},o(t){e&&Kp(e.$$.fragment,t),r=!1},d(t){t&&op(n),e&&zp(e,t)}}}function dB(t){let e,n,r;var o=t[8];function i(t){return{props:{q:t[7]}}}return o&&(e=new o(i(t))),{c(){e&&Gp(e.$$.fragment),n=lp()},m(t,o){e&&qp(e,t,o),rp(t,n,o),r=!0},p(t,r){const s={};if(128&r[0]&&(s.q=t[7]),o!==(o=t[8])){if(e){Np();const t=e;Kp(t.$$.fragment,1,0,(()=>{zp(t,1)})),Pp()}o?(e=new o(i(t)),Gp(e.$$.fragment),Yp(e.$$.fragment,1),qp(e,n.parentNode,n)):e=null}else o&&e.$set(s)},i(t){r||(e&&Yp(e.$$.fragment,t),r=!0)},o(t){e&&Kp(e.$$.fragment,t),r=!1},d(t){t&&op(n),e&&zp(e,t)}}}function pB(t){let e,n,r;var o=t[8];function i(t){return{props:{id:t[6],q:t[7]}}}return o&&(e=new o(i(t))),{c(){e&&Gp(e.$$.fragment),n=lp()},m(t,o){e&&qp(e,t,o),rp(t,n,o),r=!0},p(t,r){const s={};if(64&r[0]&&(s.id=t[6]),128&r[0]&&(s.q=t[7]),o!==(o=t[8])){if(e){Np();const t=e;Kp(t.$$.fragment,1,0,(()=>{zp(t,1)})),Pp()}o?(e=new o(i(t)),Gp(e.$$.fragment),Yp(e.$$.fragment,1),qp(e,n.parentNode,n)):e=null}else o&&e.$set(s)},i(t){r||(e&&Yp(e.$$.fragment,t),r=!0)},o(t){e&&Kp(e.$$.fragment,t),r=!1},d(t){t&&op(n),e&&zp(e,t)}}}function yB(t){let e;return{c(){e=sp("div"),e.innerHTML='<h5 aria-busy="true">Booting up...</h5>',gp(e,"class","column center xcenter"),yp(e,"height","100%")},m(t,n){rp(t,e,n)},p:Fd,i:Fd,o:Fd,d(t){t&&op(e)}}}function IB(t){let e,n,r,o,i,s,a,c,u,l,h,f,g,A,d,p,y,I,m,E,w,b;r=new qy({props:{id:"gfx-vibe",nofill:!0}}),s=new qy({props:{id:"gfx-shop",nofill:!0}});const C=[EB,mB],v=[];function B(t,e){return t[2].entered?1:0}c=B(t),u=v[c]=C[c](t),f=new qy({props:{id:"gfx-msgs",nofill:!0}});const _=[bB,wB],x=[];function S(t,e){return t[11]?1:0}return I=S(t),m=x[I]=_[I](t),{c(){e=sp("bar"),n=sp("round"),Gp(r.$$.fragment),o=up(),i=sp("round"),Gp(s.$$.fragment),a=up(),u.c(),l=up(),h=sp("round"),Gp(f.$$.fragment),g=up(),A=sp("samp"),d=cp(t[10]),p=up(),y=sp("round"),m.c(),gp(n,"class","flex column center xcenter noselect"),gp(i,"class","flex column center xcenter noselect"),gp(A,"class","notifications-badge"),Ip(A,"zero",!t[10]),gp(h,"class","flex column center xcenter noselect"),gp(y,"class","flex column center xcenter noselect"),gp(e,"class","flex row xcenter space-between")},m(u,m){rp(u,e,m),np(e,n),qp(r,n,null),np(e,o),np(e,i),qp(s,i,null),np(e,a),v[c].m(e,null),np(e,l),np(e,h),qp(f,h,null),np(h,g),np(h,A),np(A,d),np(e,p),np(e,y),x[I].m(y,null),E=!0,w||(b=[hp(n,"click",t[25]),hp(i,"click",t[26]),hp(h,"click",t[28]),hp(y,"click",t[29])],w=!0)},p(t,n){let r=c;c=B(t),c===r?v[c].p(t,n):(Np(),Kp(v[r],1,1,(()=>{v[r]=null})),Pp(),u=v[c],u?u.p(t,n):(u=v[c]=C[c](t),u.c()),Yp(u,1),u.m(e,l)),(!E||1024&n[0])&&dp(d,t[10]),1024&n[0]&&Ip(A,"zero",!t[10]);let o=I;I=S(t),I===o?x[I].p(t,n):(Np(),Kp(x[o],1,1,(()=>{x[o]=null})),Pp(),m=x[I],m?m.p(t,n):(m=x[I]=_[I](t),m.c()),Yp(m,1),m.m(y,null))},i(t){E||(Yp(r.$$.fragment,t),Yp(s.$$.fragment,t),Yp(u),Yp(f.$$.fragment,t),Yp(m),E=!0)},o(t){Kp(r.$$.fragment,t),Kp(s.$$.fragment,t),Kp(u),Kp(f.$$.fragment,t),Kp(m),E=!1},d(t){t&&op(e),zp(r),zp(s),v[c].d(),zp(f),x[I].d(),w=!1,Yd(b)}}}function mB(t){let e,n,r,o,i,s,a,c;return r=new BI({props:{expiresAt:t[9].expiresAt,format:"¤Hm"}}),{c(){e=sp("stat"),n=sp("h3"),Gp(r.$$.fragment),o=up(),i=sp("h6"),i.textContent="wallet",gp(n,"class","primary svelte-107qq9w"),gp(i,"class","muted svelte-107qq9w"),gp(e,"class","flex column center xcenter inside noselect svelte-107qq9w")},m(u,l){rp(u,e,l),np(e,n),qp(r,n,null),np(e,o),np(e,i),s=!0,a||(c=hp(e,"click",t[27]),a=!0)},p(t,e){const n={};512&e[0]&&(n.expiresAt=t[9].expiresAt),r.$set(n)},i(t){s||(Yp(r.$$.fragment,t),s=!0)},o(t){Kp(r.$$.fragment,t),s=!1},d(t){t&&op(e),zp(r),a=!1,c()}}}function EB(t){let e,n,r;return{c(){e=sp("stat"),e.innerHTML='<h3 class="muted svelte-107qq9w">--:--</h3> \n        <h6 class="primary svelte-107qq9w">start</h6>',gp(e,"class","flex column center xcenter outside noselect btn-enter svelte-107qq9w")},m(o,i){rp(o,e,i),n||(r=hp(e,"click",t[20]),n=!0)},p:Fd,i:Fd,o:Fd,d(t){t&&op(e),n=!1,r()}}}function wB(t){let e,n;return e=new rb({props:{src:t[11]}}),{c(){Gp(e.$$.fragment)},m(t,r){qp(e,t,r),n=!0},p(t,n){const r={};2048&n[0]&&(r.src=t[11]),e.$set(r)},i(t){n||(Yp(e.$$.fragment,t),n=!0)},o(t){Kp(e.$$.fragment,t),n=!1},d(t){zp(e,t)}}}function bB(t){let e,n;return e=new qy({props:{id:"gfx-profile",nofill:!0}}),{c(){Gp(e.$$.fragment)},m(t,r){qp(e,t,r),n=!0},p:Fd,i(t){n||(Yp(e.$$.fragment,t),n=!0)},o(t){Kp(e.$$.fragment,t),n=!1},d(t){zp(e,t)}}}function CB(t){let e,n,r,o,i,s,a,c,u=t[1]&&sB(t),l={ctx:t,current:null,token:null,hasCatch:!0,pending:yB,then:fB,catch:hB,error:31,blocks:[,,,]};Rp(t[12],l);let h=t[5]&&IB(t);return{c(){e=sp("root"),u&&u.c(),n=up(),r=sp("main"),l.block.c(),o=up(),h&&h.c(),Ip(r,"has-dev",t[1]),Ip(r,"has-bar",t[5]),gp(e,"class",i=tp("view-"+t[0])+" svelte-107qq9w")},m(t,i){rp(t,e,i),u&&u.m(e,null),np(e,n),np(e,r),l.block.m(r,l.anchor=null),l.mount=()=>r,l.anchor=null,np(e,o),h&&h.m(e,null),s=!0,a||(c=[hp(iB,"error",_B),hp(iB,"unhandledrejection",BB)],a=!0)},p(o,a){(t=o)[1]?u?(u.p(t,a),2&a[0]&&Yp(u,1)):(u=sB(t),u.c(),Yp(u,1),u.m(e,n)):u&&(Np(),Kp(u,1,1,(()=>{u=null})),Pp()),jp(l,t,a),2&a[0]&&Ip(r,"has-dev",t[1]),32&a[0]&&Ip(r,"has-bar",t[5]),t[5]?h?(h.p(t,a),32&a[0]&&Yp(h,1)):(h=IB(t),h.c(),Yp(h,1),h.m(e,null)):h&&(Np(),Kp(h,1,1,(()=>{h=null})),Pp()),(!s||1&a[0]&&i!==(i=tp("view-"+t[0])+" svelte-107qq9w"))&&gp(e,"class",i)},i(t){s||(Yp(u),Yp(l.block),Yp(h),s=!0)},o(t){Kp(u);for(let t=0;t<3;t+=1){Kp(l.blocks[t])}Kp(h),s=!1},d(t){t&&op(e),u&&u.d(),l.block.d(),l.token=null,l=null,h&&h.d(),a=!1,Yd(c)}}}function vB(){const t=document.documentElement;t.dataset.theme?delete t.dataset.theme:t.dataset.theme="dark"}function BB(t){console.error("[Unhandled Rejection]",t)}function _B(t){console.error("[GlobError]",t)}function xB(t,e,r){let o,i,s,a,c,u,l,h,f,g,A,d;qd(t,jv,(t=>r(0,o=t))),qd(t,Qy,(t=>r(2,s=t))),qd(t,Vv,(t=>r(6,l=t))),qd(t,Gv,(t=>r(7,h=t))),qd(t,Hv,(t=>r(8,f=t))),qd(t,My,(t=>r(11,d=t)));const p=Dy(),y=iy(n.exports.gate(n.exports.init(0,n.exports.mute(cy.$connections(),(t=>t.length)))));qd(t,y,(t=>r(3,a=t)));const I=ny([Qy,jv],(([t,e])=>t.hasKey&&t.hasProfile&&"shop"!==e));qd(t,I,(t=>r(5,u=t)));const m=ny(jv,(t=>"shop"!==t));qd(t,m,(t=>r(1,i=t)));const E=ey(!1);qd(t,E,(t=>r(4,c=t)));const w=iy(n.exports.mute(n.exports.combine(cy.$vibes(),cy.$chats()),(([t,e])=>t.reduce(((t,e)=>"waiting_local"===e.state?t+1:t),0)+e.reduce(((t,e)=>e.myTurn?t+1:t),0))));qd(t,w,(t=>r(10,A=t)));const b=fy();qd(t,b,(t=>r(9,g=t)));const C=JSON.parse(window.localStorage.getItem("auto_swarm"));bp((()=>Hv.subscribe((()=>{window.document.scrollingElement.scrollTo({top:0,left:0})}))));return[o,i,s,a,c,u,l,h,f,g,A,d,p,y,I,m,E,w,b,async function(){const t=await cy.feed();t.inspect(),console.log(`Size: ${(t.tail/1024).toFixed(2)} kB`)},function(){!async function(){if(!n.exports.get(Cy))return Xv("/keygen");if(!n.exports.get(By))return Xv("/profile");if(!n.exports.get(my)){const t=await uy.readIdentity(),e=await uy.readProfile();await cy.register(e,t),Ey(!0)}$y()}()},C,function(){window.localStorage.setItem("auto_swarm",!C),window.location.reload()},()=>ep(E,c=!0,c),()=>Oy(!1),()=>Xv("pub"),()=>Xv("shop"),()=>Xv("wallet"),()=>Xv("msgs"),()=>Xv("profile")]}var SB={exports:{}};!function(t,e){t.exports=function(){var t,e,n=1e3,r=6e4,o=36e5,i=864e5,s=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,a=31536e6,c=2592e6,u=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,l={years:a,months:c,days:i,hours:o,minutes:r,seconds:n,milliseconds:1,weeks:6048e5},h=function(t){return t instanceof I},f=function(t,e,n){return new I(t,n,e.$l)},g=function(t){return e.p(t)+"s"},A=function(t){return t<0},d=function(t){return A(t)?Math.ceil(t):Math.floor(t)},p=function(t){return Math.abs(t)},y=function(t,e){return t?A(t)?{negative:!0,format:""+p(t)+e}:{negative:!1,format:""+t+e}:{negative:!1,format:""}},I=function(){function A(t,e,n){var r=this;if(this.$d={},this.$l=n,void 0===t&&(this.$ms=0,this.parseFromMilliseconds()),e)return f(t*l[g(e)],this);if("number"==typeof t)return this.$ms=t,this.parseFromMilliseconds(),this;if("object"==typeof t)return Object.keys(t).forEach((function(e){r.$d[g(e)]=t[e]})),this.calMilliseconds(),this;if("string"==typeof t){var o=t.match(u);if(o){var i=o.slice(2).map((function(t){return null!=t?Number(t):0}));return this.$d.years=i[0],this.$d.months=i[1],this.$d.weeks=i[2],this.$d.days=i[3],this.$d.hours=i[4],this.$d.minutes=i[5],this.$d.seconds=i[6],this.calMilliseconds(),this}}return this}var p=A.prototype;return p.calMilliseconds=function(){var t=this;this.$ms=Object.keys(this.$d).reduce((function(e,n){return e+(t.$d[n]||0)*l[n]}),0)},p.parseFromMilliseconds=function(){var t=this.$ms;this.$d.years=d(t/a),t%=a,this.$d.months=d(t/c),t%=c,this.$d.days=d(t/i),t%=i,this.$d.hours=d(t/o),t%=o,this.$d.minutes=d(t/r),t%=r,this.$d.seconds=d(t/n),t%=n,this.$d.milliseconds=t},p.toISOString=function(){var t=y(this.$d.years,"Y"),e=y(this.$d.months,"M"),n=+this.$d.days||0;this.$d.weeks&&(n+=7*this.$d.weeks);var r=y(n,"D"),o=y(this.$d.hours,"H"),i=y(this.$d.minutes,"M"),s=this.$d.seconds||0;this.$d.milliseconds&&(s+=this.$d.milliseconds/1e3);var a=y(s,"S"),c=t.negative||e.negative||r.negative||o.negative||i.negative||a.negative,u=o.format||i.format||a.format?"T":"",l=(c?"-":"")+"P"+t.format+e.format+r.format+u+o.format+i.format+a.format;return"P"===l||"-P"===l?"P0D":l},p.toJSON=function(){return this.toISOString()},p.format=function(t){var n=t||"YYYY-MM-DDTHH:mm:ss",r={Y:this.$d.years,YY:e.s(this.$d.years,2,"0"),YYYY:e.s(this.$d.years,4,"0"),M:this.$d.months,MM:e.s(this.$d.months,2,"0"),D:this.$d.days,DD:e.s(this.$d.days,2,"0"),H:this.$d.hours,HH:e.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:e.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:e.s(this.$d.seconds,2,"0"),SSS:e.s(this.$d.milliseconds,3,"0")};return n.replace(s,(function(t,e){return e||String(r[t])}))},p.as=function(t){return this.$ms/l[g(t)]},p.get=function(t){var e=this.$ms,n=g(t);return"milliseconds"===n?e%=1e3:e="weeks"===n?d(e/l[n]):this.$d[n],0===e?0:e},p.add=function(t,e,n){var r;return r=e?t*l[g(e)]:h(t)?t.$ms:f(t,this).$ms,f(this.$ms+r*(n?-1:1),this)},p.subtract=function(t,e){return this.add(t,e,!0)},p.locale=function(t){var e=this.clone();return e.$l=t,e},p.clone=function(){return f(this.$ms,this)},p.humanize=function(e){return t().add(this.$ms,"ms").locale(this.$l).fromNow(!e)},p.milliseconds=function(){return this.get("milliseconds")},p.asMilliseconds=function(){return this.as("milliseconds")},p.seconds=function(){return this.get("seconds")},p.asSeconds=function(){return this.as("seconds")},p.minutes=function(){return this.get("minutes")},p.asMinutes=function(){return this.as("minutes")},p.hours=function(){return this.get("hours")},p.asHours=function(){return this.as("hours")},p.days=function(){return this.get("days")},p.asDays=function(){return this.as("days")},p.weeks=function(){return this.get("weeks")},p.asWeeks=function(){return this.as("weeks")},p.months=function(){return this.get("months")},p.asMonths=function(){return this.as("months")},p.years=function(){return this.get("years")},p.asYears=function(){return this.as("years")},A}();return function(n,r,o){t=o,e=o().$utils(),o.duration=function(t,e){var n=o.locale();return f(t,{$l:n},e)},o.isDuration=h;var i=r.prototype.add,s=r.prototype.subtract;r.prototype.add=function(t,e){return h(t)&&(t=t.asMilliseconds()),i.bind(this)(t,e)},r.prototype.subtract=function(t,e){return h(t)&&(t=t.asMilliseconds()),s.bind(this)(t,e)}}}()}(SB);var kB=SB.exports;EI.extend(kB);return new class extends Xp{constructor(t){super(),Wp(this,t,xB,CB,Rd,{},null,[-1,-1])}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
