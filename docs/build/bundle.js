var app=function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})})),e}function r(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var n={exports:{}};!function(t){const e=Symbol.for("piconeuro:Error");t.exports={ERROR:e,get:function(t){let e=null;return t((t=>{e=t}))(),e},next:async function(t,e=1,r=!1){let o=null;r&&(t=n(t,r));for await(const r of c(t,e+1))o=r;return o},until:async function(t,e,r=-1){let n,o;const i=new Promise(((t,e)=>{n=t,o=e}));let s=null;r>0&&(s=setTimeout((()=>{o(new Error("until($n) timed out"))}),r));const a=t((t=>{e(t)&&(s&&clearTimeout(s),n(t))}));return i.finally(a),i},write:a,writable:a,notEqual:i,notEqualDeep:s,memo:function(t){let e;const r=new Set;let n=null;return function(i){return r.add(i),n?i(e):n=t(o),()=>{r.delete(i),r.length||(n&&n(),n=null)}};function o(t){e=t;for(const e of r)e(t)}},mute:function(t,r){if("function"!=typeof r)throw new Error("expected a mutation function");return function(n){let o=Promise.resolve(0);return t((t=>{const i=r(t);i&&"function"==typeof i.then&&"function"==typeof i.catch?o=o.then((()=>i.then(n).catch((t=>{console.error("n:mute() failed: ",t),n(e,t)})))):n(i)}))}},init:function(t,e){return function(r){let n=!1,i=function(){},s=!1;return"function"==typeof e&&(i=e((t=>{s=!0,n||r(t)}))),s||r(o(t)),()=>{n=!0,i()}}},when:function(t){if(!t||"function"!=typeof t.then)throw new Error("Expected a Promise");return function(r){return t.then(r).catch((t=>{console.error("n:when() failed: ",t),r(e,t)})),function(){}}},combine:function(...t){if(!Array.isArray(t)||!t.length)throw new Error("A list of neurons is required");const e=[];if(1===t.length&&"function"!=typeof t[0]){const r=t[0];t=[];for(const n in r)t.push(r[n]),e.push(n)}return function(r){if("function"!=typeof r)throw new Error("Derivation function required");const n=[],o=[];let i=t.length;const s=[];for(let e=0;e<t.length;e++)s.push(t[e](a.bind(null,e)));return()=>{for(const t of s)t()};function a(t,s){n[t]||(n[t]=!0,i--),o[t]=s,i||(e.length?r(o.reduce(((t,r,n)=>(t[e[n]]=r,t)),{})):r(o))}}},isSync:async function(t,e=100){let r=!1,n=!1,o=()=>{r=!0};t((()=>o()))();let i=null;const s=new Promise((t=>{i=t}));o=()=>{n=!0,i()};let a=setTimeout((()=>{a=null,i()}),e);if(await s,a)clearTimeout(a);else if(!r&&!n)throw new Error("Neuron did not fire during grace period");return r&&!n},_isSync:function(t){let e=!1,r=()=>{e=!0};return t((()=>r()))(),r=()=>{throw new Error("NeuronNotSync, subscription invoked after unsubscribe()")},e},gate:function(t,e=!1){const r="function"==typeof e?e:e?i:s;return function(e){let n,i=!0;return t((t=>{const s=r(t,n);(i||s)&&(i=!1,n=o(t),e(t))}))}},settle:function(t,e=10,r=!1){return function(n){let o,i,s=!0;const a=t((t=>{o=t,r&&s&&(s=!1,n(o)),i&&clearTimeout(i),i=setTimeout((()=>{i=null,n(o)}),e)}));return()=>{a&&a(),i&&clearTimeout(i)}}},iter:c,nfo:n};let r=0;function n(e,n){if(!t.exports.V)return e;const o=r++;n||(n=`NFO${a(o)}`);const i=console.info.bind(null,n);let s=0;return t=>{let r=0;const n=i.bind(null,`SYN${a(s++)}`);n(`>>${a(r)}>> connected`);const o=e((e=>{n(`!!${a(r++)}!! `,e),t(e)}));return()=>{o(),n(`<<${a(r)}<< disconnected`)}};function a(t,e=2){return(t+"").padStart(e,"0")}}function o(t){return Array.isArray(t)?[...t]:"object"==typeof t&&null!==t?{...t}:t}function i(t,e){return Array.isArray(t)&&Array.isArray(e)?e.length!==t.length||!!t.find(((t,r)=>e[r]!==t)):"object"==typeof t&&"object"==typeof e&&null!==t&&null!==e?(r=Object.keys(t),n=Object.keys(e).length,!(r.length===n&&!r.find((r=>t[r]!==e[r])))):t!==e;var r,n}function s(t,e){return Array.isArray(t)&&Array.isArray(e)?e.length!==t.length||!!t.find(((t,r)=>s(e[r],t))):"object"==typeof t&&"object"==typeof e&&null!==t&&null!==e?(r=Object.keys(t),n=Object.keys(e).length,!(r.length===n&&!r.find((r=>s(t[r],e[r]))))):t!==e;var r,n}function a(t){const e=new Set;return[function(r){return e.add(r),r(t),()=>{e.delete(r)}},function(r){if(i(t,r)){t=r;for(const t of e)t(r)}return r}]}async function*c(t,e=5){const r=[],n=[];s();let o=0;const i=t((t=>{(-1===e||++o<e)&&s();const n=r.shift();n&&n(t)}));for(;n.length;){const t=n.shift(),e=await t;yield e}function s(){let t=null;const e=new Promise((e=>{t=e}));r.push(t),n.push(e)}i()}Array.from(new Array(8)).map(((t,e)=>Array.from(new Array(8)).map(((t,r)=>`[0;${30+r};${40+e}m`)))),t.exports.V=1}(n);for(var o={},i={byteLength:function(t){var e=h(t),r=e[0],n=e[1];return 3*(r+n)/4-n},toByteArray:function(t){var e,r,n=h(t),o=n[0],i=n[1],s=new c(function(t,e,r){return 3*(e+r)/4-r}(0,o,i)),u=0,l=i>0?o-4:o;for(r=0;r<l;r+=4)e=a[t.charCodeAt(r)]<<18|a[t.charCodeAt(r+1)]<<12|a[t.charCodeAt(r+2)]<<6|a[t.charCodeAt(r+3)],s[u++]=e>>16&255,s[u++]=e>>8&255,s[u++]=255&e;2===i&&(e=a[t.charCodeAt(r)]<<2|a[t.charCodeAt(r+1)]>>4,s[u++]=255&e);1===i&&(e=a[t.charCodeAt(r)]<<10|a[t.charCodeAt(r+1)]<<4|a[t.charCodeAt(r+2)]>>2,s[u++]=e>>8&255,s[u++]=255&e);return s},fromByteArray:function(t){for(var e,r=t.length,n=r%3,o=[],i=16383,a=0,c=r-n;a<c;a+=i)o.push(g(t,a,a+i>c?c:a+i));1===n?(e=t[r-1],o.push(s[e>>2]+s[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],o.push(s[e>>10]+s[e>>4&63]+s[e<<2&63]+"="));return o.join("")}},s=[],a=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,f=u.length;l<f;++l)s[l]=u[l],a[u.charCodeAt(l)]=l;function h(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function g(t,e,r){for(var n,o,i=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),i.push(s[(o=n)>>18&63]+s[o>>12&63]+s[o>>6&63]+s[63&o]);return i.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63;var d={
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
read:function(t,e,r,n,o){var i,s,a=8*o-n-1,c=(1<<a)-1,u=c>>1,l=-7,f=r?o-1:0,h=r?-1:1,g=t[e+f];for(f+=h,i=g&(1<<-l)-1,g>>=-l,l+=a;l>0;i=256*i+t[e+f],f+=h,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=n;l>0;s=256*s+t[e+f],f+=h,l-=8);if(0===i)i=1-u;else{if(i===c)return s?NaN:1/0*(g?-1:1);s+=Math.pow(2,n),i-=u}return(g?-1:1)*s*Math.pow(2,i-n)},write:function(t,e,r,n,o,i){var s,a,c,u=8*i-o-1,l=(1<<u)-1,f=l>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:i-1,d=n?1:-1,p=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),(e+=s+f>=1?h/c:h*Math.pow(2,1-f))*c>=2&&(s++,c/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(e*c-1)*Math.pow(2,o),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,o),s=0));o>=8;t[r+g]=255&a,g+=d,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;t[r+g]=255&s,g+=d,s/=256,u-=8);t[r+g-d]|=128*p}};
/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <https://feross.org>
	 * @license  MIT
	 */
!function(t){const e=i,r=d,n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=function(t){+t!=t&&(t=0);return a.alloc(+t)},t.INSPECT_MAX_BYTES=50;const o=2147483647;function s(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,a.prototype),e}function a(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return l(t)}return c(t,e,r)}function c(t,e,r){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!a.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|p(t,e);let n=s(r);const o=n.write(t,e);o!==r&&(n=n.slice(0,o));return n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(z(t,Uint8Array)){const e=new Uint8Array(t);return h(e.buffer,e.byteOffset,e.byteLength)}return f(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(z(t,ArrayBuffer)||t&&z(t.buffer,ArrayBuffer))return h(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(z(t,SharedArrayBuffer)||t&&z(t.buffer,SharedArrayBuffer)))return h(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return a.from(n,e,r);const o=function(t){if(a.isBuffer(t)){const e=0|g(t.length),r=s(e);return 0===r.length||t.copy(r,0,0,e),r}if(void 0!==t.length)return"number"!=typeof t.length||W(t.length)?s(0):f(t);if("Buffer"===t.type&&Array.isArray(t.data))return f(t.data)}(t);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return a.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function l(t){return u(t),s(t<0?0:0|g(t))}function f(t){const e=t.length<0?0:0|g(t.length),r=s(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function h(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,a.prototype),n}function g(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function p(t,e){if(a.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||z(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let o=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return G(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return q(t).length;default:if(o)return n?-1:G(t).length;e=(""+e).toLowerCase(),o=!0}}function A(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return Q(this,e,r);case"utf8":case"utf-8":return B(this,e,r);case"ascii":return k(this,e,r);case"latin1":case"binary":return x(this,e,r);case"base64":return v(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function y(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function I(t,e,r,n,o){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),W(r=+r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof e&&(e=a.from(e,n)),a.isBuffer(e))return 0===e.length?-1:b(t,e,r,n,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):b(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function b(t,e,r,n,o){let i,s=1,a=t.length,c=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,c/=2,r/=2}function u(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(o){let n=-1;for(i=r;i<a;i++)if(u(t,i)===u(e,-1===n?0:i-n)){if(-1===n&&(n=i),i-n+1===c)return n*s}else-1!==n&&(i-=i-n),n=-1}else for(r+c>a&&(r=a-c),i=r;i>=0;i--){let r=!0;for(let n=0;n<c;n++)if(u(t,i+n)!==u(e,n)){r=!1;break}if(r)return i}return-1}function m(t,e,r,n){r=Number(r)||0;const o=t.length-r;n?(n=Number(n))>o&&(n=o):n=o;const i=e.length;let s;for(n>i/2&&(n=i/2),s=0;s<n;++s){const n=parseInt(e.substr(2*s,2),16);if(W(n))return s;t[r+s]=n}return s}function w(t,e,r,n){return V(G(e,t.length-r),t,r,n)}function E(t,e,r,n){return V(function(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function C(t,e,r,n){return V(q(e),t,r,n)}function _(t,e,r,n){return V(function(t,e){let r,n,o;const i=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(e,t.length-r),t,r,n)}function v(t,r,n){return 0===r&&n===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(r,n))}function B(t,e,r){r=Math.min(t.length,r);const n=[];let o=e;for(;o<r;){const e=t[o];let i=null,s=e>239?4:e>223?3:e>191?2:1;if(o+s<=r){let r,n,a,c;switch(s){case 1:e<128&&(i=e);break;case 2:r=t[o+1],128==(192&r)&&(c=(31&e)<<6|63&r,c>127&&(i=c));break;case 3:r=t[o+1],n=t[o+2],128==(192&r)&&128==(192&n)&&(c=(15&e)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(i=c));break;case 4:r=t[o+1],n=t[o+2],a=t[o+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(c=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(i=c))}}null===i?(i=65533,s=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|1023&i),n.push(i),o+=s}return function(t){const e=t.length;if(e<=S)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=S));return r}(n)}t.kMaxLength=o,a.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(t,e,r){return c(t,e,r)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(t,e,r){return function(t,e,r){return u(t),t<=0?s(t):void 0!==e?"string"==typeof r?s(t).fill(e,r):s(t).fill(e):s(t)}(t,e,r)},a.allocUnsafe=function(t){return l(t)},a.allocUnsafeSlow=function(t){return l(t)},a.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==a.prototype},a.compare=function(t,e){if(z(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),z(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(t)||!a.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let o=0,i=Math.min(r,n);o<i;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=a.allocUnsafe(e);let o=0;for(r=0;r<t.length;++r){let e=t[r];if(z(e,Uint8Array))o+e.length>n.length?(a.isBuffer(e)||(e=a.from(e)),e.copy(n,o)):Uint8Array.prototype.set.call(n,e,o);else{if(!a.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,o)}o+=e.length}return n},a.byteLength=p,a.prototype._isBuffer=!0,a.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)y(this,e,e+1);return this},a.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},a.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},a.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?B(this,0,t):A.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(t,e,r,n,o){if(z(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),e<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&e>=r)return 0;if(n>=o)return-1;if(e>=r)return 1;if(this===t)return 0;let i=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0);const c=Math.min(i,s),u=this.slice(n,o),l=t.slice(e,r);for(let t=0;t<c;++t)if(u[t]!==l[t]){i=u[t],s=l[t];break}return i<s?-1:s<i?1:0},a.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},a.prototype.indexOf=function(t,e,r){return I(this,t,e,r,!0)},a.prototype.lastIndexOf=function(t,e,r){return I(this,t,e,r,!1)},a.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let i=!1;for(;;)switch(n){case"hex":return m(this,t,e,r);case"utf8":case"utf-8":return w(this,t,e,r);case"ascii":case"latin1":case"binary":return E(this,t,e,r);case"base64":return C(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const S=4096;function k(t,e,r){let n="";r=Math.min(t.length,r);for(let o=e;o<r;++o)n+=String.fromCharCode(127&t[o]);return n}function x(t,e,r){let n="";r=Math.min(t.length,r);for(let o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}function Q(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let o="";for(let n=e;n<r;++n)o+=J[t[n]];return o}function M(t,e,r){const n=t.slice(e,r);let o="";for(let t=0;t<n.length-1;t+=2)o+=String.fromCharCode(n[t]+256*n[t+1]);return o}function D(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,r,n,o,i){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function U(t,e,r,n,o){Y(e,n,o,t,r,7);let i=Number(e&BigInt(4294967295));t[r++]=i,i>>=8,t[r++]=i,i>>=8,t[r++]=i,i>>=8,t[r++]=i;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,r}function L(t,e,r,n,o){Y(e,n,o,t,r,7);let i=Number(e&BigInt(4294967295));t[r+7]=i,i>>=8,t[r+6]=i,i>>=8,t[r+5]=i,i>>=8,t[r+4]=i;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s>>=8,t[r+2]=s,s>>=8,t[r+1]=s,s>>=8,t[r]=s,r+8}function T(t,e,r,n,o,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function P(t,e,n,o,i){return e=+e,n>>>=0,i||T(t,0,n,4),r.write(t,e,n,o,23,4),n+4}function F(t,e,n,o,i){return e=+e,n>>>=0,i||T(t,0,n,8),r.write(t,e,n,o,52,8),n+8}a.prototype.slice=function(t,e){const r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,a.prototype),n},a.prototype.readUintLE=a.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||D(t,e,this.length);let n=this[t],o=1,i=0;for(;++i<e&&(o*=256);)n+=this[t+i]*o;return n},a.prototype.readUintBE=a.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||D(t,e,this.length);let n=this[t+--e],o=1;for(;e>0&&(o*=256);)n+=this[t+--e]*o;return n},a.prototype.readUint8=a.prototype.readUInt8=function(t,e){return t>>>=0,e||D(t,1,this.length),this[t]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(t,e){return t>>>=0,e||D(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(t,e){return t>>>=0,e||D(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(t,e){return t>>>=0,e||D(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(t,e){return t>>>=0,e||D(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readBigUInt64LE=X((function(t){j(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||K(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,o=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(o)<<BigInt(32))})),a.prototype.readBigUInt64BE=X((function(t){j(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||K(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],o=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(o)})),a.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||D(t,e,this.length);let n=this[t],o=1,i=0;for(;++i<e&&(o*=256);)n+=this[t+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*e)),n},a.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||D(t,e,this.length);let n=e,o=1,i=this[t+--n];for(;n>0&&(o*=256);)i+=this[t+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},a.prototype.readInt8=function(t,e){return t>>>=0,e||D(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},a.prototype.readInt16LE=function(t,e){t>>>=0,e||D(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(t,e){t>>>=0,e||D(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(t,e){return t>>>=0,e||D(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return t>>>=0,e||D(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readBigInt64LE=X((function(t){j(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||K(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),a.prototype.readBigInt64BE=X((function(t){j(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||K(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),a.prototype.readFloatLE=function(t,e){return t>>>=0,e||D(t,4,this.length),r.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return t>>>=0,e||D(t,4,this.length),r.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return t>>>=0,e||D(t,8,this.length),r.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return t>>>=0,e||D(t,8,this.length),r.read(this,t,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){O(this,t,e,r,Math.pow(2,8*r)-1,0)}let o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){O(this,t,e,r,Math.pow(2,8*r)-1,0)}let o=r-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+r},a.prototype.writeUint8=a.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,1,255,0),this[e]=255&t,e+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},a.prototype.writeBigUInt64LE=X((function(t,e=0){return U(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),a.prototype.writeBigUInt64BE=X((function(t,e=0){return L(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),a.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);O(this,t,e,r,n-1,-n)}let o=0,i=1,s=0;for(this[e]=255&t;++o<r&&(i*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/i>>0)-s&255;return e+r},a.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);O(this,t,e,r,n-1,-n)}let o=r-1,i=1,s=0;for(this[e+o]=255&t;--o>=0&&(i*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/i>>0)-s&255;return e+r},a.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},a.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},a.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},a.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},a.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},a.prototype.writeBigInt64LE=X((function(t,e=0){return U(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),a.prototype.writeBigInt64BE=X((function(t,e=0){return L(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),a.prototype.writeFloatLE=function(t,e,r){return P(this,t,e,!0,r)},a.prototype.writeFloatBE=function(t,e,r){return P(this,t,e,!1,r)},a.prototype.writeDoubleLE=function(t,e,r){return F(this,t,e,!0,r)},a.prototype.writeDoubleBE=function(t,e,r){return F(this,t,e,!1,r)},a.prototype.copy=function(t,e,r,n){if(!a.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const o=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),o},a.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{const i=a.isBuffer(t)?t:a.from(t,n),s=i.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<r-e;++o)this[o+e]=i[o%s]}return this};const $={};function N(t,e,r){$[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function R(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function Y(t,e,r,n,o,i){if(t>r||t<e){const n="bigint"==typeof e?"n":"";let o;throw o=i>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(i+1)}${n}`:`>= -(2${n} ** ${8*(i+1)-1}${n}) and < 2 ** ${8*(i+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new $.ERR_OUT_OF_RANGE("value",o,t)}!function(t,e,r){j(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||K(e,t.length-(r+1))}(n,o,i)}function j(t,e){if("number"!=typeof t)throw new $.ERR_INVALID_ARG_TYPE(e,"number",t)}function K(t,e,r){if(Math.floor(t)!==t)throw j(t,r),new $.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new $.ERR_BUFFER_OUT_OF_BOUNDS;throw new $.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}N("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),N("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),N("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,o=r;return Number.isInteger(r)&&Math.abs(r)>2**32?o=R(String(r)):"bigint"==typeof r&&(o=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(o=R(o)),o+="n"),n+=` It must be ${e}. Received ${o}`,n}),RangeError);const H=/[^+/0-9A-Za-z-_]/g;function G(t,e){let r;e=e||1/0;const n=t.length;let o=null;const i=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function q(t){return e.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function V(t,e,r,n){let o;for(o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}function z(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function W(t){return t!=t}const J=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let o=0;o<16;++o)e[n+o]=t[r]+t[o]}return e}();function X(t){return"undefined"==typeof BigInt?Z:t}function Z(){throw new Error("BigInt not supported")}}(o);var p,A={exports:{}},y="object"==typeof Reflect?Reflect:null,I=y&&"function"==typeof y.apply?y.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};p=y&&"function"==typeof y.ownKeys?y.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var b=Number.isNaN||function(t){return t!=t};function m(){m.init.call(this)}A.exports=m,A.exports.once=function(t,e){return new Promise((function(r,n){function o(r){t.removeListener(e,i),n(r)}function i(){"function"==typeof t.removeListener&&t.removeListener("error",o),r([].slice.call(arguments))}Q(t,e,i,{once:!0}),"error"!==e&&function(t,e,r){"function"==typeof t.on&&Q(t,"error",e,r)}(t,o,{once:!0})}))},m.EventEmitter=m,m.prototype._events=void 0,m.prototype._eventsCount=0,m.prototype._maxListeners=void 0;var w=10;function E(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function C(t){return void 0===t._maxListeners?m.defaultMaxListeners:t._maxListeners}function _(t,e,r,n){var o,i,s,a;if(E(r),void 0===(i=t._events)?(i=t._events=Object.create(null),t._eventsCount=0):(void 0!==i.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),i=t._events),s=i[e]),void 0===s)s=i[e]=r,++t._eventsCount;else if("function"==typeof s?s=i[e]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(o=C(t))>0&&s.length>o&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=s.length,a=c,console&&console.warn&&console.warn(a)}return t}function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function B(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},o=v.bind(n);return o.listener=r,n.wrapFn=o,o}function S(t,e,r){var n=t._events;if(void 0===n)return[];var o=n[e];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(o):x(o,o.length)}function k(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function x(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function Q(t,e,r,n){if("function"==typeof t.on)n.once?t.once(e,r):t.on(e,r);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function o(i){n.once&&t.removeEventListener(e,o),r(i)}))}}Object.defineProperty(m,"defaultMaxListeners",{enumerable:!0,get:function(){return w},set:function(t){if("number"!=typeof t||t<0||b(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");w=t}}),m.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},m.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||b(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},m.prototype.getMaxListeners=function(){return C(this)},m.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var i;if(e.length>0&&(i=e[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var a=o[t];if(void 0===a)return!1;if("function"==typeof a)I(a,this,e);else{var c=a.length,u=x(a,c);for(r=0;r<c;++r)I(u[r],this,e)}return!0},m.prototype.addListener=function(t,e){return _(this,t,e,!1)},m.prototype.on=m.prototype.addListener,m.prototype.prependListener=function(t,e){return _(this,t,e,!0)},m.prototype.once=function(t,e){return E(e),this.on(t,B(this,t,e)),this},m.prototype.prependOnceListener=function(t,e){return E(e),this.prependListener(t,B(this,t,e)),this},m.prototype.removeListener=function(t,e){var r,n,o,i,s;if(E(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===e||r[i].listener===e){s=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,o),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,s||e)}return this},m.prototype.off=m.prototype.removeListener,m.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},m.prototype.listeners=function(t){return S(this,t,!0)},m.prototype.rawListeners=function(t){return S(this,t,!1)},m.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):k.call(t,e)},m.prototype.listenerCount=k,m.prototype.eventNames=function(){return this._eventsCount>0?p(this._events):[]};var M,D,O={exports:{}},U=O.exports={};function L(){throw new Error("setTimeout has not been defined")}function T(){throw new Error("clearTimeout has not been defined")}function P(t){if(M===setTimeout)return setTimeout(t,0);if((M===L||!M)&&setTimeout)return M=setTimeout,setTimeout(t,0);try{return M(t,0)}catch(e){try{return M.call(null,t,0)}catch(e){return M.call(this,t,0)}}}!function(){try{M="function"==typeof setTimeout?setTimeout:L}catch(t){M=L}try{D="function"==typeof clearTimeout?clearTimeout:T}catch(t){D=T}}();var F,$=[],N=!1,R=-1;function Y(){N&&F&&(N=!1,F.length?$=F.concat($):R=-1,$.length&&j())}function j(){if(!N){var t=P(Y);N=!0;for(var e=$.length;e;){for(F=$,$=[];++R<e;)F&&F[R].run();R=-1,e=$.length}F=null,N=!1,function(t){if(D===clearTimeout)return clearTimeout(t);if((D===T||!D)&&clearTimeout)return D=clearTimeout,clearTimeout(t);try{D(t)}catch(e){try{return D.call(null,t)}catch(e){return D.call(this,t)}}}(t)}}function K(t,e){this.fun=t,this.array=e}function H(){}U.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];$.push(new K(t,e)),1!==$.length||N||P(j)},K.prototype.run=function(){this.fun.apply(null,this.array)},U.title="browser",U.browser=!0,U.env={},U.argv=[],U.version="",U.versions={},U.on=H,U.addListener=H,U.once=H,U.off=H,U.removeListener=H,U.removeAllListeners=H,U.emit=H,U.prependListener=H,U.prependOnceListener=H,U.listeners=function(t){return[]},U.binding=function(t){throw new Error("process.binding is not supported")},U.cwd=function(){return"/"},U.chdir=function(t){throw new Error("process.chdir is not supported")},U.umask=function(){return 0};var G,q=O.exports,V={},z={},W=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(42!==o.value||!0!==o.enumerable)return!1}return!0},J=W,X=function(){return J()&&!!Symbol.toStringTag},Z="undefined"!=typeof Symbol&&Symbol,tt=W,et="Function.prototype.bind called on incompatible ",rt=Array.prototype.slice,nt=Object.prototype.toString,ot="[object Function]",it=function(t){var e=this;if("function"!=typeof e||nt.call(e)!==ot)throw new TypeError(et+e);for(var r,n=rt.call(arguments,1),o=function(){if(this instanceof r){var o=e.apply(this,n.concat(rt.call(arguments)));return Object(o)===o?o:this}return e.apply(t,n.concat(rt.call(arguments)))},i=Math.max(0,e.length-n.length),s=[],a=0;a<i;a++)s.push("$"+a);if(r=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(o),e.prototype){var c=function(){};c.prototype=e.prototype,r.prototype=new c,c.prototype=null}return r},st=Function.prototype.bind||it,at=st.call(Function.call,Object.prototype.hasOwnProperty),ct=SyntaxError,ut=Function,lt=TypeError,ft=function(t){try{return ut('"use strict"; return ('+t+").constructor;")()}catch(t){}},ht=Object.getOwnPropertyDescriptor;if(ht)try{ht({},"")}catch(t){ht=null}var gt=function(){throw new lt},dt=ht?function(){try{return gt}catch(t){try{return ht(arguments,"callee").get}catch(t){return gt}}}():gt,pt="function"==typeof Z&&"function"==typeof Symbol&&"symbol"==typeof Z("foo")&&"symbol"==typeof Symbol("bar")&&tt(),At=Object.getPrototypeOf||function(t){return t.__proto__},yt={},It="undefined"==typeof Uint8Array?G:At(Uint8Array),bt={"%AggregateError%":"undefined"==typeof AggregateError?G:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?G:ArrayBuffer,"%ArrayIteratorPrototype%":pt?At([][Symbol.iterator]()):G,"%AsyncFromSyncIteratorPrototype%":G,"%AsyncFunction%":yt,"%AsyncGenerator%":yt,"%AsyncGeneratorFunction%":yt,"%AsyncIteratorPrototype%":yt,"%Atomics%":"undefined"==typeof Atomics?G:Atomics,"%BigInt%":"undefined"==typeof BigInt?G:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?G:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?G:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?G:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?G:FinalizationRegistry,"%Function%":ut,"%GeneratorFunction%":yt,"%Int8Array%":"undefined"==typeof Int8Array?G:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?G:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?G:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":pt?At(At([][Symbol.iterator]())):G,"%JSON%":"object"==typeof JSON?JSON:G,"%Map%":"undefined"==typeof Map?G:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&pt?At((new Map)[Symbol.iterator]()):G,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?G:Promise,"%Proxy%":"undefined"==typeof Proxy?G:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?G:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?G:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&pt?At((new Set)[Symbol.iterator]()):G,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?G:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":pt?At(""[Symbol.iterator]()):G,"%Symbol%":pt?Symbol:G,"%SyntaxError%":ct,"%ThrowTypeError%":dt,"%TypedArray%":It,"%TypeError%":lt,"%Uint8Array%":"undefined"==typeof Uint8Array?G:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?G:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?G:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?G:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?G:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?G:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?G:WeakSet},mt=function t(e){var r;if("%AsyncFunction%"===e)r=ft("async function () {}");else if("%GeneratorFunction%"===e)r=ft("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=ft("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var o=t("%AsyncGenerator%");o&&(r=At(o.prototype))}return bt[e]=r,r},wt={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Et=st,Ct=at,_t=Et.call(Function.call,Array.prototype.concat),vt=Et.call(Function.apply,Array.prototype.splice),Bt=Et.call(Function.call,String.prototype.replace),St=Et.call(Function.call,String.prototype.slice),kt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,xt=/\\(\\)?/g,Qt=function(t){var e=St(t,0,1),r=St(t,-1);if("%"===e&&"%"!==r)throw new ct("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new ct("invalid intrinsic syntax, expected opening `%`");var n=[];return Bt(t,kt,(function(t,e,r,o){n[n.length]=r?Bt(o,xt,"$1"):e||t})),n},Mt=function(t,e){var r,n=t;if(Ct(wt,n)&&(n="%"+(r=wt[n])[0]+"%"),Ct(bt,n)){var o=bt[n];if(o===yt&&(o=mt(n)),void 0===o&&!e)throw new lt("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new ct("intrinsic "+t+" does not exist!")},Dt=function(t,e){if("string"!=typeof t||0===t.length)throw new lt("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new lt('"allowMissing" argument must be a boolean');var r=Qt(t),n=r.length>0?r[0]:"",o=Mt("%"+n+"%",e),i=o.name,s=o.value,a=!1,c=o.alias;c&&(n=c[0],vt(r,_t([0,1],c)));for(var u=1,l=!0;u<r.length;u+=1){var f=r[u],h=St(f,0,1),g=St(f,-1);if(('"'===h||"'"===h||"`"===h||'"'===g||"'"===g||"`"===g)&&h!==g)throw new ct("property names with quotes must have matching quotes");if("constructor"!==f&&l||(a=!0),Ct(bt,i="%"+(n+="."+f)+"%"))s=bt[i];else if(null!=s){if(!(f in s)){if(!e)throw new lt("base intrinsic for "+t+" exists, but the property is not available.");return}if(ht&&u+1>=r.length){var d=ht(s,f);s=(l=!!d)&&"get"in d&&!("originalValue"in d.get)?d.get:s[f]}else l=Ct(s,f),s=s[f];l&&!a&&(bt[i]=s)}}return s},Ot={exports:{}};!function(t){var e=st,r=Dt,n=r("%Function.prototype.apply%"),o=r("%Function.prototype.call%"),i=r("%Reflect.apply%",!0)||e.call(o,n),s=r("%Object.getOwnPropertyDescriptor%",!0),a=r("%Object.defineProperty%",!0),c=r("%Math.max%");if(a)try{a({},"a",{value:1})}catch(t){a=null}t.exports=function(t){var r=i(e,o,arguments);if(s&&a){var n=s(r,"length");n.configurable&&a(r,"length",{value:1+c(0,t.length-(arguments.length-1))})}return r};var u=function(){return i(e,n,arguments)};a?a(t.exports,"apply",{value:u}):t.exports.apply=u}(Ot);var Ut=Dt,Lt=Ot.exports,Tt=Lt(Ut("String.prototype.indexOf")),Pt=function(t,e){var r=Ut(t,!!e);return"function"==typeof r&&Tt(t,".prototype.")>-1?Lt(r):r},Ft=X(),$t=Pt("Object.prototype.toString"),Nt=function(t){return!(Ft&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===$t(t)},Rt=function(t){return!!Nt(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==$t(t)&&"[object Function]"===$t(t.callee)},Yt=function(){return Nt(arguments)}();Nt.isLegacyArguments=Rt;var jt,Kt=Yt?Nt:Rt,Ht=Object.prototype.toString,Gt=Function.prototype.toString,qt=/^\s*(?:function)?\*/,Vt=X(),zt=Object.getPrototypeOf,Wt=function(t){if("function"!=typeof t)return!1;if(qt.test(Gt.call(t)))return!0;if(!Vt)return"[object GeneratorFunction]"===Ht.call(t);if(!zt)return!1;if(void 0===jt){var e=function(){if(!Vt)return!1;try{return Function("return function*() {}")()}catch(t){}}();jt=!!e&&zt(e)}return zt(t)===jt},Jt=Object.prototype.hasOwnProperty,Xt=Object.prototype.toString,Zt=function(t,e,r){if("[object Function]"!==Xt.call(e))throw new TypeError("iterator must be a function");var n=t.length;if(n===+n)for(var o=0;o<n;o++)e.call(r,t[o],o,t);else for(var i in t)Jt.call(t,i)&&e.call(r,t[i],i,t)},te=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],ee="undefined"==typeof globalThis?t:globalThis,re=function(){for(var t=[],e=0;e<te.length;e++)"function"==typeof ee[te[e]]&&(t[t.length]=te[e]);return t},ne=Dt("%Object.getOwnPropertyDescriptor%",!0);if(ne)try{ne([],"length")}catch(t){ne=null}var oe=ne,ie=Zt,se=re,ae=Pt,ce=ae("Object.prototype.toString"),ue=X(),le="undefined"==typeof globalThis?t:globalThis,fe=se(),he=ae("Array.prototype.indexOf",!0)||function(t,e){for(var r=0;r<t.length;r+=1)if(t[r]===e)return r;return-1},ge=ae("String.prototype.slice"),de={},pe=oe,Ae=Object.getPrototypeOf;ue&&pe&&Ae&&ie(fe,(function(t){var e=new le[t];if(Symbol.toStringTag in e){var r=Ae(e),n=pe(r,Symbol.toStringTag);if(!n){var o=Ae(r);n=pe(o,Symbol.toStringTag)}de[t]=n.get}}));var ye=function(t){if(!t||"object"!=typeof t)return!1;if(!ue||!(Symbol.toStringTag in t)){var e=ge(ce(t),8,-1);return he(fe,e)>-1}return!!pe&&function(t){var e=!1;return ie(de,(function(r,n){if(!e)try{e=r.call(t)===n}catch(t){}})),e}(t)},Ie=Zt,be=re,me=Pt,we=me("Object.prototype.toString"),Ee=X(),Ce="undefined"==typeof globalThis?t:globalThis,_e=be(),ve=me("String.prototype.slice"),Be={},Se=oe,ke=Object.getPrototypeOf;Ee&&Se&&ke&&Ie(_e,(function(t){if("function"==typeof Ce[t]){var e=new Ce[t];if(Symbol.toStringTag in e){var r=ke(e),n=Se(r,Symbol.toStringTag);if(!n){var o=ke(r);n=Se(o,Symbol.toStringTag)}Be[t]=n.get}}}));var xe=ye,Qe=function(t){return!!xe(t)&&(Ee&&Symbol.toStringTag in t?function(t){var e=!1;return Ie(Be,(function(r,n){if(!e)try{var o=r.call(t);o===n&&(e=o)}catch(t){}})),e}(t):ve(we(t),8,-1))};!function(t){var e=Kt,r=Wt,n=Qe,o=ye;function i(t){return t.call.bind(t)}var s="undefined"!=typeof BigInt,a="undefined"!=typeof Symbol,c=i(Object.prototype.toString),u=i(Number.prototype.valueOf),l=i(String.prototype.valueOf),f=i(Boolean.prototype.valueOf);if(s)var h=i(BigInt.prototype.valueOf);if(a)var g=i(Symbol.prototype.valueOf);function d(t,e){if("object"!=typeof t)return!1;try{return e(t),!0}catch(t){return!1}}function p(t){return"[object Map]"===c(t)}function A(t){return"[object Set]"===c(t)}function y(t){return"[object WeakMap]"===c(t)}function I(t){return"[object WeakSet]"===c(t)}function b(t){return"[object ArrayBuffer]"===c(t)}function m(t){return"undefined"!=typeof ArrayBuffer&&(b.working?b(t):t instanceof ArrayBuffer)}function w(t){return"[object DataView]"===c(t)}function E(t){return"undefined"!=typeof DataView&&(w.working?w(t):t instanceof DataView)}t.isArgumentsObject=e,t.isGeneratorFunction=r,t.isTypedArray=o,t.isPromise=function(t){return"undefined"!=typeof Promise&&t instanceof Promise||null!==t&&"object"==typeof t&&"function"==typeof t.then&&"function"==typeof t.catch},t.isArrayBufferView=function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):o(t)||E(t)},t.isUint8Array=function(t){return"Uint8Array"===n(t)},t.isUint8ClampedArray=function(t){return"Uint8ClampedArray"===n(t)},t.isUint16Array=function(t){return"Uint16Array"===n(t)},t.isUint32Array=function(t){return"Uint32Array"===n(t)},t.isInt8Array=function(t){return"Int8Array"===n(t)},t.isInt16Array=function(t){return"Int16Array"===n(t)},t.isInt32Array=function(t){return"Int32Array"===n(t)},t.isFloat32Array=function(t){return"Float32Array"===n(t)},t.isFloat64Array=function(t){return"Float64Array"===n(t)},t.isBigInt64Array=function(t){return"BigInt64Array"===n(t)},t.isBigUint64Array=function(t){return"BigUint64Array"===n(t)},p.working="undefined"!=typeof Map&&p(new Map),t.isMap=function(t){return"undefined"!=typeof Map&&(p.working?p(t):t instanceof Map)},A.working="undefined"!=typeof Set&&A(new Set),t.isSet=function(t){return"undefined"!=typeof Set&&(A.working?A(t):t instanceof Set)},y.working="undefined"!=typeof WeakMap&&y(new WeakMap),t.isWeakMap=function(t){return"undefined"!=typeof WeakMap&&(y.working?y(t):t instanceof WeakMap)},I.working="undefined"!=typeof WeakSet&&I(new WeakSet),t.isWeakSet=function(t){return I(t)},b.working="undefined"!=typeof ArrayBuffer&&b(new ArrayBuffer),t.isArrayBuffer=m,w.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&w(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=E;var C="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function _(t){return"[object SharedArrayBuffer]"===c(t)}function v(t){return void 0!==C&&(void 0===_.working&&(_.working=_(new C)),_.working?_(t):t instanceof C)}function B(t){return d(t,u)}function S(t){return d(t,l)}function k(t){return d(t,f)}function x(t){return s&&d(t,h)}function Q(t){return a&&d(t,g)}t.isSharedArrayBuffer=v,t.isAsyncFunction=function(t){return"[object AsyncFunction]"===c(t)},t.isMapIterator=function(t){return"[object Map Iterator]"===c(t)},t.isSetIterator=function(t){return"[object Set Iterator]"===c(t)},t.isGeneratorObject=function(t){return"[object Generator]"===c(t)},t.isWebAssemblyCompiledModule=function(t){return"[object WebAssembly.Module]"===c(t)},t.isNumberObject=B,t.isStringObject=S,t.isBooleanObject=k,t.isBigIntObject=x,t.isSymbolObject=Q,t.isBoxedPrimitive=function(t){return B(t)||S(t)||k(t)||x(t)||Q(t)},t.isAnyArrayBuffer=function(t){return"undefined"!=typeof Uint8Array&&(m(t)||v(t))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))}(z);var Me=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8},De={exports:{}};"function"==typeof Object.create?De.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:De.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t){var e=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++)r[e[n]]=Object.getOwnPropertyDescriptor(t,e[n]);return r},r=/%[sdj%]/g;t.format=function(t){if(!A(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(s(arguments[n]));return e.join(" ")}n=1;for(var o=arguments,i=o.length,a=String(t).replace(r,(function(t){if("%%"===t)return"%";if(n>=i)return t;switch(t){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(t){return"[Circular]"}default:return t}})),c=o[n];n<i;c=o[++n])d(c)||!b(c)?a+=" "+c:a+=" "+s(c);return a},t.deprecate=function(e,r){if(void 0!==q&&!0===q.noDeprecation)return e;if(void 0===q)return function(){return t.deprecate(e,r).apply(this,arguments)};var n=!1;return function(){if(!n){if(q.throwDeprecation)throw new Error(r);q.traceDeprecation?console.trace(r):console.error(r),n=!0}return e.apply(this,arguments)}};var n={},o=/^$/;if(q.env.NODE_DEBUG){var i=q.env.NODE_DEBUG;i=i.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),o=new RegExp("^"+i+"$","i")}function s(e,r){var n={seen:[],stylize:c};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),g(r)?n.showHidden=r:r&&t._extend(n,r),y(n.showHidden)&&(n.showHidden=!1),y(n.depth)&&(n.depth=2),y(n.colors)&&(n.colors=!1),y(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=a),u(n,e,n.depth)}function a(t,e){var r=s.styles[e];return r?"["+s.colors[r][0]+"m"+t+"["+s.colors[r][1]+"m":t}function c(t,e){return t}function u(e,r,n){if(e.customInspect&&r&&E(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,e);return A(o)||(o=u(e,o,n)),o}var i=function(t,e){if(y(e))return t.stylize("undefined","undefined");if(A(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(p(e))return t.stylize(""+e,"number");if(g(e))return t.stylize(""+e,"boolean");if(d(e))return t.stylize("null","null")}(e,r);if(i)return i;var s=Object.keys(r),a=function(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(r)),w(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(r);if(0===s.length){if(E(r)){var c=r.name?": "+r.name:"";return e.stylize("[Function"+c+"]","special")}if(I(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(m(r))return e.stylize(Date.prototype.toString.call(r),"date");if(w(r))return l(r)}var b,C="",_=!1,v=["{","}"];(h(r)&&(_=!0,v=["[","]"]),E(r))&&(C=" [Function"+(r.name?": "+r.name:"")+"]");return I(r)&&(C=" "+RegExp.prototype.toString.call(r)),m(r)&&(C=" "+Date.prototype.toUTCString.call(r)),w(r)&&(C=" "+l(r)),0!==s.length||_&&0!=r.length?n<0?I(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),b=_?function(t,e,r,n,o){for(var i=[],s=0,a=e.length;s<a;++s)S(e,String(s))?i.push(f(t,e,r,n,String(s),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(f(t,e,r,n,o,!0))})),i}(e,r,n,a,s):s.map((function(t){return f(e,r,n,a,t,_)})),e.seen.pop(),function(t,e,r){if(t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(b,C,v)):v[0]+C+v[1]}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,r,n,o,i){var s,a,c;if((c=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]}).get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),S(n,o)||(s="["+o+"]"),a||(t.seen.indexOf(c.value)<0?(a=d(r)?u(t,c.value,null):u(t,c.value,r-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),y(s)){if(i&&o.match(/^\d+$/))return a;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function h(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function d(t){return null===t}function p(t){return"number"==typeof t}function A(t){return"string"==typeof t}function y(t){return void 0===t}function I(t){return b(t)&&"[object RegExp]"===C(t)}function b(t){return"object"==typeof t&&null!==t}function m(t){return b(t)&&"[object Date]"===C(t)}function w(t){return b(t)&&("[object Error]"===C(t)||t instanceof Error)}function E(t){return"function"==typeof t}function C(t){return Object.prototype.toString.call(t)}function _(t){return t<10?"0"+t.toString(10):t.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!n[e])if(o.test(e)){var r=q.pid;n[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,n)}}else n[e]=function(){};return n[e]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=z,t.isArray=h,t.isBoolean=g,t.isNull=d,t.isNullOrUndefined=function(t){return null==t},t.isNumber=p,t.isString=A,t.isSymbol=function(t){return"symbol"==typeof t},t.isUndefined=y,t.isRegExp=I,t.types.isRegExp=I,t.isObject=b,t.isDate=m,t.types.isDate=m,t.isError=w,t.types.isNativeError=w,t.isFunction=E,t.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},t.isBuffer=Me;var v=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function B(){var t=new Date,e=[_(t.getHours()),_(t.getMinutes()),_(t.getSeconds())].join(":");return[t.getDate(),v[t.getMonth()],e].join(" ")}function S(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.log=function(){console.log("%s - %s",B(),t.format.apply(t,arguments))},t.inherits=De.exports,t._extend=function(t,e){if(!e||!b(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t};var k="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function x(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}t.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(k&&t[k]){var r;if("function"!=typeof(r=t[k]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,k,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var e,r,n=new Promise((function(t,n){e=t,r=n})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(t,n){t?r(t):e(n)}));try{t.apply(this,o)}catch(t){r(t)}return n}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),k&&Object.defineProperty(r,k,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,e(t))},t.promisify.custom=k,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function r(){for(var e=[],r=0;r<arguments.length;r++)e.push(arguments[r]);var n=e.pop();if("function"!=typeof n)throw new TypeError("The last argument must be of type Function");var o=this,i=function(){return n.apply(o,arguments)};t.apply(this,e).then((function(t){q.nextTick(i.bind(null,null,t))}),(function(t){q.nextTick(x.bind(null,t,i))}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,e(t)),r}}(V);var Oe={exports:{}},Ue={},Le=function(...t){const e=t.reduce(((t,e)=>Object.assign(t,e)),{});return Object.assign(e,{bufferKeys:e.bufferKeys||!1,snapshots:e.snapshots||!1,permanence:e.permanence||!1,seek:e.seek||!1,clear:e.clear||!1,getMany:e.getMany||!1,keyIterator:e.keyIterator||!1,valueIterator:e.valueIterator||!1,iteratorNextv:e.iteratorNextv||!1,iteratorAll:e.iteratorAll||!1,status:e.status||!1,idempotentOpen:e.idempotentOpen||!1,passiveOpen:e.passiveOpen||!1,serialize:e.serialize||!1,createIfMissing:e.createIfMissing||!1,errorIfExists:e.errorIfExists||!1,deferredOpen:e.deferredOpen||!1,openCallback:e.openCallback||!1,promises:e.promises||!1,streams:e.streams||!1,encodings:Te(e.encodings),events:Te(e.events),additionalMethods:Object.assign({},e.additionalMethods)})};function Te(t){return!!t&&Object.assign({},t)}
/*!
	 * Determine if an object is a Buffer
	 *
	 * @author   Feross Aboukhadijeh <https://feross.org>
	 * @license  MIT
	 */var Pe={},Fe="function"==typeof queueMicrotask?queueMicrotask:t=>Promise.resolve().then(t);
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
let $e;Pe.fromCallback=function(t,e){if(void 0===t){var r=new Promise((function(e,r){t=function(t,n){t?r(t):e(n)}}));t[void 0!==e?e:"promise"]=r}else if("function"!=typeof t)throw new TypeError("Callback must be a function");return t},Pe.fromPromise=function(t,e){if(void 0===e)return t;t.then((function(t){Fe((()=>e(null,t)))})).catch((function(t){Fe((()=>e(t)))}))};var Ne="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:t):t=>($e||($e=Promise.resolve())).then(t).catch((t=>setTimeout((()=>{throw t}),0)));const Re=Ne;var Ye=function(t,...e){0===e.length?Re(t):Re((()=>t(...e)))};function je(t){if("object"!=typeof t||null===t)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=t,this._ended=!1,this._nexting=!1}je.prototype.next=function(t){let e=this;if(void 0===t)e=new Promise((function(e,r){t=function(t,n,o){t?r(t):void 0===n&&void 0===o?e():e([n,o])}}));else if("function"!=typeof t)throw new Error("next() requires a callback argument");return this._ended?(this._nextTick(t,new Error("cannot call next() after end()")),e):this._nexting?(this._nextTick(t,new Error("cannot call next() before previous next() has completed")),e):(this._nexting=!0,this._next(((e,...r)=>{this._nexting=!1,t(e,...r)})),e)},je.prototype._next=function(t){this._nextTick(t)},je.prototype.seek=function(t){if(this._ended)throw new Error("cannot call seek() after end()");if(this._nexting)throw new Error("cannot call seek() before next() has completed");t=this.db._serializeKey(t),this._seek(t)},je.prototype._seek=function(t){},je.prototype.end=function(t){let e;if(void 0===t)e=new Promise((function(e,r){t=function(t){t?r(t):e()}}));else if("function"!=typeof t)throw new Error("end() requires a callback argument");return this._ended?(this._nextTick(t,new Error("end() already called on iterator")),e):(this._ended=!0,this._end(t),e)},je.prototype._end=function(t){this._nextTick(t)},je.prototype[Symbol.asyncIterator]=async function*(){try{let t;for(;void 0!==(t=await this.next());)yield t}finally{this._ended||await this.end()}},je.prototype._nextTick=Ye;var Ke=je;const He=Object.freeze({});function Ge(t){if("object"!=typeof t||null===t)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=t,this._operations=[],this._written=!1}Ge.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")},Ge.prototype.put=function(t,e,r){this._checkWritten();const n=this.db._checkKey(t)||this.db._checkValue(e);if(n)throw n;return t=this.db._serializeKey(t),e=this.db._serializeValue(e),this._put(t,e,null!=r?r:He),this},Ge.prototype._put=function(t,e,r){this._operations.push({...r,type:"put",key:t,value:e})},Ge.prototype.del=function(t,e){this._checkWritten();const r=this.db._checkKey(t);if(r)throw r;return t=this.db._serializeKey(t),this._del(t,null!=e?e:He),this},Ge.prototype._del=function(t,e){this._operations.push({...e,type:"del",key:t})},Ge.prototype.clear=function(){return this._checkWritten(),this._clear(),this},Ge.prototype._clear=function(){this._operations=[]},Ge.prototype.write=function(t,e){if(this._checkWritten(),"function"==typeof t&&(e=t),"function"!=typeof e)throw new Error("write() requires a callback argument");"object"==typeof t&&null!==t||(t={}),this._written=!0,this._write(t,e)},Ge.prototype._write=function(t,e){this.db._batch(this._operations,t,e)},Ge.prototype._nextTick=Ye;var qe=Ge,Ve={getCallback:function(t,e){return"function"==typeof t?t:e},getOptions:function(t){return"object"==typeof t&&null!==t?t:{}}};const ze=Le,We=function(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},Je=Pe,Xe=Ke,Ze=qe,tr=Ve.getCallback,er=Ve.getOptions,rr=Object.prototype.hasOwnProperty,nr=["lt","lte","gt","gte"];function or(t){this.status="new",this.supports=ze(t,{status:!0})}function ir(t,e){const r={};for(const n in e){if(!rr.call(e,n))continue;if("start"===n||"end"===n)throw new Error('Legacy range options ("start" and "end") have been removed');let o=e[n];sr(n)&&(o=t._serializeKey(o)),r[n]=o}return r}function sr(t){return-1!==nr.indexOf(t)}or.prototype.open=function(t,e){const r=this.status;if("function"==typeof t&&(e=t),"function"!=typeof e)throw new Error("open() requires a callback argument");"object"==typeof t&&null!==t||(t={}),t.createIfMissing=!1!==t.createIfMissing,t.errorIfExists=!!t.errorIfExists,this.status="opening",this._open(t,(t=>{if(t)return this.status=r,e(t);this.status="open",e()}))},or.prototype._open=function(t,e){this._nextTick(e)},or.prototype.close=function(t){const e=this.status;if("function"!=typeof t)throw new Error("close() requires a callback argument");this.status="closing",this._close((r=>{if(r)return this.status=e,t(r);this.status="closed",t()}))},or.prototype._close=function(t){this._nextTick(t)},or.prototype.get=function(t,e,r){if("function"==typeof e&&(r=e),"function"!=typeof r)throw new Error("get() requires a callback argument");const n=this._checkKey(t);if(n)return this._nextTick(r,n);t=this._serializeKey(t),"object"==typeof e&&null!==e||(e={}),e.asBuffer=!1!==e.asBuffer,this._get(t,e,r)},or.prototype._get=function(t,e,r){this._nextTick((function(){r(new Error("NotFound"))}))},or.prototype.getMany=function(t,e,r){if(r=tr(e,r),r=Je.fromCallback(r),e=er(e),function(t,e){if(!t.isOperational())return t._nextTick(e,new Error("Database is not open")),!0;return!1}(this,r))return r.promise;if(!Array.isArray(t))return this._nextTick(r,new Error("getMany() requires an array argument")),r.promise;if(0===t.length)return this._nextTick(r,null,[]),r.promise;"boolean"!=typeof e.asBuffer&&(e={...e,asBuffer:!0});const n=new Array(t.length);for(let e=0;e<t.length;e++){const o=t[e],i=this._checkKey(o);if(i)return this._nextTick(r,i),r.promise;n[e]=this._serializeKey(o)}return this._getMany(n,e,r),r.promise},or.prototype._getMany=function(t,e,r){this._nextTick(r,null,new Array(t.length).fill(void 0))},or.prototype.put=function(t,e,r,n){if("function"==typeof r&&(n=r),"function"!=typeof n)throw new Error("put() requires a callback argument");const o=this._checkKey(t)||this._checkValue(e);if(o)return this._nextTick(n,o);t=this._serializeKey(t),e=this._serializeValue(e),"object"==typeof r&&null!==r||(r={}),this._put(t,e,r,n)},or.prototype._put=function(t,e,r,n){this._nextTick(n)},or.prototype.del=function(t,e,r){if("function"==typeof e&&(r=e),"function"!=typeof r)throw new Error("del() requires a callback argument");const n=this._checkKey(t);if(n)return this._nextTick(r,n);t=this._serializeKey(t),"object"==typeof e&&null!==e||(e={}),this._del(t,e,r)},or.prototype._del=function(t,e,r){this._nextTick(r)},or.prototype.batch=function(t,e,r){if(!arguments.length)return this._chainedBatch();if("function"==typeof e&&(r=e),"function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("batch(array) requires a callback argument");if(!Array.isArray(t))return this._nextTick(r,new Error("batch(array) requires an array argument"));if(0===t.length)return this._nextTick(r);"object"==typeof e&&null!==e||(e={});const n=new Array(t.length);for(let e=0;e<t.length;e++){if("object"!=typeof t[e]||null===t[e])return this._nextTick(r,new Error("batch(array) element must be an object and not `null`"));const o=Object.assign({},t[e]);if("put"!==o.type&&"del"!==o.type)return this._nextTick(r,new Error("`type` must be 'put' or 'del'"));const i=this._checkKey(o.key);if(i)return this._nextTick(r,i);if(o.key=this._serializeKey(o.key),"put"===o.type){const t=this._checkValue(o.value);if(t)return this._nextTick(r,t);o.value=this._serializeValue(o.value)}n[e]=o}this._batch(n,e,r)},or.prototype._batch=function(t,e,r){this._nextTick(r)},or.prototype.clear=function(t,e){if("function"==typeof t)e=t;else if("function"!=typeof e)throw new Error("clear() requires a callback argument");(t=ir(this,t)).reverse=!!t.reverse,t.limit="limit"in t?t.limit:-1,this._clear(t,e)},or.prototype._clear=function(t,e){t.keys=!0,t.values=!1,t.keyAsBuffer=!0,t.valueAsBuffer=!0;const r=this._iterator(t),n={},o=t=>{if(t)return r.end((function(){e(t)}));r.next(((t,i)=>t?o(t):void 0===i?r.end(e):void this._del(i,n,o)))};o()},or.prototype._setupIteratorOptions=function(t){return(t=ir(this,t)).reverse=!!t.reverse,t.keys=!1!==t.keys,t.values=!1!==t.values,t.limit="limit"in t?t.limit:-1,t.keyAsBuffer=!1!==t.keyAsBuffer,t.valueAsBuffer=!1!==t.valueAsBuffer,t},or.prototype.iterator=function(t){return"object"==typeof t&&null!==t||(t={}),t=this._setupIteratorOptions(t),this._iterator(t)},or.prototype._iterator=function(t){return new Xe(this)},or.prototype._chainedBatch=function(){return new Ze(this)},or.prototype._serializeKey=function(t){return t},or.prototype._serializeValue=function(t){return t},or.prototype._checkKey=function(t){return null==t?new Error("key cannot be `null` or `undefined`"):We(t)&&0===t.length?new Error("key cannot be an empty Buffer"):""===t?new Error("key cannot be an empty String"):Array.isArray(t)&&0===t.length?new Error("key cannot be an empty Array"):void 0},or.prototype._checkValue=function(t){if(null==t)return new Error("value cannot be `null` or `undefined`")},or.prototype.isOperational=function(){return"open"===this.status||this._isOperational()},or.prototype._isOperational=function(){return!1},or.prototype._nextTick=Ye;var ar=or;Ue.AbstractLevelDOWN=ar,Ue.AbstractIterator=Ke,Ue.AbstractChainedBatch=qe;var cr={getCallback:function(t,e,r){let n=t[t.length-1];if("function"!=typeof n){const o=new Promise(((e,o)=>{t.push(n=function(t,...n){t?o(t):e(r?r(...n):n[0])})}));n[e]=o}return n}};const{AbstractIterator:ur}=Ue,lr=De.exports,fr=cr.getCallback,hr=Symbol("options"),gr=Symbol("iterator"),dr=Symbol("operations"),pr=Symbol("promise");function Ar(t,e){ur.call(this,t),this[hr]=e,this[gr]=null,this[dr]=[]}lr(Ar,ur),Ar.prototype.setDb=function(t){this[gr]=t.iterator(this[hr]);for(const t of this[dr].splice(0,this[dr].length))this[gr][t.method](...t.args)},Ar.prototype.next=function(...t){if("open"===this.db.status)return this[gr].next(...t);const e=fr(t,pr,(function(t,e){return void 0===t&&void 0===e?void 0:[t,e]}));return"opening"===this.db.status?this[dr].push({method:"next",args:t}):this._nextTick(e,new Error("Database is not open")),e[pr]||this},Ar.prototype.seek=function(...t){if("open"===this.db.status)this[gr].seek(...t);else{if("opening"!==this.db.status)throw new Error("Database is not open");this[dr].push({method:"seek",args:t})}},Ar.prototype.end=function(...t){if("open"===this.db.status)return this[gr].end(...t);const e=fr(t,pr);return"opening"===this.db.status?this[dr].push({method:"end",args:t}):this._nextTick(e,new Error("Database is not open")),e[pr]||this};for(const t of["next","seek","end"])Ar.prototype["_"+t]=function(){throw new Error("Did not expect private method to be called: "+t)};var yr=Ar;const{AbstractChainedBatch:Ir}=Ue,br=Symbol("operations");const{AbstractLevelDOWN:mr}=Ue,wr=De.exports,Er=yr,Cr=class extends Ir{constructor(t){super(t),this[br]=[]}_put(t,e,r){this[br].push({...r,type:"put",key:t,value:e})}_del(t,e){this[br].push({...e,type:"del",key:t})}_clear(){this[br]=[]}_write(t,e){this.db.batch(this[br],t,e)}},_r=cr.getCallback,vr=["put","get","getMany","del","batch","clear"],Br=["approximateSize","compactRange"],Sr=Symbol("innerDb"),kr=Symbol("operations"),xr=Symbol("promise");function Qr(t){mr.call(this,t.supports||{});for(const e of Br)"function"!=typeof t[e]||this.supports.additionalMethods[e]||(this.supports.additionalMethods[e]=!0);this[Sr]=t,this[kr]=[],function(t){const e=Object.keys(t.supports.additionalMethods);for(const r of vr.concat(e))t[r]=function(...t){if("batch"===r&&0===t.length)return new Cr(this);if("open"===this.status)return this[Sr][r](...t);const e=_r(t,xr);return"opening"===this.status?this[kr].push({method:r,args:t}):this._nextTick(e,new Error("Database is not open")),e[xr]};t.iterator=function(t){if("open"===this.status)return this[Sr].iterator(t);if("opening"===this.status){const e=new Er(this,t);return this[kr].push({iterator:e}),e}throw new Error("Database is not open")};for(const e of vr.concat(["iterator"]))t["_"+e]=function(){throw new Error("Did not expect private method to be called: "+e)}}(this)}wr(Qr,mr),Qr.prototype.type="deferred-leveldown",Object.defineProperty(Qr.prototype,"_db",{enumerable:!0,get(){return this[Sr]}}),Qr.prototype._open=function(t,e){const r=t=>{if(t||"open"!==this[Sr].status)return e(t||new Error("Database is not open"));const r=this[kr];this[kr]=[];for(const t of r)t.iterator?t.iterator.setDb(this[Sr]):this[Sr][t.method](...t.args);if(this[kr].length>0)throw new Error("Did not expect further operations");e()};"new"===this[Sr].status||"closed"===this[Sr].status?this[Sr].open(t,r):this._nextTick(r)},Qr.prototype._close=function(t){this[Sr].close(t)},Qr.prototype._isOperational=function(){return"opening"===this.status},Oe.exports=Qr,Oe.exports.DeferredIterator=Er;var Mr={exports:{}},Dr=A.exports.EventEmitter,Or=e(Object.freeze({__proto__:null,default:{}}));function Ur(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Lr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Tr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Pr=o.Buffer,Fr=Or.inspect,$r=Fr&&Fr.custom||"inspect";function Nr(t,e,r){Pr.prototype.copy.call(t,e,r)}var Rr=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e,r,n;return e=t,r=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r}},{key:"concat",value:function(t){if(0===this.length)return Pr.alloc(0);for(var e=Pr.allocUnsafe(t>>>0),r=this.head,n=0;r;)Nr(r.data,e,n),n+=r.data.length,r=r.next;return e}},{key:"consume",value:function(t,e){var r;return t<this.head.data.length?(r=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):r=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,r=1,n=e.data;for(t-=n.length;e=e.next;){var o=e.data,i=t>o.length?o.length:t;if(i===o.length?n+=o:n+=o.slice(0,t),0==(t-=i)){i===o.length?(++r,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=o.slice(i));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(t){var e=Pr.allocUnsafe(t),r=this.head,n=1;for(r.data.copy(e),t-=r.data.length;r=r.next;){var o=r.data,i=t>o.length?o.length:t;if(o.copy(e,e.length-t,0,i),0==(t-=i)){i===o.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=o.slice(i));break}++n}return this.length-=n,e}},{key:$r,value:function(t,e){return Fr(this,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ur(Object(r),!0).forEach((function(e){Lr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ur(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e,{depth:0,customInspect:!1}))}}],r&&Tr(e.prototype,r),n&&Tr(e,n),t}();function Yr(t,e){Kr(t,e),jr(t)}function jr(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function Kr(t,e){t.emit("error",e)}var Hr={destroy:function(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return n||o?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,q.nextTick(Kr,this,t)):q.nextTick(Kr,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?r._writableState?r._writableState.errorEmitted?q.nextTick(jr,r):(r._writableState.errorEmitted=!0,q.nextTick(Yr,r,t)):q.nextTick(Yr,r,t):e?(q.nextTick(jr,r),e(t)):q.nextTick(jr,r)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}},Gr={};var qr={};function Vr(t,e,r){r||(r=Error);var n=function(t){var r,n;function o(r,n,o){return t.call(this,function(t,r,n){return"string"==typeof e?e:e(t,r,n)}(r,n,o))||this}return n=t,(r=o).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,o}(r);n.prototype.name=r.name,n.prototype.code=t,qr[t]=n}function zr(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map((function(t){return String(t)})),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:2===r?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}Vr("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),Vr("ERR_INVALID_ARG_TYPE",(function(t,e,r){var n,o,i,s;if("string"==typeof e&&(o="not ",e.substr(!i||i<0?0:+i,o.length)===o)?(n="must not be",e=e.replace(/^not /,"")):n="must be",function(t,e,r){return(void 0===r||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}(t," argument"))s="The ".concat(t," ").concat(n," ").concat(zr(e,"type"));else{var a=function(t,e,r){return"number"!=typeof r&&(r=0),!(r+e.length>t.length)&&-1!==t.indexOf(e,r)}(t,".")?"property":"argument";s='The "'.concat(t,'" ').concat(a," ").concat(n," ").concat(zr(e,"type"))}return s+=". Received type ".concat(typeof r)}),TypeError),Vr("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),Vr("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),Vr("ERR_STREAM_PREMATURE_CLOSE","Premature close"),Vr("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),Vr("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),Vr("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),Vr("ERR_STREAM_WRITE_AFTER_END","write after end"),Vr("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),Vr("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),Vr("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Gr.codes=qr;var Wr=Gr.codes.ERR_INVALID_OPT_VALUE;var Jr={getHighWaterMark:function(t,e,r,n){var o=function(t,e,r){return null!=t.highWaterMark?t.highWaterMark:e?t[r]:null}(e,n,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new Wr(n?r:"highWaterMark",o);return Math.floor(o)}return t.objectMode?16:16384}},Xr=function(t,e){if(Zr("noDeprecation"))return t;var r=!1;return function(){if(!r){if(Zr("throwDeprecation"))throw new Error(e);Zr("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}};function Zr(e){try{if(!t.localStorage)return!1}catch(t){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}var tn,en=Cn;function rn(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var n=t.entry;t.entry=null;for(;n;){var o=n.callback;e.pendingcb--,o(r),n=n.next}e.corkedRequestsFree.next=t}(e,t)}}Cn.WritableState=En;var nn={deprecate:Xr},on=Dr,sn=o.Buffer,an=t.Uint8Array||function(){};var cn,un=Hr,ln=Jr.getHighWaterMark,fn=Gr.codes,hn=fn.ERR_INVALID_ARG_TYPE,gn=fn.ERR_METHOD_NOT_IMPLEMENTED,dn=fn.ERR_MULTIPLE_CALLBACK,pn=fn.ERR_STREAM_CANNOT_PIPE,An=fn.ERR_STREAM_DESTROYED,yn=fn.ERR_STREAM_NULL_VALUES,In=fn.ERR_STREAM_WRITE_AFTER_END,bn=fn.ERR_UNKNOWN_ENCODING,mn=un.errorOrDestroy;function wn(){}function En(t,e,r){tn=tn||Mn,t=t||{},"boolean"!=typeof r&&(r=e instanceof tn),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=ln(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=!1===t.decodeStrings;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,n=r.sync,o=r.writecb;if("function"!=typeof o)throw new dn;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),e)!function(t,e,r,n,o){--e.pendingcb,r?(q.nextTick(o,n),q.nextTick(xn,t,e),t._writableState.errorEmitted=!0,mn(t,n)):(o(n),t._writableState.errorEmitted=!0,mn(t,n),xn(t,e))}(t,r,n,e,o);else{var i=Sn(r)||t.destroyed;i||r.corked||r.bufferProcessing||!r.bufferedRequest||Bn(t,r),n?q.nextTick(vn,t,r,i,o):vn(t,r,i,o)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new rn(this)}function Cn(t){var e=this instanceof(tn=tn||Mn);if(!e&&!cn.call(Cn,this))return new Cn(t);this._writableState=new En(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),on.call(this)}function _n(t,e,r,n,o,i,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new An("write")):r?t._writev(o,e.onwrite):t._write(o,i,e.onwrite),e.sync=!1}function vn(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),xn(t,e)}function Bn(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,o=new Array(n),i=e.corkedRequestsFree;i.entry=r;for(var s=0,a=!0;r;)o[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;o.allBuffers=a,_n(t,e,!0,e.length,o,"",i.finish),e.pendingcb++,e.lastBufferedRequest=null,i.next?(e.corkedRequestsFree=i.next,i.next=null):e.corkedRequestsFree=new rn(e),e.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,u=r.encoding,l=r.callback;if(_n(t,e,!1,e.objectMode?1:c.length,c,u,l),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function Sn(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function kn(t,e){t._final((function(r){e.pendingcb--,r&&mn(t,r),e.prefinished=!0,t.emit("prefinish"),xn(t,e)}))}function xn(t,e){var r=Sn(e);if(r&&(function(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,q.nextTick(kn,t,e)))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}De.exports(Cn,on),En.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(En.prototype,"buffer",{get:nn.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(cn=Function.prototype[Symbol.hasInstance],Object.defineProperty(Cn,Symbol.hasInstance,{value:function(t){return!!cn.call(this,t)||this===Cn&&(t&&t._writableState instanceof En)}})):cn=function(t){return t instanceof this},Cn.prototype.pipe=function(){mn(this,new pn)},Cn.prototype.write=function(t,e,r){var n,o=this._writableState,i=!1,s=!o.objectMode&&(n=t,sn.isBuffer(n)||n instanceof an);return s&&!sn.isBuffer(t)&&(t=function(t){return sn.from(t)}(t)),"function"==typeof e&&(r=e,e=null),s?e="buffer":e||(e=o.defaultEncoding),"function"!=typeof r&&(r=wn),o.ending?function(t,e){var r=new In;mn(t,r),q.nextTick(e,r)}(this,r):(s||function(t,e,r,n){var o;return null===r?o=new yn:"string"==typeof r||e.objectMode||(o=new hn("chunk",["string","Buffer"],r)),!o||(mn(t,o),q.nextTick(n,o),!1)}(this,o,t,r))&&(o.pendingcb++,i=function(t,e,r,n,o,i){if(!r){var s=function(t,e,r){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=sn.from(e,r));return e}(e,n,o);n!==s&&(r=!0,o="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var c=e.length<e.highWaterMark;c||(e.needDrain=!0);if(e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:o,isBuf:r,callback:i,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else _n(t,e,!1,a,n,o,i);return c}(this,o,s,t,e,r)),i},Cn.prototype.cork=function(){this._writableState.corked++},Cn.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||Bn(this,t))},Cn.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new bn(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(Cn.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Cn.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Cn.prototype._write=function(t,e,r){r(new gn("_write()"))},Cn.prototype._writev=null,Cn.prototype.end=function(t,e,r){var n=this._writableState;return"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||function(t,e,r){e.ending=!0,xn(t,e),r&&(e.finished?q.nextTick(r):t.once("finish",r));e.ended=!0,t.writable=!1}(this,n,r),this},Object.defineProperty(Cn.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Cn.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),Cn.prototype.destroy=un.destroy,Cn.prototype._undestroy=un.undestroy,Cn.prototype._destroy=function(t,e){e(t)};var Qn=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e},Mn=Pn,Dn=wo,On=en;De.exports(Pn,Dn);for(var Un=Qn(On.prototype),Ln=0;Ln<Un.length;Ln++){var Tn=Un[Ln];Pn.prototype[Tn]||(Pn.prototype[Tn]=On.prototype[Tn])}function Pn(t){if(!(this instanceof Pn))return new Pn(t);Dn.call(this,t),On.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",Fn)))}function Fn(){this._writableState.ended||q.nextTick($n,this)}function $n(t){t.end()}Object.defineProperty(Pn.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Pn.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Pn.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Pn.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}});var Nn={},Rn={exports:{}};
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
!function(t,e){var r=o,n=r.Buffer;function i(t,e){for(var r in t)e[r]=t[r]}function s(t,e,r){return n(t,e,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=s),s.prototype=Object.create(n.prototype),i(n,s),s.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,r)},s.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var o=n(t);return void 0!==e?"string"==typeof r?o.fill(e,r):o.fill(e):o.fill(0),o},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}}(Rn,Rn.exports);var Yn=Rn.exports.Buffer,jn=Yn.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Kn(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(Yn.isEncoding===jn||!jn(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=qn,this.end=Vn,e=4;break;case"utf8":this.fillLast=Gn,e=4;break;case"base64":this.text=zn,this.end=Wn,e=3;break;default:return this.write=Jn,void(this.end=Xn)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Yn.allocUnsafe(e)}function Hn(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function Gn(t){var e=this.lastTotal-this.lastNeed,r=function(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function qn(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Vn(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function zn(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function Wn(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Jn(t){return t.toString(this.encoding)}function Xn(t){return t&&t.length?this.write(t):""}Nn.StringDecoder=Kn,Kn.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},Kn.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},Kn.prototype.text=function(t,e){var r=function(t,e,r){var n=e.length-1;if(n<r)return 0;var o=Hn(e[n]);if(o>=0)return o>0&&(t.lastNeed=o-1),o;if(--n<r||-2===o)return 0;if((o=Hn(e[n]))>=0)return o>0&&(t.lastNeed=o-2),o;if(--n<r||-2===o)return 0;if((o=Hn(e[n]))>=0)return o>0&&(2===o?o=0:t.lastNeed=o-3),o;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},Kn.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};var Zn=Gr.codes.ERR_STREAM_PREMATURE_CLOSE;function to(){}var eo,ro=function t(e,r,n){if("function"==typeof r)return t(e,null,r);r||(r={}),n=function(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];t.apply(this,n)}}}(n||to);var o=r.readable||!1!==r.readable&&e.readable,i=r.writable||!1!==r.writable&&e.writable,s=function(){e.writable||c()},a=e._writableState&&e._writableState.finished,c=function(){i=!1,a=!0,o||n.call(e)},u=e._readableState&&e._readableState.endEmitted,l=function(){o=!1,u=!0,i||n.call(e)},f=function(t){n.call(e,t)},h=function(){var t;return o&&!u?(e._readableState&&e._readableState.ended||(t=new Zn),n.call(e,t)):i&&!a?(e._writableState&&e._writableState.ended||(t=new Zn),n.call(e,t)):void 0},g=function(){e.req.on("finish",c)};return!function(t){return t.setHeader&&"function"==typeof t.abort}(e)?i&&!e._writableState&&(e.on("end",s),e.on("close",s)):(e.on("complete",c),e.on("abort",h),e.req?g():e.on("request",g)),e.on("end",l),e.on("finish",c),!1!==r.error&&e.on("error",f),e.on("close",h),function(){e.removeListener("complete",c),e.removeListener("abort",h),e.removeListener("request",g),e.req&&e.req.removeListener("finish",c),e.removeListener("end",s),e.removeListener("close",s),e.removeListener("finish",c),e.removeListener("end",l),e.removeListener("error",f),e.removeListener("close",h)}};function no(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var oo=ro,io=Symbol("lastResolve"),so=Symbol("lastReject"),ao=Symbol("error"),co=Symbol("ended"),uo=Symbol("lastPromise"),lo=Symbol("handlePromise"),fo=Symbol("stream");function ho(t,e){return{value:t,done:e}}function go(t){var e=t[io];if(null!==e){var r=t[fo].read();null!==r&&(t[uo]=null,t[io]=null,t[so]=null,e(ho(r,!1)))}}function po(t){q.nextTick(go,t)}var Ao,yo=Object.getPrototypeOf((function(){})),Io=Object.setPrototypeOf((eo={get stream(){return this[fo]},next:function(){var t=this,e=this[ao];if(null!==e)return Promise.reject(e);if(this[co])return Promise.resolve(ho(void 0,!0));if(this[fo].destroyed)return new Promise((function(e,r){q.nextTick((function(){t[ao]?r(t[ao]):e(ho(void 0,!0))}))}));var r,n=this[uo];if(n)r=new Promise(function(t,e){return function(r,n){t.then((function(){e[co]?r(ho(void 0,!0)):e[lo](r,n)}),n)}}(n,this));else{var o=this[fo].read();if(null!==o)return Promise.resolve(ho(o,!1));r=new Promise(this[lo])}return this[uo]=r,r}},no(eo,Symbol.asyncIterator,(function(){return this})),no(eo,"return",(function(){var t=this;return new Promise((function(e,r){t[fo].destroy(null,(function(t){t?r(t):e(ho(void 0,!0))}))}))})),eo),yo),bo=function(t){var e,r=Object.create(Io,(no(e={},fo,{value:t,writable:!0}),no(e,io,{value:null,writable:!0}),no(e,so,{value:null,writable:!0}),no(e,ao,{value:null,writable:!0}),no(e,co,{value:t._readableState.endEmitted,writable:!0}),no(e,lo,{value:function(t,e){var n=r[fo].read();n?(r[uo]=null,r[io]=null,r[so]=null,t(ho(n,!1))):(r[io]=t,r[so]=e)},writable:!0}),e));return r[uo]=null,oo(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=r[so];return null!==e&&(r[uo]=null,r[io]=null,r[so]=null,e(t)),void(r[ao]=t)}var n=r[io];null!==n&&(r[uo]=null,r[io]=null,r[so]=null,n(ho(void 0,!0))),r[co]=!0})),t.on("readable",po.bind(null,r)),r},mo=function(){throw new Error("Readable.from is not available in the browser")},wo=Yo;Yo.ReadableState=Ro,A.exports.EventEmitter;var Eo=function(t,e){return t.listeners(e).length},Co=Dr,_o=o.Buffer,vo=t.Uint8Array||function(){};var Bo,So=Or;Bo=So&&So.debuglog?So.debuglog("stream"):function(){};var ko,xo,Qo,Mo=Rr,Do=Hr,Oo=Jr.getHighWaterMark,Uo=Gr.codes,Lo=Uo.ERR_INVALID_ARG_TYPE,To=Uo.ERR_STREAM_PUSH_AFTER_EOF,Po=Uo.ERR_METHOD_NOT_IMPLEMENTED,Fo=Uo.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;De.exports(Yo,Co);var $o=Do.errorOrDestroy,No=["error","close","destroy","pause","resume"];function Ro(t,e,r){Ao=Ao||Mn,t=t||{},"boolean"!=typeof r&&(r=e instanceof Ao),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=Oo(this,t,"readableHighWaterMark",r),this.buffer=new Mo,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(ko||(ko=Nn.StringDecoder),this.decoder=new ko(t.encoding),this.encoding=t.encoding)}function Yo(t){if(Ao=Ao||Mn,!(this instanceof Yo))return new Yo(t);var e=this instanceof Ao;this._readableState=new Ro(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),Co.call(this)}function jo(t,e,r,n,o){Bo("readableAddChunk",e);var i,s=t._readableState;if(null===e)s.reading=!1,function(t,e){if(Bo("onEofChunk"),e.ended)return;if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?qo(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,Vo(t)))}(t,s);else if(o||(i=function(t,e){var r;n=e,_o.isBuffer(n)||n instanceof vo||"string"==typeof e||void 0===e||t.objectMode||(r=new Lo("chunk",["string","Buffer","Uint8Array"],e));var n;return r}(s,e)),i)$o(t,i);else if(s.objectMode||e&&e.length>0)if("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===_o.prototype||(e=function(t){return _o.from(t)}(e)),n)s.endEmitted?$o(t,new Fo):Ko(t,s,e,!0);else if(s.ended)$o(t,new To);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||0!==e.length?Ko(t,s,e,!1):zo(t,s)):Ko(t,s,e,!1)}else n||(s.reading=!1,zo(t,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function Ko(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&qo(t)),zo(t,e)}Object.defineProperty(Yo.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),Yo.prototype.destroy=Do.destroy,Yo.prototype._undestroy=Do.undestroy,Yo.prototype._destroy=function(t,e){e(t)},Yo.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=_o.from(t,e),e=""),r=!0),jo(this,t,e,!1,r)},Yo.prototype.unshift=function(t){return jo(this,t,null,!0,!1)},Yo.prototype.isPaused=function(){return!1===this._readableState.flowing},Yo.prototype.setEncoding=function(t){ko||(ko=Nn.StringDecoder);var e=new ko(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";null!==r;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var Ho=1073741824;function Go(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=Ho?t=Ho:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function qo(t){var e=t._readableState;Bo("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Bo("emitReadable",e.flowing),e.emittedReadable=!0,q.nextTick(Vo,t))}function Vo(t){var e=t._readableState;Bo("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,ti(t)}function zo(t,e){e.readingMore||(e.readingMore=!0,q.nextTick(Wo,t,e))}function Wo(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var r=e.length;if(Bo("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}function Jo(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function Xo(t){Bo("readable nexttick read 0"),t.read(0)}function Zo(t,e){Bo("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),ti(t),e.flowing&&!e.reading&&t.read(0)}function ti(t){var e=t._readableState;for(Bo("flow",e.flowing);e.flowing&&null!==t.read(););}function ei(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r);var r}function ri(t){var e=t._readableState;Bo("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,q.nextTick(ni,e,t))}function ni(t,e){if(Bo("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}function oi(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}Yo.prototype.read=function(t){Bo("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return Bo("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?ri(this):qo(this),null;if(0===(t=Go(t,e))&&e.ended)return 0===e.length&&ri(this),null;var n,o=e.needReadable;return Bo("need readable",o),(0===e.length||e.length-t<e.highWaterMark)&&Bo("length less than watermark",o=!0),e.ended||e.reading?Bo("reading or ended",o=!1):o&&(Bo("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=Go(r,e))),null===(n=t>0?ei(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&ri(this)),null!==n&&this.emit("data",n),n},Yo.prototype._read=function(t){$o(this,new Po("_read()"))},Yo.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t)}n.pipesCount+=1,Bo("pipe count=%d opts=%j",n.pipesCount,e);var o=(!e||!1!==e.end)&&t!==q.stdout&&t!==q.stderr?s:g;function i(e,o){Bo("onunpipe"),e===r&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,Bo("cleanup"),t.removeListener("close",f),t.removeListener("finish",h),t.removeListener("drain",a),t.removeListener("error",l),t.removeListener("unpipe",i),r.removeListener("end",s),r.removeListener("end",g),r.removeListener("data",u),c=!0,!n.awaitDrain||t._writableState&&!t._writableState.needDrain||a())}function s(){Bo("onend"),t.end()}n.endEmitted?q.nextTick(o):r.once("end",o),t.on("unpipe",i);var a=function(t){return function(){var e=t._readableState;Bo("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&Eo(t,"data")&&(e.flowing=!0,ti(t))}}(r);t.on("drain",a);var c=!1;function u(e){Bo("ondata");var o=t.write(e);Bo("dest.write",o),!1===o&&((1===n.pipesCount&&n.pipes===t||n.pipesCount>1&&-1!==oi(n.pipes,t))&&!c&&(Bo("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function l(e){Bo("onerror",e),g(),t.removeListener("error",l),0===Eo(t,"error")&&$o(t,e)}function f(){t.removeListener("finish",h),g()}function h(){Bo("onfinish"),t.removeListener("close",f),g()}function g(){Bo("unpipe"),r.unpipe(t)}return r.on("data",u),function(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(t,"error",l),t.once("close",f),t.once("finish",h),t.emit("pipe",r),n.flowing||(Bo("pipe resume"),r.resume()),t},Yo.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var n=e.pipes,o=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<o;i++)n[i].emit("unpipe",this,{hasUnpiped:!1});return this}var s=oi(e.pipes,t);return-1===s||(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this},Yo.prototype.on=function(t,e){var r=Co.prototype.on.call(this,t,e),n=this._readableState;return"data"===t?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===t&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Bo("on readable",n.length,n.reading),n.length?qo(this):n.reading||q.nextTick(Xo,this))),r},Yo.prototype.addListener=Yo.prototype.on,Yo.prototype.removeListener=function(t,e){var r=Co.prototype.removeListener.call(this,t,e);return"readable"===t&&q.nextTick(Jo,this),r},Yo.prototype.removeAllListeners=function(t){var e=Co.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||q.nextTick(Jo,this),e},Yo.prototype.resume=function(){var t=this._readableState;return t.flowing||(Bo("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,q.nextTick(Zo,t,e))}(this,t)),t.paused=!1,this},Yo.prototype.pause=function(){return Bo("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(Bo("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Yo.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var o in t.on("end",(function(){if(Bo("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(o){(Bo("wrapped data"),r.decoder&&(o=r.decoder.write(o)),r.objectMode&&null==o)||(r.objectMode||o&&o.length)&&(e.push(o)||(n=!0,t.pause()))})),t)void 0===this[o]&&"function"==typeof t[o]&&(this[o]=function(e){return function(){return t[e].apply(t,arguments)}}(o));for(var i=0;i<No.length;i++)t.on(No[i],this.emit.bind(this,No[i]));return this._read=function(e){Bo("wrapped _read",e),n&&(n=!1,t.resume())},this},"function"==typeof Symbol&&(Yo.prototype[Symbol.asyncIterator]=function(){return void 0===xo&&(xo=bo),xo(this)}),Object.defineProperty(Yo.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Yo.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Yo.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),Yo._fromList=ei,Object.defineProperty(Yo.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(Yo.from=function(t,e){return void 0===Qo&&(Qo=mo),Qo(Yo,t,e)});var ii=gi,si=Gr.codes,ai=si.ERR_METHOD_NOT_IMPLEMENTED,ci=si.ERR_MULTIPLE_CALLBACK,ui=si.ERR_TRANSFORM_ALREADY_TRANSFORMING,li=si.ERR_TRANSFORM_WITH_LENGTH_0,fi=Mn;function hi(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new ci);r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function gi(t){if(!(this instanceof gi))return new gi(t);fi.call(this,t),this._transformState={afterTransform:hi.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",di)}function di(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?pi(this,null,null):this._flush((function(e,r){pi(t,e,r)}))}function pi(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new li;if(t._transformState.transforming)throw new ui;return t.push(null)}De.exports(gi,fi),gi.prototype.push=function(t,e){return this._transformState.needTransform=!1,fi.prototype.push.call(this,t,e)},gi.prototype._transform=function(t,e,r){r(new ai("_transform()"))},gi.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},gi.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},gi.prototype._destroy=function(t,e){fi.prototype._destroy.call(this,t,(function(t){e(t)}))};var Ai,yi=bi,Ii=ii;function bi(t){if(!(this instanceof bi))return new bi(t);Ii.call(this,t)}De.exports(bi,Ii),bi.prototype._transform=function(t,e,r){r(null,t)};var mi=Gr.codes,wi=mi.ERR_MISSING_ARGS,Ei=mi.ERR_STREAM_DESTROYED;function Ci(t){if(t)throw t}function _i(t,e,r,n){n=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(n);var o=!1;t.on("close",(function(){o=!0})),void 0===Ai&&(Ai=ro),Ai(t,{readable:e,writable:r},(function(t){if(t)return n(t);o=!0,n()}));var i=!1;return function(e){if(!o&&!i)return i=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void n(e||new Ei("pipe"))}}function vi(t){t()}function Bi(t,e){return t.pipe(e)}function Si(t){return t.length?"function"!=typeof t[t.length-1]?Ci:t.pop():Ci}var ki,xi=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n,o=Si(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new wi("streams");var i=e.map((function(t,r){var s=r<e.length-1;return _i(t,s,r>0,(function(t){n||(n=t),t&&i.forEach(vi),s||(i.forEach(vi),o(n))}))}));return e.reduce(Bi)};ki=Mr.exports,(ki=Mr.exports=wo).Stream=ki,ki.Readable=ki,ki.Writable=en,ki.Duplex=Mn,ki.Transform=ii,ki.PassThrough=yi,ki.finished=ro,ki.pipeline=xi;const Qi=De.exports,{Readable:Mi}=Mr.exports;var Di=Oi;function Oi(t,e){if(!(this instanceof Oi))return new Oi(t,e);e=e||{},Mi.call(this,Object.assign({},e,{objectMode:!0})),this._iterator=t,this._options=e,this.on("end",this.destroy.bind(this,null,null))}Qi(Oi,Mi),Oi.prototype._read=function(){this.destroyed||this._iterator.next(((t,e,r)=>{if(!this.destroyed)return t?this.destroy(t):void(void 0===e&&void 0===r?this.push(null):!1!==this._options.keys&&!1===this._options.values?this.push(e):!1===this._options.keys&&!1!==this._options.values?this.push(r):this.push({key:e,value:r}))}))},Oi.prototype._destroy=function(t,e){this._iterator.end((function(r){e(t||r)}))};var Ui={exports:{}};!function(t){function e(t,e){const r=function(e,n){if("object"==typeof e&&null!==e&&(n=n||e,e=e.message||e.name),e=e||"","object"==typeof(n=n||void 0)&&n.type===t&&n.message===e)return n;Object.defineProperty(this,"type",{value:t,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"name",{value:t,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"cause",{value:n,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"message",{value:e,enumerable:!1,writable:!0,configurable:!0}),Error.call(this),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)};return r.prototype=new e,r}const r=e("LevelUPError",Error);t.exports={LevelUPError:r,InitializationError:e("InitializationError",r),OpenError:e("OpenError",r),ReadError:e("ReadError",r),WriteError:e("WriteError",r),NotFoundError:e("NotFoundError",r),EncodingError:e("EncodingError",r)},t.exports.NotFoundError.prototype.notFound=!0,t.exports.NotFoundError.prototype.status=404}(Ui);var Li={getCallback:function(t,e){return"function"==typeof t?t:e},getOptions:function(t){return"object"==typeof t&&null!==t?t:{}}};const Ti=Ui.exports.WriteError,Pi=Pe,Fi=Li.getCallback,$i=Li.getOptions;function Ni(t){this.db=t,this.batch=t.db.batch(),this.ops=[],this.length=0}Ni.prototype.put=function(t,e,r){try{this.batch.put(t,e,r)}catch(t){throw new Ti(t)}return this.ops.push({...r,type:"put",key:t,value:e}),this.length++,this},Ni.prototype.del=function(t,e){try{this.batch.del(t,e)}catch(t){throw new Ti(t)}return this.ops.push({...e,type:"del",key:t}),this.length++,this},Ni.prototype.clear=function(){try{this.batch.clear()}catch(t){throw new Ti(t)}return this.ops=[],this.length=0,this},Ni.prototype.write=function(t,e){const r=this.db,n=this.ops;e=Fi(t,e),e=Pi.fromCallback(e),t=$i(t);try{this.batch.write(t,(function(t){if(t)return e(new Ti(t));r.emit("batch",n),e()}))}catch(t){throw new Ti(t)}return e.promise};var Ri=Ni;const Yi=Ne;const ji=A.exports.EventEmitter,Ki=V.inherits,Hi=Oe.exports,Gi=Di,qi=Ri,Vi=Ui.exports,zi=Le,Wi=Pe,Ji=Li.getCallback,Xi=Li.getOptions,Zi=function(t,...e){0===e.length?Yi(t):Yi((()=>t(...e)))},ts=Vi.WriteError,es=Vi.ReadError,rs=Vi.NotFoundError,ns=Vi.OpenError,os=Vi.InitializationError;function is(t,e,r){if(!(this instanceof is))return new is(t,e,r);let n;if(ji.call(this),this.setMaxListeners(1/0),"function"==typeof e&&(r=e,e={}),e=e||{},!t||"object"!=typeof t){if(n=new os("First argument must be an abstract-leveldown compliant store"),"function"==typeof r)return Zi(r,n);throw n}if("string"!=typeof t.status)throw new Error(".status required, old abstract-leveldown");this.options=Xi(e),this._db=t,this.db=null,this.open(r||(t=>{t&&this.emit("error",t)})),this.supports=zi(this.db.supports,{status:!0,deferredOpen:!0,openCallback:!0,promises:!0,streams:!0});for(const t of Object.keys(this.supports.additionalMethods))null==this[t]&&(this[t]=function(...e){return this.db[t](...e)})}function ss(t,e){return!t.isOperational()&&(Zi(e,new es("Database is not open")),!0)}is.prototype.emit=ji.prototype.emit,is.prototype.once=ji.prototype.once,Ki(is,ji),Object.defineProperty(is.prototype,"status",{enumerable:!0,get(){return this.db.status}}),is.prototype.isOperational=function(){return"open"===this.db.status||"opening"===this.db.status},is.prototype.open=function(t,e){return"function"==typeof t&&(e=t,t=null),e=Wi.fromCallback(e),t||(t=this.options),this.db&&this.isOpen()?(Zi(e,null,this),e.promise):this.db&&this._isOpening()?(this.once("open",(()=>{e(null,this)})),e.promise):(this.db=new Hi(this._db),this.emit("opening"),this.db.open(t,(t=>{if(t)return e(new ns(t));this.db=this._db,e(null,this),this.emit("open"),this.emit("ready")})),e.promise)},is.prototype.close=function(t){return t=Wi.fromCallback(t),this.isOpen()?(this.db.close(((e,...r)=>{this.emit("closed"),t(e,...r)})),this.emit("closing")):this.isClosed()?Zi(t):"closing"===this.db.status?this.once("closed",t):this._isOpening()&&this.once("open",(()=>{this.close(t)})),t.promise},is.prototype.isOpen=function(){return"open"===this.db.status},is.prototype._isOpening=function(){return"opening"===this.db.status},is.prototype.isClosed=function(){return/^clos|new/.test(this.db.status)},is.prototype.get=function(t,e,r){return r=Ji(e,r),ss(this,r=Wi.fromCallback(r))||(e=Xi(e),this.db.get(t,e,(function(e,n){if(e)return e=/notfound/i.test(e)||e.notFound?new rs("Key not found in database ["+t+"]",e):new es(e),r(e);r(null,n)}))),r.promise},is.prototype.getMany=function(t,e,r){return this.db.getMany(t,e,r)},is.prototype.put=function(t,e,r,n){return n=Ji(r,n),ss(this,n=Wi.fromCallback(n))||(r=Xi(r),this.db.put(t,e,r,(r=>{if(r)return n(new ts(r));this.emit("put",t,e),n()}))),n.promise},is.prototype.del=function(t,e,r){return r=Ji(e,r),ss(this,r=Wi.fromCallback(r))||(e=Xi(e),this.db.del(t,e,(e=>{if(e)return r(new ts(e));this.emit("del",t),r()}))),r.promise},is.prototype.batch=function(t,e,r){return arguments.length?(r="function"==typeof t?t:Ji(e,r),ss(this,r=Wi.fromCallback(r))||(e=Xi(e),this.db.batch(t,e,(e=>{if(e)return r(new ts(e));this.emit("batch",t),r()}))),r.promise):new qi(this)},is.prototype.iterator=function(t){return this.db.iterator(t)},is.prototype.clear=function(t,e){return e=Ji(t,e),t=Xi(t),ss(this,e=Wi.fromCallback(e))||this.db.clear(t,(r=>{if(r)return e(new ts(r));this.emit("clear",t),e()})),e.promise},is.prototype.readStream=is.prototype.createReadStream=function(t){return"number"!=typeof(t=Object.assign({keys:!0,values:!0},t)).limit&&(t.limit=-1),new Gi(this.db.iterator(t),t)},is.prototype.keyStream=is.prototype.createKeyStream=function(t){return this.createReadStream(Object.assign({},t,{keys:!0,values:!1}))},is.prototype.valueStream=is.prototype.createValueStream=function(t){return this.createReadStream(Object.assign({},t,{keys:!1,values:!0}))},is.prototype.toString=function(){return"LevelUP"},is.prototype.type="levelup",is.prototype._nextTick=Zi,is.errors=Vi;var as=is,cs=function(t,e,r){if("number"!=typeof e)throw new Error("second argument must be a Number");let n,o,i,s,a,c,u=!0;Array.isArray(t)?(n=[],i=o=t.length):(s=Object.keys(t),n={},i=o=s.length);function l(t){function e(){r&&r(t,n),r=null}u?us(e):e()}function f(e,r,u){if(n[e]=u,r&&(a=!0),0==--i||r)l(r);else if(!a&&c<o){let e;s?(e=s[c],c+=1,t[e]((function(t,r){f(e,t,r)}))):(e=c,c+=1,t[e]((function(t,r){f(e,t,r)})))}}c=e,i?s?s.some((function(r,n){return t[r]((function(t,e){f(r,t,e)})),n===e-1})):t.some((function(t,r){return t((function(t,e){f(r,t,e)})),r===e-1})):l(null);u=!1};
/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const us=Ne;var ls={};!function(t){function e(t){return void 0!==t&&""!==t}function r(t,e){return Object.hasOwnProperty.call(t,e)}function n(t,e){return Object.hasOwnProperty.call(t,e)&&e}t.compare=function(t,e){if(o.Buffer.isBuffer(t)){for(var r=Math.min(t.length,e.length),n=0;n<r;n++){var i=t[n]-e[n];if(i)return i}return t.length-e.length}return t<e?-1:t>e?1:0};var i=t.lowerBoundKey=function(t){return n(t,"gt")||n(t,"gte")||n(t,"min")||(t.reverse?n(t,"end"):n(t,"start"))||void 0},s=t.lowerBound=function(t,e){var r=i(t);return r?t[r]:e},a=t.lowerBoundInclusive=function(t){return!r(t,"gt")},c=t.upperBoundInclusive=function(t){return!r(t,"lt")},u=t.lowerBoundExclusive=function(t){return!a(t)},l=t.upperBoundExclusive=function(t){return!c(t)},f=t.upperBoundKey=function(t){return n(t,"lt")||n(t,"lte")||n(t,"max")||(t.reverse?n(t,"start"):n(t,"end"))||void 0},h=t.upperBound=function(t,e){var r=f(t);return r?t[r]:e};function g(t){return t}t.start=function(t,e){return t.reverse?h(t,e):s(t,e)},t.end=function(t,e){return t.reverse?s(t,e):h(t,e)},t.startInclusive=function(t){return t.reverse?c(t):a(t)},t.endInclusive=function(t){return t.reverse?a(t):c(t)},t.toLtgt=function(e,n,o,i,s){n=n||{},o=o||g;var a=arguments.length>3,c=t.lowerBoundKey(e),u=t.upperBoundKey(e);return c?"gt"===c?n.gt=o(e.gt,!1):n.gte=o(e[c],!1):a&&(n.gte=o(i,!1)),u?"lt"===u?n.lt=o(e.lt,!0):n.lte=o(e[u],!0):a&&(n.lte=o(s,!0)),null!=e.reverse&&(n.reverse=!!e.reverse),r(n,"max")&&delete n.max,r(n,"min")&&delete n.min,r(n,"start")&&delete n.start,r(n,"end")&&delete n.end,n},t.contains=function(r,n,o){o=o||t.compare;var i=s(r);if(e(i)&&((a=o(n,i))<0||0===a&&u(r)))return!1;var a,c=h(r);if(e(c)&&((a=o(n,c))>0||0===a&&l(r)))return!1;return!0},t.filter=function(e,r){return function(n){return t.contains(e,n,r)}}}(ls);const fs=ls,hs=Symbol("none");var gs=function(t){const e=fs.lowerBound(t,hs),r=fs.upperBound(t,hs),n=fs.lowerBoundExclusive(t,hs),o=fs.upperBoundExclusive(t,hs);return e!==hs&&r!==hs?IDBKeyRange.bound(e,r,n,o):e!==hs?IDBKeyRange.lowerBound(e,n):r!==hs?IDBKeyRange.upperBound(r,o):null};const ds=o.Buffer,ps=function(){if(t.TextDecoder){const t=new TextDecoder("utf-8");return t.decode.bind(t)}return function(t){return ys(t).toString()}}(),As=function(){if(t.TextDecoder){const t=new TextDecoder("utf-8");return t.decode.bind(t)}return function(t){return ds.from(t).toString()}}();function ys(t){const e=ds.from(t.buffer);return t.byteLength===t.buffer.byteLength?e:e.slice(t.byteOffset,t.byteOffset+t.byteLength)}var Is=function(t,e){return t instanceof Uint8Array?e?ys(t):ps(t):t instanceof ArrayBuffer?e?ds.from(t):As(t):e?ds.from(String(t)):String(t)};const bs=De.exports,ms=Ue.AbstractIterator,ws=gs,Es=Is,Cs=function(){};var _s=vs;function vs(t,e,r){if(ms.call(this,t),this._limit=r.limit,this._count=0,this._callback=null,this._cache=[],this._completed=!1,this._aborted=!1,this._error=null,this._transaction=null,this._keys=r.keys,this._values=r.values,this._keyAsBuffer=r.keyAsBuffer,this._valueAsBuffer=r.valueAsBuffer,0===this._limit)return void(this._completed=!0);let n;try{n=ws(r)}catch(t){return void(this._completed=!0)}this.createIterator(e,n,r.reverse)}bs(vs,ms),vs.prototype.createIterator=function(t,e,r){const n=this.db.db.transaction([t],"readonly");n.objectStore(t).openCursor(e,r?"prev":"next").onsuccess=t=>{const e=t.target.result;e&&this.onItem(e)},this._transaction=n,n.onabort=()=>{this.onAbort(this._transaction.error||new Error("aborted by user"))},n.oncomplete=()=>{this.onComplete()}},vs.prototype.onItem=function(t){this._cache.push(t.key,t.value),(this._limit<=0||++this._count<this._limit)&&t.continue(),this.maybeNext()},vs.prototype.onAbort=function(t){this._aborted=!0,this._error=t,this.maybeNext()},vs.prototype.onComplete=function(){this._completed=!0,this.maybeNext()},vs.prototype.maybeNext=function(){this._callback&&(this._next(this._callback),this._callback=null)},vs.prototype._next=function(t){if(this._aborted){const e=this._error;this._error=null,this._nextTick(t,e)}else if(this._cache.length>0){let e=this._cache.shift(),r=this._cache.shift();e=this._keys&&void 0!==e?this._deserializeKey(e,this._keyAsBuffer):void 0,r=this._values&&void 0!==r?this._deserializeValue(r,this._valueAsBuffer):void 0,this._nextTick(t,null,e,r)}else this._completed?this._nextTick(t):this._callback=t},vs.prototype._deserializeKey=Es,vs.prototype._deserializeValue=Es,vs.prototype._end=function(t){if(this._aborted||this._completed)return this._nextTick(t,this._error);this.onItem=Cs,this.onAbort=t,this.onComplete=t};const Bs=o.Buffer,Ss=function(){if(t.TextEncoder){const t=new TextEncoder("utf-8");return t.encode.bind(t)}return Bs.from}();var ks={};!function(t){const e=o.Buffer;t.test=function(t){return function(e){try{return e.cmp(t,0),!0}catch(t){return!1}}},t.bufferKeys=t.test(e.alloc(0))}(ks);var xs=Ns;const Qs=Ue.AbstractLevelDOWN,Ms=De.exports,Ds=cs,Os=_s,Us=function(t,e){return e?Bs.isBuffer(t)?t:Ss(String(t)):String(t)},Ls=Is,Ts=ks,Ps=function(t,e,r,n,o){if(0===n.limit)return t._nextTick(o);const i=t.db.transaction([e],"readwrite"),s=i.objectStore(e);let a=0;i.oncomplete=function(){o()},i.onabort=function(){o(i.error||new Error("aborted by user"))};const c=s.openKeyCursor?"openKeyCursor":"openCursor",u=n.reverse?"prev":"next";s[c](r,u).onsuccess=function(t){const e=t.target.result;e&&(s.delete(e.key).onsuccess=function(){(n.limit<=0||++a<n.limit)&&e.continue()})}},Fs=gs,$s="level-js-";function Ns(t,e){if(!(this instanceof Ns))return new Ns(t,e);if(Qs.call(this,{bufferKeys:Ts.bufferKeys(indexedDB),snapshots:!0,permanence:!0,clear:!0,getMany:!0}),e=e||{},"string"!=typeof t)throw new Error("constructor requires a location string argument");this.location=t,this.prefix=null==e.prefix?$s:e.prefix,this.version=parseInt(e.version||1,10)}Ms(Ns,Qs),Ns.prototype.type="level-js",Ns.prototype._open=function(t,e){const r=indexedDB.open(this.prefix+this.location,this.version);r.onerror=function(){e(r.error||new Error("unknown error"))},r.onsuccess=()=>{this.db=r.result,e()},r.onupgradeneeded=t=>{const e=t.target.result;e.objectStoreNames.contains(this.location)||e.createObjectStore(this.location)}},Ns.prototype.store=function(t){return this.db.transaction([this.location],t).objectStore(this.location)},Ns.prototype.await=function(t,e){const r=t.transaction;r.onabort=function(){e(r.error||new Error("aborted by user"))},r.oncomplete=function(){e(null,t.result)}},Ns.prototype._get=function(t,e,r){const n=this.store("readonly");let o;try{o=n.get(t)}catch(t){return this._nextTick(r,t)}this.await(o,(function(t,n){return t?r(t):void 0===n?r(new Error("NotFound")):void r(null,Ls(n,e.asBuffer))}))},Ns.prototype._getMany=function(t,e,r){const n=e.asBuffer,o=this.store("readonly"),i=t.map((t=>e=>{let r;try{r=o.get(t)}catch(t){return e(t)}r.onsuccess=()=>{const t=r.result;e(null,void 0===t?t:Ls(t,n))},r.onerror=t=>{t.stopPropagation(),e(r.error)}}));Ds(i,16,r)},Ns.prototype._del=function(t,e,r){const n=this.store("readwrite");let o;try{o=n.delete(t)}catch(t){return this._nextTick(r,t)}this.await(o,r)},Ns.prototype._put=function(t,e,r,n){const o=this.store("readwrite");let i;try{i=o.put(e,t)}catch(t){return this._nextTick(n,t)}this.await(i,n)},Ns.prototype._serializeKey=function(t){return Us(t,this.supports.bufferKeys)},Ns.prototype._serializeValue=function(t){return Us(t,!0)},Ns.prototype._iterator=function(t){return new Os(this,this.location,t)},Ns.prototype._batch=function(t,e,r){if(0===t.length)return this._nextTick(r);const n=this.store("readwrite"),o=n.transaction;let i,s=0;o.onabort=function(){r(i||o.error||new Error("aborted by user"))},o.oncomplete=function(){r()},function e(){const r=t[s++],a=r.key;let c;try{c="del"===r.type?n.delete(a):n.put(r.value,a)}catch(t){return i=t,void o.abort()}s<t.length&&(c.onsuccess=e)}()},Ns.prototype._clear=function(t,e){let r,n;try{r=Fs(t)}catch(t){return this._nextTick(e)}if(t.limit>=0)return Ps(this,this.location,r,t,e);try{const t=this.store("readwrite");n=r?t.delete(r):t.clear()}catch(t){return this._nextTick(e,t)}this.await(n,e)},Ns.prototype._close=function(t){this.db.close(),this._nextTick(t)},Ns.prototype.upgrade=function(t){if("open"!==this.status)return this._nextTick(t,new Error("cannot upgrade() before open()"));const e=this.iterator(),r={},n=this;function o(t){if(t)return s(t);e.next(i)}function i(t,e,i){if(t||void 0===e)return s(t);const a=n._serializeKey(Ls(e,!0)),c=n._serializeValue(Ls(i,!0));n._batch([{type:"del",key:e},{type:"put",key:a,value:c}],r,o)}function s(r){e.end((function(e){t(r||e)}))}e._deserializeKey=e._deserializeValue=function(t){return t},o()},Ns.destroy=function(t,e,r){"function"==typeof e&&(r=e,e=$s);const n=indexedDB.deleteDatabase(e+t);n.onsuccess=function(){r()},n.onerror=function(t){r(t)}};const Rs="0123456789bcdefghjkmnpqrstuvwxyz";class Ys{static encode(t,e,r){if(void 0===r){for(let r=1;r<=12;r++){const n=Ys.encode(t,e,r),o=Ys.decode(n);if(o.lat==t&&o.lon==e)return n}r=12}if(t=Number(t),e=Number(e),r=Number(r),isNaN(t)||isNaN(e)||isNaN(r))throw new Error("Invalid geohash");let n=0,o=0,i=!0,s="",a=-90,c=90,u=-180,l=180;for(;s.length<r;){if(i){const t=(u+l)/2;e>=t?(n=2*n+1,u=t):(n*=2,l=t)}else{const e=(a+c)/2;t>=e?(n=2*n+1,a=e):(n*=2,c=e)}i=!i,5==++o&&(s+=Rs.charAt(n),o=0,n=0)}return s}static decode(t){const e=Ys.bounds(t),r=e.sw.lat,n=e.sw.lon,o=e.ne.lat,i=e.ne.lon;let s=(r+o)/2,a=(n+i)/2;return s=s.toFixed(Math.floor(2-Math.log(o-r)/Math.LN10)),a=a.toFixed(Math.floor(2-Math.log(i-n)/Math.LN10)),{lat:Number(s),lon:Number(a)}}static bounds(t){if(0==t.length)throw new Error("Invalid geohash");t=t.toLowerCase();let e=!0,r=-90,n=90,o=-180,i=180;for(let s=0;s<t.length;s++){const a=t.charAt(s),c=Rs.indexOf(a);if(-1==c)throw new Error("Invalid geohash");for(let t=4;t>=0;t--){const s=c>>t&1;if(e){const t=(o+i)/2;1==s?o=t:i=t}else{const t=(r+n)/2;1==s?r=t:n=t}e=!e}}return{sw:{lat:r,lon:o},ne:{lat:n,lon:i}}}static adjacent(t,e){if(t=t.toLowerCase(),e=e.toLowerCase(),0==t.length)throw new Error("Invalid geohash");if(-1=="nsew".indexOf(e))throw new Error("Invalid direction");const r=t.slice(-1);let n=t.slice(0,-1);const o=t.length%2;return-1!={n:["prxz","bcfguvyz"],s:["028b","0145hjnp"],e:["bcfguvyz","prxz"],w:["0145hjnp","028b"]}[e][o].indexOf(r)&&""!=n&&(n=Ys.adjacent(n,e)),n+Rs.charAt({n:["p0r21436x8zb9dcf5h7kjnmqesgutwvy","bc01fg45238967deuvhjyznpkmstqrwx"],s:["14365h7k9dcfesgujnmqp0r2twvyx8zb","238967debc01fg45kmstqrwxuvhjyznp"],e:["bc01fg45238967deuvhjyznpkmstqrwx","p0r21436x8zb9dcf5h7kjnmqesgutwvy"],w:["238967debc01fg45kmstqrwxuvhjyznp","14365h7k9dcfesgujnmqp0r2twvyx8zb"]}[e][o].indexOf(r))}static neighbours(t){return{n:Ys.adjacent(t,"n"),ne:Ys.adjacent(Ys.adjacent(t,"n"),"e"),e:Ys.adjacent(t,"e"),se:Ys.adjacent(Ys.adjacent(t,"s"),"e"),s:Ys.adjacent(t,"s"),sw:Ys.adjacent(Ys.adjacent(t,"s"),"w"),w:Ys.adjacent(t,"w"),nw:Ys.adjacent(Ys.adjacent(t,"n"),"w")}}}var js,Ks={exports:{}},Hs={exports:{}},Gs=function t(e,r){if(!e){var n=new qs(r);throw Error.captureStackTrace&&Error.captureStackTrace(n,t),n}};class qs extends Error{}function Vs(t){t.fill(0)}qs.prototype.name="AssertionError",function(t){var e,n=Gs,o=(e=globalThis.crypto||globalThis.msCrypto)&&e.getRandomValues?function(t,r){for(let n=0;n<r;n+=65536)e.getRandomValues(new Uint8Array(t.buffer,n+t.byteOffset,Math.min(r-n,65536)))}:null!=r&&(e=r("crypto"))&&e.randomBytes?function(t,r){new Uint8Array(t.buffer,t.byteOffset,r).set(e.randomBytes(r))}:function(){throw new Error("No secure random number generator available")};Object.defineProperty(t.exports,"randombytes",{value:o}),t.exports.randombytes_buf=function(t){n(t,"out must be given"),o(t,t.byteLength)}}(Hs);var zs={sodium_malloc:function(t){return new Uint8Array(t)},sodium_free:function(t){Vs(t),function(){if(js)return js;var t=globalThis.MessageChannel;null==t&&({MessageChannel:t}=r("worker_threads"));return js=new t}().port1.postMessage(t.buffer,[t.buffer])},sodium_memzero:Vs},Ws={exports:{}};!function(t){function e(t,e,r,n,o){var i=0;for(let s=0;s<o;s++)i|=t[e+s]^r[n+s];return(1&i-1>>>8)-1}t.exports={crypto_verify_16:function(t,r,n,o){return 0===e(t,r,n,o,16)},crypto_verify_32:function(t,r,n,o){return 0===e(t,r,n,o,32)},crypto_verify_64:function(t,r,n,o){return 0===e(t,r,n,o,64)}},Object.defineProperty(t.exports,"vn",{value:e})}(Ws);const Js=Gs,{vn:Xs}=Ws.exports;var Zs={sodium_increment:function(t){const e=t.byteLength;for(var r=1,n=0;n<e;n++)r+=t[n],t[n]=r,r>>=8},sodium_memcmp:function(t,e){return Js(t.byteLength===e.byteLength,"buffers must be the same size"),0===Xs(t,0,e,0,t.byteLength)},sodium_is_zero:function(t){var e=0;for(let r=0;r<t.length;r++)e|=t[r];return 0===e}},ta={exports:{}};function ea(t){return t.length}var ra={byteLength:ea,toString:function(t){const e=t.byteLength;let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r},write:function(t,e,r=0,n=ea(e)){const o=Math.min(n,t.byteLength-r);for(let n=0;n<o;n++)t[r+n]=e.charCodeAt(n);return o}};const na="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oa=new Uint8Array(256);for(let t=0;t<na.length;t++)oa[na.charCodeAt(t)]=t;function ia(t){let e=t.length;return 61===t.charCodeAt(e-1)&&e--,e>1&&61===t.charCodeAt(e-1)&&e--,3*e>>>2}oa[45]=62,oa[95]=63;var sa={byteLength:ia,toString:function(t){const e=t.byteLength;let r="";for(let n=0;n<e;n+=3)r+=na[t[n]>>2]+na[(3&t[n])<<4|t[n+1]>>4]+na[(15&t[n+1])<<2|t[n+2]>>6]+na[63&t[n+2]];return e%3==2?r=r.substring(0,r.length-1)+"=":e%3==1&&(r=r.substring(0,r.length-2)+"=="),r},write:function(t,e,r=0,n=ia(e)){const o=Math.min(n,t.byteLength-r);for(let r=0,n=0;r<o;r+=4){const o=oa[e.charCodeAt(r)],i=oa[e.charCodeAt(r+1)],s=oa[e.charCodeAt(r+2)],a=oa[e.charCodeAt(r+3)];t[n++]=o<<2|i>>4,t[n++]=(15&i)<<4|s>>2,t[n++]=(3&s)<<6|63&a}return o}};function aa(t){return t.length>>>1}var ca={byteLength:aa,toString:function(t){const e=t.byteLength;t=new DataView(t.buffer,t.byteOffset,e);let r="",n=0;for(let o=e-e%4;n<o;n+=4)r+=t.getUint32(n).toString(16).padStart(8,"0");for(;n<e;n++)r+=t.getUint8(n).toString(16).padStart(2,"0");return r},write:function(t,e,r=0,n=aa(e)){const o=Math.min(n,t.byteLength-r);for(let n=0;n<o;n++){const o=ua(e.charCodeAt(2*n)),i=ua(e.charCodeAt(2*n+1));if(void 0===o||void 0===i)return t.subarray(0,n);t[r+n]=o<<4|i}return o}};function ua(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:void 0}function la(t){let e=0;for(let r=0,n=t.length;r<n;r++){const o=t.charCodeAt(r);if(o>=55296&&o<=56319&&r+1<n){const n=t.charCodeAt(r+1);if(n>=56320&&n<=57343){e+=4,r++;continue}}e+=o<=127?1:o<=2047?2:3}return e}let fa,ha;if("undefined"!=typeof TextDecoder){const t=new TextDecoder;fa=function(e){return t.decode(e)}}else fa=function(t){const e=t.byteLength;let r="",n=0;for(;n<e;){let o=t[n];if(o<=127){r+=String.fromCharCode(o),n++;continue}let i=0,s=0;if(o<=223?(i=1,s=31&o):o<=239?(i=2,s=15&o):o<=244&&(i=3,s=7&o),e-n-i>0){let e=0;for(;e<i;)o=t[n+e+1],s=s<<6|63&o,e+=1}else s=65533,i=e-n;r+=String.fromCodePoint(s),n+=i+1}return r};if("undefined"!=typeof TextEncoder){const t=new TextEncoder;ha=function(e,r,n=0,o=la(r)){const i=Math.min(o,e.byteLength-n);return t.encodeInto(r,e.subarray(n,n+i)),i}}else ha=function(t,e,r=0,n=la(e)){const o=Math.min(n,t.byteLength-r);t=t.subarray(r,r+o);let i=0,s=0;for(;i<e.length;){const r=e.codePointAt(i);if(r<=127){t[s++]=r,i++;continue}let n=0,o=0;for(r<=2047?(n=6,o=192):r<=65535?(n=12,o=224):r<=2097151&&(n=18,o=240),t[s++]=o|r>>n,n-=6;n>=0;)t[s++]=128|r>>n&63,n-=6;i+=r>=65536?2:1}return o};function ga(t){return 2*t.length}var da={byteLength:ga,toString:function(t){const e=t.byteLength;let r="";for(let n=0;n<e-1;n+=2)r+=String.fromCharCode(t[n]+256*t[n+1]);return r},write:function(t,e,r=0,n=ga(e)){const o=Math.min(n,t.byteLength-r);let i=o;for(let n=0;n<e.length&&!((i-=2)<0);++n){const o=e.charCodeAt(n),i=o>>8,s=o%256;t[r+2*n]=s,t[r+2*n+1]=i}return o}};const pa=ra,Aa=sa,ya=ca,Ia={byteLength:la,toString:fa,write:ha},ba=da;function ma(t){switch(t){case"ascii":return pa;case"base64":return Aa;case"hex":return ya;case"utf8":case"utf-8":case void 0:return Ia;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ba;default:throw new Error(`Unknown encoding: ${t}`)}}function wa(t){return t instanceof Uint8Array}function Ea(t,e,r){return"string"==typeof t?function(t,e){const r=ma(e),n=new Uint8Array(r.byteLength(t));return r.write(n,t,0,n.byteLength),n}(t,e):Array.isArray(t)?function(t){const e=new Uint8Array(t.length);return e.set(t),e}(t):ArrayBuffer.isView(t)?function(t){const e=new Uint8Array(t.byteLength);return e.set(t),e}(t):function(t,e,r){return new Uint8Array(t,e,r)}(t,e,r)}function Ca(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}var _a={isBuffer:wa,alloc:function(t,e,r){const n=new Uint8Array(t);return void 0!==e&&e(n,e,0,n.byteLength,r),n},allocUnsafe:function(t){return new Uint8Array(t)},allocUnsafeSlow:function(t){return new Uint8Array(t)},byteLength:function(t,e){return ma(e).byteLength(t)},compare:function(t,e){if(t===e)return 0;const r=Math.min(t.byteLength,e.byteLength);t=new DataView(t.buffer,t.byteOffset,t.byteLength),e=new DataView(e.buffer,e.byteOffset,e.byteLength);let n=0;for(let o=r-r%4;n<o;n+=4){const r=t.getUint32(n),o=e.getUint32(n);if(r<o)return-1;if(r>o)return 1}for(;n<r;n++){const r=t.getUint8(n),o=e.getUint8(n);if(r<o)return-1;if(r>o)return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0},concat:function(t,e){void 0===e&&(e=t.reduce(((t,e)=>t+e.byteLength),0));const r=new Uint8Array(e);return t.reduce(((t,e)=>(r.set(e,t),t+e.byteLength)),0),r},copy:function(t,e,r=0,n=0,o=t.byteLength){if(o>0&&o<n)return 0;if(o===n)return 0;if(0===t.byteLength||0===e.byteLength)return 0;if(r<0)throw new RangeError("targetStart is out of range");if(n<0||n>=t.byteLength)throw new RangeError("sourceStart is out of range");if(o<0)throw new RangeError("sourceEnd is out of range");r>=e.byteLength&&(r=e.byteLength),o>t.byteLength&&(o=t.byteLength),e.byteLength-r<o-n&&(o=e.length-r+n);const i=o-n;return t===e?e.copyWithin(r,n,o):e.set(t.subarray(n,o),r),i},equals:function(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;const r=t.byteLength;t=new DataView(t.buffer,t.byteOffset,t.byteLength),e=new DataView(e.buffer,e.byteOffset,e.byteLength);let n=0;for(let o=r-r%4;n<o;n+=4)if(t.getUint32(n)!==e.getUint32(n))return!1;for(;n<r;n++)if(t.getUint8(n)!==e.getUint8(n))return!1;return!0},fill:function(t,e,r,n,o){if("string"==typeof e?"string"==typeof r?(o=r,r=0,n=t.byteLength):"string"==typeof n&&(o=n,n=t.byteLength):"number"==typeof val?e&=255:"boolean"==typeof val&&(e=+e),r<0||t.byteLength<r||t.byteLength<n)throw new RangeError("Out of range index");if(void 0===r&&(r=0),void 0===n&&(n=t.byteLength),n<=r)return t;if(e||(e=0),"number"==typeof e)for(let o=r;o<n;++o)t[o]=e;else{const i=(e=wa(e)?e:Ea(e,o)).byteLength;for(let o=0;o<n-r;++o)t[o+r]=e[o%i]}return t},from:Ea,swap16:function(t){const e=t.byteLength;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)Ca(t,r,r+1);return t},swap32:function(t){const e=t.byteLength;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)Ca(t,r,r+3),Ca(t,r+1,r+2);return t},swap64:function(t){const e=t.byteLength;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)Ca(t,r,r+7),Ca(t,r+1,r+6),Ca(t,r+2,r+5),Ca(t,r+3,r+4);return t},toBuffer:function(t){return t},toString:function(t,e,r=0,n=t.byteLength){const o=t.byteLength;return r>=o||n<=r?"":(r<0&&(r=0),n>o&&(n=o),(0!==r||n<o)&&(t=t.subarray(r,n)),ma(e).toString(t))},write:function(t,e,r,n,o){return void 0===r?o="utf8":void 0===n&&"string"==typeof r?(o=r,r=void 0):void 0===o&&"string"==typeof n&&(o=n,n=void 0),ma(o).write(t,e,r,n)}};const va=Gs,Ba=_a;var Sa=Qa;const ka=128;var xa=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Qa(){return this instanceof Qa?(this.hh=new Int32Array(8),this.hl=new Int32Array(8),this.buffer=new Uint8Array(128),this.finalised=!1,this.bytesRead=0,this.pos=0,this.hh[0]=1779033703,this.hh[1]=3144134277,this.hh[2]=1013904242,this.hh[3]=2773480762,this.hh[4]=1359893119,this.hh[5]=2600822924,this.hh[6]=528734635,this.hh[7]=1541459225,this.hl[0]=4089235720,this.hl[1]=2227873595,this.hl[2]=4271175723,this.hl[3]=1595750129,this.hl[4]=2917565137,this.hl[5]=725511199,this.hl[6]=4215389547,this.hl[7]=327033209,this):new Qa}function Ma(t,e,r,n){t[e]=r>>24&255,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r,t[e+4]=n>>24&255,t[e+5]=n>>16&255,t[e+6]=n>>8&255,t[e+7]=255&n}function Da(t,e,r,n){for(var o,i,s,a,c,u,l,f,h,g,d,p,A,y,I,b,m,w,E,C,_,v,B,S,k,x,Q=new Int32Array(16),M=new Int32Array(16),D=t[0],O=t[1],U=t[2],L=t[3],T=t[4],P=t[5],F=t[6],$=t[7],N=e[0],R=e[1],Y=e[2],j=e[3],K=e[4],H=e[5],G=e[6],q=e[7],V=0;n>=128;){for(E=0;E<16;E++)C=8*E+V,Q[E]=r[C+0]<<24|r[C+1]<<16|r[C+2]<<8|r[C+3],M[E]=r[C+4]<<24|r[C+5]<<16|r[C+6]<<8|r[C+7];for(E=0;E<80;E++)if(o=D,i=O,s=U,a=L,c=T,u=P,l=F,$,h=N,g=R,d=Y,p=j,A=K,y=H,I=G,q,B=65535&(v=q),S=v>>>16,k=65535&(_=$),x=_>>>16,B+=65535&(v=(K>>>14|T<<18)^(K>>>18|T<<14)^(T>>>9|K<<23)),S+=v>>>16,k+=65535&(_=(T>>>14|K<<18)^(T>>>18|K<<14)^(K>>>9|T<<23)),x+=_>>>16,B+=65535&(v=K&H^~K&G),S+=v>>>16,k+=65535&(_=T&P^~T&F),x+=_>>>16,B+=65535&(v=xa[2*E+1]),S+=v>>>16,k+=65535&(_=xa[2*E]),x+=_>>>16,_=Q[E%16],S+=(v=M[E%16])>>>16,k+=65535&_,x+=_>>>16,k+=(S+=(B+=65535&v)>>>16)>>>16,B=65535&(v=w=65535&B|S<<16),S=v>>>16,k=65535&(_=m=65535&k|(x+=k>>>16)<<16),x=_>>>16,B+=65535&(v=(N>>>28|D<<4)^(D>>>2|N<<30)^(D>>>7|N<<25)),S+=v>>>16,k+=65535&(_=(D>>>28|N<<4)^(N>>>2|D<<30)^(N>>>7|D<<25)),x+=_>>>16,S+=(v=N&R^N&Y^R&Y)>>>16,k+=65535&(_=D&O^D&U^O&U),x+=_>>>16,f=65535&(k+=(S+=(B+=65535&v)>>>16)>>>16)|(x+=k>>>16)<<16,b=65535&B|S<<16,B=65535&(v=p),S=v>>>16,k=65535&(_=a),x=_>>>16,S+=(v=w)>>>16,k+=65535&(_=m),x+=_>>>16,O=o,U=i,L=s,T=a=65535&(k+=(S+=(B+=65535&v)>>>16)>>>16)|(x+=k>>>16)<<16,P=c,F=u,$=l,D=f,R=h,Y=g,j=d,K=p=65535&B|S<<16,H=A,G=y,q=I,N=b,E%16==15)for(C=0;C<16;C++)_=Q[C],B=65535&(v=M[C]),S=v>>>16,k=65535&_,x=_>>>16,_=Q[(C+9)%16],B+=65535&(v=M[(C+9)%16]),S+=v>>>16,k+=65535&_,x+=_>>>16,m=Q[(C+1)%16],B+=65535&(v=((w=M[(C+1)%16])>>>1|m<<31)^(w>>>8|m<<24)^(w>>>7|m<<25)),S+=v>>>16,k+=65535&(_=(m>>>1|w<<31)^(m>>>8|w<<24)^m>>>7),x+=_>>>16,m=Q[(C+14)%16],S+=(v=((w=M[(C+14)%16])>>>19|m<<13)^(m>>>29|w<<3)^(w>>>6|m<<26))>>>16,k+=65535&(_=(m>>>19|w<<13)^(w>>>29|m<<3)^m>>>6),x+=_>>>16,x+=(k+=(S+=(B+=65535&v)>>>16)>>>16)>>>16,Q[C]=65535&k|x<<16,M[C]=65535&B|S<<16;B=65535&(v=N),S=v>>>16,k=65535&(_=D),x=_>>>16,_=t[0],S+=(v=e[0])>>>16,k+=65535&_,x+=_>>>16,x+=(k+=(S+=(B+=65535&v)>>>16)>>>16)>>>16,t[0]=D=65535&k|x<<16,e[0]=N=65535&B|S<<16,B=65535&(v=R),S=v>>>16,k=65535&(_=O),x=_>>>16,_=t[1],S+=(v=e[1])>>>16,k+=65535&_,x+=_>>>16,x+=(k+=(S+=(B+=65535&v)>>>16)>>>16)>>>16,t[1]=O=65535&k|x<<16,e[1]=R=65535&B|S<<16,B=65535&(v=Y),S=v>>>16,k=65535&(_=U),x=_>>>16,_=t[2],S+=(v=e[2])>>>16,k+=65535&_,x+=_>>>16,x+=(k+=(S+=(B+=65535&v)>>>16)>>>16)>>>16,t[2]=U=65535&k|x<<16,e[2]=Y=65535&B|S<<16,B=65535&(v=j),S=v>>>16,k=65535&(_=L),x=_>>>16,_=t[3],S+=(v=e[3])>>>16,k+=65535&_,x+=_>>>16,x+=(k+=(S+=(B+=65535&v)>>>16)>>>16)>>>16,t[3]=L=65535&k|x<<16,e[3]=j=65535&B|S<<16,B=65535&(v=K),S=v>>>16,k=65535&(_=T),x=_>>>16,_=t[4],S+=(v=e[4])>>>16,k+=65535&_,x+=_>>>16,x+=(k+=(S+=(B+=65535&v)>>>16)>>>16)>>>16,t[4]=T=65535&k|x<<16,e[4]=K=65535&B|S<<16,B=65535&(v=H),S=v>>>16,k=65535&(_=P),x=_>>>16,_=t[5],S+=(v=e[5])>>>16,k+=65535&_,x+=_>>>16,x+=(k+=(S+=(B+=65535&v)>>>16)>>>16)>>>16,t[5]=P=65535&k|x<<16,e[5]=H=65535&B|S<<16,B=65535&(v=G),S=v>>>16,k=65535&(_=F),x=_>>>16,_=t[6],S+=(v=e[6])>>>16,k+=65535&_,x+=_>>>16,x+=(k+=(S+=(B+=65535&v)>>>16)>>>16)>>>16,t[6]=F=65535&k|x<<16,e[6]=G=65535&B|S<<16,B=65535&(v=q),S=v>>>16,k=65535&(_=$),x=_>>>16,_=t[7],S+=(v=e[7])>>>16,k+=65535&_,x+=_>>>16,x+=(k+=(S+=(B+=65535&v)>>>16)>>>16)>>>16,t[7]=$=65535&k|x<<16,e[7]=q=65535&B|S<<16,V+=128,n-=128}}function Oa(t){if(!(this instanceof Oa))return new Oa(t);this.pad=Ba.alloc(128),this.inner=Qa(),this.outer=Qa();const e=Ba.alloc(64);t.byteLength>128&&(Qa().update(t).digest(e),t=e),this.pad.fill(54);for(let e=0;e<t.byteLength;e++)this.pad[e]^=t[e];this.inner.update(this.pad),this.pad.fill(92);for(let e=0;e<t.byteLength;e++)this.pad[e]^=t[e];this.outer.update(this.pad),this.pad.fill(0),e.fill(0)}Qa.prototype.update=function(t,e){va(!1===this.finalised,"Hash instance finalised");var[r,n]=function(t,e){var r=Ba.from(t,e);return[r,r.byteLength]}(t,e);this.bytesRead+=n;const o=n+this.pos&-128;this.buffer.set(r.subarray(0,ka-this.pos),this.pos);const i=this.pos;return(n-=ka-this.pos)>=0&&(Da(this.hh,this.hl,this.buffer,128),this.pos=0),n>127&&(Da(this.hh,this.hl,r.subarray(ka-i,o-i),o-ka),n%=128),this.buffer.set(r.subarray(r.byteLength-n)),this.pos=127&this.bytesRead,this.buffer.fill(0,this.pos),this},Qa.prototype.digest=function(t,e=0){if(va(!1===this.finalised,"Hash instance finalised"),this.finalised=!0,this.buffer.fill(0,this.pos),this.buffer[this.pos]=128,this.pos>111&&(Da(this.hh,this.hl,this.buffer,128),this.buffer.fill(0),this.pos=0),Ma(this.buffer,120,this.bytesRead/536870912|0,this.bytesRead<<3),Da(this.hh,this.hl,this.buffer,128),t instanceof Uint8Array&&t.byteLength>63){for(let r=0;r<8;r++)Ma(t,8*r+e,this.hh[r],this.hl[r]);return t}const r=new Uint8Array(64);for(let t=0;t<8;t++)Ma(r,8*t,this.hh[t],this.hl[t]);return"string"==typeof t?Ba.toString(r,t):r},Oa.prototype.update=function(t,e){return this.inner.update(t,e),this},Oa.prototype.digest=function(t,e=0){return this.outer.update(this.inner.digest()),this.outer.digest(t,e)},Qa.HMAC=Oa;var Ua,La,Ta={exports:{}},Pa=(()=>{for(var t=new Uint8Array(128),e=0;e<64;e++)t[e<26?e+65:e<52?e+71:e<62?e-4:4*e-205]=e;return e=>{for(var r=e.length,n=new Uint8Array(3*(r-("="==e[r-1])-("="==e[r-2]))/4|0),o=0,i=0;o<r;){var s=t[e.charCodeAt(o++)],a=t[e.charCodeAt(o++)],c=t[e.charCodeAt(o++)],u=t[e.charCodeAt(o++)];n[i++]=s<<2|a>>4,n[i++]=a<<4|c>>2,n[i++]=c<<6|u}return n}})(),Fa=(Ua={"wasm-binary:./sha512.wat"(t,e){e.exports=Pa("AGFzbQEAAAABNAVgAX4BfmAIfn5+fn5+fn4AYAR+fn5+AX5gEX9+fn5+fn5+fn5+fn5+fn5+AGAEf39/fwADBgUAAQIDBAUDAQABBikIfgFCAAt+AUIAC34BQgALfgFCAAt+AUIAC34BQgALfgFCAAt+AUIACwcTAgZtZW1vcnkCAAZzaGE1MTIABAqZHgVCACAAQoCA/P+PgECDQhCJIABC//+DgPD/P4NCEIqEIQAgAEL/gfyH8J/A/wCDQgiJIABCgP6D+I/gv4B/g0IIioQLvAMBBn4jBCMFgyMEQn+FIwaDhSEKIwAjAYMjACMCg4UjASMCg4UhCyMAQhyKIwBCIoqFIwBCJ4qFIQwjBEIOiiMEQhKKhSMEQimKhSENIwcgCnwgDXwgAHwgBHwhCCAMIAt8IQkjAyAIfCQHIAggCXwkAyMHIwSDIwdCf4UjBYOFIQojAyMAgyMDIwGDhSMAIwGDhSELIwNCHIojA0IiioUjA0InioUhDCMHQg6KIwdCEoqFIwdCKYqFIQ0jBiAKfCANfCABfCAFfCEIIAwgC3whCSMCIAh8JAYgCCAJfCQCIwYjB4MjBkJ/hSMEg4UhCiMCIwODIwIjAIOFIwMjAIOFIQsjAkIciiMCQiKKhSMCQieKhSEMIwZCDoojBkISioUjBkIpioUhDSMFIAp8IA18IAJ8IAZ8IQggDCALfCEJIwEgCHwkBSAIIAl8JAEjBSMGgyMFQn+FIweDhSEKIwEjAoMjASMDg4UjAyMCg4UhCyMBQhyKIwFCIoqFIwFCJ4qFIQwjBUIOiiMFQhKKhSMFQimKhSENIwQgCnwgDXwgA3wgB3whCCAMIAt8IQkjACAIfCQEIAggCXwkAAsrACAAQhOKIABCPYqFIABCBoiFIAF8IAJCAYogAkIIioUgAkIHiIUgA3x8C6QRACAAKQPQAUIAUQRAIABCiJLznf/M+YTqADcDACAAQrvOqqbY0Ouzu383AwggAEKr8NP0r+68tzw3AxAgAELx7fT4paf9p6V/NwMYIABC0YWa7/rPlIfRADcDICAAQp/Y+dnCkdqCm383AyggAELr+obav7X2wR83AzAgAEL5wvibkaOz8NsANwM4IABCATcD0AELIAApAwAkACAAKQMIJAEgACkDECQCIAApAxgkAyAAKQMgJAQgACkDKCQFIAApAzAkBiAAKQM4JAcgARAAIQEgAhAAIQIgAxAAIQMgBBAAIQQgBRAAIQUgBhAAIQYgBxAAIQcgCBAAIQggCRAAIQkgChAAIQogCxAAIQsgDBAAIQwgDRAAIQ0gDhAAIQ4gDxAAIQ8gEBAAIRAgASACIAMgBEKi3KK5jfOLxcIAQs3LvZ+SktGb8QBCr/a04v75vuC1f0K8t6eM2PT22mkQASAFIAYgByAIQrjqopq/y7CrOUKZoJewm77E+NkAQpuf5fjK1OCfkn9CmIK2093al46rfxABIAkgCiALIAxCwoSMmIrT6oNYQr7fwauU4NbBEkKM5ZL35LfhmCRC4un+r724n4bVABABIA0gDiAPIBBC75Luk8+ul9/yAEKxrdrY47+s74B/QrWknK7y1IHum39ClM2k+8yu/M1BEAEgDyAKIAIgARACIQEgECALIAMgAhACIQIgASAMIAQgAxACIQMgAiANIAUgBBACIQQgAyAOIAYgBRACIQUgBCAPIAcgBhACIQYgBSAQIAggBxACIQcgBiABIAkgCBACIQggByACIAogCRACIQkgCCADIAsgChACIQogCSAEIAwgCxACIQsgCiAFIA0gDBACIQwgCyAGIA4gDRACIQ0gDCAHIA8gDhACIQ4gDSAIIBAgDxACIQ8gDiAJIAEgEBACIRAgASACIAMgBELSlcX3mbjazWRC48u8wuPwkd9vQrWrs9zouOfgD0LluLK9x7mohiQQASAFIAYgByAIQvWErMn1jcv0LUKDyZv1ppWhusoAQtT3h+rLu6rY3ABCtafFmKib4vz2ABABIAkgCiALIAxCq7+b866qlJ+Yf0KQ5NDt0s3xmKh/Qr/C7MeJ+cmBsH9C5J289/v436y/fxABIA0gDiAPIBBCwp+i7bP+gvBGQqXOqpj5qOTTVULvhI6AnuqY5QZC8Ny50PCsypQUEAEgDyAKIAIgARACIQEgECALIAMgAhACIQIgASAMIAQgAxACIQMgAiANIAUgBBACIQQgAyAOIAYgBRACIQUgBCAPIAcgBhACIQYgBSAQIAggBxACIQcgBiABIAkgCBACIQggByACIAogCRACIQkgCCADIAsgChACIQogCSAEIAwgCxACIQsgCiAFIA0gDBACIQwgCyAGIA4gDRACIQ0gDCAHIA8gDhACIQ4gDSAIIBAgDxACIQ8gDiAJIAEgEBACIRAgASACIAMgBEL838i21NDC2ydCppKb4YWnyI0uQu3VkNbFv5uWzQBC3+fW7Lmig5zTABABIAUgBiAHIAhC3se93cjqnIXlAEKo5d7js9eCtfYAQubdtr/kpbLhgX9Cu+qIpNGQi7mSfxABIAkgCiALIAxC5IbE55SU+t+if0KB4Ijiu8mZjah/QpGv4oeN7uKlQkKw/NKysLSUtkcQASANIA4gDyAQQpikvbedg7rJUUKQ0parxcTBzFZCqsDEu9WwjYd0Qrij75WDjqi1EBABIA8gCiACIAEQAiEBIBAgCyADIAIQAiECIAEgDCAEIAMQAiEDIAIgDSAFIAQQAiEEIAMgDiAGIAUQAiEFIAQgDyAHIAYQAiEGIAUgECAIIAcQAiEHIAYgASAJIAgQAiEIIAcgAiAKIAkQAiEJIAggAyALIAoQAiEKIAkgBCAMIAsQAiELIAogBSANIAwQAiEMIAsgBiAOIA0QAiENIAwgByAPIA4QAiEOIA0gCCAQIA8QAiEPIA4gCSABIBAQAiEQIAEgAiADIARCyKHLxuuisNIZQtPWhoqFgdubHkKZ17v8zemdpCdCqJHtjN6Wr9g0EAEgBSAGIAcgCELjtKWuvJaDjjlCy5WGmq7JquzOAELzxo+798myztsAQqPxyrW9/puX6AAQASAJIAogCyAMQvzlvu/l3eDH9ABC4N7cmPTt2NL4AELy1sKPyoKe5IR/QuzzkNOBwcDjjH8QASANIA4gDyAQQqi8jJui/7/fkH9C6fuK9L2dm6ikf0KV8pmW+/7o/L5/QqumyZuunt64RhABIA8gCiACIAEQAiEBIBAgCyADIAIQAiECIAEgDCAEIAMQAiEDIAIgDSAFIAQQAiEEIAMgDiAGIAUQAiEFIAQgDyAHIAYQAiEGIAUgECAIIAcQAiEHIAYgASAJIAgQAiEIIAcgAiAKIAkQAiEJIAggAyALIAoQAiEKIAkgBCAMIAsQAiELIAogBSANIAwQAiEMIAsgBiAOIA0QAiENIAwgByAPIA4QAiEOIA0gCCAQIA8QAiEPIA4gCSABIBAQAiEQIAEgAiADIARCnMOZ0e7Zz5NKQoeEg47ymK7DUUKe1oPv7Lqf7WpC+KK78/7v0751EAEgBSAGIAcgCEK6392Qp/WZ+AZCprGiltq437EKQq6b5PfLgOafEUKbjvGY0ebCuBsQASAJIAogCyAMQoT7kZjS/t3tKEKTyZyGtO+q5TJCvP2mrqHBr888QsyawODJ+NmOwwAQASANIA4gDyAQQraF+dnsl/XizABCqvyV48+zyr/ZAELs9dvWs/Xb5d8AQpewndLEsYai7AAQASAAIAApAwAjAHw3AwAgACAAKQMIIwF8NwMIIAAgACkDECMCfDcDECAAIAApAxgjA3w3AxggACAAKQMgIwR8NwMgIAAgACkDKCMFfDcDKCAAIAApAzAjBnw3AzAgACAAKQM4Iwd8NwM4C8MIARV+IAApA0AhBCAAKQNIIQUgBEL/AIMgAq18IQggBCEGIAQgAq18IQQgACAENwNAIAQgBlQEQCAFQgF8IQUgACAFNwNICwJAIAApA1AhCSAAKQNYIQogACkDYCELIAApA2ghDCAAKQNwIQ0gACkDeCEOIAApA4ABIQ8gACkDiAEhECAAKQOQASERIAApA5gBIRIgACkDoAEhEyAAKQOoASEUIAApA7ABIRUgACkDuAEhFiAAKQPAASEXIAApA8gBIRggCEKAAX0iCEIAUw0AIAAgCSAKIAsgDCANIA4gDyAQIBEgEiATIBQgFSAWIBcgGBADA0AgASkDACEJIAEpAwghCiABKQMQIQsgASkDGCEMIAEpAyAhDSABKQMoIQ4gASkDMCEPIAEpAzghECABKQNAIREgASkDSCESIAEpA1AhEyABKQNYIRQgASkDYCEVIAEpA2ghFiABKQNwIRcgASkDeCEYIAFBgAFqIQEgCEKAAX0iCEIAUwRAIAAgCTcDUCAAIAo3A1ggACALNwNgIAAgDDcDaCAAIA03A3AgACAONwN4IAAgDzcDgAEgACAQNwOIASAAIBE3A5ABIAAgEjcDmAEgACATNwOgASAAIBQ3A6gBIAAgFTcDsAEgACAWNwO4ASAAIBc3A8ABIAAgGDcDyAEMAgsgACAJIAogCyAMIA0gDiAPIBAgESASIBMgFCAVIBYgFyAYEAMMAAsLIANBAUYEQCAEQv8AgyEIQoABIAhCB4NCA4aGIQcCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgCKdBA3YODwMEBQYHCAkKCwwNDg8QAQILCyAHIBeEIRdCACEHCyAHIBiEIRhCACEHIAAgCSAKIAsgDCANIA4gDyAQIBEgEiATIBQgFSAWIBcgGBADIAAgBDcDQEIAIQlCACEKQgAhC0IAIQxCACENQgAhDkIAIQ9CACEQQgAhEUIAIRJCACETQgAhFEIAIRVCACEWQgAhF0IAIRgLIAcgCYQhCUIAIQcLIAcgCoQhCkIAIQcLIAcgC4QhC0IAIQcLIAcgDIQhDEIAIQcLIAcgDYQhDUIAIQcLIAcgDoQhDkIAIQcLIAcgD4QhD0IAIQcLIAcgEIQhEEIAIQcLIAcgEYQhEUIAIQcLIAcgEoQhEkIAIQcLIAcgE4QhE0IAIQcLIAcgFIQhFEIAIQcLIAcgFYQhFUIAIQcLIAcgFoQhFkIAIQcLIARCPYggBUIDiHwQACEXIARCCH4QACEYIAAgCSAKIAsgDCANIA4gDyAQIBEgEiATIBQgFSAWIBcgGBADIAAgACkDABAANwMAIAAgACkDCBAANwMIIAAgACkDEBAANwMQIAAgACkDGBAANwMYIAAgACkDIBAANwMgIAAgACkDKBAANwMoIAAgACkDMBAANwMwIAAgACkDOBAANwM4Cws=")}},function(){return La||(0,Ua[Object.keys(Ua)[0]])((La={exports:{}}).exports,La),La.exports})(),$a=new WebAssembly.Module(Fa);const Na=Gs,Ra=_a,Ya=(ja={imports:{debug:{log(...t){console.log(...t.map((t=>(t>>>0).toString(16).padStart(8,"0"))))},log_tee:t=>(console.log((t>>>0).toString(16).padStart(8,"0")),t)}}},new WebAssembly.Instance($a,ja).exports);var ja;let Ka=0;const Ha=[];Ta.exports=Va;const Ga=Ta.exports.SHA512_BYTES=64,qa=128;function Va(){if(!(this instanceof Va))return new Va;if(!Ya)throw new Error("WASM not loaded. Wait for Sha512.ready(cb)");Ha.length||(Ha.push(Ka),Ka+=216),this.finalized=!1,this.digestLength=Ga,this.pointer=Ha.pop(),this.pos=0,this.wasm=Ya,this._memory=new Uint8Array(Ya.memory.buffer),this._memory.fill(0,this.pointer,this.pointer+216),this.pointer+this.digestLength>this._memory.length&&this._realloc(this.pointer+216)}function za(t){if(!(this instanceof za))return new za(t);this.pad=Ra.alloc(128),this.inner=Va(),this.outer=Va();const e=Ra.alloc(64);t.byteLength>128&&(Va().update(t).digest(e),t=e),this.pad.fill(54);for(let e=0;e<t.byteLength;e++)this.pad[e]^=t[e];this.inner.update(this.pad),this.pad.fill(92);for(let e=0;e<t.byteLength;e++)this.pad[e]^=t[e];this.outer.update(this.pad),this.pad.fill(0),e.fill(0)}function Wa(){}Va.prototype._realloc=function(t){Ya.memory.grow(Math.max(0,Math.ceil(Math.abs(t-this._memory.length)/65536))),this._memory=new Uint8Array(Ya.memory.buffer)},Va.prototype.update=function(t,e){Na(!1===this.finalized,"Hash instance finalized"),Ka%8!=0&&(Ka+=8-Ka%8),Na(Ka%8==0,"input should be aligned for int64");const[r,n]=function(t,e){var r=Ra.from(t,e);return[r,r.byteLength]}(t,e);var o;return Na(r instanceof Uint8Array,"input must be Uint8Array or Buffer"),Ka+t.length>this._memory.length&&this._realloc(Ka+t.length),this._memory.fill(0,Ka,Ka+(n+(o=qa)-1&-o)-qa),this._memory.set(r.subarray(0,qa-this.pos),this.pointer+80+this.pos),this._memory.set(r.subarray(qa-this.pos),Ka),this.pos=this.pos+n&127,Ya.sha512(this.pointer,Ka,n,0),this},Va.prototype.digest=function(t,e=0){Na(!1===this.finalized,"Hash instance finalized"),this.finalized=!0,Ha.push(this.pointer);const r=this.pointer+80+this.pos;this._memory.fill(0,r,this.pointer+80+qa),Ya.sha512(this.pointer,Ka,0,1);const n=this._memory.subarray(this.pointer,this.pointer+this.digestLength);if(!t)return n;if("string"==typeof t)return Ra.toString(n,t);Na(t instanceof Uint8Array,"output must be Uint8Array or Buffer"),Na(t.byteLength>=this.digestLength+e,"output must have at least 'SHA512_BYTES' bytes remaining");for(let r=0;r<this.digestLength;r++)t[r+e]=n[r];return t},Va.WASM=Ya,Va.WASM_SUPPORTED="undefined"!=typeof WebAssembly,Va.ready=function(t){return t||(t=Wa),Ya?(t(),Promise.resolve()):t(new Error("WebAssembly not supported"))},Va.prototype.ready=Va.ready,za.prototype.update=function(t,e){return this.inner.update(t,e),this},za.prototype.digest=function(t,e=0){return this.outer.update(this.inner.digest()),this.outer.digest(t,e)},Va.HMAC=za;const Ja=Sa,Xa=Ta.exports;var Za=Ja;ta.exports=function(){return new Za},ta.exports.ready=function(t){Xa.ready((function(){t()}))},ta.exports.WASM_SUPPORTED=Xa.SUPPORTED,ta.exports.WASM_LOADED=!1,ta.exports.SHA512_BYTES=64,Xa.ready((function(t){t||(ta.exports.WASM_LOADED=!0,ta.exports=Za=Xa)}));const{crypto_verify_32:tc}=Ws.exports,ec=ta.exports,rc=Gs;var nc={crypto_auth_BYTES:32,crypto_auth_KEYBYTES:32,crypto_auth:function(t,e,r){rc(32===t.byteLength,"out should be 'crypto_auth_BYTES' in length"),rc(32===r.byteLength,"key should be 'crypto_auth_KEYBYTES' in length");const n=new Uint8Array(64),o=ec.HMAC(r);o.update(e),o.digest(n),t.set(n.subarray(0,32))},crypto_auth_verify:function(t,e,r){rc(32===t.byteLength,"h should be 'crypto_auth_BYTES' in length"),rc(32===r.byteLength,"key should be 'crypto_auth_KEYBYTES' in length");const n=ec.HMAC(r).update(e).digest();return tc(t,0,n,0)}};const oc=ta.exports,ic=Gs;if(1!==new Uint16Array([1])[0])throw new Error("Big endian architecture is not supported.");function sc(t,e,r){return ic(64===t.byteLength,"out must be 'crypto_hash_sha512_BYTES' bytes long"),oc().update(e.subarray(0,r)).digest(t),0}var ac={crypto_hash:function(t,e,r){return sc(t,e,r)},crypto_hash_sha512:sc,crypto_hash_sha512_BYTES:64,crypto_hash_BYTES:64};if(1!==new Uint16Array([1])[0])throw new Error("Big endian architecture is not supported.");var cc=function(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;e++)r[e]=t[e];return r},uc=new Uint8Array(32);uc[0]=9;var lc=cc(),fc=cc([1]),hc=cc([56129,1]),gc=cc([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),dc=cc([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),pc=cc([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Ac=cc([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),yc=cc([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Ic(t,e,r){var n,o,i=0,s=0,a=0,c=0,u=0,l=0,f=0,h=0,g=0,d=0,p=0,A=0,y=0,I=0,b=0,m=0,w=0,E=0,C=0,_=0,v=0,B=0,S=0,k=0,x=0,Q=0,M=0,D=0,O=0,U=0,L=0,T=r[0],P=r[1],F=r[2],$=r[3],N=r[4],R=r[5],Y=r[6],j=r[7],K=r[8],H=r[9],G=r[10],q=r[11],V=r[12],z=r[13],W=r[14],J=r[15];i+=(n=e[0])*T,s+=n*P,a+=n*F,c+=n*$,u+=n*N,l+=n*R,f+=n*Y,h+=n*j,g+=n*K,d+=n*H,p+=n*G,A+=n*q,y+=n*V,I+=n*z,b+=n*W,m+=n*J,s+=(n=e[1])*T,a+=n*P,c+=n*F,u+=n*$,l+=n*N,f+=n*R,h+=n*Y,g+=n*j,d+=n*K,p+=n*H,A+=n*G,y+=n*q,I+=n*V,b+=n*z,m+=n*W,w+=n*J,a+=(n=e[2])*T,c+=n*P,u+=n*F,l+=n*$,f+=n*N,h+=n*R,g+=n*Y,d+=n*j,p+=n*K,A+=n*H,y+=n*G,I+=n*q,b+=n*V,m+=n*z,w+=n*W,E+=n*J,c+=(n=e[3])*T,u+=n*P,l+=n*F,f+=n*$,h+=n*N,g+=n*R,d+=n*Y,p+=n*j,A+=n*K,y+=n*H,I+=n*G,b+=n*q,m+=n*V,w+=n*z,E+=n*W,C+=n*J,u+=(n=e[4])*T,l+=n*P,f+=n*F,h+=n*$,g+=n*N,d+=n*R,p+=n*Y,A+=n*j,y+=n*K,I+=n*H,b+=n*G,m+=n*q,w+=n*V,E+=n*z,C+=n*W,_+=n*J,l+=(n=e[5])*T,f+=n*P,h+=n*F,g+=n*$,d+=n*N,p+=n*R,A+=n*Y,y+=n*j,I+=n*K,b+=n*H,m+=n*G,w+=n*q,E+=n*V,C+=n*z,_+=n*W,v+=n*J,f+=(n=e[6])*T,h+=n*P,g+=n*F,d+=n*$,p+=n*N,A+=n*R,y+=n*Y,I+=n*j,b+=n*K,m+=n*H,w+=n*G,E+=n*q,C+=n*V,_+=n*z,v+=n*W,B+=n*J,h+=(n=e[7])*T,g+=n*P,d+=n*F,p+=n*$,A+=n*N,y+=n*R,I+=n*Y,b+=n*j,m+=n*K,w+=n*H,E+=n*G,C+=n*q,_+=n*V,v+=n*z,B+=n*W,S+=n*J,g+=(n=e[8])*T,d+=n*P,p+=n*F,A+=n*$,y+=n*N,I+=n*R,b+=n*Y,m+=n*j,w+=n*K,E+=n*H,C+=n*G,_+=n*q,v+=n*V,B+=n*z,S+=n*W,k+=n*J,d+=(n=e[9])*T,p+=n*P,A+=n*F,y+=n*$,I+=n*N,b+=n*R,m+=n*Y,w+=n*j,E+=n*K,C+=n*H,_+=n*G,v+=n*q,B+=n*V,S+=n*z,k+=n*W,x+=n*J,p+=(n=e[10])*T,A+=n*P,y+=n*F,I+=n*$,b+=n*N,m+=n*R,w+=n*Y,E+=n*j,C+=n*K,_+=n*H,v+=n*G,B+=n*q,S+=n*V,k+=n*z,x+=n*W,Q+=n*J,A+=(n=e[11])*T,y+=n*P,I+=n*F,b+=n*$,m+=n*N,w+=n*R,E+=n*Y,C+=n*j,_+=n*K,v+=n*H,B+=n*G,S+=n*q,k+=n*V,x+=n*z,Q+=n*W,M+=n*J,y+=(n=e[12])*T,I+=n*P,b+=n*F,m+=n*$,w+=n*N,E+=n*R,C+=n*Y,_+=n*j,v+=n*K,B+=n*H,S+=n*G,k+=n*q,x+=n*V,Q+=n*z,M+=n*W,D+=n*J,I+=(n=e[13])*T,b+=n*P,m+=n*F,w+=n*$,E+=n*N,C+=n*R,_+=n*Y,v+=n*j,B+=n*K,S+=n*H,k+=n*G,x+=n*q,Q+=n*V,M+=n*z,D+=n*W,O+=n*J,b+=(n=e[14])*T,m+=n*P,w+=n*F,E+=n*$,C+=n*N,_+=n*R,v+=n*Y,B+=n*j,S+=n*K,k+=n*H,x+=n*G,Q+=n*q,M+=n*V,D+=n*z,O+=n*W,U+=n*J,m+=(n=e[15])*T,s+=38*(E+=n*F),a+=38*(C+=n*$),c+=38*(_+=n*N),u+=38*(v+=n*R),l+=38*(B+=n*Y),f+=38*(S+=n*j),h+=38*(k+=n*K),g+=38*(x+=n*H),d+=38*(Q+=n*G),p+=38*(M+=n*q),A+=38*(D+=n*V),y+=38*(O+=n*z),I+=38*(U+=n*W),b+=38*(L+=n*J),i=(n=(i+=38*(w+=n*P))+(o=1)+65535)-65536*(o=Math.floor(n/65536)),s=(n=s+o+65535)-65536*(o=Math.floor(n/65536)),a=(n=a+o+65535)-65536*(o=Math.floor(n/65536)),c=(n=c+o+65535)-65536*(o=Math.floor(n/65536)),u=(n=u+o+65535)-65536*(o=Math.floor(n/65536)),l=(n=l+o+65535)-65536*(o=Math.floor(n/65536)),f=(n=f+o+65535)-65536*(o=Math.floor(n/65536)),h=(n=h+o+65535)-65536*(o=Math.floor(n/65536)),g=(n=g+o+65535)-65536*(o=Math.floor(n/65536)),d=(n=d+o+65535)-65536*(o=Math.floor(n/65536)),p=(n=p+o+65535)-65536*(o=Math.floor(n/65536)),A=(n=A+o+65535)-65536*(o=Math.floor(n/65536)),y=(n=y+o+65535)-65536*(o=Math.floor(n/65536)),I=(n=I+o+65535)-65536*(o=Math.floor(n/65536)),b=(n=b+o+65535)-65536*(o=Math.floor(n/65536)),m=(n=m+o+65535)-65536*(o=Math.floor(n/65536)),i=(n=(i+=o-1+37*(o-1))+(o=1)+65535)-65536*(o=Math.floor(n/65536)),s=(n=s+o+65535)-65536*(o=Math.floor(n/65536)),a=(n=a+o+65535)-65536*(o=Math.floor(n/65536)),c=(n=c+o+65535)-65536*(o=Math.floor(n/65536)),u=(n=u+o+65535)-65536*(o=Math.floor(n/65536)),l=(n=l+o+65535)-65536*(o=Math.floor(n/65536)),f=(n=f+o+65535)-65536*(o=Math.floor(n/65536)),h=(n=h+o+65535)-65536*(o=Math.floor(n/65536)),g=(n=g+o+65535)-65536*(o=Math.floor(n/65536)),d=(n=d+o+65535)-65536*(o=Math.floor(n/65536)),p=(n=p+o+65535)-65536*(o=Math.floor(n/65536)),A=(n=A+o+65535)-65536*(o=Math.floor(n/65536)),y=(n=y+o+65535)-65536*(o=Math.floor(n/65536)),I=(n=I+o+65535)-65536*(o=Math.floor(n/65536)),b=(n=b+o+65535)-65536*(o=Math.floor(n/65536)),m=(n=m+o+65535)-65536*(o=Math.floor(n/65536)),i+=o-1+37*(o-1),t[0]=i,t[1]=s,t[2]=a,t[3]=c,t[4]=u,t[5]=l,t[6]=f,t[7]=h,t[8]=g,t[9]=d,t[10]=p,t[11]=A,t[12]=y,t[13]=I,t[14]=b,t[15]=m}function bc(t,e){Ic(t,e,e)}function mc(t,e,r){for(var n,o=~(r-1),i=0;i<16;i++)n=o&(t[i]^e[i]),t[i]^=n,e[i]^=n}function wc(t){var e,r,n=1;for(e=0;e<16;e++)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-65536*n;t[0]+=n-1+37*(n-1)}var Ec={gf:cc,A:function(t,e,r){for(var n=0;n<16;n++)t[n]=e[n]+r[n]},Z:function(t,e,r){for(var n=0;n<16;n++)t[n]=e[n]-r[n]},M:Ic,S:bc,sel25519:mc,pack25519:function(t,e){var r,n,o,i=cc(),s=cc();for(r=0;r<16;r++)s[r]=e[r];for(wc(s),wc(s),wc(s),n=0;n<2;n++){for(i[0]=s[0]-65517,r=1;r<15;r++)i[r]=s[r]-65535-(i[r-1]>>16&1),i[r-1]&=65535;i[15]=s[15]-32767-(i[14]>>16&1),o=i[15]>>16&1,i[14]&=65535,mc(s,i,1-o)}for(r=0;r<16;r++)t[2*r]=255&s[r],t[2*r+1]=s[r]>>8},unpack25519:function(t,e){var r;for(r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767},inv25519:function(t,e){var r,n=cc();for(r=0;r<16;r++)n[r]=e[r];for(r=253;r>=0;r--)bc(n,n),2!==r&&4!==r&&Ic(n,n,e);for(r=0;r<16;r++)t[r]=n[r]},gf0:lc,gf1:fc,_9:uc,_121665:hc,D:gc,D2:dc,X:pc,Y:Ac,I:yc};const{_9:Cc,_121665:_c,gf:vc,inv25519:Bc,pack25519:Sc,unpack25519:kc,sel25519:xc,A:Qc,M:Mc,Z:Dc,S:Oc}=Ec;var Uc={crypto_scalarmult:Lc,crypto_scalarmult_base:function(t,e){return Lc(t,e,Cc)},crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32};function Lc(t,e,r){Tc(t,32),Tc(e,32),Tc(r,32);var n,o,i=new Uint8Array(32),s=new Float64Array(80),a=vc(),c=vc(),u=vc(),l=vc(),f=vc(),h=vc();for(o=0;o<31;o++)i[o]=e[o];for(i[31]=127&e[31]|64,i[0]&=248,kc(s,r),o=0;o<16;o++)c[o]=s[o],l[o]=a[o]=u[o]=0;for(a[0]=l[0]=1,o=254;o>=0;--o)n=i[o>>>3]>>>(7&o)&1,xc(a,c,n),xc(u,l,n),Qc(f,a,u),Dc(a,a,u),Qc(u,c,l),Dc(c,c,l),Oc(l,f),Oc(h,a),Mc(a,u,a),Mc(u,c,f),Qc(f,a,u),Dc(a,a,u),Oc(c,a),Dc(u,l,h),Mc(a,u,_c),Qc(a,a,l),Mc(u,u,a),Mc(a,l,h),Mc(l,c,s),Oc(c,f),xc(a,c,n),xc(u,l,n);for(o=0;o<16;o++)s[o+16]=a[o],s[o+32]=u[o],s[o+48]=c[o],s[o+64]=l[o];var g=s.subarray(32),d=s.subarray(16);return Bc(g,g),Mc(d,d,g),Sc(t,d),0}function Tc(t,e){if(!t||e&&t.length<e)throw new Error("Argument must be a buffer"+(e?" of length "+e:""))}var Pc={exports:{}},Fc={exports:{}},$c={exports:{}},Nc=(()=>{for(var t=new Uint8Array(128),e=0;e<64;e++)t[e<26?e+65:e<52?e+71:e<62?e-4:4*e-205]=e;return e=>{for(var r=e.length,n=new Uint8Array(3*(r-("="==e[r-1])-("="==e[r-2]))/4|0),o=0,i=0;o<r;){var s=t[e.charCodeAt(o++)],a=t[e.charCodeAt(o++)],c=t[e.charCodeAt(o++)],u=t[e.charCodeAt(o++)];n[i++]=s<<2|a>>4,n[i++]=a<<4|c>>2,n[i++]=c<<6|u}return n}})(),Rc=((t,e)=>function(){return e||(0,t[Object.keys(t)[0]])((e={exports:{}}).exports,e),e.exports})({"wasm-binary:./blake2b.wat"(t,e){e.exports=Nc("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")}}),Yc=Rc(),jc=WebAssembly.compile(Yc),Kc=Gs,Hc=_a,Gc=null,qc="undefined"!=typeof WebAssembly&&(async t=>(await WebAssembly.instantiate(await jc,t)).exports)().then((t=>{Gc=t})),Vc=64,zc=[];$c.exports=ru;var Wc=$c.exports.BYTES_MIN=16,Jc=$c.exports.BYTES_MAX=64;$c.exports.BYTES=32;var Xc=$c.exports.KEYBYTES_MIN=16,Zc=$c.exports.KEYBYTES_MAX=64;$c.exports.KEYBYTES=32;var tu=$c.exports.SALTBYTES=16,eu=$c.exports.PERSONALBYTES=16;function ru(t,e,r,n,o){if(!(this instanceof ru))return new ru(t,e,r,n,o);if(!Gc)throw new Error("WASM not loaded. Wait for Blake2b.ready(cb)");t||(t=32),!0!==o&&(Kc(t>=Wc,"digestLength must be at least "+Wc+", was given "+t),Kc(t<=Jc,"digestLength must be at most "+Jc+", was given "+t),null!=e&&(Kc(e instanceof Uint8Array,"key must be Uint8Array or Buffer"),Kc(e.length>=Xc,"key must be at least "+Xc+", was given "+e.length),Kc(e.length<=Zc,"key must be at least "+Zc+", was given "+e.length)),null!=r&&(Kc(r instanceof Uint8Array,"salt must be Uint8Array or Buffer"),Kc(r.length===tu,"salt must be exactly "+tu+", was given "+r.length)),null!=n&&(Kc(n instanceof Uint8Array,"personal must be Uint8Array or Buffer"),Kc(n.length===eu,"personal must be exactly "+eu+", was given "+n.length))),zc.length||(zc.push(Vc),Vc+=216),this.digestLength=t,this.finalized=!1,this.pointer=zc.pop(),this._memory=new Uint8Array(Gc.memory.buffer),this._memory.fill(0,0,64),this._memory[0]=this.digestLength,this._memory[1]=e?e.length:0,this._memory[2]=1,this._memory[3]=1,r&&this._memory.set(r,32),n&&this._memory.set(n,48),this.pointer+216>this._memory.length&&this._realloc(this.pointer+216),Gc.blake2b_init(this.pointer,this.digestLength),e&&(this.update(e),this._memory.fill(0,Vc,Vc+e.length),this._memory[this.pointer+200]=128)}function nu(){}ru.prototype._realloc=function(t){Gc.memory.grow(Math.max(0,Math.ceil(Math.abs(t-this._memory.length)/65536))),this._memory=new Uint8Array(Gc.memory.buffer)},ru.prototype.update=function(t){return Kc(!1===this.finalized,"Hash instance finalized"),Kc(t instanceof Uint8Array,"input must be Uint8Array or Buffer"),Vc+t.length>this._memory.length&&this._realloc(Vc+t.length),this._memory.set(t,Vc),Gc.blake2b_update(this.pointer,Vc,Vc+t.length),this},ru.prototype.digest=function(t){if(Kc(!1===this.finalized,"Hash instance finalized"),this.finalized=!0,zc.push(this.pointer),Gc.blake2b_final(this.pointer),!t||"binary"===t)return this._memory.slice(this.pointer+128,this.pointer+128+this.digestLength);if("string"==typeof t)return Hc.toString(this._memory,t,this.pointer+128,this.pointer+128+this.digestLength);Kc(t instanceof Uint8Array&&t.length>=this.digestLength,"input must be Uint8Array or Buffer");for(var e=0;e<this.digestLength;e++)t[e]=this._memory[this.pointer+128+e];return t},ru.prototype.final=ru.prototype.digest,ru.WASM=Gc,ru.SUPPORTED="undefined"!=typeof WebAssembly,ru.ready=function(t){return t||(t=nu),qc?qc.then((()=>t()),t):t(new Error("WebAssembly not supported"))},ru.prototype.ready=ru.ready,ru.prototype.getPartialHash=function(){return this._memory.slice(this.pointer,this.pointer+216)},ru.prototype.setPartialHash=function(t){this._memory.set(t,this.pointer)};var ou=Gs,iu=$c.exports;function su(t,e,r){var n=t[e]+t[r],o=t[e+1]+t[r+1];n>=4294967296&&o++,t[e]=n,t[e+1]=o}function au(t,e,r,n){var o=t[e]+r;r<0&&(o+=4294967296);var i=t[e+1]+n;o>=4294967296&&i++,t[e]=o,t[e+1]=i}function cu(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function uu(t,e,r,n,o,i){var s=gu[o],a=gu[o+1],c=gu[i],u=gu[i+1];su(hu,t,e),au(hu,t,s,a);var l=hu[n]^hu[t],f=hu[n+1]^hu[t+1];hu[n]=f,hu[n+1]=l,su(hu,r,n),l=hu[e]^hu[r],f=hu[e+1]^hu[r+1],hu[e]=l>>>24^f<<8,hu[e+1]=f>>>24^l<<8,su(hu,t,e),au(hu,t,c,u),l=hu[n]^hu[t],f=hu[n+1]^hu[t+1],hu[n]=l>>>16^f<<16,hu[n+1]=f>>>16^l<<16,su(hu,r,n),l=hu[e]^hu[r],f=hu[e+1]^hu[r+1],hu[e]=f>>>31^l<<1,hu[e+1]=l>>>31^f<<1}var lu=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),fu=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map((function(t){return 2*t}))),hu=new Uint32Array(32),gu=new Uint32Array(32);function du(t,e){var r=0;for(r=0;r<16;r++)hu[r]=t.h[r],hu[r+16]=lu[r];for(hu[24]=hu[24]^t.t,hu[25]=hu[25]^t.t/4294967296,e&&(hu[28]=~hu[28],hu[29]=~hu[29]),r=0;r<32;r++)gu[r]=cu(t.b,4*r);for(r=0;r<12;r++)uu(0,8,16,24,fu[16*r+0],fu[16*r+1]),uu(2,10,18,26,fu[16*r+2],fu[16*r+3]),uu(4,12,20,28,fu[16*r+4],fu[16*r+5]),uu(6,14,22,30,fu[16*r+6],fu[16*r+7]),uu(0,10,20,30,fu[16*r+8],fu[16*r+9]),uu(2,12,22,24,fu[16*r+10],fu[16*r+11]),uu(4,14,16,26,fu[16*r+12],fu[16*r+13]),uu(6,8,18,28,fu[16*r+14],fu[16*r+15]);for(r=0;r<16;r++)t.h[r]=t.h[r]^hu[r]^hu[r+16]}var pu=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function Au(t,e,r,n){pu.fill(0),this.b=new Uint8Array(128),this.h=new Uint32Array(16),this.t=0,this.c=0,this.outlen=t,pu[0]=t,e&&(pu[1]=e.length),pu[2]=1,pu[3]=1,r&&pu.set(r,32),n&&pu.set(n,48);for(var o=0;o<16;o++)this.h[o]=lu[o]^cu(pu,4*o);e&&(yu(this,e),this.c=128)}function yu(t,e){for(var r=0;r<e.length;r++)128===t.c&&(t.t+=t.c,du(t,!1),t.c=0),t.b[t.c++]=e[r]}function Iu(t){return t<16?"0"+t.toString(16):t.toString(16)}Au.prototype.update=function(t){return ou(t instanceof Uint8Array,"input must be Uint8Array or Buffer"),yu(this,t),this},Au.prototype.digest=function(t){var e=t&&"binary"!==t&&"hex"!==t?t:new Uint8Array(this.outlen);return ou(e instanceof Uint8Array,'out must be "binary", "hex", Uint8Array, or Buffer'),ou(e.length>=this.outlen,"out must have at least outlen bytes of space"),function(t,e){t.t+=t.c;for(;t.c<128;)t.b[t.c++]=0;du(t,!0);for(var r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(3&r)}(this,e),"hex"===t?function(t){for(var e="",r=0;r<t.length;r++)e+=Iu(t[r]);return e}(e):e},Au.prototype.final=Au.prototype.digest,Au.ready=function(t){iu.ready((function(){t()}))};var bu=Au;Fc.exports=function(t,e,r,n,o){return!0!==o&&(ou(t>=mu,"outlen must be at least "+mu+", was given "+t),ou(t<=wu,"outlen must be at most "+wu+", was given "+t),null!=e&&(ou(e instanceof Uint8Array,"key must be Uint8Array or Buffer"),ou(e.length>=Eu,"key must be at least "+Eu+", was given "+e.length),ou(e.length<=Cu,"key must be at most "+Cu+", was given "+e.length)),null!=r&&(ou(r instanceof Uint8Array,"salt must be Uint8Array or Buffer"),ou(r.length===_u,"salt must be exactly "+_u+", was given "+r.length)),null!=n&&(ou(n instanceof Uint8Array,"personal must be Uint8Array or Buffer"),ou(n.length===vu,"personal must be exactly "+vu+", was given "+n.length))),new bu(t,e,r,n)},Fc.exports.ready=function(t){iu.ready((function(){t()}))},Fc.exports.WASM_SUPPORTED=iu.SUPPORTED,Fc.exports.WASM_LOADED=!1;var mu=Fc.exports.BYTES_MIN=16,wu=Fc.exports.BYTES_MAX=64;Fc.exports.BYTES=32;var Eu=Fc.exports.KEYBYTES_MIN=16,Cu=Fc.exports.KEYBYTES_MAX=64;Fc.exports.KEYBYTES=32;var _u=Fc.exports.SALTBYTES=16,vu=Fc.exports.PERSONALBYTES=16;iu.ready((function(t){t||(Fc.exports.WASM_LOADED=!0,Fc.exports=iu)})),function(t){var e=Fc.exports;if(1!==new Uint16Array([1])[0])throw new Error("Big endian architecture is not supported.");t.exports.crypto_generichash_PRIMITIVE="blake2b",t.exports.crypto_generichash_BYTES_MIN=e.BYTES_MIN,t.exports.crypto_generichash_BYTES_MAX=e.BYTES_MAX,t.exports.crypto_generichash_BYTES=e.BYTES,t.exports.crypto_generichash_KEYBYTES_MIN=e.KEYBYTES_MIN,t.exports.crypto_generichash_KEYBYTES_MAX=e.KEYBYTES_MAX,t.exports.crypto_generichash_KEYBYTES=e.KEYBYTES,t.exports.crypto_generichash_WASM_SUPPORTED=e.WASM_SUPPORTED,t.exports.crypto_generichash_WASM_LOADED=!1,t.exports.crypto_generichash=function(t,r,n){e(t.length,n).update(r).final(t)},t.exports.crypto_generichash_ready=e.ready,t.exports.crypto_generichash_batch=function(t,r,n){for(var o=e(t.length,n),i=0;i<r.length;i++)o.update(r[i]);o.final(t)},t.exports.crypto_generichash_instance=function(r,n){return null==n&&(n=t.exports.crypto_generichash_BYTES),e(n,r)},e.ready((function(r){t.exports.crypto_generichash_WASM_LOADED=e.WASM_LOADED}))}(Pc);var Bu={},Su=(()=>{for(var t=new Uint8Array(128),e=0;e<64;e++)t[e<26?e+65:e<52?e+71:e<62?e-4:4*e-205]=e;return e=>{for(var r=e.length,n=new Uint8Array(3*(r-("="==e[r-1])-("="==e[r-2]))/4|0),o=0,i=0;o<r;){var s=t[e.charCodeAt(o++)],a=t[e.charCodeAt(o++)],c=t[e.charCodeAt(o++)],u=t[e.charCodeAt(o++)];n[i++]=s<<2|a>>4,n[i++]=a<<4|c>>2,n[i++]=c<<6|u}return n}})(),ku=((t,e)=>function(){return e||(0,t[Object.keys(t)[0]])((e={exports:{}}).exports,e),e.exports})({"wasm-binary:./xsalsa20.wat"(t,e){e.exports=Su("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")}}),xu=ku(),Qu=new WebAssembly.Module(xu),Mu="undefined"!=typeof WebAssembly&&(t=>new WebAssembly.Instance(Qu,t).exports)(),Du=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]),Ou=144,Uu=Ou,Lu=[],Tu=Pu;function Pu(t,e){if(!(this instanceof Pu))return new Pu(t,e);if(!t||t.length<24)throw new Error("nonce must be at least 24 bytes");if(!e||e.length<32)throw new Error("key must be at least 32 bytes");this._xor=Mu?new Fu(t,e):new $u(t,e)}function Fu(t,e){Lu.length||(Lu.push(Ou),Ou+=64),this._pointer=Lu.pop(),this._nonce=this._pointer+8,this._key=this._nonce+24,this._overflow=0,this._memory=new Uint8Array(Mu.memory.buffer),this._memory.fill(0,this._pointer,this._pointer+8),this._memory.set(t,this._nonce),this._memory.set(e,this._key)}function $u(t,e){this._s=new Uint8Array(32),this._z=new Uint8Array(16),this._overflow=0,Ru(this._s,t,e,Du);for(var r=0;r<8;r++)this._z[r]=t[r+16]}function Nu(t,e,r,n){for(var o,i=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,u=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,l=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,f=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,h=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,g=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,d=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,p=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,A=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,y=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,I=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,b=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,m=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,w=i,E=s,C=a,_=c,v=u,B=l,S=f,k=h,x=g,Q=d,M=p,D=A,O=y,U=I,L=b,T=m,P=0;P<20;P+=2)w^=(o=(O^=(o=(x^=(o=(v^=(o=w+O|0)<<7|o>>>25)+w|0)<<9|o>>>23)+v|0)<<13|o>>>19)+x|0)<<18|o>>>14,B^=(o=(E^=(o=(U^=(o=(Q^=(o=B+E|0)<<7|o>>>25)+B|0)<<9|o>>>23)+Q|0)<<13|o>>>19)+U|0)<<18|o>>>14,M^=(o=(S^=(o=(C^=(o=(L^=(o=M+S|0)<<7|o>>>25)+M|0)<<9|o>>>23)+L|0)<<13|o>>>19)+C|0)<<18|o>>>14,T^=(o=(D^=(o=(k^=(o=(_^=(o=T+D|0)<<7|o>>>25)+T|0)<<9|o>>>23)+_|0)<<13|o>>>19)+k|0)<<18|o>>>14,w^=(o=(_^=(o=(C^=(o=(E^=(o=w+_|0)<<7|o>>>25)+w|0)<<9|o>>>23)+E|0)<<13|o>>>19)+C|0)<<18|o>>>14,B^=(o=(v^=(o=(k^=(o=(S^=(o=B+v|0)<<7|o>>>25)+B|0)<<9|o>>>23)+S|0)<<13|o>>>19)+k|0)<<18|o>>>14,M^=(o=(Q^=(o=(x^=(o=(D^=(o=M+Q|0)<<7|o>>>25)+M|0)<<9|o>>>23)+D|0)<<13|o>>>19)+x|0)<<18|o>>>14,T^=(o=(L^=(o=(U^=(o=(O^=(o=T+L|0)<<7|o>>>25)+T|0)<<9|o>>>23)+O|0)<<13|o>>>19)+U|0)<<18|o>>>14;w=w+i|0,E=E+s|0,C=C+a|0,_=_+c|0,v=v+u|0,B=B+l|0,S=S+f|0,k=k+h|0,x=x+g|0,Q=Q+d|0,M=M+p|0,D=D+A|0,O=O+y|0,U=U+I|0,L=L+b|0,T=T+m|0,t[0]=w>>>0&255,t[1]=w>>>8&255,t[2]=w>>>16&255,t[3]=w>>>24&255,t[4]=E>>>0&255,t[5]=E>>>8&255,t[6]=E>>>16&255,t[7]=E>>>24&255,t[8]=C>>>0&255,t[9]=C>>>8&255,t[10]=C>>>16&255,t[11]=C>>>24&255,t[12]=_>>>0&255,t[13]=_>>>8&255,t[14]=_>>>16&255,t[15]=_>>>24&255,t[16]=v>>>0&255,t[17]=v>>>8&255,t[18]=v>>>16&255,t[19]=v>>>24&255,t[20]=B>>>0&255,t[21]=B>>>8&255,t[22]=B>>>16&255,t[23]=B>>>24&255,t[24]=S>>>0&255,t[25]=S>>>8&255,t[26]=S>>>16&255,t[27]=S>>>24&255,t[28]=k>>>0&255,t[29]=k>>>8&255,t[30]=k>>>16&255,t[31]=k>>>24&255,t[32]=x>>>0&255,t[33]=x>>>8&255,t[34]=x>>>16&255,t[35]=x>>>24&255,t[36]=Q>>>0&255,t[37]=Q>>>8&255,t[38]=Q>>>16&255,t[39]=Q>>>24&255,t[40]=M>>>0&255,t[41]=M>>>8&255,t[42]=M>>>16&255,t[43]=M>>>24&255,t[44]=D>>>0&255,t[45]=D>>>8&255,t[46]=D>>>16&255,t[47]=D>>>24&255,t[48]=O>>>0&255,t[49]=O>>>8&255,t[50]=O>>>16&255,t[51]=O>>>24&255,t[52]=U>>>0&255,t[53]=U>>>8&255,t[54]=U>>>16&255,t[55]=U>>>24&255,t[56]=L>>>0&255,t[57]=L>>>8&255,t[58]=L>>>16&255,t[59]=L>>>24&255,t[60]=T>>>0&255,t[61]=T>>>8&255,t[62]=T>>>16&255,t[63]=T>>>24&255}function Ru(t,e,r,n){for(var o,i=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,u=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,l=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,f=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,h=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,g=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,d=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,p=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,A=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,y=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,I=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,b=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,m=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,w=0;w<20;w+=2)i^=(o=(y^=(o=(g^=(o=(u^=(o=i+y|0)<<7|o>>>25)+i|0)<<9|o>>>23)+u|0)<<13|o>>>19)+g|0)<<18|o>>>14,l^=(o=(s^=(o=(I^=(o=(d^=(o=l+s|0)<<7|o>>>25)+l|0)<<9|o>>>23)+d|0)<<13|o>>>19)+I|0)<<18|o>>>14,p^=(o=(f^=(o=(a^=(o=(b^=(o=p+f|0)<<7|o>>>25)+p|0)<<9|o>>>23)+b|0)<<13|o>>>19)+a|0)<<18|o>>>14,m^=(o=(A^=(o=(h^=(o=(c^=(o=m+A|0)<<7|o>>>25)+m|0)<<9|o>>>23)+c|0)<<13|o>>>19)+h|0)<<18|o>>>14,i^=(o=(c^=(o=(a^=(o=(s^=(o=i+c|0)<<7|o>>>25)+i|0)<<9|o>>>23)+s|0)<<13|o>>>19)+a|0)<<18|o>>>14,l^=(o=(u^=(o=(h^=(o=(f^=(o=l+u|0)<<7|o>>>25)+l|0)<<9|o>>>23)+f|0)<<13|o>>>19)+h|0)<<18|o>>>14,p^=(o=(d^=(o=(g^=(o=(A^=(o=p+d|0)<<7|o>>>25)+p|0)<<9|o>>>23)+A|0)<<13|o>>>19)+g|0)<<18|o>>>14,m^=(o=(b^=(o=(I^=(o=(y^=(o=m+b|0)<<7|o>>>25)+m|0)<<9|o>>>23)+y|0)<<13|o>>>19)+I|0)<<18|o>>>14;t[0]=i>>>0&255,t[1]=i>>>8&255,t[2]=i>>>16&255,t[3]=i>>>24&255,t[4]=l>>>0&255,t[5]=l>>>8&255,t[6]=l>>>16&255,t[7]=l>>>24&255,t[8]=p>>>0&255,t[9]=p>>>8&255,t[10]=p>>>16&255,t[11]=p>>>24&255,t[12]=m>>>0&255,t[13]=m>>>8&255,t[14]=m>>>16&255,t[15]=m>>>24&255,t[16]=f>>>0&255,t[17]=f>>>8&255,t[18]=f>>>16&255,t[19]=f>>>24&255,t[20]=h>>>0&255,t[21]=h>>>8&255,t[22]=h>>>16&255,t[23]=h>>>24&255,t[24]=g>>>0&255,t[25]=g>>>8&255,t[26]=g>>>16&255,t[27]=g>>>24&255,t[28]=d>>>0&255,t[29]=d>>>8&255,t[30]=d>>>16&255,t[31]=d>>>24&255}if(Pu.NONCEBYTES=24,Pu.KEYBYTES=32,Pu.core_hsalsa20=Ru,Pu.SIGMA=Du,Pu.prototype.update=function(t,e){if(!t)throw new Error("input must be Uint8Array or Buffer");return e||(e=new Uint8Array(t.length)),t.length&&this._xor.update(t,e),e},Pu.prototype.final=Pu.prototype.finalize=function(){this._xor.finalize(),this._xor=null},Fu.prototype.realloc=function(t){Mu.memory.grow(Math.ceil(Math.abs(t-this._memory.length)/65536)),this._memory=new Uint8Array(Mu.memory.buffer)},Fu.prototype.update=function(t,e){var r=this._overflow+t.length,n=Ou+this._overflow;(Uu=Ou+r)>=this._memory.length&&this.realloc(Uu),this._memory.set(t,n),Mu.xsalsa20_xor(this._pointer,Ou,Ou,r,this._nonce,this._key),e.set(this._memory.subarray(n,Ou+r)),this._overflow=63&r},Fu.prototype.finalize=function(){this._memory.fill(0,this._pointer,this._key+32),Uu>Ou&&(this._memory.fill(0,Ou,Uu),Uu=0),Lu.push(this._pointer)},$u.prototype.update=function(t,e){for(var r=new Uint8Array(64),n=0,o=this._overflow,i=t.length+this._overflow,s=this._z,a=-this._overflow,c=-this._overflow;i>=64;){for(Nu(r,s,this._s,Du);o<64;o++)e[c+o]=t[a+o]^r[o];for(n=1,o=8;o<16;o++)n+=255&s[o]|0,s[o]=255&n,n>>>=8;i-=64,c+=64,a+=64,o=0}if(i>0)for(Nu(r,s,this._s,Du);o<i;o++)e[c+o]=t[a+o]^r[o];this._overflow=63&i},$u.prototype.finalize=function(){this._s.fill(0),this._z.fill(0)},function(t){const e=Tu;if(1!==new Uint16Array([1])[0])throw new Error("Big endian architecture is not supported.");function r(t,r){this._instance=e(t,r)}t.crypto_stream_KEYBYTES=32,t.crypto_stream_NONCEBYTES=24,t.crypto_stream_PRIMITIVE="xsalsa20",t.crypto_stream_xsalsa20_MESSAGEBYTES_MAX=Number.MAX_SAFE_INTEGER,t.crypto_stream=function(e,r,n){e.fill(0),t.crypto_stream_xor(e,e,r,n)},t.crypto_stream_xor=function(t,r,n,o){const i=e(n,o);i.update(r,t),i.final()},t.crypto_stream_xor_instance=function(t,e){return new r(t,e)},r.prototype.update=function(t,e){this._instance.update(e,t)},r.prototype.final=function(){this._instance.finalize(),this._instance=null}}(Bu),1!==new Uint16Array([1])[0])throw new Error("Big endian architecture is not supported.");var Yu=function(t){var e,r,n,o,i,s,a,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,e=255&t[0]|(255&t[1])<<8,this.r[0]=8191&e,r=255&t[2]|(255&t[3])<<8,this.r[1]=8191&(e>>>13|r<<3),n=255&t[4]|(255&t[5])<<8,this.r[2]=7939&(r>>>10|n<<6),o=255&t[6]|(255&t[7])<<8,this.r[3]=8191&(n>>>7|o<<9),i=255&t[8]|(255&t[9])<<8,this.r[4]=255&(o>>>4|i<<12),this.r[5]=i>>>1&8190,s=255&t[10]|(255&t[11])<<8,this.r[6]=8191&(i>>>14|s<<2),a=255&t[12]|(255&t[13])<<8,this.r[7]=8065&(s>>>11|a<<5),c=255&t[14]|(255&t[15])<<8,this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127,this.pad[0]=255&t[16]|(255&t[17])<<8,this.pad[1]=255&t[18]|(255&t[19])<<8,this.pad[2]=255&t[20]|(255&t[21])<<8,this.pad[3]=255&t[22]|(255&t[23])<<8,this.pad[4]=255&t[24]|(255&t[25])<<8,this.pad[5]=255&t[26]|(255&t[27])<<8,this.pad[6]=255&t[28]|(255&t[29])<<8,this.pad[7]=255&t[30]|(255&t[31])<<8};Yu.prototype.blocks=function(t,e,r){for(var n,o,i,s,a,c,u,l,f,h,g,d,p,A,y,I,b,m,w,E=this.fin?0:2048,C=this.h[0],_=this.h[1],v=this.h[2],B=this.h[3],S=this.h[4],k=this.h[5],x=this.h[6],Q=this.h[7],M=this.h[8],D=this.h[9],O=this.r[0],U=this.r[1],L=this.r[2],T=this.r[3],P=this.r[4],F=this.r[5],$=this.r[6],N=this.r[7],R=this.r[8],Y=this.r[9];r>=16;)h=f=0,h+=(C+=8191&(n=255&t[e+0]|(255&t[e+1])<<8))*O,h+=(_+=8191&(n>>>13|(o=255&t[e+2]|(255&t[e+3])<<8)<<3))*(5*Y),h+=(v+=8191&(o>>>10|(i=255&t[e+4]|(255&t[e+5])<<8)<<6))*(5*R),h+=(B+=8191&(i>>>7|(s=255&t[e+6]|(255&t[e+7])<<8)<<9))*(5*N),f=(h+=(S+=8191&(s>>>4|(a=255&t[e+8]|(255&t[e+9])<<8)<<12))*(5*$))>>>13,h&=8191,h+=(k+=a>>>1&8191)*(5*F),h+=(x+=8191&(a>>>14|(c=255&t[e+10]|(255&t[e+11])<<8)<<2))*(5*P),h+=(Q+=8191&(c>>>11|(u=255&t[e+12]|(255&t[e+13])<<8)<<5))*(5*T),h+=(M+=8191&(u>>>8|(l=255&t[e+14]|(255&t[e+15])<<8)<<8))*(5*L),g=f+=(h+=(D+=l>>>5|E)*(5*U))>>>13,g+=C*U,g+=_*O,g+=v*(5*Y),g+=B*(5*R),f=(g+=S*(5*N))>>>13,g&=8191,g+=k*(5*$),g+=x*(5*F),g+=Q*(5*P),g+=M*(5*T),f+=(g+=D*(5*L))>>>13,g&=8191,d=f,d+=C*L,d+=_*U,d+=v*O,d+=B*(5*Y),f=(d+=S*(5*R))>>>13,d&=8191,d+=k*(5*N),d+=x*(5*$),d+=Q*(5*F),d+=M*(5*P),p=f+=(d+=D*(5*T))>>>13,p+=C*T,p+=_*L,p+=v*U,p+=B*O,f=(p+=S*(5*Y))>>>13,p&=8191,p+=k*(5*R),p+=x*(5*N),p+=Q*(5*$),p+=M*(5*F),A=f+=(p+=D*(5*P))>>>13,A+=C*P,A+=_*T,A+=v*L,A+=B*U,f=(A+=S*O)>>>13,A&=8191,A+=k*(5*Y),A+=x*(5*R),A+=Q*(5*N),A+=M*(5*$),y=f+=(A+=D*(5*F))>>>13,y+=C*F,y+=_*P,y+=v*T,y+=B*L,f=(y+=S*U)>>>13,y&=8191,y+=k*O,y+=x*(5*Y),y+=Q*(5*R),y+=M*(5*N),I=f+=(y+=D*(5*$))>>>13,I+=C*$,I+=_*F,I+=v*P,I+=B*T,f=(I+=S*L)>>>13,I&=8191,I+=k*U,I+=x*O,I+=Q*(5*Y),I+=M*(5*R),b=f+=(I+=D*(5*N))>>>13,b+=C*N,b+=_*$,b+=v*F,b+=B*P,f=(b+=S*T)>>>13,b&=8191,b+=k*L,b+=x*U,b+=Q*O,b+=M*(5*Y),m=f+=(b+=D*(5*R))>>>13,m+=C*R,m+=_*N,m+=v*$,m+=B*F,f=(m+=S*P)>>>13,m&=8191,m+=k*T,m+=x*L,m+=Q*U,m+=M*O,w=f+=(m+=D*(5*Y))>>>13,w+=C*Y,w+=_*R,w+=v*N,w+=B*$,f=(w+=S*F)>>>13,w&=8191,w+=k*P,w+=x*T,w+=Q*L,w+=M*U,C=h=8191&(f=(f=((f+=(w+=D*O)>>>13)<<2)+f|0)+(h&=8191)|0),_=g+=f>>>=13,v=d&=8191,B=p&=8191,S=A&=8191,k=y&=8191,x=I&=8191,Q=b&=8191,M=m&=8191,D=w&=8191,e+=16,r-=16;this.h[0]=C,this.h[1]=_,this.h[2]=v,this.h[3]=B,this.h[4]=S,this.h[5]=k,this.h[6]=x,this.h[7]=Q,this.h[8]=M,this.h[9]=D},Yu.prototype.finish=function(t,e){var r,n,o,i,s=new Uint16Array(10);if(this.leftover){for(i=this.leftover,this.buffer[i++]=1;i<16;i++)this.buffer[i]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,i=2;i<10;i++)this.h[i]+=r,r=this.h[i]>>>13,this.h[i]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,s[0]=this.h[0]+5,r=s[0]>>>13,s[0]&=8191,i=1;i<10;i++)s[i]=this.h[i]+r,r=s[i]>>>13,s[i]&=8191;for(s[9]-=8192,n=(1^r)-1,i=0;i<10;i++)s[i]&=n;for(n=~n,i=0;i<10;i++)this.h[i]=this.h[i]&n|s[i];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),o=this.h[0]+this.pad[0],this.h[0]=65535&o,i=1;i<8;i++)o=(this.h[i]+this.pad[i]|0)+(o>>>16)|0,this.h[i]=65535&o;t[e+0]=this.h[0]>>>0&255,t[e+1]=this.h[0]>>>8&255,t[e+2]=this.h[1]>>>0&255,t[e+3]=this.h[1]>>>8&255,t[e+4]=this.h[2]>>>0&255,t[e+5]=this.h[2]>>>8&255,t[e+6]=this.h[3]>>>0&255,t[e+7]=this.h[3]>>>8&255,t[e+8]=this.h[4]>>>0&255,t[e+9]=this.h[4]>>>8&255,t[e+10]=this.h[5]>>>0&255,t[e+11]=this.h[5]>>>8&255,t[e+12]=this.h[6]>>>0&255,t[e+13]=this.h[6]>>>8&255,t[e+14]=this.h[7]>>>0&255,t[e+15]=this.h[7]>>>8&255},Yu.prototype.update=function(t,e,r){var n,o;if(this.leftover){for((o=16-this.leftover)>r&&(o=r),n=0;n<o;n++)this.buffer[this.leftover+n]=t[e+n];if(r-=o,e+=o,this.leftover+=o,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(o=r-r%16,this.blocks(t,e,o),e+=o,r-=o),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=t[e+n];this.leftover+=r}};var ju=Yu;const Ku=Gs,Hu=ju,{crypto_verify_16:Gu}=Ws.exports;var qu={crypto_onetimeauth:Vu,crypto_onetimeauth_verify:function(t,e,r){Ku(16===t.byteLength,"mac must be 'crypto_onetimeauth_BYTES' bytes"),Ku(null!=e.byteLength,"msg must be buffer"),Ku(32===r.byteLength,"key must be 'crypto_onetimeauth_KEYBYTES' bytes");var n=new Uint8Array(16);return Vu(n,e,r),Gu(t,0,n,0)},crypto_onetimeauth_BYTES:16,crypto_onetimeauth_KEYBYTES:32,crypto_onetimeauth_PRIMITIVE:"poly1305"};function Vu(t,e,r){Ku(16===t.byteLength,"mac must be 'crypto_onetimeauth_BYTES' bytes"),Ku(null!=e.byteLength,"msg must be buffer"),Ku(32===r.byteLength,"key must be 'crypto_onetimeauth_KEYBYTES' bytes");var n=new Hu(r);n.update(e,0,e.byteLength),n.finish(t,0)}const zu=Gs,{crypto_stream:Wu,crypto_stream_xor:Ju}=Bu,{crypto_onetimeauth:Xu,crypto_onetimeauth_verify:Zu,crypto_onetimeauth_BYTES:tl,crypto_onetimeauth_KEYBYTES:el}=qu,rl=32,nl=24,ol=32,il=16;var sl={crypto_secretbox:al,crypto_secretbox_open:cl,crypto_secretbox_detached:function(t,e,r,n,o){zu(t.byteLength===r.byteLength,"o must be 'msg.byteLength' bytes"),zu(16===e.byteLength,"mac must be 'crypto_secretbox_MACBYTES' bytes"),zu(n.byteLength===nl,"n must be 'crypto_secretbox_NONCEBYTES' bytes"),zu(o.byteLength===rl,"k must be 'crypto_secretbox_KEYBYTES' bytes");const i=new Uint8Array(r.byteLength+e.byteLength);return ul(i,r,n,o),e.set(i.subarray(0,e.byteLength)),t.set(i.subarray(e.byteLength)),!0},crypto_secretbox_open_detached:function(t,e,r,n,o){zu(e.byteLength===t.byteLength,"o must be 'msg.byteLength' bytes"),zu(16===r.byteLength,"mac must be 'crypto_secretbox_MACBYTES' bytes"),zu(n.byteLength===nl,"n must be 'crypto_secretbox_NONCEBYTES' bytes"),zu(o.byteLength===rl,"k must be 'crypto_secretbox_KEYBYTES' bytes");const i=new Uint8Array(e.byteLength+r.byteLength);return i.set(r),i.set(e,r.byteLength),ll(t,i,n,o)},crypto_secretbox_easy:ul,crypto_secretbox_open_easy:ll,crypto_secretbox_KEYBYTES:rl,crypto_secretbox_NONCEBYTES:nl,crypto_secretbox_ZEROBYTES:ol,crypto_secretbox_BOXZEROBYTES:il,crypto_secretbox_MACBYTES:16};function al(t,e,r,n){zu(t.byteLength===e.byteLength,"c must be 'm.byteLength' bytes");const o=e.byteLength;zu(o>=ol,"mlen must be at least 'crypto_secretbox_ZEROBYTES'"),zu(r.byteLength===nl,"n must be 'crypto_secretbox_NONCEBYTES' bytes"),zu(n.byteLength===rl,"k must be 'crypto_secretbox_KEYBYTES' bytes"),Ju(t,e,r,n),Xu(t.subarray(il,il+tl),t.subarray(il+tl,t.byteLength),t.subarray(0,el)),t.fill(0,0,il)}function cl(t,e,r,n){zu(e.byteLength===t.byteLength,"c must be 'm.byteLength' bytes");const o=t.byteLength;zu(o>=ol,"mlen must be at least 'crypto_secretbox_ZEROBYTES'"),zu(r.byteLength===nl,"n must be 'crypto_secretbox_NONCEBYTES' bytes"),zu(n.byteLength===rl,"k must be 'crypto_secretbox_KEYBYTES' bytes");const i=new Uint8Array(el);Wu(i,r,n);return!1!==Zu(e.subarray(il,il+tl),e.subarray(il+tl,e.byteLength),i)&&(Ju(t,e,r,n),t.fill(0,0,32),!0)}function ul(t,e,r,n){zu(t.byteLength===e.byteLength+16,"o must be 'msg.byteLength + crypto_secretbox_MACBYTES' bytes"),zu(r.byteLength===nl,"n must be 'crypto_secretbox_NONCEBYTES' bytes"),zu(n.byteLength===rl,"k must be 'crypto_secretbox_KEYBYTES' bytes");const o=new Uint8Array(ol+e.byteLength),i=new Uint8Array(o.byteLength);o.set(e,ol),al(i,o,r,n),t.set(i.subarray(il))}function ll(t,e,r,n){zu(e.byteLength===t.byteLength+16,"box must be 'msg.byteLength + crypto_secretbox_MACBYTES' bytes"),zu(r.byteLength===nl,"n must be 'crypto_secretbox_NONCEBYTES' bytes"),zu(n.byteLength===rl,"k must be 'crypto_secretbox_KEYBYTES' bytes");const o=new Uint8Array(il+e.byteLength),i=new Uint8Array(o.byteLength);return o.set(e,il),!1!==cl(i,o,r,n)&&(t.set(i.subarray(ol)),!0)}const{crypto_hash_sha512:fl}=ac,{crypto_scalarmult:hl,crypto_scalarmult_base:gl}=Uc,{randombytes:dl}=Hs.exports,{crypto_generichash_batch:pl}=Pc.exports,{crypto_stream_xsalsa20_MESSAGEBYTES_MAX:Al}=Bu,{crypto_secretbox_open_easy:yl,crypto_secretbox_easy:Il,crypto_secretbox_detached:bl,crypto_secretbox_open_detached:ml}=sl,wl=Tu,El=Gs,Cl=32,_l=32,vl=16,Bl=Al-16;var Sl={crypto_box_easy:function(t,e,r,n,o){return El(t.length>=e.length+vl,"c should be at least 'm.length + crypto_box_MACBYTES' bytes"),El(e.length<=Bl,"m should be at most 'crypto_box_MESSAGEBYTES_MAX' bytes"),Ql(t.subarray(vl,e.length+vl),t.subarray(0,vl),e,r,n,o)},crypto_box_open_easy:function(t,e,r,n,o){return El(e.length>=t.length+vl,"c should be at least 'm.length + crypto_box_MACBYTES' bytes"),Ml(t,e.subarray(vl,t.length+vl),e.subarray(0,vl),r,n,o)},crypto_box_keypair:kl,crypto_box_seed_keypair:function(t,e,r){El(t.byteLength===Cl,"pk should be 'crypto_box_PUBLICKEYBYTES' bytes"),El(e.byteLength===_l,"sk should be 'crypto_box_SECRETKEYBYTES' bytes"),El(32===e.byteLength,"sk should be 'crypto_box_SEEDBYTES' bytes");const n=new Uint8Array(64);return fl(n,r,32),e.set(n.subarray(0,32)),n.fill(0),gl(t,e)},crypto_box_seal:function(t,e,r){Dl(t,48+e.length),Dl(r,Cl);var n=t.subarray(0,Cl),o=new Uint8Array(_l);kl(n,o);var i=new Uint8Array(24);pl(i,[n,r]);var s=new Uint8Array(Cl);hl(s,o,r);var a=new Uint8Array(32),c=new Uint8Array(16);wl.core_hsalsa20(a,c,s,wl.SIGMA),Il(t.subarray(n.length),e,i,a),Ol(o)},crypto_box_seal_open:function(t,e,r,n){Dl(e,48),Dl(t,e.length-48),Dl(r,Cl),Dl(n,_l);var o=e.subarray(0,Cl),i=new Uint8Array(24);pl(i,[o,r]);var s=new Uint8Array(Cl);hl(s,n,o);var a=new Uint8Array(32),c=new Uint8Array(16);return wl.core_hsalsa20(a,c,s,wl.SIGMA),yl(t,e.subarray(o.length),i,a)},crypto_box_PUBLICKEYBYTES:Cl,crypto_box_SECRETKEYBYTES:_l,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_box_SEALBYTES:48,crypto_box_SEEDBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_MACBYTES:vl};function kl(t,e){return Dl(t,Cl),Dl(e,_l),dl(e,32),gl(t,e)}function xl(t,e,r){const n=new Uint8Array(16),o=new Uint8Array(32);return El(0===hl(o,r,e)),wl.core_hsalsa20(t,n,o,wl.SIGMA),!0}function Ql(t,e,r,n,o,i){Dl(e,vl),Dl(n,24),Dl(o,Cl),Dl(i,_l);const s=new Uint8Array(32);El(xl(s,o,i));const a=function(t,e,r,n,o){return bl(t,e,r,n,o)}(t,e,r,n,s);return Ol(s),a}function Ml(t,e,r,n,o,i){const s=new Uint8Array(32);El(xl(s,o,i));const a=function(t,e,r,n,o){return ml(t,e,r,n,o)}(t,e,r,n,s);return Ol(s),a}function Dl(t,e){if(!t||e&&t.length<e)throw new Error("Argument must be a buffer"+(e?" of length "+e:""))}function Ol(t){for(let e=0;e<t.length;e++)t[e]=0}var Ul={exports:{}},Ll={exports:{}};const Tl=Gs,Pl=_a;Ll.exports=Yl;const Fl=Ll.exports.SHA256_BYTES=32,$l=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Nl(t,e,r,n){return((t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)+e+(((r>>>7|r<<25)^(r>>>18|r<<14)^r>>>3)+n)<<0}function Rl(t,e){var r,n,o,[i,s,a,c,u,l,f,h]=t;const g=new Uint32Array(64);for(let t=0;t<16;t++)g[t]=Kl(e[t]);for(let t=16;t<64;t++)g[t]=Nl(g[t-2],g[t-7],g[t-15],g[t-16]);for(let t=0;t<64;t+=4)d(t);function d(t){r=i&s^i&a^s&a,n=(i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10),o=h+(u&l^~u&f)+((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+g[t]+$l[t],h=c+o,r=(c=o+(n+r))&i^c&s^i&s,n=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),o=f+(h&u^~h&l)+((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+g[t+1]+$l[t+1],f=a+o,r=(a=o+(n+r))&c^a&i^c&i,n=(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10),o=l+(f&h^~f&u)+((f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+g[t+2]+$l[t+2],l=s+o,r=(s=o+(n+r))&a^s&c^a&c,n=(s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10),o=u+(l&f^~l&h)+((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+g[t+3]+$l[t+3],u=i+o,i=o+(n+r)}t[0]=t[0]+i,t[1]=t[1]+s,t[2]=t[2]+a,t[3]=t[3]+c,t[4]=t[4]+u,t[5]=t[5]+l,t[6]=t[6]+f,t[7]=t[7]+h}function Yl(){return this instanceof Yl?(this.buffer=new ArrayBuffer(64),this.bytesRead=0,this.pos=0,this.digestLength=Fl,this.finalised=!1,this.load=new Uint8Array(this.buffer),this.words=new Uint32Array(this.buffer),this.state=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),this):new Yl}function jl(t){if(!(this instanceof jl))return new jl(t);this.pad=Pl.alloc(64),this.inner=Yl(),this.outer=Yl();const e=Pl.alloc(32);t.byteLength>64&&(Yl().update(t).digest(e),t=e),this.pad.fill(54);for(let e=0;e<t.byteLength;e++)this.pad[e]^=t[e];this.inner.update(this.pad),this.pad.fill(92);for(let e=0;e<t.byteLength;e++)this.pad[e]^=t[e];this.outer.update(this.pad),this.pad.fill(0),e.fill(0)}function Kl(t){return(16711935&t)>>>8|(16711935&t)<<24|((4278255360&t)<<8|(4278255360&t)>>>24)}Yl.prototype.update=function(t,e){Tl(!1===this.finalised,"Hash instance finalised");var[r,n]=function(t,e){var r=Pl.from(t,e);return[r,r.byteLength]}(t,e),o=0;for(this.bytesRead+=n;n>0&&(this.load.set(r.subarray(o,o+64-this.pos),this.pos),o+=64-this.pos,!((n-=64-this.pos)<0));)this.pos=0,Rl(this.state,this.words);return this.pos=63&this.bytesRead,this.load.fill(0,this.pos),this},Yl.prototype.digest=function(t,e=0){Tl(!1===this.finalised,"Hash instance finalised"),this.finalised=!0,this.load.fill(0,this.pos),this.load[this.pos]=128,this.pos>55&&(Rl(this.state,this.words),this.words.fill(0),this.pos=0);const r=new DataView(this.buffer);r.setUint32(56,this.bytesRead/2**29),r.setUint32(60,this.bytesRead<<3),Rl(this.state,this.words);const n=new Uint8Array(this.state.map(Kl).buffer);if(!t)return new Uint8Array(n);if("string"==typeof t)return Pl.toString(n,t);Tl(t instanceof Uint8Array,"input must be Uint8Array or Buffer"),Tl(t.byteLength>=this.digestLength+e,"input not large enough for digest");for(let r=0;r<this.digestLength;r++)t[r+e]=n[r];return t},jl.prototype.update=function(t,e){return this.inner.update(t,e),this},jl.prototype.digest=function(t,e=0){return this.outer.update(this.inner.digest()),this.outer.digest(t,e)},Yl.HMAC=jl;var Hl={exports:{}},Gl=(()=>{for(var t=new Uint8Array(128),e=0;e<64;e++)t[e<26?e+65:e<52?e+71:e<62?e-4:4*e-205]=e;return e=>{for(var r=e.length,n=new Uint8Array(3*(r-("="==e[r-1])-("="==e[r-2]))/4|0),o=0,i=0;o<r;){var s=t[e.charCodeAt(o++)],a=t[e.charCodeAt(o++)],c=t[e.charCodeAt(o++)],u=t[e.charCodeAt(o++)];n[i++]=s<<2|a>>4,n[i++]=a<<4|c>>2,n[i++]=c<<6|u}return n}})(),ql=((t,e)=>function(){return e||(0,t[Object.keys(t)[0]])((e={exports:{}}).exports,e),e.exports})({"wasm-binary:./sha256.wat"(t,e){e.exports=Gl("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")}}),Vl=ql(),zl=new WebAssembly.Module(Vl);const Wl=Gs,Jl=_a,Xl="undefined"!=typeof WebAssembly&&(t=>new WebAssembly.Instance(zl,t).exports)({imports:{debug:{log(...t){console.log(...t.map((t=>(t>>>0).toString(16).padStart(8,"0"))))},log_tee:t=>(console.log((t>>>0).toString(16).padStart(8,"0")),t)}}});let Zl=0;const tf=[];Hl.exports=rf;const ef=Hl.exports.SHA256_BYTES=32;function rf(){if(!(this instanceof rf))return new rf;if(!Xl)throw new Error("WASM not loaded. Wait for Sha256.ready(cb)");tf.length||(tf.push(Zl),Zl+=108),this.finalized=!1,this.digestLength=ef,this.pointer=tf.pop(),this.pos=0,this._memory=new Uint8Array(Xl.memory.buffer),this._memory.fill(0,this.pointer,this.pointer+108),this.pointer+this.digestLength>this._memory.length&&this._realloc(this.pointer+108)}function nf(t){if(!(this instanceof nf))return new nf(t);this.pad=Jl.alloc(64),this.inner=rf(),this.outer=rf();const e=Jl.alloc(32);t.byteLength>64&&(rf().update(t).digest(e),t=e),this.pad.fill(54);for(let e=0;e<t.byteLength;e++)this.pad[e]^=t[e];this.inner.update(this.pad),this.pad.fill(92);for(let e=0;e<t.byteLength;e++)this.pad[e]^=t[e];this.outer.update(this.pad),this.pad.fill(0),e.fill(0)}function of(){}rf.prototype._realloc=function(t){Xl.memory.grow(Math.max(0,Math.ceil(Math.abs(t-this._memory.length)/65536))),this._memory=new Uint8Array(Xl.memory.buffer)},rf.prototype.update=function(t,e){Wl(!1===this.finalized,"Hash instance finalized"),Zl%4!=0&&(Zl+=4-Zl%4),Wl(Zl%4==0,"input shoud be aligned for int32");const[r,n]=function(t,e){var r=Jl.from(t,e);return[r,r.byteLength]}(t,e);var o;return Wl(r instanceof Uint8Array,"input must be Uint8Array or Buffer"),Zl+n>this._memory.length&&this._realloc(Zl+t.length),this._memory.fill(0,Zl,Zl+(n+(o=64)-1&-o)-64),this._memory.set(r.subarray(0,64-this.pos),this.pointer+40+this.pos),this._memory.set(r.subarray(64-this.pos),Zl),this.pos=this.pos+n&63,Xl.sha256(this.pointer,Zl,n,0),this},rf.prototype.digest=function(t,e=0){Wl(!1===this.finalized,"Hash instance finalized"),this.finalized=!0,tf.push(this.pointer);const r=this.pointer+40+this.pos;this._memory.fill(0,r,this.pointer+40+64),Xl.sha256(this.pointer,Zl,0,1);const n=this._memory.subarray(this.pointer,this.pointer+this.digestLength);if(!t)return n;if("string"==typeof t)return Jl.toString(n,t);Wl(t instanceof Uint8Array,"output must be Uint8Array or Buffer"),Wl(t.byteLength>=this.digestLength+e,"output must have at least 'SHA256_BYTES' bytes remaining");for(let r=0;r<this.digestLength;r++)t[r+e]=n[r];return t},rf.WASM=Xl,rf.WASM_SUPPORTED="undefined"!=typeof WebAssembly,rf.ready=function(t){return t||(t=of),Xl?(t(),Promise.resolve()):t(new Error("WebAssembly not supported"))},rf.prototype.ready=rf.ready,nf.prototype.update=function(t,e){return this.inner.update(t,e),this},nf.prototype.digest=function(t,e=0){return this.outer.update(this.inner.digest()),this.outer.digest(t,e)},rf.HMAC=nf;const sf=Ll.exports,af=Hl.exports;var cf=sf;Ul.exports=function(){return new cf},Ul.exports.ready=function(t){af.ready((function(){t()}))},Ul.exports.WASM_SUPPORTED=af.WASM_SUPPORTED,Ul.exports.WASM_LOADED=!1,Ul.exports.SHA256_BYTES=32,af.ready((function(t){t||(Ul.exports.WASM_LOADED=!0,Ul.exports=cf=af)}));const uf=Ul.exports,lf=Gs;if(1!==new Uint16Array([1])[0])throw new Error("Big endian architecture is not supported.");var ff={crypto_hash_sha256:function(t,e,r){return lf(32===t.byteLength,"out must be 'crypto_hash_sha256_BYTES' bytes long"),uf().update(e.subarray(0,r)).digest(t),0},crypto_hash_sha256_BYTES:32},hf={exports:{}};!function(t){const e=Gs,r=Hs.exports.randombytes_buf,n=Fc.exports;t.exports.crypto_kdf_PRIMITIVE="blake2b",t.exports.crypto_kdf_BYTES_MIN=16,t.exports.crypto_kdf_BYTES_MAX=64,t.exports.crypto_kdf_CONTEXTBYTES=8,t.exports.crypto_kdf_KEYBYTES=32,t.exports.crypto_kdf_derive_from_key=function(r,o,i,s){e(r.length>=t.exports.crypto_kdf_BYTES_MIN,"subkey must be at least crypto_kdf_BYTES_MIN"),e(o>=0&&o<=9007199254740991,"subkey_id must be safe integer"),e(i.length>=t.exports.crypto_kdf_CONTEXTBYTES,"context must be at least crypto_kdf_CONTEXTBYTES");var a=new Uint8Array(n.PERSONALBYTES),c=new Uint8Array(n.SALTBYTES);a.set(i,0,t.exports.crypto_kdf_CONTEXTBYTES),function(t,e){var r=1,n=0;for(t[0]=255&e;++n<8&&(r*=256);)t[n]=e/r&255}(c,o);var u=Math.min(r.length,t.exports.crypto_kdf_BYTES_MAX);n(u,s.subarray(0,t.exports.crypto_kdf_KEYBYTES),c,a,!0).final(r)},t.exports.crypto_kdf_keygen=function(n){e(n.length>=t.exports.crypto_kdf_KEYBYTES,"out.length must be crypto_kdf_KEYBYTES"),r(n.subarray(0,t.exports.crypto_kdf_KEYBYTES))}}(hf);const{crypto_scalarmult_base:gf}=Uc,{crypto_generichash:df}=Pc.exports,{randombytes_buf:pf}=Hs.exports,Af=Gs;var yf={crypto_kx_keypair:function(t,e){return Af(32===t.byteLength,"pk must be 'crypto_kx_PUBLICKEYBYTES' bytes"),Af(32===e.byteLength,"sk must be 'crypto_kx_SECRETKEYBYTES' bytes"),pf(e,32),gf(t,e)},crypto_kx_seed_keypair:function(t,e,r){return Af(32===t.byteLength,"pk must be 'crypto_kx_PUBLICKEYBYTES' bytes"),Af(32===e.byteLength,"sk must be 'crypto_kx_SECRETKEYBYTES' bytes"),Af(32===r.byteLength,"seed must be 'crypto_kx_SEEDBYTES' bytes"),df(e,r),gf(t,e)},crypto_kx_SEEDBYTES:32,crypto_kx_SECRETKEYBYTES:32,crypto_kx_PUBLICKEYBYTES:32},If={};const bf=Gs;var mf=Ef;const wf=[1634760805,857760878,2036477234,1797285236];function Ef(t,e,r){bf(32===e.byteLength),bf(8===t.byteLength||12===t.byteLength);const n=new Uint32Array(t.buffer,t.byteOffset,t.byteLength/4),o=new Uint32Array(e.buffer,e.byteOffset,e.byteLength/4);r||(r=0),bf(r<Number.MAX_SAFE_INTEGER),this.finalized=!1,this.pos=0,this.state=new Uint32Array(16);for(let t=0;t<4;t++)this.state[t]=wf[t];for(let t=0;t<8;t++)this.state[4+t]=o[t];return this.state[12]=4294967295&r,8===n.byteLength?(this.state[13]=(r&&0xffffffff00000000)>>32,this.state[14]=n[0],this.state[15]=n[1]):(this.state[13]=n[0],this.state[14]=n[1],this.state[15]=n[2]),this}function Cf(t){const e=new Uint32Array(16);for(let r=16;r--;)e[r]=t[r];for(let t=0;t<20;t+=2)vf(e,0,4,8,12),vf(e,1,5,9,13),vf(e,2,6,10,14),vf(e,3,7,11,15),vf(e,0,5,10,15),vf(e,1,6,11,12),vf(e,2,7,8,13),vf(e,3,4,9,14);for(let r=0;r<16;r++)e[r]+=t[r];return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function _f(t,e){return t<<e|t>>>32-e}function vf(t,e,r,n,o){t[e]+=t[r],t[o]^=t[e],t[o]=_f(t[o],16),t[n]+=t[o],t[r]^=t[n],t[r]=_f(t[r],12),t[e]+=t[r],t[o]^=t[e],t[o]=_f(t[o],8),t[n]+=t[o],t[r]^=t[n],t[r]=_f(t[r],7)}Ef.prototype.update=function(t,e){bf(!this.finalized,"cipher finalized."),bf(t.byteLength>=e.byteLength,"output cannot be shorter than input.");let r=e.length,n=this.pos%64;this.pos+=r;let o=0,i=Cf(this.state);for(;n>0&&r>0;)t[o]=e[o++]^i[n],n=n+1&63,n||this.state[12]++,r--;for(;r>0;){if(i=Cf(this.state),r<64){for(let s=0;s<r;s++)t[o]=e[o++]^i[n++],n&=63;return}for(;n<64;)t[o]=e[o++]^i[n++];this.state[12]++,n=0,r-=64}},Ef.prototype.final=function(){this.state.fill(0),this.pos=0,this.finalized=!0},function(t){const e=Gs,r=mf;if(1!==new Uint16Array([1])[0])throw new Error("Big endian architecture is not supported.");t.crypto_stream_chacha20_KEYBYTES=32,t.crypto_stream_chacha20_NONCEBYTES=8,t.crypto_stream_chacha20_MESSAGEBYTES_MAX=Number.MAX_SAFE_INTEGER,t.crypto_stream_chacha20_ietf_KEYBYTES=32,t.crypto_stream_chacha20_ietf_NONCEBYTES=12,t.crypto_stream_chacha20_ietf_MESSAGEBYTES_MAX=2**32,t.crypto_stream_chacha20=function(e,r,n){e.fill(0),t.crypto_stream_chacha20_xor(e,e,r,n)},t.crypto_stream_chacha20_xor=function(n,o,i,s){e(i.byteLength===t.crypto_stream_chacha20_NONCEBYTES,"n should be crypto_stream_chacha20_NONCEBYTES"),e(s.byteLength===t.crypto_stream_chacha20_KEYBYTES,"k should be crypto_stream_chacha20_KEYBYTES");const a=new r(i,s);a.update(n,o),a.final()},t.crypto_stream_chacha20_xor_ic=function(n,o,i,s,a){e(i.byteLength===t.crypto_stream_chacha20_NONCEBYTES,"n should be crypto_stream_chacha20_NONCEBYTES"),e(a.byteLength===t.crypto_stream_chacha20_KEYBYTES,"k should be crypto_stream_chacha20_KEYBYTES");const c=new r(i,a,s);c.update(n,o),c.final()},t.crypto_stream_chacha20_xor_instance=function(n,o){return e(n.byteLength===t.crypto_stream_chacha20_NONCEBYTES,"n should be crypto_stream_chacha20_NONCEBYTES"),e(o.byteLength===t.crypto_stream_chacha20_KEYBYTES,"k should be crypto_stream_chacha20_KEYBYTES"),new r(n,o)},t.crypto_stream_chacha20_ietf=function(e,r,n){e.fill(0),t.crypto_stream_chacha20_ietf_xor(e,e,r,n)},t.crypto_stream_chacha20_ietf_xor=function(n,o,i,s){e(i.byteLength===t.crypto_stream_chacha20_ietf_NONCEBYTES,"n should be crypto_stream_chacha20_ietf_NONCEBYTES"),e(s.byteLength===t.crypto_stream_chacha20_ietf_KEYBYTES,"k should be crypto_stream_chacha20_ietf_KEYBYTES");const a=new r(i,s);a.update(n,o),a.final()},t.crypto_stream_chacha20_ietf_xor_ic=function(n,o,i,s,a){e(i.byteLength===t.crypto_stream_chacha20_ietf_NONCEBYTES,"n should be crypto_stream_chacha20_ietf_NONCEBYTES"),e(a.byteLength===t.crypto_stream_chacha20_ietf_KEYBYTES,"k should be crypto_stream_chacha20_ietf_KEYBYTES");const c=new r(i,a,s);c.update(n,o),c.final()},t.crypto_stream_chacha20_ietf_xor_instance=function(n,o){return e(n.byteLength===t.crypto_stream_chacha20_ietf_NONCEBYTES,"n should be crypto_stream_chacha20_ietf_NONCEBYTES"),e(o.byteLength===t.crypto_stream_chacha20_ietf_KEYBYTES,"k should be crypto_stream_chacha20_ietf_KEYBYTES"),new r(n,o)}}(If);const{crypto_stream_chacha20_ietf:Bf,crypto_stream_chacha20_ietf_xor_ic:Sf}=If,{crypto_verify_16:kf}=Ws.exports,xf=ju,Qf=Gs,Mf=16,Df=Number.MAX_SAFE_INTEGER,Of=new Uint8Array(16);function Uf(t,e,r,n,o,i,s){if(null===n)return Uf(t,e,r,new Uint8Array(0),o,i,s);Qf(t.byteLength===r.byteLength,"ciphertext should be same length than message"),Qf(12===i.byteLength,"npub should be 'crypto_aead_chacha20poly1305_ietf_NPUBBYTES' long"),Qf(32===s.byteLength,"k should be 'crypto_aead_chacha20poly1305_ietf_KEYBYTES' long"),Qf(r.byteLength<=Df,"message is too large"),Qf(e.byteLength<=Mf,"mac should be 'crypto_aead_chacha20poly1305_ietf_ABYTES' long");const a=new Uint8Array(64);var c=new Uint8Array(8);Bf(a,i,s);const u=new xf(a);return a.fill(0),u.update(n,0,n.byteLength),u.update(Of,0,16-n.byteLength&15),Sf(t,r,i,1,s),u.update(t,0,r.byteLength),u.update(Of,0,16-r.byteLength&15),Tf(c,0,n.byteLength),u.update(c,0,c.byteLength),Tf(c,0,r.byteLength),u.update(c,0,c.byteLength),u.finish(e,0),c.fill(0),Mf}function Lf(t,e,r,n,o,i,s){if(null===o)return Lf(t,e,r,n,new Uint8Array(0),i,s);Qf(r.byteLength===t.byteLength,"message should be same length than ciphertext"),Qf(12===i.byteLength,"npub should be 'crypto_aead_chacha20poly1305_ietf_NPUBBYTES' long"),Qf(32===s.byteLength,"k should be 'crypto_aead_chacha20poly1305_ietf_KEYBYTES' long"),Qf(t.byteLength<=Df,"message is too large"),Qf(n.byteLength<=Mf,"mac should be 'crypto_aead_chacha20poly1305_ietf_ABYTES' long");const a=new Uint8Array(64),c=new Uint8Array(8),u=new Uint8Array(Mf);Bf(a,i,s);const l=new xf(a);a.fill(0),l.update(o,0,o.byteLength),l.update(Of,0,16-o.byteLength&15);const f=r.byteLength;l.update(r,0,f),l.update(Of,0,16-f&15),Tf(c,0,o.byteLength),l.update(c,0,c.byteLength),Tf(c,0,f),l.update(c,0,c.byteLength),l.finish(u,0),Qf(16===u.byteLength);const h=kf(u,0,n,0);if(u.fill(0),c.fill(0),!h)throw t.fill(0),new Error("could not verify data");Sf(t,r,i,1,s)}function Tf(t,e,r){t.fill(0,0,8);const n=new DataView(t.buffer,t.byteOffset,t.byteLength);n.setUint32(e,4294967295&r,!0),n.setUint32(e+4,r/2**32&4294967295,!0)}var Pf={crypto_aead_chacha20poly1305_ietf_encrypt:function t(e,r,n,o,i,s){if(null===n)return t(e,r,new Uint8Array(0),o,i,s);Qf(e.byteLength===r.byteLength+Mf,"ciphertext should be 'crypto_aead_chacha20poly1305_ietf_ABYTES' longer than message"),Qf(12===i.byteLength,"npub should be 'crypto_aead_chacha20poly1305_ietf_NPUBBYTES' long"),Qf(32===s.byteLength,"k should be 'crypto_aead_chacha20poly1305_ietf_KEYBYTES' long"),Qf(r.byteLength<=Df,"message is too large");const a=Uf(e.subarray(0,r.byteLength),e.subarray(r.byteLength),r,n,o,i,s);return r.byteLength+a},crypto_aead_chacha20poly1305_ietf_encrypt_detached:Uf,crypto_aead_chacha20poly1305_ietf_decrypt:function t(e,r,n,o,i,s){if(null===o)return t(e,r,n,new Uint8Array(0),i,s);if(Qf(e.byteLength===n.byteLength-Mf,"message should be 'crypto_aead_chacha20poly1305_ietf_ABYTES' shorter than ciphertext"),Qf(12===i.byteLength,"npub should be 'crypto_aead_chacha20poly1305_ietf_NPUBBYTES' long"),Qf(32===s.byteLength,"k should be 'crypto_aead_chacha20poly1305_ietf_KEYBYTES' long"),Qf(e.byteLength<=Df,"message is too large"),n.byteLength<Mf)throw new Error("could not verify data");return Lf(e,r,n.subarray(0,n.byteLength-Mf),n.subarray(n.byteLength-Mf),o,i,s),n.byteLength-Mf},crypto_aead_chacha20poly1305_ietf_decrypt_detached:Lf,crypto_aead_chacha20poly1305_ietf_ABYTES:Mf,crypto_aead_chacha20poly1305_ietf_KEYBYTES:32,crypto_aead_chacha20poly1305_ietf_NPUBBYTES:12,crypto_aead_chacha20poly1305_ietf_NSECBYTES:0,crypto_aead_chacha20poly1305_ietf_MESSAGEBYTES_MAX:Df},Ff={},$f=(()=>{for(var t=new Uint8Array(128),e=0;e<64;e++)t[e<26?e+65:e<52?e+71:e<62?e-4:4*e-205]=e;return e=>{for(var r=e.length,n=new Uint8Array(3*(r-("="==e[r-1])-("="==e[r-2]))/4|0),o=0,i=0;o<r;){var s=t[e.charCodeAt(o++)],a=t[e.charCodeAt(o++)],c=t[e.charCodeAt(o++)],u=t[e.charCodeAt(o++)];n[i++]=s<<2|a>>4,n[i++]=a<<4|c>>2,n[i++]=c<<6|u}return n}})(),Nf=((t,e)=>function(){return e||(0,t[Object.keys(t)[0]])((e={exports:{}}).exports,e),e.exports})({"wasm-binary:./siphash24.wat"(t,e){e.exports=$f("AGFzbQEAAAABBgFgAn9/AAMCAQAFBQEBCpBOBxQCBm1lbW9yeQIAB3NpcGhhc2gAAArdCAHaCAIIfgJ/QvXKzYPXrNu38wAhAkLt3pHzlszct+QAIQNC4eSV89bs2bzsACEEQvPK0cunjNmy9AAhBUEIKQMAIQdBECkDACEIIAGtQjiGIQYgAUEHcSELIAAgAWogC2shCiAFIAiFIQUgBCAHhSEEIAMgCIUhAyACIAeFIQICQANAIAAgCkYNASAAKQMAIQkgBSAJhSEFIAIgA3whAiADQg2JIQMgAyAChSEDIAJCIIkhAiAEIAV8IQQgBUIQiSEFIAUgBIUhBSACIAV8IQIgBUIViSEFIAUgAoUhBSAEIAN8IQQgA0IRiSEDIAMgBIUhAyAEQiCJIQQgAiADfCECIANCDYkhAyADIAKFIQMgAkIgiSECIAQgBXwhBCAFQhCJIQUgBSAEhSEFIAIgBXwhAiAFQhWJIQUgBSAChSEFIAQgA3whBCADQhGJIQMgAyAEhSEDIARCIIkhBCACIAmFIQIgAEEIaiEADAALCwJAAkACQAJAAkACQAJAAkAgCw4HBwYFBAMCAQALIAYgADEABkIwhoQhBgsgBiAAMQAFQiiGhCEGCyAGIAAxAARCIIaEIQYLIAYgADEAA0IYhoQhBgsgBiAAMQACQhCGhCEGCyAGIAAxAAFCCIaEIQYLIAYgADEAAIQhBgsgBSAGhSEFIAIgA3whAiADQg2JIQMgAyAChSEDIAJCIIkhAiAEIAV8IQQgBUIQiSEFIAUgBIUhBSACIAV8IQIgBUIViSEFIAUgAoUhBSAEIAN8IQQgA0IRiSEDIAMgBIUhAyAEQiCJIQQgAiADfCECIANCDYkhAyADIAKFIQMgAkIgiSECIAQgBXwhBCAFQhCJIQUgBSAEhSEFIAIgBXwhAiAFQhWJIQUgBSAChSEFIAQgA3whBCADQhGJIQMgAyAEhSEDIARCIIkhBCACIAaFIQIgBEL/AYUhBCACIAN8IQIgA0INiSEDIAMgAoUhAyACQiCJIQIgBCAFfCEEIAVCEIkhBSAFIASFIQUgAiAFfCECIAVCFYkhBSAFIAKFIQUgBCADfCEEIANCEYkhAyADIASFIQMgBEIgiSEEIAIgA3whAiADQg2JIQMgAyAChSEDIAJCIIkhAiAEIAV8IQQgBUIQiSEFIAUgBIUhBSACIAV8IQIgBUIViSEFIAUgAoUhBSAEIAN8IQQgA0IRiSEDIAMgBIUhAyAEQiCJIQQgAiADfCECIANCDYkhAyADIAKFIQMgAkIgiSECIAQgBXwhBCAFQhCJIQUgBSAEhSEFIAIgBXwhAiAFQhWJIQUgBSAChSEFIAQgA3whBCADQhGJIQMgAyAEhSEDIARCIIkhBCACIAN8IQIgA0INiSEDIAMgAoUhAyACQiCJIQIgBCAFfCEEIAVCEIkhBSAFIASFIQUgAiAFfCECIAVCFYkhBSAFIAKFIQUgBCADfCEEIANCEYkhAyADIASFIQMgBEIgiSEEQQAgAiADIAQgBYWFhTcDAAs=")}}),Rf=Nf(),Yf=new WebAssembly.Module(Rf),jf=function(t,e,r){var n,o={h:zf(r,4),l:zf(r,0)},i={h:zf(r,12),l:zf(r,8)},s={h:o.h,l:o.l},a=o,c={h:i.h,l:i.l},u=i,l=0,f=e.length,h=f-7,g=new Uint8Array(new ArrayBuffer(8));Hf(s,{h:1936682341,l:1886610805}),Hf(c,{h:1685025377,l:1852075885}),Hf(a,{h:1819895653,l:1852142177}),Hf(u,{h:1952801890,l:2037671283});for(;l<h;)n={h:zf(e,l+4),l:zf(e,l)},Hf(u,n),Vf(s,c,a,u),Vf(s,c,a,u),Hf(s,n),l+=8;g[7]=f;var d=0;for(;l<f;)g[d++]=e[l++];for(;d<7;)g[d++]=0;n={h:g[7]<<24|g[6]<<16|g[5]<<8|g[4],l:g[3]<<24|g[2]<<16|g[1]<<8|g[0]},Hf(u,n),Vf(s,c,a,u),Vf(s,c,a,u),Hf(s,n),Hf(a,{h:0,l:255}),Vf(s,c,a,u),Vf(s,c,a,u),Vf(s,c,a,u),Vf(s,c,a,u);var p=s;Hf(p,c),Hf(p,a),Hf(p,u),t[0]=255&p.l,t[1]=p.l>>8&255,t[2]=p.l>>16&255,t[3]=p.l>>24&255,t[4]=255&p.h,t[5]=p.h>>8&255,t[6]=p.h>>16&255,t[7]=p.h>>24&255};function Kf(t,e){var r=t.l+e.l,n={h:t.h+e.h+(r/2>>>31)>>>0,l:r>>>0};t.h=n.h,t.l=n.l}function Hf(t,e){t.h^=e.h,t.h>>>=0,t.l^=e.l,t.l>>>=0}function Gf(t,e){var r={h:t.h<<e|t.l>>>32-e,l:t.l<<e|t.h>>>32-e};t.h=r.h,t.l=r.l}function qf(t){var e=t.l;t.l=t.h,t.h=e}function Vf(t,e,r,n){Kf(t,e),Kf(r,n),Gf(e,13),Gf(n,16),Hf(e,t),Hf(n,r),qf(t),Kf(r,e),Kf(t,n),Gf(e,17),Gf(n,21),Hf(e,r),Hf(n,t),qf(r)}function zf(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}var Wf=Gs,Jf="undefined"!=typeof WebAssembly&&(t=>new WebAssembly.Instance(Yf,t).exports)(),Xf=jf,Zf=nh,th=nh.BYTES=8,eh=nh.KEYBYTES=16;nh.WASM_SUPPORTED=!!Jf,nh.WASM_LOADED=!!Jf;var rh=new Uint8Array(Jf.memory.buffer);function nh(t,e,r,n){var o;return r||(r=new Uint8Array(8)),!0!==n&&(Wf(r.length>=th,"output must be at least "+th),Wf(e.length>=eh,"key must be at least "+eh)),Jf?(t.length+24>rh.length&&(o=t.length+24,Jf.memory.grow(Math.max(0,Math.ceil(Math.abs(o-rh.length)/65536))),rh=new Uint8Array(Jf.memory.buffer)),rh.set(e,8),rh.set(t,24),Jf.siphash(24,t.length),r.set(rh.subarray(0,8))):Xf(r,t,e),r}var oh=Zf;if(1!==new Uint16Array([1])[0])throw new Error("Big endian architecture is not supported.");Ff.crypto_shorthash_PRIMITIVE="siphash24",Ff.crypto_shorthash_BYTES=oh.BYTES,Ff.crypto_shorthash_KEYBYTES=oh.KEYBYTES,Ff.crypto_shorthash_WASM_SUPPORTED=oh.WASM_SUPPORTED,Ff.crypto_shorthash_WASM_LOADED=oh.WASM_LOADED,Ff.crypto_shorthash=function(t,e,r,n){oh(e,r,t,n)};const{crypto_verify_32:ih}=Ws.exports,{crypto_hash:sh}=ac,{gf:ah,gf0:ch,gf1:uh,D:lh,D2:fh,X:hh,Y:gh,I:dh,A:ph,Z:Ah,M:yh,S:Ih,sel25519:bh,pack25519:mh,inv25519:wh,unpack25519:Eh}=Ec,{randombytes:Ch}=Hs.exports,{crypto_scalarmult_BYTES:_h}=Uc,{crypto_hash_sha512_BYTES:vh}=ac,Bh=Gs,Sh=64;var kh={crypto_sign_keypair:Lh,crypto_sign_seed_keypair:function(t,e,r){return Kh(r,32),e.set(r),Lh(t,e,!0)},crypto_sign:$h,crypto_sign_detached:function(t,e,r){var n=new Uint8Array(e.length+Sh);$h(n,e,r);for(let e=0;e<Sh;e++)t[e]=n[e]},crypto_sign_open:Rh,crypto_sign_verify_detached:function(t,e,r){Kh(t,Sh);var n=new Uint8Array(e.length+Sh),o=0;for(o=0;o<Sh;o++)n[o]=t[o];for(o=0;o<e.length;o++)n[o+Sh]=e[o];return Rh(e,n,r)},crypto_sign_BYTES:Sh,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_sign_ed25519_PUBLICKEYBYTES:32,crypto_sign_ed25519_SECRETKEYBYTES:64,crypto_sign_ed25519_SEEDBYTES:32,crypto_sign_ed25519_BYTES:64,crypto_sign_ed25519_pk_to_curve25519:function(t,e){Kh(t,32),Kh(e,32);var r=[ah(),ah(),ah(),ah()],n=ah([1]),o=ah([1]);Bh(function(t){var e,r=[Uint8Array.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Uint8Array.from([1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Uint8Array.from([38,232,149,143,194,178,39,176,69,195,244,137,242,239,152,240,213,223,172,5,211,198,51,57,177,56,2,136,109,83,252,5]),Uint8Array.from([199,23,106,112,61,77,216,79,186,60,11,118,13,16,103,15,42,32,83,250,44,57,204,198,78,199,253,119,146,172,3,122]),Uint8Array.from([236,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,127]),Uint8Array.from([237,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,127]),Uint8Array.from([238,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,127])],n=new Uint8Array(7);Kh(r,7);for(let o=0;o<r.length;o++)for(e=0;e<31;e++)n[o]|=t[e]^r[o][e];for(let o=0;o<r.length;o++)n[o]|=127&t[e]^r[o][e];var o=0;for(let t=0;t<r.length;t++)o|=n[t]-1;return 0==(o>>8&1)}(e)&&Nh(r,e)&&function(t){var e=[ah(),ah(),ah(),ah()];!function(t,e){Oh(t,e,Th)}(e,t);var r=0;for(let t=0;t<16;t++)r|=65535&e[0][t];return 0===r}(r),"Cannot convert key: bad point");for(let e=0;e<r.length;e++)mh(t,r[e]);return Ah(o,o,r[1]),ph(n,n,r[1]),wh(o,o),yh(n,n,o),mh(t,n),0},crypto_sign_ed25519_sk_to_curve25519:function(t,e){Bh(t&&t.byteLength===_h,"curveSk must be 'crypto_sign_SECRETKEYBYTES' long"),Bh(e&&64===e.byteLength,"edSk must be 'crypto_sign_ed25519_SECRETKEYBYTES' long");var r=new Uint8Array(vh);return sh(r,e,32),r[0]&=248,r[31]&=127,r[31]|=64,t.set(r.subarray(0,_h)),r.fill(0),t},crypto_sign_ed25519_sk_to_pk:function(t,e){return Kh(t,32),t.set(e.subarray(32)),t},unpackneg:Nh,pack:Dh};function xh(t,e){for(let r=0;r<16;r++)t[r]=0|e[r]}function Qh(t,e){var r=ah(),n=ah(),o=ah(),i=ah(),s=ah(),a=ah(),c=ah(),u=ah(),l=ah();Ah(r,t[1],t[0]),Ah(l,e[1],e[0]),yh(r,r,l),ph(n,t[0],t[1]),ph(l,e[0],e[1]),yh(n,n,l),yh(o,t[3],e[3]),yh(o,o,fh),yh(i,t[2],e[2]),ph(i,i,i),Ah(s,n,r),Ah(a,i,o),ph(c,i,o),ph(u,n,r),yh(t[0],s,a),yh(t[1],u,c),yh(t[2],c,a),yh(t[3],s,u)}function Mh(t,e,r){var n;for(n=0;n<4;n++)bh(t[n],e[n],r)}function Dh(t,e){var r=ah(),n=ah(),o=ah();wh(o,e[2]),yh(r,e[0],o),yh(n,e[1],o),mh(t,n),t[31]^=Yh(r)<<7}function Oh(t,e,r){var n,o,i=[ah(e[0]),ah(e[1]),ah(e[2]),ah(e[3])];for(xh(t[0],ch),xh(t[1],uh),xh(t[2],uh),xh(t[3],ch),o=255;o>=0;--o)Mh(t,i,n=r[o/8|0]>>(7&o)&1),Qh(i,t),Qh(t,t),Mh(t,i,n)}function Uh(t,e){var r=[ah(),ah(),ah(),ah()];xh(r[0],hh),xh(r[1],gh),xh(r[2],uh),yh(r[3],hh,gh),Oh(t,r,e)}function Lh(t,e,r){Kh(t,32),Kh(e,64);var n,o=new Uint8Array(64),i=[ah(),ah(),ah(),ah()];for(r||Ch(e,32),sh(o,e,32),o[0]&=248,o[31]&=127,o[31]|=64,Uh(i,o),Dh(t,i),n=0;n<32;n++)e[n+32]=t[n]}var Th=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Ph(t,e){var r,n,o,i;for(n=63;n>=32;--n){for(r=0,o=n-32,i=n-12;o<i;++o)e[o]+=r-16*e[n]*Th[o-(n-32)],r=e[o]+128>>8,e[o]-=256*r;e[o]+=r,e[n]=0}for(r=0,o=0;o<32;o++)e[o]+=r-(e[31]>>4)*Th[o],r=e[o]>>8,e[o]&=255;for(o=0;o<32;o++)e[o]-=r*Th[o];for(n=0;n<32;n++)e[n+1]+=e[n]>>8,t[n]=255&e[n]}function Fh(t){var e=new Float64Array(64);for(let r=0;r<64;r++)e[r]=t[r];for(let e=0;e<64;e++)t[e]=0;Ph(t,e)}function $h(t,e,r){Kh(t,Sh+e.length),Kh(e,0),Kh(r,64);var n,o,i=e.length,s=new Uint8Array(64),a=new Uint8Array(64),c=new Uint8Array(64),u=new Float64Array(64),l=[ah(),ah(),ah(),ah()];sh(s,r,32),s[0]&=248,s[31]&=127,s[31]|=64;var f=i+64;for(n=0;n<i;n++)t[64+n]=e[n];for(n=0;n<32;n++)t[32+n]=s[32+n];for(sh(c,t.subarray(32),i+32),Fh(c),Uh(l,c),Dh(t,l),n=32;n<64;n++)t[n]=r[n];for(sh(a,t,i+64),Fh(a),n=0;n<64;n++)u[n]=0;for(n=0;n<32;n++)u[n]=c[n];for(n=0;n<32;n++)for(o=0;o<32;o++)u[n+o]+=a[n]*s[o];return Ph(t.subarray(32),u),f}function Nh(t,e){var r=ah(),n=ah(),o=ah(),i=ah(),s=ah(),a=ah(),c=ah();return xh(t[2],uh),Eh(t[1],e),Ih(o,t[1]),yh(i,o,lh),Ah(o,o,t[2]),ph(i,t[2],i),Ih(s,i),Ih(a,s),yh(c,a,s),yh(r,c,o),yh(r,r,i),function(t,e){var r,n=ah();for(r=0;r<16;r++)n[r]=e[r];for(r=250;r>=0;r--)Ih(n,n),1!==r&&yh(n,n,e);for(r=0;r<16;r++)t[r]=n[r]}(r,r),yh(r,r,o),yh(r,r,i),yh(r,r,i),yh(t[0],r,i),Ih(n,t[0]),yh(n,n,i),jh(n,o)||yh(t[0],t[0],dh),Ih(n,t[0]),yh(n,n,i),!!jh(n,o)&&(Yh(t[0])===e[31]>>7&&Ah(t[0],ah(),t[0]),yh(t[3],t[0],t[1]),!0)}function Rh(t,e,r){Kh(t,e.length-Sh),Kh(e,Sh),Kh(r,32);var n,o=e.length,i=new Uint8Array(e.length),s=new Uint8Array(32),a=new Uint8Array(64),c=[ah(),ah(),ah(),ah()],u=[ah(),ah(),ah(),ah()];if(o<64)return!1;if(!Nh(u,r))return!1;for(n=0;n<o;n++)i[n]=e[n];for(n=0;n<32;n++)i[n+32]=r[n];if(sh(a,i,o),Fh(a),Oh(c,u,a),Uh(u,e.subarray(32)),Qh(c,u),Dh(s,c),o-=64,!ih(e,0,s,0)){for(n=0;n<o;n++)i[n]=0;return!1}for(n=0;n<o;n++)t[n]=e[n+64];return!0}function Yh(t){var e=new Uint8Array(32);return mh(e,t),1&e[0]}function jh(t,e){var r=new Uint8Array(32),n=new Uint8Array(32);return mh(r,t),mh(n,e),ih(r,0,n,0)}function Kh(t,e,r="Argument"){if(!t||e&&t.length<e)throw new Error(r+" must be a buffer"+(e?" of length "+e:""))}!function(t){function e(e){Object.keys(e).forEach((function(r){t.exports[r]=e[r]}))}e(Hs.exports),e(zs),e(Zs),e(Ws.exports),e(nc),e(Sl),e(Pc.exports),e(ac),e(ff),e(hf.exports),e(yf),e(Pf),e(qu),e(Uc),e(sl),e(Ff),e(kh),e(Bu),e(If)}(Ks);var Hh=Ks.exports,Gh=Symbol.for("nodejs.util.inspect.custom");const{crypto_sign_BYTES:qh,crypto_sign_SECRETKEYBYTES:Vh,crypto_sign_PUBLICKEYBYTES:zh,crypto_sign_detached:Wh,crypto_sign_verify_detached:Jh,crypto_sign_keypair:Xh}=Hh,Zh=Gh,tg=Symbol.for("Pico::block"),eg=Symbol.for("Pico::feed"),rg=o.Buffer.alloc(qh).fill(0);var ng=class t{static get MAX_FEED_SIZE(){return 65536}static get INITIAL_FEED_SIZE(){return 1024}static get PICKLE(){return o.Buffer.from("PIC0.")}static get KEY(){return o.Buffer.from("K0.")}static get BLOCK(){return o.Buffer.from("B0.")}static get KEY_SIZE(){return zh}static get SIGNATURE_SIZE(){return qh}static get COUNTER_SIZE(){return 4}static get META_SIZE(){return 2*t.SIGNATURE_SIZE+t.COUNTER_SIZE}static get BLOCK_SYMBOL(){return tg}static get FEED_SYMBOL(){return eg}static get GENESIS(){return rg}constructor(e={}){this[eg]=!0,this.tail=0,this._hasGenisis=null,this._keychain=[],this._cache=[],this._MAX_FEED_SIZE=e.maxSize||t.MAX_FEED_SIZE,this.buf=o.Buffer.alloc(e.initialSize||t.INITIAL_FEED_SIZE)}get partial(){return!(null===this._hasGenisis&&!this.length)&&!this._hasGenisis}get free(){return this._MAX_FEED_SIZE-this.tail}get _isDirty(){if(!this.tail)return!1;if(!this._cache.length)return!0;const e=this._cache[this._cache.length-1];return t.mapBlock(this.buf,e.offset).end!==this.tail}get length(){return this._reIndex(),this._cache.length}get last(){return this.get(this.length-1)}get first(){return this.get(0)}get keys(){return this._reIndex(),[...this._keychain]}_reIndex(t=!1){if(!t&&!this._isDirty)return;const e=this._index(t);for(;!e.next().done;)continue}_appendKey(e){this._ensureMinimumCapacity(this.tail+t.KEY.length+e.length),this.tail+=t.KEY.copy(this.buf,this.tail),this.tail+=e.copy(this.buf,this.tail)}_appendBlock(t){this._ensureMinimumCapacity(this.tail+t.length),this.tail+=t.copy(this.buf,this.tail)}_ensureMinimumCapacity(t){if(this.buf.length<t){const e=o.Buffer.allocUnsafe(t+32);this.buf.copy(e),this.buf=e}}_ensureKey(t){for(const e of this.keys)if(t.equals(e))return;this._appendKey(t)}get(e){this._isDirty&&this._reIndex(),e<0&&(e=this.length+e);const r=this._cache[e];if(r)return t.mapBlock(this.buf,r.offset,this._keychain[r.keyId])}toArray(){const t=[];for(const e of this.blocks())t.push(e);return t}append(e,r,n){if(!r)throw new Error("Can't append without a signing secret");if(64!==r.length)throw new Error("Unknown signature secret key format");const i=r.slice(t.KEY_SIZE);this._ensureKey(i);const s=t.META_SIZE,a=this.last;o.Buffer.isBuffer(e)||(e=o.Buffer.from(e));const c=e.length,u=this.tail+c+s;if(this._MAX_FEED_SIZE<u){console.error(`MAX_FEED_SIZE reached, block won't fit: ${u} > ${this._MAX_FEED_SIZE}`);const t=new Error("FeedOverflowError");throw t.type=t.message,t.maxSize=this._MAX_FEED_SIZE,t.requestedSize=u,t.bytesOverflow=u-this._MAX_FEED_SIZE,t}this._ensureMinimumCapacity(u);const l=t.mapBlock(this.buf,this.tail);if(l.header.fill(0),l.size=c,e.copy(l.body),a&&a.sig.copy(l.parentSig),Wh(l.sig,l.dat,r),!l.verify(i))throw new Error("newly stored block is invalid. something went wrong");return this.tail=u,"function"==typeof n&&n(null,this.length),this.length}*_index(e=!1){let r=0,n=0;e&&this._clearCache();const i=t.KEY,s=t.KEY_SIZE;let a=null;for(;;){if(r>=this.tail)return;if(r+i.length>this.buf.length)return;if(i.equals(this.buf.slice(r,r+i.length))){const t=this.buf.slice(r+i.length,r+i.length+s);let e=this._keychain.findIndex((e=>e.equals(t)));~e||(e=this._keychain.length,this._keychain.push(t)),yield{type:0,id:e,key:t,offset:r},r+=i.length+s}else if(this._cache[n]&&this._cache[n].offset===r){const e=n++,o=this._cache[e],i=this._keychain[o.keyId];if(!i)throw new Error("InternalError:KeyCacheBroken");const s=t.mapBlock(this.buf,o.offset,i);yield{type:1,seq:e,key:i,block:s,offset:o.offset},a=s.sig,r=s.end}else{const e=t.mapBlock(this.buf,r);if(0===e.size)return;if(r+e.size>this.buf.length)return;if(n){if(!a.equals(e.parentSig))return}else this._hasGenisis=e.parentSig.equals(o.Buffer.alloc(64));let i=!1;for(let t=this._keychain.length-1;t>=0;t--){if(i=e.verify(this._keychain[t]),!i)continue;const o=n++;e.key=this._keychain[t],this._cache[o]={offset:r,keyId:t},yield{type:1,seq:o,block:e,offset:r,key:this._keychain[t]},a=e.sig,r=e.end;break}if(!i)return}}}toString(){return this.pickle()}pickle(e=0){let r=encodeURIComponent(t.PICKLE.toString("utf8"));const n=t.KEY,o=t.BLOCK,i=(e?this.slice(e):this)._index();for(const t of i)r+=t.type?o+og(t.block.buffer):n+og(t.key);return r}slice(e=0,r,n=!1){const o=new t;for(const t of this.blocks(e,r))n||o._ensureKey(t.key),o._appendBlock(t.buffer);return o}_unpack(e){if(!e)throw new Error("Missing first argument");if("string"!=typeof e)throw new Error("url-friendly string expected");const r=encodeURIComponent(t.PICKLE),n=encodeURIComponent(t.KEY),o=encodeURIComponent(t.BLOCK),i=e.indexOf(r);if(-1===i)throw new Error("NotPickleError");let s=r.length+i,a=0,c=0,u=-1,l=-1;const f=()=>{if(-1!==u){const r=decodeURIComponent(e.substr(l,s-l-c-a+1));if(u)this._appendBlock(ig(r));else{const e=ig(r);if(e.length!==t.KEY_SIZE)throw new Error("PSIG key wrong size: ");this._ensureKey(e)}u=-1}l=s+1,u=a?0:1,a=c=0};for(;s<e.length;)e[s]===n[a]?++a===n.length&&f():a=0,e[s]===o[c]?++c===o.length&&f():c=0,s++;f()}truncate(t){if(0===t)return this.tail=0,this._cache=[],this._keychain=[],!0;const e=this.tail,r=this.get(t-1);if(this.tail=r.end,e===this.tail)return!1;let n=this._cache.length-t;for(;n--;)this._cache.pop();return!0}*blocks(t=0,e=0){for(t<0&&(t=this.length+t),e||(e=this.length),e<0&&(e=this.length+e+1);t<e;)yield this.get(t++)}_steal(t,e=!1){return e?(this.buf=o.Buffer.alloc(t.buf.length),t.buf.copy(this.buf),this._cache=t._cache.map((t=>({...t})))):(this.buf=t.buf,this._cache=[...t._cache]),this._keychain=[...t._keychain],this._hasGenisis=t._hasGenisis,this.tail=t.tail,t._robbed=!0,!0}_clearCache(){this._keychain=[],this._cache=[]}get __clazz(){return Object.getPrototypeOf(this).constructor}merge(t,e={},r=null){if("function"==typeof e)return this.merge(t,void 0,e);const n=e.forceCopy||!1;if(!t)throw new Error("First argument `source` expected by merge");const o=this.__clazz.from(t),i="function"==typeof r,s=i?t=>{let e=!1;return r(t,(()=>{e=!0})),e}:()=>!1,a=t=>{let e=!1;for(const r of t){const t=r.key;if(i){if(s(r))return e}this._ensureKey(t),this._appendBlock(r.buffer),e=!0}return e};if(!this.length)return i?a(o.blocks()):this._steal(o,n);const c=()=>{if(this._reverseMergeFlag)return!1;const t=o.clone();t._reverseMergeFlag=!0;const n=t.length;if((!i||!s(t.get(0)))&&t.merge(this,e,r)){if(n===t.length)throw new Error("InternalError:NothingMerged");return this._steal(t)}return!1};try{const t=this._compare(o);return t<1||a(o.blocks(o.length-t))}catch(t){switch(t.type){case"BlockConflict":return!1;case"NoCommonParent":return!!this.partial&&c()}throw t}}clone(t){const e=new(t=t||this.__clazz);return e._steal(this,!0),e}_compare(t){if(this===t)return 0;const e=[-1,-1],r=[this._index(),t._index()],n=[],o=[!1,!1],i=[],s=t=>{for(n[t]&&(i[t]=n[t].sig),n[t]=null;!n[t]&&!o[t];){const i=r[t].next();if(o[t]=o[t]||i.done,i.done&&void 0===i.value)break;i.value.type&&(e[t]++,n[t]=i.value.block)}},a=t=>{const r=e[t]-1;for(;n[t];)s(t);return e[t]-r},c=t=>{const r=new Error(t);return r.type=t,r.idxA=e[0],r.idxB=e[1],r};if(s(1),!n[1])return-a(0);const u=n[1].parentSig;for(;!o[0]&&(s(0),n[0])&&!n[0].parentSig.equals(u);)if(n[0].sig.equals(u)&&this.length===e[0]+1)return a(1);if(!n[0])throw c("NoCommonParent");if(!n[0].sig.equals(n[1].sig))throw c("BlockConflict");for(;;){if(s(0),s(1),!n[0]||!n[1])return n[0]||n[1]?n[0]?-a(0):a(1):0;if(!n[0].sig.equals(n[1].sig))throw c("BlockConflict")}}inspect(t=!1){const e=[["ID","KEY","SIG","PARENT","HEX","ASCII"]],r=[2];let n=0;for(const t of this.blocks()){const o=t.body.slice(0,12).toString("utf8"),i=[""+n++,t.key.slice(0,2).toString("hex"),t.sig.slice(0,4).toString("hex"),t.isGenesis?"_GENESIS":t.parentSig.slice(0,4).toString("hex"),t.body.slice(0,6).toString("hex").replace(/(.{2})/g,"$1 ").trimEnd(),o];for(let t=0;t<i.length;t++)r[t]=Math.max(r[t]||0,i[t].length);e.push(i)}const o=[];for(const t of e)o.push("│ "+t.map(((t,e)=>t.padEnd(r[e]))).join(" │ ")+" │");if(o.splice(1,0,"├".padEnd(o[0].length-1,"─")+"┤"),t)return o.join("\n");console.log(o.join("\n"))}static isFeed(t){return t&&t[eg]}static from(e,r={}){if(t.isFeed(e))return e;const n=new t(r);if(e[tg])n._ensureKey(e.key),n._appendBlock(e.buffer);else if("string"==typeof e)n._unpack(e);else if("string"==typeof e.hash)n._unpack(e.hash);else{if(!o.Buffer.isBuffer(e))throw new Error("NotAFeed");n._unpack(e.toString("utf8"))}return n}static signPair(){const t=o.Buffer.allocUnsafe(Vh),e=o.Buffer.allocUnsafe(zh);return Xh(e,t),{sk:t,pk:e}}static mapBlock(e,r=0,n=null){const o=t.SIGNATURE_SIZE,i=t.COUNTER_SIZE,s=o+i,a={[tg]:!0,get start(){return r},get sig(){return e.subarray(r,r+o)},get header(){return e.subarray(r+o,r+o+s)},get parentSig(){return e.subarray(r+o,r+o+o)},get size(){return e.readUInt32BE(r+2*o)},set size(t){if("number"!=typeof t||t<0||t+r+o+s>e.length)throw new Error("Invalid blob size");return e.writeUInt32BE(t,r+2*o)},get body(){return e.subarray(r+o+s,a.safeEnd)},get dat(){return e.subarray(r+o,a.safeEnd)},get end(){return r+o+s+a.size},get safeEnd(){const t=a.size;if(t<1)throw new Error("Invalid blob size: "+t);const n=r+o+s+t;if(n>e.length)throw new Error("Incomplete or invalid block: end overflows buffer length"+n);return n},get next(){return t.mapBlock(e,a.safeEnd)},verify:t=>Jh(a.sig,a.dat,t),get buffer(){return e.subarray(r,a.safeEnd)},get key(){if(!n)throw new Error("InternalError:MissingKey");return n},set key(t){if(n)throw new Error("InternalError:KeyExists");n=t},get isGenesis(){return rg.equals(a.parentSig)},[Zh]:()=>`[BlockMapper] start: ${a.start}, blocksize: ${a.size}, id: ${a.sig.slice(0,6).toString("hex")}, parent: ${a.parentSig.slice(0,6).toString("hex")}`};return a}};function og(t){return t.toString("base64").replace(/\+/,"-").replace(/\//g,"_").replace(/=+$/,"")}function ig(t){return t=(t=(t+"===").slice(0,t.length+t.length%4)).replace(/-/g,"+").replace(/_/g,"/"),o.Buffer.from(t,"base64")}const sg=ng,ag=Symbol.for("PicoRepo");function cg(t,e){if(!o.Buffer.isBuffer(e))throw new Error("Expected key to be a Buffer");const r=o.Buffer.alloc(1+e.length);return e.copy(r,1),r[0]=t,r}var ug,lg,fg,hg=class{static isRepo(t){return t&&t[ag]}constructor(t,e=[]){this[ag]=!0,this._db=t,this._strategies=Array.isArray(e)?e:[e];for(const t of this._strategies)if("function"!=typeof t)throw new Error("ExpectedCallback")}get mkKey(){return cg}async _setHeadPtr(t,e){const r=cg(0,t);return await this._db.put(r,e),e}async _getHeadPtr(t){const e=cg(0,t);return await this._db.get(e).catch((t=>{if(!t.notFound)throw t}))}async _getTailPtr(t){const e=cg(2,t);return await this._db.get(e).catch((t=>{if(!t.notFound)throw t}))}async _setLatestPtr(t,e){const r=cg(3,t);return await this._db.put(r,e),e}async _getLatestPtr(t){const e=cg(3,t);return await this._db.get(e).catch((t=>{if(!t.notFound)throw t}))}async writeBlock(t){const e=cg(1,t.sig),r=o.Buffer.alloc(32+t.buffer.length);return t.key.copy(r,0),t.buffer.copy(r,32),await this._db.put(e,r),t.isGenesis&&await this._db.put(cg(2,t.key),t.sig),!0}async readBlock(t){const e=cg(1,t),r=await this._db.get(e).catch((t=>{if(!t.notFound)throw t}));if(r)return sg.mapBlock(r,32,r.slice(0,32))}async _hasBlock(t){return!!await this.readBlock(t)}async _traceOwnerOf(t){let e=0;for await(const r of this._chainLoad(t)){if(r.isGenesis)return r.key;e++}if(e)throw new Error("Orphaned Chain")}async merge(t,e){sg.isFeed(t)||(t=sg.from(t));let r=0,n=null;const o=t.first;if(!o)return 0;if(n=o.isGenesis?o.key:await this._traceOwnerOf(o.parentSig),!n)throw new Error("CannotMerge: Unknown Chain");for(const o of t.blocks()){const t=o.key,i=o.sig;if(await this._hasBlock(i))continue;const s=async()=>{await this.writeBlock(o),await this._setHeadPtr(n,o.sig),await this._setLatestPtr(t,o.sig),r++},a=await this._getHeadPtr(n);if(!a){await s();continue}if(a.equals(o.parentSig)){await s();continue}if(!await this._hasBlock(o.parentSig))break;let c=!1;for await(const t of this._chainLoad(o.parentSig))if(a.equals(t.sig)){c=!0;break}if(c)await s();else{if(!await this._queryUserStrategy(o,e))break;await s()}}return r}async _queryUserStrategy(t,e){for(const r of[e,...this._strategies]){if(!r)continue;const e=r(t,this);if("function"!=typeof e.then)throw new Error("PromiseExpected");if(await e)return!0}return!1}async loadHead(t,e){const r=await this._getHeadPtr(t);if(r)return this.loadFeed(r,e)}async loadLatest(t,e){const r=await this._getLatestPtr(t);if(r)return this.loadFeed(r,e)}async loadFeed(t,e){let r=0;Number.isInteger(e)&&e>0&&(r=e),r&&(e=(t,e)=>!--r&&e(!0));const n=[];for await(const r of this._chainLoad(t)){let t=!1,o=!1;if("function"==typeof e&&e(r,(e=>{e?o=!0:t=!0})),t||n.unshift(r),o||t)break}const o=new sg;for(const t of n){if(!o.merge(t))throw new Error("InternalError:CannotRestoreStoredBlock")}if(o.length)return o}async*_chainLoad(t){let e=!0;for(;;){const r=await this.readBlock(t);if(!r&&e)break;if(e=!1,!r)throw new Error("ParentNotFound");if(yield r,r.isGenesis)break;t=r.parentSig}}async rollback(t,e){let r=!1;const n=await this.loadHead(t,((t,n)=>{e&&t.sig.equals(e)&&(r=!0,n())}));if(e&&!r)throw new Error("ReferenceNotFound");const o=[],i=[],s={};for(let t=n.length-1;t>=0;t--){const e=n.get(t),r=e.key.toString("hex");s[r]||(s[r]=await this._getLatestPtr(e.key)),s[r]?.equals(e.sig)&&i.push(e.key),o.push({type:"del",key:cg(1,e.sig)})}o.push({type:"del",key:cg(0,t)}),e?o.push({type:"put",key:cg(0,t),value:e}):n.first.isGenesis||o.push({type:"put",key:cg(0,t),value:n.first.parentSig});for(const t of i)o.push({type:"del",key:cg(3,t)});return await this._db.batch(o),n}get headOf(){return this._getHeadPtr}get tailOf(){return this._getTailPtr}get latestOf(){return this._getLatestPtr}get chainload(){return this._chainLoad}get ownerOf(){return this._traceOwnerOf}async writeReg(t,e){const r=cg(4,o.Buffer.from(t));return await this._db.put(r,o.Buffer.from(e)),!0}async readReg(t){const e=cg(4,o.Buffer.from(t));return await this._db.get(e).catch((t=>{if(!t.notFound)throw t}))}async listHeads(){const t={gt:cg(0,o.Buffer.alloc(32).fill(0)),lt:cg(0,o.Buffer.alloc(32).fill(255))},e=this._db.iterator(t),r=[];for(;;)try{const[t,n]=await new Promise(((t,r)=>{e.next(((e,n,o)=>{e?r(e):t([n,o])}))}));if(!t)break;r.push({key:t.slice(1),value:n})}catch(t){console.warn("Iterator died with an error",t);break}return await new Promise(((t,r)=>{e.end((e=>e?r(e):t()))})),r}},gg="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};try{ug=new TextDecoder}catch(t){}var dg,pg,Ag,yg,Ig=0,bg={},mg=0,wg=0,Eg=[],Cg={useRecords:!1,mapsAsObjects:!0};class _g{}const vg=new _g;vg.name="MessagePack 0xC1";var Bg=!1;class Sg{constructor(t){t&&(!1===t.useRecords&&void 0===t.mapsAsObjects&&(t.mapsAsObjects=!0),t.structures?t.structures.sharedLength=t.structures.length:t.getStructures&&((t.structures=[]).uninitialized=!0,t.structures.sharedLength=0)),Object.assign(this,t)}unpack(t,e){if(lg)return Xg((()=>(Zg(),this?this.unpack(t,e):Sg.prototype.unpack.call(Cg,t,e))));fg=e>-1?e:t.length,Ig=0,wg=0,pg=null,lg=t;try{yg=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(e){if(lg=null,t instanceof Uint8Array)throw e;throw new Error("Source must be a Uint8Array or Buffer but was a "+(t&&"object"==typeof t?t.constructor.name:typeof t))}if(this instanceof Sg){if(bg=this,this.structures)return dg=this.structures,kg();(!dg||dg.length>0)&&(dg=[])}else bg=Cg,(!dg||dg.length>0)&&(dg=[]);return kg()}unpackMultiple(t,e){let r,n=0;try{Bg=!0;let o=t.length,i=this?this.unpack(t,o):rd.unpack(t,o);if(!e){for(r=[i];Ig<o;)n=Ig,r.push(kg());return r}for(e(i);Ig<o;)if(n=Ig,!1===e(kg()))return}catch(t){throw t.lastPosition=n,t.values=r,t}finally{Bg=!1,Zg()}}_mergeStructures(t,e){for(let e=0,r=(t=t||[]).length;e<r;e++){let r=t[e];r&&(r.isShared=!0,e>=32&&(r.highByte=e-32>>5))}t.sharedLength=t.length;for(let r in e||[])if(r>=0){let n=t[r],o=e[r];o&&(n&&((t.restoreStructures||(t.restoreStructures=[]))[r]=n),t[r]=o)}return this.structures=t}decode(t,e){return this.unpack(t,e)}}function kg(){try{if(!bg.trusted&&!Bg){let t=dg.sharedLength||0;t<dg.length&&(dg.length=t)}let t=Qg();if(Ig==fg)dg.restoreStructures&&xg(),dg=null,lg=null,Ag&&(Ag=null);else{if(Ig>fg){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}if(!Bg)throw new Error("Data read, but end of buffer not reached")}return t}catch(t){throw dg.restoreStructures&&xg(),Zg(),(t instanceof RangeError||t.message.startsWith("Unexpected end of buffer"))&&(t.incomplete=!0),t}}function xg(){for(let t in dg.restoreStructures)dg[t]=dg.restoreStructures[t];dg.restoreStructures=null}function Qg(){let t=lg[Ig++];if(t<160){if(t<128){if(t<64)return t;{let e=dg[63&t]||bg.getStructures&&Ug()[63&t];return e?(e.read||(e.read=Dg(e,63&t)),e.read()):t}}if(t<144){if(t-=128,bg.mapsAsObjects){let e={};for(let r=0;r<t;r++)e[Vg()]=Qg();return e}{let e=new Map;for(let r=0;r<t;r++)e.set(Qg(),Qg());return e}}{t-=144;let e=new Array(t);for(let r=0;r<t;r++)e[r]=Qg();return e}}if(t<192){let e=t-160;if(wg>=Ig)return pg.slice(Ig-mg,(Ig+=e)-mg);if(0==wg&&fg<140){let t=e<16?Kg(e):jg(e);if(null!=t)return t}return Lg(e)}{let e;switch(t){case 192:return null;case 193:return vg;case 194:return!1;case 195:return!0;case 196:return Hg(lg[Ig++]);case 197:return e=yg.getUint16(Ig),Ig+=2,Hg(e);case 198:return e=yg.getUint32(Ig),Ig+=4,Hg(e);case 199:return Gg(lg[Ig++]);case 200:return e=yg.getUint16(Ig),Ig+=2,Gg(e);case 201:return e=yg.getUint32(Ig),Ig+=4,Gg(e);case 202:if(e=yg.getFloat32(Ig),bg.useFloat32>2){let t=td[(127&lg[Ig])<<1|lg[Ig+1]>>7];return Ig+=4,(t*e+(e>0?.5:-.5)>>0)/t}return Ig+=4,e;case 203:return e=yg.getFloat64(Ig),Ig+=8,e;case 204:return lg[Ig++];case 205:return e=yg.getUint16(Ig),Ig+=2,e;case 206:return e=yg.getUint32(Ig),Ig+=4,e;case 207:return bg.int64AsNumber?(e=4294967296*yg.getUint32(Ig),e+=yg.getUint32(Ig+4)):e=yg.getBigUint64(Ig),Ig+=8,e;case 208:return yg.getInt8(Ig++);case 209:return e=yg.getInt16(Ig),Ig+=2,e;case 210:return e=yg.getInt32(Ig),Ig+=4,e;case 211:return bg.int64AsNumber?(e=4294967296*yg.getInt32(Ig),e+=yg.getUint32(Ig+4)):e=yg.getBigInt64(Ig),Ig+=8,e;case 212:if(e=lg[Ig++],114==e)return zg(63&lg[Ig++]);{let t=Eg[e];if(t)return t.read?(Ig++,t.read(Qg())):t.noBuffer?(Ig++,t()):t(lg.subarray(Ig,++Ig));throw new Error("Unknown extension "+e)}case 213:return e=lg[Ig],114==e?(Ig++,zg(63&lg[Ig++],lg[Ig++])):Gg(2);case 214:return Gg(4);case 215:return Gg(8);case 216:return Gg(16);case 217:return e=lg[Ig++],wg>=Ig?pg.slice(Ig-mg,(Ig+=e)-mg):Tg(e);case 218:return e=yg.getUint16(Ig),wg>=(Ig+=2)?pg.slice(Ig-mg,(Ig+=e)-mg):Pg(e);case 219:return e=yg.getUint32(Ig),wg>=(Ig+=4)?pg.slice(Ig-mg,(Ig+=e)-mg):Fg(e);case 220:return e=yg.getUint16(Ig),Ig+=2,Ng(e);case 221:return e=yg.getUint32(Ig),Ig+=4,Ng(e);case 222:return e=yg.getUint16(Ig),Ig+=2,Rg(e);case 223:return e=yg.getUint32(Ig),Ig+=4,Rg(e);default:if(t>=224)return t-256;if(void 0===t){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}throw new Error("Unknown MessagePack token "+t)}}}const Mg=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Dg(t,e){function r(){if(r.count++>2){let r=t.read=new Function("r","return function(){return {"+t.map((t=>Mg.test(t)?t+":r()":"["+JSON.stringify(t)+"]:r()")).join(",")+"}}")(Qg);return 0===t.highByte&&(t.read=Og(e,t.read)),r()}let n={};for(let e=0,r=t.length;e<r;e++){n[t[e]]=Qg()}return n}return r.count=0,0===t.highByte?Og(e,r):r}const Og=(t,e)=>function(){let r=lg[Ig++];if(0===r)return e();let n=t<32?-(t+(r<<5)):t+(r<<5),o=dg[n]||Ug()[n];if(!o)throw new Error("Record id is not defined for "+n);return o.read||(o.read=Dg(o,t)),o.read()};function Ug(){let t=Xg((()=>(lg=null,bg.getStructures())));return dg=bg._mergeStructures(t,dg)}var Lg=$g,Tg=$g,Pg=$g,Fg=$g;function $g(t){let e;if(t<16&&(e=Kg(t)))return e;if(t>64&&ug)return ug.decode(lg.subarray(Ig,Ig+=t));const r=Ig+t,n=[];for(e="";Ig<r;){const t=lg[Ig++];if(0==(128&t))n.push(t);else if(192==(224&t)){const e=63&lg[Ig++];n.push((31&t)<<6|e)}else if(224==(240&t)){const e=63&lg[Ig++],r=63&lg[Ig++];n.push((31&t)<<12|e<<6|r)}else if(240==(248&t)){let e=(7&t)<<18|(63&lg[Ig++])<<12|(63&lg[Ig++])<<6|63&lg[Ig++];e>65535&&(e-=65536,n.push(e>>>10&1023|55296),e=56320|1023&e),n.push(e)}else n.push(t);n.length>=4096&&(e+=Yg.apply(String,n),n.length=0)}return n.length>0&&(e+=Yg.apply(String,n)),e}function Ng(t){let e=new Array(t);for(let r=0;r<t;r++)e[r]=Qg();return e}function Rg(t){if(bg.mapsAsObjects){let e={};for(let r=0;r<t;r++)e[Vg()]=Qg();return e}{let e=new Map;for(let r=0;r<t;r++)e.set(Qg(),Qg());return e}}var Yg=String.fromCharCode;function jg(t){let e=Ig,r=new Array(t);for(let n=0;n<t;n++){const t=lg[Ig++];if((128&t)>0)return void(Ig=e);r[n]=t}return Yg.apply(String,r)}function Kg(t){if(t<4){if(t<2){if(0===t)return"";{let t=lg[Ig++];return(128&t)>1?void(Ig-=1):Yg(t)}}{let e=lg[Ig++],r=lg[Ig++];if((128&e)>0||(128&r)>0)return void(Ig-=2);if(t<3)return Yg(e,r);let n=lg[Ig++];return(128&n)>0?void(Ig-=3):Yg(e,r,n)}}{let e=lg[Ig++],r=lg[Ig++],n=lg[Ig++],o=lg[Ig++];if((128&e)>0||(128&r)>0||(128&n)>0||(128&o)>0)return void(Ig-=4);if(t<6){if(4===t)return Yg(e,r,n,o);{let t=lg[Ig++];return(128&t)>0?void(Ig-=5):Yg(e,r,n,o,t)}}if(t<8){let i=lg[Ig++],s=lg[Ig++];if((128&i)>0||(128&s)>0)return void(Ig-=6);if(t<7)return Yg(e,r,n,o,i,s);let a=lg[Ig++];return(128&a)>0?void(Ig-=7):Yg(e,r,n,o,i,s,a)}{let i=lg[Ig++],s=lg[Ig++],a=lg[Ig++],c=lg[Ig++];if((128&i)>0||(128&s)>0||(128&a)>0||(128&c)>0)return void(Ig-=8);if(t<10){if(8===t)return Yg(e,r,n,o,i,s,a,c);{let t=lg[Ig++];return(128&t)>0?void(Ig-=9):Yg(e,r,n,o,i,s,a,c,t)}}if(t<12){let u=lg[Ig++],l=lg[Ig++];if((128&u)>0||(128&l)>0)return void(Ig-=10);if(t<11)return Yg(e,r,n,o,i,s,a,c,u,l);let f=lg[Ig++];return(128&f)>0?void(Ig-=11):Yg(e,r,n,o,i,s,a,c,u,l,f)}{let u=lg[Ig++],l=lg[Ig++],f=lg[Ig++],h=lg[Ig++];if((128&u)>0||(128&l)>0||(128&f)>0||(128&h)>0)return void(Ig-=12);if(t<14){if(12===t)return Yg(e,r,n,o,i,s,a,c,u,l,f,h);{let t=lg[Ig++];return(128&t)>0?void(Ig-=13):Yg(e,r,n,o,i,s,a,c,u,l,f,h,t)}}{let g=lg[Ig++],d=lg[Ig++];if((128&g)>0||(128&d)>0)return void(Ig-=14);if(t<15)return Yg(e,r,n,o,i,s,a,c,u,l,f,h,g,d);let p=lg[Ig++];return(128&p)>0?void(Ig-=15):Yg(e,r,n,o,i,s,a,c,u,l,f,h,g,d,p)}}}}}function Hg(t){return bg.copyBuffers?Uint8Array.prototype.slice.call(lg,Ig,Ig+=t):lg.subarray(Ig,Ig+=t)}function Gg(t){let e=lg[Ig++];if(Eg[e])return Eg[e](lg.subarray(Ig,Ig+=t));throw new Error("Unknown extension type "+e)}var qg=new Array(4096);function Vg(){let t=lg[Ig++];if(!(t>=160&&t<192))return Ig--,Qg();if(t-=160,wg>=Ig)return pg.slice(Ig-mg,(Ig+=t)-mg);if(!(0==wg&&fg<180))return Lg(t);let e,r=4095&(t<<5^(t>1?yg.getUint16(Ig):t>0?lg[Ig]:0)),n=qg[r],o=Ig,i=Ig+t-3,s=0;if(n&&n.bytes==t){for(;o<i;){if(e=yg.getUint32(o),e!=n[s++]){o=1879048192;break}o+=4}for(i+=3;o<i;)if(e=lg[o++],e!=n[s++]){o=1879048192;break}if(o===i)return Ig=o,n.string;i-=3,o=Ig}for(n=[],qg[r]=n,n.bytes=t;o<i;)e=yg.getUint32(o),n.push(e),o+=4;for(i+=3;o<i;)e=lg[o++],n.push(e);let a=t<16?Kg(t):jg(t);return n.string=null!=a?a:Lg(t)}const zg=(t,e)=>{var r=Qg();let n=t;void 0!==e&&(t=t<32?-((e<<5)+t):(e<<5)+t,r.highByte=e);let o=dg[t];return o&&o.isShared&&((dg.restoreStructures||(dg.restoreStructures=[]))[t]=o),dg[t]=r,r.read=Dg(r,n),r.read()};var Wg="object"==typeof self?self:gg;Eg[0]=()=>{},Eg[0].noBuffer=!0,Eg[101]=()=>{let t=Qg();return(Wg[t[0]]||Error)(t[1])},Eg[105]=t=>{let e=yg.getUint32(Ig-4);Ag||(Ag=new Map);let r,n=lg[Ig];r=n>=144&&n<160||220==n||221==n?[]:{};let o={target:r};Ag.set(e,o);let i=Qg();return o.used?Object.assign(r,i):(o.target=i,i)},Eg[112]=t=>{let e=yg.getUint32(Ig-4),r=Ag.get(e);return r.used=!0,r.target},Eg[115]=()=>new Set(Qg());const Jg=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map((t=>t+"Array"));function Xg(t){let e=fg,r=Ig,n=mg,o=wg,i=pg,s=Ag,a=new Uint8Array(lg.slice(0,fg)),c=dg,u=dg.slice(0,dg.length),l=bg,f=Bg,h=t();return fg=e,Ig=r,mg=n,wg=o,pg=i,Ag=s,lg=a,Bg=f,(dg=c).splice(0,dg.length,...u),bg=l,yg=new DataView(lg.buffer,lg.byteOffset,lg.byteLength),h}function Zg(){lg=null,Ag=null,dg=null}Eg[116]=t=>{let e=t[0],r=Jg[e];if(!r)throw new Error("Could not find typed array for code "+e);return new Wg[r](Uint8Array.prototype.slice.call(t,1).buffer)},Eg[120]=()=>{let t=Qg();return new RegExp(t[0],t[1])},Eg[255]=t=>4==t.length?new Date(1e3*(16777216*t[0]+(t[1]<<16)+(t[2]<<8)+t[3])):8==t.length?new Date(((t[0]<<22)+(t[1]<<14)+(t[2]<<6)+(t[3]>>2))/1e6+1e3*(4294967296*(3&t[3])+16777216*t[4]+(t[5]<<16)+(t[6]<<8)+t[7])):12==t.length?new Date(((t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3])/1e6+1e3*((128&t[4]?-281474976710656:0)+1099511627776*t[6]+4294967296*t[7]+16777216*t[8]+(t[9]<<16)+(t[10]<<8)+t[11])):new Date("invalid");const td=new Array(147);for(let t=0;t<256;t++)td[t]=+("1e"+Math.floor(45.15-.30103*t));const ed=Sg;var rd=new Sg({useRecords:!1});const nd=rd.unpack,od=rd.unpackMultiple,id=rd.unpack,sd={NEVER:0,ALWAYS:1,DECIMAL_ROUND:3,DECIMAL_FIT:4};let ad,cd,ud,ld=new Float32Array(1),fd=new Uint8Array(ld.buffer,0,4);try{ad=new TextEncoder}catch(t){}const hd=void 0!==o.Buffer,gd=hd?o.Buffer.allocUnsafeSlow:Uint8Array,dd=hd?o.Buffer:Uint8Array,pd=hd?4294967296:2144337920;let Ad,yd,Id,bd=0;const md=Symbol("record-id");class wd extends Sg{constructor(t){let e,r,n,o,i;super(t),this.offset=0;let s=0,a=dd.prototype.utf8Write?function(t,e,r){return Ad.utf8Write(t,e,r)}:!(!ad||!ad.encodeInto)&&function(t,e){return ad.encodeInto(t,Ad.subarray(e)).written},c=this;t||(t={});let u=t&&t.sequential,l=t.structures||t.saveStructures,f=t.maxSharedStructures;if(null==f&&(f=l?32:0),f>8160)throw new Error("Maximum maxSharedStructure is 8160");let h=t.maxOwnStructures;null==h&&(h=l?32:64),u&&!t.saveStructures&&(this.structures=[]);let g=f>32||h+f>64,d=f+64,p=f+h+64;if(p>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let A=[],y=0,I=0;this.pack=this.encode=function(t,a){if(Ad||(Ad=new gd(8192),yd=new DataView(Ad.buffer,0,8192),bd=0),Id=Ad.length-10,Id-bd<2048?(Ad=new gd(Ad.length),yd=new DataView(Ad.buffer,0,Ad.length),Id=Ad.length-10,bd=0):bd=bd+7&2147483640,e=bd,i=c.structuredClone?new Map:null,r=c.structures,r){r.uninitialized&&(r=c._mergeStructures(c.getStructures()));let t=r.sharedLength||0;if(t>f)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+r.sharedLength);if(!r.transitions){r.transitions=Object.create(null);for(let e=0;e<t;e++){let t=r[e];if(!t)continue;let n,o=r.transitions;for(let e=0,r=t.length;e<r;e++){let r=t[e];n=o[r],n||(n=o[r]=Object.create(null)),o=n}o[md]=e+64}s=t}u||(r.nextId=t+64)}n&&(n=!1),o=r||[];try{if(b(t),c.offset=bd,i&&i.idsToInsert){bd+=6*i.idsToInsert.length,bd>Id&&w(bd),c.offset=bd;let t=function(t,e){let r,n=6*e.length,o=t.length-n;e.sort(((t,e)=>t.offset>e.offset?1:-1));for(;r=e.pop();){let e=r.offset,i=r.id;t.copyWithin(e+n,e,o),n-=6;let s=e+n;t[s++]=214,t[s++]=105,t[s++]=i>>24,t[s++]=i>>16&255,t[s++]=i>>8&255,t[s++]=255&i,o=e}return t}(Ad.subarray(e,bd),i.idsToInsert);return i=null,t}return a===Od?(Ad.start=e,Ad.end=bd,Ad):Ad.subarray(e,bd)}finally{if(r){if(I<10&&I++,y>1e4)r.transitions=null,I=0,y=0,A.length>0&&(A=[]);else if(A.length>0&&!u){for(let t=0,e=A.length;t<e;t++)A[t][md]=0;A=[]}if(n&&c.saveStructures){let n=r.sharedLength||f;r.length>n&&(r=r.slice(0,n));let o=Ad.subarray(e,bd);return!1===c.saveStructures(r,s)?(c._mergeStructures(c.getStructures()),c.pack(t)):(s=n,o)}}}};const b=t=>{bd>Id&&(Ad=w(bd));var r,n=typeof t;if("string"===n){let e,n=t.length;e=n<32?1:n<256?2:n<65536?3:5;let o=3*n;if(bd+o>Id&&(Ad=w(bd+o)),n<64||!a){let o,i,s,a=bd+e;for(o=0;o<n;o++)i=t.charCodeAt(o),i<128?Ad[a++]=i:i<2048?(Ad[a++]=i>>6|192,Ad[a++]=63&i|128):55296==(64512&i)&&56320==(64512&(s=t.charCodeAt(o+1)))?(i=65536+((1023&i)<<10)+(1023&s),o++,Ad[a++]=i>>18|240,Ad[a++]=i>>12&63|128,Ad[a++]=i>>6&63|128,Ad[a++]=63&i|128):(Ad[a++]=i>>12|224,Ad[a++]=i>>6&63|128,Ad[a++]=63&i|128);r=a-bd-e}else r=a(t,bd+e,o);r<32?Ad[bd++]=160|r:r<256?(e<2&&Ad.copyWithin(bd+2,bd+1,bd+1+r),Ad[bd++]=217,Ad[bd++]=r):r<65536?(e<3&&Ad.copyWithin(bd+3,bd+2,bd+2+r),Ad[bd++]=218,Ad[bd++]=r>>8,Ad[bd++]=255&r):(e<5&&Ad.copyWithin(bd+5,bd+3,bd+3+r),Ad[bd++]=219,yd.setUint32(bd,r),bd+=4),bd+=r}else if("number"===n)if(t>>>0===t)t<64?Ad[bd++]=t:t<256?(Ad[bd++]=204,Ad[bd++]=t):t<65536?(Ad[bd++]=205,Ad[bd++]=t>>8,Ad[bd++]=255&t):(Ad[bd++]=206,yd.setUint32(bd,t),bd+=4);else if(t>>0===t)t>=-32?Ad[bd++]=256+t:t>=-128?(Ad[bd++]=208,Ad[bd++]=t+256):t>=-32768?(Ad[bd++]=209,yd.setInt16(bd,t),bd+=2):(Ad[bd++]=210,yd.setInt32(bd,t),bd+=4);else{let e;if((e=this.useFloat32)>0&&t<4294967296&&t>=-2147483648){let r;if(Ad[bd++]=202,yd.setFloat32(bd,t),e<4||(r=t*td[(127&Ad[bd])<<1|Ad[bd+1]>>7])>>0===r)return void(bd+=4);bd--}Ad[bd++]=203,yd.setFloat64(bd,t),bd+=8}else if("object"===n)if(t){if(i){let r=i.get(t);if(r){if(!r.id){let t=i.idsToInsert||(i.idsToInsert=[]);r.id=t.push(r)}return Ad[bd++]=214,Ad[bd++]=112,yd.setUint32(bd,r.id),void(bd+=4)}i.set(t,{offset:bd-e})}let n=t.constructor;if(n===Object)m(t,!0);else if(n===Array){(r=t.length)<16?Ad[bd++]=144|r:r<65536?(Ad[bd++]=220,Ad[bd++]=r>>8,Ad[bd++]=255&r):(Ad[bd++]=221,yd.setUint32(bd,r),bd+=4);for(let e=0;e<r;e++)b(t[e])}else if(n===Map){(r=t.size)<16?Ad[bd++]=128|r:r<65536?(Ad[bd++]=222,Ad[bd++]=r>>8,Ad[bd++]=255&r):(Ad[bd++]=223,yd.setUint32(bd,r),bd+=4);for(let[e,r]of t)b(e),b(r)}else{for(let e=0,r=cd.length;e<r;e++){if(t instanceof ud[e]){let r=cd[e];if(r.write)return r.type&&(Ad[bd++]=212,Ad[bd++]=r.type,Ad[bd++]=0),void b(r.write.call(this,t));let n,o=Ad,i=yd,s=bd;Ad=null;try{n=r.pack.call(this,t,(t=>(Ad=o,o=null,bd+=t,bd>Id&&w(bd),{target:Ad,targetView:yd,position:bd-t})),b)}finally{o&&(Ad=o,yd=i,bd=s,Id=Ad.length-10)}return void(n&&(n.length+bd>Id&&w(n.length+bd),bd=_d(n,Ad,bd,r.type)))}}m(t,!t.hasOwnProperty)}}else Ad[bd++]=192;else if("boolean"===n)Ad[bd++]=t?195:194;else if("bigint"===n){if(t<BigInt(1)<<BigInt(63)&&t>=-(BigInt(1)<<BigInt(63)))Ad[bd++]=211,yd.setBigInt64(bd,t);else if(t<BigInt(1)<<BigInt(64)&&t>0)Ad[bd++]=207,yd.setBigUint64(bd,t);else{if(!this.largeBigIntToFloat)throw new RangeError(t+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");Ad[bd++]=203,yd.setFloat64(bd,Number(t))}bd+=8}else if("undefined"===n)this.encodeUndefinedAsNil?Ad[bd++]=192:(Ad[bd++]=212,Ad[bd++]=0,Ad[bd++]=0);else{if("function"!==n)throw new Error("Unknown type: "+n);b(this.writeFunction&&this.writeFunction())}},m=!1===this.useRecords?this.variableMapSize?t=>{let e,r=Object.keys(t),n=r.length;n<16?Ad[bd++]=128|n:n<65536?(Ad[bd++]=222,Ad[bd++]=n>>8,Ad[bd++]=255&n):(Ad[bd++]=223,yd.setUint32(bd,n),bd+=4);for(let o=0;o<n;o++)b(e=r[o]),b(t[e])}:(t,r)=>{Ad[bd++]=222;let n=bd-e;bd+=2;let o=0;for(let e in t)(r||t.hasOwnProperty(e))&&(b(e),b(t[e]),o++);Ad[n+++e]=o>>8,Ad[n+e]=255&o}:t=>{let e,r=Object.keys(t),i=o.transitions||(o.transitions=Object.create(null)),s=0;for(let t=0,n=r.length;t<n;t++){let n=r[t];e=i[n],e||(e=i[n]=Object.create(null),s++),i=e}let a=i[md];if(a)a>=96&&g?(Ad[bd++]=96+(31&(a-=96)),Ad[bd++]=a>>5):Ad[bd++]=a;else{a=o.nextId,a||(a=64),a<d&&this.shouldShareStructure&&!this.shouldShareStructure(r)?(a=o.nextOwnId,a<p||(a=d),o.nextOwnId=a+1):(a>=p&&(a=d),o.nextId=a+1);let t=r.highByte=a>=96&&g?a-96>>5:-1;i[md]=a,o[a-64]=r,a<d?(r.isShared=!0,o.sharedLength=a-63,n=!0,t>=0?(Ad[bd++]=96+(31&a),Ad[bd++]=t):Ad[bd++]=a):(t>=0?(Ad[bd++]=213,Ad[bd++]=114,Ad[bd++]=96+(31&a),Ad[bd++]=t):(Ad[bd++]=212,Ad[bd++]=114,Ad[bd++]=a),s&&(y+=I*s),A.length>=h&&(A.shift()[md]=0),A.push(i),b(r))}for(let e=0,n=r.length;e<n;e++)b(t[r[e]])},w=t=>{let r;if(t>16777216){if(t-e>pd)throw new Error("Packed buffer would be larger than maximum buffer size");r=Math.min(pd,4096*Math.round(Math.max((t-e)*(t>67108864?1.25:2),4194304)/4096))}else r=1+(Math.max(t-e<<2,Ad.length-1)>>12)<<12;let n=new gd(r);return yd=new DataView(n.buffer,0,r),Ad.copy?Ad.copy(n,0,e,t):n.set(Ad.slice(e,t)),bd-=e,e=0,Id=n.length-10,Ad=n}}useBuffer(t){Ad=t,yd=new DataView(Ad.buffer,Ad.byteOffset,Ad.byteLength),bd=0}}function Ed(t,e,r,n){let o=t.byteLength;if(o+1<256){var{target:i,position:s}=r(4+o);i[s++]=199,i[s++]=o+1}else if(o+1<65536){var{target:i,position:s}=r(5+o);i[s++]=200,i[s++]=o+1>>8,i[s++]=o+1&255}else{var{target:i,position:s,targetView:a}=r(7+o);i[s++]=201,a.setUint32(s,o+1),s+=4}i[s++]=116,i[s++]=e,i.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),s)}function Cd(t,e){let r=t.byteLength;var n,o;if(r<256){var{target:n,position:o}=e(r+2);n[o++]=196,n[o++]=r}else if(r<65536){var{target:n,position:o}=e(r+3);n[o++]=197,n[o++]=r>>8,n[o++]=255&r}else{var{target:n,position:o,targetView:i}=e(r+5);n[o++]=198,i.setUint32(o,r),o+=4}n.set(t,o)}function _d(t,e,r,n){let o=t.length;switch(o){case 1:e[r++]=212;break;case 2:e[r++]=213;break;case 4:e[r++]=214;break;case 8:e[r++]=215;break;case 16:e[r++]=216;break;default:o<256?(e[r++]=199,e[r++]=o):o<65536?(e[r++]=200,e[r++]=o>>8,e[r++]=255&o):(e[r++]=201,e[r++]=o>>24,e[r++]=o>>16&255,e[r++]=o>>8&255,e[r++]=255&o)}return e[r++]=n,e.set(t,r),r+=o}ud=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,_g],cd=[{pack(t,e,r){let n=t.getTime()/1e3;if((this.useTimestamp32||0===t.getMilliseconds())&&n>=0&&n<4294967296){let{target:t,targetView:r,position:o}=e(6);t[o++]=214,t[o++]=255,r.setUint32(o,n)}else if(n>0&&n<17179869184){let{target:r,targetView:o,position:i}=e(10);r[i++]=215,r[i++]=255,o.setUint32(i,4e6*t.getMilliseconds()+(n/1e3/4294967296>>0)),o.setUint32(i+4,n)}else if(isNaN(n)){if(this.onInvalidDate)return r(this.onInvalidDate());let{target:t,targetView:n,position:o}=e(3);t[o++]=212,t[o++]=255,t[o++]=255}else{let{target:r,targetView:o,position:i}=e(15);r[i++]=199,r[i++]=12,r[i++]=255,o.setUint32(i,1e6*t.getMilliseconds()),o.setBigInt64(i+4,BigInt(Math.floor(n)))}}},{pack(t,e,r){let n=Array.from(t),{target:o,position:i}=e(this.structuredClone?3:0);this.structuredClone&&(o[i++]=212,o[i++]=115,o[i++]=0),r(n)}},{pack(t,e,r){let{target:n,position:o}=e(this.structuredClone?3:0);this.structuredClone&&(n[o++]=212,n[o++]=101,n[o++]=0),r([t.name,t.message])}},{pack(t,e,r){let{target:n,position:o}=e(this.structuredClone?3:0);this.structuredClone&&(n[o++]=212,n[o++]=120,n[o++]=0),r([t.source,t.flags])}},{pack(t,e){this.structuredClone?Ed(t,16,e):Cd(hd?o.Buffer.from(t):new Uint8Array(t),e)}},{pack(t,e){let r=t.constructor;r!==dd&&this.structuredClone?Ed(t,Jg.indexOf(r.name),e):Cd(t,e)}},{pack(t,e){let{target:r,position:n}=e(1);r[n]=193}}];let vd=new wd({useRecords:!1});const Bd=vd.pack,Sd=vd.pack,kd=wd,{NEVER:xd,ALWAYS:Qd,DECIMAL_ROUND:Md,DECIMAL_FIT:Dd}=sd,Od=1e3;const Ud=function(t,e={}){if(!t||"object"!=typeof t)throw new Error("first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a promise");const r=new Sg(e);let n;const i=t=>{let e;n&&(t=o.Buffer.concat([n,t]),n=void 0);try{e=r.unpackMultiple(t)}catch(r){if(!r.incomplete)throw r;n=t.slice(r.lastPosition),e=r.values}return e};return"function"==typeof t[Symbol.iterator]?function*(){for(const e of t)yield*i(e)}():"function"==typeof t[Symbol.asyncIterator]?async function*(){for await(const e of t)yield*i(e)}():void 0},Ld=function(t,e={}){if(t&&"object"==typeof t){if("function"==typeof t[Symbol.iterator])return function*(t,e){const r=new wd(e);for(const e of t)yield r.pack(e)}(t,e);if("function"==typeof t.then||"function"==typeof t[Symbol.asyncIterator])return async function*(t,e){const r=new wd(e);for await(const e of t)yield r.pack(e)}(t,e);throw new Error("first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a Promise")}throw new Error("first argument must be an Iterable, Async Iterable, or a Promise for an Async Iterable")};var Td=e(Object.freeze({__proto__:null,useRecords:!1,mapsAsObjects:!0,Packr:wd,Encoder:kd,addExtension:function(t){if(t.Class){if(!t.pack&&!t.write)throw new Error("Extension has no pack or write function");if(t.pack&&!t.type)throw new Error("Extension has no type (numeric code to identify the extension)");ud.unshift(t.Class),cd.unshift(t)}!function(t){t.unpack?Eg[t.type]=t.unpack:Eg[t.type]=t}(t)},pack:Bd,encode:Sd,NEVER:xd,ALWAYS:Qd,DECIMAL_ROUND:Md,DECIMAL_FIT:Dd,REUSE_BUFFER_MODE:Od,Unpackr:Sg,Decoder:ed,C1:vg,unpack:nd,unpackMultiple:od,decode:id,FLOAT32_OPTIONS:sd,clearSource:Zg,roundFloat32:function(t){ld[0]=t;let e=td[(127&fd[3])<<1|fd[2]>>7];return(e*t+(t>0?.5:-.5)>>0)/e},isNativeAccelerationEnabled:!1,decodeIter:Ud,encodeIter:Ld}));const Pd=hg,Fd=ng,{Packr:$d,pack:Nd,unpack:Rd}=Td,Yd="msgpackr::structs";var jd=class{constructor(t,e){this.repo=Pd.isRepo(t)?t:new Pd(t),this._strategy=e||(()=>{}),this._stores=[],this._loaded=!1,this._mutex=Promise.resolve(0),this._tap=null,this._packr=null}async _waitLock(){const t=this._mutex;let e,r;const n=new Promise(((t,n)=>{e=t,r=n}));this._mutex=n;let o=null;try{throw new Error("MutexTimeout")}catch(t){o=t}const i=setTimeout((()=>{console.error("MutexTimeout",o.stack),r(o)}),5e3);return await t,()=>{clearTimeout(i),e()}}register(t,e,r,n,o){if(this._loaded)throw new Error("register() must be invoked before load()");return"string"!=typeof t?this.register(t.name,t.initialValue,t.filter,t.reducer,t.trap):"function"==typeof e?this.register(t,void 0,e,r):void this._stores.push({name:t,validator:r,reducer:n,trap:o,version:0,head:void 0,value:e,initialValue:e,observers:new Set})}async load(){const t=await this._waitLock();if(this._loaded)throw new Error("Store already loaded");let e=await this.repo.readReg(Yd);e=e?Rd(e):[],this._packr=new $d({structures:e,saveStructures:()=>this.repo.writeReg(Yd,Nd(e)).catch(console.error.bind(null,"Failed saving msgpackr:structs"))});for(const t of this._stores){const e=await this.repo.readReg(`HEADS/${t.name}`);if(e){t.head=e,t.version=this._decodeValue(await this.repo.readReg(`VER/${t.name}`)),t.value=this._decodeValue(await this.repo.readReg(`STATES/${t.name}`));for(const e of t.observers)e(t.value)}}this._loaded=!0,t()}async dispatch(t,e){const r=await this._waitLock();try{const n=await this._dispatch(t,e);return r(),n}catch(t){throw r(),t}}async _dispatch(t,e=!1){if(!this._loaded)throw Error("Store not ready, call load()");let r=null;if((t=Fd.from(t)).first.isGenesis){const e=t.first.key;r=await this.repo.tailOf(e)?await this.repo.loadHead(e):new Fd}else{const e=await this.repo._traceOwnerOf(t.first.parentSig);if(!e)throw new Error("Unknown target branch");r=await this.repo.loadHead(e)}if(!r.clone().merge(t))return[];const n=r.length?r._compare(t):t.length;if(n<1)return[];const o=new Set,i=this.state;let s=null;const a=t.get(-n);if(!a.isGenesis&&!r.length){if(e)throw new Error("NoCommonParent");return[]}if(!a.isGenesis&&r.length){const t=r.blocks();let e=t.next();for(;!s&&!e.done;)e.value.sig.equals(a.parentSig)&&(s=e.value),e=t.next();if(!s)throw new Error("ParentNotFound")}for(const r of t.blocks(-n)){const t=[];for(const n of this._stores){if("function"!=typeof n.validator)continue;let o=n.validator({block:r,parentBlock:s,state:n.value,root:i});if(o){if(!0===o);else if(e)throw"string"==typeof o&&(o=new Error(`InvalidBlock: ${o}`)),o}else t.push(n)}if(!t.length)break;const n=await this._mutateState(r,s,!1,e);for(const t of n)o.add(t);s=r}return this._notifyObservers(o),Array.from(o)}async _mutateState(t,e,r=!1,n=!1){const o=[],i=[];for(const r of this._stores){if("function"!=typeof r.validator)continue;if("function"!=typeof r.reducer)continue;const n=this.state;r.validator({block:t,parentBlock:e,state:r.value,root:n})||i.push(r)}if(i.length){const e=await this.repo.merge(t,this._strategy);if(!r&&!e)return n&&console.warn("RejectedByBucket: MergeStrategy failed"),o}const s=[],a=(t,e)=>s.push([t,e]);for(const r of i){const n=this.state,i=r.reducer({block:t,parentBlock:e,state:r.value,root:n,signal:a});void 0===i&&console.warn("Reducer returned `undefined` state."),await this._commitHead(r,t.sig,i),o.push(r.name)}for(const[r,n]of s)for(const i of this._stores){if("function"!=typeof i.trap)continue;const s=this.state,a=i.trap({code:r,payload:n,block:t,parentBlock:e,state:i.value,root:s});void 0!==a&&(await this._commitHead(i,t.sig,a),o.push(i.name))}if("function"==typeof this._tap)for(const[t,e]of s)this._tap(t,e);return o}_notifyObservers(t){for(const e of t){const t=this._stores.find((t=>t.name===e));for(const e of t.observers)e(t.value)}}async _commitHead(t,e,r){await this.repo.writeReg(`STATES/${t.name}`,this._encodeValue(r)),await this.repo.writeReg(`HEADS/${t.name}`,e),await this.repo.writeReg(`VER/${t.name}`,this._encodeValue(t.version++)),t.value=r,t.head=e}get state(){return this._stores.reduce(((t,e)=>(t[e.name]=e.value,t)),{})}async reload(){const t=await this._waitLock();try{const e=[],r=await this.repo.listHeads();for(const t of this._stores){t.value=t.initialValue,t.version=0,t.head=void 0;for(const e of t.observers)e(t.value)}for(const{value:t}of r){let r=!1;for(;!r;){const n=await this.repo.loadFeed(t);let o=null;for(const t of n.blocks()){const r=await this._mutateState(t,o,!0);for(const t of r)~e.indexOf(t)||e.push(t);o=t}r=!0}}return t(),this._notifyObservers(e),e}catch(e){throw t(),e}}on(t,e){const r=this._stores.find((e=>e.name===t));if(!r)throw new Error(`No such store: "${t}"`);if("function"!=typeof e)throw new Error("observer must be a function");return r.observers.add(e),e(r.value),()=>r.observers.delete(e)}hotswap(t){const e=this.repo;this.repo=t instanceof Pd?t:new Pd(t);return[this.reload(),e._db.clear()]}_decodeValue(t){return t?this._packr.unpack(t):t}_encodeValue(t){return this._packr.pack(t)}},Kd={exports:{}},Hd={exports:{}},Gd=1e3,qd=60*Gd,Vd=60*qd,zd=24*Vd,Wd=7*zd,Jd=365.25*zd,Xd=function(t,e){e=e||{};var r=typeof t;if("string"===r&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var r=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*Jd;case"weeks":case"week":case"w":return r*Wd;case"days":case"day":case"d":return r*zd;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Vd;case"minutes":case"minute":case"mins":case"min":case"m":return r*qd;case"seconds":case"second":case"secs":case"sec":case"s":return r*Gd;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}(t);if("number"===r&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=zd)return Zd(t,e,zd,"day");if(e>=Vd)return Zd(t,e,Vd,"hour");if(e>=qd)return Zd(t,e,qd,"minute");if(e>=Gd)return Zd(t,e,Gd,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=zd)return Math.round(t/zd)+"d";if(e>=Vd)return Math.round(t/Vd)+"h";if(e>=qd)return Math.round(t/qd)+"m";if(e>=Gd)return Math.round(t/Gd)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Zd(t,e,r,n){var o=e>=1.5*r;return Math.round(t/r)+" "+n+(o?"s":"")}var tp=function(t){function e(t){let n,o,i,s=null;function a(...t){if(!a.enabled)return;const r=a,o=Number(new Date),i=o-(n||o);r.diff=i,r.prev=n,r.curr=o,n=o,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let s=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((n,o)=>{if("%%"===n)return"%";s++;const i=e.formatters[o];if("function"==typeof i){const e=t[s];n=i.call(r,e),t.splice(s,1),s--}return n})),e.formatArgs.call(r,t);(r.log||e.log).apply(r,t)}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=r,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(o!==e.namespaces&&(o=e.namespaces,i=e.enabled(t)),i),set:t=>{s=t}}),"function"==typeof e.init&&e.init(a),a}function r(t,r){const n=e(this.namespace+(void 0===r?":":r)+t);return n.log=this.log,n}function n(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},e.disable=function(){const t=[...e.names.map(n),...e.skips.map(n).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let r;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const n=("string"==typeof t?t:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(t=n[r].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let r,n;for(r=0,n=e.skips.length;r<n;r++)if(e.skips[r].test(t))return!1;for(r=0,n=e.names.length;r<n;r++)if(e.names[r].test(t))return!0;return!1},e.humanize=Xd,e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((r=>{e[r]=t[r]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let r=0;for(let e=0;e<t.length;e++)r=(r<<5)-r+t.charCodeAt(e),r|=0;return e.colors[Math.abs(r)%e.colors.length]},e.enable(e.load()),e};!function(t,e){e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;e.splice(1,0,r,"color: inherit");let n=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(n++,"%c"===t&&(o=n))})),e.splice(o,0,r)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}!t&&void 0!==q&&"env"in q&&(t=q.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=tp(e);const{formatters:r}=t.exports;r.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}(Hd,Hd.exports);var ep=Hd.exports;const{crypto_box_seal:rp,crypto_box_seal_open:np,crypto_box_keypair:op,crypto_box_SEALBYTES:ip,crypto_box_PUBLICKEYBYTES:sp,crypto_box_SECRETKEYBYTES:ap}=Hh,cp=Hd.exports,{pack:up,unpack:lp}=Td,fp=o.Buffer.from("💔"),hp=o.Buffer.from("😶");function gp(t,e=0){return lp(t)}cp.formatters.h=t=>o.Buffer.isBuffer(t)&&t?.length?t.slice(0,Math.min(8,t.length)).toString("hex"):t,cp.formatters.H=t=>o.Buffer.isBuffer(t)&&t?.length?t.toString("hex"):t;var dp={KEY_SK:"reg/sk",KEY_BOX_LIKES_PK:"reg/likes_pk",KEY_BOX_LIKES_SK:"reg/likes_sk",TYPE_PROFILE:"profile",TYPE_VIBE:"vibe",TYPE_VIBE_RESP:"vibe-response",TYPE_MESSAGE:"message",TYPE_BYE:"bye",TYPE_BYE_RESP:"byebye",EV_CHAT_END:60,VIBE_REJECTED:fp,PASS_TURN:hp,PEACE:0,LOVE:2,UNDERSTANDING:1,G_M:0,G_F:1,G_NB:2,G_R:3,GEO_BITS:17,encodeBlock:function(t,e,r){return up({...r,type:t,seq:e,date:(new Date).getTime()})},decodeBlock:gp,typeOfBlock:function(t){return gp(t).type},fixJsonBuffers:function t(e){if("object"==typeof e&&"Buffer"===e.type)return o.Buffer.from(e.data);if(Array.isArray(e))return e.map(t);if("object"==typeof e)for(const r in e)e[r]=t(e[r]);return e},toBuffer:function(t){return t?o.Buffer.isBuffer(t)?t:"string"==typeof t&&/^[0-9A-f]+$/.test(t)?o.Buffer.from(t,"hex"):"string"==typeof t?o.Buffer.from(t):"object"==typeof t&&"Buffer"===t.type?o.Buffer.from(t.data):t:t},boxPair:function(){const t=o.Buffer.allocUnsafe(sp),e=o.Buffer.allocUnsafe(ap);return op(t,e),{pk:t,sk:e}},seal:function(t,e){const r=o.Buffer.allocUnsafe(ip+t.length);return rp(r,t,e),r},unseal:function(t,e,r){const n=o.Buffer.allocUnsafe(t.length-ip);if(!np(n,t,r,e))throw new Error("DecryptionFailedError");return n},bufferReplacer:function(t,e){return e&&"object"==typeof e&&"Buffer"===e.type?o.Buffer.from(e.data):e}};const{typeOfBlock:pp,TYPE_PROFILE:Ap,TYPE_VIBE:yp,TYPE_VIBE_RESP:Ip,TYPE_MESSAGE:bp,TYPE_BYE:mp,TYPE_BYE_RESP:wp,VIBE_REJECTED:Ep,PASS_TURN:Cp,PEACE:_p,LOVE:vp,UNDERSTANDING:Bp,decodeBlock:Sp}=dp;function kp(t,e=!0){switch(pp(t.body)){case Ap:return"ᚹ";case yp:return"ᚲ";case Ip:return Ep.equals(Sp(t.body).box)?"ᛟ":"ᛃ";case bp:return Cp.equals(Sp(t.body).content)?e?"ᚦ":"ᚧ":e?"ᛖ":"ᛗ";case mp:case wp:{const t=[];return t[_p]="ᛣ",t[vp]="ᛜ",t[Bp]="ᛯ",e?"ᛒ":"ᛔ"}}}function xp(t){const e=[[/ᚲᛃ/,"ᛄ"],[/(ᚦᚧᚦ|ᚧᚦᚧ)/,"ᚷ"],[/([ᛄᚴᚵᛆᚠᚯ])ᛖᛗ/,"$1ᚴ"],[/([ᛰᛐᛑᛅ])ᛗᛖ/,"$1ᛐ"],[/ᚴᚴ/,"ᚵ"],[/ᛐᛐ/,"ᛑ"],[/ᛒᛔ/,"ᛸ"],[/ᛔᛒ/,"ᛷ"],[/ᛖᚧ/,"ᛆ"],[/(ᚦᚧ|ᚧᚦ)/,"ᚺ"],[/ᚴᛆ/,"ᚠ"],[/ᚴᚦᛗ/,"ᛅ"],[/ᚵᚦᛗ/,"ᚯ"],[/ᚴᚺ/,"ᛰ"],[/ᛆᚦ/,"ᚢ"],[/ᛆᛆᚦᛷ/,"ᚤᛷ"],[/ᚴᛖᛷ/,"ᛈ"],[/ᚠᚠᛷ/,"ᚸᛷ"]];let r=null;for(;r!==t;){r=t;for(const[r,n]of e)t=t.replace(r,n)}return t}var Qp={feedToGraph:function(t){let e="",r=t.first.isGenesis?t.first.key:null;for(const n of t.blocks()){pp(n.body)!==yp||r||(r=n.key);const t=r&&n.key.equals(r);e+=kp(n,t)}return e},scoreGraph:function(t){if(t=xp(t),/ᚷ/.test(t))return[0,0];const e={"ᛄ":[0,0],"ᛖ":[1,0],"ᛗ":[0,1],"ᛸ":[5,3],"ᛷ":[2,4],"ᚴ":[2,1],"ᛐ":[0,2],"ᚵ":[4,3],"ᛑ":[2,4],"ᛆ":[-1,2],"ᚠ":[-1,3],"ᛅ":[2,4],"ᚯ":[2,5],"ᛰ":[1,3],"ᛈ":[-1,0]};let r=0,n=0;for(const o of t.split(""))e[o]?(r+=e[o][0],n+=e[o][1]):console.warn("Unscored glyph: ",o);return[r,n]},blockToGlyph:kp,rewrite:xp};const{TYPE_PROFILE:Mp,EV_CHAT_END:Dp,decodeBlock:Op}=dp,{scoreGraph:Up}=Qp,Lp=18e5,Tp=(t=null)=>({name:null,picture:null,pk:t,tagline:null,date:null,sex:2,sig:null,expiresAt:0,state:"active",score:0});function Pp(t){if(!t.picture)return"Profile Picture missing";if(o.Buffer.isBuffer(t.picture)){if(t.picture.length>15e3)return"Picture should be less than 15kB"}else if("string"!=typeof t.picture||t.picture.length>10)return"Picture should be an emoji";return Fp(t.tagline)?"URL in tagline not permitted":Fp(t.name)?"Links in name is not permitted":t.name.match(/^\s/)?"Name must contain only letters or numbers":"number"!=typeof t.age?"Age must be a number":t.age<18?"Kids not allowed into bars":!~[0,1,2].indexOf(t.sex)&&"Sex should be 0: female, 1: male, 2: other"}function Fp(t){return"string"==typeof t&&!!t.match("://")}Kd.exports=()=>({name:"peers",initialValue:{},filter:({block:t,state:e})=>{const r=Op(t.body);return r.type!==Mp||Pp(r)},reducer:({block:t,state:e,schedule:r})=>{const n=t.key.toString("hex");return e[n]=e[n]||Tp(n),Object.assign(e[n],Op(t.body,1)),e[n].pk=t.key,e[n].sig=t.sig,e[n].expiresAt=e[n].date+Lp,r("peer",t.key,e[n].expiresAt),e},trap({code:t,payload:e,root:r,state:n}){if(t===Dp){const t=e.toString("hex"),o=r.chats.chats[t],i=Up(o.graph);n[o.a.toString("hex")].score+=i[0],n[o.b.toString("hex")].score+=i[1]}}}),Kd.exports.ProfileCtrl=function(t){let e=null;return{name:"peer",initialValue:{...Tp()},filter({block:r}){if(e=e||t(),!e)return"Cannot process block without knowing own identity";if(!r.key.equals(e))return!0;const n=Op(r.body);return n.type!==Mp||Pp(n)},reducer({block:t,state:e}){const r=Op(t.body);return Object.assign(e,r),e.pk=t.key,e.sig=t.sig,e.expiresAt=e.date+Lp,e},trap({code:t,payload:r,root:n,state:o}){if(t===Dp){const t=r.toString("hex"),i=n.chats.chats[t],s=e.equals(i.a);if(!s&&!e.equals(i.b))return;const a=Up(i.graph);o.score+=a[s?0:1]}}}};var $p=Object.freeze({profile_timeout:108e5,vibe_timeout:3e5,vibe_response_timeout:18e4,chat_timeout:18e5,now:Date.now});const{TYPE_VIBE:Np,TYPE_VIBE_RESP:Rp,TYPE_PROFILE:Yp,TYPE_BYE_RESP:jp,EV_CHAT_END:Kp,VIBE_REJECTED:Hp,decodeBlock:Gp,unseal:qp}=dp,Vp=Hd.exports("picochat:slices:vibes"),{vibe_timeout:zp,vibe_response_timeout:Wp}=$p;const Jp=()=>({chatId:null,response:null,updatedAt:0,a:null,b:null,remoteBox:null});var Xp=class{constructor(t=zp){this._sk=null,this._pk=null,this._reduceHasRun=!1,this.ttl=t,this.reducer=this.reducer.bind(this)}setKeys(t,{sk:e,pk:r}){if(this._sk)throw new Error("VibeBox secret has already been set");if(this._reduceHasRun)throw new Error("Reducer has already run without box secret");this._sk=e,this._pk=r,this._peerId=t}get name(){return"vibes"}get initialValue(){return{seen:{},matches:{},own:[]}}filter({block:t,parentBlock:e,state:r}){const n=Gp(t.body),{type:o}=n;if(o!==Np&&o!==Rp)return!0;const i=e&&Gp(e.body).type;if(o===Np){if(i!==Yp&&i!==jp)return`InvalidParent: ${i}`;const e=t.key.toString("hex");if(n.date>(new Date).getTime())return"Vibe from the future";const o=r.seen[e];if(o){if(r.matches[o.toString("hex")].expiresAt>=Date.now())return"Only 1 active vibe allowed"}}return o===Rp&&i!==Np?`InvalidParent: ${i}`:(Vp("Accepting Vibe %h",t.sig),!1)}reducer({block:t,state:e,parentBlock:r,root:n,schedule:o}){const i=Gp(t.body,1),{type:s}=i,a=s===Np?t.sig:t.parentSig,c=a.toString("hex"),u=Hp.equals(i.box);if(s===Np){if(Vp("%s reducing vibe: %o %h",n.peer.name,!!e.matches[c],t.sig),e.matches[c])throw new Error("InternalError: Vibe already registered");e.seen[t.key.toString("hex")]=a;const r=e.matches[c]=Jp();r.chatId=a,r.a=t.key,r.updatedAt=i.date,r.createdAt=i.date,r.expiresAt=i.date+zp,r.state="wait"}else{const r=e.matches[c];if(!r)throw new Error("InternalError: MatchNotFound");r.response=t.sig,r.b=t.key,r.updatedAt=i.date,r.expiresAt=r.createdAt+Wp,r.state=u?"rejected":"match"}const l=n.peer.pk,f=e.matches[c];s===Np&&l.equals(t.key)&&e.own.push(a);let h=null;if(!u&&!l.equals(t.key)&&this._sk)try{h=qp(i.box,this._sk,this._pk)}catch(t){if("DecryptionFailedError"!==t.message)throw t}return h&&(e.own.find((t=>t.equals(a)))||e.own.push(a),f.remoteBox=h),this._reduceHasRun=!0,o("chat",f.chatId,f.expiresAt),e}trap({code:t,payload:e,root:r,state:n}){if(t===Kp){{const t=e.toString("hex"),o=r.chats.chats[t];delete n.seen[o.a.toString("hex")],Vp("%s Peer Unseen %h => %h",r.peer.name,o.a.toString("hex"),e)}return n}}};const Zp=Hd.exports("picochat:slice:chat"),{TYPE_VIBE_RESP:tA,TYPE_MESSAGE:eA,TYPE_BYE:rA,TYPE_BYE_RESP:nA,EV_CHAT_END:oA,PASS_TURN:iA,decodeBlock:sA}=dp,{blockToGlyph:aA}=Qp;var cA=function(t={}){const{ttl:e,blockReward:r,health:n,regenerate:o}={ttl:18e4,blockReward:6e4,health:3,regenerate:.3,...t},i=()=>(new Date).getTime();return{name:"chats",initialValue:{chats:{},heads:{},own:[],stats:{}},filter({block:t,parentBlock:e,state:r,root:n}){const o=sA(t.body),{type:s}=o;if(!~[eA,rA,nA].indexOf(s))return!0;const a=e&&sA(e.body).type;if(Zp("[%s] FilterOP: %s %h <-- %s %h",n.peer.name,a,e.sig,s,t.sig),s===eA&&a!==eA&&a!==tA||s===rA&&a!==eA||s===nA&&a!==rA)return`Invalid parent type: ${a}`;const c=t.key;if(c.equals(e.key))return"MonologueNotAllowed";if(a===tA){const t=e.parentSig,r=n.vibes.matches[t.toString("hex")];if(!r)return!0;if("match"!==r.state)return"MessagingNotAllowed";if(![r.a,r.b].find((t=>c.equals(t))))return"NotYourConversation";if(r.expiresAt<i())return"ConversationTimeout"}else{const e=r.heads[t.parentSig.toString("hex")];if(!e)return"ConversationNotFound";const n=r.chats[e.toString("hex")],o=n.mLength%2?n.b:n.a;if(!c.equals(o))return"NotYourConversation";if(n.expiresAt<i())return"ConversationTimeout";if(s!==nA&&"active"!==n.state)return"ConversationEnded";if(s===nA&&"finalizing"!==n.state)return"InvalidState"}return!1},reducer({block:t,parentBlock:i,root:s,state:a,schedule:c,signal:u}){const l=sA(t.body),{type:f}=l,h=sA(i.body).type,g=s.peer.pk,d=t.key;let p=null;p=h===tA?i.parentSig:a.heads[t.parentSig.toString("hex")];const A=p.toString("hex");if(h===tA){const t=s.vibes.matches[A],e=(t=>({id:t,head:null,messages:[],expiresAt:0,updatedAt:0,state:"active",a:null,b:null,hp:n,aEnd:-1,bEnd:-1,graph:"ᚲᛃ"}))(p);e.a=t.a,e.b=t.b,e.remoteBox=t.remoteBox,e.createdAt=t.createdAt,e.mLength=0,a.chats[A]=e}const y=a.chats[A];y.updatedAt=l.date,y.mLength++,y.expiresAt=y.createdAt+e+y.mLength*r,y.graph+=aA(t,t.key.equals(y.a));const I=t.key.toString("hex");let b=a.stats[I];if(b||(b=a.stats[I]=(t=>({peerId:t,lastSeen:0,nMessages:0,nExhausted:0,nPassed:0,nEnded:0,nStarted:0,blocks:0,blockSize:0,hpRegenerated:0}))(t.key),b.nStarted++,Zp("[%s] Initating new stats for %h",s.peer.name,t.key)),b.lastSeen=Math.max(b.lastSeen,l.date),b.nMessages++,b.blocks++,b.blockSize+=t.body.length,eA===f){const e=iA.equals(l.content);if(e&&b.nPassed++,e&&--y.hp<1?(y.state="exhausted",b.nExhausted++):e||(y.hp=Math.min(o+y.hp,n),b.hpRegenerated+=o),y.own=!![y.a,y.b].find((t=>g.equals(t))),y.own){const r=g.equals(d);y.messages.push({type:r?"sent":"received",date:l.date,content:r?null:l.content,pass:e,sig:t.sig})}y.own&&!a.own.find((t=>t.equals(p)))&&a.own.push(p)}else y.state=rA===f?"finalizing":"end",y.a.equals(d)?y.aEnd=l.gesture:y.bEnd=l.gesture,Zp("ENDING: ",s.peer.name,f,y.state,y.aEnd,y.bEnd);if("end"===y.state){const t=a.stats[y.b.toString("hex")],e=a.stats[y.a.toString("hex")];t.nEnded++,e.nEnded++,u(oA,p)}return Zp("[%s] Conversation(%h) state: %s mLength: %d, head: %h => %h",s.peer.name,p,y.state,y.mLength,t.parentSig,t.sig),delete a.heads[t.parentSig.toString("hex")],a.heads[t.sig.toString("hex")]=p,y.head=t.sig,c("chat",y.id,y.expiresAt),a}}};const uA=Hd.exports("picochat:mod:chat"),{TYPE_MESSAGE:lA,TYPE_BYE:fA,TYPE_BYE_RESP:hA,PASS_TURN:gA,PEACE:dA,LOVE:pA,UNDERSTANDING:AA,seal:yA,unseal:IA,toBuffer:bA}=dp,{feedToGraph:mA}=Qp,{combine:wA,mute:EA,init:CA,gate:_A}=n.exports;var vA={exports:{}};!function(t){const e=Hd.exports("pico-net"),r=Symbol.for("pico:plug");function n(n={}){const a=n?.timeout||3e4;let c=n?.id,l=!1,[f,h]=[!1,!1];const g=v(!0),d=v(!1),[p,A,y]=u(),[I,b,m]=u(),w=[!1,!1],[E,C]=u(),_=new Set;return[g,d];function v(t){const n={get name(){return`${c||"|"} ${t?"--\x3e":"<--"} `},get id(){return c},set id(t){if(c)throw new Error("ID has already been set");c=t},get onmessage(){return w[t?0:1]=!0,t?p:I},get opened(){return l?Promise.reject(new Error("Disconnected")):(w[t?1:0]=!0,(t?I:p).then((t=>!!t)))},get closed(){return E},set onmessage(e){if("function"!=typeof e)throw new Error("expected onmessage to be a function");if(t?f:h)throw new Error("Handler has already been set");t?(A(e),f=!0):(b(e),h=!0)},async postMessage(e,r){if(l)throw new Error("Disconnected");if(!n.isActive)throw new Error("Void");w[t?1:0]=!0;const o=await(t?I:p);return B(t,(t=>o(t)),e,r)},get isActive(){return(t?h:f)&&!l},get isClosed(){return l},open:t=>i(t)?s(n,t):(n.onmessage=t,n.opened.then((()=>[n.postMessage,n]))),close(r=null){!function(t,r=null){if(l)return!0;e("PipeClosed by: %s cause: %s pending: %d",t?"A":"B",r?.message,_.size),l=!0;for(const t of Array.from(_))_.delete(t),t.abort(r||new Error("Disconnected"));C(r),w[0]&&y(r||new Error("Disconnected"));w[1]&&m(r||new Error("Disconnected"))}(t,r)},get other(){return t?d:g}};return n[r]=!0,n}async function B(e,r,n,i){if(l)throw new Error("Disconnected");if("function"==typeof i)throw new Error("Callback API has been deprecated");const s=1&i||i,c=t.exports.V&&`${(e?g:d).name} = ${n.toString(o.Buffer.isBuffer(n)&&"hex").slice(0,14)}`,[f,h,p]=function(t,e=!1){const[r,n,o]=u(e),i=setTimeout(o.bind(null,new Error("Timeout")),t);return[r,(t,e)=>{clearTimeout(i),n(t,e)},function(t){clearTimeout(i),o(t||new Error("Aborted"))}]}(a,c);h.abort=p,s&&_.add(h),_.delete(r);const A=s?B.bind(null,!e,h):null;try{r([n,A,e?d:g]),s||h([])}catch(t){p(t),console.warn("Trap A: ",t.message)}return f.catch((t=>{throw console.warn("Trap B: ",t.message),t}))}}function i(t){return!(!t||!t[r])}function s(t,e){if(!i(t)||!i(e))throw new Error("Expected two pipe-ends");function r(t,e){if(!Array.isArray(e))throw new Error("DesignFlaw");const[n,o]=e;let i=t(n,!!o);return o&&(i=i.then(r.bind(null,o))),i.catch((t=>{console.warn("Trap S: ",t.message)}))}return t.onmessage=t=>r(e.postMessage,t),e.onmessage=e=>r(t.postMessage,e),t.closed.then(e.close).catch(e.close),e.closed.then(t.close).catch(t.close),t.close}let a=0;const c=[];function u(e=!1){if(e)return function(e="_"){const r=a++;let n=null;try{throw new Error}catch(t){n=t.stack}console.debug("[UNP]",r,e,"Promise Created\n",t.exports.V>1&&n);const[o,i,s]=u();return c[r]=s,[o.then((t=>(l("resolved",t),t))).catch((t=>{throw l("rejected",void 0,t),t})),t=>{l("set",t),i(t)},t=>{l("abort",void 0,t),s(t)}];function l(n,o,i){c[r]=void 0;const s=c.map(((t,e)=>t&&e)).filter((t=>t));if("set"!==n)console.debug("[UNP]",r,e,n,`P(${s.join(",")})`,i?i.message:Array.isArray(o)?`Arr[${o.length}]: ${o[0]||""}`:o);else{let n=null;try{throw new Error}catch(t){n=t.stack}t.exports.V>1&&console.debug("[UNP]",r,e,"SET at: \n",n)}}}(e);let r,n;return[new Promise(((t,e)=>{r=t,n=e})),r,n]}const l=3e4;function f(t,e){const r=(t,r,o,i)=>t(e.encode(r),o&&n.bind(null,o,i)),n=(t,n,o,i)=>t(e.decode(n),o&&r.bind(null,o,i));return e=>{const o=t(n.bind(null,e));return r.bind(null,o)}}t.exports=class{constructor(t,e){this._nodes=new Set,this._tap=null,"function"==typeof t&&(this._tap=t),"function"==typeof e&&(this._afterRemove=e)}createWire(t,e={}){const[r,o]=n(e);r.onmessage=([t,e])=>{if(!this._tap)return this.broadcast(t,e,r).catch((t=>console.error("_broadcast failed:",t)));this._tap(r,t,e).catch((t=>console.error("_tap failed:",t)))};const i=setTimeout((()=>r.close(new Error("NodeTimedout"))),3e4);return r.opened.then((e=>{if(!e)return console.warn("wire.opened resolved false?",e);clearTimeout(i),this._nodes.add(r),"function"==typeof t&&t(r)})).catch((t=>this.disconnect(r,t))),r.closed.then((t=>this.disconnect(r,t))),o}disconnect(t,e){if(!t)return!1;if(this._nodes.delete(t))return"function"==typeof this._afterRemove?this._afterRemove(t,e):e&&console.warn("NodeDisconnected",e),!0;for(const t of this._nodes)if(t.id===t&&this._nodes.delete(t))return"function"==typeof this._afterRemove?this._afterRemove(t,e):e&&console.warn("NodeDisconnected",e),!0}get count(){return this._nodes.size}async*survey(t,e,r){let n=!1;const o=new Set;for(const n of this._filterNodes(r)){const r=n.postMessage(t,e);o.add(r),r.catch((t=>{o.delete(r),console.warn("Survey node ignored:",t)}))}for(;!n&&o.size;){const t=await Promise.race(Array.from(o).map((t=>t.then((e=>({val:e,p:t}))))));if(!t)continue;o.delete(t.p);const e=()=>{n=!0};yield[...t.val,e]}}async broadcast(t,e,r){const n=this.survey(t,e,r),o=[];let i=await n.next();for(;!i.done;)o.push(i.value),i=await n.next();return o}_filterNodes(t){return t?(Array.isArray(t)||(t=[t]),Array.from(this._nodes).filter((e=>e.isActive&&!t.find((t=>i(t)?t===e:t===e.id))))):this._nodes}},t.exports.V=0,t.exports.picoWire=n,t.exports.simpleWire=function(t,e,r){const[o,i]=n();return o.closed.then(r).catch(r),o.opened.then(e).catch(e),o.onmessage=t,i},t.exports.streamWire=function(t,e){const r=new Map;let n=1,i=o.Buffer.alloc(256);const s=t(f.bind(null,0));e.on("data",u),e.once("close",c),e.once("error",c);const a=t=>t?e.end():e.destroy(t);return a;function c(t){e.off("data",u),e.off("error",c),e.off("close",c),s.close(t)}function u(t){const e=t.readUInt16BE(0),n=t.readUInt16BE(2);if(r.has(e)){const{replyTo:o,timer:i}=r.get(e);r.delete(e),clearTimeout(i),o(t.slice(6),((t,e)=>f(n,t,e)))}else 0===e?s(t.slice(6),((t,e)=>f(n,t,e))):console.warn("WARN: streamWire Message dropped",t[6])}function f(t,s,c){let u=0;"function"==typeof c&&(u=n++,function(t,e){const n=setTimeout((()=>{r.has(t)&&(r.delete(t),a(new Error("ResponseTimeout")))}),l);r.set(t,{replyTo:e,timer:n})}(u,c));const f=s.length+6;if(f>i.length){if(f>=262144)throw new Error("Message exceeds MTU");i=o.Buffer.alloc(f)}i.writeUInt16BE(t),i.writeUInt16BE(u,2),i.writeUInt16BE(f,4),s.copy(i,6),e.write(i.slice(0,f))}},t.exports.hyperWire=function(t,e,r,n=125){if(!i(t))throw new Error("Wire end expected");const s=new Map;let a=1;const c=e.open(r,{onextension:function(e,r){if(e!==n)return console.warn("Message dropped! multiple extensions on this channel??",n,e);const o=r.readUInt16BE(0),i=r.readUInt16BE(2),a=r[4],c=!!(1&a);if(s.has(o)){const{replyTo:t,timer:e}=s.get(o);s.delete(o),clearTimeout(e),t(r.slice(5),a).then(c&&f.bind(null,i)).catch((t=>console.error("Hyperwire writeerror",t)))}else 0===o?t.postMessage(r.slice(5),a).then(c&&f.bind(null,i)).catch((t=>console.error("Hyperwire writeerror",t))):console.warn("Hyperwire message dropped! unknown port",o,i)},onclose:t.close}),u=()=>{c.close()};return t.onmessage=t=>f(0,t),t.closed.then((()=>!c.closed&&u())).catch((t=>e.delete(t))),u;function f(t,e){const[r,i]=e;if(!o.Buffer.isBuffer(r))throw new Error("Binary message expected");let f=0,h=0;"function"==typeof i&&(f=a++,function(t,e){const r=setTimeout((()=>{s.has(t)&&(s.delete(t),u())}),l);s.set(t,{replyTo:e,timer:r})}(f,i),h|=1);const g=o.Buffer.alloc(r.length+5);g.writeUInt16BE(t),g.writeUInt16BE(f,2),g[4]=h,r.copy(g,5),c.extension(n,g)}},t.exports.spliceWires=s,t.exports.jsonTransformer=function(t){return f(t,{encode:t=>o.Buffer.from(JSON.stringify(t)),decode:t=>JSON.parse(t)})},t.exports.encodingTransformer=f,t.exports.messageIterator=async function*(t){const e=[],r=[];let n=!1;e.push(new Promise((t=>r.push(t))));const o=t(((t,i)=>{e.push(new Promise((t=>r.push(t)))),r.shift()([t,i,function(){o.close(),n=!0}])}));for(;!n;)yield await e.shift()},t.exports.unpromise=u}(vA);const BA=vA.exports,SA=ng,kA=Hd.exports("pico-rpc"),{bufferReplacer:xA}=dp,QA=80,MA=201,DA=203;function OA(t){switch(t){case 1:return"K_BLOCKS";case 2:return"K_REQUEST_BLOCK";case 4:return"K_REQUEST_HEAD";case 5:return"K_REQUEST_TAIL";case QA:return"K_OK";case 81:return"K_ERR";case 82:return"K_SIG";case MA:return"K_JSON";case 202:return"K_ERR_MSG";case DA:return"K_QUERY";case 40:return"K_NODE_ID";default:return`UNKNOWN_TYPE:${t}`}}function UA(t,e){let r=null;switch(t){case 1:if(!e)throw new Error("Feed expected");e=SA.from(e),r=o.Buffer.alloc(e.tail+1),e.buf.copy(r,1,0,e.tail);break;case 82:case 2:r=o.Buffer.alloc(SA.SIGNATURE_SIZE+1),e.copy(r,1);break;case 4:case 5:r=o.Buffer.alloc(33),e.copy(r,1);break;case 81:case 84:case QA:r=o.Buffer.alloc(1);break;case DA:case MA:{const t=o.Buffer.from(JSON.stringify(e));r=o.Buffer.alloc(t.length+1),t.copy(r,1)}break;case 40:r=o.Buffer.alloc(9),e.copy(r,1);break;default:throw new Error("UnknownMessageType: "+t)}return r[0]=t,r}function LA(t){if(!o.Buffer.isBuffer(t))throw new Error("BufferExpected");return t[0]}function TA(t){if(!o.Buffer.isBuffer(t))throw new Error("BufferExpected");const e=LA(t);let r=null;switch(e){case 1:r=new SA,r.buf=t.slice(1),r.tail=t.length-1;break;case 82:case 2:case 4:case 5:r=t.slice(1);break;case QA:case 81:case 84:break;case DA:case MA:r=JSON.parse(t.slice(1),xA);break;case 40:r=t.slice(1).toString("hex");break;default:throw new Error("UnknownMessageType: "+e)}return{type:e,data:r}}var PA={RPC:class{constructor(t,e){this._controller=this._controller.bind(this),this.hub=new BA(this._controller,this._ondisconnect.bind(this)),this.handlers=e,this.nodeIds={},this.nodeId=t}_ondisconnect(t,e){e&&"DuplicatePeer"!==e.message&&console.warn("NodeDisconnected",t.id,e),kA("NodeDisconnected",t.id,e?.message),this.handlers.ondisconnect&&this.handlers.ondisconnect(t,e),t.id&&(this.nodeIds[t.id]=0)}async query(t,e={}){const r=t.postMessage;kA("Sent K_QUERY",e);const[n,o]=await r(UA(DA,e),!0);this._controller(t,n,o)}async shareBlocks(t,e){SA.isFeed(t)&&(t=[t]);const r=(t=[...t]).shift(),n=this.hub.survey(UA(1,r),!!t.length,e);for await(const[e,o]of n)kA("Sent K_BLOCKS",r.length),t.length&&(LA(e)===QA?o&&this._uploadFeeds(o,t).catch((t=>console.error("Failed sending subsequent feeds",t))):kA("Remote rejected additional blocks with code",OA[LA(e)]))}_uploadFeeds(t,e){if(!e||!e.length)return t(UA(84));const r=[...e],n=r.shift();return t(UA(1,n),!!r.length).then((([t,e])=>{if(kA("Sent K_BLOCKS",n.length),r.length)return t?LA(t)!==QA?console.warn("Peer rejected consequtive blocks",LA(t)):this._uploadFeeds(e,r):console.warn("Empty scope")}))}async*_downloadFeeds(t,e){let r=!1;for(;!r;){r=!0;const{type:n,data:o}=TA(t);if(1===n)yield o;else if(e){await e(UA(81),!1);continue}if(!e)continue;const i=await e(UA(QA),!0);t=i[0],e=i[1],r=!1}}createWire(){return this.hub.createWire((t=>{t.postMessage(UA(40,this.nodeId)).catch((t=>console.error("Failed sending nodeId",t)))}))}async _controller(t,e,r){try{const{type:n,data:o}=TA(e);switch(kA(`Received ${OA(n)}`,e.length>1?e.slice(1,Math.min(e.length,12)).toString():"[NO DATA]"),n){case 40:if(t.id=o,this.nodeIds[o])return this.nodeIds[o]++,t.close(new Error("DuplicatePeer"));this.nodeIds[o]=1,kA("NodeConnected %s",t.id),this.handlers.onhandshake&&this.handlers.onhandshake(t);break;case DA:{const t=await this.handlers.onquery(o);await this._uploadFeeds(r,t)}break;case 1:for await(const n of this._downloadFeeds(e,r)){const e=await this.handlers.onblocks(n);kA("Forwarding %d blocks ",e),e&&this.shareBlocks(n,t).catch((t=>console.error("Gossip failed",t)))}break;case 84:break;default:throw new Error(`UnknownMessageType: ${n} - ${OA(n)}`)}}catch(t){console.error("RPC:internal error",t)}}},decodeKRPCMessage:TA,encodeKRPCMessage:UA,kTypeToString:OA,K_BLOCKS:1,K_REQUEST_BLOCK:2,K_REQUEST_HEAD:4,K_REQUEST_TAIL:5,K_OK:QA,K_ERR:81,K_EMPTY:84,K_SIG:82,K_JSON:MA,K_ERR_MSG:202};const FA=Hd.exports("picochat:mod:net"),{RPC:$A}=PA,{writable:NA}=n.exports;const{SIGNATURE_SIZE:RA}=ng,{toBuffer:YA}=dp;const jA=Hd.exports("picochat:mod:gc");function KA(t){const e=o.Buffer.alloc(9);return e.writeBigUInt64BE(BigInt(t),1),e[0]=116,e}function HA(t){const e=t[0];return{type:t.slice(e+1).toString(),id:t.slice(1,e+1)}}var GA={exports:{}};const qA=Hd.exports("picochat:mod:peers"),VA=ng,{toBuffer:zA,boxPair:WA,TYPE_PROFILE:JA,KEY_SK:XA,KEY_BOX_LIKES_PK:ZA,KEY_BOX_LIKES_SK:ty}=dp,{mute:ey,combine:ry,init:ny,gate:oy,when:iy}=n.exports,sy=Object.freeze({state:"error",errorMessage:"PeerNotFound"}),ay=Object.freeze({state:"loading"});function cy([t,e]){if(!t)return sy;if(null===t.date)return ay;if("error"===t.state)return t;if(!t.pk)throw new Error("kernel.$peers invoked before kernel.load() finished?");const r=e.stats[t.pk.toString("hex")]||{nEnded:0,nStarted:0,nMessages:0,nPassed:0,nExhausted:0},n=r?42e4*r.nEnded:0,o=t.expiresAt+n;return{...t,stats:r,expiresAt:o,state:o<Date.now()?"expired":t.state}}function uy(t){if(!t||!(o.Buffer.isBuffer(t)&&32===t.length||"string"!=typeof t&&64===t.length))throw new Error(`PublicKey expected got "${t}"`);return zA(t)}GA.exports=function(){let t=null;const e=new Promise((e=>{t=e}));return{__setHasProfile:t,hasProfile:e,async register(e,r){r=r||VA.signPair().sk,this._sk=r;const n=WA();this._vibeBox=n,this._vibeController.setKeys(this.pk,this._vibeBox),await this.updateProfile(e),await this.repo.writeReg(XA,r),await this.repo.writeReg(ZA,n.pk),await this.repo.writeReg(ty,n.sk),t(!0)},async profileOf(t){t=uy(t);const e=this.store.state.peers[t.toString("hex")];return e||(qA("Peer does not exist in registry %h",t),sy)},async updateProfile(t){return await this._createBlock(JA,{...t,box:this._vibeBox.pk})},$peer(t){return oy(ny(ay,this._peer(t)))},_peer(t){try{t=uy(t)}catch(t){return ny({...sy,errorMessage:t.message})}if(this.pk.equals(t))return this.$profile();const e=ey((t=>this.store.on("peers",t)),(e=>e[t.toString("hex")]||sy));return ey(ry(e,(t=>this.store.on("chats",t))),cy)},$peers(){const t=ey(this.store.on.bind(this.store,"peers"),(t=>this.pk?Object.values(t).filter((t=>!this.pk.equals(t.pk))):Object.values(t))),e=this.store.on.bind(this.store,"chats");return oy(ny([],ey(ry(t,e),(([t,e])=>t.map((t=>cy([t,e]))).filter((t=>"expired"!==t.state))))))},$profile(){const t=iy(this.load());return oy(ny(ay,ey(ry(ey((t=>this.store.on("peer",t)),(async t=>(await e,t))),(t=>this.store.on("chats",t)),t),cy)))}}},GA.exports.PEER_PLACEHOLDER=ay,GA.exports.ERR_PEER_NOT_FOUND=sy;const ly=ng,{TYPE_VIBE:fy,TYPE_VIBE_RESP:hy,VIBE_REJECTED:gy,toBuffer:dy,seal:py,boxPair:Ay}=dp,{mute:yy,combine:Iy,gate:by,init:my,until:wy}=n.exports,{PEER_PLACEHOLDER:Ey}=GA.exports,Cy=Hd.exports("picochat:mod:vibes");async function _y(t){try{if(!t.peerId&&t.initiator){const e=o.Buffer.allocUnsafe(ly.SIGNATURE_SIZE+1);t.id.copy(e,1),e[0]=84;const r=await this._readReg(e);t.peerId=r}"loading"===t.peer.state&&(t.peer=await this.profileOf(t.peerId))}catch(e){console.warn("Failed resolving vibe.peer",e),t.peer={state:"error",errorMessage:e.message}}return t}function vy(t,e,r,n){const o={...function(t){return{id:t,head:null,peer:Ey,peerId:null,box:null,state:"waiting",updatedAt:0,createdAt:1/0,expiresAt:0,remoteRejected:!1,localRejected:!1,a:null,b:null,myTurn:!1,health:-1}}(t),updatedAt:e.updatedAt,createdAt:e.createdAt,expiresAt:n?.expiresAt||e.expiresAt,box:e.remoteBox,initiator:r,localRejected:r&&"rejected"===e.state,remoteRejected:!r&&"rejected"===e.state,a:e.a,b:e.b,head:e.response};return r?e.b&&(o.peerId=o.b):o.peerId=o.a,"rejected"===e.state?o.state="rejected":e.a&&e.b?o.state="match":r||e.b?r&&!e.b?o.state="waiting_remote":o.state="mental_error":o.state="waiting_local",o.myTurn="match"===o.state?n?!(n.mLength%2^(r?0:1)):r:"waiting_local"===o.state,"end"===n?.state&&(o.myTurn=!1),o.health=n?Math.floor(n.hp):3,~["waiting_remote","waiting_local"].indexOf(o.state)&&o.expiresAt<Date.now()&&(o.state="expired"),o}const{mute:By,combine:Sy}=n.exports;const ky=hg,xy=jd,Qy=ng,My=Kd.exports,Dy=Xp,Oy=cA,Uy=function(){return{$chats(){return EA(this.$vibes(),(t=>t.filter((t=>"match"===t.state))))},$chat(t){t=bA(t);let e=null;const r=async(e,r=!1)=>{if(!i.myTurn)throw new Error("NotYourTurn");if(!r&&"string"!=typeof e)throw new Error("Message should be a string");if(!r&&!e.length)throw new Error("EmptyMessage");const n=await this._getRemoteChatKey(t),s=await this.repo.loadFeed(i.head),a=r?gA:yA(o.Buffer.from(e),n);await this._createBlock(s,lA,{content:a}),r||await this._setMessageBody(s.last.sig,o.Buffer.from(e))},n={id:t,state:"loading",initiator:!1,myTurn:null,peerId:null,peer:null,mLength:0,messages:[],updatedAt:0,createdAt:0,expiresAt:0,health:-1,errorMessage:null,head:null,send:async t=>r(t),pass:async()=>{if(!i.myTurn)throw new Error("NotYourTurn");return r(0,!0)},bye:async e=>{if(!i.myTurn)throw new Error("NotYourTurn");if(!~[dA,pA,AA].indexOf(e))throw new Error("InvalidGesture");if(!~["active","finalizing"].indexOf(i.state))throw new Error("InvalidState");const r=await this.loadChat(t);if(!r)return console.error("branch dissapeared, expected head sig:",i.head?.toString("hex"));await this._createBlock(r,"active"===i.state?fA:hA,{gesture:e})}};let i=n;return _A(CA(n,EA(wA(this._vibe(t),(t=>this.store.on("chats",t))),(async([r,o])=>{const s=o.chats[t.toString("hex")];if(!r||"error"===r.state)return n.state="error",n.errorMessage="ChatNotFound",n;if("loading"===r.state)return n;if(n.head=r.head,"match"===r.state?n.state="active":"rejected"===r.state&&(n.state="rejected"),n.createdAt=s?s.createdAt:r.createdAt,n.updatedAt=s?s.updatedAt:r.updatedAt,n.expiresAt=s?s.expiresAt:r.expiresAt,n.peerId=r.peerId,n.peer=r.peer,n.initiator=r.initiator,n.myTurn=r.myTurn,n.health=r.health,!s)return n;if(n.head=s.head,n.graph=s.graph,n.state=s.state,"active"===n.state&&n.expiresAt<Date.now()&&(n.state="expired"),n.mLength=s.mLength,n.messages.length===s.messages.length)return n;try{e||(e=await this._getLocalChatKey(t)),n.messages=[...n.messages];for(let t=n.messages.length;t<s.messages.length;t++){const r={...s.messages[t]};r.pass?r.content=gA.toString():"received"===r.type?r.content=IA(r.content,e.sk,e.pk).toString():r.content=await this._getMessageBody(r.sig),n.messages[t]=r}}catch(t){console.error("Message decryption failed",t)}return i=n,n}))))},async loadChat(t){const e=(t=bA(t)).toString("hex");let r=null;const n=this.store.state.vibes.matches[e];r=n?.response||n?.chatId,n||uA("vibe does not exist for chatId:",e);const o=this.store.state.chats.chats[e];if(n||o||uA("conversation not found %h",t),r=o?.head||r,!r)return;return(await this._tracePath(r)).feed},async _inspectChat(t,e=!1){const r=await this.loadChat(t);console.log(mA(r)),e&&r.inspect()}}},Ly=function(t){const e={nodeId:(r=8,o.Buffer.from(Array.from(new Array(r)).map((t=>Math.floor(256*Math.random()))))),store:t.store,spawnWire:null,rpc:null,name:null};var r;const[n,i]=NA([]),s=t=>{i(t)};return{$connections:()=>n,async enter(t){if(e.spawnWire)return e.spawnWire;FA("Net connecting to swarm %s as nodeId: %H",t,e.nodeId),e.name=t;const r=e.store,n=r.repo;let o=0;const i=new $A(e.nodeId,{onblocks:async t=>{try{o++,FA("%d %s received blocks %d %h",o,this.store.state.peer.name,t.length,t.last.sig),FA(t.inspect(!0));const e=await r.dispatch(t,!1);return FA(o,this.store.state.peer.name,"Stores mutated",e),e.length}catch(t){console.warn("Remote block ignored",t)}return 0},queryHead:async t=>await n.headOf(t),queryTail:async t=>await n.tailOf(t),onquery:async t=>{const e=Object.values(r.state.peers).filter((t=>"expired"!==t.state)).sort(((t,e)=>t.date-e.date)).map((t=>t.pk)),o=[];for(const t of e){const e=await n.loadHead(t);e&&!o.find((t=>t.merge(e)))&&o.push(e)}const i=o.reduce(((t,e)=>e.length+t),0),s=o.reduce(((t,e)=>e.tail+t),0);return FA("%s onquery: replying with %d-feeds containing %d-blocks, total: %dBytes",this.store.state.peer.name,o.length,i,s),o},onhandshake(t){s(Array.from(i.hub._nodes)),FA("PeerConnected",t.id),i.query(t,{}).catch((t=>console.warn("Query Failed",t)))},ondisconnect(){s(Array.from(i.hub._nodes))}});return e.rpc=i,this._badCreateBlockHook=t=>{FA(this.store.state.peer.name,"Created block, publishing"),FA(t.inspect(!0)),i.shareBlocks(t).catch((t=>console.log("shareBlocks failed:",t)))},e.spawnWire=(t={})=>{const e=i.createWire();return FA("Wire spawned",t),e},e.spawnWire}}},Ty=function(){const t={};return{async _writeReg(e,r){if(await this.repo.writeReg(e,r),!t[e.toString()])return;const{set:n,timerId:o}=t[e.toString()];delete t[e.toString()],clearTimeout(o),n(r)},async _readReg(e){const r=await this.repo.readReg(e);if(r)return r;if(t[e.toString()])return t[e.toString()].promise;let n=null,o=null;const i=new Promise(((r,i)=>{n=r,o=setTimeout((()=>{delete t[e.toString()],i(new Error("BufferedReadTimedOut"))}),5e3)}));if(!n)throw new Error("ConcurrencyError");return t[e.toString()]={promise:i,set:n,timerId:o},i},async _storeLocalChatKey(t,e){const r=e.sk.length+e.pk.length;if(64!==r)throw new Error(`Expected box keypair to be 32bytes each, did algorithm change?: ${r}`);if((t=YA(t)).length!==RA)throw new Error("Expected chatId to be a block signature");const n=o.Buffer.allocUnsafe(e.sk.length+e.pk.length);e.sk.copy(n),e.pk.copy(n,e.sk.length);const i=o.Buffer.allocUnsafe(RA+1);return t.copy(i,1),i[0]=67,await this._writeReg(i,n)},async _getLocalChatKey(t){if("string"==typeof t&&(t=o.Buffer.from(t,"hex")),(t=YA(t)).length!==RA)throw new Error("Expected chatId to be a block signature");const e=o.Buffer.allocUnsafe(RA+1);t.copy(e,1),e[0]=67;const r=await this._readReg(e);if(!r)throw new Error("BoxPairNotFound");return{pk:r.slice(32),sk:r.slice(0,32)}},async _getRemoteChatKey(t){const e=t.toString("hex"),r=this.store.state.vibes.matches[e];if(!r)throw new Error("ConversationNotFound");if(!r.remoteBox)throw new Error("BoxPublicKeyNotAvailable");return r.remoteBox},async _setMessageBody(t,e){if(t=YA(t),!o.Buffer.isBuffer(t)||t.length!==RA)throw new Error("Expected chatId to be a block signature");const r=o.Buffer.allocUnsafe(RA+1);return t.copy(r,1),r[0]=77,await this._writeReg(r,YA(e))},async _getMessageBody(t){if(t=YA(t),!o.Buffer.isBuffer(t)||t.length!==RA)throw new Error("Expected chatId to be a block signature");const e=o.Buffer.allocUnsafe(RA+1);t.copy(e,1),e[0]=77;const r=await this._readReg(e);if(!r)throw new Error("MessageNotFound");return r.toString()}}},Py=function(t){const e=t.repo;let r=null;function n(t,r,n){const i=KA(n);e._db.put(i,function(t,e){t=o.Buffer.from(t);const r=e.length,n=o.Buffer.alloc(1+r+t.length);return e.copy(n,1),t.copy(n,r+1),n[0]=r,n}(t,r)).catch((t=>console.error("Failed queing GC: ",t)))}for(const e of t._stores)e._originalReducer=e.reducer,e.reducer=t=>e._originalReducer({...t,schedule:n});return{async _collectGarbage(e){jA("Locking store");const r=await t._waitLock();try{const t=await i.bind(this)(e);return r(),t}catch(t){throw r(),t}},startGC(t=3e3){this.ready&&!r&&(r=setInterval(this._collectGarbage.bind(this),t))},stopGC(){r&&(clearInterval(r),r=null)}};async function i(r=Date.now()){jA("Starting collecting garbage...");const n=await async function(t,e){const r={gt:KA(0),lt:KA(e)},n=t.iterator(r),o=[];for(;;)try{const[t,e]=await new Promise(((t,e)=>{n.next(((r,n,o)=>{r?e(r):t([n,o])}))}));if(!t)break;o.push({key:t,value:e})}catch(t){console.warn("Iterator died with an error",t);break}return await new Promise(((t,e)=>{n.end((r=>r?e(r):t()))})),o}(e._db,r);jA("Fetched pending from store:",n.length);let o=new Set;const i=[];for(const e of n){const{type:n,id:a}=HA(e.value);if(!n)throw new Error("GC OP missing");await s({now:r,id:a,gcType:n,rootState:t.state,didMutate:t=>o.add(t),drop:t=>i.push([t,"chat"===n?a:null])})}const a=[];for(const[t,e]of i)try{const r=await this._tracePath(t);if(e){if(!e.equals(r.chatId))throw new Error("InternalError: Attempted to evict wrong segment");const t=await this.repo.rollback(r.keys[0],r.heads[0]);a.push(t)}else a.push(await this.repo.rollback(r.keys[0]))}catch(t){"FeedNotFound"===t.message?jA("RollbackFailed, Feed already gone",t):console.error("Rollback failed",t)}return o=Array.from(o),t._notifyObservers(o),jA("Stores mutated",o,"segments evicted",a.length),{mutated:o,evicted:a}}function s({now:t,rootState:e,drop:r,gcType:n,id:o,didMutate:i}){if("chat"===n){const n=e.vibes.matches[o.toString("hex")],s=e.chats.chats[o.toString("hex")],a=s?.head||n?.response||n?.chatId;let c=!1;if(!a)return;const u=s?.expiresAt||n?.expiresAt||0,l=u<t;if(jA("Chat[%h] expired: %s, timeLeft: %d",o,l,u-t),!l)return;if(s){const{chats:t,heads:r,own:n}=e.chats;delete t[o.toString("hex")],delete r[a.toString("hex")];const s=n.findIndex((t=>t.equals(o)));~s&&n.splice(s,1),i("chats"),c=!0}if(n){const{seen:t,matches:r,own:s}=e.vibes;n.a&&t[n.a.toString("hex")]?.equals(o)&&delete t[n.a.toString("hex")],n.b&&t[n.b.toString("hex")]?.equals(o)&&delete t[n.b.toString("hex")],delete r[o.toString("hex")];const a=s.findIndex((t=>t.equals(o)));~a&&s.splice(a,1),i("vibes"),c=!0}c&&r(a,o)}else{if("peer"!==n)throw new Error(`Garbage collection for "${n}" not supported!`);{const{peers:n}=e,s=e.peer.pk.equals(o);s&&e.peer.expiresAt<t&&(e.peer.state="expired",i("peer"));const a=n[o.toString("hex")];a&&a.expiresAt<t&&(a.state="expired",i("peers"),s||(delete n[o.toString("hex")],r(a.sig)))}}}},Fy=GA.exports,$y=function(){return{async sendVibe(t){if(t=dy(t),this.pk.equals(t))throw new Error("SelfVibeNotAllowed");const{matches:e,own:r}=this.store.state.vibes;for(const n of r){const r=e[n.toString("hex")];if("wait"===r.state&&t.equals(r.a))return this.respondVibe(r.chatId)}if(!(await wy(this.$cooldowns(),(t=>"loading"!==t.state))).canVibe)throw new Error("VibeNotReady");const n=Ay(),i=await this.profileOf(t);if("error"===i.state)throw new Error(i.errorMessage);const s=py(n.pk,i.box),a=(await this._createBlock(fy,{box:s})).last.sig;await this._storeLocalChatKey(a,n);const c=o.Buffer.allocUnsafe(ly.SIGNATURE_SIZE+1);return a.copy(c,1),c[0]=84,await this._writeReg(c,i.pk),a},async respondVibe(t,e=!0){t=dy(t);const r=Ay(),{own:n,matches:o}=this.store.state.vibes;if(!n.find((e=>e.equals(t))))throw new Error("NotYourVibe");const i=o[t.toString("hex")];if(!i)throw new Error("VibeNotFound");if("wait"!==i.state)throw new Error("VibeResponseNotApplicable");const s=await this.profileOf(i.a);if(!s)throw new Error("PeerNotFound");const a=py(r.pk,s.box),c=await this.repo.readBlock(t);if(!c)throw new Error("Vibe no longer exists");if(!await this._createBlock(ly.from(c),hy,{box:e?a:gy,link:this.store.state.peer.sig}))throw new Error("Failed creating block");return e&&await this._storeLocalChatKey(i.chatId,r),t},$vibe(t){return by(my({state:"loading",type:"vibe"},this._vibe(t)))},_vibe(t){try{t=function(t){if(!t||!(o.Buffer.isBuffer(t)&&64===t.length||"string"!=typeof t&&128===t.length))throw new Error(`ChatID expected got "${t}"`);return dy(t)}(t)}catch(t){return my({state:"error",errorMessage:t.message})}return yy(Iy((t=>this.store.on("chats",t)),(t=>this.store.on("vibes",t))),(([e,{matches:r}])=>{const n=r[t.toString("hex")],o=e.chats[t.toString("hex")];if(!n)return{state:"error",errorMessage:"VibeNotFound"};const i=this.pk.equals(n.a),s=vy(t,n,i,o);return _y.bind(this)(s)}))},$vibes(){return by(my([],yy(this._vibes(),(async t=>{const e=[];for(let r=0;r<t.length;r++){const n={...t[r]};await _y.bind(this)(n),e.push(n)}return Cy("emit $vibes async"),e}))))},_vibes(){return yy(Iy((t=>this.store.on("chats",t)),(t=>this.store.on("vibes",t))),(([t,{sent:e,received:r,own:n,matches:o}],i)=>{const s=[];for(const e of n){const r=o[e.toString("hex")],n=t.chats[e.toString("hex")],i=vy(e,r,this.pk.equals(r.a),n);"expired"!==i.state&&(n&&"end"===n.state||s.push(i))}return Cy("emit _vibes"),s}))}}},Ny=function(){return{$cooldowns(){return By(Sy(this.$profile(),(t=>this.store.on("vibes",t)),(t=>this.store.on("chats",t))),(([t,e,r])=>{const n={canVibe:!1,vibe:-1};if("loading"===t.state)return{state:"loading",...n};const o=e.seen[t.pk.toString("hex")];if(!o)return n.vibe=0,n.canVibe=!0,n;const i=e.matches[o.toString("hex")];if(!i)throw new Error("MentalError");n.canVibe=!1,n.vibe=i.expiresAt;const s=r.chats[o.toString("hex")];return s&&(n.vibe=s.expiresAt),n}))}}},{KEY_SK:Ry,KEY_BOX_LIKES_PK:Yy,KEY_BOX_LIKES_SK:jy,TYPE_VIBE:Ky,TYPE_VIBE_RESP:Hy,TYPE_MESSAGE:Gy,TYPE_PROFILE:qy,TYPE_BYE:Vy,TYPE_BYE_RESP:zy,VIBE_REJECTED:Wy,decodeBlock:Jy,encodeBlock:Xy,typeOfBlock:Zy}=dp,tI=(0,Hd.exports)("picochat:kernel"),{writable:eI,combine:rI,get:nI}=n.exports;async function oI(t,e){const r=Jy(t.body),{type:n}=r,o=await e.readBlock(t.parentSig),i=Zy(o.body);if(n===Hy){const n=await e.readBlock(t.parentSig);return i===Ky&&(Wy.equals(r.box)?tI("Rejection detected: %h </3 %h",t.key,n.key):tI("Match detected: %h <3 %h",t.key,n.key),!0)}return n===Gy&&i===Gy||(n===Vy&&i===Gy||(n===zy&&i===Vy||(console.warn("MergeStrategy rejected",i,"<--",n),!1)))}var iI=class{constructor(t){this.db=t,this.repo=new ky(t),this.store=new xy(this.repo,oI),this._state=function(){const[t,e]=eI(!1),[r,n]=eI(!0),[o,i]=eI(!1),[s,a]=eI(!1);return[rI({loaded:t,passive:r,connected:o,entered:s}),{setLoaded:e,setPassive:n,setConnected:i,setEntered:a}]}(),this._sk=null,this._vibeBox=null,this.store.register(My.ProfileCtrl((()=>this.pk))),this.store.register(My()),this._vibeController=new Dy,this.store.register(this._vibeController),this.store.register(Oy()),Object.assign(this,Fy()),Object.assign(this,$y()),Object.assign(this,Uy()),Object.assign(this,Ty()),Object.assign(this,Ly(this)),Object.assign(this,Py(this.store)),Object.assign(this,Ny())}get state(){return nI(this._state[0])}get $state(){return this._state[0]}load(){return this.__loading||(this.__loading=(async()=>{try{this._sk=await this.repo.readReg(Ry)}catch(t){if(t.notFound)return!1;throw t}return this._sk&&(this._vibeBox={sk:await this.repo.readReg(jy),pk:await this.repo.readReg(Yy)},this._vibeController.setKeys(this.pk,this._vibeBox)),await this.store.load(),this._sk&&this.store.state.peer&&this.__setHasProfile(!0),!!this._sk})()),this.__loading}get pk(){return this._sk?.slice(32)}async feed(t){return this._checkReady(),this.repo.loadHead(this.pk)}async _tracePath(t){const e=[],r=[];let n=null,o=0;const i=await this.repo.loadFeed(t,((t,i)=>{switch(Zy(t.body)){case Hy:e[1]=t.key,r[1]=Jy(t.body).link;break;case qy:case zy:e[0]=t.key,r[0]=t.sig,o&&i();break;case Ky:n=t.sig}o++}));if(!i)throw new Error("FeedNotFound");return{keys:e,heads:r,feed:i,chatId:n}}get ready(){return!!this._sk}_checkReady(){if(!this.ready)throw new Error("Kernel is not ready, still loading or user is not registerd")}async seq(){const t=await this.feed(1);return t?Jy(t.last.body).seq:-1}async dispatch(t,e=!1){return this._checkReady(),await this.store.dispatch(t,e)}async _createBlock(t,e,r){if("string"==typeof t)return this._createBlock(null,t,e);this._checkReady(),t=t||await this.feed()||new Qy;const n=await this.seq()+1,o=Xy(e,n,r);t.append(o,this._sk);if(!(await this.dispatch(t,!0)).length)throw new Error("CreateBlock failed: rejected by store");return this._badCreateBlockHook&&this._badCreateBlockHook(t.slice(-1)),t}},sI={binstr:function(t,e){e=e||8*t.length;let r="";for(let n=0;n<t.length;n++)for(let o=0;o<8;o++)e===8*n+o&&(r+="|"),r+=t[n]&1<<o?"1":"0";return r},roundByte:aI,shift:cI,unshift:uI,countTrailingZeroes:function(t){let e=t.length,r=0;for(;e--;)for(let n=7;n>=0;n--){if(t[e]&1<<n)return r;r++}return r},countOnes:function(t){let e=0;for(let r=0;r<t.length;r++){let n=t[r];for(;n;)1&n&&e++,n>>=1}return e},proximityOf:function(t,e){let r=0;for(;r<t.length&&gI(t,r)===gI(e,r);r++);return r},mapOverlap:function(t,e){e=e||(()=>{});const r=t.map((()=>0)),n=t.map((()=>0)),o=t.map((()=>0));let i=!1;const s=[];let a=!1;for(;!a;){for(let e=0;e<t.length;e++){if(!i&&n[e])continue;const a=t[e],c=r[e]++,u=a.length-1-(c>>3);if(u<0)return s;const l=a[u]>>7-c%8&1;n[e]?o[e]=l:l&&(n[e]=!0)}if(!i){i=n.reduce(((t,e)=>t&&e),!0);continue}const c=e(o,(()=>{a=!0}));cI(s,c)&&(s[s.length]=1)}return s},packGeo:function(t,e,r){e||(e=5*t.length);if(e<5)throw new Error("precision has to be at least 5");const n=aI(e);r||(r=o.Buffer.alloc(n));const i=t.split("").reverse().reduce(((t,e,r)=>t+fI[e]*32**r),0).toString(2).slice(0,e).split("").reverse();for(const t of i)cI(r,"0"===t?0:1);return r},unpackGeo:hI,gammaShift:function(t,e){const r=Math.ceil(Math.log2(e));for(let e=0;e<r;e++)uI(t,0);uI(t,1);for(let n=0;n<r;n++)uI(t,e>>n&1)},gammaUnshift:function(t){let e=0;const r=8*t.length;for(;e<r;e++){const n=uI(t);if(n)break;if(e===r-1&&!n)throw new Error("NBitNotFound: end of buffer reached")}let n=1<<e;for(;e--;)n|=uI(t)<<e;return n},dGapEncode:function(t,e){e||(e=8*t.length);const r=[gI(t,0)];let n=0,o=r[0],i=0;for(;i<e;){const e=gI(t,i);e!==o&&(o=e,r.push(n),n=0),n++,i++}return r.push(n),r},decodeSL:function(t,e=16){const r=e+1,n=[];for(let e=0;e<aI(r);e++)n[e]=t[e];const o=uI(n),i=hI(n,e);return{sex:o,geohash:i}},bitAt:gI,setBit:function(t,e,r=1){t[e>>3]=r?(t[e>>3]||0)|1<<e%8:(t[e>>3]||0)&~(1<<e%8);return t}};function aI(t){return(t>>3)+(t%8?1:0)}function cI(t,e=0){let r=e?1:0;for(let e=0;e<t.length;e++){const n=t[e]>>7&1;t[e]=t[e]<<1|r,r=n}return r}function uI(t,e=0){let r=t.length,n=(e?1:0)<<7;for(;r--;){const e=(1&t[r])<<7;t[r]=n|t[r]>>1,n=e}return n?1:0}const lI="0123456789bcdefghjkmnpqrstuvwxyz",fI=lI.split("").reduce(((t,e,r)=>(t[e]=r,t)),{});function hI(t,e=16){const r=aI(e);if(t.length<r)throw new Error("BufferUnderflow, dst buffer too small");const n=[];for(let e=0;e<r;e++)n[e]=t[e];let o="",i=0;for(let t=0;t<e;t++){i|=uI(n)<<4-t%5,!t||t%5||(o+=lI.charAt(i),i=0)}return o+=lI.charAt(i),o.replace(/0+$/,"")}function gI(t,e){return t[e>>3]>>e%8&1}const{crypto_sign_SECRETKEYBYTES:dI,crypto_sign_PUBLICKEYBYTES:pI,crypto_sign_keypair:AI}=Hh,{packGeo:yI,shift:II,binstr:bI,roundByte:mI,decodeSL:wI}=sI,{GEO_BITS:EI}=dp,{pack:CI,unpack:_I}=Td,vI="default_signpair",BI="default_profile";class SI{constructor(t){this.db=t}async readIdentity(t=vI){return this.db.get(t).catch((t=>{if(!t.notFound)throw t}))}async writeIdentity(t,e=vI){if(!o.Buffer.isBuffer(t)||t.length!==dI)throw new Error("Expected SigningSecret");return this.db.put(e,t)}async writeProfile(t,e=BI){return this.db.put(e,CI(t))}async readProfile(t=BI){const e=await this.db.get(t).catch((t=>{if(!t.notFound)throw t}));if(e)return _I(e)}static generateAnonymous(){const t=o.Buffer.allocUnsafe(dI),e=o.Buffer.allocUnsafe(pI);return AI(e,t),{pk:e,sk:t}}static generate(t,e,r){if(console.info("generate(",t,e,r,")"),666===(t=t??666)&&!e)return SI.generateAnonymous();if(!e)return kI(o.Buffer.from([t]),3,r);const n=EI+1,i=o.Buffer.allocUnsafe(mI(n)),s=yI(e,EI,i);II(s,1&t);const a=n%8?(1<<n%8)-1:255;return console.info("Searching for",n,s.toString("hex"),bI(s).length,"mask",a.toString(2)),kI(s,a,r)}static decodePk(t){return wI(t,EI)}}function kI(t,e=255,r=5e5){if(!o.Buffer.isBuffer(t)&&!Array.isArray(t))throw new Error("Array or Buffer Expected");const n=o.Buffer.allocUnsafe(pI),i=o.Buffer.allocUnsafe(dI),s=t.length;for(let o=0;o<r;o++){AI(n,i);let r=!0;for(let o=0;r&&o<s;o++)r=o+1===s?(n[o]&e)==(t[o]&e):r=n[o]===t[o];if(r)return{pk:n,sk:i}}}var xI=SI;function QI(){}function MI(t){return t()}function DI(){return Object.create(null)}function OI(t){t.forEach(MI)}function UI(t){return"function"==typeof t}function LI(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let TI,PI;function FI(t,e){return TI||(TI=document.createElement("a")),TI.href=e,t===TI.href}function $I(t,...e){if(null==t)return QI;const r=t.subscribe(...e);return r.unsubscribe?()=>r.unsubscribe():r}function NI(t,e,r){t.$$.on_destroy.push($I(e,r))}function RI(t,e,r,n){if(t){const o=YI(t,e,r,n);return t[0](o)}}function YI(t,e,r,n){return t[1]&&n?function(t,e){for(const r in e)t[r]=e[r];return t}(r.ctx.slice(),t[1](n(e))):r.ctx}function jI(t,e,r,n){if(t[2]&&n){const o=t[2](n(r));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],r=Math.max(e.dirty.length,o.length);for(let n=0;n<r;n+=1)t[n]=e.dirty[n]|o[n];return t}return e.dirty|o}return e.dirty}function KI(t,e,r,n,o,i){if(o){const s=YI(e,r,n,i);t.p(s,o)}}function HI(t){if(t.ctx.length>32){const e=[],r=t.ctx.length/32;for(let t=0;t<r;t++)e[t]=-1;return e}return-1}function GI(t){return null==t?"":t}function qI(t,e,r){return t.set(r),e}function VI(t,e){t.appendChild(e)}function zI(t,e,r){t.insertBefore(e,r||null)}function WI(t){t.parentNode.removeChild(t)}function JI(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function XI(t){return document.createElement(t)}function ZI(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function tb(t){return document.createTextNode(t)}function eb(){return tb(" ")}function rb(){return tb("")}function nb(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function ob(t){return function(e){return e.preventDefault(),t.call(this,e)}}function ib(t,e,r){null==r?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function sb(t,e,r){e in t?t[e]="boolean"==typeof t[e]&&""===r||r:ib(t,e,r)}function ab(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function cb(t,e){t.value=null==e?"":e}function ub(t,e,r,n){t.style.setProperty(e,r,n?"important":"")}function lb(t,e,r){t.classList[r?"add":"remove"](e)}function fb(t){PI=t}function hb(){if(!PI)throw new Error("Function called outside component initialization");return PI}function gb(t){hb().$$.on_mount.push(t)}function db(){const t=hb();return(e,r)=>{const n=t.$$.callbacks[e];if(n){const o=function(t,e,r=!1){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,r,!1,e),n}(e,r);n.slice().forEach((e=>{e.call(t,o)}))}}}function pb(t,e){const r=t.$$.callbacks[e.type];r&&r.slice().forEach((t=>t.call(this,e)))}const Ab=[],yb=[],Ib=[],bb=[],mb=Promise.resolve();let wb=!1;function Eb(t){Ib.push(t)}function Cb(t){bb.push(t)}const _b=new Set;let vb=0;function Bb(){const t=PI;do{for(;vb<Ab.length;){const t=Ab[vb];vb++,fb(t),Sb(t.$$)}for(fb(null),Ab.length=0,vb=0;yb.length;)yb.pop()();for(let t=0;t<Ib.length;t+=1){const e=Ib[t];_b.has(e)||(_b.add(e),e())}Ib.length=0}while(Ab.length);for(;bb.length;)bb.pop()();wb=!1,_b.clear(),fb(t)}function Sb(t){if(null!==t.fragment){t.update(),OI(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Eb)}}const kb=new Set;let xb;function Qb(){xb={r:0,c:[],p:xb}}function Mb(){xb.r||OI(xb.c),xb=xb.p}function Db(t,e){t&&t.i&&(kb.delete(t),t.i(e))}function Ob(t,e,r,n){if(t&&t.o){if(kb.has(t))return;kb.add(t),xb.c.push((()=>{kb.delete(t),n&&(r&&t.d(1),n())})),t.o(e)}}function Ub(t,e){const r=e.token={};function n(t,n,o,i){if(e.token!==r)return;e.resolved=i;let s=e.ctx;void 0!==o&&(s=s.slice(),s[o]=i);const a=t&&(e.current=t)(s);let c=!1;e.block&&(e.blocks?e.blocks.forEach(((t,r)=>{r!==n&&t&&(Qb(),Ob(t,1,1,(()=>{e.blocks[r]===t&&(e.blocks[r]=null)})),Mb())})):e.block.d(1),a.c(),Db(a,1),a.m(e.mount(),e.anchor),c=!0),e.block=a,e.blocks&&(e.blocks[n]=a),c&&Bb()}if((o=t)&&"object"==typeof o&&"function"==typeof o.then){const r=hb();if(t.then((t=>{fb(r),n(e.then,1,e.value,t),fb(null)}),(t=>{if(fb(r),n(e.catch,2,e.error,t),fb(null),!e.hasCatch)throw t})),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,t),!0;e.resolved=t}var o}function Lb(t,e,r){const n=e.slice(),{resolved:o}=t;t.current===t.then&&(n[t.value]=o),t.current===t.catch&&(n[t.error]=o),t.block.p(n,r)}const Tb="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:gg;function Pb(t,e,r){const n=t.$$.props[e];void 0!==n&&(t.$$.bound[n]=r,r(t.$$.ctx[n]))}function Fb(t){t&&t.c()}function $b(t,e,r,n){const{fragment:o,on_mount:i,on_destroy:s,after_update:a}=t.$$;o&&o.m(e,r),n||Eb((()=>{const e=i.map(MI).filter(UI);s?s.push(...e):OI(e),t.$$.on_mount=[]})),a.forEach(Eb)}function Nb(t,e){const r=t.$$;null!==r.fragment&&(OI(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function Rb(t,e){-1===t.$$.dirty[0]&&(Ab.push(t),wb||(wb=!0,mb.then(Bb)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Yb(t,e,r,n,o,i,s,a=[-1]){const c=PI;fb(t);const u=t.$$={fragment:null,ctx:null,props:i,update:QI,not_equal:o,bound:DI(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:DI(),dirty:a,skip_bound:!1,root:e.target||c.$$.root};s&&s(u.root);let l=!1;if(u.ctx=r?r(t,e.props||{},((e,r,...n)=>{const i=n.length?n[0]:r;return u.ctx&&o(u.ctx[e],u.ctx[e]=i)&&(!u.skip_bound&&u.bound[e]&&u.bound[e](i),l&&Rb(t,e)),r})):[],u.update(),l=!0,OI(u.before_update),u.fragment=!!n&&n(u.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);u.fragment&&u.fragment.l(t),t.forEach(WI)}else u.fragment&&u.fragment.c();e.intro&&Db(t.$$.fragment),$b(t,e.target,e.anchor,e.customElement),Bb()}fb(c)}class jb{$destroy(){Nb(this,1),this.$destroy=QI}$on(t,e){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(e),()=>{const t=r.indexOf(e);-1!==t&&r.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Kb=[];function Hb(t,e){return{subscribe:Gb(t,e).subscribe}}function Gb(t,e=QI){let r;const n=new Set;function o(e){if(LI(t,e)&&(t=e,r)){const e=!Kb.length;for(const e of n)e[1](),Kb.push(e,t);if(e){for(let t=0;t<Kb.length;t+=2)Kb[t][0](Kb[t+1]);Kb.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(i,s=QI){const a=[i,s];return n.add(a),1===n.size&&(r=e(o)||QI),i(t),()=>{n.delete(a),0===n.size&&(r(),r=null)}}}}function qb(t,e,r){const n=!Array.isArray(t),o=n?[t]:t,i=e.length<2;return Hb(r,(t=>{let r=!1;const s=[];let a=0,c=QI;const u=()=>{if(a)return;c();const r=e(n?s[0]:s,t);i?t(r):c=UI(r)?r:QI},l=o.map(((t,e)=>$I(t,(t=>{s[e]=t,a&=~(1<<e),r&&u()}),(()=>{a|=1<<e}))));return r=!0,u(),function(){OI(l),c()}}))}const Vb=window.Modem56,zb="picochat-testnet";function Wb(t,e){return Hb(null,(r=>e?n.exports.nfo(t,e)(r):t(r)))}const Jb=as(xs("picochat")),Xb=as(xs("keychain")),Zb=new iI(Jb),tm=new xI(Xb),em=(t,e,r)=>xI.generate(t,e,r);function rm(t){const e=xI.decodePk(t),r=Ys.decode(e.geohash);return{...e,...r}}function nm(t){return Wb(Zb.$vibes(),t)}let om=null;const[im,sm]=n.exports.write("loading"),[am,cm]=n.exports.write(),[um,lm]=n.exports.write(!1),[fm,hm]=n.exports.write(!1),[gm,dm]=n.exports.write(!1),[pm,Am]=n.exports.write(!1),[ym,Im]=n.exports.write(null),bm=n.exports.combine({state:im,error:am,hasKey:gm,hasProfile:pm,entered:um,swarming:fm}),mm=Wb(bm),wm=Wb(ym);function Em(){return om||(om=tm.readIdentity().then((t=>(dm(!!t),tm.readProfile()))).then((t=>(Am(!!t),t?.picture&&Im(t.picture),Zb.load()))).then((t=>{lm(t),Zb.startGC()})).catch((t=>{throw console.error("kernel boot failure",t),cm(t),sm("error"),t})).then((t=>{sm("running");const e=n.exports.get(bm);console.info("Final state",e);const r=JSON.parse(window.localStorage.getItem("auto_swarm"));if(e.error)window.location.hash="/error?message="+e.error.message;else if(e.hasKey){if(e.hasProfile)return r&&vm();YB("/profile")}else YB("/keygen")}))),om}function Cm(t,e){return"mock"===t?Wb(function(){const[t,e]=n.exports.write(!0),[r,o]=n.exports.write(!0),i=n.exports.init(["Hello","Hi","Weather's nice! 🔥","You're joking right?",void 0,"There's a thunderstorm going on!","No way! That's so cool!","The roof is gone 🥲","Is your pants still on?",void 0,"Please tell me you're not stroking yourself during a hurricane","Yup!"]);return n.exports.mute(n.exports.combine(t,r,i,ym),(([t,r,n,i])=>{let s="ᚲᛃ";const a=n.map(((e,r)=>{const n=r%2;return s+=e?n?"ᛗ":"ᛖ":n?"ᚧ":"ᚦ",{type:n^t?"sent":"received",content:e||"",pass:!e}}));return{peer:{name:t?"Blackie":"Whitemane",picture:i,tagline:"mock tag",date:Date.now(),sex:0,score:99,age:23},myTurn:r,initiator:t,state:"active",graph:s,health:2,expiresAt:Date.now()+864e5,async send(){},pass:async()=>(o(!1),new Promise((t=>{setTimeout((()=>{o(!0),t()}),1e3)}))),async bye(){e(!t)},mLength:a.length,messages:a}}))}()):Wb(Zb.$chat(t),e)}let _m=null;async function vm(){if(!Vb)throw new Error("Modem not available, did you load it?");if(_m)return;_m=new Vb(null,{});const t=await Zb.enter(zb);_m.join(zb,t),hm(!0)}function Bm(t){return"data:image/jpeg;base64,"+t?.toString("base64")}async function Sm(t=!1){const e=t?"You are about to burn your passport and everything with it... you sure about this?":"Permanently wipe ALL data, you sure?";window.confirm(e)&&(t&&await tm.db.clear(),await Zb.db.clear(),window.location.reload())}async function km(){const t=new(0,window.File)([(await tm.readIdentity()).toString("hex")],"idsqr-insecure-backup.txt",{type:"application/text"}),e=URL.createObjectURL(t);window.open(e,"_blank")}function xm(t){let e,r,n,o,i;const s=t[4].default,a=RI(s,t,t[3],null),c=a||function(t){let e;return{c(){e=tb("Empty Modal")},m(t,r){zI(t,e,r)},d(t){t&&WI(e)}}}();return{c(){e=XI("dialog"),c&&c.c()},m(s,a){var u;zI(s,e,a),c&&c.m(e,null),t[5](e),n=!0,o||(i=[(u=r=Mm.call(null,e,["open",!!t[0]]),u&&UI(u.destroy)?u.destroy:QI),nb(e,"click",t[2])],o=!0)},p(t,[e]){a&&a.p&&(!n||8&e)&&KI(a,s,t,t[3],n?jI(s,t[3],e,null):HI(t[3]),null),r&&UI(r.update)&&1&e&&r.update.call(null,["open",!!t[0]])},i(t){n||(Db(c,t),n=!0)},o(t){Ob(c,t),n=!1},d(r){r&&WI(e),c&&c.d(r),t[5](null),o=!1,OI(i)}}}function Qm(t,e,r){null===r||!1===r?t.removeAttribute(e):t.setAttribute(e,r+"")}function Mm(t,e){return e&&Qm(t,e[0],e[1]),{update(e){e&&Qm(t,e[0],e[1])}}}function Dm(t,e,r){let{$$slots:n={},$$scope:o}=e,{open:i=!1}=e;const s=db();let a;return t.$$set=t=>{"open"in t&&r(0,i=t.open),"$$scope"in t&&r(3,o=t.$$scope)},[i,a,function(t){t.target===a&&s("fade")},o,n,function(t){yb[t?"unshift":"push"]((()=>{a=t,r(1,a)}))}]}class Om extends jb{constructor(t){super(),Yb(this,t,Dm,xm,LI,{open:0})}}function Um(t){let e,r;return{c(){var n,o,i;e=ZI("svg"),r=ZI("use"),n=r,o="xlink:href",i=t[1],n.setAttributeNS("http://www.w3.org/1999/xlink",o,i),ib(r,"href",t[1]),ib(e,"class",GI(t[2])+" svelte-16ydb8b"),lb(e,"nofill",t[0])},m(t,n){zI(t,e,n),VI(e,r)},p(t,[r]){1&r&&lb(e,"nofill",t[0])},i:QI,o:QI,d(t){t&&WI(e)}}}function Lm(t,e,r){let{id:n=""}=e,{tag:o=""}=e,{nofill:i=!1}=e;const s=`build/sprites.svg#${n}`,a=`icon ${o}`.trim();return t.$$set=t=>{"id"in t&&r(3,n=t.id),"tag"in t&&r(4,o=t.tag),"nofill"in t&&r(0,i=t.nofill)},[i,s,a,n,o]}class Tm extends jb{constructor(t){super(),Yb(this,t,Lm,Um,LI,{id:3,tag:4,nofill:0})}}var Pm={exports:{}};!function(t,e){var r=function(){var t=function(t,e){var r=t,n=l[e],o=null,i=0,s=null,a=[],c={},u=function(t,e){o=function(t){for(var e=new Array(t),r=0;r<t;r+=1){e[r]=new Array(t);for(var n=0;n<t;n+=1)e[r][n]=null}return e}(i=4*r+17),f(0,0),f(i-7,0),f(0,i-7),g(),h(),p(t,e),r>=7&&d(t),null==s&&(s=y(r,n,a)),A(s,e)},f=function(t,e){for(var r=-1;r<=7;r+=1)if(!(t+r<=-1||i<=t+r))for(var n=-1;n<=7;n+=1)e+n<=-1||i<=e+n||(o[t+r][e+n]=0<=r&&r<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=n&&n<=4)},h=function(){for(var t=8;t<i-8;t+=1)null==o[t][6]&&(o[t][6]=t%2==0);for(var e=8;e<i-8;e+=1)null==o[6][e]&&(o[6][e]=e%2==0)},g=function(){for(var t=b.getPatternPosition(r),e=0;e<t.length;e+=1)for(var n=0;n<t.length;n+=1){var i=t[e],s=t[n];if(null==o[i][s])for(var a=-2;a<=2;a+=1)for(var c=-2;c<=2;c+=1)o[i+a][s+c]=-2==a||2==a||-2==c||2==c||0==a&&0==c}},d=function(t){for(var e=b.getBCHTypeNumber(r),n=0;n<18;n+=1){var s=!t&&1==(e>>n&1);o[Math.floor(n/3)][n%3+i-8-3]=s}for(n=0;n<18;n+=1){s=!t&&1==(e>>n&1);o[n%3+i-8-3][Math.floor(n/3)]=s}},p=function(t,e){for(var r=n<<3|e,s=b.getBCHTypeInfo(r),a=0;a<15;a+=1){var c=!t&&1==(s>>a&1);a<6?o[a][8]=c:a<8?o[a+1][8]=c:o[i-15+a][8]=c}for(a=0;a<15;a+=1){c=!t&&1==(s>>a&1);a<8?o[8][i-a-1]=c:a<9?o[8][15-a-1+1]=c:o[8][15-a-1]=c}o[i-8][8]=!t},A=function(t,e){for(var r=-1,n=i-1,s=7,a=0,c=b.getMaskFunction(e),u=i-1;u>0;u-=2)for(6==u&&(u-=1);;){for(var l=0;l<2;l+=1)if(null==o[n][u-l]){var f=!1;a<t.length&&(f=1==(t[a]>>>s&1)),c(n,u-l)&&(f=!f),o[n][u-l]=f,-1==(s-=1)&&(a+=1,s=7)}if((n+=r)<0||i<=n){n-=r,r=-r;break}}},y=function(t,e,r){for(var n=E.getRSBlocks(t,e),o=C(),i=0;i<r.length;i+=1){var s=r[i];o.put(s.getMode(),4),o.put(s.getLength(),b.getLengthInBits(s.getMode(),t)),s.write(o)}var a=0;for(i=0;i<n.length;i+=1)a+=n[i].dataCount;if(o.getLengthInBits()>8*a)throw"code length overflow. ("+o.getLengthInBits()+">"+8*a+")";for(o.getLengthInBits()+4<=8*a&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*a||(o.put(236,8),o.getLengthInBits()>=8*a));)o.put(17,8);return function(t,e){for(var r=0,n=0,o=0,i=new Array(e.length),s=new Array(e.length),a=0;a<e.length;a+=1){var c=e[a].dataCount,u=e[a].totalCount-c;n=Math.max(n,c),o=Math.max(o,u),i[a]=new Array(c);for(var l=0;l<i[a].length;l+=1)i[a][l]=255&t.getBuffer()[l+r];r+=c;var f=b.getErrorCorrectPolynomial(u),h=w(i[a],f.getLength()-1).mod(f);for(s[a]=new Array(f.getLength()-1),l=0;l<s[a].length;l+=1){var g=l+h.getLength()-s[a].length;s[a][l]=g>=0?h.getAt(g):0}}var d=0;for(l=0;l<e.length;l+=1)d+=e[l].totalCount;var p=new Array(d),A=0;for(l=0;l<n;l+=1)for(a=0;a<e.length;a+=1)l<i[a].length&&(p[A]=i[a][l],A+=1);for(l=0;l<o;l+=1)for(a=0;a<e.length;a+=1)l<s[a].length&&(p[A]=s[a][l],A+=1);return p}(o,n)};c.addData=function(t,e){var r=null;switch(e=e||"Byte"){case"Numeric":r=_(t);break;case"Alphanumeric":r=v(t);break;case"Byte":r=B(t);break;case"Kanji":r=S(t);break;default:throw"mode:"+e}a.push(r),s=null},c.isDark=function(t,e){if(t<0||i<=t||e<0||i<=e)throw t+","+e;return o[t][e]},c.getModuleCount=function(){return i},c.make=function(){if(r<1){for(var t=1;t<40;t++){for(var e=E.getRSBlocks(t,n),o=C(),i=0;i<a.length;i++){var s=a[i];o.put(s.getMode(),4),o.put(s.getLength(),b.getLengthInBits(s.getMode(),t)),s.write(o)}var l=0;for(i=0;i<e.length;i++)l+=e[i].dataCount;if(o.getLengthInBits()<=8*l)break}r=t}u(!1,function(){for(var t=0,e=0,r=0;r<8;r+=1){u(!0,r);var n=b.getLostPoint(c);(0==r||t>n)&&(t=n,e=r)}return e}())},c.createTableTag=function(t,e){t=t||2;var r="";r+='<table style="',r+=" border-width: 0px; border-style: none;",r+=" border-collapse: collapse;",r+=" padding: 0px; margin: "+(e=void 0===e?4*t:e)+"px;",r+='">',r+="<tbody>";for(var n=0;n<c.getModuleCount();n+=1){r+="<tr>";for(var o=0;o<c.getModuleCount();o+=1)r+='<td style="',r+=" border-width: 0px; border-style: none;",r+=" border-collapse: collapse;",r+=" padding: 0px; margin: 0px;",r+=" width: "+t+"px;",r+=" height: "+t+"px;",r+=" background-color: ",r+=c.isDark(n,o)?"#000000":"#ffffff",r+=";",r+='"/>';r+="</tr>"}return r+="</tbody>",r+="</table>"},c.createSvgTag=function(t,e,r,n){var o={};"object"==typeof arguments[0]&&(t=(o=arguments[0]).cellSize,e=o.margin,r=o.alt,n=o.title),t=t||2,e=void 0===e?4*t:e,(r="string"==typeof r?{text:r}:r||{}).text=r.text||null,r.id=r.text?r.id||"qrcode-description":null,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-title":null;var i,s,a,u,l=c.getModuleCount()*t+2*e,f="";for(u="l"+t+",0 0,"+t+" -"+t+",0 0,-"+t+"z ",f+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',f+=o.scalable?"":' width="'+l+'px" height="'+l+'px"',f+=' viewBox="0 0 '+l+" "+l+'" ',f+=' preserveAspectRatio="xMinYMin meet"',f+=n.text||r.text?' role="img" aria-labelledby="'+I([n.id,r.id].join(" ").trim())+'"':"",f+=">",f+=n.text?'<title id="'+I(n.id)+'">'+I(n.text)+"</title>":"",f+=r.text?'<description id="'+I(r.id)+'">'+I(r.text)+"</description>":"",f+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',f+='<path d="',s=0;s<c.getModuleCount();s+=1)for(a=s*t+e,i=0;i<c.getModuleCount();i+=1)c.isDark(s,i)&&(f+="M"+(i*t+e)+","+a+u);return f+='" stroke="transparent" fill="black"/>',f+="</svg>"},c.createDataURL=function(t,e){t=t||2,e=void 0===e?4*t:e;var r=c.getModuleCount()*t+2*e,n=e,o=r-e;return Q(r,r,(function(e,r){if(n<=e&&e<o&&n<=r&&r<o){var i=Math.floor((e-n)/t),s=Math.floor((r-n)/t);return c.isDark(s,i)?0:1}return 1}))},c.createImgTag=function(t,e,r){t=t||2,e=void 0===e?4*t:e;var n=c.getModuleCount()*t+2*e,o="";return o+="<img",o+=' src="',o+=c.createDataURL(t,e),o+='"',o+=' width="',o+=n,o+='"',o+=' height="',o+=n,o+='"',r&&(o+=' alt="',o+=I(r),o+='"'),o+="/>"};var I=function(t){for(var e="",r=0;r<t.length;r+=1){var n=t.charAt(r);switch(n){case"<":e+="&lt;";break;case">":e+="&gt;";break;case"&":e+="&amp;";break;case'"':e+="&quot;";break;default:e+=n}}return e};return c.createASCII=function(t,e){if((t=t||1)<2)return function(t){t=void 0===t?2:t;var e,r,n,o,i,s=1*c.getModuleCount()+2*t,a=t,u=s-t,l={"██":"█","█ ":"▀"," █":"▄","  ":" "},f={"██":"▀","█ ":"▀"," █":" ","  ":" "},h="";for(e=0;e<s;e+=2){for(n=Math.floor((e-a)/1),o=Math.floor((e+1-a)/1),r=0;r<s;r+=1)i="█",a<=r&&r<u&&a<=e&&e<u&&c.isDark(n,Math.floor((r-a)/1))&&(i=" "),a<=r&&r<u&&a<=e+1&&e+1<u&&c.isDark(o,Math.floor((r-a)/1))?i+=" ":i+="█",h+=t<1&&e+1>=u?f[i]:l[i];h+="\n"}return s%2&&t>0?h.substring(0,h.length-s-1)+Array(s+1).join("▀"):h.substring(0,h.length-1)}(e);t-=1,e=void 0===e?2*t:e;var r,n,o,i,s=c.getModuleCount()*t+2*e,a=e,u=s-e,l=Array(t+1).join("██"),f=Array(t+1).join("  "),h="",g="";for(r=0;r<s;r+=1){for(o=Math.floor((r-a)/t),g="",n=0;n<s;n+=1)i=1,a<=n&&n<u&&a<=r&&r<u&&c.isDark(o,Math.floor((n-a)/t))&&(i=0),g+=i?l:f;for(o=0;o<t;o+=1)h+=g+"\n"}return h.substring(0,h.length-1)},c.renderTo2dContext=function(t,e){e=e||2;for(var r=c.getModuleCount(),n=0;n<r;n++)for(var o=0;o<r;o++)t.fillStyle=c.isDark(n,o)?"black":"white",t.fillRect(n*e,o*e,e,e)},c};t.stringToBytes=(t.stringToBytesFuncs={default:function(t){for(var e=[],r=0;r<t.length;r+=1){var n=t.charCodeAt(r);e.push(255&n)}return e}}).default,t.createStringToBytes=function(t,e){var r=function(){for(var r=x(t),n=function(){var t=r.read();if(-1==t)throw"eof";return t},o=0,i={};;){var s=r.read();if(-1==s)break;var a=n(),c=n()<<8|n();i[String.fromCharCode(s<<8|a)]=c,o+=1}if(o!=e)throw o+" != "+e;return i}(),n="?".charCodeAt(0);return function(t){for(var e=[],o=0;o<t.length;o+=1){var i=t.charCodeAt(o);if(i<128)e.push(i);else{var s=r[t.charAt(o)];"number"==typeof s?(255&s)==s?e.push(s):(e.push(s>>>8),e.push(255&s)):e.push(n)}}return e}};var e,r,n,o,i,s=1,a=2,c=4,u=8,l={L:1,M:0,Q:3,H:2},f=0,h=1,g=2,d=3,p=4,A=5,y=6,I=7,b=(e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],r=1335,n=7973,i=function(t){for(var e=0;0!=t;)e+=1,t>>>=1;return e},(o={}).getBCHTypeInfo=function(t){for(var e=t<<10;i(e)-i(r)>=0;)e^=r<<i(e)-i(r);return 21522^(t<<10|e)},o.getBCHTypeNumber=function(t){for(var e=t<<12;i(e)-i(n)>=0;)e^=n<<i(e)-i(n);return t<<12|e},o.getPatternPosition=function(t){return e[t-1]},o.getMaskFunction=function(t){switch(t){case f:return function(t,e){return(t+e)%2==0};case h:return function(t,e){return t%2==0};case g:return function(t,e){return e%3==0};case d:return function(t,e){return(t+e)%3==0};case p:return function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0};case A:return function(t,e){return t*e%2+t*e%3==0};case y:return function(t,e){return(t*e%2+t*e%3)%2==0};case I:return function(t,e){return(t*e%3+(t+e)%2)%2==0};default:throw"bad maskPattern:"+t}},o.getErrorCorrectPolynomial=function(t){for(var e=w([1],0),r=0;r<t;r+=1)e=e.multiply(w([1,m.gexp(r)],0));return e},o.getLengthInBits=function(t,e){if(1<=e&&e<10)switch(t){case s:return 10;case a:return 9;case c:case u:return 8;default:throw"mode:"+t}else if(e<27)switch(t){case s:return 12;case a:return 11;case c:return 16;case u:return 10;default:throw"mode:"+t}else{if(!(e<41))throw"type:"+e;switch(t){case s:return 14;case a:return 13;case c:return 16;case u:return 12;default:throw"mode:"+t}}},o.getLostPoint=function(t){for(var e=t.getModuleCount(),r=0,n=0;n<e;n+=1)for(var o=0;o<e;o+=1){for(var i=0,s=t.isDark(n,o),a=-1;a<=1;a+=1)if(!(n+a<0||e<=n+a))for(var c=-1;c<=1;c+=1)o+c<0||e<=o+c||0==a&&0==c||s==t.isDark(n+a,o+c)&&(i+=1);i>5&&(r+=3+i-5)}for(n=0;n<e-1;n+=1)for(o=0;o<e-1;o+=1){var u=0;t.isDark(n,o)&&(u+=1),t.isDark(n+1,o)&&(u+=1),t.isDark(n,o+1)&&(u+=1),t.isDark(n+1,o+1)&&(u+=1),0!=u&&4!=u||(r+=3)}for(n=0;n<e;n+=1)for(o=0;o<e-6;o+=1)t.isDark(n,o)&&!t.isDark(n,o+1)&&t.isDark(n,o+2)&&t.isDark(n,o+3)&&t.isDark(n,o+4)&&!t.isDark(n,o+5)&&t.isDark(n,o+6)&&(r+=40);for(o=0;o<e;o+=1)for(n=0;n<e-6;n+=1)t.isDark(n,o)&&!t.isDark(n+1,o)&&t.isDark(n+2,o)&&t.isDark(n+3,o)&&t.isDark(n+4,o)&&!t.isDark(n+5,o)&&t.isDark(n+6,o)&&(r+=40);var l=0;for(o=0;o<e;o+=1)for(n=0;n<e;n+=1)t.isDark(n,o)&&(l+=1);return r+=Math.abs(100*l/e/e-50)/5*10},o),m=function(){for(var t=new Array(256),e=new Array(256),r=0;r<8;r+=1)t[r]=1<<r;for(r=8;r<256;r+=1)t[r]=t[r-4]^t[r-5]^t[r-6]^t[r-8];for(r=0;r<255;r+=1)e[t[r]]=r;var n={glog:function(t){if(t<1)throw"glog("+t+")";return e[t]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return t[e]}};return n}();function w(t,e){if(void 0===t.length)throw t.length+"/"+e;var r=function(){for(var r=0;r<t.length&&0==t[r];)r+=1;for(var n=new Array(t.length-r+e),o=0;o<t.length-r;o+=1)n[o]=t[o+r];return n}(),n={getAt:function(t){return r[t]},getLength:function(){return r.length},multiply:function(t){for(var e=new Array(n.getLength()+t.getLength()-1),r=0;r<n.getLength();r+=1)for(var o=0;o<t.getLength();o+=1)e[r+o]^=m.gexp(m.glog(n.getAt(r))+m.glog(t.getAt(o)));return w(e,0)},mod:function(t){if(n.getLength()-t.getLength()<0)return n;for(var e=m.glog(n.getAt(0))-m.glog(t.getAt(0)),r=new Array(n.getLength()),o=0;o<n.getLength();o+=1)r[o]=n.getAt(o);for(o=0;o<t.getLength();o+=1)r[o]^=m.gexp(m.glog(t.getAt(o))+e);return w(r,0).mod(t)}};return n}var E=function(){var t=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e=function(t,e){var r={};return r.totalCount=t,r.dataCount=e,r},r={};return r.getRSBlocks=function(r,n){var o=function(e,r){switch(r){case l.L:return t[4*(e-1)+0];case l.M:return t[4*(e-1)+1];case l.Q:return t[4*(e-1)+2];case l.H:return t[4*(e-1)+3];default:return}}(r,n);if(void 0===o)throw"bad rs block @ typeNumber:"+r+"/errorCorrectionLevel:"+n;for(var i=o.length/3,s=[],a=0;a<i;a+=1)for(var c=o[3*a+0],u=o[3*a+1],f=o[3*a+2],h=0;h<c;h+=1)s.push(e(u,f));return s},r}(),C=function(){var t=[],e=0,r={getBuffer:function(){return t},getAt:function(e){var r=Math.floor(e/8);return 1==(t[r]>>>7-e%8&1)},put:function(t,e){for(var n=0;n<e;n+=1)r.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return e},putBit:function(r){var n=Math.floor(e/8);t.length<=n&&t.push(0),r&&(t[n]|=128>>>e%8),e+=1}};return r},_=function(t){var e=s,r=t,n={getMode:function(){return e},getLength:function(t){return r.length},write:function(t){for(var e=r,n=0;n+2<e.length;)t.put(o(e.substring(n,n+3)),10),n+=3;n<e.length&&(e.length-n==1?t.put(o(e.substring(n,n+1)),4):e.length-n==2&&t.put(o(e.substring(n,n+2)),7))}},o=function(t){for(var e=0,r=0;r<t.length;r+=1)e=10*e+i(t.charAt(r));return e},i=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+t};return n},v=function(t){var e=a,r=t,n={getMode:function(){return e},getLength:function(t){return r.length},write:function(t){for(var e=r,n=0;n+1<e.length;)t.put(45*o(e.charAt(n))+o(e.charAt(n+1)),11),n+=2;n<e.length&&t.put(o(e.charAt(n)),6)}},o=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);if("A"<=t&&t<="Z")return t.charCodeAt(0)-"A".charCodeAt(0)+10;switch(t){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+t}};return n},B=function(e){var r=c,n=t.stringToBytes(e),o={getMode:function(){return r},getLength:function(t){return n.length},write:function(t){for(var e=0;e<n.length;e+=1)t.put(n[e],8)}};return o},S=function(e){var r=u,n=t.stringToBytesFuncs.SJIS;if(!n)throw"sjis not supported.";!function(t,e){var r=n("友");if(2!=r.length||38726!=(r[0]<<8|r[1]))throw"sjis not supported."}();var o=n(e),i={getMode:function(){return r},getLength:function(t){return~~(o.length/2)},write:function(t){for(var e=o,r=0;r+1<e.length;){var n=(255&e[r])<<8|255&e[r+1];if(33088<=n&&n<=40956)n-=33088;else{if(!(57408<=n&&n<=60351))throw"illegal char at "+(r+1)+"/"+n;n-=49472}n=192*(n>>>8&255)+(255&n),t.put(n,13),r+=2}if(r<e.length)throw"illegal char at "+(r+1)}};return i},k=function(){var t=[],e={writeByte:function(e){t.push(255&e)},writeShort:function(t){e.writeByte(t),e.writeByte(t>>>8)},writeBytes:function(t,r,n){r=r||0,n=n||t.length;for(var o=0;o<n;o+=1)e.writeByte(t[o+r])},writeString:function(t){for(var r=0;r<t.length;r+=1)e.writeByte(t.charCodeAt(r))},toByteArray:function(){return t},toString:function(){var e="";e+="[";for(var r=0;r<t.length;r+=1)r>0&&(e+=","),e+=t[r];return e+="]"}};return e},x=function(t){var e=t,r=0,n=0,o=0,i={read:function(){for(;o<8;){if(r>=e.length){if(0==o)return-1;throw"unexpected end of file./"+o}var t=e.charAt(r);if(r+=1,"="==t)return o=0,-1;t.match(/^\s$/)||(n=n<<6|s(t.charCodeAt(0)),o+=6)}var i=n>>>o-8&255;return o-=8,i}},s=function(t){if(65<=t&&t<=90)return t-65;if(97<=t&&t<=122)return t-97+26;if(48<=t&&t<=57)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw"c:"+t};return i},Q=function(t,e,r){for(var n=function(t,e){var r=t,n=e,o=new Array(t*e),i={setPixel:function(t,e,n){o[e*r+t]=n},write:function(t){t.writeString("GIF87a"),t.writeShort(r),t.writeShort(n),t.writeByte(128),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(255),t.writeByte(255),t.writeByte(255),t.writeString(","),t.writeShort(0),t.writeShort(0),t.writeShort(r),t.writeShort(n),t.writeByte(0);var e=s(2);t.writeByte(2);for(var o=0;e.length-o>255;)t.writeByte(255),t.writeBytes(e,o,255),o+=255;t.writeByte(e.length-o),t.writeBytes(e,o,e.length-o),t.writeByte(0),t.writeString(";")}},s=function(t){for(var e=1<<t,r=1+(1<<t),n=t+1,i=a(),s=0;s<e;s+=1)i.add(String.fromCharCode(s));i.add(String.fromCharCode(e)),i.add(String.fromCharCode(r));var c=k(),u=function(t){var e=t,r=0,n=0,o={write:function(t,o){if(t>>>o!=0)throw"length over";for(;r+o>=8;)e.writeByte(255&(t<<r|n)),o-=8-r,t>>>=8-r,n=0,r=0;n|=t<<r,r+=o},flush:function(){r>0&&e.writeByte(n)}};return o}(c);u.write(e,n);var l=0,f=String.fromCharCode(o[l]);for(l+=1;l<o.length;){var h=String.fromCharCode(o[l]);l+=1,i.contains(f+h)?f+=h:(u.write(i.indexOf(f),n),i.size()<4095&&(i.size()==1<<n&&(n+=1),i.add(f+h)),f=h)}return u.write(i.indexOf(f),n),u.write(r,n),u.flush(),c.toByteArray()},a=function(){var t={},e=0,r={add:function(n){if(r.contains(n))throw"dup key:"+n;t[n]=e,e+=1},size:function(){return e},indexOf:function(e){return t[e]},contains:function(e){return void 0!==t[e]}};return r};return i}(t,e),o=0;o<e;o+=1)for(var i=0;i<t;i+=1)n.setPixel(i,o,r(i,o));var s=k();n.write(s);for(var a=function(){var t=0,e=0,r=0,n="",o={},i=function(t){n+=String.fromCharCode(s(63&t))},s=function(t){if(t<0);else{if(t<26)return 65+t;if(t<52)return t-26+97;if(t<62)return t-52+48;if(62==t)return 43;if(63==t)return 47}throw"n:"+t};return o.writeByte=function(n){for(t=t<<8|255&n,e+=8,r+=1;e>=6;)i(t>>>e-6),e-=6},o.flush=function(){if(e>0&&(i(t<<6-e),t=0,e=0),r%3!=0)for(var o=3-r%3,s=0;s<o;s+=1)n+="="},o.toString=function(){return n},o}(),c=s.toByteArray(),u=0;u<c.length;u+=1)a.writeByte(c[u]);return a.flush(),"data:image/gif;base64,"+a};return t}();r.stringToBytesFuncs["UTF-8"]=function(t){return function(t){for(var e=[],r=0;r<t.length;r++){var n=t.charCodeAt(r);n<128?e.push(n):n<2048?e.push(192|n>>6,128|63&n):n<55296||n>=57344?e.push(224|n>>12,128|n>>6&63,128|63&n):(r++,n=65536+((1023&n)<<10|1023&t.charCodeAt(r)),e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return e}(t)},t.exports=r}(Pm);var Fm=Pm.exports;function $m(t){let e,r;return{c(){e=XI("pico-qr"),r=XI("img"),sb(e,"class","svelte-1qaazc0")},m(n,o){zI(n,e,o),VI(e,r),t[5](r)},p:QI,i:QI,o:QI,d(r){r&&WI(e),t[5](null)}}}function Nm(t,e,r){let n,{data:i=null}=e,{size:s=2}=e,{margin:a=0}=e,{level:c="L"}=e;function u(t){if(!t)return;o.Buffer.isBuffer(t)&&(t=t.toString("base64"));const e=new Fm(0,c);e.addData(t),e.make();const i=e.createDataURL(s,a);r(0,n.src=i,n)}return gb((()=>{if("function"==typeof i?.subscribe)return i.subscribe(u);i&&u(i)})),t.$$set=t=>{"data"in t&&r(1,i=t.data),"size"in t&&r(2,s=t.size),"margin"in t&&r(3,a=t.margin),"level"in t&&r(4,c=t.level)},[n,i,s,a,c,function(t){yb[t?"unshift":"push"]((()=>{n=t,r(0,n)}))}]}class Rm extends jb{constructor(t){super(),Yb(this,t,Nm,$m,LI,{data:1,size:2,margin:3,level:4})}}function Ym(t){let e,r,n,o,i,s=t[38].message+"";return{c(){e=XI("div"),r=XI("h5"),r.textContent="Error:",n=eb(),o=XI("danger"),i=tb(s),ib(o,"class","svelte-1rqfs0r")},m(t,s){zI(t,e,s),VI(e,r),VI(e,n),VI(e,o),VI(o,i)},p:QI,i:QI,o:QI,d(t){t&&WI(e)}}}function jm(t){let e,r,n,o;const i=[Hm,Km],s=[];function a(t,e){return t[3]?1:0}return e=a(t),r=s[e]=i[e](t),{c(){r.c(),n=rb()},m(t,r){s[e].m(t,r),zI(t,n,r),o=!0},p(t,o){let c=e;e=a(t),e===c?s[e].p(t,o):(Qb(),Ob(s[c],1,1,(()=>{s[c]=null})),Mb(),r=s[e],r?r.p(t,o):(r=s[e]=i[e](t),r.c()),Db(r,1),r.m(n.parentNode,n))},i(t){o||(Db(r),o=!0)},o(t){Ob(r),o=!1},d(t){s[e].d(t),t&&WI(n)}}}function Km(t){let e,r;return e=new Rm({props:{data:t[3].slice(32),size:10}}),{c(){Fb(e.$$.fragment)},m(t,n){$b(e,t,n),r=!0},p(t,r){const n={};8&r[0]&&(n.data=t[3].slice(32)),e.$set(n)},i(t){r||(Db(e.$$.fragment,t),r=!0)},o(t){Ob(e.$$.fragment,t),r=!1},d(t){Nb(e,t)}}}function Hm(t){let e,r,n,o,i,s,a,c,u,l,f;function h(t,e){return 100===t[0]?qm:Gm}let g=h(t),d=g(t),p=t[1]>1&&Vm(t),A=t[2]&&zm();return{c(){e=XI("div"),d.c(),r=eb(),n=XI("div"),o=XI("div"),p&&p.c(),i=eb(),s=XI("button"),a=tb("Create"),u=eb(),A&&A.c(),s.disabled=c=100!==t[0]||t[3],ib(o,"class","row space-between xcenter")},m(c,h){zI(c,e,h),d.m(e,null),zI(c,r,h),zI(c,n,h),VI(n,o),p&&p.m(o,null),VI(o,i),VI(o,s),VI(s,a),VI(n,u),A&&A.m(n,null),l||(f=nb(s,"click",t[25]),l=!0)},p(t,r){g===(g=h(t))&&d?d.p(t,r):(d.d(1),d=g(t),d&&(d.c(),d.m(e,null))),t[1]>1?p?p.p(t,r):(p=Vm(t),p.c(),p.m(o,i)):p&&(p.d(1),p=null),9&r[0]&&c!==(c=100!==t[0]||t[3])&&(s.disabled=c),t[2]?A||(A=zm(),A.c(),A.m(n,null)):A&&(A.d(1),A=null)},i:QI,o:QI,d(t){t&&WI(e),d.d(),t&&WI(r),t&&WI(n),p&&p.d(),A&&A.d(),l=!1,f()}}}function Gm(t){let e;return{c(){e=XI("progress"),ib(e,"min","0"),ib(e,"max","100"),e.value=t[0]},m(t,r){zI(t,e,r)},p(t,r){1&r[0]&&(e.value=t[0])},d(t){t&&WI(e)}}}function qm(t){let e;return{c(){e=XI("p"),e.textContent="Press the button to generate your own unique passport",ib(e,"class","text-center")},m(t,r){zI(t,e,r)},p:QI,d(t){t&&WI(e)}}}function Vm(t){let e,r,n,o,i;return{c(){e=XI("button"),r=tb("Give up"),e.disabled=n=100!==t[0]},m(n,s){zI(n,e,s),VI(e,r),o||(i=nb(e,"click",t[24]),o=!0)},p(t,r){1&r[0]&&n!==(n=100!==t[0])&&(e.disabled=n)},d(t){t&&WI(e),o=!1,i()}}}function zm(t){let e;return{c(){e=XI("danger"),e.textContent="Sorry.. RNG0D ignored your prayers, please try again",ib(e,"class","svelte-1rqfs0r")},m(t,r){zI(t,e,r)},d(t){t&&WI(e)}}}function Wm(t){let e;return{c(){e=XI("h1"),e.textContent="%nbsp;",ib(e,"aria-busy","true")},m(t,r){zI(t,e,r)},p:QI,i:QI,o:QI,d(t){t&&WI(e)}}}function Jm(t){let e,r,n,o,i;return{c(){e=XI("a"),e.textContent="Anonkey",r=tb(" |\n        "),n=XI("a"),n.textContent="Import"},m(s,a){zI(s,e,a),zI(s,r,a),zI(s,n,a),o||(i=[nb(e,"click",t[27]),nb(n,"click",t[28])],o=!0)},p:QI,d(t){t&&WI(e),t&&WI(r),t&&WI(n),o=!1,OI(i)}}}function Xm(t){let e,r,n,o,i;return{c(){e=XI("a"),e.textContent="Destroy",r=tb(" |\n        "),n=XI("a"),n.textContent="Backup"},m(s,a){zI(s,e,a),zI(s,r,a),zI(s,n,a),o||(i=[nb(e,"click",t[26]),nb(n,"click",km)],o=!0)},p:QI,d(t){t&&WI(e),t&&WI(r),t&&WI(n),o=!1,OI(i)}}}function Zm(t){let e,r;return e=new Om({props:{open:!0,$$slots:{default:[tw]},$$scope:{ctx:t}}}),e.$on("fade",t[32]),{c(){Fb(e.$$.fragment)},m(t,n){$b(e,t,n),r=!0},p(t,r){const n={};192&r[0]|256&r[1]&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){r||(Db(e.$$.fragment,t),r=!0)},o(t){Ob(e.$$.fragment,t),r=!1},d(t){Nb(e,t)}}}function tw(t){let e,r,n,o,i,s,a,c,u,l,f,h,g,d;return{c(){e=XI("article"),r=XI("header"),r.innerHTML="<h5>Import Secret</h5>",n=eb(),o=XI("p"),o.textContent="Paste the secret as a hex-string",i=eb(),s=XI("textarea"),a=eb(),c=XI("footer"),u=XI("div"),l=XI("a"),l.textContent="Cancel",f=eb(),h=XI("a"),h.textContent="Import",ib(l,"role","button"),ib(h,"role","button"),ib(u,"class","row space-between")},m(p,A){zI(p,e,A),VI(e,r),VI(e,n),VI(e,o),VI(e,i),VI(e,s),cb(s,t[7]),VI(e,a),VI(e,c),VI(c,u),VI(u,l),VI(u,f),VI(u,h),g||(d=[nb(s,"input",t[30]),nb(l,"click",t[31]),nb(h,"click",ow)],g=!0)},p(t,e){128&e[0]&&cb(s,t[7])},d(t){t&&WI(e),g=!1,OI(d)}}}function ew(t){let e,r;return e=new Om({props:{open:!0,$$slots:{default:[rw]},$$scope:{ctx:t}}}),e.$on("fade",t[34]),{c(){Fb(e.$$.fragment)},m(t,n){$b(e,t,n),r=!0},p(t,r){const n={};32&r[0]|256&r[1]&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){r||(Db(e.$$.fragment,t),r=!0)},o(t){Ob(e.$$.fragment,t),r=!1},d(t){Nb(e,t)}}}function rw(t){let e,r,n,o,i,s,a,c,u;return{c(){e=XI("article"),r=XI("h3"),r.textContent="Welcome to True Decentralization",n=eb(),o=XI("div"),o.innerHTML="<p>Picochat is a <strong>coinless blockchain</strong>, there\n            are no super-nodes and everything is slightly different from\n            what you&#39;re used to.<br/>\n            But don&#39;t worry, it&#39;s all good.</p> \n          <p>First of all, you have to generate your own key.<br/>\n            It takes about a minute or two on a handheld device.<br/>\n            Once you&#39;ve found a one, keep it safe, it&#39;s your passport to hyperspace.\n            ✨</p> \n          <p>If you don&#39;t care about location nor gender, then\n            feel free to use an <i>anonymous</i> key.<br/>\n            Trees say &quot;Thanks!&quot; 🌱</p> \n          <p>Please don&#39;t generate more keys than you need, mining of any form is a pointless waste of world-resources.\n            Hate to say it; but don&#39;t ever trade a key, it is <strong>insecure and dangerous</strong>.</p> \n          <p><i>The hyperspace is vast.<br/>\n            It&#39;s real-estate, just like air -\n            worth nothing while there&#39;s enough for everyone.<br/>\n            Let&#39;s keep it that way</i> 🙂</p>",i=eb(),s=XI("footer"),a=XI("button"),a.textContent="gotcha",ib(o,"class","about svelte-1rqfs0r")},m(l,f){zI(l,e,f),VI(e,r),VI(e,n),VI(e,o),VI(e,i),VI(e,s),VI(s,a),c||(u=nb(a,"click",t[33]),c=!0)},p:QI,d(t){t&&WI(e),c=!1,u()}}}function nw(t){let e,r,n,o,i,s,a,c,u,l,f,h,g,d,p,A,y,I,b,m,w,E,C,_,v,B,S,k,x,Q,M,D,O,U,L,T,P,F,$,N;o=new Tm({props:{id:"icon-info"}});let R={ctx:t,current:null,token:null,hasCatch:!0,pending:Wm,then:jm,catch:Ym,error:38,blocks:[,,,]};function Y(t,e){return t[3]?Xm:Jm}Ub(t[17](),R);let j=Y(t),K=j(t),H=t[6]&&Zm(t),G=t[5]&&ew(t);return{c(){e=XI("keygen-view"),r=XI("h1"),n=tb("Setup\n    "),Fb(o.$$.fragment),i=eb(),s=XI("h5"),s.textContent="Gender",a=eb(),c=XI("fieldset"),u=XI("input"),l=eb(),f=XI("label"),f.textContent="M",h=eb(),g=XI("input"),d=eb(),p=XI("label"),p.textContent="F",A=eb(),y=XI("input"),I=eb(),b=XI("label"),b.textContent="NB",m=eb(),w=XI("br"),E=eb(),C=XI("h5"),C.textContent="IDSQR",_=eb(),v=XI("div"),B=XI("idsqr"),R.block.c(),S=eb(),k=XI("div"),x=XI("small"),K.c(),Q=eb(),M=XI("br"),D=eb(),O=XI("button"),U=tb("next"),T=eb(),H&&H.c(),P=eb(),G&&G.c(),ib(u,"type","radio"),u.__value=1,u.value=u.__value,ib(u,"id","M"),ib(u,"name","gender"),t[21][0].push(u),ib(f,"for","M"),ib(g,"type","radio"),g.__value=0,g.value=g.__value,ib(g,"id","F"),ib(g,"name","gender"),t[21][0].push(g),ib(p,"for","F"),ib(y,"type","radio"),y.__value=2,y.value=y.__value,ib(y,"id","NB"),ib(y,"name","gender"),t[21][0].push(y),ib(b,"for","NB"),ib(B,"data-theme","dark"),ib(B,"class","flex column space-around"),ib(v,"class","flex column xcenter"),ib(k,"class","row end hpad"),O.disabled=L=!t[3],sb(e,"class","block container")},m(L,Y){zI(L,e,Y),VI(e,r),VI(r,n),$b(o,r,null),VI(e,i),VI(e,s),VI(e,a),VI(e,c),VI(c,u),u.checked=u.__value===t[4],VI(c,l),VI(c,f),VI(c,h),VI(c,g),g.checked=g.__value===t[4],VI(c,d),VI(c,p),VI(c,A),VI(c,y),y.checked=y.__value===t[4],VI(c,I),VI(c,b),VI(e,m),VI(e,w),VI(e,E),VI(e,C),VI(e,_),VI(e,v),VI(v,B),R.block.m(B,R.anchor=null),R.mount=()=>B,R.anchor=null,VI(e,S),VI(e,k),VI(k,x),K.m(x,null),VI(e,Q),VI(e,M),VI(e,D),VI(e,O),VI(O,U),VI(e,T),H&&H.m(e,null),VI(e,P),G&&G.m(e,null),F=!0,$||(N=[nb(r,"click",t[19]),nb(u,"change",t[20]),nb(g,"change",t[22]),nb(y,"change",t[23]),nb(O,"click",t[29])],$=!0)},p(r,n){t=r,16&n[0]&&(u.checked=u.__value===t[4]),16&n[0]&&(g.checked=g.__value===t[4]),16&n[0]&&(y.checked=y.__value===t[4]),Lb(R,t,n),j===(j=Y(t))&&K?K.p(t,n):(K.d(1),K=j(t),K&&(K.c(),K.m(x,null))),(!F||8&n[0]&&L!==(L=!t[3]))&&(O.disabled=L),t[6]?H?(H.p(t,n),64&n[0]&&Db(H,1)):(H=Zm(t),H.c(),Db(H,1),H.m(e,P)):H&&(Qb(),Ob(H,1,1,(()=>{H=null})),Mb()),t[5]?G?(G.p(t,n),32&n[0]&&Db(G,1)):(G=ew(t),G.c(),Db(G,1),G.m(e,null)):G&&(Qb(),Ob(G,1,1,(()=>{G=null})),Mb())},i(t){F||(Db(o.$$.fragment,t),Db(R.block),Db(H),Db(G),F=!0)},o(t){Ob(o.$$.fragment,t);for(let t=0;t<3;t+=1){Ob(R.blocks[t])}Ob(H),Ob(G),F=!1},d(r){r&&WI(e),Nb(o),t[21][0].splice(t[21][0].indexOf(u),1),t[21][0].splice(t[21][0].indexOf(g),1),t[21][0].splice(t[21][0].indexOf(y),1),R.block.d(),R.token=null,R=null,K.d(),H&&H.d(),G&&G.d(),$=!1,OI(N)}}}async function ow(){console.error("TODO: not yet implemented")}function iw(t,e,r){let n,o,i,s,a,c,u,l,f;const h=Gb(100);NI(t,h,(t=>r(0,o=t)));const g=Gb();NI(t,g,(t=>r(3,a=t)));const d=Gb(null);NI(t,d,(t=>r(35,n=t)));const p=Gb(0);NI(t,p,(t=>r(4,c=t)));const A=Gb(!1);NI(t,A,(t=>r(2,s=t)));const y=Gb(0);NI(t,y,(t=>r(1,i=t)));const I=Gb(!1);NI(t,I,(t=>r(6,l=t)));const b=Gb("");NI(t,b,(t=>r(7,f=t)));const m=Gb(!1);async function w(t=0){if(a)return;console.info(`roll(${t})`),qI(h,o=0,o),qI(A,s=!1,s);let e=null;for(let r=0;r<100&&(qI(h,o++,o),e=em(t<2?c:null,t<1?n:null,500),!e);r++)await new Promise((t=>setTimeout(t,100)));e?(await async function(t){await tm.writeIdentity(t),dm(!0)}(e.sk),qI(g,a=e.sk,a)):(qI(A,s=!0,s),qI(y,i++,i)),qI(h,o=100,o)}NI(t,m,(t=>r(5,u=t)));return[o,i,s,a,c,u,l,f,h,g,d,p,A,y,I,b,m,async function(){try{const t=await tm.readIdentity();if(!t)return;qI(g,a=t,a);const e=rm(t.slice(32));qI(p,c=e.sex,c),qI(d,n=e.geohash,n)}catch(t){throw console.error("loadKeychain() failed:",t),t}},w,()=>qI(m,u=!0,u),function(){c=this.__value,p.set(c)},[[]],function(){c=this.__value,p.set(c)},function(){c=this.__value,p.set(c)},()=>w(1),()=>w(1),()=>Sm(!0),()=>w(2),()=>qI(I,l=!0,l),()=>YB("/profile"),function(){f=this.value,b.set(f)},()=>qI(I,l=!1,l),()=>qI(I,l=!1,l),()=>qI(m,u=!1,u),()=>qI(m,u=!1,u)]}class sw extends jb{constructor(t){super(),Yb(this,t,iw,nw,LI,{},null,[-1,-1])}}var aw={exports:{}};!function(t,e){t.exports=function(){var t=1e3,e=6e4,r=36e5,n="millisecond",o="second",i="minute",s="hour",a="day",c="week",u="month",l="quarter",f="year",h="date",g="Invalid Date",d=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,A={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},y=function(t,e,r){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(r)+t},I={s:y,z:function(t){var e=-t.utcOffset(),r=Math.abs(e),n=Math.floor(r/60),o=r%60;return(e<=0?"+":"-")+y(n,2,"0")+":"+y(o,2,"0")},m:function t(e,r){if(e.date()<r.date())return-t(r,e);var n=12*(r.year()-e.year())+(r.month()-e.month()),o=e.clone().add(n,u),i=r-o<0,s=e.clone().add(n+(i?-1:1),u);return+(-(n+(r-o)/(i?o-s:s-o))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:u,y:f,w:c,d:a,D:h,h:s,m:i,s:o,ms:n,Q:l}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},b="en",m={};m[b]=A;var w=function(t){return t instanceof v},E=function(t,e,r){var n;if(!t)return b;if("string"==typeof t)m[t]&&(n=t),e&&(m[t]=e,n=t);else{var o=t.name;m[o]=t,n=o}return!r&&n&&(b=n),n||!r&&b},C=function(t,e){if(w(t))return t.clone();var r="object"==typeof e?e:{};return r.date=t,r.args=arguments,new v(r)},_=I;_.l=E,_.i=w,_.w=function(t,e){return C(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var v=function(){function A(t){this.$L=E(t.locale,null,!0),this.parse(t)}var y=A.prototype;return y.parse=function(t){this.$d=function(t){var e=t.date,r=t.utc;if(null===e)return new Date(NaN);if(_.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(d);if(n){var o=n[2]-1||0,i=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)):new Date(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},y.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},y.$utils=function(){return _},y.isValid=function(){return!(this.$d.toString()===g)},y.isSame=function(t,e){var r=C(t);return this.startOf(e)<=r&&r<=this.endOf(e)},y.isAfter=function(t,e){return C(t)<this.startOf(e)},y.isBefore=function(t,e){return this.endOf(e)<C(t)},y.$g=function(t,e,r){return _.u(t)?this[e]:this.set(r,t)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(t,e){var r=this,n=!!_.u(e)||e,l=_.p(t),g=function(t,e){var o=_.w(r.$u?Date.UTC(r.$y,e,t):new Date(r.$y,e,t),r);return n?o:o.endOf(a)},d=function(t,e){return _.w(r.toDate()[t].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(e)),r)},p=this.$W,A=this.$M,y=this.$D,I="set"+(this.$u?"UTC":"");switch(l){case f:return n?g(1,0):g(31,11);case u:return n?g(1,A):g(0,A+1);case c:var b=this.$locale().weekStart||0,m=(p<b?p+7:p)-b;return g(n?y-m:y+(6-m),A);case a:case h:return d(I+"Hours",0);case s:return d(I+"Minutes",1);case i:return d(I+"Seconds",2);case o:return d(I+"Milliseconds",3);default:return this.clone()}},y.endOf=function(t){return this.startOf(t,!1)},y.$set=function(t,e){var r,c=_.p(t),l="set"+(this.$u?"UTC":""),g=(r={},r[a]=l+"Date",r[h]=l+"Date",r[u]=l+"Month",r[f]=l+"FullYear",r[s]=l+"Hours",r[i]=l+"Minutes",r[o]=l+"Seconds",r[n]=l+"Milliseconds",r)[c],d=c===a?this.$D+(e-this.$W):e;if(c===u||c===f){var p=this.clone().set(h,1);p.$d[g](d),p.init(),this.$d=p.set(h,Math.min(this.$D,p.daysInMonth())).$d}else g&&this.$d[g](d);return this.init(),this},y.set=function(t,e){return this.clone().$set(t,e)},y.get=function(t){return this[_.p(t)]()},y.add=function(n,l){var h,g=this;n=Number(n);var d=_.p(l),p=function(t){var e=C(g);return _.w(e.date(e.date()+Math.round(t*n)),g)};if(d===u)return this.set(u,this.$M+n);if(d===f)return this.set(f,this.$y+n);if(d===a)return p(1);if(d===c)return p(7);var A=(h={},h[i]=e,h[s]=r,h[o]=t,h)[d]||1,y=this.$d.getTime()+n*A;return _.w(y,this)},y.subtract=function(t,e){return this.add(-1*t,e)},y.format=function(t){var e=this,r=this.$locale();if(!this.isValid())return r.invalidDate||g;var n=t||"YYYY-MM-DDTHH:mm:ssZ",o=_.z(this),i=this.$H,s=this.$m,a=this.$M,c=r.weekdays,u=r.months,l=function(t,r,o,i){return t&&(t[r]||t(e,n))||o[r].substr(0,i)},f=function(t){return _.s(i%12||12,t,"0")},h=r.meridiem||function(t,e,r){var n=t<12?"AM":"PM";return r?n.toLowerCase():n},d={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:_.s(a+1,2,"0"),MMM:l(r.monthsShort,a,u,3),MMMM:l(u,a),D:this.$D,DD:_.s(this.$D,2,"0"),d:String(this.$W),dd:l(r.weekdaysMin,this.$W,c,2),ddd:l(r.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(i),HH:_.s(i,2,"0"),h:f(1),hh:f(2),a:h(i,s,!0),A:h(i,s,!1),m:String(s),mm:_.s(s,2,"0"),s:String(this.$s),ss:_.s(this.$s,2,"0"),SSS:_.s(this.$ms,3,"0"),Z:o};return n.replace(p,(function(t,e){return e||d[t]||o.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(n,h,g){var d,p=_.p(h),A=C(n),y=(A.utcOffset()-this.utcOffset())*e,I=this-A,b=_.m(this,A);return b=(d={},d[f]=b/12,d[u]=b,d[l]=b/3,d[c]=(I-y)/6048e5,d[a]=(I-y)/864e5,d[s]=I/r,d[i]=I/e,d[o]=I/t,d)[p]||I,g?b:_.a(b)},y.daysInMonth=function(){return this.endOf(u).$D},y.$locale=function(){return m[this.$L]},y.locale=function(t,e){if(!t)return this.$L;var r=this.clone(),n=E(t,e,!0);return n&&(r.$L=n),r},y.clone=function(){return _.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},A}(),B=v.prototype;return C.prototype=B,[["$ms",n],["$s",o],["$m",i],["$H",s],["$W",a],["$M",u],["$y",f],["$D",h]].forEach((function(t){B[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),C.extend=function(t,e){return t.$i||(t(e,v,C),t.$i=!0),C},C.locale=E,C.isDayjs=w,C.unix=function(t){return C(1e3*t)},C.en=m[b],C.Ls=m,C.p={},C}()}(aw);var cw=aw.exports;function uw(t){let e,r,n=cw.duration(t[1]>0?t[1]:0).format(t[0])+"";return{c(){e=XI("timer"),r=tb(n)},m(t,n){zI(t,e,n),VI(e,r)},p(t,[e]){3&e&&n!==(n=cw.duration(t[1]>0?t[1]:0).format(t[0])+"")&&ab(r,n)},i:QI,o:QI,d(t){t&&WI(e)}}}function lw(t,e,r){let n,{expiresAt:o}=e,{format:i="HH:mm"}=e,s=null;const a=Gb(o-Date.now());return NI(t,a,(t=>r(1,n=t))),gb((()=>(s&&(clearInterval(s),s=null),s=setInterval((()=>{qI(a,n=o-Date.now(),n),n<=0&&clearInterval(s)}),200),()=>{clearInterval(s)}))),t.$$set=t=>{"expiresAt"in t&&r(3,o=t.expiresAt),"format"in t&&r(0,i=t.format)},[i,n,a,o]}class fw extends jb{constructor(t){super(),Yb(this,t,lw,uw,LI,{expiresAt:3,format:0})}}var hw={},gw={},dw={},pw={};Object.defineProperty(pw,"__esModule",{value:!0}),pw.areaConversion=pw.timeConversion=pw.distanceConversion=pw.altitudeKeys=pw.latitudeKeys=pw.longitudeKeys=pw.MAXLON=pw.MINLON=pw.MAXLAT=pw.MINLAT=pw.earthRadius=pw.sexagesimalPattern=void 0;pw.sexagesimalPattern=/^([0-9]{1,3})°\s*([0-9]{1,3}(?:\.(?:[0-9]{1,}))?)['′]\s*(([0-9]{1,3}(\.([0-9]{1,}))?)["″]\s*)?([NEOSW]?)$/;pw.earthRadius=6378137;pw.MINLAT=-90;pw.MAXLAT=90;pw.MINLON=-180;pw.MAXLON=180;pw.longitudeKeys=["lng","lon","longitude",0];pw.latitudeKeys=["lat","latitude",1];pw.altitudeKeys=["alt","altitude","elevation","elev",2];pw.distanceConversion={m:1,km:.001,cm:100,mm:1e3,mi:1/1609.344,sm:1/1852.216,ft:100/30.48,in:100/2.54,yd:1/.9144};pw.timeConversion={m:60,h:3600,d:86400};var Aw={m2:1,km2:1e-6,ha:1e-4,a:.01,ft2:10.763911,yd2:1.19599,in2:1550.0031};pw.areaConversion=Aw,Aw.sqm=Aw.m2,Aw.sqkm=Aw.km2,Aw.sqft=Aw.ft2,Aw.sqyd=Aw.yd2,Aw.sqin=Aw.in2;var yw={};Object.defineProperty(yw,"__esModule",{value:!0}),yw.default=void 0;var Iw=function(t,e){return e.reduce((function(e,r){if(null==t)throw new Error("'".concat(t,"' is no valid coordinate."));return Object.prototype.hasOwnProperty.call(t,r)&&void 0!==r&&void 0===e?(e=r,r):e}),void 0)};yw.default=Iw;var bw={},mw={};Object.defineProperty(mw,"__esModule",{value:!0}),mw.default=void 0;var ww=function(t){var e=t.toString().trim();return!isNaN(parseFloat(e))&&parseFloat(e)===Number(e)};mw.default=ww;var Ew={};Object.defineProperty(Ew,"__esModule",{value:!0}),Ew.default=void 0;var Cw=pw,_w=function(t){return Cw.sexagesimalPattern.test(t.toString().trim())};Ew.default=_w;var vw={};Object.defineProperty(vw,"__esModule",{value:!0}),vw.default=void 0;var Bw=pw,Sw=function(t){var e=new RegExp(Bw.sexagesimalPattern).exec(t.toString().trim());if(null==e)throw new Error("Given value is not in sexagesimal format");var r=Number(e[2])/60||0,n=Number(e[4])/3600||0,o=parseFloat(e[1])+r+n;return["S","W"].includes(e[7])?-o:o};vw.default=Sw;var kw={},xw={};Object.defineProperty(xw,"__esModule",{value:!0}),xw.default=void 0;var Qw,Mw=pw,Dw=(Qw=yw)&&Qw.__esModule?Qw:{default:Qw};function Ow(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Uw(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ow(Object(r),!0).forEach((function(e){Lw(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ow(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Lw(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Tw=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{longitude:Mw.longitudeKeys,latitude:Mw.latitudeKeys,altitude:Mw.altitudeKeys},r=(0,Dw.default)(t,e.longitude),n=(0,Dw.default)(t,e.latitude),o=(0,Dw.default)(t,e.altitude);return Uw({latitude:n,longitude:r},o?{altitude:o}:{})};xw.default=Tw;var Pw={};Object.defineProperty(Pw,"__esModule",{value:!0}),Pw.default=void 0;var Fw=Yw(mw),$w=Yw(Ew),Nw=Yw(vw),Rw=pw;function Yw(t){return t&&t.__esModule?t:{default:t}}var jw=function t(e){return(0,Fw.default)(e)?!(parseFloat(e)>Rw.MAXLAT||e<Rw.MINLAT):!!(0,$w.default)(e)&&t((0,Nw.default)(e))};Pw.default=jw;var Kw={};Object.defineProperty(Kw,"__esModule",{value:!0}),Kw.default=void 0;var Hw=zw(mw),Gw=zw(Ew),qw=zw(vw),Vw=pw;function zw(t){return t&&t.__esModule?t:{default:t}}var Ww=function t(e){return(0,Hw.default)(e)?!(parseFloat(e)>Vw.MAXLON||e<Vw.MINLON):!!(0,Gw.default)(e)&&t((0,qw.default)(e))};Kw.default=Ww,Object.defineProperty(kw,"__esModule",{value:!0}),kw.default=void 0;var Jw=tE(xw),Xw=tE(Pw),Zw=tE(Kw);function tE(t){return t&&t.__esModule?t:{default:t}}var eE=function(t){var e=(0,Jw.default)(t),r=e.latitude,n=e.longitude;if(Array.isArray(t)&&t.length>=2)return(0,Zw.default)(t[0])&&(0,Xw.default)(t[1]);if(void 0===r||void 0===n)return!1;var o=t[n],i=t[r];return void 0!==i&&void 0!==o&&(!1!==(0,Xw.default)(i)&&!1!==(0,Zw.default)(o))};kw.default=eE,Object.defineProperty(bw,"__esModule",{value:!0}),bw.default=void 0;var rE=aE(mw),nE=aE(Ew),oE=aE(vw),iE=aE(kw),sE=aE(xw);function aE(t){return t&&t.__esModule?t:{default:t}}function cE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function uE(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?cE(Object(r),!0).forEach((function(e){lE(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cE(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function lE(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var fE=function t(e){if((0,rE.default)(e))return Number(e);if((0,nE.default)(e))return(0,oE.default)(e);if((0,iE.default)(e)){var r=(0,sE.default)(e);return Array.isArray(e)?e.map((function(e,r){return[0,1].includes(r)?t(e):e})):uE(uE(uE({},e),r.latitude&&lE({},r.latitude,t(e[r.latitude]))),r.longitude&&lE({},r.longitude,t(e[r.longitude])))}return Array.isArray(e)?e.map((function(e){return(0,iE.default)(e)?t(e):e})):e};bw.default=fE,Object.defineProperty(dw,"__esModule",{value:!0}),dw.default=void 0;var hE=pw,gE=pE(yw),dE=pE(bw);function pE(t){return t&&t.__esModule?t:{default:t}}var AE=function(t,e){var r=(0,gE.default)(t,hE.latitudeKeys);if(null!=r){var n=t[r];return!0===e?n:(0,dE.default)(n)}};dw.default=AE;var yE={};Object.defineProperty(yE,"__esModule",{value:!0}),yE.default=void 0;var IE=pw,bE=wE(yw),mE=wE(bw);function wE(t){return t&&t.__esModule?t:{default:t}}var EE=function(t,e){var r=(0,bE.default)(t,IE.longitudeKeys);if(null!=r){var n=t[r];return!0===e?n:(0,mE.default)(n)}};yE.default=EE;var CE={};Object.defineProperty(CE,"__esModule",{value:!0}),CE.default=void 0;var _E=function(t){return t*Math.PI/180};CE.default=_E;var vE={};Object.defineProperty(vE,"__esModule",{value:!0}),vE.default=void 0;var BE=function(t){return 180*t/Math.PI};vE.default=BE,Object.defineProperty(gw,"__esModule",{value:!0}),gw.default=void 0;var SE=DE(dw),kE=DE(yE),xE=DE(CE),QE=DE(vE),ME=pw;function DE(t){return t&&t.__esModule?t:{default:t}}var OE=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6371e3,o=(0,SE.default)(t),i=(0,kE.default)(t),s=e/n,a=(0,xE.default)(r),c=(0,xE.default)(o),u=(0,xE.default)(i),l=Math.asin(Math.sin(c)*Math.cos(s)+Math.cos(c)*Math.sin(s)*Math.cos(a)),f=u+Math.atan2(Math.sin(a)*Math.sin(s)*Math.cos(c),Math.cos(s)-Math.sin(c)*Math.sin(l)),h=(0,QE.default)(f);return(h<ME.MINLON||h>ME.MAXLON)&&(f=(f+3*Math.PI)%(2*Math.PI)-Math.PI,h=(0,QE.default)(f)),{latitude:(0,QE.default)(l),longitude:h}};gw.default=OE;var UE={};Object.defineProperty(UE,"__esModule",{value:!0}),UE.default=void 0;var LE=pw,TE=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m",r=LE.areaConversion[e];if(r)return t*r;throw new Error("Invalid unit used for area conversion.")};UE.default=TE;var PE={};Object.defineProperty(PE,"__esModule",{value:!0}),PE.default=void 0;var FE=pw,$E=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m",r=FE.distanceConversion[e];if(r)return t*r;throw new Error("Invalid unit used for distance conversion.")};PE.default=$E;var NE={};Object.defineProperty(NE,"__esModule",{value:!0}),NE.default=void 0;var RE=pw,YE=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kmh";switch(e){case"kmh":return t*RE.timeConversion.h*RE.distanceConversion.km;case"mph":return t*RE.timeConversion.h*RE.distanceConversion.mi;default:return t}};NE.default=YE;var jE={};function KE(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return HE(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return HE(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HE(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Object.defineProperty(jE,"__esModule",{value:!0}),jE.default=void 0;var GE=function(t){var e=KE(t.toString().split("."),2),r=e[0],n=e[1],o=Math.abs(Number(r)),i=60*Number("0."+(n||0)),s=i.toString().split("."),a=Math.floor(i),c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,r=Math.pow(10,e);return Math.round(t*r)/r}(60*Number("0."+(s[1]||0))).toString(),u=KE(c.split("."),2),l=u[0],f=u[1],h=void 0===f?"0":f;return o+"° "+a.toString().padStart(2,"0")+"' "+l.padStart(2,"0")+"."+h.padEnd(1,"0")+'"'};jE.default=GE;var qE={},VE={},zE={},WE={};Object.defineProperty(WE,"__esModule",{value:!0}),WE.default=void 0;var JE=function(t){return t>1?1:t<-1?-1:t};WE.default=JE,Object.defineProperty(zE,"__esModule",{value:!0}),zE.default=void 0;var XE=nC(dw),ZE=nC(yE),tC=nC(CE),eC=nC(WE),rC=pw;function nC(t){return t&&t.__esModule?t:{default:t}}var oC=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;r=void 0===r||isNaN(r)?1:r;var n=(0,XE.default)(t),o=(0,ZE.default)(t),i=(0,XE.default)(e),s=(0,ZE.default)(e),a=Math.acos((0,eC.default)(Math.sin((0,tC.default)(i))*Math.sin((0,tC.default)(n))+Math.cos((0,tC.default)(i))*Math.cos((0,tC.default)(n))*Math.cos((0,tC.default)(o)-(0,tC.default)(s))))*rC.earthRadius;return Math.round(a/r)*r};zE.default=oC,Object.defineProperty(VE,"__esModule",{value:!0}),VE.default=void 0;var iC=function(t){return t&&t.__esModule?t:{default:t}}(zE);var sC=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:iC.default;return r="function"==typeof r?r:iC.default,e.slice().sort((function(e,n){return r(t,e)-r(t,n)}))};VE.default=sC,Object.defineProperty(qE,"__esModule",{value:!0}),qE.default=void 0;var aC=function(t){return t&&t.__esModule?t:{default:t}}(VE);var cC=function(t,e){return(0,aC.default)(t,e)[0]};qE.default=cC;var uC={};Object.defineProperty(uC,"__esModule",{value:!0}),uC.default=void 0;var lC=dC(CE),fC=dC(dw),hC=dC(yE),gC=pw;function dC(t){return t&&t.__esModule?t:{default:t}}var pC=function(t){var e=0;if(t.length>2){for(var r,n,o,i=0;i<t.length;i++){i===t.length-2?(r=t.length-2,n=t.length-1,o=0):i===t.length-1?(r=t.length-1,n=0,o=1):(r=i,n=i+1,o=i+2);var s=(0,hC.default)(t[r]),a=(0,fC.default)(t[n]),c=(0,hC.default)(t[o]);e+=((0,lC.default)(c)-(0,lC.default)(s))*Math.sin((0,lC.default)(a))}e=e*gC.earthRadius*gC.earthRadius/2}return Math.abs(e)};uC.default=pC;var AC={};Object.defineProperty(AC,"__esModule",{value:!0}),AC.default=void 0;var yC=bC(dw),IC=bC(yE);function bC(t){return t&&t.__esModule?t:{default:t}}var mC=function(t){if(!1===Array.isArray(t)||0===t.length)throw new Error("No points were given.");return t.reduce((function(t,e){var r=(0,yC.default)(e),n=(0,IC.default)(e);return{maxLat:Math.max(r,t.maxLat),minLat:Math.min(r,t.minLat),maxLng:Math.max(n,t.maxLng),minLng:Math.min(n,t.minLng)}}),{maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0})};AC.default=mC;var wC={};Object.defineProperty(wC,"__esModule",{value:!0}),wC.default=void 0;var EC=SC(dw),CC=SC(yE),_C=SC(CE),vC=SC(vE),BC=pw;function SC(t){return t&&t.__esModule?t:{default:t}}var kC=function(t,e){var r,n,o=(0,EC.default)(t),i=(0,CC.default)(t),s=(0,_C.default)(o),a=(0,_C.default)(i),c=e/BC.earthRadius,u=s-c,l=s+c,f=(0,_C.default)(BC.MAXLAT),h=(0,_C.default)(BC.MINLAT),g=(0,_C.default)(BC.MAXLON),d=(0,_C.default)(BC.MINLON);if(u>h&&l<f){var p=Math.asin(Math.sin(c)/Math.cos(s));(r=a-p)<d&&(r+=2*Math.PI),(n=a+p)>g&&(n-=2*Math.PI)}else u=Math.max(u,h),l=Math.min(l,f),r=d,n=g;return[{latitude:(0,vC.default)(u),longitude:(0,vC.default)(r)},{latitude:(0,vC.default)(l),longitude:(0,vC.default)(n)}]};wC.default=kC;var xC={};Object.defineProperty(xC,"__esModule",{value:!0}),xC.default=void 0;var QC=UC(dw),MC=UC(yE),DC=UC(CE),OC=UC(vE);function UC(t){return t&&t.__esModule?t:{default:t}}var LC=function(t){if(!1===Array.isArray(t)||0===t.length)return!1;var e=t.length,r=t.reduce((function(t,e){var r=(0,DC.default)((0,QC.default)(e)),n=(0,DC.default)((0,MC.default)(e));return{X:t.X+Math.cos(r)*Math.cos(n),Y:t.Y+Math.cos(r)*Math.sin(n),Z:t.Z+Math.sin(r)}}),{X:0,Y:0,Z:0}),n=r.X/e,o=r.Y/e,i=r.Z/e;return{longitude:(0,OC.default)(Math.atan2(o,n)),latitude:(0,OC.default)(Math.atan2(i,Math.sqrt(n*n+o*o)))}};xC.default=LC;var TC={};Object.defineProperty(TC,"__esModule",{value:!0}),TC.default=void 0;var PC=function(t){return t&&t.__esModule?t:{default:t}}(AC);var FC=function(t){var e=(0,PC.default)(t),r=e.minLat+(e.maxLat-e.minLat)/2,n=e.minLng+(e.maxLng-e.minLng)/2;return{latitude:parseFloat(r.toFixed(6)),longitude:parseFloat(n.toFixed(6))}};TC.default=FC;var $C={},NC={};Object.defineProperty(NC,"__esModule",{value:!0}),NC.default=void 0;var RC=HC(dw),YC=HC(yE),jC=HC(CE),KC=HC(vE);function HC(t){return t&&t.__esModule?t:{default:t}}var GC=function(t,e){var r=(0,jC.default)((0,YC.default)(e))-(0,jC.default)((0,YC.default)(t)),n=Math.log(Math.tan((0,jC.default)((0,RC.default)(e))/2+Math.PI/4)/Math.tan((0,jC.default)((0,RC.default)(t))/2+Math.PI/4));return Math.abs(r)>Math.PI&&(r=r>0?-1*(2*Math.PI-r):2*Math.PI+r),((0,KC.default)(Math.atan2(r,n))+360)%360};NC.default=GC,Object.defineProperty($C,"__esModule",{value:!0}),$C.default=void 0;var qC=function(t){return t&&t.__esModule?t:{default:t}}(NC);var VC=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qC.default,n="function"==typeof r?r(t,e):(0,qC.default)(t,e);if(isNaN(n))throw new Error("Could not calculate bearing for given points. Check your bearing function");switch(Math.round(n/22.5)){case 1:return"NNE";case 2:return"NE";case 3:return"ENE";case 4:return"E";case 5:return"ESE";case 6:return"SE";case 7:return"SSE";case 8:return"S";case 9:return"SSW";case 10:return"SW";case 11:return"WSW";case 12:return"W";case 13:return"WNW";case 14:return"NW";case 15:return"NNW";default:return"N"}};$C.default=VC;var zC={};Object.defineProperty(zC,"__esModule",{value:!0}),zC.default=void 0;var WC=XC(zE),JC=XC(WE);function XC(t){return t&&t.__esModule?t:{default:t}}var ZC=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=(0,WC.default)(e,t,n),i=(0,WC.default)(t,r,n),s=(0,WC.default)(e,r,n),a=Math.acos((0,JC.default)((o*o+s*s-i*i)/(2*o*s))),c=Math.acos((0,JC.default)((i*i+s*s-o*o)/(2*i*s)));return a>Math.PI/2?o:c>Math.PI/2?i:Math.sin(a)*o};zC.default=ZC;var t_={};Object.defineProperty(t_,"__esModule",{value:!0}),t_.default=void 0;var e_=i_(dw),r_=i_(yE),n_=i_(CE),o_=i_(vE);function i_(t){return t&&t.__esModule?t:{default:t}}var s_=function(t,e){var r=(0,e_.default)(e),n=(0,r_.default)(e),o=(0,e_.default)(t),i=(0,r_.default)(t);return((0,o_.default)(Math.atan2(Math.sin((0,n_.default)(n)-(0,n_.default)(i))*Math.cos((0,n_.default)(r)),Math.cos((0,n_.default)(o))*Math.sin((0,n_.default)(r))-Math.sin((0,n_.default)(o))*Math.cos((0,n_.default)(r))*Math.cos((0,n_.default)(n)-(0,n_.default)(i))))+360)%360};t_.default=s_;var a_={};Object.defineProperty(a_,"__esModule",{value:!0}),a_.default=void 0;var c_=function(t){return t&&t.__esModule?t:{default:t}}(zE);function u_(t){return u_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u_(t)}var l_=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c_.default;return t.reduce((function(t,r){return"object"===u_(t)&&null!==t.last&&(t.distance+=e(r,t.last)),t.last=r,t}),{last:null,distance:0}).distance};a_.default=l_;var f_={};Object.defineProperty(f_,"__esModule",{value:!0}),f_.default=void 0;var h_=A_(dw),g_=A_(yE),d_=A_(CE),p_=pw;function A_(t){return t&&t.__esModule?t:{default:t}}var y_=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;r=void 0===r||isNaN(r)?1:r;var n,o,i,s,a,c,u,l=(0,h_.default)(t),f=(0,g_.default)(t),h=(0,h_.default)(e),g=(0,g_.default)(e),d=6356752.314245,p=1/298.257223563,A=(0,d_.default)(g-f),y=Math.atan((1-p)*Math.tan((0,d_.default)(parseFloat(l)))),I=Math.atan((1-p)*Math.tan((0,d_.default)(parseFloat(h)))),b=Math.sin(y),m=Math.cos(y),w=Math.sin(I),E=Math.cos(I),C=A,_=100;do{var v=Math.sin(C),B=Math.cos(C);if(0===(c=Math.sqrt(E*v*(E*v)+(m*w-b*E*B)*(m*w-b*E*B))))return 0;n=b*w+m*E*B,o=Math.atan2(c,n),a=n-2*b*w/(s=1-(i=m*E*v/c)*i),isNaN(a)&&(a=0);var S=p/16*s*(4+p*(4-3*s));u=C,C=A+(1-S)*p*i*(o+S*c*(a+S*n*(2*a*a-1)))}while(Math.abs(C-u)>1e-12&&--_>0);if(0===_)return NaN;var k=s*(p_.earthRadius*p_.earthRadius-d*d)/(d*d),x=1+k/16384*(4096+k*(k*(320-175*k)-768)),Q=k/1024*(256+k*(k*(74-47*k)-128)),M=Q*c*(a+Q/4*(n*(2*a*a-1)-Q/6*a*(4*c*c-3)*(4*a*a-3))),D=d*x*(o-M);return Math.round(D/r)*r};f_.default=y_;var I_={};Object.defineProperty(I_,"__esModule",{value:!0}),I_.default=void 0;var b_=function(t){return/^NNE|NE|NNW|N$/.test(t)?"N":/^ENE|E|ESE|SE$/.test(t)?"E":/^SSE|S|SSW|SW$/.test(t)?"S":/^WSW|W|WNW|NW$/.test(t)?"W":void 0};I_.default=b_;var m_={};Object.defineProperty(m_,"__esModule",{value:!0}),m_.default=void 0;var w_=function(t){return t&&t.__esModule?t:{default:t}}(zE);var E_=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w_.default,n=r(t,e),o=Number(e.time)-Number(t.time),i=n/o*1e3;return i};m_.default=E_;var C_={};Object.defineProperty(C_,"__esModule",{value:!0}),C_.default=void 0;var __=function(t){return t&&t.__esModule?t:{default:t}}(zE);var v_=function(t,e,r){return(0,__.default)(e,t)+(0,__.default)(t,r)===(0,__.default)(e,r)};C_.default=v_;var B_={};Object.defineProperty(B_,"__esModule",{value:!0}),B_.default=void 0;var S_=x_(dw),k_=x_(yE);function x_(t){return t&&t.__esModule?t:{default:t}}var Q_=function(t,e){for(var r=!1,n=e.length,o=-1,i=n-1;++o<n;i=o)((0,k_.default)(e[o])<=(0,k_.default)(t)&&(0,k_.default)(t)<(0,k_.default)(e[i])||(0,k_.default)(e[i])<=(0,k_.default)(t)&&(0,k_.default)(t)<(0,k_.default)(e[o]))&&(0,S_.default)(t)<((0,S_.default)(e[i])-(0,S_.default)(e[o]))*((0,k_.default)(t)-(0,k_.default)(e[o]))/((0,k_.default)(e[i])-(0,k_.default)(e[o]))+(0,S_.default)(e[o])&&(r=!r);return r};B_.default=Q_;var M_={};Object.defineProperty(M_,"__esModule",{value:!0}),M_.default=void 0;var D_=function(t){return t&&t.__esModule?t:{default:t}}(zC);var O_=function(t,e,r,n){return(0,D_.default)(t,e,r)<n};M_.default=O_;var U_={};Object.defineProperty(U_,"__esModule",{value:!0}),U_.default=void 0;var L_=function(t){return t&&t.__esModule?t:{default:t}}(zE);var T_=function(t,e,r){return(0,L_.default)(t,e)<r};U_.default=T_;var P_={};function F_(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return $_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $_(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $_(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Object.defineProperty(P_,"__esModule",{value:!0}),P_.default=void 0;var N_=function(t){if(!t.startsWith("POLYGON"))throw new Error("Invalid wkt.");return t.slice(t.indexOf("(")+2,t.indexOf(")")).split(", ").map((function(t){var e=F_(t.split(" "),2),r=e[0],n=e[1];return{longitude:parseFloat(r),latitude:parseFloat(n)}}))};function R_(t){let e,r;return{c(){e=XI("img"),ib(e,"class","bimg"),ib(e,"style",t[1]),FI(e.src,r=Bm(t[0]))||ib(e,"src",r)},m(t,r){zI(t,e,r)},p(t,[n]){1&n&&!FI(e.src,r=Bm(t[0]))&&ib(e,"src",r)},i:QI,o:QI,d(t){t&&WI(e)}}}function Y_(t,e,r){let{src:n=null}=e,{size:o=null}=e;const i=o?`width: ${o}; height: ${o}`:"";return t.$$set=t=>{"src"in t&&r(0,n=t.src),"size"in t&&r(2,o=t.size)},[n,i,o]}P_.default=N_,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e={computeDestinationPoint:!0,convertArea:!0,convertDistance:!0,convertSpeed:!0,decimalToSexagesimal:!0,findNearest:!0,getAreaOfPolygon:!0,getBounds:!0,getBoundsOfDistance:!0,getCenter:!0,getCenterOfBounds:!0,getCompassDirection:!0,getCoordinateKey:!0,getCoordinateKeys:!0,getDistance:!0,getDistanceFromLine:!0,getGreatCircleBearing:!0,getLatitude:!0,getLongitude:!0,getPathLength:!0,getPreciseDistance:!0,getRhumbLineBearing:!0,getRoughCompassDirection:!0,getSpeed:!0,isDecimal:!0,isPointInLine:!0,isPointInPolygon:!0,isPointNearLine:!0,isPointWithinRadius:!0,isSexagesimal:!0,isValidCoordinate:!0,isValidLatitude:!0,isValidLongitude:!0,orderByDistance:!0,sexagesimalToDecimal:!0,toDecimal:!0,toRad:!0,toDeg:!0,wktToPolygon:!0};Object.defineProperty(t,"computeDestinationPoint",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"convertArea",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"convertDistance",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"convertSpeed",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"decimalToSexagesimal",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"findNearest",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"getAreaOfPolygon",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"getBounds",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"getBoundsOfDistance",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"getCenter",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"getCenterOfBounds",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"getCompassDirection",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"getCoordinateKey",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"getCoordinateKeys",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"getDistance",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(t,"getDistanceFromLine",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"getGreatCircleBearing",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(t,"getLatitude",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"getLongitude",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"getPathLength",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(t,"getPreciseDistance",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(t,"getRhumbLineBearing",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(t,"getRoughCompassDirection",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(t,"getSpeed",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"isDecimal",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(t,"isPointInLine",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(t,"isPointInPolygon",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(t,"isPointNearLine",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(t,"isPointWithinRadius",{enumerable:!0,get:function(){return Q.default}}),Object.defineProperty(t,"isSexagesimal",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(t,"isValidCoordinate",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(t,"isValidLatitude",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(t,"isValidLongitude",{enumerable:!0,get:function(){return U.default}}),Object.defineProperty(t,"orderByDistance",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(t,"sexagesimalToDecimal",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(t,"toDecimal",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(t,"toRad",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(t,"toDeg",{enumerable:!0,get:function(){return $.default}}),Object.defineProperty(t,"wktToPolygon",{enumerable:!0,get:function(){return N.default}});var r=Y(gw),n=Y(UE),o=Y(PE),i=Y(NE),s=Y(jE),a=Y(qE),c=Y(uC),u=Y(AC),l=Y(wC),f=Y(xC),h=Y(TC),g=Y($C),d=Y(yw),p=Y(xw),A=Y(zE),y=Y(zC),I=Y(t_),b=Y(dw),m=Y(yE),w=Y(a_),E=Y(f_),C=Y(NC),_=Y(I_),v=Y(m_),B=Y(mw),S=Y(C_),k=Y(B_),x=Y(M_),Q=Y(U_),M=Y(Ew),D=Y(kw),O=Y(Pw),U=Y(Kw),L=Y(VE),T=Y(vw),P=Y(bw),F=Y(CE),$=Y(vE),N=Y(P_),R=pw;function Y(t){return t&&t.__esModule?t:{default:t}}Object.keys(R).forEach((function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return R[r]}}))}))}(hw);class j_ extends jb{constructor(t){super(),Yb(this,t,Y_,R_,LI,{src:0,size:2})}}const K_=t=>({}),H_=t=>({});function G_(t){let e,r,n;return{c(){e=tb("Distance "),r=tb(t[1]),n=tb("Km")},m(t,o){zI(t,e,o),zI(t,r,o),zI(t,n,o)},p(t,e){2&e&&ab(r,t[1])},d(t){t&&WI(e),t&&WI(r),t&&WI(n)}}}function q_(t){let e,r,n,o,i,s,a,c,u,l,f,h,g,d,p,A,y,I=t[0].score+"",b=t[0].name+"";d=new j_({props:{src:t[0].picture}});const m=t[4].genderloc,w=RI(m,t,t[3],H_),E=w||function(t){let e,r=null!==t[1]&&G_(t);return{c(){r&&r.c(),e=rb()},m(t,n){r&&r.m(t,n),zI(t,e,n)},p(t,n){null!==t[1]?r?r.p(t,n):(r=G_(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(t){r&&r.d(t),t&&WI(e)}}}(t),C=t[4].default,_=RI(C,t,t[3],null);return{c(){e=XI("article"),r=XI("legend"),n=XI("overlay"),o=XI("h3"),i=XI("dot"),i.textContent=" ",s=tb(I),a=eb(),c=XI("div"),u=XI("h2"),l=tb(b),f=eb(),h=XI("div"),h.innerHTML="<h2>[b]</h2>",g=eb(),Fb(d.$$.fragment),p=eb(),E&&E.c(),A=eb(),_&&_.c(),ib(i,"class","vibing"),ub(o,"grid-area","nw"),ub(c,"grid-area","sw"),ub(c,"align-self","end"),ub(h,"grid-area","se"),ub(h,"align-self","end"),ub(h,"justify-self","end"),ib(h,"class","end"),ib(e,"class","peer")},m(t,I){zI(t,e,I),VI(e,r),VI(r,n),VI(n,o),VI(o,i),VI(o,s),VI(n,a),VI(n,c),VI(c,u),VI(u,l),VI(n,f),VI(n,h),VI(r,g),$b(d,r,null),VI(e,p),E&&E.m(e,null),VI(e,A),_&&_.m(e,null),y=!0},p(t,[e]){(!y||1&e)&&I!==(I=t[0].score+"")&&ab(s,I),(!y||1&e)&&b!==(b=t[0].name+"")&&ab(l,b);const r={};1&e&&(r.src=t[0].picture),d.$set(r),w?w.p&&(!y||8&e)&&KI(w,m,t,t[3],y?jI(m,t[3],e,K_):HI(t[3]),H_):E&&E.p&&(!y||2&e)&&E.p(t,y?e:-1),_&&_.p&&(!y||8&e)&&KI(_,C,t,t[3],y?jI(C,t[3],e,null):HI(t[3]),null)},i(t){y||(Db(d.$$.fragment,t),Db(E,t),Db(_,t),y=!0)},o(t){Ob(d.$$.fragment,t),Ob(E,t),Ob(_,t),y=!1},d(t){t&&WI(e),Nb(d),E&&E.d(t),_&&_.d(t)}}}function V_(t,e,r){let{$$slots:n={},$$scope:o}=e,{peer:i}=e,{size:s="normal"}=e,a=null;if(Zb.pk){const t=rm(Zb.pk),e=rm(i.pk);a=hw.getDistance(t,e,1e3)}return t.$$set=t=>{"peer"in t&&r(0,i=t.peer),"size"in t&&r(2,s=t.size),"$$scope"in t&&r(3,o=t.$$scope)},[i,a,s,o,n]}class z_ extends jb{constructor(t){super(),Yb(this,t,V_,q_,LI,{peer:0,size:2})}}function W_(t,e,r){const n=t.slice();return n[16]=e[r],n}function J_(t){let e,r,n,o;return n=new fw({props:{expiresAt:t[1].vibe,format:"mm:ss"}}),{c(){e=XI("small"),r=tb("Vibe available in "),Fb(n.$$.fragment)},m(t,i){zI(t,e,i),VI(e,r),$b(n,e,null),o=!0},p(t,e){const r={};2&e&&(r.expiresAt=t[1].vibe),n.$set(r)},i(t){o||(Db(n.$$.fragment,t),o=!0)},o(t){Ob(n.$$.fragment,t),o=!1},d(t){t&&WI(e),Nb(n)}}}function X_(t){let e;return{c(){e=XI("small"),e.textContent="Your 〰️🔫 is primed and loaded!"},m(t,r){zI(t,e,r)},p:QI,i:QI,o:QI,d(t){t&&WI(e)}}}function Z_(t){let e,r,n;return{c(){e=tb("Press the "),r=XI("strong"),r.textContent="Enter",n=tb(" button to play.")},m(t,o){zI(t,e,o),zI(t,r,o),zI(t,n,o)},p:QI,i:QI,o:QI,d(t){t&&WI(e),t&&WI(r),t&&WI(n)}}}function tv(t){let e,r,n,o,i;function s(){return t[13](t[16])}return r=new Tm({props:{id:"gfx-vibe"}}),{c(){e=XI("a"),Fb(r.$$.fragment),ib(e,"role","button"),ib(e,"class","nofill")},m(t,a){zI(t,e,a),$b(r,e,null),n=!0,o||(i=nb(e,"click",s),o=!0)},p(e,r){t=e},i(t){n||(Db(r.$$.fragment,t),n=!0)},o(t){Ob(r.$$.fragment,t),n=!1},d(t){t&&WI(e),Nb(r),o=!1,i()}}}function ev(t){let e,r;function n(...e){return t[12](t[16],...e)}return e=new fw({props:{expiresAt:t[4].find(n).expiresAt,format:"mm:ss"}}),{c(){Fb(e.$$.fragment)},m(t,n){$b(e,t,n),r=!0},p(r,o){t=r;const i={};20&o&&(i.expiresAt=t[4].find(n).expiresAt),e.$set(i)},i(t){r||(Db(e.$$.fragment,t),r=!0)},o(t){Ob(e.$$.fragment,t),r=!1},d(t){Nb(e,t)}}}function rv(t){let e,r,n,o,i,s,a,c,u,l,f=t[16].tagline+"";function h(...e){return t[10](t[16],...e)}const g=[ev,tv],d=[];function p(t,e){return(null==s||20&e)&&(s=!!t[4].find(h)),s?0:1}return a=p(t,-1),c=d[a]=g[a](t),{c(){e=XI("div"),r=XI("p"),n=tb(f),o=eb(),i=XI("div"),c.c(),u=eb(),ib(r,"class","hpad"),ib(e,"class","flex row space-between")},m(t,s){zI(t,e,s),VI(e,r),VI(r,n),VI(e,o),VI(e,i),d[a].m(i,null),zI(t,u,s),l=!0},p(e,r){t=e,(!l||4&r)&&f!==(f=t[16].tagline+"")&&ab(n,f);let o=a;a=p(t,r),a===o?d[a].p(t,r):(Qb(),Ob(d[o],1,1,(()=>{d[o]=null})),Mb(),c=d[a],c?c.p(t,r):(c=d[a]=g[a](t),c.c()),Db(c,1),c.m(i,null))},i(t){l||(Db(c),l=!0)},o(t){Ob(c),l=!1},d(t){t&&WI(e),d[a].d(),t&&WI(u)}}}function nv(t){let e,r;return e=new z_({props:{peer:t[16],$$slots:{default:[rv]},$$scope:{ctx:t}}}),{c(){Fb(e.$$.fragment)},m(t,n){$b(e,t,n),r=!0},p(t,r){const n={};4&r&&(n.peer=t[16]),524308&r&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){r||(Db(e.$$.fragment,t),r=!0)},o(t){Ob(e.$$.fragment,t),r=!1},d(t){Nb(e,t)}}}function ov(t){let e,r;return e=new Om({props:{open:!0,$$slots:{default:[iv]},$$scope:{ctx:t}}}),e.$on("fade",t[15]),{c(){Fb(e.$$.fragment)},m(t,n){$b(e,t,n),r=!0},p(t,r){const n={};524296&r&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){r||(Db(e.$$.fragment,t),r=!0)},o(t){Ob(e.$$.fragment,t),r=!1},d(t){Nb(e,t)}}}function iv(t){let e,r,n,o,i,s,a,c,u,l,f,h,g,d,p,A,y,I,b;return{c(){e=XI("article"),r=XI("h6"),r.textContent="Genders",n=eb(),o=XI("fieldset"),o.innerHTML='<label for="m"><input type="checkbox" id="m" name="m" role="switch"/>\n            M</label>',i=eb(),s=XI("fieldset"),s.innerHTML='<label for="f"><input type="checkbox" id="f" name="f" role="switch"/>\n            F</label>',a=eb(),c=XI("fieldset"),c.innerHTML='<label for="nb"><input type="checkbox" id="nb" name="nb" role="switch"/>\n            NB</label>',u=eb(),l=XI("h6"),l.textContent="Distance",f=eb(),h=XI("label"),h.innerHTML='GLOBAL\n          <input type="range" min="0" max="100" value="100" id="distance" name="distance"/>',g=eb(),d=XI("footer"),p=XI("a"),p.textContent="reset",A=eb(),y=XI("a"),y.textContent="filter",ib(h,"for","distance"),ib(p,"role","button"),ib(y,"role","button")},m(m,w){zI(m,e,w),VI(e,r),VI(e,n),VI(e,o),VI(e,i),VI(e,s),VI(e,a),VI(e,c),VI(e,u),VI(e,l),VI(e,f),VI(e,h),VI(e,g),VI(e,d),VI(d,p),VI(d,A),VI(d,y),I||(b=nb(y,"click",t[14]),I=!0)},p:QI,d(t){t&&WI(e),I=!1,b()}}}function sv(t){let e,r,n,o,i,s,a,c,u,l,f,h,g,d,p,A,y,I,b,m,w=t[2].length+"";const E=[Z_,X_,J_],C=[];function _(t,e){return t[0].entered?t[1].vibe?2:1:0}s=_(t),a=C[s]=E[s](t);let v=t[2],B=[];for(let e=0;e<v.length;e+=1)B[e]=nv(W_(t,v,e));const S=t=>Ob(B[t],1,1,(()=>{B[t]=null}));let k=t[3]&&ov(t);return{c(){e=XI("pub-view"),r=XI("h1"),r.textContent="🪩 Club Room",n=eb(),o=XI("p"),o.innerHTML="This is the common room, see someone interesting?<br/>\n    Shoot!",i=eb(),a.c(),c=eb(),u=XI("div"),l=XI("h6"),f=tb("Patrons "),h=tb(w),g=eb(),d=XI("a"),d.textContent="Filter",p=eb(),A=XI("peers");for(let t=0;t<B.length;t+=1)B[t].c();y=eb(),k&&k.c(),ib(r,"class","view-header svelte-5c56af"),ib(l,"class","nogap"),ib(d,"role","button"),ib(d,"class","outline hpad vgap"),ib(u,"class","row space-between xcenter"),ib(A,"class","column xcenter"),sb(e,"class","block container")},m(a,w){zI(a,e,w),VI(e,r),VI(e,n),VI(e,o),VI(e,i),C[s].m(e,null),VI(e,c),VI(e,u),VI(u,l),VI(l,f),VI(l,h),VI(u,g),VI(u,d),VI(e,p),VI(e,A);for(let t=0;t<B.length;t+=1)B[t].m(A,null);VI(e,y),k&&k.m(e,null),I=!0,b||(m=nb(d,"click",t[11]),b=!0)},p(t,[r]){let n=s;if(s=_(t),s===n?C[s].p(t,r):(Qb(),Ob(C[n],1,1,(()=>{C[n]=null})),Mb(),a=C[s],a?a.p(t,r):(a=C[s]=E[s](t),a.c()),Db(a,1),a.m(e,c)),(!I||4&r)&&w!==(w=t[2].length+"")&&ab(h,w),532&r){let e;for(v=t[2],e=0;e<v.length;e+=1){const n=W_(t,v,e);B[e]?(B[e].p(n,r),Db(B[e],1)):(B[e]=nv(n),B[e].c(),Db(B[e],1),B[e].m(A,null))}for(Qb(),e=v.length;e<B.length;e+=1)S(e);Mb()}t[3]?k?(k.p(t,r),8&r&&Db(k,1)):(k=ov(t),k.c(),Db(k,1),k.m(e,null)):k&&(Qb(),Ob(k,1,1,(()=>{k=null})),Mb())},i(t){if(!I){Db(a);for(let t=0;t<v.length;t+=1)Db(B[t]);Db(k),I=!0}},o(t){Ob(a),B=B.filter(Boolean);for(let t=0;t<B.length;t+=1)Ob(B[t]);Ob(k),I=!1},d(t){t&&WI(e),C[s].d(),JI(B,t),k&&k.d(),b=!1,m()}}}function av(t,e,r){let n,o,i,s,a;NI(t,mm,(t=>r(0,n=t)));const c=Wb(Zb.$cooldowns());NI(t,c,(t=>r(1,o=t)));const u=Wb(Zb.$peers(),l);var l;NI(t,u,(t=>r(2,i=t)));const f=nm();NI(t,f,(t=>r(4,a=t)));const h=Gb(!1);function g(t){Zb.sendVibe(t).catch((t=>console.error("Failed sending vibe",t)))}NI(t,h,(t=>r(3,s=t))),n.swarming||Em().catch(console.error.bind(null,"Auto-connect failed"));return[n,o,i,s,a,c,u,f,h,g,(t,e)=>e.peerId?.equals(t.pk),()=>qI(h,s=!0,s),(t,e)=>e.peerId?.equals(t.pk),t=>g(t.pk),()=>qI(h,s=!1,s),()=>qI(h,s=!1,s)]}class cv extends jb{constructor(t){super(),Yb(this,t,av,sv,LI,{})}}function uv(t,e,r){return t>=e*r?{width:e*r,height:e}:{width:t,height:t/r}}function lv(t,e,r,n){return{x:fv(t.x,e.width,r.width,n),y:fv(t.y,e.height,r.height,n)}}function fv(t,e,r,n){const o=e*n/2-r/2;return Math.min(o,Math.max(t,-o))}function hv(t,e){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}function gv(t,e,r=!1){const n=r?Math.round(e):e;return Math.min(t,Math.max(0,n))}function dv(t,e){return e}function pv(t,e){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}const{window:Av}=Tb;function yv(t){let e;return{c(){e=XI("div"),ib(e,"class","cropperArea svelte-12kodkg"),ub(e,"width",t[7].width+"px"),ub(e,"height",t[7].height+"px"),ib(e,"data-testid","cropper"),lb(e,"round","round"===t[3]),lb(e,"grid",t[4])},m(t,r){zI(t,e,r)},p(t,r){128&r[0]&&ub(e,"width",t[7].width+"px"),128&r[0]&&ub(e,"height",t[7].height+"px"),8&r[0]&&lb(e,"round","round"===t[3]),16&r[0]&&lb(e,"grid",t[4])},d(t){t&&WI(e)}}}function Iv(t){let e,r,n,o,i,s,a=t[7]&&yv(t);return{c(){e=XI("div"),r=XI("img"),o=eb(),a&&a.c(),ib(r,"class","image svelte-12kodkg"),FI(r.src,n=t[2])||ib(r,"src",n),ib(r,"alt",""),ub(r,"transform","translate("+t[1].x+"px, "+t[1].y+"px) scale("+t[0]+")"),ib(r,"crossorigin",t[5]),ib(e,"class","container svelte-12kodkg"),ib(e,"data-testid","container")},m(n,c){zI(n,e,c),VI(e,r),t[25](r),VI(e,o),a&&a.m(e,null),t[26](e),i||(s=[nb(Av,"resize",t[10]),nb(Av,"mousemove",t[12]),nb(Av,"mouseup",t[15],!0),nb(Av,"touchmove",ob(t[14]),{passive:!1}),nb(Av,"touchend",t[15]),nb(r,"load",t[9]),nb(e,"mousedown",ob(t[11])),nb(e,"touchstart",ob(t[13])),nb(e,"wheel",ob(t[16])),nb(e,"gesturestart",ob(t[23])),nb(e,"gesturechange",ob(t[24]))],i=!0)},p(t,o){4&o[0]&&!FI(r.src,n=t[2])&&ib(r,"src",n),3&o[0]&&ub(r,"transform","translate("+t[1].x+"px, "+t[1].y+"px) scale("+t[0]+")"),32&o[0]&&ib(r,"crossorigin",t[5]),t[7]?a?a.p(t,o):(a=yv(t),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i:QI,o:QI,d(r){r&&WI(e),t[25](null),a&&a.d(),t[26](null),i=!1,OI(s)}}}function bv(t,e,r){let{image:n}=e,{crop:o={x:0,y:0}}=e,{zoom:i=1}=e,{aspect:s=4/3}=e,{minZoom:a=1}=e,{maxZoom:c=3}=e,{cropSize:u=null}=e,{cropShape:l="rect"}=e,{showGrid:f=!0}=e,{zoomSpeed:h=1}=e,{crossOrigin:g=null}=e,{restrictPosition:d=!0}=e,p=null,A={width:0,height:0,naturalWidth:0,naturalHeight:0},y=null,I=null,b=null,m={x:0,y:0},w={x:0,y:0},E=0,C=null,_=null,v=!1,B=db();var S;gb((()=>{b&&b.complete&&k()})),S=()=>{B=null},hb().$$.on_destroy.push(S);const k=()=>{x(),P()},x=()=>{b&&(A={width:b.width,height:b.height,naturalWidth:b.naturalWidth,naturalHeight:b.naturalHeight},r(7,p=u||uv(b.width,b.height,s))),y&&(I=y.getBoundingClientRect())},Q=t=>({x:Number(t.clientX),y:Number(t.clientY)}),M=t=>({x:Number(t.clientX),y:Number(t.clientY)}),D=({x:t,y:e})=>{m={x:t,y:e},w={x:o.x,y:o.y}},O=({x:t,y:e})=>{C&&window.cancelAnimationFrame(C),C=window.requestAnimationFrame((()=>{if(void 0===t||void 0===e)return;const n=t-m.x,s=e-m.y,a={x:w.x+n,y:w.y+s};r(1,o=d?lv(a,A,p,i):a)}))},U=t=>{const e=M(t.touches[0]),r=M(t.touches[1]);E=hv(e,r),D(pv(e,r))},L=t=>{const e=M(t.touches[0]),r=M(t.touches[1]),n=pv(e,r);O(n),_&&window.cancelAnimationFrame(_),_=window.requestAnimationFrame((()=>{const t=hv(e,r);T(i*(t/E),n),E=t}))},T=(t,e)=>{const n=(({x:t,y:e})=>{if(!I)throw new Error("The Cropper is not mounted");return{x:I.width/2-(t-I.left),y:I.height/2-(e-I.top)}})(e),s=(({x:t,y:e})=>({x:(t+o.x)/i,y:(e+o.y)/i}))(n);r(0,i=Math.min(c,Math.max(t,a)));const u={x:s.x*i-n.x,y:s.y*i-n.y};r(1,o=d?lv(u,A,p,i):u)},P=()=>{if(!p||0===p.width)return;const t=d?lv(o,A,p,i):o,{croppedAreaPercentages:e,croppedAreaPixels:r}=function(t,e,r,n,o,i=!0){const s=i?gv:dv,a={x:s(100,((e.width-r.width/o)/2-t.x/o)/e.width*100),y:s(100,((e.height-r.height/o)/2-t.y/o)/e.height*100),width:s(100,r.width/e.width*100/o),height:s(100,r.height/e.height*100/o)},c=s(e.naturalWidth,a.width*e.naturalWidth/100,!0),u=s(e.naturalHeight,a.height*e.naturalHeight/100,!0),l=e.naturalWidth>=e.naturalHeight*n?{width:Math.round(u*n),height:u}:{width:c,height:Math.round(c/n)};return{croppedAreaPercentages:a,croppedAreaPixels:{...l,x:s(e.naturalWidth-l.width,a.x*e.naturalWidth/100,!0),y:s(e.naturalHeight-l.height,a.y*e.naturalHeight/100,!0)}}}(t,A,p,u?u.width/u.height:s,i,d);B("cropcomplete",{percent:e,pixels:r})};return t.$$set=t=>{"image"in t&&r(2,n=t.image),"crop"in t&&r(1,o=t.crop),"zoom"in t&&r(0,i=t.zoom),"aspect"in t&&r(17,s=t.aspect),"minZoom"in t&&r(18,a=t.minZoom),"maxZoom"in t&&r(19,c=t.maxZoom),"cropSize"in t&&r(20,u=t.cropSize),"cropShape"in t&&r(3,l=t.cropShape),"showGrid"in t&&r(4,f=t.showGrid),"zoomSpeed"in t&&r(21,h=t.zoomSpeed),"crossOrigin"in t&&r(5,g=t.crossOrigin),"restrictPosition"in t&&r(22,d=t.restrictPosition)},t.$$.update=()=>{1179712&t.$$.dirty[0]&&b&&r(7,p=u||uv(b.width,b.height,s)),1&t.$$.dirty[0]&&i&&P()},[i,o,n,l,f,g,b,p,y,k,x,t=>{v=!0,D(Q(t))},t=>{v&&O(Q(t))},t=>{2===t.touches.length?U(t):1===t.touches.length&&D(M(t.touches[0]))},t=>{v=!0,2===t.touches.length?L(t):1===t.touches.length&&O(M(t.touches[0]))},()=>{v=!1,P()},t=>{const e=Q(t),r=i-t.deltaY*h/200;T(r,e)},s,a,c,u,h,d,function(e){pb.call(this,t,e)},function(e){pb.call(this,t,e)},function(t){yb[t?"unshift":"push"]((()=>{b=t,r(6,b)}))},function(t){yb[t?"unshift":"push"]((()=>{y=t,r(8,y)}))}]}class mv extends jb{constructor(t){super(),Yb(this,t,bv,Iv,LI,{image:2,crop:1,zoom:0,aspect:17,minZoom:18,maxZoom:19,cropSize:20,cropShape:3,showGrid:4,zoomSpeed:21,crossOrigin:5,restrictPosition:22},null,[-1,-1])}}function wv(t){let e,r,n,o;return{c(){e=XI("div"),r=XI("canvas"),n=eb(),o=XI("img"),ib(r,"width","300"),ib(r,"height","300"),ib(e,"class","row center"),ib(o,"alt","preview"),ib(o,"id","preview"),ub(o,"display","none"),ib(o,"class","svelte-7zl4gf")},m(i,s){zI(i,e,s),VI(e,r),t[12](r),zI(i,n,s),zI(i,o,s),t[13](o)},p:QI,i:QI,o:QI,d(r){r&&WI(e),t[12](null),r&&WI(n),r&&WI(o),t[13](null)}}}function Ev(t){let e,r,n,o,i,s;function a(e){t[10](e)}function c(e){t[11](e)}let u={image:t[6],aspect:1,showGrid:!1};return void 0!==t[4]&&(u.crop=t[4]),void 0!==t[5]&&(u.zoom=t[5]),n=new mv({props:u}),yb.push((()=>Pb(n,"crop",a))),yb.push((()=>Pb(n,"zoom",c))),n.$on("cropcomplete",t[8]),{c(){e=XI("button"),e.textContent="done",r=eb(),Fb(n.$$.fragment)},m(t,o){zI(t,e,o),zI(t,r,o),$b(n,t,o),s=!0},p(t,e){const r={};64&e&&(r.image=t[6]),!o&&16&e&&(o=!0,r.crop=t[4],Cb((()=>o=!1))),!i&&32&e&&(i=!0,r.zoom=t[5],Cb((()=>i=!1))),n.$set(r)},i(t){s||(Db(n.$$.fragment,t),s=!0)},o(t){Ob(n.$$.fragment,t),s=!1},d(t){t&&WI(e),t&&WI(r),Nb(n,t)}}}function Cv(t){let e,r,n,o,i,s,a,c;const u=[Ev,wv],l=[];return o=1,i=l[1]=u[1](t),{c(){e=XI("image-loader"),r=XI("input"),n=eb(),i.c(),ib(r,"type","file"),ib(r,"accept","image/*"),ib(r,"id","picture"),ib(r,"name","picture")},m(o,i){zI(o,e,i),VI(e,r),VI(e,n),l[1].m(e,null),s=!0,a||(c=nb(r,"change",t[9]),a=!0)},p(t,[e]){i.p(t,e)},i(t){s||(Db(i),s=!0)},o(t){Ob(i),s=!1},d(t){t&&WI(e),l[1].d(),a=!1,c()}}}function _v(t,e,r){let n,i,s=QI,a=()=>(s(),s=$I(f,(t=>r(15,n=t))),f);t.$$.on_destroy.push((()=>s()));let c,u,l,{output:f}=e;a();const h=Gb();let g;NI(t,h,(t=>r(6,i=t)));let d={x:0,y:0},p=1;async function A(t){return new Promise((e=>{r(3,l.onload=()=>{""!==l.src&&(u.drawImage(l,0,0,300,300),r(3,l.src="",l),e())},l),r(3,l.src=t,l)}))}async function y(t){let e;try{e=URL.createObjectURL(t),await A(e),URL.revokeObjectURL(e);const r=c.toDataURL("image/jpeg",.35),i=function(t){const e=/^data:([^;]+);base64,/,r=t.match(e);if("image/jpeg"!==r[1])throw new Error("CanvasExportedUnexpectedFiletype: "+r[1]);return o.Buffer.from(t.replace(e,""),"base64")}(r);console.info(`DataURL: ${r.length}, Binary: ${i.length}, compression: ${i.length/r.length}`),qI(f,n=i,n)}catch(t){throw t}}return gb((()=>{u=c.getContext("2d"),u.fillStyle="gray",u.fillRect(0,0,300,300);const t=f?.subscribe((t=>{if(console.info("Redrawing preview due to change",t?.length),t){A(Bm(n))}}));return()=>{t&&t()}})),t.$$set=t=>{"output"in t&&a(r(0,f=t.output))},t.$$.update=()=>{if(2&t.$$.dirty&&g){y(g[0]).catch(console.error.bind(null,"Preprocess failed"))}},[f,g,c,l,d,p,i,h,function(t){const{percent:e,pixels:r}=t.detail;console.info("CropComplete",e,r),console.info("Crop",d,"Zoom",p),qI(f,n=!1,n)},function(){g=this.files,r(1,g)},function(t){d=t,r(4,d)},function(t){p=t,r(5,p)},function(t){yb[t?"unshift":"push"]((()=>{c=t,r(2,c)}))},function(t){yb[t?"unshift":"push"]((()=>{l=t,r(3,l)}))}]}class vv extends jb{constructor(t){super(),Yb(this,t,_v,Cv,LI,{output:0})}}function Bv(t){let e,r,n,o=t[2]?.length+"";return{c(){e=XI("small"),r=tb(o),n=tb(" B"),ib(e,"class","block text-center")},m(t,o){zI(t,e,o),VI(e,r),VI(e,n)},p(t,e){4&e&&o!==(o=t[2]?.length+"")&&ab(r,o)},d(t){t&&WI(e)}}}function Sv(t){let e,r,n,o,i,s,a=t[26].message+"",c=t[26].stack+"";return{c(){e=XI("danger"),r=tb("Loading profile failed "),n=tb(a),o=eb(),i=XI("pre"),s=tb(c)},m(t,a){zI(t,e,a),VI(e,r),VI(e,n),zI(t,o,a),zI(t,i,a),VI(i,s)},p(t,e){1&e&&a!==(a=t[26].message+"")&&ab(n,a),1&e&&c!==(c=t[26].stack+"")&&ab(s,c)},d(t){t&&WI(e),t&&WI(o),t&&WI(i)}}}function kv(t){let e,r,n;return{c(){e=XI("button"),e.textContent="save"},m(o,i){zI(o,e,i),r||(n=nb(e,"click",t[18]),r=!0)},p:QI,d(t){t&&WI(e),r=!1,n()}}}function xv(t){let e;return{c(){e=tb("Loading...")},m(t,r){zI(t,e,r)},p:QI,d(t){t&&WI(e)}}}function Qv(t){let e,r;return e=new Om({props:{open:!0,$$slots:{default:[Dv]},$$scope:{ctx:t}}}),e.$on("fade",t[21]),{c(){Fb(e.$$.fragment)},m(t,n){$b(e,t,n),r=!0},p(t,r){const n={};134217762&r&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){r||(Db(e.$$.fragment,t),r=!0)},o(t){Ob(e.$$.fragment,t),r=!1},d(t){Nb(e,t)}}}function Mv(t){let e,r,n,o,i,s,a,c,u=["F","M","NB"][rm(t[1]).sex]+"",l=rm(t[1]).geohash+"";return{c(){e=XI("ul"),r=XI("li"),n=tb("Gender: "),o=tb(u),i=eb(),s=XI("li"),a=tb("Location: "),c=tb(l)},m(t,u){zI(t,e,u),VI(e,r),VI(r,n),VI(r,o),VI(e,i),VI(e,s),VI(s,a),VI(s,c)},p(t,e){2&e&&u!==(u=["F","M","NB"][rm(t[1]).sex]+"")&&ab(o,u),2&e&&l!==(l=rm(t[1]).geohash+"")&&ab(c,l)},d(t){t&&WI(e)}}}function Dv(t){let e,r,n,o,i,s,a,c,u,l,f,h,g,d,p,A,y,I,b,m,w=t[1]&&Mv(t);return a=new Rm({props:{data:t[10],size:6}}),{c(){e=XI("article"),r=XI("header"),r.innerHTML="<h5>IDSQR</h5>",n=eb(),o=XI("div"),w&&w.c(),i=eb(),s=XI("div"),Fb(a.$$.fragment),c=eb(),u=XI("p"),u.innerHTML="This is your cryptographic identity.\n            <br/>\n            Let your friends scan your code\n            but keep the backed up image safe.",l=eb(),f=XI("footer"),h=XI("div"),g=XI("a"),g.textContent="purge",d=eb(),p=XI("a"),p.textContent="backup",A=eb(),y=XI("a"),y.textContent="close",ib(s,"class","vpad"),ib(o,"class","column xcenter"),ib(g,"role","button"),ib(p,"role","button"),ib(y,"role","button"),ib(h,"class","row space-between")},m(E,C){zI(E,e,C),VI(e,r),VI(e,n),VI(e,o),w&&w.m(o,null),VI(o,i),VI(o,s),$b(a,s,null),VI(o,c),VI(o,u),VI(e,l),VI(e,f),VI(f,h),VI(h,g),VI(h,d),VI(h,p),VI(h,A),VI(h,y),I=!0,b||(m=[nb(g,"click",t[19]),nb(p,"click",km),nb(y,"click",t[20])],b=!0)},p(t,e){t[1]?w?w.p(t,e):(w=Mv(t),w.c(),w.m(o,i)):w&&(w.d(1),w=null)},i(t){I||(Db(a.$$.fragment,t),I=!0)},o(t){Ob(a.$$.fragment,t),I=!1},d(t){t&&WI(e),w&&w.d(),Nb(a),b=!1,OI(m)}}}function Ov(t){let e,r,n,o,i,s,a,c,u,l,f,h,g,d,p,A,y,I,b,m,w,E,C,_,v,B,S,k,x,Q,M,D;a=new Tm({props:{id:"icon-qr"}}),l=new Tm({props:{id:"icon-info"}}),p=new vv({props:{output:t[8]}});let O=t[2]?.length&&Bv(t),U={ctx:t,current:null,token:null,hasCatch:!0,pending:xv,then:kv,catch:Sv,error:26};Ub(k=t[0],U);let L=t[5]&&Qv(t);return{c(){e=XI("profile-view"),r=XI("div"),n=XI("h1"),n.textContent="🕶️ Profile",o=eb(),i=XI("div"),s=XI("h2"),Fb(a.$$.fragment),c=eb(),u=XI("h2"),Fb(l.$$.fragment),f=eb(),h=XI("label"),g=XI("h5"),g.textContent="picture",d=eb(),Fb(p.$$.fragment),A=eb(),O&&O.c(),y=eb(),I=XI("label"),b=XI("h5"),b.textContent="name",m=eb(),w=XI("input"),E=eb(),C=XI("label"),_=XI("h5"),_.textContent="spark",v=eb(),B=XI("input"),S=eb(),U.block.c(),x=eb(),L&&L.c(),ib(i,"class","row"),ib(r,"class","row space-between xstart"),ib(h,"for","file"),ib(w,"type","text"),ib(w,"placeholder","You got a street name?"),ib(w,"id","name"),ib(w,"name","name"),ib(I,"for","name"),ib(B,"type","text"),ib(B,"placeholder","what's on your mind?"),ib(B,"id","tagline"),ib(B,"name","tagline"),ib(C,"for","tagline"),sb(e,"class","block container")},m(k,T){zI(k,e,T),VI(e,r),VI(r,n),VI(r,o),VI(r,i),VI(i,s),$b(a,s,null),VI(i,c),VI(i,u),$b(l,u,null),VI(e,f),VI(e,h),VI(h,g),VI(h,d),$b(p,h,null),VI(h,A),O&&O.m(h,null),VI(e,y),VI(e,I),VI(I,b),VI(I,m),VI(I,w),cb(w,t[4]),VI(e,E),VI(e,C),VI(C,_),VI(C,v),VI(C,B),cb(B,t[3]),VI(e,S),U.block.m(e,U.anchor=null),U.mount=()=>e,U.anchor=x,VI(e,x),L&&L.m(e,null),Q=!0,M||(D=[nb(s,"click",t[14]),nb(u,"click",t[15]),nb(w,"input",t[16]),nb(B,"input",t[17])],M=!0)},p(r,[n]){(t=r)[2]?.length?O?O.p(t,n):(O=Bv(t),O.c(),O.m(h,null)):O&&(O.d(1),O=null),16&n&&w.value!==t[4]&&cb(w,t[4]),8&n&&B.value!==t[3]&&cb(B,t[3]),U.ctx=t,1&n&&k!==(k=t[0])&&Ub(k,U)||Lb(U,t,n),t[5]?L?(L.p(t,n),32&n&&Db(L,1)):(L=Qv(t),L.c(),Db(L,1),L.m(e,null)):L&&(Qb(),Ob(L,1,1,(()=>{L=null})),Mb())},i(t){Q||(Db(a.$$.fragment,t),Db(l.$$.fragment,t),Db(p.$$.fragment,t),Db(L),Q=!0)},o(t){Ob(a.$$.fragment,t),Ob(l.$$.fragment,t),Ob(p.$$.fragment,t),Ob(L),Q=!1},d(t){t&&WI(e),Nb(a),Nb(l),Nb(p),O&&O.d(),U.block.d(),U.token=null,U=null,L&&L.d(),M=!1,OI(D)}}}function Uv(t,e,r){let o,i,s,a,c,u,l;const f=Gb();NI(t,f,(t=>r(4,u=t)));const h=Gb();NI(t,h,(t=>r(3,c=t)));const g=Gb();NI(t,g,(t=>r(2,a=t)));const d=Gb();NI(t,d,(t=>r(22,o=t)));const p=Gb();NI(t,p,(t=>r(1,s=t)));const A=Gb();NI(t,A,(t=>r(23,i=t)));const y=Gb(!1);async function I(){await async function(t){await tm.writeProfile(t),Am(!0),t.picture&&Im(t.picture),n.exports.get(gm)&&!n.exports.get(fm)&&(await vm(),YB("/pub"))}({name:u,tagline:c,age:99,sex:0,picture:a,geohash:o})}NI(t,y,(t=>r(5,l=t)));let b=async function(){const t=await tm.readProfile();if(t){if(qI(f,u=t.name,u),qI(h,c=t.tagline,c),qI(g,a=t.picture,a),qI(A,i=await tm.readIdentity(),i),qI(p,s=i.slice(32),s),qI(d,o=t.geohash,o),!o)try{qI(d,o=await async function(){const t=await n(),{latitude:e,longitude:r}=t.coords;return Ys.encode(e,r,6);function n(t){return new Promise(((e,r)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e,r,t):r(new Error("Browser does not support geolocation APIs"))}))}}(),o)}catch(t){console.log("BrowserLocation failed, let user set manually",t)}return t}}();return[b,s,a,c,u,l,f,h,g,d,p,A,y,I,()=>qI(y,l=!0,l),()=>YB("/about"),function(){u=this.value,f.set(u)},function(){c=this.value,h.set(c)},()=>r(0,b=I()),()=>Sm(!0),()=>qI(y,l=!1,l),()=>qI(y,l=!1,l)]}class Lv extends jb{constructor(t){super(),Yb(this,t,Uv,Ov,LI,{})}}var Tv=[{name:"Lager",time:20,short:"Cold, quenching",price:"2€"},{name:"Kosmo",time:18,short:"Tasty",price:"3€",mod:"Random perk"},{name:"Ale",time:22,short:"Slightly different",price:"3.2€"},{name:"Stout",time:30,price:"5€",mod:"silence",short:"Liquid darkness"},{name:"Sparkly Wine",time:15,mod:"1.5X Rewards",price:"6€",short:"Proof of Prestige"}];function Pv(t,e,r){const n=t.slice();return n[0]=e[r],n}function Fv(t){let e,r,n,o,i,s,a,c,u,l,f,h,g,d,p,A,y,I,b=t[0].name+"",m=t[0].time+"",w=t[0].short+"",E=t[0].price+"",C=t[0].mod&&function(t){let e,r,n=t[0].mod+"";return{c(){e=tb("| "),r=tb(n)},m(t,n){zI(t,e,n),zI(t,r,n)},p:QI,d(t){t&&WI(e),t&&WI(r)}}}(t);return{c(){e=XI("item"),r=XI("iimage"),r.textContent="img",n=eb(),o=XI("description"),i=XI("h3"),s=tb(b),a=eb(),c=XI("h6"),u=tb(m),l=tb(" min\n              "),C&&C.c(),f=eb(),h=XI("short"),g=tb(w),d=eb(),p=XI("buy"),A=XI("button"),y=tb(E),I=eb(),ib(r,"class","svelte-t9d4u"),ib(i,"class","svelte-t9d4u"),ib(c,"class","svelte-t9d4u"),ib(h,"class","svelte-t9d4u"),ib(o,"class","column xstart grow2 space-between svelte-t9d4u"),ib(A,"class","svelte-t9d4u"),ib(p,"class","column center"),ib(e,"class","drink row xcenter svelte-t9d4u")},m(t,b){zI(t,e,b),VI(e,r),VI(e,n),VI(e,o),VI(o,i),VI(i,s),VI(o,a),VI(o,c),VI(c,u),VI(c,l),C&&C.m(c,null),VI(o,f),VI(o,h),VI(h,g),VI(e,d),VI(e,p),VI(p,A),VI(A,y),VI(e,I)},p(t,e){t[0].mod&&C.p(t,e)},d(t){t&&WI(e),C&&C.d()}}}function $v(t){let e,r,n,o,i,s,a,c,u,l=Tv,f=[];for(let e=0;e<l.length;e+=1)f[e]=Fv(Pv(t,l,e));return{c(){e=XI("shop-view"),r=XI("splash"),r.innerHTML='<img src="/gfx/shop.jpg" alt="The Bar"/>',n=eb(),o=XI("section"),i=XI("h1"),i.textContent="Drinks",s=eb(),a=XI("drinks");for(let t=0;t<f.length;t+=1)f[t].c();c=eb(),u=XI("h1"),u.textContent="Gear",ib(r,"class","column xcenter svelte-t9d4u"),ib(i,"class","text-center"),ib(a,"class","svelte-t9d4u"),ib(u,"class","text-center"),ib(o,"class","block container"),sb(e,"data-theme","dark")},m(t,l){zI(t,e,l),VI(e,r),VI(e,n),VI(e,o),VI(o,i),VI(o,s),VI(o,a);for(let t=0;t<f.length;t+=1)f[t].m(a,null);VI(o,c),VI(o,u)},p(t,[e]){if(0&e){let r;for(l=Tv,r=0;r<l.length;r+=1){const n=Pv(t,l,r);f[r]?f[r].p(n,e):(f[r]=Fv(n),f[r].c(),f[r].m(a,null))}for(;r<f.length;r+=1)f[r].d(1);f.length=l.length}},i:QI,o:QI,d(t){t&&WI(e),JI(f,t)}}}class Nv extends jb{constructor(t){super(),Yb(this,t,null,$v,LI,{})}}function Rv(t){let e,r,n,o,i,s,a,c;return a=new j_({props:{src:t[0].peer.picture}}),{c(){e=XI("vibe"),r=XI("tint"),n=tb(" "),i=eb(),s=XI("portrait"),Fb(a.$$.fragment),ib(r,"style",o=`width: ${100*t[1]}px;`),ib(r,"class","svelte-nr6d3f"),ib(s,"class","svelte-nr6d3f"),ib(e,"class","svelte-nr6d3f")},m(t,o){zI(t,e,o),VI(e,r),VI(r,n),VI(e,i),VI(e,s),$b(a,s,null),c=!0},p(t,[e]){(!c||2&e&&o!==(o=`width: ${100*t[1]}px;`))&&ib(r,"style",o);const n={};1&e&&(n.src=t[0].peer.picture),a.$set(n)},i(t){c||(Db(a.$$.fragment,t),c=!0)},o(t){Ob(a.$$.fragment,t),c=!1},d(t){t&&WI(e),Nb(a)}}}function Yv(t,e,r){let n,{vibe:o}=e;const i=o.expiresAt-o.createdAt,s=Hb(1,(t=>{const e=setInterval((()=>{const r=o.expiresAt-Date.now();r<=0?(t(0),clearInterval(e)):t(r/i)}),1e3);return()=>clearInterval(e)}));return NI(t,s,(t=>r(1,n=t))),t.$$set=t=>{"vibe"in t&&r(0,o=t.vibe)},[o,n,s]}class jv extends jb{constructor(t){super(),Yb(this,t,Yv,Rv,LI,{vibe:0})}}function Kv(t,e,r){const n=t.slice();return n[12]=e[r],n}function Hv(t,e,r){const n=t.slice();return n[15]=e[r],n}function Gv(t){let e,r,n,o,i,s;function a(){return t[7](t[15])}return r=new jv({props:{vibe:t[15]}}),{c(){e=XI("div"),Fb(r.$$.fragment),n=eb()},m(t,c){zI(t,e,c),$b(r,e,null),VI(e,n),o=!0,i||(s=nb(e,"click",a),i=!0)},p(e,n){t=e;const o={};2&n&&(o.vibe=t[15]),r.$set(o)},i(t){o||(Db(r.$$.fragment,t),o=!0)},o(t){Ob(r.$$.fragment,t),o=!1},d(t){t&&WI(e),Nb(r),i=!1,s()}}}function qv(t){let e,r,n="match"!==t[15].state&&Gv(t);return{c(){n&&n.c(),e=rb()},m(t,o){n&&n.m(t,o),zI(t,e,o),r=!0},p(t,r){"match"!==t[15].state?n?(n.p(t,r),2&r&&Db(n,1)):(n=Gv(t),n.c(),Db(n,1),n.m(e.parentNode,e)):n&&(Qb(),Ob(n,1,1,(()=>{n=null})),Mb())},i(t){r||(Db(n),r=!0)},o(t){Ob(n),r=!1},d(t){n&&n.d(t),t&&WI(e)}}}function Vv(t){let e,r,n,o,i,s,a,c,u,l,f,h,g,d,p,A,y,I,b,m,w,E,C,_,v,B=t[12].peer.name+"",S=t[12].myTurn?"your turn":"waiting";function k(){return t[8](t[12])}return n=new j_({props:{src:t[12].peer.picture,size:"80px"}}),d=new Tm({props:{id:"heal_resp",tag:"full"}}),A=new Tm({props:{id:"heal_resp",tag:"full"}}),I=new Tm({props:{id:"heal_resp",tag:"full"}}),w=new fw({props:{expiresAt:t[12].expiresAt,format:"mm:ss"}}),{c(){e=XI("chat"),r=XI("div"),Fb(n.$$.fragment),o=eb(),i=XI("div"),s=XI("h3"),a=tb(B),c=eb(),u=XI("h6"),l=tb(S),f=eb(),h=XI("div"),g=XI("health"),Fb(d.$$.fragment),p=eb(),Fb(A.$$.fragment),y=eb(),Fb(I.$$.fragment),b=eb(),m=XI("h3"),Fb(w.$$.fragment),E=eb(),ib(s,"class","no-margin"),ib(u,"class","no-margin"),ib(i,"class","columns space-between gap"),ib(r,"class","row xcenter"),ib(m,"class","no-margin"),ib(h,"class","columns xcenter gap"),ib(e,"class","row space-between svelte-wwtn89")},m(t,B){zI(t,e,B),VI(e,r),$b(n,r,null),VI(r,o),VI(r,i),VI(i,s),VI(s,a),VI(i,c),VI(i,u),VI(u,l),VI(e,f),VI(e,h),VI(h,g),$b(d,g,null),VI(g,p),$b(A,g,null),VI(g,y),$b(I,g,null),VI(h,b),VI(h,m),$b(w,m,null),VI(e,E),C=!0,_||(v=nb(e,"click",k),_=!0)},p(e,r){t=e;const o={};4&r&&(o.src=t[12].peer.picture),n.$set(o),(!C||4&r)&&B!==(B=t[12].peer.name+"")&&ab(a,B),(!C||4&r)&&S!==(S=t[12].myTurn?"your turn":"waiting")&&ab(l,S);const i={};4&r&&(i.expiresAt=t[12].expiresAt),w.$set(i)},i(t){C||(Db(n.$$.fragment,t),Db(d.$$.fragment,t),Db(A.$$.fragment,t),Db(I.$$.fragment,t),Db(w.$$.fragment,t),C=!0)},o(t){Ob(n.$$.fragment,t),Ob(d.$$.fragment,t),Ob(A.$$.fragment,t),Ob(I.$$.fragment,t),Ob(w.$$.fragment,t),C=!1},d(t){t&&WI(e),Nb(n),Nb(d),Nb(A),Nb(I),Nb(w),_=!1,v()}}}function zv(t){let e,r;return e=new Om({props:{open:!0,$$slots:{default:[Jv]},$$scope:{ctx:t}}}),e.$on("fade",t[11]),{c(){Fb(e.$$.fragment)},m(t,n){$b(e,t,n),r=!0},p(t,r){const n={};262145&r&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){r||(Db(e.$$.fragment,t),r=!0)},o(t){Ob(e.$$.fragment,t),r=!1},d(t){Nb(e,t)}}}function Wv(t){let e,r,n,o,i,s,a,c,u,l,f,h,g,d,p,A,y,I=t[0].peer.tagline+"";return a=new fw({props:{expiresAt:t[0].expiresAt,format:"mm:ss"}}),{c(){e=XI("p"),r=tb(I),n=eb(),o=XI("h6"),o.textContent="Vibe Expires in",i=eb(),s=XI("h2"),Fb(a.$$.fragment),c=eb(),u=XI("div"),l=XI("a"),l.textContent="reject",f=eb(),h=XI("a"),h.textContent="accept",g=eb(),d=XI("br"),ib(o,"class","text-center no-margin"),ib(s,"class","text-center timer svelte-wwtn89"),ib(l,"role","button"),ib(l,"class","reject svelte-wwtn89"),ib(h,"role","button"),ib(h,"class","accept svelte-wwtn89"),ib(u,"class","text-center")},m(I,b){zI(I,e,b),VI(e,r),zI(I,n,b),zI(I,o,b),zI(I,i,b),zI(I,s,b),$b(a,s,null),zI(I,c,b),zI(I,u,b),VI(u,l),VI(u,f),VI(u,h),zI(I,g,b),zI(I,d,b),p=!0,A||(y=[nb(l,"click",t[9]),nb(h,"click",t[10])],A=!0)},p(t,e){(!p||1&e)&&I!==(I=t[0].peer.tagline+"")&&ab(r,I);const n={};1&e&&(n.expiresAt=t[0].expiresAt),a.$set(n)},i(t){p||(Db(a.$$.fragment,t),p=!0)},o(t){Ob(a.$$.fragment,t),p=!1},d(t){t&&WI(e),t&&WI(n),t&&WI(o),t&&WI(i),t&&WI(s),Nb(a),t&&WI(c),t&&WI(u),t&&WI(g),t&&WI(d),A=!1,OI(y)}}}function Jv(t){let e,r;return e=new z_({props:{peer:t[0].peer,$$slots:{default:[Wv]},$$scope:{ctx:t}}}),{c(){Fb(e.$$.fragment)},m(t,n){$b(e,t,n),r=!0},p(t,r){const n={};1&r&&(n.peer=t[0].peer),262145&r&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){r||(Db(e.$$.fragment,t),r=!0)},o(t){Ob(e.$$.fragment,t),r=!1},d(t){Nb(e,t)}}}function Xv(t){let e,r,n,o,i,s,a,c,u,l,f,h,g=t[1],d=[];for(let e=0;e<g.length;e+=1)d[e]=qv(Hv(t,g,e));const p=t=>Ob(d[t],1,1,(()=>{d[t]=null}));let A=t[2],y=[];for(let e=0;e<A.length;e+=1)y[e]=Vv(Kv(t,A,e));const I=t=>Ob(y[t],1,1,(()=>{y[t]=null}));let b=t[0]&&zv(t);return{c(){e=XI("messages-view"),r=XI("h1"),r.textContent="💌 Messages",n=eb(),o=XI("h5"),o.textContent="Vibes",i=eb(),s=XI("vibes");for(let t=0;t<d.length;t+=1)d[t].c();a=eb(),c=XI("h5"),c.textContent="Conversations",u=eb(),l=XI("conversations");for(let t=0;t<y.length;t+=1)y[t].c();f=eb(),b&&b.c(),ib(s,"class","row xcenter"),sb(e,"class","block container")},m(t,g){zI(t,e,g),VI(e,r),VI(e,n),VI(e,o),VI(e,i),VI(e,s);for(let t=0;t<d.length;t+=1)d[t].m(s,null);VI(e,a),VI(e,c),VI(e,u),VI(e,l);for(let t=0;t<y.length;t+=1)y[t].m(l,null);VI(e,f),b&&b.m(e,null),h=!0},p(t,[r]){if(3&r){let e;for(g=t[1],e=0;e<g.length;e+=1){const n=Hv(t,g,e);d[e]?(d[e].p(n,r),Db(d[e],1)):(d[e]=qv(n),d[e].c(),Db(d[e],1),d[e].m(s,null))}for(Qb(),e=g.length;e<d.length;e+=1)p(e);Mb()}if(4&r){let e;for(A=t[2],e=0;e<A.length;e+=1){const n=Kv(t,A,e);y[e]?(y[e].p(n,r),Db(y[e],1)):(y[e]=Vv(n),y[e].c(),Db(y[e],1),y[e].m(l,null))}for(Qb(),e=A.length;e<y.length;e+=1)I(e);Mb()}t[0]?b?(b.p(t,r),1&r&&Db(b,1)):(b=zv(t),b.c(),Db(b,1),b.m(e,null)):b&&(Qb(),Ob(b,1,1,(()=>{b=null})),Mb())},i(t){if(!h){for(let t=0;t<g.length;t+=1)Db(d[t]);for(let t=0;t<A.length;t+=1)Db(y[t]);Db(b),h=!0}},o(t){d=d.filter(Boolean);for(let t=0;t<d.length;t+=1)Ob(d[t]);y=y.filter(Boolean);for(let t=0;t<y.length;t+=1)Ob(y[t]);Ob(b),h=!1},d(t){t&&WI(e),JI(d,t),JI(y,t),b&&b.d()}}}function Zv(t,e,r){let n,o,i;const s=Wb(Zb.$chats());NI(t,s,(t=>r(2,i=t)));const a=nm();NI(t,a,(t=>r(1,o=t)));const c=Gb(null);function u(t,e){Zb.respondVibe(t,e).then((()=>{qI(c,n=null,n)})).catch((t=>console.error("Vibe response failed",t)))}NI(t,c,(t=>r(0,n=t)));return[n,o,i,s,a,c,u,t=>qI(c,n=t,n),t=>YB("/chat/"+t.id.toString("hex")),()=>u(n.id,!0),()=>u(n.id),()=>qI(c,n=null,n)]}class tB extends jb{constructor(t){super(),Yb(this,t,Zv,Xv,LI,{})}}function eB(t,e,r){const n=t.slice();return n[25]=e[r],n}function rB(t,e,r){const n=t.slice();return n[28]=e[r],n}function nB(t){let e;return{c(){e=XI("placeholder"),e.textContent=" ",ib(e,"aria-busy","true")},m(t,r){zI(t,e,r)},p:QI,i:QI,o:QI,d(t){t&&WI(e)}}}function oB(t){let e,r,n,o,i,s,a,c,u,l=t[0].peer.name+"";return r=new j_({props:{src:t[0].peer.picture,size:"70px"}}),{c(){e=XI("portrait"),Fb(r.$$.fragment),n=eb(),o=XI("div"),i=XI("h1"),s=tb(l),a=eb(),c=XI("div"),ib(e,"class","svelte-1secqat"),ib(i,"class","hgap svelte-1secqat"),ib(c,"class","hgap"),ib(o,"class","column")},m(t,l){zI(t,e,l),$b(r,e,null),zI(t,n,l),zI(t,o,l),VI(o,i),VI(i,s),VI(o,a),VI(o,c),u=!0},p(t,e){const n={};1&e&&(n.src=t[0].peer.picture),r.$set(n),(!u||1&e)&&l!==(l=t[0].peer.name+"")&&ab(s,l)},i(t){u||(Db(r.$$.fragment,t),u=!0)},o(t){Ob(r.$$.fragment,t),u=!1},d(t){t&&WI(e),Nb(r),t&&WI(n),t&&WI(o)}}}function iB(t){let e,r;return e=new Tm({props:{id:"heal_resp",tag:"empty"}}),{c(){Fb(e.$$.fragment)},m(t,n){$b(e,t,n),r=!0},i(t){r||(Db(e.$$.fragment,t),r=!0)},o(t){Ob(e.$$.fragment,t),r=!1},d(t){Nb(e,t)}}}function sB(t){let e,r;return e=new Tm({props:{id:"heal_resp",tag:"full"}}),{c(){Fb(e.$$.fragment)},m(t,n){$b(e,t,n),r=!0},i(t){r||(Db(e.$$.fragment,t),r=!0)},o(t){Ob(e.$$.fragment,t),r=!1},d(t){Nb(e,t)}}}function aB(t){let e,r,n,o;const i=[sB,iB],s=[];function a(t,e){return t[28]?0:1}return e=a(t),r=s[e]=i[e](t),{c(){r.c(),n=rb()},m(t,r){s[e].m(t,r),zI(t,n,r),o=!0},p(t,o){let c=e;e=a(t),e!==c&&(Qb(),Ob(s[c],1,1,(()=>{s[c]=null})),Mb(),r=s[e],r||(r=s[e]=i[e](t),r.c()),Db(r,1),r.m(n.parentNode,n))},i(t){o||(Db(r),o=!0)},o(t){Ob(r),o=!1},d(t){s[e].d(t),t&&WI(n)}}}function cB(t){let e,r,n=t[25].content+"";return{c(){e=XI("txt"),r=tb(n),ib(e,"class","svelte-1secqat")},m(t,n){zI(t,e,n),VI(e,r)},p(t,e){1&e&&n!==(n=t[25].content+"")&&ab(r,n)},d(t){t&&WI(e)}}}function uB(t){let e;function r(t,e){return t[0].initiator&&"sent"===t[25].type||!t[0].initiator&&"received"===t[25].type?fB:lB}let n=r(t),o=n(t);return{c(){e=XI("sym"),o.c(),ib(e,"class","hgap svelte-1secqat")},m(t,r){zI(t,e,r),o.m(e,null)},p(t,i){n!==(n=r(t))&&(o.d(1),o=n(t),o&&(o.c(),o.m(e,null)))},d(t){t&&WI(e),o.d()}}}function lB(t){let e;return{c(){e=tb("ᚧ")},m(t,r){zI(t,e,r)},d(t){t&&WI(e)}}}function fB(t){let e;return{c(){e=tb("ᚦ")},m(t,r){zI(t,e,r)},d(t){t&&WI(e)}}}function hB(t){let e;function r(t,e){return t[25].pass?uB:cB}let n=r(t),o=n(t);return{c(){e=XI("msg"),o.c(),ib(e,"class","row xcenter svelte-1secqat"),lb(e,"start","received"===t[25].type),lb(e,"remote","received"===t[25].type),lb(e,"local","sent"===t[25].type),lb(e,"end","sent"===t[25].type)},m(t,r){zI(t,e,r),o.m(e,null)},p(t,i){n===(n=r(t))&&o?o.p(t,i):(o.d(1),o=n(t),o&&(o.c(),o.m(e,null))),1&i&&lb(e,"start","received"===t[25].type),1&i&&lb(e,"remote","received"===t[25].type),1&i&&lb(e,"local","sent"===t[25].type),1&i&&lb(e,"end","sent"===t[25].type)},d(t){t&&WI(e),o.d()}}}function gB(t){let e,r,n,o,i,s=t[6][0]+"",a=t[6][1]+"";return{c(){e=XI("white"),r=tb(s),n=eb(),o=XI("black"),i=tb(a)},m(t,s){zI(t,e,s),VI(e,r),zI(t,n,s),zI(t,o,s),VI(o,i)},p(t,e){64&e&&s!==(s=t[6][0]+"")&&ab(r,s),64&e&&a!==(a=t[6][1]+"")&&ab(i,a)},d(t){t&&WI(e),t&&WI(n),t&&WI(o)}}}function dB(t){let e,r,n,o,i,s=t[6][1]+"",a=t[6][0]+"";return{c(){e=XI("black"),r=tb(s),n=eb(),o=XI("white"),i=tb(a)},m(t,s){zI(t,e,s),VI(e,r),zI(t,n,s),zI(t,o,s),VI(o,i)},p(t,e){64&e&&s!==(s=t[6][1]+"")&&ab(r,s),64&e&&a!==(a=t[6][0]+"")&&ab(i,a)},d(t){t&&WI(e),t&&WI(n),t&&WI(o)}}}function pB(t){let e,r,n=t[0].state+"";return{c(){e=XI("h2"),r=tb(n),ib(e,"class","text-center nogap svelte-1secqat")},m(t,n){zI(t,e,n),VI(e,r)},p(t,e){1&e&&n!==(n=t[0].state+"")&&ab(r,n)},i:QI,o:QI,d(t){t&&WI(e)}}}function AB(t){let e,r,n,o,i,s;const a=[bB,IB],c=[];function u(t,e){return t[0].messages%2?0:1}return r=u(t),n=c[r]=a[r](t),{c(){e=XI("h1"),n.c(),o=eb(),i=XI("h2"),i.textContent="Conversion ended",ib(e,"class","text-center nogap svelte-1secqat"),ib(i,"class","text-center nogap svelte-1secqat")},m(t,n){zI(t,e,n),c[r].m(e,null),zI(t,o,n),zI(t,i,n),s=!0},p(t,o){let i=r;r=u(t),r!==i&&(Qb(),Ob(c[i],1,1,(()=>{c[i]=null})),Mb(),n=c[r],n||(n=c[r]=a[r](t),n.c()),Db(n,1),n.m(e,null))},i(t){s||(Db(n),s=!0)},o(t){Ob(n),s=!1},d(t){t&&WI(e),c[r].d(),t&&WI(o),t&&WI(i)}}}function yB(t){let e,r,n,o,i,s,a,c,u,l,f,h,g,d=t[7][0].join("/")+"",p=t[7][1].join("/")+"",A=t[7][2].join("/")+"";function y(t,e){return t[0].myTurn?wB:mB}let I=y(t),b=I(t);function m(t,e){return t[3]?EB:CB}let w=m(t),E=w(t);return{c(){e=XI("h2"),b.c(),r=eb(),n=XI("div"),E.c(),o=eb(),i=XI("div"),s=XI("samp"),a=tb(d),c=eb(),u=XI("samp"),l=tb(p),f=eb(),h=XI("samp"),g=tb(A),ib(e,"class","text-center nogap svelte-1secqat"),ib(n,"class","row space-between"),ib(i,"class","row space-between")},m(t,d){zI(t,e,d),b.m(e,null),zI(t,r,d),zI(t,n,d),E.m(n,null),zI(t,o,d),zI(t,i,d),VI(i,s),VI(s,a),VI(i,c),VI(i,u),VI(u,l),VI(i,f),VI(i,h),VI(h,g)},p(t,r){I!==(I=y(t))&&(b.d(1),b=I(t),b&&(b.c(),b.m(e,null))),w===(w=m(t))&&E?E.p(t,r):(E.d(1),E=w(t),E&&(E.c(),E.m(n,null))),128&r&&d!==(d=t[7][0].join("/")+"")&&ab(a,d),128&r&&p!==(p=t[7][1].join("/")+"")&&ab(l,p),128&r&&A!==(A=t[7][2].join("/")+"")&&ab(g,A)},i:QI,o:QI,d(t){t&&WI(e),b.d(),t&&WI(r),t&&WI(n),E.d(),t&&WI(o),t&&WI(i)}}}function IB(t){let e,r,n;return e=new Tm({props:{id:"bye_init",tag:"white"}}),r=new Tm({props:{id:"bye_res_resp",tag:"black"}}),{c(){Fb(e.$$.fragment),Fb(r.$$.fragment)},m(t,o){$b(e,t,o),$b(r,t,o),n=!0},i(t){n||(Db(e.$$.fragment,t),Db(r.$$.fragment,t),n=!0)},o(t){Ob(e.$$.fragment,t),Ob(r.$$.fragment,t),n=!1},d(t){Nb(e,t),Nb(r,t)}}}function bB(t){let e,r,n;return e=new Tm({props:{id:"bye_resp",tag:"black"}}),r=new Tm({props:{id:"bye_res_init",tag:"white"}}),{c(){Fb(e.$$.fragment),Fb(r.$$.fragment)},m(t,o){$b(e,t,o),$b(r,t,o),n=!0},i(t){n||(Db(e.$$.fragment,t),Db(r.$$.fragment,t),n=!0)},o(t){Ob(e.$$.fragment,t),Ob(r.$$.fragment,t),n=!1},d(t){Nb(e,t),Nb(r,t)}}}function mB(t){let e;return{c(){e=tb("Waiting")},m(t,r){zI(t,e,r)},d(t){t&&WI(e)}}}function wB(t){let e;return{c(){e=tb("Your turn")},m(t,r){zI(t,e,r)},d(t){t&&WI(e)}}}function EB(t){let e,r,n;return{c(){e=XI("input"),ib(e,"class","line")},m(o,i){zI(o,e,i),t[21](e),cb(e,t[4]),r||(n=[nb(e,"input",t[22]),nb(e,"keypress",t[16]),nb(e,"blur",t[23])],r=!0)},p(t,r){16&r&&e.value!==t[4]&&cb(e,t[4])},d(o){o&&WI(e),t[21](null),r=!1,OI(n)}}}function CB(t){let e,r,n,o,i,s,a,c,u,l,f,h,g;return{c(){e=XI("button"),r=tb("end"),o=eb(),i=XI("button"),s=tb("msg"),c=eb(),u=XI("button"),l=tb("pass"),ib(e,"class","hgap"),e.disabled=n=!t[0].myTurn,ib(i,"class","hgap"),i.disabled=a=!t[0].myTurn,ib(u,"class","hgap"),u.disabled=f=!t[0].myTurn},m(n,a){zI(n,e,a),VI(e,r),zI(n,o,a),zI(n,i,a),VI(i,s),zI(n,c,a),zI(n,u,a),VI(u,l),h||(g=[nb(e,"click",t[19]),nb(i,"click",t[20]),nb(u,"click",t[15])],h=!0)},p(t,r){1&r&&n!==(n=!t[0].myTurn)&&(e.disabled=n),1&r&&a!==(a=!t[0].myTurn)&&(i.disabled=a),1&r&&f!==(f=!t[0].myTurn)&&(u.disabled=f)},d(t){t&&WI(e),t&&WI(o),t&&WI(i),t&&WI(c),t&&WI(u),h=!1,OI(g)}}}function _B(t){let e,r,n,o,i,s,a,c,u,l,f,h,g,d,p,A,y,I,b,m,w,E,C,_,v=Qp.rewrite(t[0].graph||"")+"";const B=[oB,nB],S=[];function k(t,e){return t[0].peer?0:1}o=k(t),i=S[o]=B[o](t);let x=t[5],Q=[];for(let e=0;e<x.length;e+=1)Q[e]=aB(rB(t,x,e));const M=t=>Ob(Q[t],1,1,(()=>{Q[t]=null}));f=new fw({props:{expiresAt:t[0].expiresAt,format:"mm:ss"}});let D=t[0].messages,O=[];for(let e=0;e<D.length;e+=1)O[e]=hB(eB(t,D,e));function U(t,e){return t[0].initiator?dB:gB}let L=U(t),T=L(t);const P=[yB,AB,pB],F=[];function $(t,e){return"active"===t[0].state?0:"end"===t[0].state?1:2}return E=$(t),C=F[E]=P[E](t),{c(){e=XI("chat"),r=XI("header"),n=XI("div"),i.c(),s=eb(),a=XI("div"),c=XI("health");for(let t=0;t<Q.length;t+=1)Q[t].c();u=eb(),l=XI("h3"),Fb(f.$$.fragment),h=eb(),g=XI("messages"),d=XI("p"),p=tb(v),A=eb();for(let t=0;t<O.length;t+=1)O[t].c();y=eb(),I=XI("msg"),b=XI("balance"),T.c(),m=eb(),w=XI("ctrls"),C.c(),ib(n,"class","row xcenter"),ib(l,"class","svelte-1secqat"),ib(a,"class","column xend"),ib(r,"class","container row space-between svelte-1secqat"),ib(d,"class","text-center"),lb(b,"inv",!t[0].initiator),ib(I,"class","row xcenter center svelte-1secqat"),ib(g,"class","container svelte-1secqat"),ib(e,"class","svelte-1secqat"),lb(e,"white",t[0].initiator),lb(e,"black",!t[0].initiator)},m(i,C){zI(i,e,C),VI(e,r),VI(r,n),S[o].m(n,null),VI(r,s),VI(r,a),VI(a,c);for(let t=0;t<Q.length;t+=1)Q[t].m(c,null);VI(a,u),VI(a,l),$b(f,l,null),VI(e,h),VI(e,g),VI(g,d),VI(d,p),VI(g,A);for(let t=0;t<O.length;t+=1)O[t].m(g,null);VI(g,y),VI(g,I),VI(I,b),T.m(b,null),t[18](g),VI(e,m),VI(e,w),F[E].m(w,null),_=!0},p(t,[r]){let s=o;if(o=k(t),o===s?S[o].p(t,r):(Qb(),Ob(S[s],1,1,(()=>{S[s]=null})),Mb(),i=S[o],i?i.p(t,r):(i=S[o]=B[o](t),i.c()),Db(i,1),i.m(n,null)),32&r){let e;for(x=t[5],e=0;e<x.length;e+=1){const n=rB(t,x,e);Q[e]?(Q[e].p(n,r),Db(Q[e],1)):(Q[e]=aB(n),Q[e].c(),Db(Q[e],1),Q[e].m(c,null))}for(Qb(),e=x.length;e<Q.length;e+=1)M(e);Mb()}const a={};if(1&r&&(a.expiresAt=t[0].expiresAt),f.$set(a),(!_||1&r)&&v!==(v=Qp.rewrite(t[0].graph||"")+"")&&ab(p,v),1&r){let e;for(D=t[0].messages,e=0;e<D.length;e+=1){const n=eB(t,D,e);O[e]?O[e].p(n,r):(O[e]=hB(n),O[e].c(),O[e].m(g,y))}for(;e<O.length;e+=1)O[e].d(1);O.length=D.length}L===(L=U(t))&&T?T.p(t,r):(T.d(1),T=L(t),T&&(T.c(),T.m(b,null))),1&r&&lb(b,"inv",!t[0].initiator);let u=E;E=$(t),E===u?F[E].p(t,r):(Qb(),Ob(F[u],1,1,(()=>{F[u]=null})),Mb(),C=F[E],C?C.p(t,r):(C=F[E]=P[E](t),C.c()),Db(C,1),C.m(w,null)),1&r&&lb(e,"white",t[0].initiator),1&r&&lb(e,"black",!t[0].initiator)},i(t){if(!_){Db(i);for(let t=0;t<x.length;t+=1)Db(Q[t]);Db(f.$$.fragment,t),Db(C),_=!0}},o(t){Ob(i),Q=Q.filter(Boolean);for(let t=0;t<Q.length;t+=1)Ob(Q[t]);Ob(f.$$.fragment,t),Ob(C),_=!1},d(r){r&&WI(e),S[o].d(),JI(Q,r),Nb(f),JI(O,r),T.d(),t[18](null),F[E].d()}}}function vB(t,e,r){let n,o,i,s,a,c,u,l,{id:f}=e;const h=Cm(f,"Chat");NI(t,h,(t=>r(0,n=t)));const g=Gb(!1);NI(t,g,(t=>r(3,o=t)));const d=Gb("");NI(t,d,(t=>r(4,i=t)));const p=qb(h,(t=>Array.from(new Array(3)).map(((e,r)=>r<t.health))));NI(t,p,(t=>r(5,s=t)));const A=qb(h,(t=>t.graph?t.initiator?Qp.scoreGraph(t.graph):Qp.scoreGraph(t.graph).reverse():[0,0]));NI(t,A,(t=>r(6,a=t)));const y=qb([h,A],(([t,e])=>t.graph?(t.initiator||(e=e.reverse()),[t.initiator?"ᛒᛔ":"ᛔᛒ",t.initiator?"ᛖ":"ᛗ",t.initiator?"ᚦ":"ᚧ"].map((r=>{const n=Qp.scoreGraph(t.graph+r).map(((t,r)=>t-e[r])).map((t=>function(t){return t>0?`+${t}`:t}(t)));return t.initiator?n:n.reverse()}))):[[0,0],[0,0],[0,0]]));var I;function b(t=0){console.log("Bye button pressed"),n.bye(t).then((()=>console.info("Bye published"))).catch((t=>console.error("Failed publishing Bye",t)))}NI(t,y,(t=>r(7,c=t))),I=()=>{u.scrollTo({top:u.scrollHeight,left:0,behaviour:"smooth"}),o&&l.focus()},hb().$$.after_update.push(I);return t.$$set=t=>{"id"in t&&r(17,f=t.id)},t.$$.update=()=>{1&t.$$.dirty&&"finalizing"===n.state&&n.myTurn&&b()},[n,u,l,o,i,s,a,c,h,g,d,p,A,y,b,function(){n.pass().then((()=>console.info("Pass published"))).catch((t=>console.error("Failed publishing Pass",t)))},function({charCode:t}){if(13===t)n.send(i.trim()).then((()=>{console.info("Message published"),qI(d,i="",i),qI(g,o=!1,o)})).catch((t=>console.error("Failed publishing Message",t)))},f,function(t){yb[t?"unshift":"push"]((()=>{u=t,r(1,u)}))},()=>b(0),()=>qI(g,o=!0,o),function(t){yb[t?"unshift":"push"]((()=>{l=t,r(2,l)}))},function(){i=this.value,d.set(i)},()=>qI(g,o=!!i.length,o)]}class BB extends jb{constructor(t){super(),Yb(this,t,vB,_B,LI,{id:17})}}function SB(t){let e,r,n,o,i,s,a,c,u,l,f,h,g,d,p,A,y,I,b,m,w,E,C,_,v,B,S,k,x,Q,M,D;return o=new Tm({props:{id:"dl-logo-red"}}),{c(){e=XI("about"),r=XI("div"),n=XI("logo"),Fb(o.$$.fragment),i=eb(),s=XI("h1"),a=tb("Picochat\n    "),c=XI("samp"),c.textContent=`${"3.0.0".replace(/^(\d+).+/,"$1")}`,u=eb(),l=XI("p"),l.textContent="Where ever we're going, we'll get there eventually.\n    Meanwhile, come say hi!\n  ",f=XI("ul"),f.innerHTML='<li class="svelte-1eldk8a"><a href="https://discord.gg/K5XjmZx" class="svelte-1eldk8a">Discord (community chat)</a></li> \n    <li class="svelte-1eldk8a"><a href="https://github.com/telamon/picochat/issues" class="svelte-1eldk8a">Questions &amp; Support</a></li> \n    <li class="svelte-1eldk8a"><a href="https://github.com/telamon/picochat" class="svelte-1eldk8a">Source code</a></li>',h=eb(),g=XI("h5"),g.textContent="Legalities",d=eb(),p=XI("table"),A=XI("tdata"),y=XI("tr"),I=XI("td"),I.textContent="build",b=XI("td"),b.textContent=`production-3.0.0-${"3591fdc33859eea8bd637158f34c9963bbc71813".substr(0,8)}`,m=eb(),w=XI("tr"),w.innerHTML="<td>Cookies</td><td>none, zilch, zero</td>",E=eb(),C=XI("tr"),C.innerHTML="<td>GDPR</td><td>All blocks are automatically erased when timers hit <code>00:00</code></td>",_=eb(),v=XI("tr"),v.innerHTML="<td>User</td><td>We have absolutley no control over p2p interactions, apply common sense, be polite</td>",B=eb(),S=XI("tr"),S.innerHTML="<td>License</td><td>GNU AGPL version 3</td>",k=eb(),x=XI("tr"),x.innerHTML="<td>Motto</td><td>No servers, no supernodes, liberate humans and machines alike</td>",Q=eb(),M=XI("p"),M.innerHTML="<sub>Bottom line</sub><br/> \n    <samp>This software is presented to you as is,\n      Decent Labs AB takes no responsibility for how this software is used or distributed.\n      <br/>\n      Refer to the contents of the aforementioned license for more details.</samp>",ib(r,"class","column xcenter vgap"),ib(f,"class","svelte-1eldk8a"),ib(e,"class","block container")},m(t,O){zI(t,e,O),VI(e,r),VI(r,n),$b(o,n,null),VI(e,i),VI(e,s),VI(s,a),VI(s,c),VI(e,u),VI(e,l),VI(e,f),VI(e,h),VI(e,g),VI(e,d),VI(e,p),VI(p,A),VI(A,y),VI(y,I),VI(y,b),VI(A,m),VI(A,w),VI(A,E),VI(A,C),VI(A,_),VI(A,v),VI(A,B),VI(A,S),VI(A,k),VI(A,x),VI(e,Q),VI(e,M),D=!0},p:QI,i(t){D||(Db(o.$$.fragment,t),D=!0)},o(t){Ob(o.$$.fragment,t),D=!1},d(t){t&&WI(e),Nb(o)}}}class kB extends jb{constructor(t){super(),Yb(this,t,null,SB,LI,{})}}const[xB,QB]=n.exports.writable(),[MB,DB]=n.exports.writable(),[OB,UB]=n.exports.writable(),LB=n.exports.gate(n.exports.mute(xB,(t=>{switch(t){case"shop":return Nv;case"msgs":return tB;case"profile":return Lv;case"chat":return BB;case"about":return kB;case"keygen":return sw;default:return cv}}))),TB=Wb(xB),PB=Wb(LB),FB=Wb(MB);Wb(OB);let $B=null;function NB(t,e,r){if($B&&t===$B)return!1;$B=t,console.info("Rerouting to path:",t,"id:",e,"Q/Search:",r),QB(t),DB(e),UB(r)}function RB(){if(""===window.location.hash)return NB("pub",null,new URLSearchParams);const t=new URL(window.location.hash.replace(/^#\/?/,"x:").toLowerCase()),[e,r]=t.pathname.split("/");NB(e,r,new URLSearchParams(t.search))}function YB(t){window.history.pushState(null,null,`/#${t}`.replace(/^#\/+/,"#/")),RB()}function jB(t,e,r){const n=t.slice();return n[11]=e[r],n}function KB(t){let e,r,n,o,i,s,a=t[11]+"";function c(){return t[8](t[11])}return{c(){e=XI("div"),r=XI("a"),n=XI("code"),o=tb(a)},m(t,a){zI(t,e,a),VI(e,r),VI(r,n),VI(n,o),i||(s=nb(r,"click",c),i=!0)},p(e,r){t=e},d(t){t&&WI(e),i=!1,s()}}}function HB(t){let e,r,n,o,i,s,a,c,u,l,f,h,g,d,p,A=t[3],y=[];for(let e=0;e<A.length;e+=1)y[e]=KB(jB(t,A,e));return{c(){e=XI("article"),r=XI("h6"),r.textContent="namespaces",n=eb(),o=XI("input"),i=eb(),s=XI("h6"),s.textContent="quickfilters",a=eb(),c=XI("div"),u=XI("a"),u.innerHTML="<code>DEBUG:OFF</code>",l=eb();for(let t=0;t<y.length;t+=1)y[t].c();f=eb(),h=XI("footer"),g=XI("button"),g.textContent="ok",ib(o,"type","text")},m(A,I){zI(A,e,I),VI(e,r),VI(e,n),VI(e,o),cb(o,t[1]),VI(e,i),VI(e,s),VI(e,a),VI(e,c),VI(c,u),VI(e,l);for(let t=0;t<y.length;t+=1)y[t].m(e,null);VI(e,f),VI(e,h),VI(h,g),d||(p=[nb(o,"input",t[6]),nb(u,"click",t[7]),nb(g,"click",t[9])],d=!0)},p(t,r){if(2&r&&o.value!==t[1]&&cb(o,t[1]),40&r){let n;for(A=t[3],n=0;n<A.length;n+=1){const o=jB(t,A,n);y[n]?y[n].p(o,r):(y[n]=KB(o),y[n].c(),y[n].m(e,f))}for(;n<y.length;n+=1)y[n].d(1);y.length=A.length}},d(t){t&&WI(e),JI(y,t),d=!1,OI(p)}}}function GB(t){let e,r;return e=new Om({props:{open:t[2],$$slots:{default:[HB]},$$scope:{ctx:t}}}),e.$on("fade",t[10]),{c(){Fb(e.$$.fragment)},m(t,n){$b(e,t,n),r=!0},p(t,[r]){const n={};4&r&&(n.open=t[2]),16390&r&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){r||(Db(e.$$.fragment,t),r=!0)},o(t){Ob(e.$$.fragment,t),r=!1},d(t){Nb(e,t)}}}function qB(t,e,r){let n,o,i=QI,s=()=>(i(),i=$I(a,(t=>r(2,o=t))),a);t.$$.on_destroy.push((()=>i()));let{open:a=Gb(!1)}=e;s();const c=Gb(ep.namespaces);function u(t){""===t?(ep.disable(),qI(c,n="",n)):(ep.enable(t),qI(c,n=ep.namespaces,n))}NI(t,c,(t=>r(1,n=t)));return t.$$set=t=>{"open"in t&&s(r(0,a=t.open))},[a,n,o,["*","hyper*","pico*","picochat:kernel","picochat:mod:*","picochat:mod:net","picochat:mod:gc","picochat:mod:reg","picochat:slice*"],c,u,function(){n=this.value,c.set(n)},()=>u(""),t=>u(t),()=>qI(a,o=!1,o),()=>qI(a,o=!1,o)]}window.addEventListener("popstate",RB),RB();class VB extends jb{constructor(t){super(),Yb(this,t,qB,GB,LI,{open:0})}}const{window:zB}=Tb;function WB(t){let e,r,n,o,i,s,a,c,u,l,f,h,g,d,p,A,y,I,b,m,w,E,C,_,v,B,S,k,x,Q,M=t[2]?.state[0]+"",D=(t[2].hasKey?1:0)+"",O=(t[2].hasProfile?1:0)+"",U=(t[2].entered?1:0)+"";function L(t,e){return t[2].swarming?t[3]?2>t[3]?XB:JB:ZB:tS}let T=L(t),P=T(t);return S=new VB({props:{open:t[15]}}),{c(){e=XI("dev-bar"),r=XI("div"),n=tb("K["),o=tb(M),i=tb("]\n      ID²["),s=tb(D),a=tb("]\n      P["),c=tb(O),u=tb("]\n      m56["),l=tb(t[3]),f=tb("]\n      E["),h=tb(U),g=tb("]"),d=eb(),p=XI("div"),A=XI("btn"),P.c(),I=eb(),b=XI("btn"),b.textContent="D",m=eb(),w=XI("btn"),w.textContent="t",E=eb(),C=XI("btn"),C.textContent="i",_=eb(),v=XI("btn"),v.textContent="X",B=eb(),Fb(S.$$.fragment),ib(A,"class",y=GI(t[20]?"m56 auto":"m56 no-auto")+" svelte-107qq9w"),ib(v,"class","danger"),sb(e,"class","flex row xcenter space-between")},m(y,M){zI(y,e,M),VI(e,r),VI(r,n),VI(r,o),VI(r,i),VI(r,s),VI(r,a),VI(r,c),VI(r,u),VI(r,l),VI(r,f),VI(r,h),VI(r,g),VI(e,d),VI(e,p),VI(p,A),P.m(A,null),VI(p,I),VI(p,b),VI(p,m),VI(p,w),VI(p,E),VI(p,C),VI(p,_),VI(p,v),zI(y,B,M),$b(S,y,M),k=!0,x||(Q=[nb(A,"click",t[21]),nb(b,"click",t[22]),nb(w,"click",hS),nb(C,"click",t[18]),nb(v,"click",t[23])],x=!0)},p(t,e){(!k||4&e)&&M!==(M=t[2]?.state[0]+"")&&ab(o,M),(!k||4&e)&&D!==(D=(t[2].hasKey?1:0)+"")&&ab(s,D),(!k||4&e)&&O!==(O=(t[2].hasProfile?1:0)+"")&&ab(c,O),(!k||8&e)&&ab(l,t[3]),(!k||4&e)&&U!==(U=(t[2].entered?1:0)+"")&&ab(h,U),T!==(T=L(t))&&(P.d(1),P=T(t),P&&(P.c(),P.m(A,null)))},i(t){k||(Db(S.$$.fragment,t),k=!0)},o(t){Ob(S.$$.fragment,t),k=!1},d(t){t&&WI(e),P.d(),t&&WI(B),Nb(S,t),x=!1,OI(Q)}}}function JB(t){let e;return{c(){e=tb("|ó_ó|")},m(t,r){zI(t,e,r)},d(t){t&&WI(e)}}}function XB(t){let e;return{c(){e=tb("|o_o|")},m(t,r){zI(t,e,r)},d(t){t&&WI(e)}}}function ZB(t){let e;return{c(){e=tb("|o_=|")},m(t,r){zI(t,e,r)},d(t){t&&WI(e)}}}function tS(t){let e;return{c(){e=tb("|=_=|")},m(t,r){zI(t,e,r)},d(t){t&&WI(e)}}}function eS(t){let e,r,n,o,i,s,a=t[29].message+"",c=t[29].stack+"";return{c(){e=XI("h3"),r=tb("KernelPanic! "),n=tb(a),o=eb(),i=XI("pre"),s=tb(c)},m(t,a){zI(t,e,a),VI(e,r),VI(e,n),zI(t,o,a),zI(t,i,a),VI(i,s)},p:QI,i:QI,o:QI,d(t){t&&WI(e),t&&WI(o),t&&WI(i)}}}function rS(t){let e,r,n,o;const i=[oS,nS],s=[];function a(t,e){return t[6]?0:1}return e=a(t),r=s[e]=i[e](t),{c(){r.c(),n=rb()},m(t,r){s[e].m(t,r),zI(t,n,r),o=!0},p(t,o){let c=e;e=a(t),e===c?s[e].p(t,o):(Qb(),Ob(s[c],1,1,(()=>{s[c]=null})),Mb(),r=s[e],r?r.p(t,o):(r=s[e]=i[e](t),r.c()),Db(r,1),r.m(n.parentNode,n))},i(t){o||(Db(r),o=!0)},o(t){Ob(r),o=!1},d(t){s[e].d(t),t&&WI(n)}}}function nS(t){let e,r,n;var o=t[7];return o&&(e=new o({})),{c(){e&&Fb(e.$$.fragment),r=rb()},m(t,o){e&&$b(e,t,o),zI(t,r,o),n=!0},p(t,n){if(o!==(o=t[7])){if(e){Qb();const t=e;Ob(t.$$.fragment,1,0,(()=>{Nb(t,1)})),Mb()}o?(e=new o({}),Fb(e.$$.fragment),Db(e.$$.fragment,1),$b(e,r.parentNode,r)):e=null}},i(t){n||(e&&Db(e.$$.fragment,t),n=!0)},o(t){e&&Ob(e.$$.fragment,t),n=!1},d(t){t&&WI(r),e&&Nb(e,t)}}}function oS(t){let e,r,n;var o=t[7];function i(t){return{props:{id:t[6]}}}return o&&(e=new o(i(t))),{c(){e&&Fb(e.$$.fragment),r=rb()},m(t,o){e&&$b(e,t,o),zI(t,r,o),n=!0},p(t,n){const s={};if(64&n&&(s.id=t[6]),o!==(o=t[7])){if(e){Qb();const t=e;Ob(t.$$.fragment,1,0,(()=>{Nb(t,1)})),Mb()}o?(e=new o(i(t)),Fb(e.$$.fragment),Db(e.$$.fragment,1),$b(e,r.parentNode,r)):e=null}else o&&e.$set(s)},i(t){n||(e&&Db(e.$$.fragment,t),n=!0)},o(t){e&&Ob(e.$$.fragment,t),n=!1},d(t){t&&WI(r),e&&Nb(e,t)}}}function iS(t){let e;return{c(){e=XI("div"),e.innerHTML='<h5 aria-busy="true">Booting up...</h5>',ib(e,"class","column center xcenter"),ub(e,"height","100%")},m(t,r){zI(t,e,r)},p:QI,i:QI,o:QI,d(t){t&&WI(e)}}}function sS(t){let e,r,n,o,i,s,a,c,u,l,f,h,g,d,p,A,y,I,b,m,w,E;n=new Tm({props:{id:"gfx-vibe",nofill:!0}}),s=new Tm({props:{id:"gfx-shop",nofill:!0}});const C=[cS,aS],_=[];function v(t,e){return t[2].entered?1:0}c=v(t),u=_[c]=C[c](t),h=new Tm({props:{id:"gfx-msgs",nofill:!0}});const B=[lS,uS],S=[];function k(t,e){return t[10]?1:0}return I=k(t),b=S[I]=B[I](t),{c(){e=XI("bar"),r=XI("round"),Fb(n.$$.fragment),o=eb(),i=XI("round"),Fb(s.$$.fragment),a=eb(),u.c(),l=eb(),f=XI("round"),Fb(h.$$.fragment),g=eb(),d=XI("samp"),p=tb(t[9]),A=eb(),y=XI("round"),b.c(),ib(r,"class","flex column center xcenter noselect"),ib(i,"class","flex column center xcenter noselect"),ib(d,"class","notifications-badge"),lb(d,"zero",!t[9]),ib(f,"class","flex column center xcenter noselect"),ib(y,"class","flex column center xcenter noselect"),ib(e,"class","flex row xcenter space-between")},m(u,b){zI(u,e,b),VI(e,r),$b(n,r,null),VI(e,o),VI(e,i),$b(s,i,null),VI(e,a),_[c].m(e,null),VI(e,l),VI(e,f),$b(h,f,null),VI(f,g),VI(f,d),VI(d,p),VI(e,A),VI(e,y),S[I].m(y,null),m=!0,w||(E=[nb(r,"click",t[24]),nb(i,"click",t[25]),nb(f,"click",t[26]),nb(y,"click",t[27])],w=!0)},p(t,r){let n=c;c=v(t),c===n?_[c].p(t,r):(Qb(),Ob(_[n],1,1,(()=>{_[n]=null})),Mb(),u=_[c],u?u.p(t,r):(u=_[c]=C[c](t),u.c()),Db(u,1),u.m(e,l)),(!m||512&r)&&ab(p,t[9]),512&r&&lb(d,"zero",!t[9]);let o=I;I=k(t),I===o?S[I].p(t,r):(Qb(),Ob(S[o],1,1,(()=>{S[o]=null})),Mb(),b=S[I],b?b.p(t,r):(b=S[I]=B[I](t),b.c()),Db(b,1),b.m(y,null))},i(t){m||(Db(n.$$.fragment,t),Db(s.$$.fragment,t),Db(u),Db(h.$$.fragment,t),Db(b),m=!0)},o(t){Ob(n.$$.fragment,t),Ob(s.$$.fragment,t),Ob(u),Ob(h.$$.fragment,t),Ob(b),m=!1},d(t){t&&WI(e),Nb(n),Nb(s),_[c].d(),Nb(h),S[I].d(),w=!1,OI(E)}}}function aS(t){let e,r,n,o,i,s;return n=new fw({props:{expiresAt:t[8].expiresAt}}),{c(){e=XI("stat"),r=XI("h3"),Fb(n.$$.fragment),o=eb(),i=XI("h6"),i.textContent="exit",ib(r,"class","primary svelte-107qq9w"),ib(i,"class","muted svelte-107qq9w"),ib(e,"class","flex column center xcenter inside noselect svelte-107qq9w")},m(t,a){zI(t,e,a),VI(e,r),$b(n,r,null),VI(e,o),VI(e,i),s=!0},p(t,e){const r={};256&e&&(r.expiresAt=t[8].expiresAt),n.$set(r)},i(t){s||(Db(n.$$.fragment,t),s=!0)},o(t){Ob(n.$$.fragment,t),s=!1},d(t){t&&WI(e),Nb(n)}}}function cS(t){let e,r,n;return{c(){e=XI("stat"),e.innerHTML='<h3 class="muted svelte-107qq9w">--:--</h3> \n        <h6 class="primary svelte-107qq9w">enter</h6>',ib(e,"class","flex column center xcenter outside noselect btn-enter svelte-107qq9w")},m(o,i){zI(o,e,i),r||(n=nb(e,"click",t[19]),r=!0)},p:QI,i:QI,o:QI,d(t){t&&WI(e),r=!1,n()}}}function uS(t){let e,r;return e=new j_({props:{src:t[10]}}),{c(){Fb(e.$$.fragment)},m(t,n){$b(e,t,n),r=!0},p(t,r){const n={};1024&r&&(n.src=t[10]),e.$set(n)},i(t){r||(Db(e.$$.fragment,t),r=!0)},o(t){Ob(e.$$.fragment,t),r=!1},d(t){Nb(e,t)}}}function lS(t){let e,r;return e=new Tm({props:{id:"gfx-profile",nofill:!0}}),{c(){Fb(e.$$.fragment)},m(t,n){$b(e,t,n),r=!0},p:QI,i(t){r||(Db(e.$$.fragment,t),r=!0)},o(t){Ob(e.$$.fragment,t),r=!1},d(t){Nb(e,t)}}}function fS(t){let e,r,n,o,i,s,a,c,u=t[1]&&WB(t),l={ctx:t,current:null,token:null,hasCatch:!0,pending:iS,then:rS,catch:eS,error:29,blocks:[,,,]};Ub(t[11],l);let f=t[5]&&sS(t);return{c(){e=XI("root"),u&&u.c(),r=eb(),n=XI("main"),l.block.c(),o=eb(),f&&f.c(),lb(n,"has-dev",t[1]),lb(n,"has-bar",t[5]),ib(e,"class",i=GI("view-"+t[0])+" svelte-107qq9w")},m(t,i){zI(t,e,i),u&&u.m(e,null),VI(e,r),VI(e,n),l.block.m(n,l.anchor=null),l.mount=()=>n,l.anchor=null,VI(e,o),f&&f.m(e,null),s=!0,a||(c=[nb(zB,"error",dS),nb(zB,"unhandledrejection",gS)],a=!0)},p(o,[a]){(t=o)[1]?u?(u.p(t,a),2&a&&Db(u,1)):(u=WB(t),u.c(),Db(u,1),u.m(e,r)):u&&(Qb(),Ob(u,1,1,(()=>{u=null})),Mb()),Lb(l,t,a),2&a&&lb(n,"has-dev",t[1]),32&a&&lb(n,"has-bar",t[5]),t[5]?f?(f.p(t,a),32&a&&Db(f,1)):(f=sS(t),f.c(),Db(f,1),f.m(e,null)):f&&(Qb(),Ob(f,1,1,(()=>{f=null})),Mb()),(!s||1&a&&i!==(i=GI("view-"+t[0])+" svelte-107qq9w"))&&ib(e,"class",i)},i(t){s||(Db(u),Db(l.block),Db(f),s=!0)},o(t){Ob(u);for(let t=0;t<3;t+=1){Ob(l.blocks[t])}Ob(f),s=!1},d(t){t&&WI(e),u&&u.d(),l.block.d(),l.token=null,l=null,f&&f.d(),a=!1,OI(c)}}}function hS(){const t=document.documentElement;t.dataset.theme?delete t.dataset.theme:t.dataset.theme="dark"}function gS(t){console.error("[Unhandled Rejection]",t)}function dS(t){console.error("[GlobError]",t)}function pS(t,e,r){let o,i,s,a,c,u,l,f,h,g,d;NI(t,TB,(t=>r(0,o=t))),NI(t,mm,(t=>r(2,s=t))),NI(t,FB,(t=>r(6,l=t))),NI(t,PB,(t=>r(7,f=t))),NI(t,wm,(t=>r(10,d=t)));const p=Em(),A=Wb(n.exports.gate(n.exports.init(0,n.exports.mute(Zb.$connections(),(t=>t.length)))));NI(t,A,(t=>r(3,a=t)));const y=qb(mm,(t=>t.hasKey&&t.hasProfile));NI(t,y,(t=>r(5,u=t)));const I=Gb(!0);NI(t,I,(t=>r(1,i=t)));const b=Gb(!1);NI(t,b,(t=>r(4,c=t)));const m=Wb(n.exports.mute(n.exports.combine(Zb.$vibes(),Zb.$chats()),(([t,e])=>t.reduce(((t,e)=>"waiting_local"===e.state?t+1:t),0)+e.reduce(((t,e)=>e.myTurn?t+1:t),0))));NI(t,m,(t=>r(9,g=t)));const w=Wb(Zb.$profile(),E);var E;NI(t,w,(t=>r(8,h=t)));const C=JSON.parse(window.localStorage.getItem("auto_swarm"));gb((()=>PB.subscribe((()=>{window.document.scrollingElement.scrollTo({top:0,left:0})}))));return[o,i,s,a,c,u,l,f,h,g,d,p,A,y,I,b,m,w,async function(){const t=await Zb.feed();t.inspect(),console.log(`Size: ${(t.tail/1024).toFixed(2)} kB`)},function(){!async function(){if(!n.exports.get(gm))return YB("/keygen");if(!n.exports.get(pm))return YB("/profile");if(!n.exports.get(um)){const t=await tm.readIdentity(),e=await tm.readProfile();await Zb.register(e,t),lm(!0)}vm()}()},C,function(){window.localStorage.setItem("auto_swarm",!C),window.location.reload()},()=>qI(b,c=!0,c),()=>Sm(!1),()=>YB("pub"),()=>YB("shop"),()=>YB("msgs"),()=>YB("profile")]}var AS={exports:{}};!function(t,e){t.exports=function(){var t,e,r=1e3,n=6e4,o=36e5,i=864e5,s=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,a=31536e6,c=2592e6,u=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,l={years:a,months:c,days:i,hours:o,minutes:n,seconds:r,milliseconds:1,weeks:6048e5},f=function(t){return t instanceof I},h=function(t,e,r){return new I(t,r,e.$l)},g=function(t){return e.p(t)+"s"},d=function(t){return t<0},p=function(t){return d(t)?Math.ceil(t):Math.floor(t)},A=function(t){return Math.abs(t)},y=function(t,e){return t?d(t)?{negative:!0,format:""+A(t)+e}:{negative:!1,format:""+t+e}:{negative:!1,format:""}},I=function(){function d(t,e,r){var n=this;if(this.$d={},this.$l=r,void 0===t&&(this.$ms=0,this.parseFromMilliseconds()),e)return h(t*l[g(e)],this);if("number"==typeof t)return this.$ms=t,this.parseFromMilliseconds(),this;if("object"==typeof t)return Object.keys(t).forEach((function(e){n.$d[g(e)]=t[e]})),this.calMilliseconds(),this;if("string"==typeof t){var o=t.match(u);if(o){var i=o.slice(2).map((function(t){return null!=t?Number(t):0}));return this.$d.years=i[0],this.$d.months=i[1],this.$d.weeks=i[2],this.$d.days=i[3],this.$d.hours=i[4],this.$d.minutes=i[5],this.$d.seconds=i[6],this.calMilliseconds(),this}}return this}var A=d.prototype;return A.calMilliseconds=function(){var t=this;this.$ms=Object.keys(this.$d).reduce((function(e,r){return e+(t.$d[r]||0)*l[r]}),0)},A.parseFromMilliseconds=function(){var t=this.$ms;this.$d.years=p(t/a),t%=a,this.$d.months=p(t/c),t%=c,this.$d.days=p(t/i),t%=i,this.$d.hours=p(t/o),t%=o,this.$d.minutes=p(t/n),t%=n,this.$d.seconds=p(t/r),t%=r,this.$d.milliseconds=t},A.toISOString=function(){var t=y(this.$d.years,"Y"),e=y(this.$d.months,"M"),r=+this.$d.days||0;this.$d.weeks&&(r+=7*this.$d.weeks);var n=y(r,"D"),o=y(this.$d.hours,"H"),i=y(this.$d.minutes,"M"),s=this.$d.seconds||0;this.$d.milliseconds&&(s+=this.$d.milliseconds/1e3);var a=y(s,"S"),c=t.negative||e.negative||n.negative||o.negative||i.negative||a.negative,u=o.format||i.format||a.format?"T":"",l=(c?"-":"")+"P"+t.format+e.format+n.format+u+o.format+i.format+a.format;return"P"===l||"-P"===l?"P0D":l},A.toJSON=function(){return this.toISOString()},A.format=function(t){var r=t||"YYYY-MM-DDTHH:mm:ss",n={Y:this.$d.years,YY:e.s(this.$d.years,2,"0"),YYYY:e.s(this.$d.years,4,"0"),M:this.$d.months,MM:e.s(this.$d.months,2,"0"),D:this.$d.days,DD:e.s(this.$d.days,2,"0"),H:this.$d.hours,HH:e.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:e.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:e.s(this.$d.seconds,2,"0"),SSS:e.s(this.$d.milliseconds,3,"0")};return r.replace(s,(function(t,e){return e||String(n[t])}))},A.as=function(t){return this.$ms/l[g(t)]},A.get=function(t){var e=this.$ms,r=g(t);return"milliseconds"===r?e%=1e3:e="weeks"===r?p(e/l[r]):this.$d[r],0===e?0:e},A.add=function(t,e,r){var n;return n=e?t*l[g(e)]:f(t)?t.$ms:h(t,this).$ms,h(this.$ms+n*(r?-1:1),this)},A.subtract=function(t,e){return this.add(t,e,!0)},A.locale=function(t){var e=this.clone();return e.$l=t,e},A.clone=function(){return h(this.$ms,this)},A.humanize=function(e){return t().add(this.$ms,"ms").locale(this.$l).fromNow(!e)},A.milliseconds=function(){return this.get("milliseconds")},A.asMilliseconds=function(){return this.as("milliseconds")},A.seconds=function(){return this.get("seconds")},A.asSeconds=function(){return this.as("seconds")},A.minutes=function(){return this.get("minutes")},A.asMinutes=function(){return this.as("minutes")},A.hours=function(){return this.get("hours")},A.asHours=function(){return this.as("hours")},A.days=function(){return this.get("days")},A.asDays=function(){return this.as("days")},A.weeks=function(){return this.get("weeks")},A.asWeeks=function(){return this.as("weeks")},A.months=function(){return this.get("months")},A.asMonths=function(){return this.as("months")},A.years=function(){return this.get("years")},A.asYears=function(){return this.as("years")},d}();return function(r,n,o){t=o,e=o().$utils(),o.duration=function(t,e){var r=o.locale();return h(t,{$l:r},e)},o.isDuration=f;var i=n.prototype.add,s=n.prototype.subtract;n.prototype.add=function(t,e){return f(t)&&(t=t.asMilliseconds()),i.bind(this)(t,e)},n.prototype.subtract=function(t,e){return f(t)&&(t=t.asMilliseconds()),s.bind(this)(t,e)}}}()}(AS);var yS=AS.exports;cw.extend(yS);return new class extends jb{constructor(t){super(),Yb(this,t,pS,fS,LI,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
