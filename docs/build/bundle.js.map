{"version":3,"file":"bundle.js","sources":["../../node_modules/piconuro/index.js","../../node_modules/base64-js/index.js","../../node_modules/ieee754/index.js","../../node_modules/buffer/index.js","../../node_modules/level-supports/index.js","../../node_modules/module-error/index.js","../../node_modules/level-transcoder/lib/text-endec.js","../../node_modules/level-transcoder/lib/encoding.js","../../node_modules/level-transcoder/lib/formats.js","../../node_modules/level-transcoder/lib/encodings.js","../../node_modules/level-transcoder/index.js","../../node_modules/events/events.js","../../node_modules/abstract-level/node_modules/catering/index.js","../../node_modules/queue-tick/queue-microtask.js","../../node_modules/abstract-level/lib/common.js","../../node_modules/abstract-level/abstract-iterator.js","../../node_modules/abstract-level/lib/default-kv-iterator.js","../../node_modules/abstract-level/lib/deferred-iterator.js","../../node_modules/abstract-level/abstract-chained-batch.js","../../node_modules/abstract-level/lib/default-chained-batch.js","../../node_modules/abstract-level/lib/range-options.js","../../node_modules/queue-microtask/index.js","../../node_modules/abstract-level/abstract-level.js","../../node_modules/abstract-level/lib/next-tick-browser.js","../../node_modules/abstract-level/lib/abstract-sublevel.js","../../node_modules/abstract-level/lib/abstract-sublevel-iterator.js","../../node_modules/abstract-level/index.js","../../node_modules/run-parallel-limit/index.js","../../node_modules/catering/index.js","../../node_modules/catering/next-tick-browser.js","../../node_modules/browser-level/util/key-range.js","../../node_modules/browser-level/util/deserialize.js","../../node_modules/browser-level/iterator.js","../../node_modules/browser-level/index.js","../../node_modules/browser-level/util/clear.js","../../node_modules/latlon-geohash/latlon-geohash.js","../../node_modules/sodium-javascript/memory.js","../../node_modules/nanoassert/index.js","../../node_modules/sodium-javascript/randombytes.js","../../node_modules/sodium-javascript/crypto_verify.js","../../node_modules/sodium-javascript/helpers.js","../../node_modules/b4a/lib/ascii.js","../../node_modules/b4a/lib/base64.js","../../node_modules/b4a/lib/hex.js","../../node_modules/b4a/lib/utf8.js","../../node_modules/b4a/lib/utf16le.js","../../node_modules/b4a/browser.js","../../node_modules/sha512-universal/sha512.js","../../node_modules/sha512-wasm/sha512.js","../../node_modules/sha512-wasm/index.js","../../node_modules/sha512-universal/index.js","../../node_modules/sodium-javascript/crypto_auth.js","../../node_modules/sodium-javascript/crypto_hash.js","../../node_modules/sodium-javascript/internal/ed25519.js","../../node_modules/sodium-javascript/crypto_scalarmult.js","../../node_modules/blake2b-wasm/index.js","../../node_modules/blake2b-wasm/blake2b.js","../../node_modules/blake2b/index.js","../../node_modules/sodium-javascript/crypto_generichash.js","../../node_modules/xsalsa20/index.js","../../node_modules/xsalsa20/xsalsa20.js","../../node_modules/sodium-javascript/internal/poly1305.js","../../node_modules/sodium-javascript/crypto_stream.js","../../node_modules/sodium-javascript/crypto_onetimeauth.js","../../node_modules/sodium-javascript/crypto_secretbox.js","../../node_modules/sodium-javascript/crypto_box.js","../../node_modules/sha256-universal/sha256.js","../../node_modules/sha256-wasm/index.js","../../node_modules/sha256-wasm/sha256.js","../../node_modules/sha256-universal/index.js","../../node_modules/sodium-javascript/crypto_hash_sha256.js","../../node_modules/sodium-javascript/crypto_kdf.js","../../node_modules/sodium-javascript/crypto_kx.js","../../node_modules/chacha20-universal/index.js","../../node_modules/sodium-javascript/crypto_stream_chacha20.js","../../node_modules/sodium-javascript/crypto_aead.js","../../node_modules/siphash24/fallback.js","../../node_modules/siphash24/index.js","../../node_modules/siphash24/siphash24.js","../../node_modules/sodium-javascript/crypto_shorthash.js","../../node_modules/sodium-javascript/crypto_sign.js","../../node_modules/sodium-javascript/index.js","../../node_modules/sodium-universal/index.js","../../node_modules/inspect-custom-symbol/browser.js","../../node_modules/picofeed/index.js","../../node_modules/picorepo/index.js","../../node_modules/msgpackr/unpack.js","../../node_modules/msgpackr/pack.js","../../node_modules/msgpackr/iterators.js","../../node_modules/msgpackr/index.js","../../node_modules/@telamon/picostore/index.js","../../node_modules/process/browser.js","../../node_modules/debug/node_modules/ms/index.js","../../node_modules/debug/src/common.js","../../node_modules/debug/src/browser.js","../../node_modules/piconet/index.js","../../node_modules/picostack/simple-rpc.js","../../node_modules/picostack/simple-kernel.js","../../node_modules/picostack/index.js","../../blockend/util.js","../../blockend/game.js","../../config.js","../../blockend/slices/peers.reg.js","../../blockend/slices/vibes.reg.js","../../blockend/slices/chats.reg.js","../../blockend/items.db.js","../../blockend/transactions.js","../../blockend/slices/inv.reg.js","../../blockend/mod/chat.mod.js","../../blockend/mod/buffered-registry.mod.js","../../blockend/mod/gc.mod.js","../../blockend/mod/peers.mod.js","../../blockend/mod/vibes.mod.js","../../blockend/mod/monitor.mod.js","../../blockend/mod/inv.mod.js","../../node_modules/rollup-plugin-node-polyfills/polyfills/empty.js","../../node_modules/picorepo/dot.js","../../blockend/mod/dump.mod.js","../../blockend/index.js","../../blockend/bits.js","../../blockend/keychain.js","../../node_modules/rollup-plugin-node-polyfills/polyfills/global.js","../../node_modules/svelte/internal/index.mjs","../../node_modules/svelte/store/index.mjs","../../frontend/api.js","../../frontend/components/Dialog.svelte","../../frontend/components/Icon.svelte","../../node_modules/qrcode-generator/qrcode.js","../../frontend/components/QRCode.svelte","../../frontend/views/Keygen.svelte","../../frontend/network-cart.js","../../node_modules/dayjs/dayjs.min.js","../../frontend/components/Timer.svelte","../../node_modules/geolib/es/constants.js","../../node_modules/geolib/es/getCoordinateKey.js","../../node_modules/geolib/es/isDecimal.js","../../node_modules/geolib/es/isSexagesimal.js","../../node_modules/geolib/es/sexagesimalToDecimal.js","../../node_modules/geolib/es/getCoordinateKeys.js","../../node_modules/geolib/es/isValidLatitude.js","../../node_modules/geolib/es/isValidLongitude.js","../../node_modules/geolib/es/isValidCoordinate.js","../../node_modules/geolib/es/toDecimal.js","../../node_modules/geolib/es/getLatitude.js","../../node_modules/geolib/es/getLongitude.js","../../node_modules/geolib/es/toRad.js","../../node_modules/geolib/es/toDeg.js","../../node_modules/geolib/es/computeDestinationPoint.js","../../node_modules/geolib/es/convertArea.js","../../node_modules/geolib/es/convertDistance.js","../../node_modules/geolib/es/convertSpeed.js","../../node_modules/geolib/es/decimalToSexagesimal.js","../../node_modules/geolib/es/robustAcos.js","../../node_modules/geolib/es/getDistance.js","../../node_modules/geolib/es/orderByDistance.js","../../node_modules/geolib/es/findNearest.js","../../node_modules/geolib/es/getAreaOfPolygon.js","../../node_modules/geolib/es/getBounds.js","../../node_modules/geolib/es/getBoundsOfDistance.js","../../node_modules/geolib/es/getCenter.js","../../node_modules/geolib/es/getCenterOfBounds.js","../../node_modules/geolib/es/getRhumbLineBearing.js","../../node_modules/geolib/es/getCompassDirection.js","../../node_modules/geolib/es/getDistanceFromLine.js","../../node_modules/geolib/es/getGreatCircleBearing.js","../../node_modules/geolib/es/getPathLength.js","../../node_modules/geolib/es/getPreciseDistance.js","../../node_modules/geolib/es/getRoughCompassDirection.js","../../node_modules/geolib/es/getSpeed.js","../../node_modules/geolib/es/isPointInLine.js","../../node_modules/geolib/es/isPointInPolygon.js","../../node_modules/geolib/es/isPointNearLine.js","../../node_modules/geolib/es/isPointWithinRadius.js","../../node_modules/geolib/es/wktToPolygon.js","../../frontend/components/BinaryImage.svelte","../../node_modules/geolib/es/index.js","../../frontend/components/PeerPortrait.svelte","../../frontend/components/ItemInput.svelte","../../frontend/views/Pub.svelte","../../node_modules/svelte-easy-crop/src/helpers.js","../../node_modules/svelte-easy-crop/src/index.svelte","../../frontend/components/ImageLoader.svelte","../../frontend/views/Profile.svelte","../../frontend/capi.js","../../frontend/components/ItemDescription.svelte","../../frontend/views/Shop.svelte","../../frontend/components/PendingVibe.svelte","../../frontend/views/Messages.svelte","../../frontend/views/Chat.svelte","../../frontend/views/About.svelte","../../frontend/views/Append.svelte","../../frontend/views/Wallet.svelte","../../frontend/views/Devel.svelte","../../frontend/router.js","../../frontend/components/DebugSelector.svelte","../../frontend/App.svelte","../../node_modules/dayjs/plugin/duration.js","../../frontend/main.js"],"sourcesContent":["// SPDX-License-Identifier: AGPL-3.0-or-later\n/***\n * Pico::NeUROn\n *\n * A functional approach to the reactive-store pattern\n * delivering indiscriminate minimalism.\n * Easily bridged into any other framework of choice.\n*/\n\nconst ERROR = Symbol.for('piconeuro:Error')\nmodule.exports = {\n  ERROR,\n  get,\n  next,\n  until,\n  write: writable,\n  writable,\n  notEqual,\n  notEqualDeep,\n  memo,\n  mute,\n  init,\n  when,\n  combine,\n  isSync,\n  _isSync,\n  gate,\n  settle,\n  iter,\n  nfo\n}\n\n// One to many neuron (opposite of combine)\nfunction memo (neuron) {\n  let value\n  const synapses = new Set()\n  let disconnect = null\n  return function NeuronMemory (syn) {\n    synapses.add(syn)\n    // console.log('instant memo', !!disconnect, value)\n    if (disconnect) syn(value)\n    else disconnect = neuron(spreadForward)\n    return () => {\n      synapses.delete(syn)\n      if (synapses.length) return\n      if (disconnect) disconnect()\n      disconnect = null\n    }\n  }\n  function spreadForward (v) {\n    value = v\n    for (const syn of synapses) syn(v)\n  }\n}\n\n// Neuron that fires initial value once synchroneously.\n//  init(v, $n) => Fire1:  $n.sync || v; Fire2: $n.async\nfunction init (value, neuron) {\n  return function InitialValue (syn) {\n    let disconnected = false\n    let unsub = function noop () {}\n    let fired = false\n    if (typeof neuron === 'function') {\n      unsub = neuron(v => {\n        fired = true\n        if (!disconnected) syn(v)\n      })\n    }\n    if (!fired) syn(clone(value)) // Note: disconnected is always false here\n    return () => {\n      disconnected = true\n      unsub()\n    }\n  }\n}\n\n/**\n * Experimental promise to async neuron converter.\n * Fires once\n */\nfunction when (promise) {\n  if (!promise || typeof promise.then !== 'function') throw new Error('Expected a Promise')\n  return function WhenResolved (syn) {\n    promise.then(syn)\n      .catch(err => {\n        console.error('n:when() failed: ', err)\n        syn(ERROR, err)\n      })\n    return function NOOPunsub () {}\n  }\n}\n\n/*\n * Debug neuron, logs all signals\n */\nlet __nfoCtr = 0\n// const __pal = Array.from(new Array(8)).map((_, bg) => Array.from(new Array(8)).map((_, fg) => `\\x1b[0;${30 + fg};${40 + bg}m`))\nmodule.exports.V = 1 // VERBOSITY level\nfunction nfo (neuron, name) {\n  if (!module.exports.V) return neuron // Completely bypass NFO when V is zero\n  const ni = __nfoCtr++\n  if (!name) name = `NFO${pn(ni)}`\n  const nlog = console.info.bind(null, c(name, 0, ni))\n  let s = 0\n  return syn => {\n    let i = 0\n    const log = nlog.bind(null, c(`SYN${pn(s++)}`, 0, ni))\n    log(`>>${pn(i)}>> connected`)\n    const unsub = neuron(v => {\n      log(`!!${pn(i++)}!! `, v)\n      syn(v)\n    })\n    return () => {\n      unsub()\n      log(`<<${pn(i)}<< disconnected`)\n    }\n  }\n  function pn (n, p = 2) { return (n + '').padStart(p, '0') }\n  function c (s) { return s }\n  // function c (s, b = 0, f = 0) { return `${__pal[b % 8][f % 8]}${s}\\x1b[0m` }\n}\n\nfunction gate (neuron, shallow = false) {\n  const check = typeof shallow === 'function'\n    ? shallow\n    : !shallow\n        ? notEqualDeep\n        : notEqual\n\n  return function NoiseGate (syn) {\n    let value\n    let first = true\n    return neuron(v => {\n      const dirty = check(v, value)\n      // console.info(`nuro:gate() ${dirty ? '>>PASS>>' : '||HOLD||'}\\n>>> NEXT\\n`, v, '\\n===\\n', value, '\\n<<< PREV')\n      if (first || dirty) {\n        first = false\n        value = clone(v)\n        syn(v)\n      }\n    })\n  }\n}\n\n// Buffers a signal and outputs last value\n// !WARNING!\n// Use with care, this neuron introduces unchecked asyncronity into\n// your path causing racing conditions along the way.\n// Only use is for buffering final outputs to silly frameworks such as react\n// that render with a built-in rising-edge buffer\nfunction settle (neuron, debounceMs = 10, risingEdge = false) {\n  return function DebouncedSignal (syn) {\n    let value\n    let tid\n    let first = true\n    const unsub = neuron(v => {\n      value = v\n      if (risingEdge && first) {\n        first = false\n        syn(value)\n      }\n      if (tid) clearTimeout(tid)\n      tid = setTimeout(() => {\n        tid = null\n        syn(value)\n      }, debounceMs)\n    })\n    return () => {\n      if (unsub) unsub()\n      if (tid) clearTimeout(tid)\n    }\n  }\n}\n\n/**\n * Produces a shallow clone of objects and arrays\n */\nfunction clone (o) {\n  if (Array.isArray(o)) return [...o]\n  if (typeof o === 'object' && o !== null) return { ...o }\n  return o\n}\n\n/*\n * Possibly async neuron.\n * fires on immediate or async result.\n * Does not fire placeholders, prepend with init() a sync initialValue is needed:\n * use:\n *\n *  $peersUrl => init(\n *    [], // Empty array as placeholder\n *    mute($data, async u => fetch(u))\n *  )\n */\nfunction mute (neuron, fn) {\n  if (typeof fn !== 'function') throw new Error('expected a mutation function')\n  return function Mutate (syn) {\n    let prev = Promise.resolve(0)\n    return neuron(input => {\n      const output = fn(input)\n      if (\n        output &&\n        typeof output.then === 'function' &&\n        typeof output.catch === 'function'\n      ) {\n        prev = prev.then(() =>\n          output\n            .then(syn)\n            .catch(err => {\n              console.error('n:mute() failed: ', err)\n              syn(ERROR, err)\n            })\n        )\n      } else syn(output)\n    })\n  }\n}\n/**\n * Utility method that tests a neuron for synchronity.\n * returns true if and only if the neuron fired once immediately\n * throws error if the neuron did not fire within the grace period.\n */\nasync function isSync (neuron, ms = 100) {\n  let fired = false\n  let aFired = false\n  let set = () => { fired = true }\n  neuron(() => set())()\n  let unlock = null\n  const mutex = new Promise((resolve) => { unlock = resolve })\n  set = () => { aFired = true; unlock() } // rewrite set\n  let tid = setTimeout(() => { tid = null; unlock() }, ms) // 100ms plenty of time to resolve\n  await mutex\n  if (tid) clearTimeout(tid)\n  else if (!fired && !aFired) throw new Error('Neuron did not fire during grace period')\n  return fired && !aFired\n}\n\n/**\n * Synchronized version of isSync that throws errors\n * when async behaviour is detected.\n */\nfunction _isSync (neuron) {\n  let ii = false\n  let set = () => { ii = true }\n  neuron(() => set())()\n  set = () => { throw new Error('NeuronNotSync, subscription invoked after unsubscribe()') }\n  return ii\n}\n\n/**\n * A neuron that combines the output of multiple neurons into a single output.\n * The first output is held until all neurons have fired once.\n */\nfunction combine (...neurons) {\n  if (!Array.isArray(neurons) || !neurons.length) throw new Error('A list of neurons is required')\n  const props = []\n  // Assume combine was called with map: combine({ a: synapse1, b: synapse2 })  // => 'synapse': function\n  if (neurons.length === 1 && typeof neurons[0] !== 'function') {\n    const m = neurons[0]\n    neurons = []\n    for (const prop in m) {\n      neurons.push(m[prop])\n      props.push(prop)\n    }\n    // console.log('Combine[ObjMode]', props)\n  }\n\n  return function NeuronCombine (syn) {\n    if (typeof syn !== 'function') throw new Error('Derivation function required')\n    const loaded = []\n    const values = []\n    let remaining = neurons.length\n\n    const synapses = []\n    for (let i = 0; i < neurons.length; i++) {\n      synapses.push(neurons[i](handler.bind(null, i)))\n    }\n\n    return () => {\n      // for (const unsub of synapses) unsub()\n      for (const unsub of synapses) unsub()\n    }\n\n    function handler (i, val) {\n      if (!loaded[i]) {\n        loaded[i] = true\n        remaining--\n      }\n      values[i] = val\n      // console.log(`CombineHandler[${i}] ${neurons.map((n, i) => !!loaded[i])}`)\n      if (!remaining) {\n        props.length\n          ? syn(values.reduce((m, v, i) => (((m[props[i]] = v), m)), {}))\n          : syn(values)\n      }\n    }\n  }\n}\n\n/**\n * Shallow compares two values targeting computationally efficient\n * in-memory comparision with minimal recursion.\n * Quick returns true if a difference is detected.\n * if array, compare lengths and elements identities\n * if object, compare props count and reference identities\n * properties of object are expected to be enumerable.\n */\nfunction notEqual (a, b) {\n  if (Array.isArray(a) && Array.isArray(b)) {\n    return b.length !== a.length ||\n      !!a.find((o, i) => b[i] !== o)\n  }\n  if (\n    typeof a === 'object' &&\n    typeof b === 'object' &&\n    a !== null &&\n    b !== null\n  ) {\n    return !!((kA, kBl) => kA.length !== kBl ||\n      kA.find(p => a[p] !== b[p])\n    )(Object.keys(a), Object.keys(b).length)\n  }\n  return a !== b\n}\n\nfunction notEqualDeep (a, b) {\n  if (Array.isArray(a) && Array.isArray(b)) {\n    return b.length !== a.length ||\n      !!a.find((o, i) => notEqualDeep(b[i], o))\n  }\n  if (\n    typeof a === 'object' &&\n    typeof b === 'object' &&\n    a !== null &&\n    b !== null\n  ) {\n    return !!((kA, kBl) => kA.length !== kBl ||\n      kA.find(p => notEqualDeep(a[p], b[p]))\n    )(Object.keys(a), Object.keys(b).length)\n  }\n  return a !== b\n}\n\n/**\n * A neuron that provides a set method:\n *\n * const [$name, setName] = writable('placeholder')\n */\nfunction writable (value) {\n  const subs = new Set()\n  return [\n    function WritableSubscribe (notify) {\n      subs.add(notify)\n      notify(value)\n      return () => { subs.delete(notify) }\n    },\n    function WritableSet (val) {\n      if (notEqual(value, val)) {\n        value = val\n        for (const subcriber of subs) subcriber(val)\n      }\n      return val\n    }\n  ]\n}\n\n/**\n * Gets the synchroneous value of a neuron\n */\nfunction get (neuron) {\n  let value = null\n  neuron(v => { value = v })()\n  return value\n}\n\n/**\n * async version of get()\n * n: number of values to skip,\n * Imagine a neuron value stream to be an array:\n * ['a', 'b', 'c']\n * setting `n` to 0 will return 'a', set it to 2 to get 'c'\n*/\nasync function next (neuron, n = 1, inspect = false) {\n  let value = null\n  if (inspect) neuron = nfo(neuron, inspect)\n  for await (const v of iter(neuron, n + 1)) value = v\n  return value\n}\n\n/**\n * Converts a neuron into an iterator\n * - {neuron} Neuron to generate from\n * - {nValues} Number of values to generate, 1 will yield 1 value.\n */\nasync function * iter (neuron, nValues = 5) { // set max to -1 for eternal loop\n  const rQue = []\n  const pQue = []\n  oneMore()\n  let i = 0\n  const handler = v => {\n    if (nValues === -1 || ++i < nValues) oneMore()\n    const r = rQue.shift()\n    if (r) r(v)\n  }\n  const unsub = neuron(handler)\n  while (pQue.length) {\n    const p = pQue.shift()\n    const value = await p\n    yield value\n  }\n  unsub()\n  function oneMore () {\n    let r = null\n    const p = new Promise(resolve => { r = resolve })\n    rQue.push(r)\n    pQue.push(p)\n  }\n}\n\n/**\n * Sibling of next(), an async utility getter that\n * resolves value when 'condition' function returns truthy.\n *\n * const hiFive = await until($clock, time => t > 5)\n */\nasync function until (neuron, condition, timeout = -1) {\n  let set, setErr\n  const result = new Promise((resolve, reject) => { set = resolve; setErr = reject })\n  let timerId = null\n  if (timeout > 0) {\n    timerId = setTimeout(() => {\n      setErr(new Error('until($n) timed out'))\n    }, timeout)\n  }\n  const unsub = neuron(value => {\n    if (condition(value)) {\n      if (timerId) clearTimeout(timerId)\n      set(value)\n    }\n  })\n  result.finally(unsub)\n  return result\n}\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nconst base64 = require('base64-js')\nconst ieee754 = require('ieee754')\nconst customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nconst K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    const arr = new Uint8Array(1)\n    const proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  const buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  const valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  const b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(value[Symbol.toPrimitive]('string'), encodingOrOffset, length)\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  const length = byteLength(string, encoding) | 0\n  let buf = createBuffer(length)\n\n  const actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  const length = array.length < 0 ? 0 : checked(array.length) | 0\n  const buf = createBuffer(length)\n  for (let i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    const copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  let buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    const len = checked(obj.length) | 0\n    const buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  let x = a.length\n  let y = b.length\n\n  for (let i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  let i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  const buffer = Buffer.allocUnsafe(length)\n  let pos = 0\n  for (i = 0; i < list.length; ++i) {\n    let buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        if (!Buffer.isBuffer(buf)) buf = Buffer.from(buf)\n        buf.copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  const len = string.length\n  const mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  let loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  const i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  const len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (let i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  const len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (let i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  const len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (let i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  const length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  let str = ''\n  const max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  let x = thisEnd - thisStart\n  let y = end - start\n  const len = Math.min(x, y)\n\n  const thisCopy = this.slice(thisStart, thisEnd)\n  const targetCopy = target.slice(start, end)\n\n  for (let i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  let indexSize = 1\n  let arrLength = arr.length\n  let valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  let i\n  if (dir) {\n    let foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      let found = true\n      for (let j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  const remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  const strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  let i\n  for (i = 0; i < length; ++i) {\n    const parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  const remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  const res = []\n\n  let i = start\n  while (i < end) {\n    const firstByte = buf[i]\n    let codePoint = null\n    let bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      let secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nconst MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  const len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  let res = ''\n  let i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  const len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  let out = ''\n  for (let i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  const bytes = buf.slice(start, end)\n  let res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (let i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  const len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  const newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  let val = this[offset + --byteLength]\n  let mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const lo = first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24\n\n  const hi = this[++offset] +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    last * 2 ** 24\n\n  return BigInt(lo) + (BigInt(hi) << BigInt(32))\n})\n\nBuffer.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const hi = first * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  const lo = this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last\n\n  return (BigInt(hi) << BigInt(32)) + BigInt(lo)\n})\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let i = byteLength\n  let mul = 1\n  let val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = this[offset + 4] +\n    this[offset + 5] * 2 ** 8 +\n    this[offset + 6] * 2 ** 16 +\n    (last << 24) // Overflow\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24)\n})\n\nBuffer.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = (first << 24) + // Overflow\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last)\n})\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let mul = 1\n  let i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction wrtBigUInt64LE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  return offset\n}\n\nfunction wrtBigUInt64BE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset + 7] = lo\n  lo = lo >> 8\n  buf[offset + 6] = lo\n  lo = lo >> 8\n  buf[offset + 5] = lo\n  lo = lo >> 8\n  buf[offset + 4] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset + 3] = hi\n  hi = hi >> 8\n  buf[offset + 2] = hi\n  hi = hi >> 8\n  buf[offset + 1] = hi\n  hi = hi >> 8\n  buf[offset] = hi\n  return offset + 8\n}\n\nBuffer.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = 0\n  let mul = 1\n  let sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  let sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nBuffer.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  const len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      const code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  let i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    const bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    const len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// CUSTOM ERRORS\n// =============\n\n// Simplified versions from Node, changed for Buffer-only usage\nconst errors = {}\nfunction E (sym, getMessage, Base) {\n  errors[sym] = class NodeError extends Base {\n    constructor () {\n      super()\n\n      Object.defineProperty(this, 'message', {\n        value: getMessage.apply(this, arguments),\n        writable: true,\n        configurable: true\n      })\n\n      // Add the error code to the name to include it in the stack trace.\n      this.name = `${this.name} [${sym}]`\n      // Access the stack to generate the error message including the error code\n      // from the name.\n      this.stack // eslint-disable-line no-unused-expressions\n      // Reset the name to the actual name.\n      delete this.name\n    }\n\n    get code () {\n      return sym\n    }\n\n    set code (value) {\n      Object.defineProperty(this, 'code', {\n        configurable: true,\n        enumerable: true,\n        value,\n        writable: true\n      })\n    }\n\n    toString () {\n      return `${this.name} [${sym}]: ${this.message}`\n    }\n  }\n}\n\nE('ERR_BUFFER_OUT_OF_BOUNDS',\n  function (name) {\n    if (name) {\n      return `${name} is outside of buffer bounds`\n    }\n\n    return 'Attempt to access memory outside buffer bounds'\n  }, RangeError)\nE('ERR_INVALID_ARG_TYPE',\n  function (name, actual) {\n    return `The \"${name}\" argument must be of type number. Received type ${typeof actual}`\n  }, TypeError)\nE('ERR_OUT_OF_RANGE',\n  function (str, range, input) {\n    let msg = `The value of \"${str}\" is out of range.`\n    let received = input\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    }\n    msg += ` It must be ${range}. Received ${received}`\n    return msg\n  }, RangeError)\n\nfunction addNumericalSeparator (val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\n\n// CHECK FUNCTIONS\n// ===============\n\nfunction checkBounds (buf, offset, byteLength) {\n  validateNumber(offset, 'offset')\n  if (buf[offset] === undefined || buf[offset + byteLength] === undefined) {\n    boundsError(offset, buf.length - (byteLength + 1))\n  }\n}\n\nfunction checkIntBI (value, min, max, buf, offset, byteLength) {\n  if (value > max || value < min) {\n    const n = typeof min === 'bigint' ? 'n' : ''\n    let range\n    if (byteLength > 3) {\n      if (min === 0 || min === BigInt(0)) {\n        range = `>= 0${n} and < 2${n} ** ${(byteLength + 1) * 8}${n}`\n      } else {\n        range = `>= -(2${n} ** ${(byteLength + 1) * 8 - 1}${n}) and < 2 ** ` +\n                `${(byteLength + 1) * 8 - 1}${n}`\n      }\n    } else {\n      range = `>= ${min}${n} and <= ${max}${n}`\n    }\n    throw new errors.ERR_OUT_OF_RANGE('value', range, value)\n  }\n  checkBounds(buf, offset, byteLength)\n}\n\nfunction validateNumber (value, name) {\n  if (typeof value !== 'number') {\n    throw new errors.ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n}\n\nfunction boundsError (value, length, type) {\n  if (Math.floor(value) !== value) {\n    validateNumber(value, type)\n    throw new errors.ERR_OUT_OF_RANGE(type || 'offset', 'an integer', value)\n  }\n\n  if (length < 0) {\n    throw new errors.ERR_BUFFER_OUT_OF_BOUNDS()\n  }\n\n  throw new errors.ERR_OUT_OF_RANGE(type || 'offset',\n                                    `>= ${type ? 1 : 0} and <= ${length}`,\n                                    value)\n}\n\n// HELPER FUNCTIONS\n// ================\n\nconst INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  let codePoint\n  const length = string.length\n  let leadSurrogate = null\n  const bytes = []\n\n  for (let i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  let c, hi, lo\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  let i\n  for (i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nconst hexSliceLookupTable = (function () {\n  const alphabet = '0123456789abcdef'\n  const table = new Array(256)\n  for (let i = 0; i < 16; ++i) {\n    const i16 = i * 16\n    for (let j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n\n// Return not function with Error if BigInt not supported\nfunction defineBigIntMethod (fn) {\n  return typeof BigInt === 'undefined' ? BufferBigIntNotDefined : fn\n}\n\nfunction BufferBigIntNotDefined () {\n  throw new Error('BigInt not supported')\n}\n","'use strict'\n\nexports.supports = function supports (...manifests) {\n  const manifest = manifests.reduce((acc, m) => Object.assign(acc, m), {})\n\n  return Object.assign(manifest, {\n    snapshots: manifest.snapshots || false,\n    permanence: manifest.permanence || false,\n    seek: manifest.seek || false,\n    clear: manifest.clear || false,\n    getMany: manifest.getMany || false,\n    keyIterator: manifest.keyIterator || false,\n    valueIterator: manifest.valueIterator || false,\n    iteratorNextv: manifest.iteratorNextv || false,\n    iteratorAll: manifest.iteratorAll || false,\n    status: manifest.status || false,\n    createIfMissing: manifest.createIfMissing || false,\n    errorIfExists: manifest.errorIfExists || false,\n    deferredOpen: manifest.deferredOpen || false,\n    promises: manifest.promises || false,\n    streams: manifest.streams || false,\n    encodings: Object.assign({}, manifest.encodings),\n    events: Object.assign({}, manifest.events),\n    additionalMethods: Object.assign({}, manifest.additionalMethods)\n  })\n}\n","'use strict'\n\nmodule.exports = class ModuleError extends Error {\n  /**\n   * @param {string} message Error message\n   * @param {{ code?: string, cause?: Error, expected?: boolean, transient?: boolean }} [options]\n   */\n  constructor (message, options) {\n    super(message || '')\n\n    if (typeof options === 'object' && options !== null) {\n      if (options.code) this.code = String(options.code)\n      if (options.expected) this.expected = true\n      if (options.transient) this.transient = true\n      if (options.cause) this.cause = options.cause\n    }\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, this.constructor)\n    }\n  }\n}\n","'use strict'\n\n/** @type {{ textEncoder: TextEncoder, textDecoder: TextDecoder }|null} */\nlet lazy = null\n\n/**\n * Get semi-global instances of TextEncoder and TextDecoder.\n * @returns {{ textEncoder: TextEncoder, textDecoder: TextDecoder }}\n */\nmodule.exports = function () {\n  if (lazy === null) {\n    lazy = {\n      textEncoder: new TextEncoder(),\n      textDecoder: new TextDecoder()\n    }\n  }\n\n  return lazy\n}\n","'use strict'\n\nconst ModuleError = require('module-error')\nconst formats = new Set(['buffer', 'view', 'utf8'])\n\n/**\n * @template TIn, TFormat, TOut\n * @abstract\n */\nclass Encoding {\n  /**\n   * @param {IEncoding<TIn,TFormat,TOut>} options\n   */\n  constructor (options) {\n    /** @type {(data: TIn) => TFormat} */\n    this.encode = options.encode || this.encode\n\n    /** @type {(data: TFormat) => TOut} */\n    this.decode = options.decode || this.decode\n\n    /** @type {string} */\n    this.name = options.name || this.name\n\n    /** @type {string} */\n    this.format = options.format || this.format\n\n    if (typeof this.encode !== 'function') {\n      throw new TypeError(\"The 'encode' property must be a function\")\n    }\n\n    if (typeof this.decode !== 'function') {\n      throw new TypeError(\"The 'decode' property must be a function\")\n    }\n\n    this.encode = this.encode.bind(this)\n    this.decode = this.decode.bind(this)\n\n    if (typeof this.name !== 'string' || this.name === '') {\n      throw new TypeError(\"The 'name' property must be a string\")\n    }\n\n    if (typeof this.format !== 'string' || !formats.has(this.format)) {\n      throw new TypeError(\"The 'format' property must be one of 'buffer', 'view', 'utf8'\")\n    }\n\n    if (options.createViewTranscoder) {\n      this.createViewTranscoder = options.createViewTranscoder\n    }\n\n    if (options.createBufferTranscoder) {\n      this.createBufferTranscoder = options.createBufferTranscoder\n    }\n\n    if (options.createUTF8Transcoder) {\n      this.createUTF8Transcoder = options.createUTF8Transcoder\n    }\n  }\n\n  get commonName () {\n    return /** @type {string} */ (this.name.split('+')[0])\n  }\n\n  /** @return {BufferFormat<TIn,TOut>} */\n  createBufferTranscoder () {\n    throw new ModuleError(`Encoding '${this.name}' cannot be transcoded to 'buffer'`, {\n      code: 'LEVEL_ENCODING_NOT_SUPPORTED'\n    })\n  }\n\n  /** @return {ViewFormat<TIn,TOut>} */\n  createViewTranscoder () {\n    throw new ModuleError(`Encoding '${this.name}' cannot be transcoded to 'view'`, {\n      code: 'LEVEL_ENCODING_NOT_SUPPORTED'\n    })\n  }\n\n  /** @return {UTF8Format<TIn,TOut>} */\n  createUTF8Transcoder () {\n    throw new ModuleError(`Encoding '${this.name}' cannot be transcoded to 'utf8'`, {\n      code: 'LEVEL_ENCODING_NOT_SUPPORTED'\n    })\n  }\n}\n\nexports.Encoding = Encoding\n\n/**\n * @typedef {import('./encoding').IEncoding<TIn,TFormat,TOut>} IEncoding\n * @template TIn, TFormat, TOut\n */\n\n/**\n * @typedef {import('./formats').BufferFormat<TIn,TOut>} BufferFormat\n * @template TIn, TOut\n */\n\n/**\n * @typedef {import('./formats').ViewFormat<TIn,TOut>} ViewFormat\n * @template TIn, TOut\n */\n\n/**\n * @typedef {import('./formats').UTF8Format<TIn,TOut>} UTF8Format\n * @template TIn, TOut\n */\n","'use strict'\n\nconst { Buffer } = require('buffer') || {}\nconst { Encoding } = require('./encoding')\nconst textEndec = require('./text-endec')\n\n/**\n * @template TIn, TOut\n * @extends {Encoding<TIn,Buffer,TOut>}\n */\nclass BufferFormat extends Encoding {\n  /**\n   * @param {Omit<IEncoding<TIn, Buffer, TOut>, 'format'>} options\n   */\n  constructor (options) {\n    super({ ...options, format: 'buffer' })\n  }\n\n  /** @override */\n  createViewTranscoder () {\n    return new ViewFormat({\n      encode: this.encode, // Buffer is a view (UInt8Array)\n      decode: (data) => this.decode(\n        Buffer.from(data.buffer, data.byteOffset, data.byteLength)\n      ),\n      name: `${this.name}+view`\n    })\n  }\n\n  /** @override */\n  createBufferTranscoder () {\n    return this\n  }\n}\n\n/**\n * @extends {Encoding<TIn,Uint8Array,TOut>}\n * @template TIn, TOut\n */\nclass ViewFormat extends Encoding {\n  /**\n   * @param {Omit<IEncoding<TIn, Uint8Array, TOut>, 'format'>} options\n   */\n  constructor (options) {\n    super({ ...options, format: 'view' })\n  }\n\n  /** @override */\n  createBufferTranscoder () {\n    return new BufferFormat({\n      encode: (data) => {\n        const view = this.encode(data)\n        return Buffer.from(view.buffer, view.byteOffset, view.byteLength)\n      },\n      decode: this.decode, // Buffer is a view (UInt8Array)\n      name: `${this.name}+buffer`\n    })\n  }\n\n  /** @override */\n  createViewTranscoder () {\n    return this\n  }\n}\n\n/**\n * @extends {Encoding<TIn,string,TOut>}\n * @template TIn, TOut\n */\nclass UTF8Format extends Encoding {\n  /**\n   * @param {Omit<IEncoding<TIn, string, TOut>, 'format'>} options\n   */\n  constructor (options) {\n    super({ ...options, format: 'utf8' })\n  }\n\n  /** @override */\n  createBufferTranscoder () {\n    return new BufferFormat({\n      encode: (data) => Buffer.from(this.encode(data), 'utf8'),\n      decode: (data) => this.decode(data.toString('utf8')),\n      name: `${this.name}+buffer`\n    })\n  }\n\n  /** @override */\n  createViewTranscoder () {\n    const { textEncoder, textDecoder } = textEndec()\n\n    return new ViewFormat({\n      encode: (data) => textEncoder.encode(this.encode(data)),\n      decode: (data) => this.decode(textDecoder.decode(data)),\n      name: `${this.name}+view`\n    })\n  }\n\n  /** @override */\n  createUTF8Transcoder () {\n    return this\n  }\n}\n\nexports.BufferFormat = BufferFormat\nexports.ViewFormat = ViewFormat\nexports.UTF8Format = UTF8Format\n\n/**\n * @typedef {import('./encoding').IEncoding<TIn,TFormat,TOut>} IEncoding\n * @template TIn, TFormat, TOut\n */\n","'use strict'\n\nconst { Buffer } = require('buffer') || { Buffer: { isBuffer: () => false } }\nconst { textEncoder, textDecoder } = require('./text-endec')()\nconst { BufferFormat, ViewFormat, UTF8Format } = require('./formats')\n\n/** @type {<T>(v: T) => v} */\nconst identity = (v) => v\n\n/**\n * @type {typeof import('./encodings').utf8}\n */\nexports.utf8 = new UTF8Format({\n  encode: function (data) {\n    // On node 16.9.1 buffer.toString() is 5x faster than TextDecoder\n    return Buffer.isBuffer(data)\n      ? data.toString('utf8')\n      : ArrayBuffer.isView(data)\n        ? textDecoder.decode(data)\n        : String(data)\n  },\n  decode: identity,\n  name: 'utf8',\n  createViewTranscoder () {\n    return new ViewFormat({\n      encode: function (data) {\n        return ArrayBuffer.isView(data) ? data : textEncoder.encode(data)\n      },\n      decode: function (data) {\n        return textDecoder.decode(data)\n      },\n      name: `${this.name}+view`\n    })\n  },\n  createBufferTranscoder () {\n    return new BufferFormat({\n      encode: function (data) {\n        return Buffer.isBuffer(data)\n          ? data\n          : ArrayBuffer.isView(data)\n            ? Buffer.from(data.buffer, data.byteOffset, data.byteLength)\n            : Buffer.from(String(data), 'utf8')\n      },\n      decode: function (data) {\n        return data.toString('utf8')\n      },\n      name: `${this.name}+buffer`\n    })\n  }\n})\n\n/**\n * @type {typeof import('./encodings').json}\n */\nexports.json = new UTF8Format({\n  encode: JSON.stringify,\n  decode: JSON.parse,\n  name: 'json'\n})\n\n/**\n * @type {typeof import('./encodings').buffer}\n */\nexports.buffer = new BufferFormat({\n  encode: function (data) {\n    return Buffer.isBuffer(data)\n      ? data\n      : ArrayBuffer.isView(data)\n        ? Buffer.from(data.buffer, data.byteOffset, data.byteLength)\n        : Buffer.from(String(data), 'utf8')\n  },\n  decode: identity,\n  name: 'buffer',\n  createViewTranscoder () {\n    return new ViewFormat({\n      encode: function (data) {\n        return ArrayBuffer.isView(data) ? data : Buffer.from(String(data), 'utf8')\n      },\n      decode: function (data) {\n        return Buffer.from(data.buffer, data.byteOffset, data.byteLength)\n      },\n      name: `${this.name}+view`\n    })\n  }\n})\n\n/**\n * @type {typeof import('./encodings').view}\n */\nexports.view = new ViewFormat({\n  encode: function (data) {\n    return ArrayBuffer.isView(data) ? data : textEncoder.encode(data)\n  },\n  decode: identity,\n  name: 'view',\n  createBufferTranscoder () {\n    return new BufferFormat({\n      encode: function (data) {\n        return Buffer.isBuffer(data)\n          ? data\n          : ArrayBuffer.isView(data)\n            ? Buffer.from(data.buffer, data.byteOffset, data.byteLength)\n            : Buffer.from(String(data), 'utf8')\n      },\n      decode: identity,\n      name: `${this.name}+buffer`\n    })\n  }\n})\n\n/**\n * @type {typeof import('./encodings').hex}\n */\nexports.hex = new BufferFormat({\n  encode: function (data) {\n    return Buffer.isBuffer(data) ? data : Buffer.from(String(data), 'hex')\n  },\n  decode: function (buffer) {\n    return buffer.toString('hex')\n  },\n  name: 'hex'\n})\n\n/**\n * @type {typeof import('./encodings').base64}\n */\nexports.base64 = new BufferFormat({\n  encode: function (data) {\n    return Buffer.isBuffer(data) ? data : Buffer.from(String(data), 'base64')\n  },\n  decode: function (buffer) {\n    return buffer.toString('base64')\n  },\n  name: 'base64'\n})\n","'use strict'\n\nconst ModuleError = require('module-error')\nconst encodings = require('./lib/encodings')\nconst { Encoding } = require('./lib/encoding')\nconst { BufferFormat, ViewFormat, UTF8Format } = require('./lib/formats')\n\nconst kFormats = Symbol('formats')\nconst kEncodings = Symbol('encodings')\nconst validFormats = new Set(['buffer', 'view', 'utf8'])\n\n/** @template T */\nclass Transcoder {\n  /**\n   * @param {Array<'buffer'|'view'|'utf8'>} formats\n   */\n  constructor (formats) {\n    if (!Array.isArray(formats)) {\n      throw new TypeError(\"The first argument 'formats' must be an array\")\n    } else if (!formats.every(f => validFormats.has(f))) {\n      // Note: we only only support aliases in key- and valueEncoding options (where we already did)\n      throw new TypeError(\"Format must be one of 'buffer', 'view', 'utf8'\")\n    }\n\n    /** @type {Map<string|MixedEncoding<any, any, any>, Encoding<any, any, any>>} */\n    this[kEncodings] = new Map()\n    this[kFormats] = new Set(formats)\n\n    // Register encodings (done early in order to populate encodings())\n    for (const k in encodings) {\n      try {\n        this.encoding(k)\n      } catch (err) {\n        /* istanbul ignore if: assertion */\n        if (err.code !== 'LEVEL_ENCODING_NOT_SUPPORTED') throw err\n      }\n    }\n  }\n\n  /**\n   * @returns {Array<Encoding<any,T,any>>}\n   */\n  encodings () {\n    return Array.from(new Set(this[kEncodings].values()))\n  }\n\n  /**\n   * @param {string|MixedEncoding<any, any, any>} encoding\n   * @returns {Encoding<any, T, any>}\n   */\n  encoding (encoding) {\n    let resolved = this[kEncodings].get(encoding)\n\n    if (resolved === undefined) {\n      if (typeof encoding === 'string' && encoding !== '') {\n        resolved = lookup[encoding]\n\n        if (!resolved) {\n          throw new ModuleError(`Encoding '${encoding}' is not found`, {\n            code: 'LEVEL_ENCODING_NOT_FOUND'\n          })\n        }\n      } else if (typeof encoding !== 'object' || encoding === null) {\n        throw new TypeError(\"First argument 'encoding' must be a string or object\")\n      } else {\n        resolved = from(encoding)\n      }\n\n      const { name, format } = resolved\n\n      if (!this[kFormats].has(format)) {\n        if (this[kFormats].has('view')) {\n          resolved = resolved.createViewTranscoder()\n        } else if (this[kFormats].has('buffer')) {\n          resolved = resolved.createBufferTranscoder()\n        } else if (this[kFormats].has('utf8')) {\n          resolved = resolved.createUTF8Transcoder()\n        } else {\n          throw new ModuleError(`Encoding '${name}' cannot be transcoded`, {\n            code: 'LEVEL_ENCODING_NOT_SUPPORTED'\n          })\n        }\n      }\n\n      for (const k of [encoding, name, resolved.name, resolved.commonName]) {\n        this[kEncodings].set(k, resolved)\n      }\n    }\n\n    return resolved\n  }\n}\n\nexports.Transcoder = Transcoder\n\n/**\n * @param {MixedEncoding<any, any, any>} options\n * @returns {Encoding<any, any, any>}\n */\nfunction from (options) {\n  if (options instanceof Encoding) {\n    return options\n  }\n\n  // Loosely typed for ecosystem compatibility\n  const maybeType = 'type' in options && typeof options.type === 'string' ? options.type : undefined\n  const name = options.name || maybeType || `anonymous-${anonymousCount++}`\n\n  switch (detectFormat(options)) {\n    case 'view': return new ViewFormat({ ...options, name })\n    case 'utf8': return new UTF8Format({ ...options, name })\n    case 'buffer': return new BufferFormat({ ...options, name })\n    default: {\n      throw new TypeError(\"Format must be one of 'buffer', 'view', 'utf8'\")\n    }\n  }\n}\n\n/**\n * If format is not provided, fallback to detecting `level-codec`\n * or `multiformats` encodings, else assume a format of buffer.\n * @param {MixedEncoding<any, any, any>} options\n * @returns {string}\n */\nfunction detectFormat (options) {\n  if ('format' in options && options.format !== undefined) {\n    return options.format\n  } else if ('buffer' in options && typeof options.buffer === 'boolean') {\n    return options.buffer ? 'buffer' : 'utf8' // level-codec\n  } else if ('code' in options && Number.isInteger(options.code)) {\n    return 'view' // multiformats\n  } else {\n    return 'buffer'\n  }\n}\n\n/**\n * @typedef {import('./lib/encoding').MixedEncoding<TIn,TFormat,TOut>} MixedEncoding\n * @template TIn, TFormat, TOut\n */\n\n/**\n * @type {Object.<string, Encoding<any, any, any>>}\n */\nconst aliases = {\n  binary: encodings.buffer,\n  'utf-8': encodings.utf8\n}\n\n/**\n * @type {Object.<string, Encoding<any, any, any>>}\n */\nconst lookup = {\n  ...encodings,\n  ...aliases\n}\n\nlet anonymousCount = 0\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","'use strict'\n\nvar queueTick = require('queue-tick')\n\nexports.fromCallback = function (callback, symbol) {\n  if (callback === undefined) {\n    var promise = new Promise(function (resolve, reject) {\n      callback = function (err, res) {\n        if (err) reject(err)\n        else resolve(res)\n      }\n    })\n\n    callback[symbol !== undefined ? symbol : 'promise'] = promise\n  } else if (typeof callback !== 'function') {\n    throw new TypeError('Callback must be a function')\n  }\n\n  return callback\n}\n\nexports.fromPromise = function (promise, callback) {\n  if (callback === undefined) return promise\n\n  promise\n    .then(function (res) { queueTick(() => callback(null, res)) })\n    .catch(function (err) { queueTick(() => callback(err)) })\n}\n","module.exports = typeof queueMicrotask === 'function' ? queueMicrotask : (fn) => Promise.resolve().then(fn)\n","'use strict'\n\nexports.getCallback = function (options, callback) {\n  return typeof options === 'function' ? options : callback\n}\n\nexports.getOptions = function (options, def) {\n  if (typeof options === 'object' && options !== null) {\n    return options\n  }\n\n  if (def !== undefined) {\n    return def\n  }\n\n  return {}\n}\n","'use strict'\n\nconst { fromCallback } = require('catering')\nconst ModuleError = require('module-error')\nconst { getOptions, getCallback } = require('./lib/common')\n\nconst kPromise = Symbol('promise')\nconst kCallback = Symbol('callback')\nconst kWorking = Symbol('working')\nconst kHandleOne = Symbol('handleOne')\nconst kHandleMany = Symbol('handleMany')\nconst kAutoClose = Symbol('autoClose')\nconst kFinishWork = Symbol('finishWork')\nconst kReturnMany = Symbol('returnMany')\nconst kClosing = Symbol('closing')\nconst kHandleClose = Symbol('handleClose')\nconst kClosed = Symbol('closed')\nconst kCloseCallbacks = Symbol('closeCallbacks')\nconst kKeyEncoding = Symbol('keyEncoding')\nconst kValueEncoding = Symbol('valueEncoding')\nconst kAbortOnClose = Symbol('abortOnClose')\nconst kLegacy = Symbol('legacy')\nconst kKeys = Symbol('keys')\nconst kValues = Symbol('values')\nconst kLimit = Symbol('limit')\nconst kCount = Symbol('count')\n\nconst emptyOptions = Object.freeze({})\nconst noop = () => {}\nlet warnedEnd = false\n\n// This class is an internal utility for common functionality between AbstractIterator,\n// AbstractKeyIterator and AbstractValueIterator. It's not exported.\nclass CommonIterator {\n  constructor (db, options, legacy) {\n    if (typeof db !== 'object' || db === null) {\n      const hint = db === null ? 'null' : typeof db\n      throw new TypeError(`The first argument must be an abstract-level database, received ${hint}`)\n    }\n\n    if (typeof options !== 'object' || options === null) {\n      throw new TypeError('The second argument must be an options object')\n    }\n\n    this[kClosed] = false\n    this[kCloseCallbacks] = []\n    this[kWorking] = false\n    this[kClosing] = false\n    this[kAutoClose] = false\n    this[kCallback] = null\n    this[kHandleOne] = this[kHandleOne].bind(this)\n    this[kHandleMany] = this[kHandleMany].bind(this)\n    this[kHandleClose] = this[kHandleClose].bind(this)\n    this[kKeyEncoding] = options[kKeyEncoding]\n    this[kValueEncoding] = options[kValueEncoding]\n    this[kLegacy] = legacy\n    this[kLimit] = Number.isInteger(options.limit) && options.limit >= 0 ? options.limit : Infinity\n    this[kCount] = 0\n\n    // Undocumented option to abort pending work on close(). Used by the\n    // many-level module as a temporary solution to a blocked close().\n    // TODO (next major): consider making this the default behavior. Native\n    // implementations should have their own logic to safely close iterators.\n    this[kAbortOnClose] = !!options.abortOnClose\n\n    this.db = db\n    this.db.attachResource(this)\n    this.nextTick = db.nextTick\n  }\n\n  get count () {\n    return this[kCount]\n  }\n\n  get limit () {\n    return this[kLimit]\n  }\n\n  next (callback) {\n    let promise\n\n    if (callback === undefined) {\n      promise = new Promise((resolve, reject) => {\n        callback = (err, key, value) => {\n          if (err) reject(err)\n          else if (!this[kLegacy]) resolve(key)\n          else if (key === undefined && value === undefined) resolve()\n          else resolve([key, value])\n        }\n      })\n    } else if (typeof callback !== 'function') {\n      throw new TypeError('Callback must be a function')\n    }\n\n    if (this[kClosing]) {\n      this.nextTick(callback, new ModuleError('Iterator is not open: cannot call next() after close()', {\n        code: 'LEVEL_ITERATOR_NOT_OPEN'\n      }))\n    } else if (this[kWorking]) {\n      this.nextTick(callback, new ModuleError('Iterator is busy: cannot call next() until previous call has completed', {\n        code: 'LEVEL_ITERATOR_BUSY'\n      }))\n    } else {\n      this[kWorking] = true\n      this[kCallback] = callback\n\n      if (this[kCount] >= this[kLimit]) this.nextTick(this[kHandleOne], null)\n      else this._next(this[kHandleOne])\n    }\n\n    return promise\n  }\n\n  _next (callback) {\n    this.nextTick(callback)\n  }\n\n  nextv (size, options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options, emptyOptions)\n\n    if (!Number.isInteger(size)) {\n      this.nextTick(callback, new TypeError(\"The first argument 'size' must be an integer\"))\n      return callback[kPromise]\n    }\n\n    if (this[kClosing]) {\n      this.nextTick(callback, new ModuleError('Iterator is not open: cannot call nextv() after close()', {\n        code: 'LEVEL_ITERATOR_NOT_OPEN'\n      }))\n    } else if (this[kWorking]) {\n      this.nextTick(callback, new ModuleError('Iterator is busy: cannot call nextv() until previous call has completed', {\n        code: 'LEVEL_ITERATOR_BUSY'\n      }))\n    } else {\n      if (size < 1) size = 1\n      if (this[kLimit] < Infinity) size = Math.min(size, this[kLimit] - this[kCount])\n\n      this[kWorking] = true\n      this[kCallback] = callback\n\n      if (size <= 0) this.nextTick(this[kHandleMany], null, [])\n      else this._nextv(size, options, this[kHandleMany])\n    }\n\n    return callback[kPromise]\n  }\n\n  _nextv (size, options, callback) {\n    const acc = []\n    const onnext = (err, key, value) => {\n      if (err) {\n        return callback(err)\n      } else if (this[kLegacy] ? key === undefined && value === undefined : key === undefined) {\n        return callback(null, acc)\n      }\n\n      acc.push(this[kLegacy] ? [key, value] : key)\n\n      if (acc.length === size) {\n        callback(null, acc)\n      } else {\n        this._next(onnext)\n      }\n    }\n\n    this._next(onnext)\n  }\n\n  all (options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options, emptyOptions)\n\n    if (this[kClosing]) {\n      this.nextTick(callback, new ModuleError('Iterator is not open: cannot call all() after close()', {\n        code: 'LEVEL_ITERATOR_NOT_OPEN'\n      }))\n    } else if (this[kWorking]) {\n      this.nextTick(callback, new ModuleError('Iterator is busy: cannot call all() until previous call has completed', {\n        code: 'LEVEL_ITERATOR_BUSY'\n      }))\n    } else {\n      this[kWorking] = true\n      this[kCallback] = callback\n      this[kAutoClose] = true\n\n      if (this[kCount] >= this[kLimit]) this.nextTick(this[kHandleMany], null, [])\n      else this._all(options, this[kHandleMany])\n    }\n\n    return callback[kPromise]\n  }\n\n  _all (options, callback) {\n    // Must count here because we're directly calling _nextv()\n    let count = this[kCount]\n    const acc = []\n\n    const nextv = () => {\n      // Not configurable, because implementations should optimize _all().\n      const size = this[kLimit] < Infinity ? Math.min(1e3, this[kLimit] - count) : 1e3\n\n      if (size <= 0) {\n        this.nextTick(callback, null, acc)\n      } else {\n        this._nextv(size, emptyOptions, onnextv)\n      }\n    }\n\n    const onnextv = (err, items) => {\n      if (err) {\n        callback(err)\n      } else if (items.length === 0) {\n        callback(null, acc)\n      } else {\n        acc.push.apply(acc, items)\n        count += items.length\n        nextv()\n      }\n    }\n\n    nextv()\n  }\n\n  [kFinishWork] () {\n    const cb = this[kCallback]\n\n    // Callback will be null if work was aborted on close\n    if (this[kAbortOnClose] && cb === null) return noop\n\n    this[kWorking] = false\n    this[kCallback] = null\n\n    if (this[kClosing]) this._close(this[kHandleClose])\n\n    return cb\n  }\n\n  [kReturnMany] (cb, err, items) {\n    if (this[kAutoClose]) {\n      this.close(cb.bind(null, err, items))\n    } else {\n      cb(err, items)\n    }\n  }\n\n  seek (target, options) {\n    options = getOptions(options, emptyOptions)\n\n    if (this[kClosing]) {\n      // Don't throw here, to be kind to implementations that wrap\n      // another db and don't necessarily control when the db is closed\n    } else if (this[kWorking]) {\n      throw new ModuleError('Iterator is busy: cannot call seek() until next() has completed', {\n        code: 'LEVEL_ITERATOR_BUSY'\n      })\n    } else {\n      const keyEncoding = this.db.keyEncoding(options.keyEncoding || this[kKeyEncoding])\n      const keyFormat = keyEncoding.format\n\n      if (options.keyEncoding !== keyFormat) {\n        options = { ...options, keyEncoding: keyFormat }\n      }\n\n      const mapped = this.db.prefixKey(keyEncoding.encode(target), keyFormat)\n      this._seek(mapped, options)\n    }\n  }\n\n  _seek (target, options) {\n    throw new ModuleError('Iterator does not support seek()', {\n      code: 'LEVEL_NOT_SUPPORTED'\n    })\n  }\n\n  close (callback) {\n    callback = fromCallback(callback, kPromise)\n\n    if (this[kClosed]) {\n      this.nextTick(callback)\n    } else if (this[kClosing]) {\n      this[kCloseCallbacks].push(callback)\n    } else {\n      this[kClosing] = true\n      this[kCloseCallbacks].push(callback)\n\n      if (!this[kWorking]) {\n        this._close(this[kHandleClose])\n      } else if (this[kAbortOnClose]) {\n        // Don't wait for work to finish. Subsequently ignore the result.\n        const cb = this[kFinishWork]()\n\n        cb(new ModuleError('Aborted on iterator close()', {\n          code: 'LEVEL_ITERATOR_NOT_OPEN'\n        }))\n      }\n    }\n\n    return callback[kPromise]\n  }\n\n  _close (callback) {\n    this.nextTick(callback)\n  }\n\n  [kHandleClose] () {\n    this[kClosed] = true\n    this.db.detachResource(this)\n\n    const callbacks = this[kCloseCallbacks]\n    this[kCloseCallbacks] = []\n\n    for (const cb of callbacks) {\n      cb()\n    }\n  }\n\n  async * [Symbol.asyncIterator] () {\n    try {\n      let item\n\n      while ((item = (await this.next())) !== undefined) {\n        yield item\n      }\n    } finally {\n      if (!this[kClosed]) await this.close()\n    }\n  }\n}\n\n// For backwards compatibility this class is not (yet) called AbstractEntryIterator.\nclass AbstractIterator extends CommonIterator {\n  constructor (db, options) {\n    super(db, options, true)\n    this[kKeys] = options.keys !== false\n    this[kValues] = options.values !== false\n  }\n\n  [kHandleOne] (err, key, value) {\n    const cb = this[kFinishWork]()\n    if (err) return cb(err)\n\n    try {\n      key = this[kKeys] && key !== undefined ? this[kKeyEncoding].decode(key) : undefined\n      value = this[kValues] && value !== undefined ? this[kValueEncoding].decode(value) : undefined\n    } catch (err) {\n      return cb(new IteratorDecodeError('entry', err))\n    }\n\n    if (!(key === undefined && value === undefined)) {\n      this[kCount]++\n    }\n\n    cb(null, key, value)\n  }\n\n  [kHandleMany] (err, entries) {\n    const cb = this[kFinishWork]()\n    if (err) return this[kReturnMany](cb, err)\n\n    try {\n      for (const entry of entries) {\n        const key = entry[0]\n        const value = entry[1]\n\n        entry[0] = this[kKeys] && key !== undefined ? this[kKeyEncoding].decode(key) : undefined\n        entry[1] = this[kValues] && value !== undefined ? this[kValueEncoding].decode(value) : undefined\n      }\n    } catch (err) {\n      return this[kReturnMany](cb, new IteratorDecodeError('entries', err))\n    }\n\n    this[kCount] += entries.length\n    this[kReturnMany](cb, null, entries)\n  }\n\n  end (callback) {\n    if (!warnedEnd && typeof console !== 'undefined') {\n      warnedEnd = true\n      console.warn(new ModuleError(\n        'The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version',\n        { code: 'LEVEL_LEGACY' }\n      ))\n    }\n\n    return this.close(callback)\n  }\n}\n\nclass AbstractKeyIterator extends CommonIterator {\n  constructor (db, options) {\n    super(db, options, false)\n  }\n\n  [kHandleOne] (err, key) {\n    const cb = this[kFinishWork]()\n    if (err) return cb(err)\n\n    try {\n      key = key !== undefined ? this[kKeyEncoding].decode(key) : undefined\n    } catch (err) {\n      return cb(new IteratorDecodeError('key', err))\n    }\n\n    if (key !== undefined) this[kCount]++\n    cb(null, key)\n  }\n\n  [kHandleMany] (err, keys) {\n    const cb = this[kFinishWork]()\n    if (err) return this[kReturnMany](cb, err)\n\n    try {\n      for (let i = 0; i < keys.length; i++) {\n        const key = keys[i]\n        keys[i] = key !== undefined ? this[kKeyEncoding].decode(key) : undefined\n      }\n    } catch (err) {\n      return this[kReturnMany](cb, new IteratorDecodeError('keys', err))\n    }\n\n    this[kCount] += keys.length\n    this[kReturnMany](cb, null, keys)\n  }\n}\n\nclass AbstractValueIterator extends CommonIterator {\n  constructor (db, options) {\n    super(db, options, false)\n  }\n\n  [kHandleOne] (err, value) {\n    const cb = this[kFinishWork]()\n    if (err) return cb(err)\n\n    try {\n      value = value !== undefined ? this[kValueEncoding].decode(value) : undefined\n    } catch (err) {\n      return cb(new IteratorDecodeError('value', err))\n    }\n\n    if (value !== undefined) this[kCount]++\n    cb(null, value)\n  }\n\n  [kHandleMany] (err, values) {\n    const cb = this[kFinishWork]()\n    if (err) return this[kReturnMany](cb, err)\n\n    try {\n      for (let i = 0; i < values.length; i++) {\n        const value = values[i]\n        values[i] = value !== undefined ? this[kValueEncoding].decode(value) : undefined\n      }\n    } catch (err) {\n      return this[kReturnMany](cb, new IteratorDecodeError('values', err))\n    }\n\n    this[kCount] += values.length\n    this[kReturnMany](cb, null, values)\n  }\n}\n\n// Internal utility, not typed or exported\nclass IteratorDecodeError extends ModuleError {\n  constructor (subject, cause) {\n    super(`Iterator could not decode ${subject}`, {\n      code: 'LEVEL_DECODE_ERROR',\n      cause\n    })\n  }\n}\n\n// To help migrating to abstract-level\nfor (const k of ['_ended property', '_nexting property', '_end method']) {\n  Object.defineProperty(AbstractIterator.prototype, k.split(' ')[0], {\n    get () { throw new ModuleError(`The ${k} has been removed`, { code: 'LEVEL_LEGACY' }) },\n    set () { throw new ModuleError(`The ${k} has been removed`, { code: 'LEVEL_LEGACY' }) }\n  })\n}\n\n// Exposed so that AbstractLevel can set these options\nAbstractIterator.keyEncoding = kKeyEncoding\nAbstractIterator.valueEncoding = kValueEncoding\n\nexports.AbstractIterator = AbstractIterator\nexports.AbstractKeyIterator = AbstractKeyIterator\nexports.AbstractValueIterator = AbstractValueIterator\n","'use strict'\n\nconst { AbstractKeyIterator, AbstractValueIterator } = require('../abstract-iterator')\n\nconst kIterator = Symbol('iterator')\nconst kCallback = Symbol('callback')\nconst kHandleOne = Symbol('handleOne')\nconst kHandleMany = Symbol('handleMany')\n\nclass DefaultKeyIterator extends AbstractKeyIterator {\n  constructor (db, options) {\n    super(db, options)\n\n    this[kIterator] = db.iterator({ ...options, keys: true, values: false })\n    this[kHandleOne] = this[kHandleOne].bind(this)\n    this[kHandleMany] = this[kHandleMany].bind(this)\n  }\n}\n\nclass DefaultValueIterator extends AbstractValueIterator {\n  constructor (db, options) {\n    super(db, options)\n\n    this[kIterator] = db.iterator({ ...options, keys: false, values: true })\n    this[kHandleOne] = this[kHandleOne].bind(this)\n    this[kHandleMany] = this[kHandleMany].bind(this)\n  }\n}\n\nfor (const Iterator of [DefaultKeyIterator, DefaultValueIterator]) {\n  const keys = Iterator === DefaultKeyIterator\n  const mapEntry = keys ? (entry) => entry[0] : (entry) => entry[1]\n\n  Iterator.prototype._next = function (callback) {\n    this[kCallback] = callback\n    this[kIterator].next(this[kHandleOne])\n  }\n\n  Iterator.prototype[kHandleOne] = function (err, key, value) {\n    const callback = this[kCallback]\n    if (err) callback(err)\n    else callback(null, keys ? key : value)\n  }\n\n  Iterator.prototype._nextv = function (size, options, callback) {\n    this[kCallback] = callback\n    this[kIterator].nextv(size, options, this[kHandleMany])\n  }\n\n  Iterator.prototype._all = function (options, callback) {\n    this[kCallback] = callback\n    this[kIterator].all(options, this[kHandleMany])\n  }\n\n  Iterator.prototype[kHandleMany] = function (err, entries) {\n    const callback = this[kCallback]\n    if (err) callback(err)\n    else callback(null, entries.map(mapEntry))\n  }\n\n  Iterator.prototype._seek = function (target, options) {\n    this[kIterator].seek(target, options)\n  }\n\n  Iterator.prototype._close = function (callback) {\n    this[kIterator].close(callback)\n  }\n}\n\n// Internal utilities, should be typed as AbstractKeyIterator and AbstractValueIterator\nexports.DefaultKeyIterator = DefaultKeyIterator\nexports.DefaultValueIterator = DefaultValueIterator\n","'use strict'\n\nconst { AbstractIterator, AbstractKeyIterator, AbstractValueIterator } = require('../abstract-iterator')\nconst ModuleError = require('module-error')\n\nconst kNut = Symbol('nut')\nconst kUndefer = Symbol('undefer')\nconst kFactory = Symbol('factory')\n\nclass DeferredIterator extends AbstractIterator {\n  constructor (db, options) {\n    super(db, options)\n\n    this[kNut] = null\n    this[kFactory] = () => db.iterator(options)\n\n    this.db.defer(() => this[kUndefer]())\n  }\n}\n\nclass DeferredKeyIterator extends AbstractKeyIterator {\n  constructor (db, options) {\n    super(db, options)\n\n    this[kNut] = null\n    this[kFactory] = () => db.keys(options)\n\n    this.db.defer(() => this[kUndefer]())\n  }\n}\n\nclass DeferredValueIterator extends AbstractValueIterator {\n  constructor (db, options) {\n    super(db, options)\n\n    this[kNut] = null\n    this[kFactory] = () => db.values(options)\n\n    this.db.defer(() => this[kUndefer]())\n  }\n}\n\nfor (const Iterator of [DeferredIterator, DeferredKeyIterator, DeferredValueIterator]) {\n  Iterator.prototype[kUndefer] = function () {\n    if (this.db.status === 'open') {\n      this[kNut] = this[kFactory]()\n    }\n  }\n\n  Iterator.prototype._next = function (callback) {\n    if (this[kNut] !== null) {\n      this[kNut].next(callback)\n    } else if (this.db.status === 'opening') {\n      this.db.defer(() => this._next(callback))\n    } else {\n      this.nextTick(callback, new ModuleError('Iterator is not open: cannot call next() after close()', {\n        code: 'LEVEL_ITERATOR_NOT_OPEN'\n      }))\n    }\n  }\n\n  Iterator.prototype._nextv = function (size, options, callback) {\n    if (this[kNut] !== null) {\n      this[kNut].nextv(size, options, callback)\n    } else if (this.db.status === 'opening') {\n      this.db.defer(() => this._nextv(size, options, callback))\n    } else {\n      this.nextTick(callback, new ModuleError('Iterator is not open: cannot call nextv() after close()', {\n        code: 'LEVEL_ITERATOR_NOT_OPEN'\n      }))\n    }\n  }\n\n  Iterator.prototype._all = function (options, callback) {\n    if (this[kNut] !== null) {\n      this[kNut].all(callback)\n    } else if (this.db.status === 'opening') {\n      this.db.defer(() => this._all(options, callback))\n    } else {\n      this.nextTick(callback, new ModuleError('Iterator is not open: cannot call all() after close()', {\n        code: 'LEVEL_ITERATOR_NOT_OPEN'\n      }))\n    }\n  }\n\n  Iterator.prototype._seek = function (target, options) {\n    if (this[kNut] !== null) {\n      // TODO: explain why we need _seek() rather than seek() here\n      this[kNut]._seek(target, options)\n    } else if (this.db.status === 'opening') {\n      this.db.defer(() => this._seek(target, options))\n    }\n  }\n\n  Iterator.prototype._close = function (callback) {\n    if (this[kNut] !== null) {\n      this[kNut].close(callback)\n    } else if (this.db.status === 'opening') {\n      this.db.defer(() => this._close(callback))\n    } else {\n      this.nextTick(callback)\n    }\n  }\n}\n\nexports.DeferredIterator = DeferredIterator\nexports.DeferredKeyIterator = DeferredKeyIterator\nexports.DeferredValueIterator = DeferredValueIterator\n","'use strict'\n\nconst { fromCallback } = require('catering')\nconst ModuleError = require('module-error')\nconst { getCallback, getOptions } = require('./lib/common')\n\nconst kPromise = Symbol('promise')\nconst kStatus = Symbol('status')\nconst kOperations = Symbol('operations')\nconst kFinishClose = Symbol('finishClose')\nconst kCloseCallbacks = Symbol('closeCallbacks')\n\nclass AbstractChainedBatch {\n  constructor (db) {\n    if (typeof db !== 'object' || db === null) {\n      const hint = db === null ? 'null' : typeof db\n      throw new TypeError(`The first argument must be an abstract-level database, received ${hint}`)\n    }\n\n    this[kOperations] = []\n    this[kCloseCallbacks] = []\n    this[kStatus] = 'open'\n    this[kFinishClose] = this[kFinishClose].bind(this)\n\n    this.db = db\n    this.db.attachResource(this)\n    this.nextTick = db.nextTick\n  }\n\n  get length () {\n    return this[kOperations].length\n  }\n\n  put (key, value, options) {\n    if (this[kStatus] !== 'open') {\n      throw new ModuleError('Batch is not open: cannot call put() after write() or close()', {\n        code: 'LEVEL_BATCH_NOT_OPEN'\n      })\n    }\n\n    const err = this.db._checkKey(key) || this.db._checkValue(value)\n    if (err) throw err\n\n    const db = options && options.sublevel != null ? options.sublevel : this.db\n    const original = options\n    const keyEncoding = db.keyEncoding(options && options.keyEncoding)\n    const valueEncoding = db.valueEncoding(options && options.valueEncoding)\n    const keyFormat = keyEncoding.format\n\n    // Forward encoding options\n    options = { ...options, keyEncoding: keyFormat, valueEncoding: valueEncoding.format }\n\n    // Prevent double prefixing\n    if (db !== this.db) {\n      options.sublevel = null\n    }\n\n    const mappedKey = db.prefixKey(keyEncoding.encode(key), keyFormat)\n    const mappedValue = valueEncoding.encode(value)\n\n    this._put(mappedKey, mappedValue, options)\n    this[kOperations].push({ ...original, type: 'put', key, value })\n\n    return this\n  }\n\n  _put (key, value, options) {}\n\n  del (key, options) {\n    if (this[kStatus] !== 'open') {\n      throw new ModuleError('Batch is not open: cannot call del() after write() or close()', {\n        code: 'LEVEL_BATCH_NOT_OPEN'\n      })\n    }\n\n    const err = this.db._checkKey(key)\n    if (err) throw err\n\n    const db = options && options.sublevel != null ? options.sublevel : this.db\n    const original = options\n    const keyEncoding = db.keyEncoding(options && options.keyEncoding)\n    const keyFormat = keyEncoding.format\n\n    // Forward encoding options\n    options = { ...options, keyEncoding: keyFormat }\n\n    // Prevent double prefixing\n    if (db !== this.db) {\n      options.sublevel = null\n    }\n\n    this._del(db.prefixKey(keyEncoding.encode(key), keyFormat), options)\n    this[kOperations].push({ ...original, type: 'del', key })\n\n    return this\n  }\n\n  _del (key, options) {}\n\n  clear () {\n    if (this[kStatus] !== 'open') {\n      throw new ModuleError('Batch is not open: cannot call clear() after write() or close()', {\n        code: 'LEVEL_BATCH_NOT_OPEN'\n      })\n    }\n\n    this._clear()\n    this[kOperations] = []\n\n    return this\n  }\n\n  _clear () {}\n\n  write (options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options)\n\n    if (this[kStatus] !== 'open') {\n      this.nextTick(callback, new ModuleError('Batch is not open: cannot call write() after write() or close()', {\n        code: 'LEVEL_BATCH_NOT_OPEN'\n      }))\n    } else if (this.length === 0) {\n      this.close(callback)\n    } else {\n      this[kStatus] = 'writing'\n      this._write(options, (err) => {\n        this[kStatus] = 'closing'\n        this[kCloseCallbacks].push(() => callback(err))\n\n        // Emit after setting 'closing' status, because event may trigger a\n        // db close which in turn triggers (idempotently) closing this batch.\n        if (!err) this.db.emit('batch', this[kOperations])\n\n        this._close(this[kFinishClose])\n      })\n    }\n\n    return callback[kPromise]\n  }\n\n  _write (options, callback) {}\n\n  close (callback) {\n    callback = fromCallback(callback, kPromise)\n\n    if (this[kStatus] === 'closing') {\n      this[kCloseCallbacks].push(callback)\n    } else if (this[kStatus] === 'closed') {\n      this.nextTick(callback)\n    } else {\n      this[kCloseCallbacks].push(callback)\n\n      if (this[kStatus] !== 'writing') {\n        this[kStatus] = 'closing'\n        this._close(this[kFinishClose])\n      }\n    }\n\n    return callback[kPromise]\n  }\n\n  _close (callback) {\n    this.nextTick(callback)\n  }\n\n  [kFinishClose] () {\n    this[kStatus] = 'closed'\n    this.db.detachResource(this)\n\n    const callbacks = this[kCloseCallbacks]\n    this[kCloseCallbacks] = []\n\n    for (const cb of callbacks) {\n      cb()\n    }\n  }\n}\n\nexports.AbstractChainedBatch = AbstractChainedBatch\n","'use strict'\n\nconst { AbstractChainedBatch } = require('../abstract-chained-batch')\nconst ModuleError = require('module-error')\nconst kEncoded = Symbol('encoded')\n\n// Functional default for chained batch, with support of deferred open\nclass DefaultChainedBatch extends AbstractChainedBatch {\n  constructor (db) {\n    super(db)\n    this[kEncoded] = []\n  }\n\n  _put (key, value, options) {\n    this[kEncoded].push({ ...options, type: 'put', key, value })\n  }\n\n  _del (key, options) {\n    this[kEncoded].push({ ...options, type: 'del', key })\n  }\n\n  _clear () {\n    this[kEncoded] = []\n  }\n\n  // Assumes this[kEncoded] cannot change after write()\n  _write (options, callback) {\n    if (this.db.status === 'opening') {\n      this.db.defer(() => this._write(options, callback))\n    } else if (this.db.status === 'open') {\n      if (this[kEncoded].length === 0) this.nextTick(callback)\n      else this.db._batch(this[kEncoded], options, callback)\n    } else {\n      this.nextTick(callback, new ModuleError('Batch is not open: cannot call write() after write() or close()', {\n        code: 'LEVEL_BATCH_NOT_OPEN'\n      }))\n    }\n  }\n}\n\nexports.DefaultChainedBatch = DefaultChainedBatch\n","'use strict'\n\nconst ModuleError = require('module-error')\nconst hasOwnProperty = Object.prototype.hasOwnProperty\nconst rangeOptions = new Set(['lt', 'lte', 'gt', 'gte'])\n\nmodule.exports = function (options, keyEncoding) {\n  const result = {}\n\n  for (const k in options) {\n    if (!hasOwnProperty.call(options, k)) continue\n    if (k === 'keyEncoding' || k === 'valueEncoding') continue\n\n    if (k === 'start' || k === 'end') {\n      throw new ModuleError(`The legacy range option '${k}' has been removed`, {\n        code: 'LEVEL_LEGACY'\n      })\n    } else if (k === 'encoding') {\n      // To help migrating to abstract-level\n      throw new ModuleError(\"The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead\", {\n        code: 'LEVEL_LEGACY'\n      })\n    }\n\n    if (rangeOptions.has(k)) {\n      // Note that we don't reject nullish and empty options here. While\n      // those types are invalid as keys, they are valid as range options.\n      result[k] = keyEncoding.encode(options[k])\n    } else {\n      result[k] = options[k]\n    }\n  }\n\n  result.reverse = !!result.reverse\n  result.limit = Number.isInteger(result.limit) && result.limit >= 0 ? result.limit : -1\n\n  return result\n}\n","/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nlet promise\n\nmodule.exports = typeof queueMicrotask === 'function'\n  ? queueMicrotask.bind(typeof window !== 'undefined' ? window : global)\n  // reuse resolved promise, and allocate it lazily\n  : cb => (promise || (promise = Promise.resolve()))\n    .then(cb)\n    .catch(err => setTimeout(() => { throw err }, 0))\n","'use strict'\n\nconst { supports } = require('level-supports')\nconst { Transcoder } = require('level-transcoder')\nconst { EventEmitter } = require('events')\nconst { fromCallback } = require('catering')\nconst ModuleError = require('module-error')\nconst { AbstractIterator } = require('./abstract-iterator')\nconst { DefaultKeyIterator, DefaultValueIterator } = require('./lib/default-kv-iterator')\nconst { DeferredIterator, DeferredKeyIterator, DeferredValueIterator } = require('./lib/deferred-iterator')\nconst { DefaultChainedBatch } = require('./lib/default-chained-batch')\nconst { getCallback, getOptions } = require('./lib/common')\nconst rangeOptions = require('./lib/range-options')\n\nconst kPromise = Symbol('promise')\nconst kLanded = Symbol('landed')\nconst kResources = Symbol('resources')\nconst kCloseResources = Symbol('closeResources')\nconst kOperations = Symbol('operations')\nconst kUndefer = Symbol('undefer')\nconst kDeferOpen = Symbol('deferOpen')\nconst kOptions = Symbol('options')\nconst kStatus = Symbol('status')\nconst kDefaultOptions = Symbol('defaultOptions')\nconst kTranscoder = Symbol('transcoder')\nconst kKeyEncoding = Symbol('keyEncoding')\nconst kValueEncoding = Symbol('valueEncoding')\nconst noop = () => {}\n\nclass AbstractLevel extends EventEmitter {\n  constructor (manifest, options) {\n    super()\n\n    if (typeof manifest !== 'object' || manifest === null) {\n      throw new TypeError(\"The first argument 'manifest' must be an object\")\n    }\n\n    options = getOptions(options)\n    const { keyEncoding, valueEncoding, passive, ...forward } = options\n\n    this[kResources] = new Set()\n    this[kOperations] = []\n    this[kDeferOpen] = true\n    this[kOptions] = forward\n    this[kStatus] = 'opening'\n\n    this.supports = supports(manifest, {\n      status: true,\n      promises: true,\n      clear: true,\n      getMany: true,\n      deferredOpen: true,\n\n      // TODO (next major): add seek\n      snapshots: manifest.snapshots !== false,\n      permanence: manifest.permanence !== false,\n\n      // TODO: remove from level-supports because it's always supported\n      keyIterator: true,\n      valueIterator: true,\n      iteratorNextv: true,\n      iteratorAll: true,\n\n      encodings: manifest.encodings || {},\n      events: Object.assign({}, manifest.events, {\n        opening: true,\n        open: true,\n        closing: true,\n        closed: true,\n        put: true,\n        del: true,\n        batch: true,\n        clear: true\n      })\n    })\n\n    this[kTranscoder] = new Transcoder(formats(this))\n    this[kKeyEncoding] = this[kTranscoder].encoding(keyEncoding || 'utf8')\n    this[kValueEncoding] = this[kTranscoder].encoding(valueEncoding || 'utf8')\n\n    // Add custom and transcoder encodings to manifest\n    for (const encoding of this[kTranscoder].encodings()) {\n      if (!this.supports.encodings[encoding.commonName]) {\n        this.supports.encodings[encoding.commonName] = true\n      }\n    }\n\n    this[kDefaultOptions] = {\n      empty: Object.freeze({}),\n      entry: Object.freeze({\n        keyEncoding: this[kKeyEncoding].commonName,\n        valueEncoding: this[kValueEncoding].commonName\n      }),\n      key: Object.freeze({\n        keyEncoding: this[kKeyEncoding].commonName\n      })\n    }\n\n    // Let subclass finish its constructor\n    this.nextTick(() => {\n      if (this[kDeferOpen]) {\n        this.open({ passive: false }, noop)\n      }\n    })\n  }\n\n  get status () {\n    return this[kStatus]\n  }\n\n  keyEncoding (encoding) {\n    return this[kTranscoder].encoding(encoding != null ? encoding : this[kKeyEncoding])\n  }\n\n  valueEncoding (encoding) {\n    return this[kTranscoder].encoding(encoding != null ? encoding : this[kValueEncoding])\n  }\n\n  open (options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n\n    options = { ...this[kOptions], ...getOptions(options) }\n\n    options.createIfMissing = options.createIfMissing !== false\n    options.errorIfExists = !!options.errorIfExists\n\n    const maybeOpened = (err) => {\n      if (this[kStatus] === 'closing' || this[kStatus] === 'opening') {\n        // Wait until pending state changes are done\n        this.once(kLanded, err ? () => maybeOpened(err) : maybeOpened)\n      } else if (this[kStatus] !== 'open') {\n        callback(new ModuleError('Database is not open', {\n          code: 'LEVEL_DATABASE_NOT_OPEN',\n          cause: err\n        }))\n      } else {\n        callback()\n      }\n    }\n\n    if (options.passive) {\n      if (this[kStatus] === 'opening') {\n        this.once(kLanded, maybeOpened)\n      } else {\n        this.nextTick(maybeOpened)\n      }\n    } else if (this[kStatus] === 'closed' || this[kDeferOpen]) {\n      this[kDeferOpen] = false\n      this[kStatus] = 'opening'\n      this.emit('opening')\n\n      this._open(options, (err) => {\n        if (err) {\n          this[kStatus] = 'closed'\n\n          // Resources must be safe to close in any db state\n          this[kCloseResources](() => {\n            this.emit(kLanded)\n            maybeOpened(err)\n          })\n\n          this[kUndefer]()\n          return\n        }\n\n        this[kStatus] = 'open'\n        this[kUndefer]()\n        this.emit(kLanded)\n\n        // Only emit public event if pending state changes are done\n        if (this[kStatus] === 'open') this.emit('open')\n\n        // TODO (next major): remove this alias\n        if (this[kStatus] === 'open') this.emit('ready')\n\n        maybeOpened()\n      })\n    } else if (this[kStatus] === 'open') {\n      this.nextTick(maybeOpened)\n    } else {\n      this.once(kLanded, () => this.open(options, callback))\n    }\n\n    return callback[kPromise]\n  }\n\n  _open (options, callback) {\n    this.nextTick(callback)\n  }\n\n  close (callback) {\n    callback = fromCallback(callback, kPromise)\n\n    const maybeClosed = (err) => {\n      if (this[kStatus] === 'opening' || this[kStatus] === 'closing') {\n        // Wait until pending state changes are done\n        this.once(kLanded, err ? maybeClosed(err) : maybeClosed)\n      } else if (this[kStatus] !== 'closed') {\n        callback(new ModuleError('Database is not closed', {\n          code: 'LEVEL_DATABASE_NOT_CLOSED',\n          cause: err\n        }))\n      } else {\n        callback()\n      }\n    }\n\n    if (this[kStatus] === 'open') {\n      this[kStatus] = 'closing'\n      this.emit('closing')\n\n      const cancel = (err) => {\n        this[kStatus] = 'open'\n        this[kUndefer]()\n        this.emit(kLanded)\n        maybeClosed(err)\n      }\n\n      this[kCloseResources](() => {\n        this._close((err) => {\n          if (err) return cancel(err)\n\n          this[kStatus] = 'closed'\n          this[kUndefer]()\n          this.emit(kLanded)\n\n          // Only emit public event if pending state changes are done\n          if (this[kStatus] === 'closed') this.emit('closed')\n\n          maybeClosed()\n        })\n      })\n    } else if (this[kStatus] === 'closed') {\n      this.nextTick(maybeClosed)\n    } else {\n      this.once(kLanded, () => this.close(callback))\n    }\n\n    return callback[kPromise]\n  }\n\n  [kCloseResources] (callback) {\n    if (this[kResources].size === 0) {\n      return this.nextTick(callback)\n    }\n\n    let pending = this[kResources].size\n    let sync = true\n\n    const next = () => {\n      if (--pending === 0) {\n        // We don't have tests for generic resources, so dezalgo\n        if (sync) this.nextTick(callback)\n        else callback()\n      }\n    }\n\n    // In parallel so that all resources know they are closed\n    for (const resource of this[kResources]) {\n      resource.close(next)\n    }\n\n    sync = false\n    this[kResources].clear()\n  }\n\n  _close (callback) {\n    this.nextTick(callback)\n  }\n\n  get (key, options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options, this[kDefaultOptions].entry)\n\n    if (this[kStatus] === 'opening') {\n      this.defer(() => this.get(key, options, callback))\n      return callback[kPromise]\n    }\n\n    if (maybeError(this, callback)) {\n      return callback[kPromise]\n    }\n\n    const err = this._checkKey(key)\n\n    if (err) {\n      this.nextTick(callback, err)\n      return callback[kPromise]\n    }\n\n    const keyEncoding = this.keyEncoding(options.keyEncoding)\n    const valueEncoding = this.valueEncoding(options.valueEncoding)\n    const keyFormat = keyEncoding.format\n    const valueFormat = valueEncoding.format\n\n    // Forward encoding options to the underlying store\n    if (options.keyEncoding !== keyFormat || options.valueEncoding !== valueFormat) {\n      // Avoid spread operator because of https://bugs.chromium.org/p/chromium/issues/detail?id=1204540\n      options = Object.assign({}, options, { keyEncoding: keyFormat, valueEncoding: valueFormat })\n    }\n\n    this._get(this.prefixKey(keyEncoding.encode(key), keyFormat), options, (err, value) => {\n      if (err) {\n        // Normalize not found error for backwards compatibility with abstract-leveldown and level(up)\n        if (err.code === 'LEVEL_NOT_FOUND' || err.notFound || /NotFound/i.test(err)) {\n          if (!err.code) err.code = 'LEVEL_NOT_FOUND' // Preferred way going forward\n          if (!err.notFound) err.notFound = true // Same as level-errors\n          if (!err.status) err.status = 404 // Same as level-errors\n        }\n\n        return callback(err)\n      }\n\n      try {\n        value = valueEncoding.decode(value)\n      } catch (err) {\n        return callback(new ModuleError('Could not decode value', {\n          code: 'LEVEL_DECODE_ERROR',\n          cause: err\n        }))\n      }\n\n      callback(null, value)\n    })\n\n    return callback[kPromise]\n  }\n\n  _get (key, options, callback) {\n    this.nextTick(callback, new Error('NotFound'))\n  }\n\n  getMany (keys, options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options, this[kDefaultOptions].entry)\n\n    if (this[kStatus] === 'opening') {\n      this.defer(() => this.getMany(keys, options, callback))\n      return callback[kPromise]\n    }\n\n    if (maybeError(this, callback)) {\n      return callback[kPromise]\n    }\n\n    if (!Array.isArray(keys)) {\n      this.nextTick(callback, new TypeError(\"The first argument 'keys' must be an array\"))\n      return callback[kPromise]\n    }\n\n    if (keys.length === 0) {\n      this.nextTick(callback, null, [])\n      return callback[kPromise]\n    }\n\n    const keyEncoding = this.keyEncoding(options.keyEncoding)\n    const valueEncoding = this.valueEncoding(options.valueEncoding)\n    const keyFormat = keyEncoding.format\n    const valueFormat = valueEncoding.format\n\n    // Forward encoding options\n    if (options.keyEncoding !== keyFormat || options.valueEncoding !== valueFormat) {\n      options = Object.assign({}, options, { keyEncoding: keyFormat, valueEncoding: valueFormat })\n    }\n\n    const mappedKeys = new Array(keys.length)\n\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i]\n      const err = this._checkKey(key)\n\n      if (err) {\n        this.nextTick(callback, err)\n        return callback[kPromise]\n      }\n\n      mappedKeys[i] = this.prefixKey(keyEncoding.encode(key), keyFormat)\n    }\n\n    this._getMany(mappedKeys, options, (err, values) => {\n      if (err) return callback(err)\n\n      try {\n        for (let i = 0; i < values.length; i++) {\n          if (values[i] !== undefined) {\n            values[i] = valueEncoding.decode(values[i])\n          }\n        }\n      } catch (err) {\n        return callback(new ModuleError(`Could not decode one or more of ${values.length} value(s)`, {\n          code: 'LEVEL_DECODE_ERROR',\n          cause: err\n        }))\n      }\n\n      callback(null, values)\n    })\n\n    return callback[kPromise]\n  }\n\n  _getMany (keys, options, callback) {\n    this.nextTick(callback, null, new Array(keys.length).fill(undefined))\n  }\n\n  put (key, value, options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options, this[kDefaultOptions].entry)\n\n    if (this[kStatus] === 'opening') {\n      this.defer(() => this.put(key, value, options, callback))\n      return callback[kPromise]\n    }\n\n    if (maybeError(this, callback)) {\n      return callback[kPromise]\n    }\n\n    const err = this._checkKey(key) || this._checkValue(value)\n\n    if (err) {\n      this.nextTick(callback, err)\n      return callback[kPromise]\n    }\n\n    const keyEncoding = this.keyEncoding(options.keyEncoding)\n    const valueEncoding = this.valueEncoding(options.valueEncoding)\n    const keyFormat = keyEncoding.format\n    const valueFormat = valueEncoding.format\n\n    // Forward encoding options\n    if (options.keyEncoding !== keyFormat || options.valueEncoding !== valueFormat) {\n      options = Object.assign({}, options, { keyEncoding: keyFormat, valueEncoding: valueFormat })\n    }\n\n    const mappedKey = this.prefixKey(keyEncoding.encode(key), keyFormat)\n    const mappedValue = valueEncoding.encode(value)\n\n    this._put(mappedKey, mappedValue, options, (err) => {\n      if (err) return callback(err)\n      this.emit('put', key, value)\n      callback()\n    })\n\n    return callback[kPromise]\n  }\n\n  _put (key, value, options, callback) {\n    this.nextTick(callback)\n  }\n\n  del (key, options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options, this[kDefaultOptions].key)\n\n    if (this[kStatus] === 'opening') {\n      this.defer(() => this.del(key, options, callback))\n      return callback[kPromise]\n    }\n\n    if (maybeError(this, callback)) {\n      return callback[kPromise]\n    }\n\n    const err = this._checkKey(key)\n\n    if (err) {\n      this.nextTick(callback, err)\n      return callback[kPromise]\n    }\n\n    const keyEncoding = this.keyEncoding(options.keyEncoding)\n    const keyFormat = keyEncoding.format\n\n    // Forward encoding options\n    if (options.keyEncoding !== keyFormat) {\n      options = Object.assign({}, options, { keyEncoding: keyFormat })\n    }\n\n    this._del(this.prefixKey(keyEncoding.encode(key), keyFormat), options, (err) => {\n      if (err) return callback(err)\n      this.emit('del', key)\n      callback()\n    })\n\n    return callback[kPromise]\n  }\n\n  _del (key, options, callback) {\n    this.nextTick(callback)\n  }\n\n  batch (operations, options, callback) {\n    if (!arguments.length) {\n      if (this[kStatus] === 'opening') return new DefaultChainedBatch(this)\n      if (this[kStatus] !== 'open') {\n        throw new ModuleError('Database is not open', {\n          code: 'LEVEL_DATABASE_NOT_OPEN'\n        })\n      }\n      return this._chainedBatch()\n    }\n\n    if (typeof operations === 'function') callback = operations\n    else callback = getCallback(options, callback)\n\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options, this[kDefaultOptions].empty)\n\n    if (this[kStatus] === 'opening') {\n      this.defer(() => this.batch(operations, options, callback))\n      return callback[kPromise]\n    }\n\n    if (maybeError(this, callback)) {\n      return callback[kPromise]\n    }\n\n    if (!Array.isArray(operations)) {\n      this.nextTick(callback, new TypeError(\"The first argument 'operations' must be an array\"))\n      return callback[kPromise]\n    }\n\n    if (operations.length === 0) {\n      this.nextTick(callback)\n      return callback[kPromise]\n    }\n\n    const mapped = new Array(operations.length)\n    const { keyEncoding: ke, valueEncoding: ve, ...forward } = options\n\n    for (let i = 0; i < operations.length; i++) {\n      if (typeof operations[i] !== 'object' || operations[i] === null) {\n        this.nextTick(callback, new TypeError('A batch operation must be an object'))\n        return callback[kPromise]\n      }\n\n      const op = Object.assign({}, operations[i])\n\n      if (op.type !== 'put' && op.type !== 'del') {\n        this.nextTick(callback, new TypeError(\"A batch operation must have a type property that is 'put' or 'del'\"))\n        return callback[kPromise]\n      }\n\n      const err = this._checkKey(op.key)\n\n      if (err) {\n        this.nextTick(callback, err)\n        return callback[kPromise]\n      }\n\n      const db = op.sublevel != null ? op.sublevel : this\n      const keyEncoding = db.keyEncoding(op.keyEncoding || ke)\n      const keyFormat = keyEncoding.format\n\n      op.key = db.prefixKey(keyEncoding.encode(op.key), keyFormat)\n      op.keyEncoding = keyFormat\n\n      if (op.type === 'put') {\n        const valueErr = this._checkValue(op.value)\n\n        if (valueErr) {\n          this.nextTick(callback, valueErr)\n          return callback[kPromise]\n        }\n\n        const valueEncoding = db.valueEncoding(op.valueEncoding || ve)\n\n        op.value = valueEncoding.encode(op.value)\n        op.valueEncoding = valueEncoding.format\n      }\n\n      // Prevent double prefixing\n      if (db !== this) {\n        op.sublevel = null\n      }\n\n      mapped[i] = op\n    }\n\n    this._batch(mapped, forward, (err) => {\n      if (err) return callback(err)\n      this.emit('batch', operations)\n      callback()\n    })\n\n    return callback[kPromise]\n  }\n\n  _batch (operations, options, callback) {\n    this.nextTick(callback)\n  }\n\n  sublevel (name, options) {\n    return this._sublevel(name, AbstractSublevel.defaults(options))\n  }\n\n  _sublevel (name, options) {\n    return new AbstractSublevel(this, name, options)\n  }\n\n  prefixKey (key, keyFormat) {\n    return key\n  }\n\n  clear (options, callback) {\n    callback = getCallback(options, callback)\n    callback = fromCallback(callback, kPromise)\n    options = getOptions(options, this[kDefaultOptions].empty)\n\n    if (this[kStatus] === 'opening') {\n      this.defer(() => this.clear(options, callback))\n      return callback[kPromise]\n    }\n\n    if (maybeError(this, callback)) {\n      return callback[kPromise]\n    }\n\n    const original = options\n    const keyEncoding = this.keyEncoding(options.keyEncoding)\n\n    options = rangeOptions(options, keyEncoding)\n    options.keyEncoding = keyEncoding.format\n\n    if (options.limit === 0) {\n      this.nextTick(callback)\n    } else {\n      this._clear(options, (err) => {\n        if (err) return callback(err)\n        this.emit('clear', original)\n        callback()\n      })\n    }\n\n    return callback[kPromise]\n  }\n\n  _clear (options, callback) {\n    this.nextTick(callback)\n  }\n\n  iterator (options) {\n    const keyEncoding = this.keyEncoding(options && options.keyEncoding)\n    const valueEncoding = this.valueEncoding(options && options.valueEncoding)\n\n    options = rangeOptions(options, keyEncoding)\n    options.keys = options.keys !== false\n    options.values = options.values !== false\n\n    // We need the original encoding options in AbstractIterator in order to decode data\n    options[AbstractIterator.keyEncoding] = keyEncoding\n    options[AbstractIterator.valueEncoding] = valueEncoding\n\n    // Forward encoding options to private API\n    options.keyEncoding = keyEncoding.format\n    options.valueEncoding = valueEncoding.format\n\n    if (this[kStatus] === 'opening') {\n      return new DeferredIterator(this, options)\n    } else if (this[kStatus] !== 'open') {\n      throw new ModuleError('Database is not open', {\n        code: 'LEVEL_DATABASE_NOT_OPEN'\n      })\n    }\n\n    return this._iterator(options)\n  }\n\n  _iterator (options) {\n    return new AbstractIterator(this, options)\n  }\n\n  keys (options) {\n    // Also include valueEncoding (though unused) because we may fallback to _iterator()\n    const keyEncoding = this.keyEncoding(options && options.keyEncoding)\n    const valueEncoding = this.valueEncoding(options && options.valueEncoding)\n\n    options = rangeOptions(options, keyEncoding)\n\n    // We need the original encoding options in AbstractKeyIterator in order to decode data\n    options[AbstractIterator.keyEncoding] = keyEncoding\n    options[AbstractIterator.valueEncoding] = valueEncoding\n\n    // Forward encoding options to private API\n    options.keyEncoding = keyEncoding.format\n    options.valueEncoding = valueEncoding.format\n\n    if (this[kStatus] === 'opening') {\n      return new DeferredKeyIterator(this, options)\n    } else if (this[kStatus] !== 'open') {\n      throw new ModuleError('Database is not open', {\n        code: 'LEVEL_DATABASE_NOT_OPEN'\n      })\n    }\n\n    return this._keys(options)\n  }\n\n  _keys (options) {\n    return new DefaultKeyIterator(this, options)\n  }\n\n  values (options) {\n    const keyEncoding = this.keyEncoding(options && options.keyEncoding)\n    const valueEncoding = this.valueEncoding(options && options.valueEncoding)\n\n    options = rangeOptions(options, keyEncoding)\n\n    // We need the original encoding options in AbstractValueIterator in order to decode data\n    options[AbstractIterator.keyEncoding] = keyEncoding\n    options[AbstractIterator.valueEncoding] = valueEncoding\n\n    // Forward encoding options to private API\n    options.keyEncoding = keyEncoding.format\n    options.valueEncoding = valueEncoding.format\n\n    if (this[kStatus] === 'opening') {\n      return new DeferredValueIterator(this, options)\n    } else if (this[kStatus] !== 'open') {\n      throw new ModuleError('Database is not open', {\n        code: 'LEVEL_DATABASE_NOT_OPEN'\n      })\n    }\n\n    return this._values(options)\n  }\n\n  _values (options) {\n    return new DefaultValueIterator(this, options)\n  }\n\n  defer (fn) {\n    if (typeof fn !== 'function') {\n      throw new TypeError('The first argument must be a function')\n    }\n\n    this[kOperations].push(fn)\n  }\n\n  [kUndefer] () {\n    if (this[kOperations].length === 0) {\n      return\n    }\n\n    const operations = this[kOperations]\n    this[kOperations] = []\n\n    for (const op of operations) {\n      op()\n    }\n  }\n\n  // TODO: docs and types\n  attachResource (resource) {\n    if (typeof resource !== 'object' || resource === null ||\n      typeof resource.close !== 'function') {\n      throw new TypeError('The first argument must be a resource object')\n    }\n\n    this[kResources].add(resource)\n  }\n\n  // TODO: docs and types\n  detachResource (resource) {\n    this[kResources].delete(resource)\n  }\n\n  _chainedBatch () {\n    return new DefaultChainedBatch(this)\n  }\n\n  _checkKey (key) {\n    if (key === null || key === undefined) {\n      return new ModuleError('Key cannot be null or undefined', {\n        code: 'LEVEL_INVALID_KEY'\n      })\n    }\n  }\n\n  _checkValue (value) {\n    if (value === null || value === undefined) {\n      return new ModuleError('Value cannot be null or undefined', {\n        code: 'LEVEL_INVALID_VALUE'\n      })\n    }\n  }\n}\n\n// Expose browser-compatible nextTick for dependents\n// TODO: after we drop node 10, also use queueMicrotask in node\nAbstractLevel.prototype.nextTick = require('./lib/next-tick')\n\nconst { AbstractSublevel } = require('./lib/abstract-sublevel')({ AbstractLevel })\n\nexports.AbstractLevel = AbstractLevel\nexports.AbstractSublevel = AbstractSublevel\n\nconst maybeError = function (db, callback) {\n  if (db[kStatus] !== 'open') {\n    db.nextTick(callback, new ModuleError('Database is not open', {\n      code: 'LEVEL_DATABASE_NOT_OPEN'\n    }))\n    return true\n  }\n\n  return false\n}\n\nconst formats = function (db) {\n  return Object.keys(db.supports.encodings)\n    .filter(k => !!db.supports.encodings[k])\n}\n","'use strict'\n\nconst queueMicrotask = require('queue-microtask')\n\nmodule.exports = function (fn, ...args) {\n  if (args.length === 0) {\n    queueMicrotask(fn)\n  } else {\n    queueMicrotask(() => fn(...args))\n  }\n}\n","'use strict'\n\nconst ModuleError = require('module-error')\nconst { Buffer } = require('buffer') || {}\nconst {\n  AbstractSublevelIterator,\n  AbstractSublevelKeyIterator,\n  AbstractSublevelValueIterator\n} = require('./abstract-sublevel-iterator')\n\nconst kPrefix = Symbol('prefix')\nconst kUpperBound = Symbol('upperBound')\nconst kPrefixRange = Symbol('prefixRange')\nconst kParent = Symbol('parent')\nconst kUnfix = Symbol('unfix')\n\nconst textEncoder = new TextEncoder()\nconst defaults = { separator: '!' }\n\n// Wrapped to avoid circular dependency\nmodule.exports = function ({ AbstractLevel }) {\n  class AbstractSublevel extends AbstractLevel {\n    static defaults (options) {\n      // To help migrating from subleveldown to abstract-level\n      if (typeof options === 'string') {\n        throw new ModuleError('The subleveldown string shorthand for { separator } has been removed', {\n          code: 'LEVEL_LEGACY'\n        })\n      } else if (options && options.open) {\n        throw new ModuleError('The subleveldown open option has been removed', {\n          code: 'LEVEL_LEGACY'\n        })\n      }\n\n      if (options == null) {\n        return defaults\n      } else if (!options.separator) {\n        return { ...options, separator: '!' }\n      } else {\n        return options\n      }\n    }\n\n    // TODO: add autoClose option, which if true, does parent.attachResource(this)\n    constructor (db, name, options) {\n      // Don't forward AbstractSublevel options to AbstractLevel\n      const { separator, manifest, ...forward } = AbstractSublevel.defaults(options)\n      name = trim(name, separator)\n\n      // Reserve one character between separator and name to give us an upper bound\n      const reserved = separator.charCodeAt(0) + 1\n      const parent = db[kParent] || db\n\n      // Keys should sort like ['!a!', '!a!!a!', '!a\"', '!aa!', '!b!'].\n      // Use ASCII for consistent length between string, Buffer and Uint8Array\n      if (!textEncoder.encode(name).every(x => x > reserved && x < 127)) {\n        throw new ModuleError(`Prefix must use bytes > ${reserved} < ${127}`, {\n          code: 'LEVEL_INVALID_PREFIX'\n        })\n      }\n\n      super(mergeManifests(parent, manifest), forward)\n\n      const prefix = (db.prefix || '') + separator + name + separator\n      const upperBound = prefix.slice(0, -1) + String.fromCharCode(reserved)\n\n      this[kParent] = parent\n      this[kPrefix] = new MultiFormat(prefix)\n      this[kUpperBound] = new MultiFormat(upperBound)\n      this[kUnfix] = new Unfixer()\n\n      this.nextTick = parent.nextTick\n    }\n\n    prefixKey (key, keyFormat) {\n      if (keyFormat === 'utf8') {\n        return this[kPrefix].utf8 + key\n      } else if (key.byteLength === 0) {\n        // Fast path for empty key (no copy)\n        return this[kPrefix][keyFormat]\n      } else if (keyFormat === 'view') {\n        const view = this[kPrefix].view\n        const result = new Uint8Array(view.byteLength + key.byteLength)\n\n        result.set(view, 0)\n        result.set(key, view.byteLength)\n\n        return result\n      } else {\n        const buffer = this[kPrefix].buffer\n        return Buffer.concat([buffer, key], buffer.byteLength + key.byteLength)\n      }\n    }\n\n    // Not exposed for now.\n    [kPrefixRange] (range, keyFormat) {\n      if (range.gte !== undefined) {\n        range.gte = this.prefixKey(range.gte, keyFormat)\n      } else if (range.gt !== undefined) {\n        range.gt = this.prefixKey(range.gt, keyFormat)\n      } else {\n        range.gte = this[kPrefix][keyFormat]\n      }\n\n      if (range.lte !== undefined) {\n        range.lte = this.prefixKey(range.lte, keyFormat)\n      } else if (range.lt !== undefined) {\n        range.lt = this.prefixKey(range.lt, keyFormat)\n      } else {\n        range.lte = this[kUpperBound][keyFormat]\n      }\n    }\n\n    get prefix () {\n      return this[kPrefix].utf8\n    }\n\n    get db () {\n      return this[kParent]\n    }\n\n    _open (options, callback) {\n      // The parent db must open itself or be (re)opened by the user because\n      // a sublevel should not initiate state changes on the rest of the db.\n      this[kParent].open({ passive: true }, callback)\n    }\n\n    _put (key, value, options, callback) {\n      this[kParent].put(key, value, options, callback)\n    }\n\n    _get (key, options, callback) {\n      this[kParent].get(key, options, callback)\n    }\n\n    _getMany (keys, options, callback) {\n      this[kParent].getMany(keys, options, callback)\n    }\n\n    _del (key, options, callback) {\n      this[kParent].del(key, options, callback)\n    }\n\n    _batch (operations, options, callback) {\n      this[kParent].batch(operations, options, callback)\n    }\n\n    _clear (options, callback) {\n      // TODO (refactor): move to AbstractLevel\n      this[kPrefixRange](options, options.keyEncoding)\n      this[kParent].clear(options, callback)\n    }\n\n    _iterator (options) {\n      // TODO (refactor): move to AbstractLevel\n      this[kPrefixRange](options, options.keyEncoding)\n      const iterator = this[kParent].iterator(options)\n      const unfix = this[kUnfix].get(this[kPrefix].utf8.length, options.keyEncoding)\n      return new AbstractSublevelIterator(this, options, iterator, unfix)\n    }\n\n    _keys (options) {\n      this[kPrefixRange](options, options.keyEncoding)\n      const iterator = this[kParent].keys(options)\n      const unfix = this[kUnfix].get(this[kPrefix].utf8.length, options.keyEncoding)\n      return new AbstractSublevelKeyIterator(this, options, iterator, unfix)\n    }\n\n    _values (options) {\n      this[kPrefixRange](options, options.keyEncoding)\n      const iterator = this[kParent].values(options)\n      return new AbstractSublevelValueIterator(this, options, iterator)\n    }\n  }\n\n  return { AbstractSublevel }\n}\n\nconst mergeManifests = function (parent, manifest) {\n  return {\n    // Inherit manifest of parent db\n    ...parent.supports,\n\n    // Disable unsupported features\n    createIfMissing: false,\n    errorIfExists: false,\n\n    // Unset additional events because we're not forwarding them\n    events: {},\n\n    // Unset additional methods (like approximateSize) which we can't support here unless\n    // the AbstractSublevel class is overridden by an implementation of `abstract-level`.\n    additionalMethods: {},\n\n    // Inherit manifest of custom AbstractSublevel subclass. Such a class is not\n    // allowed to override encodings.\n    ...manifest,\n\n    encodings: {\n      utf8: supportsEncoding(parent, 'utf8'),\n      buffer: supportsEncoding(parent, 'buffer'),\n      view: supportsEncoding(parent, 'view')\n    }\n  }\n}\n\nconst supportsEncoding = function (parent, encoding) {\n  // Prefer a non-transcoded encoding for optimal performance\n  return parent.supports.encodings[encoding]\n    ? parent.keyEncoding(encoding).name === encoding\n    : false\n}\n\nclass MultiFormat {\n  constructor (key) {\n    this.utf8 = key\n    this.view = textEncoder.encode(key)\n    this.buffer = Buffer ? Buffer.from(this.view.buffer, 0, this.view.byteLength) : {}\n  }\n}\n\nclass Unfixer {\n  constructor () {\n    this.cache = new Map()\n  }\n\n  get (prefixLength, keyFormat) {\n    let unfix = this.cache.get(keyFormat)\n\n    if (unfix === undefined) {\n      if (keyFormat === 'view') {\n        unfix = function (prefixLength, key) {\n          // Avoid Uint8Array#slice() because it copies\n          return key.subarray(prefixLength)\n        }.bind(null, prefixLength)\n      } else {\n        unfix = function (prefixLength, key) {\n          // Avoid Buffer#subarray() because it's slow\n          return key.slice(prefixLength)\n        }.bind(null, prefixLength)\n      }\n\n      this.cache.set(keyFormat, unfix)\n    }\n\n    return unfix\n  }\n}\n\nconst trim = function (str, char) {\n  let start = 0\n  let end = str.length\n\n  while (start < end && str[start] === char) start++\n  while (end > start && str[end - 1] === char) end--\n\n  return str.slice(start, end)\n}\n","'use strict'\n\nconst { AbstractIterator, AbstractKeyIterator, AbstractValueIterator } = require('../abstract-iterator')\n\nconst kUnfix = Symbol('unfix')\nconst kIterator = Symbol('iterator')\nconst kHandleOne = Symbol('handleOne')\nconst kHandleMany = Symbol('handleMany')\nconst kCallback = Symbol('callback')\n\n// TODO: unfix natively if db supports it\nclass AbstractSublevelIterator extends AbstractIterator {\n  constructor (db, options, iterator, unfix) {\n    super(db, options)\n\n    this[kIterator] = iterator\n    this[kUnfix] = unfix\n    this[kHandleOne] = this[kHandleOne].bind(this)\n    this[kHandleMany] = this[kHandleMany].bind(this)\n    this[kCallback] = null\n  }\n\n  [kHandleOne] (err, key, value) {\n    const callback = this[kCallback]\n    if (err) return callback(err)\n    if (key !== undefined) key = this[kUnfix](key)\n    callback(err, key, value)\n  }\n\n  [kHandleMany] (err, entries) {\n    const callback = this[kCallback]\n    if (err) return callback(err)\n\n    for (const entry of entries) {\n      const key = entry[0]\n      if (key !== undefined) entry[0] = this[kUnfix](key)\n    }\n\n    callback(err, entries)\n  }\n}\n\nclass AbstractSublevelKeyIterator extends AbstractKeyIterator {\n  constructor (db, options, iterator, unfix) {\n    super(db, options)\n\n    this[kIterator] = iterator\n    this[kUnfix] = unfix\n    this[kHandleOne] = this[kHandleOne].bind(this)\n    this[kHandleMany] = this[kHandleMany].bind(this)\n    this[kCallback] = null\n  }\n\n  [kHandleOne] (err, key) {\n    const callback = this[kCallback]\n    if (err) return callback(err)\n    if (key !== undefined) key = this[kUnfix](key)\n    callback(err, key)\n  }\n\n  [kHandleMany] (err, keys) {\n    const callback = this[kCallback]\n    if (err) return callback(err)\n\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i]\n      if (key !== undefined) keys[i] = this[kUnfix](key)\n    }\n\n    callback(err, keys)\n  }\n}\n\nclass AbstractSublevelValueIterator extends AbstractValueIterator {\n  constructor (db, options, iterator) {\n    super(db, options)\n    this[kIterator] = iterator\n  }\n}\n\nfor (const Iterator of [AbstractSublevelIterator, AbstractSublevelKeyIterator]) {\n  Iterator.prototype._next = function (callback) {\n    this[kCallback] = callback\n    this[kIterator].next(this[kHandleOne])\n  }\n\n  Iterator.prototype._nextv = function (size, options, callback) {\n    this[kCallback] = callback\n    this[kIterator].nextv(size, options, this[kHandleMany])\n  }\n\n  Iterator.prototype._all = function (options, callback) {\n    this[kCallback] = callback\n    this[kIterator].all(options, this[kHandleMany])\n  }\n}\n\nfor (const Iterator of [AbstractSublevelValueIterator]) {\n  Iterator.prototype._next = function (callback) {\n    this[kIterator].next(callback)\n  }\n\n  Iterator.prototype._nextv = function (size, options, callback) {\n    this[kIterator].nextv(size, options, callback)\n  }\n\n  Iterator.prototype._all = function (options, callback) {\n    this[kIterator].all(options, callback)\n  }\n}\n\nfor (const Iterator of [AbstractSublevelIterator, AbstractSublevelKeyIterator, AbstractSublevelValueIterator]) {\n  Iterator.prototype._seek = function (target, options) {\n    this[kIterator].seek(target, options)\n  }\n\n  Iterator.prototype._close = function (callback) {\n    this[kIterator].close(callback)\n  }\n}\n\nexports.AbstractSublevelIterator = AbstractSublevelIterator\nexports.AbstractSublevelKeyIterator = AbstractSublevelKeyIterator\nexports.AbstractSublevelValueIterator = AbstractSublevelValueIterator\n","'use strict'\n\nexports.AbstractLevel = require('./abstract-level').AbstractLevel\nexports.AbstractSublevel = require('./abstract-level').AbstractSublevel\nexports.AbstractIterator = require('./abstract-iterator').AbstractIterator\nexports.AbstractKeyIterator = require('./abstract-iterator').AbstractKeyIterator\nexports.AbstractValueIterator = require('./abstract-iterator').AbstractValueIterator\nexports.AbstractChainedBatch = require('./abstract-chained-batch').AbstractChainedBatch\n","/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nmodule.exports = runParallelLimit\n\nconst queueMicrotask = require('queue-microtask')\n\nfunction runParallelLimit (tasks, limit, cb) {\n  if (typeof limit !== 'number') throw new Error('second argument must be a Number')\n  let results, len, pending, keys, isErrored\n  let isSync = true\n  let next\n\n  if (Array.isArray(tasks)) {\n    results = []\n    pending = len = tasks.length\n  } else {\n    keys = Object.keys(tasks)\n    results = {}\n    pending = len = keys.length\n  }\n\n  function done (err) {\n    function end () {\n      if (cb) cb(err, results)\n      cb = null\n    }\n    if (isSync) queueMicrotask(end)\n    else end()\n  }\n\n  function each (i, err, result) {\n    results[i] = result\n    if (err) isErrored = true\n    if (--pending === 0 || err) {\n      done(err)\n    } else if (!isErrored && next < len) {\n      let key\n      if (keys) {\n        key = keys[next]\n        next += 1\n        tasks[key](function (err, result) { each(key, err, result) })\n      } else {\n        key = next\n        next += 1\n        tasks[key](function (err, result) { each(key, err, result) })\n      }\n    }\n  }\n\n  next = limit\n  if (!pending) {\n    // empty\n    done(null)\n  } else if (keys) {\n    // object\n    keys.some(function (key, i) {\n      tasks[key](function (err, result) { each(key, err, result) })\n      if (i === limit - 1) return true // early return\n      return false\n    })\n  } else {\n    // array\n    tasks.some(function (task, i) {\n      task(function (err, result) { each(i, err, result) })\n      if (i === limit - 1) return true // early return\n      return false\n    })\n  }\n\n  isSync = false\n}\n","'use strict'\n\nvar nextTick = require('./next-tick')\n\nexports.fromCallback = function (callback, symbol) {\n  if (callback === undefined) {\n    var promise = new Promise(function (resolve, reject) {\n      callback = function (err, res) {\n        if (err) reject(err)\n        else resolve(res)\n      }\n    })\n\n    callback[symbol !== undefined ? symbol : 'promise'] = promise\n  } else if (typeof callback !== 'function') {\n    throw new TypeError('Callback must be a function')\n  }\n\n  return callback\n}\n\nexports.fromPromise = function (promise, callback) {\n  if (callback === undefined) return promise\n\n  promise\n    .then(function (res) { nextTick(() => callback(null, res)) })\n    .catch(function (err) { nextTick(() => callback(err)) })\n}\n","module.exports = typeof queueMicrotask === 'function' ? queueMicrotask : (fn) => Promise.resolve().then(fn)\n","/* global IDBKeyRange */\n\n'use strict'\n\nmodule.exports = function createKeyRange (options) {\n  const lower = options.gte !== undefined ? options.gte : options.gt !== undefined ? options.gt : undefined\n  const upper = options.lte !== undefined ? options.lte : options.lt !== undefined ? options.lt : undefined\n  const lowerExclusive = options.gte === undefined\n  const upperExclusive = options.lte === undefined\n\n  if (lower !== undefined && upper !== undefined) {\n    return IDBKeyRange.bound(lower, upper, lowerExclusive, upperExclusive)\n  } else if (lower !== undefined) {\n    return IDBKeyRange.lowerBound(lower, lowerExclusive)\n  } else if (upper !== undefined) {\n    return IDBKeyRange.upperBound(upper, upperExclusive)\n  } else {\n    return null\n  }\n}\n","'use strict'\n\nconst textEncoder = new TextEncoder()\n\nmodule.exports = function (data) {\n  if (data instanceof Uint8Array) {\n    return data\n  } else if (data instanceof ArrayBuffer) {\n    return new Uint8Array(data)\n  } else {\n    // Non-binary data stored with an old version (level-js < 5.0.0)\n    return textEncoder.encode(data)\n  }\n}\n","'use strict'\n\nconst { AbstractIterator } = require('abstract-level')\nconst createKeyRange = require('./util/key-range')\nconst deserialize = require('./util/deserialize')\n\nconst kCache = Symbol('cache')\nconst kFinished = Symbol('finished')\nconst kOptions = Symbol('options')\nconst kCurrentOptions = Symbol('currentOptions')\nconst kPosition = Symbol('position')\nconst kLocation = Symbol('location')\nconst kFirst = Symbol('first')\nconst emptyOptions = {}\n\nclass Iterator extends AbstractIterator {\n  constructor (db, location, options) {\n    super(db, options)\n\n    this[kCache] = []\n    this[kFinished] = this.limit === 0\n    this[kOptions] = options\n    this[kCurrentOptions] = { ...options }\n    this[kPosition] = undefined\n    this[kLocation] = location\n    this[kFirst] = true\n  }\n\n  // Note: if called by _all() then size can be Infinity. This is an internal\n  // detail; by design AbstractIterator.nextv() does not support Infinity.\n  _nextv (size, options, callback) {\n    this[kFirst] = false\n\n    if (this[kFinished]) {\n      return this.nextTick(callback, null, [])\n    } else if (this[kCache].length > 0) {\n      // TODO: mixing next and nextv is not covered by test suite\n      size = Math.min(size, this[kCache].length)\n      return this.nextTick(callback, null, this[kCache].splice(0, size))\n    }\n\n    // Adjust range by what we already visited\n    if (this[kPosition] !== undefined) {\n      if (this[kOptions].reverse) {\n        this[kCurrentOptions].lt = this[kPosition]\n        this[kCurrentOptions].lte = undefined\n      } else {\n        this[kCurrentOptions].gt = this[kPosition]\n        this[kCurrentOptions].gte = undefined\n      }\n    }\n\n    let keyRange\n\n    try {\n      keyRange = createKeyRange(this[kCurrentOptions])\n    } catch (_) {\n      // The lower key is greater than the upper key.\n      // IndexedDB throws an error, but we'll just return 0 results.\n      this[kFinished] = true\n      return this.nextTick(callback, null, [])\n    }\n\n    const transaction = this.db.db.transaction([this[kLocation]], 'readonly')\n    const store = transaction.objectStore(this[kLocation])\n    const entries = []\n\n    if (!this[kOptions].reverse) {\n      let keys\n      let values\n\n      const complete = () => {\n        // Wait for both requests to complete\n        if (keys === undefined || values === undefined) return\n\n        const length = Math.max(keys.length, values.length)\n\n        if (length === 0 || size === Infinity) {\n          this[kFinished] = true\n        } else {\n          this[kPosition] = keys[length - 1]\n        }\n\n        // Resize\n        entries.length = length\n\n        // Merge keys and values\n        for (let i = 0; i < length; i++) {\n          const key = keys[i]\n          const value = values[i]\n\n          entries[i] = [\n            this[kOptions].keys && key !== undefined ? deserialize(key) : undefined,\n            this[kOptions].values && value !== undefined ? deserialize(value) : undefined\n          ]\n        }\n\n        maybeCommit(transaction)\n      }\n\n      // If keys were not requested and size is Infinity, we don't have to keep\n      // track of position and can thus skip getting keys.\n      if (this[kOptions].keys || size < Infinity) {\n        store.getAllKeys(keyRange, size < Infinity ? size : undefined).onsuccess = (ev) => {\n          keys = ev.target.result\n          complete()\n        }\n      } else {\n        keys = []\n        this.nextTick(complete)\n      }\n\n      if (this[kOptions].values) {\n        store.getAll(keyRange, size < Infinity ? size : undefined).onsuccess = (ev) => {\n          values = ev.target.result\n          complete()\n        }\n      } else {\n        values = []\n        this.nextTick(complete)\n      }\n    } else {\n      // Can't use getAll() in reverse, so use a slower cursor that yields one item at a time\n      // TODO: test if all target browsers support openKeyCursor\n      const method = !this[kOptions].values && store.openKeyCursor ? 'openKeyCursor' : 'openCursor'\n\n      store[method](keyRange, 'prev').onsuccess = (ev) => {\n        const cursor = ev.target.result\n\n        if (cursor) {\n          const { key, value } = cursor\n          this[kPosition] = key\n\n          entries.push([\n            this[kOptions].keys && key !== undefined ? deserialize(key) : undefined,\n            this[kOptions].values && value !== undefined ? deserialize(value) : undefined\n          ])\n\n          if (entries.length < size) {\n            cursor.continue()\n          } else {\n            maybeCommit(transaction)\n          }\n        } else {\n          this[kFinished] = true\n        }\n      }\n    }\n\n    // If an error occurs (on the request), the transaction will abort.\n    transaction.onabort = () => {\n      callback(transaction.error || new Error('aborted by user'))\n      callback = null\n    }\n\n    transaction.oncomplete = () => {\n      callback(null, entries)\n      callback = null\n    }\n  }\n\n  _next (callback) {\n    if (this[kCache].length > 0) {\n      const [key, value] = this[kCache].shift()\n      this.nextTick(callback, null, key, value)\n    } else if (this[kFinished]) {\n      this.nextTick(callback)\n    } else {\n      let size = Math.min(100, this.limit - this.count)\n\n      if (this[kFirst]) {\n        // It's common to only want one entry initially or after a seek()\n        this[kFirst] = false\n        size = 1\n      }\n\n      this._nextv(size, emptyOptions, (err, entries) => {\n        if (err) return callback(err)\n        this[kCache] = entries\n        this._next(callback)\n      })\n    }\n  }\n\n  _all (options, callback) {\n    this[kFirst] = false\n\n    // TODO: mixing next and all is not covered by test suite\n    const cache = this[kCache].splice(0, this[kCache].length)\n    const size = this.limit - this.count - cache.length\n\n    if (size <= 0) {\n      return this.nextTick(callback, null, cache)\n    }\n\n    this._nextv(size, emptyOptions, (err, entries) => {\n      if (err) return callback(err)\n      if (cache.length > 0) entries = cache.concat(entries)\n      callback(null, entries)\n    })\n  }\n\n  _seek (target, options) {\n    this[kFirst] = true\n    this[kCache] = []\n    this[kFinished] = false\n    this[kPosition] = undefined\n\n    // TODO: not covered by test suite\n    this[kCurrentOptions] = { ...this[kOptions] }\n\n    let keyRange\n\n    try {\n      keyRange = createKeyRange(this[kOptions])\n    } catch (_) {\n      this[kFinished] = true\n      return\n    }\n\n    if (keyRange !== null && !keyRange.includes(target)) {\n      this[kFinished] = true\n    } else if (this[kOptions].reverse) {\n      this[kCurrentOptions].lte = target\n    } else {\n      this[kCurrentOptions].gte = target\n    }\n  }\n}\n\nexports.Iterator = Iterator\n\nfunction maybeCommit (transaction) {\n  // Commit (meaning close) now instead of waiting for auto-commit\n  if (typeof transaction.commit === 'function') {\n    transaction.commit()\n  }\n}\n","/* global indexedDB */\n\n'use strict'\n\nconst { AbstractLevel } = require('abstract-level')\nconst ModuleError = require('module-error')\nconst parallel = require('run-parallel-limit')\nconst { fromCallback } = require('catering')\nconst { Iterator } = require('./iterator')\nconst deserialize = require('./util/deserialize')\nconst clear = require('./util/clear')\nconst createKeyRange = require('./util/key-range')\n\n// Keep as-is for compatibility with existing level-js databases\nconst DEFAULT_PREFIX = 'level-js-'\n\nconst kIDB = Symbol('idb')\nconst kNamePrefix = Symbol('namePrefix')\nconst kLocation = Symbol('location')\nconst kVersion = Symbol('version')\nconst kStore = Symbol('store')\nconst kOnComplete = Symbol('onComplete')\nconst kPromise = Symbol('promise')\n\nclass BrowserLevel extends AbstractLevel {\n  constructor (location, options, _) {\n    // To help migrating to abstract-level\n    if (typeof options === 'function' || typeof _ === 'function') {\n      throw new ModuleError('The levelup-style callback argument has been removed', {\n        code: 'LEVEL_LEGACY'\n      })\n    }\n\n    const { prefix, version, ...forward } = options || {}\n\n    super({\n      encodings: { view: true },\n      snapshots: false,\n      createIfMissing: false,\n      errorIfExists: false,\n      seek: true\n    }, forward)\n\n    if (typeof location !== 'string') {\n      throw new Error('constructor requires a location string argument')\n    }\n\n    // TODO (next major): remove default prefix\n    this[kLocation] = location\n    this[kNamePrefix] = prefix == null ? DEFAULT_PREFIX : prefix\n    this[kVersion] = parseInt(version || 1, 10)\n    this[kIDB] = null\n  }\n\n  get location () {\n    return this[kLocation]\n  }\n\n  get namePrefix () {\n    return this[kNamePrefix]\n  }\n\n  get version () {\n    return this[kVersion]\n  }\n\n  // Exposed for backwards compat and unit tests\n  get db () {\n    return this[kIDB]\n  }\n\n  get type () {\n    return 'browser-level'\n  }\n\n  _open (options, callback) {\n    const req = indexedDB.open(this[kNamePrefix] + this[kLocation], this[kVersion])\n\n    req.onerror = function () {\n      callback(req.error || new Error('unknown error'))\n    }\n\n    req.onsuccess = () => {\n      this[kIDB] = req.result\n      callback()\n    }\n\n    req.onupgradeneeded = (ev) => {\n      const db = ev.target.result\n\n      if (!db.objectStoreNames.contains(this[kLocation])) {\n        db.createObjectStore(this[kLocation])\n      }\n    }\n  }\n\n  [kStore] (mode) {\n    const transaction = this[kIDB].transaction([this[kLocation]], mode)\n    return transaction.objectStore(this[kLocation])\n  }\n\n  [kOnComplete] (request, callback) {\n    const transaction = request.transaction\n\n    // Take advantage of the fact that a non-canceled request error aborts\n    // the transaction. I.e. no need to listen for \"request.onerror\".\n    transaction.onabort = function () {\n      callback(transaction.error || new Error('aborted by user'))\n    }\n\n    transaction.oncomplete = function () {\n      callback(null, request.result)\n    }\n  }\n\n  _get (key, options, callback) {\n    const store = this[kStore]('readonly')\n    let req\n\n    try {\n      req = store.get(key)\n    } catch (err) {\n      return this.nextTick(callback, err)\n    }\n\n    this[kOnComplete](req, function (err, value) {\n      if (err) return callback(err)\n\n      if (value === undefined) {\n        return callback(new ModuleError('Entry not found', {\n          code: 'LEVEL_NOT_FOUND'\n        }))\n      }\n\n      callback(null, deserialize(value))\n    })\n  }\n\n  _getMany (keys, options, callback) {\n    const store = this[kStore]('readonly')\n    const tasks = keys.map((key) => (next) => {\n      let request\n\n      try {\n        request = store.get(key)\n      } catch (err) {\n        return next(err)\n      }\n\n      request.onsuccess = () => {\n        const value = request.result\n        next(null, value === undefined ? value : deserialize(value))\n      }\n\n      request.onerror = (ev) => {\n        ev.stopPropagation()\n        next(request.error)\n      }\n    })\n\n    parallel(tasks, 16, callback)\n  }\n\n  _del (key, options, callback) {\n    const store = this[kStore]('readwrite')\n    let req\n\n    try {\n      req = store.delete(key)\n    } catch (err) {\n      return this.nextTick(callback, err)\n    }\n\n    this[kOnComplete](req, callback)\n  }\n\n  _put (key, value, options, callback) {\n    const store = this[kStore]('readwrite')\n    let req\n\n    try {\n      // Will throw a DataError or DataCloneError if the environment\n      // does not support serializing the key or value respectively.\n      req = store.put(value, key)\n    } catch (err) {\n      return this.nextTick(callback, err)\n    }\n\n    this[kOnComplete](req, callback)\n  }\n\n  // TODO: implement key and value iterators\n  _iterator (options) {\n    return new Iterator(this, this[kLocation], options)\n  }\n\n  _batch (operations, options, callback) {\n    const store = this[kStore]('readwrite')\n    const transaction = store.transaction\n    let index = 0\n    let error\n\n    transaction.onabort = function () {\n      callback(error || transaction.error || new Error('aborted by user'))\n    }\n\n    transaction.oncomplete = function () {\n      callback()\n    }\n\n    // Wait for a request to complete before making the next, saving CPU.\n    function loop () {\n      const op = operations[index++]\n      const key = op.key\n\n      let req\n\n      try {\n        req = op.type === 'del' ? store.delete(key) : store.put(op.value, key)\n      } catch (err) {\n        error = err\n        transaction.abort()\n        return\n      }\n\n      if (index < operations.length) {\n        req.onsuccess = loop\n      } else if (typeof transaction.commit === 'function') {\n        // Commit now instead of waiting for auto-commit\n        transaction.commit()\n      }\n    }\n\n    loop()\n  }\n\n  _clear (options, callback) {\n    let keyRange\n    let req\n\n    try {\n      keyRange = createKeyRange(options)\n    } catch (e) {\n      // The lower key is greater than the upper key.\n      // IndexedDB throws an error, but we'll just do nothing.\n      return this.nextTick(callback)\n    }\n\n    if (options.limit >= 0) {\n      // IDBObjectStore#delete(range) doesn't have such an option.\n      // Fall back to cursor-based implementation.\n      return clear(this, this[kLocation], keyRange, options, callback)\n    }\n\n    try {\n      const store = this[kStore]('readwrite')\n      req = keyRange ? store.delete(keyRange) : store.clear()\n    } catch (err) {\n      return this.nextTick(callback, err)\n    }\n\n    this[kOnComplete](req, callback)\n  }\n\n  _close (callback) {\n    this[kIDB].close()\n    this.nextTick(callback)\n  }\n}\n\nBrowserLevel.destroy = function (location, prefix, callback) {\n  if (typeof prefix === 'function') {\n    callback = prefix\n    prefix = DEFAULT_PREFIX\n  }\n\n  callback = fromCallback(callback, kPromise)\n  const request = indexedDB.deleteDatabase(prefix + location)\n\n  request.onsuccess = function () {\n    callback()\n  }\n\n  request.onerror = function (err) {\n    callback(err)\n  }\n\n  return callback[kPromise]\n}\n\nexports.BrowserLevel = BrowserLevel\n","'use strict'\n\nmodule.exports = function clear (db, location, keyRange, options, callback) {\n  if (options.limit === 0) return db.nextTick(callback)\n\n  const transaction = db.db.transaction([location], 'readwrite')\n  const store = transaction.objectStore(location)\n  let count = 0\n\n  transaction.oncomplete = function () {\n    callback()\n  }\n\n  transaction.onabort = function () {\n    callback(transaction.error || new Error('aborted by user'))\n  }\n\n  // A key cursor is faster (skips reading values) but not supported by IE\n  // TODO: we no longer support IE. Test others\n  const method = store.openKeyCursor ? 'openKeyCursor' : 'openCursor'\n  const direction = options.reverse ? 'prev' : 'next'\n\n  store[method](keyRange, direction).onsuccess = function (ev) {\n    const cursor = ev.target.result\n\n    if (cursor) {\n      // Wait for a request to complete before continuing, saving CPU.\n      store.delete(cursor.key).onsuccess = function () {\n        if (options.limit <= 0 || ++count < options.limit) {\n          cursor.continue()\n        }\n      }\n    }\n  }\n}\n","/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */\n/* Geohash encoding/decoding and associated functions   (c) Chris Veness 2014-2019 / MIT Licence  */\n/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */\n\nconst base32 = '0123456789bcdefghjkmnpqrstuvwxyz'; // (geohash-specific) Base32 map\n\n\n/**\n * Geohash: Gustavo Niemeyers geocoding system.\n */\nclass Geohash {\n\n    /**\n     * Encodes latitude/longitude to geohash, either to specified precision or to automatically\n     * evaluated precision.\n     *\n     * @param   {number} lat - Latitude in degrees.\n     * @param   {number} lon - Longitude in degrees.\n     * @param   {number} [precision] - Number of characters in resulting geohash.\n     * @returns {string} Geohash of supplied latitude/longitude.\n     * @throws  Invalid geohash.\n     *\n     * @example\n     *     const geohash = Geohash.encode(52.205, 0.119, 7); // => 'u120fxw'\n     */\n    static encode(lat, lon, precision) {\n        // infer precision?\n        if (typeof precision == 'undefined') {\n            // refine geohash until it matches precision of supplied lat/lon\n            for (let p=1; p<=12; p++) {\n                const hash = Geohash.encode(lat, lon, p);\n                const posn = Geohash.decode(hash);\n                if (posn.lat==lat && posn.lon==lon) return hash;\n            }\n            precision = 12; // set to maximum\n        }\n\n        lat = Number(lat);\n        lon = Number(lon);\n        precision = Number(precision);\n\n        if (isNaN(lat) || isNaN(lon) || isNaN(precision)) throw new Error('Invalid geohash');\n\n        let idx = 0; // index into base32 map\n        let bit = 0; // each char holds 5 bits\n        let evenBit = true;\n        let geohash = '';\n\n        let latMin =  -90, latMax =  90;\n        let lonMin = -180, lonMax = 180;\n\n        while (geohash.length < precision) {\n            if (evenBit) {\n                // bisect E-W longitude\n                const lonMid = (lonMin + lonMax) / 2;\n                if (lon >= lonMid) {\n                    idx = idx*2 + 1;\n                    lonMin = lonMid;\n                } else {\n                    idx = idx*2;\n                    lonMax = lonMid;\n                }\n            } else {\n                // bisect N-S latitude\n                const latMid = (latMin + latMax) / 2;\n                if (lat >= latMid) {\n                    idx = idx*2 + 1;\n                    latMin = latMid;\n                } else {\n                    idx = idx*2;\n                    latMax = latMid;\n                }\n            }\n            evenBit = !evenBit;\n\n            if (++bit == 5) {\n                // 5 bits gives us a character: append it and start over\n                geohash += base32.charAt(idx);\n                bit = 0;\n                idx = 0;\n            }\n        }\n\n        return geohash;\n    }\n\n\n    /**\n     * Decode geohash to latitude/longitude (location is approximate centre of geohash cell,\n     *     to reasonable precision).\n     *\n     * @param   {string} geohash - Geohash string to be converted to latitude/longitude.\n     * @returns {{lat:number, lon:number}} (Center of) geohashed location.\n     * @throws  Invalid geohash.\n     *\n     * @example\n     *     const latlon = Geohash.decode('u120fxw'); // => { lat: 52.205, lon: 0.1188 }\n     */\n    static decode(geohash) {\n\n        const bounds = Geohash.bounds(geohash); // <-- the hard work\n        // now just determine the centre of the cell...\n\n        const latMin = bounds.sw.lat, lonMin = bounds.sw.lon;\n        const latMax = bounds.ne.lat, lonMax = bounds.ne.lon;\n\n        // cell centre\n        let lat = (latMin + latMax)/2;\n        let lon = (lonMin + lonMax)/2;\n\n        // round to close to centre without excessive precision: 2-log10() decimal places\n        lat = lat.toFixed(Math.floor(2-Math.log(latMax-latMin)/Math.LN10));\n        lon = lon.toFixed(Math.floor(2-Math.log(lonMax-lonMin)/Math.LN10));\n\n        return { lat: Number(lat), lon: Number(lon) };\n    }\n\n\n    /**\n     * Returns SW/NE latitude/longitude bounds of specified geohash.\n     *\n     * @param   {string} geohash - Cell that bounds are required of.\n     * @returns {{sw: {lat: number, lon: number}, ne: {lat: number, lon: number}}}\n     * @throws  Invalid geohash.\n     */\n    static bounds(geohash) {\n        if (geohash.length == 0) throw new Error('Invalid geohash');\n\n        geohash = geohash.toLowerCase();\n\n        let evenBit = true;\n        let latMin =  -90, latMax =  90;\n        let lonMin = -180, lonMax = 180;\n\n        for (let i=0; i<geohash.length; i++) {\n            const chr = geohash.charAt(i);\n            const idx = base32.indexOf(chr);\n            if (idx == -1) throw new Error('Invalid geohash');\n\n            for (let n=4; n>=0; n--) {\n                const bitN = idx >> n & 1;\n                if (evenBit) {\n                    // longitude\n                    const lonMid = (lonMin+lonMax) / 2;\n                    if (bitN == 1) {\n                        lonMin = lonMid;\n                    } else {\n                        lonMax = lonMid;\n                    }\n                } else {\n                    // latitude\n                    const latMid = (latMin+latMax) / 2;\n                    if (bitN == 1) {\n                        latMin = latMid;\n                    } else {\n                        latMax = latMid;\n                    }\n                }\n                evenBit = !evenBit;\n            }\n        }\n\n        const bounds = {\n            sw: { lat: latMin, lon: lonMin },\n            ne: { lat: latMax, lon: lonMax },\n        };\n\n        return bounds;\n    }\n\n\n    /**\n     * Determines adjacent cell in given direction.\n     *\n     * @param   geohash - Cell to which adjacent cell is required.\n     * @param   direction - Direction from geohash (N/S/E/W).\n     * @returns {string} Geocode of adjacent cell.\n     * @throws  Invalid geohash.\n     */\n    static adjacent(geohash, direction) {\n        // based on github.com/davetroy/geohash-js\n\n        geohash = geohash.toLowerCase();\n        direction = direction.toLowerCase();\n\n        if (geohash.length == 0) throw new Error('Invalid geohash');\n        if ('nsew'.indexOf(direction) == -1) throw new Error('Invalid direction');\n\n        const neighbour = {\n            n: [ 'p0r21436x8zb9dcf5h7kjnmqesgutwvy', 'bc01fg45238967deuvhjyznpkmstqrwx' ],\n            s: [ '14365h7k9dcfesgujnmqp0r2twvyx8zb', '238967debc01fg45kmstqrwxuvhjyznp' ],\n            e: [ 'bc01fg45238967deuvhjyznpkmstqrwx', 'p0r21436x8zb9dcf5h7kjnmqesgutwvy' ],\n            w: [ '238967debc01fg45kmstqrwxuvhjyznp', '14365h7k9dcfesgujnmqp0r2twvyx8zb' ],\n        };\n        const border = {\n            n: [ 'prxz',     'bcfguvyz' ],\n            s: [ '028b',     '0145hjnp' ],\n            e: [ 'bcfguvyz', 'prxz'     ],\n            w: [ '0145hjnp', '028b'     ],\n        };\n\n        const lastCh = geohash.slice(-1);    // last character of hash\n        let parent = geohash.slice(0, -1); // hash without last character\n\n        const type = geohash.length % 2;\n\n        // check for edge-cases which don't share common prefix\n        if (border[direction][type].indexOf(lastCh) != -1 && parent != '') {\n            parent = Geohash.adjacent(parent, direction);\n        }\n\n        // append letter for direction to parent\n        return parent + base32.charAt(neighbour[direction][type].indexOf(lastCh));\n    }\n\n\n    /**\n     * Returns all 8 adjacent cells to specified geohash.\n     *\n     * @param   {string} geohash - Geohash neighbours are required of.\n     * @returns {{n,ne,e,se,s,sw,w,nw: string}}\n     * @throws  Invalid geohash.\n     */\n    static neighbours(geohash) {\n        return {\n            'n':  Geohash.adjacent(geohash, 'n'),\n            'ne': Geohash.adjacent(Geohash.adjacent(geohash, 'n'), 'e'),\n            'e':  Geohash.adjacent(geohash, 'e'),\n            'se': Geohash.adjacent(Geohash.adjacent(geohash, 's'), 'e'),\n            's':  Geohash.adjacent(geohash, 's'),\n            'sw': Geohash.adjacent(Geohash.adjacent(geohash, 's'), 'w'),\n            'w':  Geohash.adjacent(geohash, 'w'),\n            'nw': Geohash.adjacent(Geohash.adjacent(geohash, 'n'), 'w'),\n        };\n    }\n\n}\n\n/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */\n\nexport default Geohash;\n","/* eslint-disable camelcase */\n\nfunction sodium_malloc (n) {\n  return new Uint8Array(n)\n}\n\nfunction sodium_free (n) {\n  sodium_memzero(n)\n  loadSink().port1.postMessage(n.buffer, [n.buffer])\n}\n\nfunction sodium_memzero (arr) {\n  arr.fill(0)\n}\n\nvar sink\n\nfunction loadSink () {\n  if (sink) return sink\n  var MessageChannel = globalThis.MessageChannel\n  if (MessageChannel == null) ({ MessageChannel } = require('worker' + '_threads'))\n  sink = new MessageChannel()\n  return sink\n}\n\nmodule.exports = {\n  sodium_malloc,\n  sodium_free,\n  sodium_memzero\n}\n","module.exports = assert\n\nclass AssertionError extends Error {}\nAssertionError.prototype.name = 'AssertionError'\n\n/**\n * Minimal assert function\n * @param  {any} t Value to check if falsy\n * @param  {string=} m Optional assertion error message\n * @throws {AssertionError}\n */\nfunction assert (t, m) {\n  if (!t) {\n    var err = new AssertionError(m)\n    if (Error.captureStackTrace) Error.captureStackTrace(err, assert)\n    throw err\n  }\n}\n","var assert = require('nanoassert')\n\nvar randombytes = (function () {\n  var QUOTA = 65536 // limit for QuotaExceededException\n  var crypto = globalThis.crypto || globalThis.msCrypto\n\n  function browserBytes (out, n) {\n    for (let i = 0; i < n; i += QUOTA) {\n      crypto.getRandomValues(new Uint8Array(out.buffer, i + out.byteOffset, Math.min(n - i, QUOTA)))\n    }\n  }\n\n  function nodeBytes (out, n) {\n    new Uint8Array(out.buffer, out.byteOffset, n).set(crypto.randomBytes(n))\n  }\n\n  function noImpl () {\n    throw new Error('No secure random number generator available')\n  }\n\n  if (crypto && crypto.getRandomValues) return browserBytes\n\n  if (require != null) {\n    // Node.js. Bust Browserify\n    crypto = require('cry' + 'pto')\n    if (crypto && crypto.randomBytes) return nodeBytes\n  }\n\n  return noImpl\n})()\n\n// Make non enumerable as this is an internal function\nObject.defineProperty(module.exports, 'randombytes', {\n  value: randombytes\n})\n\nmodule.exports.randombytes_buf = function (out) {\n  assert(out, 'out must be given')\n  randombytes(out, out.byteLength)\n}\n","/* eslint-disable camelcase */\nmodule.exports = {\n  crypto_verify_16,\n  crypto_verify_32,\n  crypto_verify_64\n}\n\nfunction vn (x, xi, y, yi, n) {\n  var d = 0\n  for (let i = 0; i < n; i++) d |= x[xi + i] ^ y[yi + i]\n  return (1 & ((d - 1) >>> 8)) - 1\n}\n\n// Make non enumerable as this is an internal function\nObject.defineProperty(module.exports, 'vn', {\n  value: vn\n})\n\nfunction crypto_verify_16 (x, xi, y, yi) {\n  return vn(x, xi, y, yi, 16) === 0\n}\n\nfunction crypto_verify_32 (x, xi, y, yi) {\n  return vn(x, xi, y, yi, 32) === 0\n}\n\nfunction crypto_verify_64 (x, xi, y, yi) {\n  return vn(x, xi, y, yi, 64) === 0\n}\n","/* eslint-disable camelcase */\nconst assert = require('nanoassert')\nconst { vn } = require('./crypto_verify')\n\nfunction sodium_increment (n) {\n  const nlen = n.byteLength\n  var c = 1\n  for (var i = 0; i < nlen; i++) {\n    c += n[i]\n    n[i] = c\n    c >>= 8\n  }\n}\n\nfunction sodium_memcmp (a, b) {\n  assert(a.byteLength === b.byteLength, 'buffers must be the same size')\n\n  return vn(a, 0, b, 0, a.byteLength) === 0\n}\n\nfunction sodium_is_zero (arr) {\n  var d = 0\n  for (let i = 0; i < arr.length; i++) d |= arr[i]\n  return d === 0\n}\n\nmodule.exports = {\n  sodium_increment,\n  sodium_memcmp,\n  sodium_is_zero\n}\n","function byteLength (string) {\n  return string.length\n}\n\nfunction toString (buffer) {\n  const len = buffer.byteLength\n\n  let result = ''\n\n  for (let i = 0; i < len; i++) {\n    result += String.fromCharCode(buffer[i])\n  }\n\n  return result\n}\n\nfunction write (buffer, string, offset = 0, length = byteLength(string)) {\n  const len = Math.min(length, buffer.byteLength - offset)\n\n  for (let i = 0; i < len; i++) {\n    buffer[offset + i] = string.charCodeAt(i)\n  }\n\n  return len\n}\n\nmodule.exports = {\n  byteLength,\n  toString,\n  write\n}\n","const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\n\nconst codes = new Uint8Array(256)\n\nfor (let i = 0; i < alphabet.length; i++) {\n  codes[alphabet.charCodeAt(i)] = i\n}\n\ncodes[/* - */ 0x2d] = 62\ncodes[/* _ */ 0x5f] = 63\n\nfunction byteLength (string) {\n  let len = string.length\n\n  if (string.charCodeAt(len - 1) === 0x3d) len--\n  if (len > 1 && string.charCodeAt(len - 1) === 0x3d) len--\n\n  return (len * 3) >>> 2\n}\n\nfunction toString (buffer) {\n  const len = buffer.byteLength\n\n  let result = ''\n\n  for (let i = 0; i < len; i += 3) {\n    result += (\n      alphabet[buffer[i] >> 2] +\n      alphabet[((buffer[i] & 3) << 4) | (buffer[i + 1] >> 4)] +\n      alphabet[((buffer[i + 1] & 15) << 2) | (buffer[i + 2] >> 6)] +\n      alphabet[buffer[i + 2] & 63]\n    )\n  }\n\n  if (len % 3 === 2) {\n    result = result.substring(0, result.length - 1) + '='\n  } else if (len % 3 === 1) {\n    result = result.substring(0, result.length - 2) + '=='\n  }\n\n  return result\n};\n\nfunction write (buffer, string, offset = 0, length = byteLength(string)) {\n  const len = Math.min(length, buffer.byteLength - offset)\n\n  for (let i = 0, j = 0; i < len; i += 4) {\n    const a = codes[string.charCodeAt(i)]\n    const b = codes[string.charCodeAt(i + 1)]\n    const c = codes[string.charCodeAt(i + 2)]\n    const d = codes[string.charCodeAt(i + 3)]\n\n    buffer[j++] = (a << 2) | (b >> 4)\n    buffer[j++] = ((b & 15) << 4) | (c >> 2)\n    buffer[j++] = ((c & 3) << 6) | (d & 63)\n  }\n\n  return len\n};\n\nmodule.exports = {\n  byteLength,\n  toString,\n  write\n}\n","function byteLength (string) {\n  return string.length >>> 1\n}\n\nfunction toString (buffer) {\n  const len = buffer.byteLength\n\n  buffer = new DataView(buffer.buffer, buffer.byteOffset, len)\n\n  let result = ''\n  let i = 0\n\n  for (let n = len - (len % 4); i < n; i += 4) {\n    result += buffer.getUint32(i).toString(16).padStart(8, '0')\n  }\n\n  for (; i < len; i++) {\n    result += buffer.getUint8(i).toString(16).padStart(2, '0')\n  }\n\n  return result\n}\n\nfunction write (buffer, string, offset = 0, length = byteLength(string)) {\n  const len = Math.min(length, buffer.byteLength - offset)\n\n  for (let i = 0; i < len; i++) {\n    const a = hexValue(string.charCodeAt(i * 2))\n    const b = hexValue(string.charCodeAt(i * 2 + 1))\n\n    if (a === undefined || b === undefined) {\n      return buffer.subarray(0, i)\n    }\n\n    buffer[offset + i] = (a << 4) | b\n  }\n\n  return len\n}\n\nmodule.exports = {\n  byteLength,\n  toString,\n  write\n}\n\nfunction hexValue (char) {\n  if (char >= 0x30 && char <= 0x39) return char - 0x30\n  if (char >= 0x41 && char <= 0x46) return char - 0x41 + 10\n  if (char >= 0x61 && char <= 0x66) return char - 0x61 + 10\n}\n","function byteLength (string) {\n  let length = 0\n\n  for (let i = 0, n = string.length; i < n; i++) {\n    const code = string.charCodeAt(i)\n\n    if (code >= 0xd800 && code <= 0xdbff && i + 1 < n) {\n      const code = string.charCodeAt(i + 1)\n\n      if (code >= 0xdc00 && code <= 0xdfff) {\n        length += 4\n        i++\n        continue\n      }\n    }\n\n    if (code <= 0x7f) length += 1\n    else if (code <= 0x7ff) length += 2\n    else length += 3\n  }\n\n  return length\n}\n\nlet toString\n\nif (typeof TextDecoder !== 'undefined') {\n  const decoder = new TextDecoder()\n\n  toString = function toString (buffer) {\n    return decoder.decode(buffer)\n  }\n} else {\n  toString = function toString (buffer) {\n    const len = buffer.byteLength\n\n    let output = ''\n    let i = 0\n\n    while (i < len) {\n      let byte = buffer[i]\n\n      if (byte <= 0x7f) {\n        output += String.fromCharCode(byte)\n        i++\n        continue\n      }\n\n      let bytesNeeded = 0\n      let codePoint = 0\n\n      if (byte <= 0xdf) {\n        bytesNeeded = 1\n        codePoint = byte & 0x1f\n      } else if (byte <= 0xef) {\n        bytesNeeded = 2\n        codePoint = byte & 0x0f\n      } else if (byte <= 0xf4) {\n        bytesNeeded = 3\n        codePoint = byte & 0x07\n      }\n\n      if (len - i - bytesNeeded > 0) {\n        let k = 0\n\n        while (k < bytesNeeded) {\n          byte = buffer[i + k + 1]\n          codePoint = (codePoint << 6) | (byte & 0x3f)\n          k += 1\n        }\n      } else {\n        codePoint = 0xfffd\n        bytesNeeded = len - i\n      }\n\n      output += String.fromCodePoint(codePoint)\n      i += bytesNeeded + 1\n    }\n\n    return output\n  }\n}\n\nlet write\n\nif (typeof TextEncoder !== 'undefined') {\n  const encoder = new TextEncoder()\n\n  write = function write (buffer, string, offset = 0, length = byteLength(string)) {\n    const len = Math.min(length, buffer.byteLength - offset)\n    encoder.encodeInto(string, buffer.subarray(offset, offset + len))\n    return len\n  }\n} else {\n  write = function write (buffer, string, offset = 0, length = byteLength(string)) {\n    const len = Math.min(length, buffer.byteLength - offset)\n\n    buffer = buffer.subarray(offset, offset + len)\n\n    let i = 0\n    let j = 0\n\n    while (i < string.length) {\n      const code = string.codePointAt(i)\n\n      if (code <= 0x7f) {\n        buffer[j++] = code\n        i++\n        continue\n      }\n\n      let count = 0\n      let bits = 0\n\n      if (code <= 0x7ff) {\n        count = 6\n        bits = 0xc0\n      } else if (code <= 0xffff) {\n        count = 12\n        bits = 0xe0\n      } else if (code <= 0x1fffff) {\n        count = 18\n        bits = 0xf0\n      }\n\n      buffer[j++] = bits | (code >> count)\n      count -= 6\n\n      while (count >= 0) {\n        buffer[j++] = 0x80 | ((code >> count) & 0x3f)\n        count -= 6\n      }\n\n      i += code >= 0x10000 ? 2 : 1\n    }\n\n    return len\n  }\n}\n\nmodule.exports = {\n  byteLength,\n  toString,\n  write\n}\n","function byteLength (string) {\n  return string.length * 2\n}\n\nfunction toString (buffer) {\n  const len = buffer.byteLength\n\n  let result = ''\n\n  for (let i = 0; i < len - 1; i += 2) {\n    result += String.fromCharCode(buffer[i] + (buffer[i + 1] * 256))\n  }\n\n  return result\n}\n\nfunction write (buffer, string, offset = 0, length = byteLength(string)) {\n  const len = Math.min(length, buffer.byteLength - offset)\n\n  let units = len\n\n  for (let i = 0; i < string.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    const c = string.charCodeAt(i)\n    const hi = c >> 8\n    const lo = c % 256\n\n    buffer[offset + i * 2] = lo\n    buffer[offset + i * 2 + 1] = hi\n  }\n\n  return len\n}\n\nmodule.exports = {\n  byteLength,\n  toString,\n  write\n}\n","const ascii = require('./lib/ascii')\nconst base64 = require('./lib/base64')\nconst hex = require('./lib/hex')\nconst utf8 = require('./lib/utf8')\nconst utf16le = require('./lib/utf16le')\n\nfunction codecFor (encoding) {\n  switch (encoding) {\n    case 'ascii':\n      return ascii\n    case 'base64':\n      return base64\n    case 'hex':\n      return hex\n    case 'utf8':\n    case 'utf-8':\n    case undefined:\n      return utf8\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return utf16le\n    default:\n      throw new Error(`Unknown encoding: ${encoding}`)\n  }\n}\n\nfunction isBuffer (value) {\n  return value instanceof Uint8Array\n}\n\nfunction alloc (size, fill, encoding) {\n  const buffer = new Uint8Array(size)\n  if (fill !== undefined) fill(buffer, fill, 0, buffer.byteLength, encoding)\n  return buffer\n}\n\nfunction allocUnsafe (size) {\n  return new Uint8Array(size)\n}\n\nfunction allocUnsafeSlow (size) {\n  return new Uint8Array(size)\n}\n\nfunction byteLength (string, encoding) {\n  return codecFor(encoding).byteLength(string)\n}\n\nfunction compare (a, b) {\n  if (a === b) return 0\n\n  const len = Math.min(a.byteLength, b.byteLength)\n\n  a = new DataView(a.buffer, a.byteOffset, a.byteLength)\n  b = new DataView(b.buffer, b.byteOffset, b.byteLength)\n\n  let i = 0\n\n  for (let n = len - (len % 4); i < n; i += 4) {\n    const x = a.getUint32(i)\n    const y = b.getUint32(i)\n    if (x < y) return -1\n    if (x > y) return 1\n  }\n\n  for (; i < len; i++) {\n    const x = a.getUint8(i)\n    const y = b.getUint8(i)\n    if (x < y) return -1\n    if (x > y) return 1\n  }\n\n  return a.byteLength > b.byteLength ? 1 : a.byteLength < b.byteLength ? -1 : 0\n}\n\nfunction concat (buffers, totalLength) {\n  if (totalLength === undefined) {\n    totalLength = buffers.reduce((len, buffer) => len + buffer.byteLength, 0)\n  }\n\n  const result = new Uint8Array(totalLength)\n\n  buffers.reduce(\n    (offset, buffer) => {\n      result.set(buffer, offset)\n      return offset + buffer.byteLength\n    },\n    0\n  )\n\n  return result\n}\n\nfunction copy (source, target, targetStart = 0, start = 0, end = source.byteLength) {\n  if (end > 0 && end < start) return 0\n  if (end === start) return 0\n  if (source.byteLength === 0 || target.byteLength === 0) return 0\n\n  if (targetStart < 0) throw new RangeError('targetStart is out of range')\n  if (start < 0 || start >= source.byteLength) throw new RangeError('sourceStart is out of range')\n  if (end < 0) throw new RangeError('sourceEnd is out of range')\n\n  if (targetStart >= target.byteLength) targetStart = target.byteLength\n  if (end > source.byteLength) end = source.byteLength\n  if (target.byteLength - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  const len = end - start\n\n  if (source === target) {\n    target.copyWithin(targetStart, start, end)\n  } else {\n    target.set(source.subarray(start, end), targetStart)\n  }\n\n  return len\n}\n\nfunction equals (a, b) {\n  if (a === b) return true\n  if (a.byteLength !== b.byteLength) return false\n\n  const len = a.byteLength\n\n  a = new DataView(a.buffer, a.byteOffset, a.byteLength)\n  b = new DataView(b.buffer, b.byteOffset, b.byteLength)\n\n  let i = 0\n\n  for (let n = len - (len % 4); i < n; i += 4) {\n    if (a.getUint32(i) !== b.getUint32(i)) return false\n  }\n\n  for (; i < len; i++) {\n    if (a.getUint8(i) !== b.getUint8(i)) return false\n  }\n\n  return true\n}\n\nfunction fill (buffer, value, offset, end, encoding) {\n  if (typeof value === 'string') {\n    // fill(buffer, string, encoding)\n    if (typeof offset === 'string') {\n      encoding = offset\n      offset = 0\n      end = buffer.byteLength\n\n    // fill(buffer, string, offset, encoding)\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = buffer.byteLength\n    }\n  } else if (typeof val === 'number') {\n    value = value & 255\n  } else if (typeof val === 'boolean') {\n    value = +value\n  }\n\n  if (offset < 0 || buffer.byteLength < offset || buffer.byteLength < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (offset === undefined) offset = 0\n  if (end === undefined) end = buffer.byteLength\n\n  if (end <= offset) return buffer\n\n  if (!value) value = 0\n\n  if (typeof value === 'number') {\n    for (let i = offset; i < end; ++i) {\n      buffer[i] = value\n    }\n  } else {\n    value = isBuffer(value) ? value : from(value, encoding)\n\n    const len = value.byteLength\n\n    for (let i = 0; i < end - offset; ++i) {\n      buffer[i + offset] = value[i % len]\n    }\n  }\n\n  return buffer\n}\n\nfunction from (value, encodingOrOffset, length) {\n  // from(string, encoding)\n  if (typeof value === 'string') return fromString(value, encodingOrOffset)\n\n  // from(array)\n  if (Array.isArray(value)) return fromArray(value)\n\n  // from(buffer)\n  if (ArrayBuffer.isView(value)) return fromBuffer(value)\n\n  // from(arrayBuffer[, byteOffset[, length]])\n  return fromArrayBuffer(value, encodingOrOffset, length)\n}\n\nfunction fromString (string, encoding) {\n  const codec = codecFor(encoding)\n  const buffer = new Uint8Array(codec.byteLength(string))\n  codec.write(buffer, string, 0, buffer.byteLength)\n  return buffer\n}\n\nfunction fromArray (array) {\n  const buffer = new Uint8Array(array.length)\n  buffer.set(array)\n  return buffer\n}\n\nfunction fromBuffer (buffer) {\n  const copy = new Uint8Array(buffer.byteLength)\n  copy.set(buffer)\n  return copy\n}\n\nfunction fromArrayBuffer (arrayBuffer, byteOffset, length) {\n  return new Uint8Array(arrayBuffer, byteOffset, length)\n}\n\nfunction swap (buffer, n, m) {\n  const i = buffer[n]\n  buffer[n] = buffer[m]\n  buffer[m] = i\n}\n\nfunction swap16 (buffer) {\n  const len = buffer.byteLength\n\n  if (len % 2 !== 0) throw new RangeError('Buffer size must be a multiple of 16-bits')\n\n  for (let i = 0; i < len; i += 2) swap(buffer, i, i + 1)\n\n  return buffer\n}\n\nfunction swap32 (buffer) {\n  const len = buffer.byteLength\n\n  if (len % 4 !== 0) throw new RangeError('Buffer size must be a multiple of 32-bits')\n\n  for (let i = 0; i < len; i += 4) {\n    swap(buffer, i, i + 3)\n    swap(buffer, i + 1, i + 2)\n  }\n\n  return buffer\n}\n\nfunction swap64 (buffer) {\n  const len = buffer.byteLength\n\n  if (len % 8 !== 0) throw new RangeError('Buffer size must be a multiple of 64-bits')\n\n  for (let i = 0; i < len; i += 8) {\n    swap(buffer, i, i + 7)\n    swap(buffer, i + 1, i + 6)\n    swap(buffer, i + 2, i + 5)\n    swap(buffer, i + 3, i + 4)\n  }\n\n  return buffer\n}\n\nfunction toBuffer (buffer) {\n  return buffer\n}\n\nfunction toString (buffer, encoding, start = 0, end = buffer.byteLength) {\n  const len = buffer.byteLength\n\n  if (start >= len) return ''\n  if (end <= start) return ''\n  if (start < 0) start = 0\n  if (end > len) end = len\n\n  if (start !== 0 || end < len) buffer = buffer.subarray(start, end)\n\n  return codecFor(encoding).toString(buffer)\n}\n\nfunction write (buffer, string, offset, length, encoding) {\n  // write(buffer, string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n\n  // write(buffer, string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    offset = undefined\n\n  // write(buffer, string, offset, encoding)\n  } else if (encoding === undefined && typeof length === 'string') {\n    encoding = length\n    length = undefined\n  }\n\n  return codecFor(encoding).write(buffer, string, offset, length)\n}\n\nmodule.exports = {\n  isBuffer,\n  alloc,\n  allocUnsafe,\n  allocUnsafeSlow,\n  byteLength,\n  compare,\n  concat,\n  copy,\n  equals,\n  fill,\n  from,\n  swap16,\n  swap32,\n  swap64,\n  toBuffer,\n  toString,\n  write\n}\n","const assert = require('nanoassert')\nconst b4a = require('b4a')\n\nmodule.exports = Sha512\n\nconst BLOCKSIZE = 128\n\nvar K = [\n  0x428a2f98, 0xd728ae22, 0x71374491, 0x23ef65cd,\n  0xb5c0fbcf, 0xec4d3b2f, 0xe9b5dba5, 0x8189dbbc,\n  0x3956c25b, 0xf348b538, 0x59f111f1, 0xb605d019,\n  0x923f82a4, 0xaf194f9b, 0xab1c5ed5, 0xda6d8118,\n  0xd807aa98, 0xa3030242, 0x12835b01, 0x45706fbe,\n  0x243185be, 0x4ee4b28c, 0x550c7dc3, 0xd5ffb4e2,\n  0x72be5d74, 0xf27b896f, 0x80deb1fe, 0x3b1696b1,\n  0x9bdc06a7, 0x25c71235, 0xc19bf174, 0xcf692694,\n  0xe49b69c1, 0x9ef14ad2, 0xefbe4786, 0x384f25e3,\n  0x0fc19dc6, 0x8b8cd5b5, 0x240ca1cc, 0x77ac9c65,\n  0x2de92c6f, 0x592b0275, 0x4a7484aa, 0x6ea6e483,\n  0x5cb0a9dc, 0xbd41fbd4, 0x76f988da, 0x831153b5,\n  0x983e5152, 0xee66dfab, 0xa831c66d, 0x2db43210,\n  0xb00327c8, 0x98fb213f, 0xbf597fc7, 0xbeef0ee4,\n  0xc6e00bf3, 0x3da88fc2, 0xd5a79147, 0x930aa725,\n  0x06ca6351, 0xe003826f, 0x14292967, 0x0a0e6e70,\n  0x27b70a85, 0x46d22ffc, 0x2e1b2138, 0x5c26c926,\n  0x4d2c6dfc, 0x5ac42aed, 0x53380d13, 0x9d95b3df,\n  0x650a7354, 0x8baf63de, 0x766a0abb, 0x3c77b2a8,\n  0x81c2c92e, 0x47edaee6, 0x92722c85, 0x1482353b,\n  0xa2bfe8a1, 0x4cf10364, 0xa81a664b, 0xbc423001,\n  0xc24b8b70, 0xd0f89791, 0xc76c51a3, 0x0654be30,\n  0xd192e819, 0xd6ef5218, 0xd6990624, 0x5565a910,\n  0xf40e3585, 0x5771202a, 0x106aa070, 0x32bbd1b8,\n  0x19a4c116, 0xb8d2d0c8, 0x1e376c08, 0x5141ab53,\n  0x2748774c, 0xdf8eeb99, 0x34b0bcb5, 0xe19b48a8,\n  0x391c0cb3, 0xc5c95a63, 0x4ed8aa4a, 0xe3418acb,\n  0x5b9cca4f, 0x7763e373, 0x682e6ff3, 0xd6b2b8a3,\n  0x748f82ee, 0x5defb2fc, 0x78a5636f, 0x43172f60,\n  0x84c87814, 0xa1f0ab72, 0x8cc70208, 0x1a6439ec,\n  0x90befffa, 0x23631e28, 0xa4506ceb, 0xde82bde9,\n  0xbef9a3f7, 0xb2c67915, 0xc67178f2, 0xe372532b,\n  0xca273ece, 0xea26619c, 0xd186b8c7, 0x21c0c207,\n  0xeada7dd6, 0xcde0eb1e, 0xf57d4f7f, 0xee6ed178,\n  0x06f067aa, 0x72176fba, 0x0a637dc5, 0xa2c898a6,\n  0x113f9804, 0xbef90dae, 0x1b710b35, 0x131c471b,\n  0x28db77f5, 0x23047d84, 0x32caab7b, 0x40c72493,\n  0x3c9ebe0a, 0x15c9bebc, 0x431d67c4, 0x9c100d4c,\n  0x4cc5d4be, 0xcb3e42b6, 0x597f299c, 0xfc657e2a,\n  0x5fcb6fab, 0x3ad6faec, 0x6c44198c, 0x4a475817\n]\n\nfunction Sha512 () {\n  if (!(this instanceof Sha512)) return new Sha512()\n\n  this.hh = new Int32Array(8)\n  this.hl = new Int32Array(8)\n  this.buffer = new Uint8Array(128)\n  this.finalised = false\n  this.bytesRead = 0\n  this.pos = 0\n\n  this.hh[0] = 0x6a09e667\n  this.hh[1] = 0xbb67ae85\n  this.hh[2] = 0x3c6ef372\n  this.hh[3] = 0xa54ff53a\n  this.hh[4] = 0x510e527f\n  this.hh[5] = 0x9b05688c\n  this.hh[6] = 0x1f83d9ab\n  this.hh[7] = 0x5be0cd19\n\n  this.hl[0] = 0xf3bcc908\n  this.hl[1] = 0x84caa73b\n  this.hl[2] = 0xfe94f82b\n  this.hl[3] = 0x5f1d36f1\n  this.hl[4] = 0xade682d1\n  this.hl[5] = 0x2b3e6c1f\n  this.hl[6] = 0xfb41bd6b\n  this.hl[7] = 0x137e2179\n\n  return this\n}\n\nSha512.prototype.update = function (input, enc) {\n  assert(this.finalised === false, 'Hash instance finalised')\n\n  var [inputBuf, len] = formatInput(input, enc)\n  this.bytesRead += len\n\n  const full = (len + this.pos) & -128\n\n  this.buffer.set(inputBuf.subarray(0, BLOCKSIZE - this.pos), this.pos)\n  const pos = this.pos\n  len -= BLOCKSIZE - this.pos\n\n  if (len >= 0) {\n    compress(this.hh, this.hl, this.buffer, 128)\n    this.pos = 0\n  }\n\n  if (len > 127) {\n    compress(this.hh, this.hl, inputBuf.subarray(BLOCKSIZE - pos, full - pos), full - BLOCKSIZE)\n    len %= 128\n  }\n\n  this.buffer.set(inputBuf.subarray(inputBuf.byteLength - len))\n  this.pos = this.bytesRead & 0x7f\n  this.buffer.fill(0, this.pos)\n\n  return this\n}\n\nSha512.prototype.digest = function (enc, offset = 0) {\n  assert(this.finalised === false, 'Hash instance finalised')\n  this.finalised = true\n\n  this.buffer.fill(0, this.pos)\n  this.buffer[this.pos] = 128\n\n  if (this.pos > 111) {\n    compress(this.hh, this.hl, this.buffer, 128)\n\n    this.buffer.fill(0)\n    this.pos = 0\n  }\n\n  ts64(this.buffer, 120, (this.bytesRead / 0x20000000) | 0, this.bytesRead << 3)\n  compress(this.hh, this.hl, this.buffer, 128)\n\n  if (enc instanceof Uint8Array && enc.byteLength > 63) {\n    for (let i = 0; i < 8; i++) ts64(enc, 8 * i + offset, this.hh[i], this.hl[i])\n    return enc\n  }\n\n  const resultBuf = new Uint8Array(64)\n  for (let i = 0; i < 8; i++) ts64(resultBuf, 8 * i, this.hh[i], this.hl[i])\n\n  if (typeof enc === 'string') {\n    return b4a.toString(resultBuf, enc)\n  }\n\n  return resultBuf\n}\n\nfunction ts64 (x, i, h, l) {\n  x[i] = (h >> 24) & 0xff\n  x[i + 1] = (h >> 16) & 0xff\n  x[i + 2] = (h >> 8) & 0xff\n  x[i + 3] = h & 0xff\n  x[i + 4] = (l >> 24) & 0xff\n  x[i + 5] = (l >> 16) & 0xff\n  x[i + 6] = (l >> 8) & 0xff\n  x[i + 7] = l & 0xff\n}\n\nfunction formatInput (input, enc) {\n  var result = b4a.from(input, enc)\n\n  return [result, result.byteLength]\n}\n\nfunction compress(hh, hl, m, n) {\n  var wh = new Int32Array(16), wl = new Int32Array(16),\n      bh0, bh1, bh2, bh3, bh4, bh5, bh6, bh7,\n      bl0, bl1, bl2, bl3, bl4, bl5, bl6, bl7,\n      th, tl, i, j, h, l, a, b, c, d;\n\n  var ah0 = hh[0],\n      ah1 = hh[1],\n      ah2 = hh[2],\n      ah3 = hh[3],\n      ah4 = hh[4],\n      ah5 = hh[5],\n      ah6 = hh[6],\n      ah7 = hh[7],\n\n      al0 = hl[0],\n      al1 = hl[1],\n      al2 = hl[2],\n      al3 = hl[3],\n      al4 = hl[4],\n      al5 = hl[5],\n      al6 = hl[6],\n      al7 = hl[7];\n\n  var pos = 0;\n  while (n >= 128) {\n    for (i = 0; i < 16; i++) {\n      j = 8 * i + pos;\n      wh[i] = (m[j+0] << 24) | (m[j+1] << 16) | (m[j+2] << 8) | m[j+3];\n      wl[i] = (m[j+4] << 24) | (m[j+5] << 16) | (m[j+6] << 8) | m[j+7];\n    }\n    for (i = 0; i < 80; i++) {\n      bh0 = ah0;\n      bh1 = ah1;\n      bh2 = ah2;\n      bh3 = ah3;\n      bh4 = ah4;\n      bh5 = ah5;\n      bh6 = ah6;\n      bh7 = ah7;\n\n      bl0 = al0;\n      bl1 = al1;\n      bl2 = al2;\n      bl3 = al3;\n      bl4 = al4;\n      bl5 = al5;\n      bl6 = al6;\n      bl7 = al7;\n\n      // add\n      h = ah7;\n      l = al7;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      // Sigma1\n      h = ((ah4 >>> 14) | (al4 << (32-14))) ^ ((ah4 >>> 18) | (al4 << (32-18))) ^ ((al4 >>> (41-32)) | (ah4 << (32-(41-32))));\n      l = ((al4 >>> 14) | (ah4 << (32-14))) ^ ((al4 >>> 18) | (ah4 << (32-18))) ^ ((ah4 >>> (41-32)) | (al4 << (32-(41-32))));\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // Ch\n      h = (ah4 & ah5) ^ (~ah4 & ah6);\n      l = (al4 & al5) ^ (~al4 & al6);\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // K\n      h = K[i*2];\n      l = K[i*2+1];\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // w\n      h = wh[i%16];\n      l = wl[i%16];\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      th = c & 0xffff | d << 16;\n      tl = a & 0xffff | b << 16;\n\n      // add\n      h = th;\n      l = tl;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      // Sigma0\n      h = ((ah0 >>> 28) | (al0 << (32-28))) ^ ((al0 >>> (34-32)) | (ah0 << (32-(34-32)))) ^ ((al0 >>> (39-32)) | (ah0 << (32-(39-32))));\n      l = ((al0 >>> 28) | (ah0 << (32-28))) ^ ((ah0 >>> (34-32)) | (al0 << (32-(34-32)))) ^ ((ah0 >>> (39-32)) | (al0 << (32-(39-32))));\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // Maj\n      h = (ah0 & ah1) ^ (ah0 & ah2) ^ (ah1 & ah2);\n      l = (al0 & al1) ^ (al0 & al2) ^ (al1 & al2);\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      bh7 = (c & 0xffff) | (d << 16);\n      bl7 = (a & 0xffff) | (b << 16);\n\n      // add\n      h = bh3;\n      l = bl3;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      h = th;\n      l = tl;\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      bh3 = (c & 0xffff) | (d << 16);\n      bl3 = (a & 0xffff) | (b << 16);\n\n      ah1 = bh0;\n      ah2 = bh1;\n      ah3 = bh2;\n      ah4 = bh3;\n      ah5 = bh4;\n      ah6 = bh5;\n      ah7 = bh6;\n      ah0 = bh7;\n\n      al1 = bl0;\n      al2 = bl1;\n      al3 = bl2;\n      al4 = bl3;\n      al5 = bl4;\n      al6 = bl5;\n      al7 = bl6;\n      al0 = bl7;\n\n      if (i%16 === 15) {\n        for (j = 0; j < 16; j++) {\n          // add\n          h = wh[j];\n          l = wl[j];\n\n          a = l & 0xffff; b = l >>> 16;\n          c = h & 0xffff; d = h >>> 16;\n\n          h = wh[(j+9)%16];\n          l = wl[(j+9)%16];\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          // sigma0\n          th = wh[(j+1)%16];\n          tl = wl[(j+1)%16];\n          h = ((th >>> 1) | (tl << (32-1))) ^ ((th >>> 8) | (tl << (32-8))) ^ (th >>> 7);\n          l = ((tl >>> 1) | (th << (32-1))) ^ ((tl >>> 8) | (th << (32-8))) ^ ((tl >>> 7) | (th << (32-7)));\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          // sigma1\n          th = wh[(j+14)%16];\n          tl = wl[(j+14)%16];\n          h = ((th >>> 19) | (tl << (32-19))) ^ ((tl >>> (61-32)) | (th << (32-(61-32)))) ^ (th >>> 6);\n          l = ((tl >>> 19) | (th << (32-19))) ^ ((th >>> (61-32)) | (tl << (32-(61-32)))) ^ ((tl >>> 6) | (th << (32-6)));\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          b += a >>> 16;\n          c += b >>> 16;\n          d += c >>> 16;\n\n          wh[j] = (c & 0xffff) | (d << 16);\n          wl[j] = (a & 0xffff) | (b << 16);\n        }\n      }\n    }\n\n    // add\n    h = ah0;\n    l = al0;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[0];\n    l = hl[0];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[0] = ah0 = (c & 0xffff) | (d << 16);\n    hl[0] = al0 = (a & 0xffff) | (b << 16);\n\n    h = ah1;\n    l = al1;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[1];\n    l = hl[1];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[1] = ah1 = (c & 0xffff) | (d << 16);\n    hl[1] = al1 = (a & 0xffff) | (b << 16);\n\n    h = ah2;\n    l = al2;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[2];\n    l = hl[2];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[2] = ah2 = (c & 0xffff) | (d << 16);\n    hl[2] = al2 = (a & 0xffff) | (b << 16);\n\n    h = ah3;\n    l = al3;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[3];\n    l = hl[3];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[3] = ah3 = (c & 0xffff) | (d << 16);\n    hl[3] = al3 = (a & 0xffff) | (b << 16);\n\n    h = ah4;\n    l = al4;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[4];\n    l = hl[4];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[4] = ah4 = (c & 0xffff) | (d << 16);\n    hl[4] = al4 = (a & 0xffff) | (b << 16);\n\n    h = ah5;\n    l = al5;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[5];\n    l = hl[5];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[5] = ah5 = (c & 0xffff) | (d << 16);\n    hl[5] = al5 = (a & 0xffff) | (b << 16);\n\n    h = ah6;\n    l = al6;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[6];\n    l = hl[6];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[6] = ah6 = (c & 0xffff) | (d << 16);\n    hl[6] = al6 = (a & 0xffff) | (b << 16);\n\n    h = ah7;\n    l = al7;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[7];\n    l = hl[7];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[7] = ah7 = (c & 0xffff) | (d << 16);\n    hl[7] = al7 = (a & 0xffff) | (b << 16);\n\n    pos += 128;\n    n -= 128;\n  }\n}\n\nfunction HMAC (key) {\n  if (!(this instanceof HMAC)) return new HMAC(key)\n\n  this.pad = b4a.alloc(128)\n  this.inner = Sha512()\n  this.outer = Sha512()\n\n  const keyhash = b4a.alloc(64)\n  if (key.byteLength > 128) {\n    Sha512().update(key).digest(keyhash)\n    key = keyhash\n  }\n\n  this.pad.fill(0x36)\n  for (let i = 0; i < key.byteLength; i++) {\n    this.pad[i] ^= key[i]\n  }\n  this.inner.update(this.pad)\n\n  this.pad.fill(0x5c)\n  for (let i = 0; i < key.byteLength; i++) {\n    this.pad[i] ^= key[i]\n  }\n  this.outer.update(this.pad)\n\n  this.pad.fill(0)\n  keyhash.fill(0)\n}\n\nHMAC.prototype.update = function (input, enc) {\n  this.inner.update(input, enc)\n  return this\n}\n\nHMAC.prototype.digest = function (enc, offset = 0) {\n  this.outer.update(this.inner.digest())\n  return this.outer.digest(enc, offset)\n}\n\nSha512.HMAC = HMAC\n","var __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[Object.keys(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __toBinary = /* @__PURE__ */ (() => {\n  var table = new Uint8Array(128);\n  for (var i = 0; i < 64; i++)\n    table[i < 26 ? i + 65 : i < 52 ? i + 71 : i < 62 ? i - 4 : i * 4 - 205] = i;\n  return (base64) => {\n    var n = base64.length, bytes2 = new Uint8Array((n - (base64[n - 1] == \"=\") - (base64[n - 2] == \"=\")) * 3 / 4 | 0);\n    for (var i2 = 0, j = 0; i2 < n; ) {\n      var c0 = table[base64.charCodeAt(i2++)], c1 = table[base64.charCodeAt(i2++)];\n      var c2 = table[base64.charCodeAt(i2++)], c3 = table[base64.charCodeAt(i2++)];\n      bytes2[j++] = c0 << 2 | c1 >> 4;\n      bytes2[j++] = c1 << 4 | c2 >> 2;\n      bytes2[j++] = c2 << 6 | c3;\n    }\n    return bytes2;\n  };\n})();\n\n// wasm-binary:./sha512.wat\nvar require_sha512 = __commonJS({\n  \"wasm-binary:./sha512.wat\"(exports2, module2) {\n    module2.exports = __toBinary(\"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\");\n  }\n});\n\n// wasm-module:./sha512.wat\nvar bytes = require_sha512();\nvar compiled = new WebAssembly.Module(bytes);\nmodule.exports = (imports) => {\n  const instance = new WebAssembly.Instance(compiled, imports);\n  return instance.exports;\n};\n","const assert = require('nanoassert')\nconst b4a = require('b4a')\n\nconst wasm = require('./sha512.js')({\n  imports: {\n    debug: {\n      log (...args) {\n        console.log(...args.map(int => (int >>> 0).toString(16).padStart(8, '0')))\n      },\n      log_tee (arg) {\n        console.log((arg >>> 0).toString(16).padStart(8, '0'))\n        return arg\n      }\n    }\n  }\n})\n\nlet head = 0\n// assetrt head % 8 === 0 to guarantee alignment\nconst freeList = []\n\nmodule.exports = Sha512\nconst SHA512_BYTES = module.exports.SHA512_BYTES = 64\nconst INPUT_OFFSET = 80\nconst STATEBYTES = 216\nconst BLOCKSIZE = 128\n\nfunction Sha512 () {\n  if (!(this instanceof Sha512)) return new Sha512()\n  if (!(wasm)) throw new Error('WASM not loaded. Wait for Sha512.ready(cb)')\n\n  if (!freeList.length) {\n    freeList.push(head)\n    head += STATEBYTES\n  }\n\n  this.finalized = false\n  this.digestLength = SHA512_BYTES\n  this.pointer = freeList.pop()\n  this.pos = 0\n  this.wasm = wasm\n\n  this._memory = new Uint8Array(wasm.memory.buffer)\n  this._memory.fill(0, this.pointer, this.pointer + STATEBYTES)\n\n  if (this.pointer + this.digestLength > this._memory.length) this._realloc(this.pointer + STATEBYTES)\n}\n\nSha512.prototype._realloc = function (size) {\n  wasm.memory.grow(Math.max(0, Math.ceil(Math.abs(size - this._memory.length) / 65536)))\n  this._memory = new Uint8Array(wasm.memory.buffer)\n}\n\nSha512.prototype.update = function (input, enc) {\n  assert(this.finalized === false, 'Hash instance finalized')\n\n  if (head % 8 !== 0) head += 8 - head % 8\n  assert(head % 8 === 0, 'input should be aligned for int64')\n\n  const [inputBuf, length] = formatInput(input, enc)\n\n  assert(inputBuf instanceof Uint8Array, 'input must be Uint8Array or Buffer')\n\n  if (head + input.length > this._memory.length) this._realloc(head + input.length)\n\n  this._memory.fill(0, head, head + roundUp(length, BLOCKSIZE) - BLOCKSIZE)\n  this._memory.set(inputBuf.subarray(0, BLOCKSIZE - this.pos), this.pointer + INPUT_OFFSET + this.pos)\n  this._memory.set(inputBuf.subarray(BLOCKSIZE - this.pos), head)\n\n  this.pos = (this.pos + length) & 0x7f\n  wasm.sha512(this.pointer, head, length, 0)\n\n  return this\n}\n\nSha512.prototype.digest = function (enc, offset = 0) {\n  assert(this.finalized === false, 'Hash instance finalized')\n\n  this.finalized = true\n  freeList.push(this.pointer)\n\n  const paddingStart = this.pointer + INPUT_OFFSET + this.pos\n  this._memory.fill(0, paddingStart, this.pointer + INPUT_OFFSET + BLOCKSIZE)\n  wasm.sha512(this.pointer, head, 0, 1)\n\n  const resultBuf = this._memory.subarray(this.pointer, this.pointer + this.digestLength)\n\n  if (!enc) {\n    return resultBuf\n  }\n\n  if (typeof enc === 'string') {\n    return b4a.toString(resultBuf, enc)\n  }\n\n  assert(enc instanceof Uint8Array, 'output must be Uint8Array or Buffer')\n  assert(enc.byteLength >= this.digestLength + offset,\n    \"output must have at least 'SHA512_BYTES' bytes remaining\")\n\n  for (let i = 0; i < this.digestLength; i++) {\n    enc[i + offset] = resultBuf[i]\n  }\n\n  return enc\n}\n\nSha512.WASM = wasm\nSha512.WASM_SUPPORTED = typeof WebAssembly !== 'undefined'\n\nSha512.ready = function (cb) {\n  if (!cb) cb = noop\n  if (!wasm) return cb(new Error('WebAssembly not supported'))\n  cb()\n  return Promise.resolve()\n}\n\nSha512.prototype.ready = Sha512.ready\n\nfunction HMAC (key) {\n  if (!(this instanceof HMAC)) return new HMAC(key)\n\n  this.pad = b4a.alloc(128)\n  this.inner = Sha512()\n  this.outer = Sha512()\n\n  const keyhash = b4a.alloc(64)\n  if (key.byteLength > 128) {\n    Sha512().update(key).digest(keyhash)\n    key = keyhash\n  }\n\n  this.pad.fill(0x36)\n  for (let i = 0; i < key.byteLength; i++) {\n    this.pad[i] ^= key[i]\n  }\n  this.inner.update(this.pad)\n\n  this.pad.fill(0x5c)\n  for (let i = 0; i < key.byteLength; i++) {\n    this.pad[i] ^= key[i]\n  }\n  this.outer.update(this.pad)\n\n  this.pad.fill(0)\n  keyhash.fill(0)\n}\n\nHMAC.prototype.update = function (input, enc) {\n  this.inner.update(input, enc)\n  return this\n}\n\nHMAC.prototype.digest = function (enc, offset = 0) {\n  this.outer.update(this.inner.digest())\n  return this.outer.digest(enc, offset)\n}\n\nSha512.HMAC = HMAC\n\nfunction noop () {}\n\nfunction formatInput (input, enc) {\n  var result = b4a.from(input, enc)\n\n  return [result, result.byteLength]\n}\n\n// only works for base that is power of 2\nfunction roundUp (n, base) {\n  return (n + base - 1) & -base\n}\n","const js = require('./sha512.js')\nconst wasm = require('sha512-wasm')\n\nvar Proto = js\n\nmodule.exports = function () {\n  return new Proto()\n}\n\nmodule.exports.ready = function (cb) {\n  wasm.ready(function () { // ignore errors\n    cb()\n  })\n}\n\nmodule.exports.WASM_SUPPORTED = wasm.SUPPORTED\nmodule.exports.WASM_LOADED = false\n\nvar SHA512_BYTES = module.exports.SHA512_BYTES = 64\n\nwasm.ready(function (err) {\n  if (!err) {\n    module.exports.WASM_LOADED = true\n    module.exports = Proto = wasm\n  }\n})\n","/* eslint-disable camelcase */\nconst { crypto_verify_32 } = require('./crypto_verify')\nconst Sha512 = require('sha512-universal')\nconst assert = require('nanoassert')\n\nconst crypto_auth_BYTES = 32\nconst crypto_auth_KEYBYTES = 32\n\nfunction crypto_auth (out, input, k) {\n  assert(out.byteLength === crypto_auth_BYTES, \"out should be 'crypto_auth_BYTES' in length\")\n  assert(k.byteLength === crypto_auth_KEYBYTES, \"key should be 'crypto_auth_KEYBYTES' in length\")\n\n  const out0 = new Uint8Array(64)\n  const hmac = Sha512.HMAC(k)\n  hmac.update(input)\n  hmac.digest(out0)\n\n  out.set(out0.subarray(0, 32))\n}\n\nfunction crypto_auth_verify (h, input, k) {\n  assert(h.byteLength === crypto_auth_BYTES, \"h should be 'crypto_auth_BYTES' in length\")\n  assert(k.byteLength === crypto_auth_KEYBYTES, \"key should be 'crypto_auth_KEYBYTES' in length\")\n\n  const correct = Sha512.HMAC(k).update(input).digest()\n\n  return crypto_verify_32(h, 0, correct, 0)\n}\n\nmodule.exports = {\n  crypto_auth_BYTES,\n  crypto_auth_KEYBYTES,\n  crypto_auth,\n  crypto_auth_verify\n}\n","/* eslint-disable camelcase */\nconst sha512 = require('sha512-universal')\nconst assert = require('nanoassert')\n\nif (new Uint16Array([1])[0] !== 1) throw new Error('Big endian architecture is not supported.')\n\nconst crypto_hash_sha512_BYTES = 64\nconst crypto_hash_BYTES = crypto_hash_sha512_BYTES\n\nfunction crypto_hash_sha512 (out, m, n) {\n  assert(out.byteLength === crypto_hash_sha512_BYTES, \"out must be 'crypto_hash_sha512_BYTES' bytes long\")\n\n  sha512().update(m.subarray(0, n)).digest(out)\n  return 0\n}\n\nfunction crypto_hash (out, m, n) {\n  return crypto_hash_sha512(out, m, n)\n}\n\nmodule.exports = {\n  crypto_hash,\n  crypto_hash_sha512,\n  crypto_hash_sha512_BYTES,\n  crypto_hash_BYTES\n}\n","if (new Uint16Array([1])[0] !== 1) throw new Error('Big endian architecture is not supported.')\n\nvar gf = function(init) {\n  var i, r = new Float64Array(16);\n  if (init) for (i = 0; i < init.length; i++) r[i] = init[i];\n  return r;\n}\n\nvar _0 = new Uint8Array(16);\nvar _9 = new Uint8Array(32); _9[0] = 9;\n\nvar gf0 = gf(),\n    gf1 = gf([1]),\n    _121665 = gf([0xdb41, 1]),\n    D = gf([0x78a3, 0x1359, 0x4dca, 0x75eb, 0xd8ab, 0x4141, 0x0a4d, 0x0070, 0xe898, 0x7779, 0x4079, 0x8cc7, 0xfe73, 0x2b6f, 0x6cee, 0x5203]),\n    D2 = gf([0xf159, 0x26b2, 0x9b94, 0xebd6, 0xb156, 0x8283, 0x149a, 0x00e0, 0xd130, 0xeef3, 0x80f2, 0x198e, 0xfce7, 0x56df, 0xd9dc, 0x2406]),\n    X = gf([0xd51a, 0x8f25, 0x2d60, 0xc956, 0xa7b2, 0x9525, 0xc760, 0x692c, 0xdc5c, 0xfdd6, 0xe231, 0xc0a4, 0x53fe, 0xcd6e, 0x36d3, 0x2169]),\n    Y = gf([0x6658, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666]),\n    I = gf([0xa0b0, 0x4a0e, 0x1b27, 0xc4ee, 0xe478, 0xad2f, 0x1806, 0x2f43, 0xd7a7, 0x3dfb, 0x0099, 0x2b4d, 0xdf0b, 0x4fc1, 0x2480, 0x2b83]);\n\nfunction A(o, a, b) {\n  for (var i = 0; i < 16; i++) o[i] = a[i] + b[i];\n}\n\nfunction Z(o, a, b) {\n  for (var i = 0; i < 16; i++) o[i] = a[i] - b[i];\n}\n\nfunction M(o, a, b) {\n  var v, c,\n    t0 = 0,  t1 = 0,  t2 = 0,  t3 = 0,  t4 = 0,  t5 = 0,  t6 = 0,  t7 = 0,\n    t8 = 0,  t9 = 0, t10 = 0, t11 = 0, t12 = 0, t13 = 0, t14 = 0, t15 = 0,\n    t16 = 0, t17 = 0, t18 = 0, t19 = 0, t20 = 0, t21 = 0, t22 = 0, t23 = 0,\n    t24 = 0, t25 = 0, t26 = 0, t27 = 0, t28 = 0, t29 = 0, t30 = 0,\n    b0 = b[0],\n    b1 = b[1],\n    b2 = b[2],\n    b3 = b[3],\n    b4 = b[4],\n    b5 = b[5],\n    b6 = b[6],\n    b7 = b[7],\n    b8 = b[8],\n    b9 = b[9],\n    b10 = b[10],\n    b11 = b[11],\n    b12 = b[12],\n    b13 = b[13],\n    b14 = b[14],\n    b15 = b[15];\n\n  v = a[0];\n  t0 += v * b0;\n  t1 += v * b1;\n  t2 += v * b2;\n  t3 += v * b3;\n  t4 += v * b4;\n  t5 += v * b5;\n  t6 += v * b6;\n  t7 += v * b7;\n  t8 += v * b8;\n  t9 += v * b9;\n  t10 += v * b10;\n  t11 += v * b11;\n  t12 += v * b12;\n  t13 += v * b13;\n  t14 += v * b14;\n  t15 += v * b15;\n  v = a[1];\n  t1 += v * b0;\n  t2 += v * b1;\n  t3 += v * b2;\n  t4 += v * b3;\n  t5 += v * b4;\n  t6 += v * b5;\n  t7 += v * b6;\n  t8 += v * b7;\n  t9 += v * b8;\n  t10 += v * b9;\n  t11 += v * b10;\n  t12 += v * b11;\n  t13 += v * b12;\n  t14 += v * b13;\n  t15 += v * b14;\n  t16 += v * b15;\n  v = a[2];\n  t2 += v * b0;\n  t3 += v * b1;\n  t4 += v * b2;\n  t5 += v * b3;\n  t6 += v * b4;\n  t7 += v * b5;\n  t8 += v * b6;\n  t9 += v * b7;\n  t10 += v * b8;\n  t11 += v * b9;\n  t12 += v * b10;\n  t13 += v * b11;\n  t14 += v * b12;\n  t15 += v * b13;\n  t16 += v * b14;\n  t17 += v * b15;\n  v = a[3];\n  t3 += v * b0;\n  t4 += v * b1;\n  t5 += v * b2;\n  t6 += v * b3;\n  t7 += v * b4;\n  t8 += v * b5;\n  t9 += v * b6;\n  t10 += v * b7;\n  t11 += v * b8;\n  t12 += v * b9;\n  t13 += v * b10;\n  t14 += v * b11;\n  t15 += v * b12;\n  t16 += v * b13;\n  t17 += v * b14;\n  t18 += v * b15;\n  v = a[4];\n  t4 += v * b0;\n  t5 += v * b1;\n  t6 += v * b2;\n  t7 += v * b3;\n  t8 += v * b4;\n  t9 += v * b5;\n  t10 += v * b6;\n  t11 += v * b7;\n  t12 += v * b8;\n  t13 += v * b9;\n  t14 += v * b10;\n  t15 += v * b11;\n  t16 += v * b12;\n  t17 += v * b13;\n  t18 += v * b14;\n  t19 += v * b15;\n  v = a[5];\n  t5 += v * b0;\n  t6 += v * b1;\n  t7 += v * b2;\n  t8 += v * b3;\n  t9 += v * b4;\n  t10 += v * b5;\n  t11 += v * b6;\n  t12 += v * b7;\n  t13 += v * b8;\n  t14 += v * b9;\n  t15 += v * b10;\n  t16 += v * b11;\n  t17 += v * b12;\n  t18 += v * b13;\n  t19 += v * b14;\n  t20 += v * b15;\n  v = a[6];\n  t6 += v * b0;\n  t7 += v * b1;\n  t8 += v * b2;\n  t9 += v * b3;\n  t10 += v * b4;\n  t11 += v * b5;\n  t12 += v * b6;\n  t13 += v * b7;\n  t14 += v * b8;\n  t15 += v * b9;\n  t16 += v * b10;\n  t17 += v * b11;\n  t18 += v * b12;\n  t19 += v * b13;\n  t20 += v * b14;\n  t21 += v * b15;\n  v = a[7];\n  t7 += v * b0;\n  t8 += v * b1;\n  t9 += v * b2;\n  t10 += v * b3;\n  t11 += v * b4;\n  t12 += v * b5;\n  t13 += v * b6;\n  t14 += v * b7;\n  t15 += v * b8;\n  t16 += v * b9;\n  t17 += v * b10;\n  t18 += v * b11;\n  t19 += v * b12;\n  t20 += v * b13;\n  t21 += v * b14;\n  t22 += v * b15;\n  v = a[8];\n  t8 += v * b0;\n  t9 += v * b1;\n  t10 += v * b2;\n  t11 += v * b3;\n  t12 += v * b4;\n  t13 += v * b5;\n  t14 += v * b6;\n  t15 += v * b7;\n  t16 += v * b8;\n  t17 += v * b9;\n  t18 += v * b10;\n  t19 += v * b11;\n  t20 += v * b12;\n  t21 += v * b13;\n  t22 += v * b14;\n  t23 += v * b15;\n  v = a[9];\n  t9 += v * b0;\n  t10 += v * b1;\n  t11 += v * b2;\n  t12 += v * b3;\n  t13 += v * b4;\n  t14 += v * b5;\n  t15 += v * b6;\n  t16 += v * b7;\n  t17 += v * b8;\n  t18 += v * b9;\n  t19 += v * b10;\n  t20 += v * b11;\n  t21 += v * b12;\n  t22 += v * b13;\n  t23 += v * b14;\n  t24 += v * b15;\n  v = a[10];\n  t10 += v * b0;\n  t11 += v * b1;\n  t12 += v * b2;\n  t13 += v * b3;\n  t14 += v * b4;\n  t15 += v * b5;\n  t16 += v * b6;\n  t17 += v * b7;\n  t18 += v * b8;\n  t19 += v * b9;\n  t20 += v * b10;\n  t21 += v * b11;\n  t22 += v * b12;\n  t23 += v * b13;\n  t24 += v * b14;\n  t25 += v * b15;\n  v = a[11];\n  t11 += v * b0;\n  t12 += v * b1;\n  t13 += v * b2;\n  t14 += v * b3;\n  t15 += v * b4;\n  t16 += v * b5;\n  t17 += v * b6;\n  t18 += v * b7;\n  t19 += v * b8;\n  t20 += v * b9;\n  t21 += v * b10;\n  t22 += v * b11;\n  t23 += v * b12;\n  t24 += v * b13;\n  t25 += v * b14;\n  t26 += v * b15;\n  v = a[12];\n  t12 += v * b0;\n  t13 += v * b1;\n  t14 += v * b2;\n  t15 += v * b3;\n  t16 += v * b4;\n  t17 += v * b5;\n  t18 += v * b6;\n  t19 += v * b7;\n  t20 += v * b8;\n  t21 += v * b9;\n  t22 += v * b10;\n  t23 += v * b11;\n  t24 += v * b12;\n  t25 += v * b13;\n  t26 += v * b14;\n  t27 += v * b15;\n  v = a[13];\n  t13 += v * b0;\n  t14 += v * b1;\n  t15 += v * b2;\n  t16 += v * b3;\n  t17 += v * b4;\n  t18 += v * b5;\n  t19 += v * b6;\n  t20 += v * b7;\n  t21 += v * b8;\n  t22 += v * b9;\n  t23 += v * b10;\n  t24 += v * b11;\n  t25 += v * b12;\n  t26 += v * b13;\n  t27 += v * b14;\n  t28 += v * b15;\n  v = a[14];\n  t14 += v * b0;\n  t15 += v * b1;\n  t16 += v * b2;\n  t17 += v * b3;\n  t18 += v * b4;\n  t19 += v * b5;\n  t20 += v * b6;\n  t21 += v * b7;\n  t22 += v * b8;\n  t23 += v * b9;\n  t24 += v * b10;\n  t25 += v * b11;\n  t26 += v * b12;\n  t27 += v * b13;\n  t28 += v * b14;\n  t29 += v * b15;\n  v = a[15];\n  t15 += v * b0;\n  t16 += v * b1;\n  t17 += v * b2;\n  t18 += v * b3;\n  t19 += v * b4;\n  t20 += v * b5;\n  t21 += v * b6;\n  t22 += v * b7;\n  t23 += v * b8;\n  t24 += v * b9;\n  t25 += v * b10;\n  t26 += v * b11;\n  t27 += v * b12;\n  t28 += v * b13;\n  t29 += v * b14;\n  t30 += v * b15;\n\n  t0  += 38 * t16;\n  t1  += 38 * t17;\n  t2  += 38 * t18;\n  t3  += 38 * t19;\n  t4  += 38 * t20;\n  t5  += 38 * t21;\n  t6  += 38 * t22;\n  t7  += 38 * t23;\n  t8  += 38 * t24;\n  t9  += 38 * t25;\n  t10 += 38 * t26;\n  t11 += 38 * t27;\n  t12 += 38 * t28;\n  t13 += 38 * t29;\n  t14 += 38 * t30;\n  // t15 left as is\n\n  // first car\n  c = 1;\n  v =  t0 + c + 65535; c = Math.floor(v / 65536);  t0 = v - c * 65536;\n  v =  t1 + c + 65535; c = Math.floor(v / 65536);  t1 = v - c * 65536;\n  v =  t2 + c + 65535; c = Math.floor(v / 65536);  t2 = v - c * 65536;\n  v =  t3 + c + 65535; c = Math.floor(v / 65536);  t3 = v - c * 65536;\n  v =  t4 + c + 65535; c = Math.floor(v / 65536);  t4 = v - c * 65536;\n  v =  t5 + c + 65535; c = Math.floor(v / 65536);  t5 = v - c * 65536;\n  v =  t6 + c + 65535; c = Math.floor(v / 65536);  t6 = v - c * 65536;\n  v =  t7 + c + 65535; c = Math.floor(v / 65536);  t7 = v - c * 65536;\n  v =  t8 + c + 65535; c = Math.floor(v / 65536);  t8 = v - c * 65536;\n  v =  t9 + c + 65535; c = Math.floor(v / 65536);  t9 = v - c * 65536;\n  v = t10 + c + 65535; c = Math.floor(v / 65536); t10 = v - c * 65536;\n  v = t11 + c + 65535; c = Math.floor(v / 65536); t11 = v - c * 65536;\n  v = t12 + c + 65535; c = Math.floor(v / 65536); t12 = v - c * 65536;\n  v = t13 + c + 65535; c = Math.floor(v / 65536); t13 = v - c * 65536;\n  v = t14 + c + 65535; c = Math.floor(v / 65536); t14 = v - c * 65536;\n  v = t15 + c + 65535; c = Math.floor(v / 65536); t15 = v - c * 65536;\n  t0 += c-1 + 37 * (c-1);\n\n  // second car\n  c = 1;\n  v =  t0 + c + 65535; c = Math.floor(v / 65536);  t0 = v - c * 65536;\n  v =  t1 + c + 65535; c = Math.floor(v / 65536);  t1 = v - c * 65536;\n  v =  t2 + c + 65535; c = Math.floor(v / 65536);  t2 = v - c * 65536;\n  v =  t3 + c + 65535; c = Math.floor(v / 65536);  t3 = v - c * 65536;\n  v =  t4 + c + 65535; c = Math.floor(v / 65536);  t4 = v - c * 65536;\n  v =  t5 + c + 65535; c = Math.floor(v / 65536);  t5 = v - c * 65536;\n  v =  t6 + c + 65535; c = Math.floor(v / 65536);  t6 = v - c * 65536;\n  v =  t7 + c + 65535; c = Math.floor(v / 65536);  t7 = v - c * 65536;\n  v =  t8 + c + 65535; c = Math.floor(v / 65536);  t8 = v - c * 65536;\n  v =  t9 + c + 65535; c = Math.floor(v / 65536);  t9 = v - c * 65536;\n  v = t10 + c + 65535; c = Math.floor(v / 65536); t10 = v - c * 65536;\n  v = t11 + c + 65535; c = Math.floor(v / 65536); t11 = v - c * 65536;\n  v = t12 + c + 65535; c = Math.floor(v / 65536); t12 = v - c * 65536;\n  v = t13 + c + 65535; c = Math.floor(v / 65536); t13 = v - c * 65536;\n  v = t14 + c + 65535; c = Math.floor(v / 65536); t14 = v - c * 65536;\n  v = t15 + c + 65535; c = Math.floor(v / 65536); t15 = v - c * 65536;\n  t0 += c-1 + 37 * (c-1);\n\n  o[ 0] = t0;\n  o[ 1] = t1;\n  o[ 2] = t2;\n  o[ 3] = t3;\n  o[ 4] = t4;\n  o[ 5] = t5;\n  o[ 6] = t6;\n  o[ 7] = t7;\n  o[ 8] = t8;\n  o[ 9] = t9;\n  o[10] = t10;\n  o[11] = t11;\n  o[12] = t12;\n  o[13] = t13;\n  o[14] = t14;\n  o[15] = t15;\n}\n\nfunction S(o, a) {\n  M(o, a, a);\n}\n\nfunction sel25519(p, q, b) {\n  var t, c = ~(b-1);\n  for (var i = 0; i < 16; i++) {\n    t = c & (p[i] ^ q[i]);\n    p[i] ^= t;\n    q[i] ^= t;\n  }\n}\n\nfunction pack25519(o, n) {\n  var i, j, b;\n  var m = gf(), t = gf();\n  for (i = 0; i < 16; i++) t[i] = n[i];\n  car25519(t);\n  car25519(t);\n  car25519(t);\n  for (j = 0; j < 2; j++) {\n    m[0] = t[0] - 0xffed;\n    for (i = 1; i < 15; i++) {\n      m[i] = t[i] - 0xffff - ((m[i-1]>>16) & 1);\n      m[i-1] &= 0xffff;\n    }\n    m[15] = t[15] - 0x7fff - ((m[14]>>16) & 1);\n    b = (m[15]>>16) & 1;\n    m[14] &= 0xffff;\n    sel25519(t, m, 1-b);\n  }\n  for (i = 0; i < 16; i++) {\n    o[2*i] = t[i] & 0xff;\n    o[2*i+1] = t[i]>>8;\n  }\n}\n\nfunction unpack25519(o, n) {\n  var i;\n  for (i = 0; i < 16; i++) o[i] = n[2*i] + (n[2*i+1] << 8);\n  o[15] &= 0x7fff;\n}\n\nfunction inv25519(o, i) {\n  var c = gf();\n  var a;\n  for (a = 0; a < 16; a++) c[a] = i[a];\n  for (a = 253; a >= 0; a--) {\n    S(c, c);\n    if(a !== 2 && a !== 4) M(c, c, i);\n  }\n  for (a = 0; a < 16; a++) o[a] = c[a];\n}\n\nfunction car25519(o) {\n  var i, v, c = 1;\n  for (i = 0; i < 16; i++) {\n    v = o[i] + c + 65535;\n    c = Math.floor(v / 65536);\n    o[i] = v - c * 65536;\n  }\n  o[0] += c-1 + 37 * (c-1);\n}\n\nmodule.exports = {\n  gf,\n  A,\n  Z,\n  M,\n  S,\n  sel25519,\n  pack25519,\n  unpack25519,\n  inv25519,\n  gf0,\n  gf1,\n  _9,\n  _121665,\n  D,\n  D2,\n  X,\n  Y,\n  I\n}\n","/* eslint-disable camelcase, one-var */\nconst { _9, _121665, gf, inv25519, pack25519, unpack25519, sel25519, A, M, Z, S } = require('./internal/ed25519')\n\nconst crypto_scalarmult_BYTES = 32\nconst crypto_scalarmult_SCALARBYTES = 32\n\nmodule.exports = {\n  crypto_scalarmult,\n  crypto_scalarmult_base,\n  crypto_scalarmult_BYTES,\n  crypto_scalarmult_SCALARBYTES\n}\n\nfunction crypto_scalarmult (q, n, p) {\n  check(q, crypto_scalarmult_BYTES)\n  check(n, crypto_scalarmult_SCALARBYTES)\n  check(p, crypto_scalarmult_BYTES)\n  var z = new Uint8Array(32)\n  var x = new Float64Array(80), r, i\n  var a = gf(), b = gf(), c = gf(),\n    d = gf(), e = gf(), f = gf()\n  for (i = 0; i < 31; i++) z[i] = n[i]\n  z[31] = (n[31] & 127) | 64\n  z[0] &= 248\n  unpack25519(x, p)\n  for (i = 0; i < 16; i++) {\n    b[i] = x[i]\n    d[i] = a[i] = c[i] = 0\n  }\n  a[0] = d[0] = 1\n  for (i = 254; i >= 0; --i) {\n    r = (z[i >>> 3] >>> (i & 7)) & 1\n    sel25519(a, b, r)\n    sel25519(c, d, r)\n    A(e, a, c)\n    Z(a, a, c)\n    A(c, b, d)\n    Z(b, b, d)\n    S(d, e)\n    S(f, a)\n    M(a, c, a)\n    M(c, b, e)\n    A(e, a, c)\n    Z(a, a, c)\n    S(b, a)\n    Z(c, d, f)\n    M(a, c, _121665)\n    A(a, a, d)\n    M(c, c, a)\n    M(a, d, f)\n    M(d, b, x)\n    S(b, e)\n    sel25519(a, b, r)\n    sel25519(c, d, r)\n  }\n  for (i = 0; i < 16; i++) {\n    x[i + 16] = a[i]\n    x[i + 32] = c[i]\n    x[i + 48] = b[i]\n    x[i + 64] = d[i]\n  }\n  var x32 = x.subarray(32)\n  var x16 = x.subarray(16)\n  inv25519(x32, x32)\n  M(x16, x16, x32)\n  pack25519(q, x16)\n  return 0\n}\n\nfunction crypto_scalarmult_base (q, n) {\n  return crypto_scalarmult(q, n, _9)\n}\n\nfunction check (buf, len) {\n  if (!buf || (len && buf.length < len)) throw new Error('Argument must be a buffer' + (len ? ' of length ' + len : ''))\n}\n","var assert = require('nanoassert')\nvar b4a = require('b4a')\n\nvar wasm = null\nvar wasmPromise = typeof WebAssembly !== \"undefined\" && require('./blake2b')().then(mod => {\n  wasm = mod\n})\n\nvar head = 64\nvar freeList = []\n\nmodule.exports = Blake2b\nvar BYTES_MIN = module.exports.BYTES_MIN = 16\nvar BYTES_MAX = module.exports.BYTES_MAX = 64\nvar BYTES = module.exports.BYTES = 32\nvar KEYBYTES_MIN = module.exports.KEYBYTES_MIN = 16\nvar KEYBYTES_MAX = module.exports.KEYBYTES_MAX = 64\nvar KEYBYTES = module.exports.KEYBYTES = 32\nvar SALTBYTES = module.exports.SALTBYTES = 16\nvar PERSONALBYTES = module.exports.PERSONALBYTES = 16\n\nfunction Blake2b (digestLength, key, salt, personal, noAssert) {\n  if (!(this instanceof Blake2b)) return new Blake2b(digestLength, key, salt, personal, noAssert)\n  if (!wasm) throw new Error('WASM not loaded. Wait for Blake2b.ready(cb)')\n  if (!digestLength) digestLength = 32\n\n  if (noAssert !== true) {\n    assert(digestLength >= BYTES_MIN, 'digestLength must be at least ' + BYTES_MIN + ', was given ' + digestLength)\n    assert(digestLength <= BYTES_MAX, 'digestLength must be at most ' + BYTES_MAX + ', was given ' + digestLength)\n    if (key != null) {\n      assert(key instanceof Uint8Array, 'key must be Uint8Array or Buffer')\n      assert(key.length >= KEYBYTES_MIN, 'key must be at least ' + KEYBYTES_MIN + ', was given ' + key.length)\n      assert(key.length <= KEYBYTES_MAX, 'key must be at least ' + KEYBYTES_MAX + ', was given ' + key.length)\n    }\n    if (salt != null) {\n      assert(salt instanceof Uint8Array, 'salt must be Uint8Array or Buffer')\n      assert(salt.length === SALTBYTES, 'salt must be exactly ' + SALTBYTES + ', was given ' + salt.length)\n    }\n    if (personal != null) {\n      assert(personal instanceof Uint8Array, 'personal must be Uint8Array or Buffer')\n      assert(personal.length === PERSONALBYTES, 'personal must be exactly ' + PERSONALBYTES + ', was given ' + personal.length)\n    }\n  }\n\n  if (!freeList.length) {\n    freeList.push(head)\n    head += 216\n  }\n\n  this.digestLength = digestLength\n  this.finalized = false\n  this.pointer = freeList.pop()\n  this._memory = new Uint8Array(wasm.memory.buffer)\n\n  this._memory.fill(0, 0, 64)\n  this._memory[0] = this.digestLength\n  this._memory[1] = key ? key.length : 0\n  this._memory[2] = 1 // fanout\n  this._memory[3] = 1 // depth\n\n  if (salt) this._memory.set(salt, 32)\n  if (personal) this._memory.set(personal, 48)\n\n  if (this.pointer + 216 > this._memory.length) this._realloc(this.pointer + 216) // we need 216 bytes for the state\n  wasm.blake2b_init(this.pointer, this.digestLength)\n\n  if (key) {\n    this.update(key)\n    this._memory.fill(0, head, head + key.length) // whiteout key\n    this._memory[this.pointer + 200] = 128\n  }\n}\n\nBlake2b.prototype._realloc = function (size) {\n  wasm.memory.grow(Math.max(0, Math.ceil(Math.abs(size - this._memory.length) / 65536)))\n  this._memory = new Uint8Array(wasm.memory.buffer)\n}\n\nBlake2b.prototype.update = function (input) {\n  assert(this.finalized === false, 'Hash instance finalized')\n  assert(input instanceof Uint8Array, 'input must be Uint8Array or Buffer')\n\n  if (head + input.length > this._memory.length) this._realloc(head + input.length)\n  this._memory.set(input, head)\n  wasm.blake2b_update(this.pointer, head, head + input.length)\n  return this\n}\n\nBlake2b.prototype.digest = function (enc) {\n  assert(this.finalized === false, 'Hash instance finalized')\n  this.finalized = true\n\n  freeList.push(this.pointer)\n  wasm.blake2b_final(this.pointer)\n\n  if (!enc || enc === 'binary') {\n    return this._memory.slice(this.pointer + 128, this.pointer + 128 + this.digestLength)\n  }\n\n  if (typeof enc === 'string') {\n    return b4a.toString(this._memory, enc, this.pointer + 128, this.pointer + 128 + this.digestLength)\n  }\n\n  assert(enc instanceof Uint8Array && enc.length >= this.digestLength, 'input must be Uint8Array or Buffer')\n  for (var i = 0; i < this.digestLength; i++) {\n    enc[i] = this._memory[this.pointer + 128 + i]\n  }\n\n  return enc\n}\n\n// libsodium compat\nBlake2b.prototype.final = Blake2b.prototype.digest\n\nBlake2b.WASM = wasm\nBlake2b.SUPPORTED = typeof WebAssembly !== 'undefined'\n\nBlake2b.ready = function (cb) {\n  if (!cb) cb = noop\n  if (!wasmPromise) return cb(new Error('WebAssembly not supported'))\n  return wasmPromise.then(() => cb(), cb)\n}\n\nBlake2b.prototype.ready = Blake2b.ready\n\nBlake2b.prototype.getPartialHash = function () {\n  return this._memory.slice(this.pointer, this.pointer + 216);\n}\n\nBlake2b.prototype.setPartialHash = function (ph) {\n  this._memory.set(ph, this.pointer);\n}\n\nfunction noop () {}\n","var __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[Object.keys(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __toBinary = /* @__PURE__ */ (() => {\n  var table = new Uint8Array(128);\n  for (var i = 0; i < 64; i++)\n    table[i < 26 ? i + 65 : i < 52 ? i + 71 : i < 62 ? i - 4 : i * 4 - 205] = i;\n  return (base64) => {\n    var n = base64.length, bytes2 = new Uint8Array((n - (base64[n - 1] == \"=\") - (base64[n - 2] == \"=\")) * 3 / 4 | 0);\n    for (var i2 = 0, j = 0; i2 < n; ) {\n      var c0 = table[base64.charCodeAt(i2++)], c1 = table[base64.charCodeAt(i2++)];\n      var c2 = table[base64.charCodeAt(i2++)], c3 = table[base64.charCodeAt(i2++)];\n      bytes2[j++] = c0 << 2 | c1 >> 4;\n      bytes2[j++] = c1 << 4 | c2 >> 2;\n      bytes2[j++] = c2 << 6 | c3;\n    }\n    return bytes2;\n  };\n})();\n\n// wasm-binary:./blake2b.wat\nvar require_blake2b = __commonJS({\n  \"wasm-binary:./blake2b.wat\"(exports2, module2) {\n    module2.exports = __toBinary(\"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\");\n  }\n});\n\n// wasm-module:./blake2b.wat\nvar bytes = require_blake2b();\nvar compiled = WebAssembly.compile(bytes);\nmodule.exports = async (imports) => {\n  const instance = await WebAssembly.instantiate(await compiled, imports);\n  return instance.exports;\n};\n","var assert = require('nanoassert')\nvar b2wasm = require('blake2b-wasm')\n\n// 64-bit unsigned addition\n// Sets v[a,a+1] += v[b,b+1]\n// v should be a Uint32Array\nfunction ADD64AA (v, a, b) {\n  var o0 = v[a] + v[b]\n  var o1 = v[a + 1] + v[b + 1]\n  if (o0 >= 0x100000000) {\n    o1++\n  }\n  v[a] = o0\n  v[a + 1] = o1\n}\n\n// 64-bit unsigned addition\n// Sets v[a,a+1] += b\n// b0 is the low 32 bits of b, b1 represents the high 32 bits\nfunction ADD64AC (v, a, b0, b1) {\n  var o0 = v[a] + b0\n  if (b0 < 0) {\n    o0 += 0x100000000\n  }\n  var o1 = v[a + 1] + b1\n  if (o0 >= 0x100000000) {\n    o1++\n  }\n  v[a] = o0\n  v[a + 1] = o1\n}\n\n// Little-endian byte access\nfunction B2B_GET32 (arr, i) {\n  return (arr[i] ^\n  (arr[i + 1] << 8) ^\n  (arr[i + 2] << 16) ^\n  (arr[i + 3] << 24))\n}\n\n// G Mixing function\n// The ROTRs are inlined for speed\nfunction B2B_G (a, b, c, d, ix, iy) {\n  var x0 = m[ix]\n  var x1 = m[ix + 1]\n  var y0 = m[iy]\n  var y1 = m[iy + 1]\n\n  ADD64AA(v, a, b) // v[a,a+1] += v[b,b+1] ... in JS we must store a uint64 as two uint32s\n  ADD64AC(v, a, x0, x1) // v[a, a+1] += x ... x0 is the low 32 bits of x, x1 is the high 32 bits\n\n  // v[d,d+1] = (v[d,d+1] xor v[a,a+1]) rotated to the right by 32 bits\n  var xor0 = v[d] ^ v[a]\n  var xor1 = v[d + 1] ^ v[a + 1]\n  v[d] = xor1\n  v[d + 1] = xor0\n\n  ADD64AA(v, c, d)\n\n  // v[b,b+1] = (v[b,b+1] xor v[c,c+1]) rotated right by 24 bits\n  xor0 = v[b] ^ v[c]\n  xor1 = v[b + 1] ^ v[c + 1]\n  v[b] = (xor0 >>> 24) ^ (xor1 << 8)\n  v[b + 1] = (xor1 >>> 24) ^ (xor0 << 8)\n\n  ADD64AA(v, a, b)\n  ADD64AC(v, a, y0, y1)\n\n  // v[d,d+1] = (v[d,d+1] xor v[a,a+1]) rotated right by 16 bits\n  xor0 = v[d] ^ v[a]\n  xor1 = v[d + 1] ^ v[a + 1]\n  v[d] = (xor0 >>> 16) ^ (xor1 << 16)\n  v[d + 1] = (xor1 >>> 16) ^ (xor0 << 16)\n\n  ADD64AA(v, c, d)\n\n  // v[b,b+1] = (v[b,b+1] xor v[c,c+1]) rotated right by 63 bits\n  xor0 = v[b] ^ v[c]\n  xor1 = v[b + 1] ^ v[c + 1]\n  v[b] = (xor1 >>> 31) ^ (xor0 << 1)\n  v[b + 1] = (xor0 >>> 31) ^ (xor1 << 1)\n}\n\n// Initialization Vector\nvar BLAKE2B_IV32 = new Uint32Array([\n  0xF3BCC908, 0x6A09E667, 0x84CAA73B, 0xBB67AE85,\n  0xFE94F82B, 0x3C6EF372, 0x5F1D36F1, 0xA54FF53A,\n  0xADE682D1, 0x510E527F, 0x2B3E6C1F, 0x9B05688C,\n  0xFB41BD6B, 0x1F83D9AB, 0x137E2179, 0x5BE0CD19\n])\n\nvar SIGMA8 = [\n  0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15,\n  14, 10, 4, 8, 9, 15, 13, 6, 1, 12, 0, 2, 11, 7, 5, 3,\n  11, 8, 12, 0, 5, 2, 15, 13, 10, 14, 3, 6, 7, 1, 9, 4,\n  7, 9, 3, 1, 13, 12, 11, 14, 2, 6, 5, 10, 4, 0, 15, 8,\n  9, 0, 5, 7, 2, 4, 10, 15, 14, 1, 11, 12, 6, 8, 3, 13,\n  2, 12, 6, 10, 0, 11, 8, 3, 4, 13, 7, 5, 15, 14, 1, 9,\n  12, 5, 1, 15, 14, 13, 4, 10, 0, 7, 6, 3, 9, 2, 8, 11,\n  13, 11, 7, 14, 12, 1, 3, 9, 5, 0, 15, 4, 8, 6, 2, 10,\n  6, 15, 14, 9, 11, 3, 0, 8, 12, 2, 13, 7, 1, 4, 10, 5,\n  10, 2, 8, 4, 7, 6, 1, 5, 15, 11, 9, 14, 3, 12, 13, 0,\n  0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15,\n  14, 10, 4, 8, 9, 15, 13, 6, 1, 12, 0, 2, 11, 7, 5, 3\n]\n\n// These are offsets into a uint64 buffer.\n// Multiply them all by 2 to make them offsets into a uint32 buffer,\n// because this is Javascript and we don't have uint64s\nvar SIGMA82 = new Uint8Array(SIGMA8.map(function (x) { return x * 2 }))\n\n// Compression function. 'last' flag indicates last block.\n// Note we're representing 16 uint64s as 32 uint32s\nvar v = new Uint32Array(32)\nvar m = new Uint32Array(32)\nfunction blake2bCompress (ctx, last) {\n  var i = 0\n\n  // init work variables\n  for (i = 0; i < 16; i++) {\n    v[i] = ctx.h[i]\n    v[i + 16] = BLAKE2B_IV32[i]\n  }\n\n  // low 64 bits of offset\n  v[24] = v[24] ^ ctx.t\n  v[25] = v[25] ^ (ctx.t / 0x100000000)\n  // high 64 bits not supported, offset may not be higher than 2**53-1\n\n  // last block flag set ?\n  if (last) {\n    v[28] = ~v[28]\n    v[29] = ~v[29]\n  }\n\n  // get little-endian words\n  for (i = 0; i < 32; i++) {\n    m[i] = B2B_GET32(ctx.b, 4 * i)\n  }\n\n  // twelve rounds of mixing\n  for (i = 0; i < 12; i++) {\n    B2B_G(0, 8, 16, 24, SIGMA82[i * 16 + 0], SIGMA82[i * 16 + 1])\n    B2B_G(2, 10, 18, 26, SIGMA82[i * 16 + 2], SIGMA82[i * 16 + 3])\n    B2B_G(4, 12, 20, 28, SIGMA82[i * 16 + 4], SIGMA82[i * 16 + 5])\n    B2B_G(6, 14, 22, 30, SIGMA82[i * 16 + 6], SIGMA82[i * 16 + 7])\n    B2B_G(0, 10, 20, 30, SIGMA82[i * 16 + 8], SIGMA82[i * 16 + 9])\n    B2B_G(2, 12, 22, 24, SIGMA82[i * 16 + 10], SIGMA82[i * 16 + 11])\n    B2B_G(4, 14, 16, 26, SIGMA82[i * 16 + 12], SIGMA82[i * 16 + 13])\n    B2B_G(6, 8, 18, 28, SIGMA82[i * 16 + 14], SIGMA82[i * 16 + 15])\n  }\n\n  for (i = 0; i < 16; i++) {\n    ctx.h[i] = ctx.h[i] ^ v[i] ^ v[i + 16]\n  }\n}\n\n// reusable parameter_block\nvar parameter_block = new Uint8Array([\n  0, 0, 0, 0,      //  0: outlen, keylen, fanout, depth\n  0, 0, 0, 0,      //  4: leaf length, sequential mode\n  0, 0, 0, 0,      //  8: node offset\n  0, 0, 0, 0,      // 12: node offset\n  0, 0, 0, 0,      // 16: node depth, inner length, rfu\n  0, 0, 0, 0,      // 20: rfu\n  0, 0, 0, 0,      // 24: rfu\n  0, 0, 0, 0,      // 28: rfu\n  0, 0, 0, 0,      // 32: salt\n  0, 0, 0, 0,      // 36: salt\n  0, 0, 0, 0,      // 40: salt\n  0, 0, 0, 0,      // 44: salt\n  0, 0, 0, 0,      // 48: personal\n  0, 0, 0, 0,      // 52: personal\n  0, 0, 0, 0,      // 56: personal\n  0, 0, 0, 0       // 60: personal\n])\n\n// Creates a BLAKE2b hashing context\n// Requires an output length between 1 and 64 bytes\n// Takes an optional Uint8Array key\nfunction Blake2b (outlen, key, salt, personal) {\n  // zero out parameter_block before usage\n  parameter_block.fill(0)\n  // state, 'param block'\n\n  this.b = new Uint8Array(128)\n  this.h = new Uint32Array(16)\n  this.t = 0 // input count\n  this.c = 0 // pointer within buffer\n  this.outlen = outlen // output length in bytes\n\n  parameter_block[0] = outlen\n  if (key) parameter_block[1] = key.length\n  parameter_block[2] = 1 // fanout\n  parameter_block[3] = 1 // depth\n\n  if (salt) parameter_block.set(salt, 32)\n  if (personal) parameter_block.set(personal, 48)\n\n  // initialize hash state\n  for (var i = 0; i < 16; i++) {\n    this.h[i] = BLAKE2B_IV32[i] ^ B2B_GET32(parameter_block, i * 4)\n  }\n\n  // key the hash, if applicable\n  if (key) {\n    blake2bUpdate(this, key)\n    // at the end\n    this.c = 128\n  }\n}\n\nBlake2b.prototype.update = function (input) {\n  assert(input instanceof Uint8Array, 'input must be Uint8Array or Buffer')\n  blake2bUpdate(this, input)\n  return this\n}\n\nBlake2b.prototype.digest = function (out) {\n  var buf = (!out || out === 'binary' || out === 'hex') ? new Uint8Array(this.outlen) : out\n  assert(buf instanceof Uint8Array, 'out must be \"binary\", \"hex\", Uint8Array, or Buffer')\n  assert(buf.length >= this.outlen, 'out must have at least outlen bytes of space')\n  blake2bFinal(this, buf)\n  if (out === 'hex') return hexSlice(buf)\n  return buf\n}\n\nBlake2b.prototype.final = Blake2b.prototype.digest\n\nBlake2b.ready = function (cb) {\n  b2wasm.ready(function () {\n    cb() // ignore the error\n  })\n}\n\n// Updates a BLAKE2b streaming hash\n// Requires hash context and Uint8Array (byte array)\nfunction blake2bUpdate (ctx, input) {\n  for (var i = 0; i < input.length; i++) {\n    if (ctx.c === 128) { // buffer full ?\n      ctx.t += ctx.c // add counters\n      blake2bCompress(ctx, false) // compress (not last)\n      ctx.c = 0 // counter to zero\n    }\n    ctx.b[ctx.c++] = input[i]\n  }\n}\n\n// Completes a BLAKE2b streaming hash\n// Returns a Uint8Array containing the message digest\nfunction blake2bFinal (ctx, out) {\n  ctx.t += ctx.c // mark last block offset\n\n  while (ctx.c < 128) { // fill up with zeros\n    ctx.b[ctx.c++] = 0\n  }\n  blake2bCompress(ctx, true) // final block flag = 1\n\n  for (var i = 0; i < ctx.outlen; i++) {\n    out[i] = ctx.h[i >> 2] >> (8 * (i & 3))\n  }\n  return out\n}\n\nfunction hexSlice (buf) {\n  var str = ''\n  for (var i = 0; i < buf.length; i++) str += toHex(buf[i])\n  return str\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nvar Proto = Blake2b\n\nmodule.exports = function createHash (outlen, key, salt, personal, noAssert) {\n  if (noAssert !== true) {\n    assert(outlen >= BYTES_MIN, 'outlen must be at least ' + BYTES_MIN + ', was given ' + outlen)\n    assert(outlen <= BYTES_MAX, 'outlen must be at most ' + BYTES_MAX + ', was given ' + outlen)\n    if (key != null) {\n      assert(key instanceof Uint8Array, 'key must be Uint8Array or Buffer')\n      assert(key.length >= KEYBYTES_MIN, 'key must be at least ' + KEYBYTES_MIN + ', was given ' + key.length)\n      assert(key.length <= KEYBYTES_MAX, 'key must be at most ' + KEYBYTES_MAX + ', was given ' + key.length)\n    }\n    if (salt != null) {\n      assert(salt instanceof Uint8Array, 'salt must be Uint8Array or Buffer')\n      assert(salt.length === SALTBYTES, 'salt must be exactly ' + SALTBYTES + ', was given ' + salt.length)\n    }\n    if (personal != null) {\n      assert(personal instanceof Uint8Array, 'personal must be Uint8Array or Buffer')\n      assert(personal.length === PERSONALBYTES, 'personal must be exactly ' + PERSONALBYTES + ', was given ' + personal.length)\n    }\n  }\n\n  return new Proto(outlen, key, salt, personal)\n}\n\nmodule.exports.ready = function (cb) {\n  b2wasm.ready(function () { // ignore errors\n    cb()\n  })\n}\n\nmodule.exports.WASM_SUPPORTED = b2wasm.SUPPORTED\nmodule.exports.WASM_LOADED = false\n\nvar BYTES_MIN = module.exports.BYTES_MIN = 16\nvar BYTES_MAX = module.exports.BYTES_MAX = 64\nvar BYTES = module.exports.BYTES = 32\nvar KEYBYTES_MIN = module.exports.KEYBYTES_MIN = 16\nvar KEYBYTES_MAX = module.exports.KEYBYTES_MAX = 64\nvar KEYBYTES = module.exports.KEYBYTES = 32\nvar SALTBYTES = module.exports.SALTBYTES = 16\nvar PERSONALBYTES = module.exports.PERSONALBYTES = 16\n\nb2wasm.ready(function (err) {\n  if (!err) {\n    module.exports.WASM_LOADED = true\n    module.exports = b2wasm\n  }\n})\n","var blake2b = require('blake2b')\n\nif (new Uint16Array([1])[0] !== 1) throw new Error('Big endian architecture is not supported.')\n\nmodule.exports.crypto_generichash_PRIMITIVE = 'blake2b'\nmodule.exports.crypto_generichash_BYTES_MIN = blake2b.BYTES_MIN\nmodule.exports.crypto_generichash_BYTES_MAX = blake2b.BYTES_MAX\nmodule.exports.crypto_generichash_BYTES = blake2b.BYTES\nmodule.exports.crypto_generichash_KEYBYTES_MIN = blake2b.KEYBYTES_MIN\nmodule.exports.crypto_generichash_KEYBYTES_MAX = blake2b.KEYBYTES_MAX\nmodule.exports.crypto_generichash_KEYBYTES = blake2b.KEYBYTES\nmodule.exports.crypto_generichash_WASM_SUPPORTED = blake2b.WASM_SUPPORTED\nmodule.exports.crypto_generichash_WASM_LOADED = false\n\nmodule.exports.crypto_generichash = function (output, input, key) {\n  blake2b(output.length, key).update(input).final(output)\n}\n\nmodule.exports.crypto_generichash_ready = blake2b.ready\n\nmodule.exports.crypto_generichash_batch = function (output, inputArray, key) {\n  var ctx = blake2b(output.length, key)\n  for (var i = 0; i < inputArray.length; i++) {\n    ctx.update(inputArray[i])\n  }\n  ctx.final(output)\n}\n\nmodule.exports.crypto_generichash_instance = function (key, outlen) {\n  if (outlen == null) outlen = module.exports.crypto_generichash_BYTES\n  return blake2b(outlen, key)\n}\n\nblake2b.ready(function (_) {\n  module.exports.crypto_generichash_WASM_LOADED = blake2b.WASM_LOADED\n})\n","var xsalsa20 = typeof WebAssembly !== \"undefined\" && require('./xsalsa20')()\n\nvar SIGMA = new Uint8Array([101, 120, 112, 97, 110, 100, 32, 51, 50, 45, 98, 121, 116, 101, 32, 107])\nvar head = 144\nvar top = head\nvar free = []\n\nmodule.exports = XSalsa20\n\nXSalsa20.NONCEBYTES = 24\nXSalsa20.KEYBYTES = 32\n\nXSalsa20.core_hsalsa20 = core_hsalsa20\nXSalsa20.SIGMA = SIGMA\n\nfunction XSalsa20 (nonce, key) {\n  if (!(this instanceof XSalsa20)) return new XSalsa20(nonce, key)\n  if (!nonce || nonce.length < 24) throw new Error('nonce must be at least 24 bytes')\n  if (!key || key.length < 32) throw new Error('key must be at least 32 bytes')\n  this._xor = xsalsa20 ? new WASM(nonce, key) : new Fallback(nonce, key)\n}\n\nXSalsa20.prototype.update = function (input, output) {\n  if (!input) throw new Error('input must be Uint8Array or Buffer')\n  if (!output) output = new Uint8Array(input.length)\n  if (input.length) this._xor.update(input, output)\n  return output\n}\n\nXSalsa20.prototype.final =\nXSalsa20.prototype.finalize = function () {\n  this._xor.finalize()\n  this._xor = null\n}\n\nfunction WASM (nonce, key) {\n  if (!free.length) {\n    free.push(head)\n    head += 64\n  }\n\n  this._pointer = free.pop()\n  this._nonce = this._pointer + 8\n  this._key = this._nonce + 24\n  this._overflow = 0\n  this._memory = new Uint8Array(xsalsa20.memory.buffer)\n\n  this._memory.fill(0, this._pointer, this._pointer + 8)\n  this._memory.set(nonce, this._nonce)\n  this._memory.set(key, this._key)\n}\n\nWASM.prototype.realloc = function (size) {\n  xsalsa20.memory.grow(Math.ceil(Math.abs(size - this._memory.length) / 65536))\n  this._memory = new Uint8Array(xsalsa20.memory.buffer)\n}\n\nWASM.prototype.update = function (input, output) {\n  var len = this._overflow + input.length\n  var start = head + this._overflow\n\n  top = head + len\n  if (top >= this._memory.length) this.realloc(top)\n\n  this._memory.set(input, start)\n  xsalsa20.xsalsa20_xor(this._pointer, head, head, len, this._nonce, this._key)\n  output.set(this._memory.subarray(start, head + len))\n\n  this._overflow = len & 63\n}\n\nWASM.prototype.finalize = function () {\n  this._memory.fill(0, this._pointer, this._key + 32)\n  if (top > head) {\n    this._memory.fill(0, head, top)\n    top = 0\n  }\n  free.push(this._pointer)\n}\n\nfunction Fallback (nonce, key) {\n  this._s = new Uint8Array(32)\n  this._z = new Uint8Array(16)\n  this._overflow = 0\n  core_hsalsa20(this._s, nonce, key, SIGMA)\n  for (var i = 0; i < 8; i++) this._z[i] = nonce[i + 16]\n}\n\nFallback.prototype.update = function (input, output) {\n  var x = new Uint8Array(64)\n  var u = 0\n  var i = this._overflow\n  var b = input.length + this._overflow\n  var z = this._z\n  var mpos = -this._overflow\n  var cpos = -this._overflow\n\n  while (b >= 64) {\n    core_salsa20(x, z, this._s, SIGMA)\n    for (; i < 64; i++) output[cpos + i] = input[mpos + i] ^ x[i]\n    u = 1\n    for (i = 8; i < 16; i++) {\n      u += (z[i] & 0xff) | 0\n      z[i] = u & 0xff\n      u >>>= 8\n    }\n    b -= 64\n    cpos += 64\n    mpos += 64\n    i = 0\n  }\n  if (b > 0) {\n    core_salsa20(x, z, this._s, SIGMA)\n    for (; i < b; i++) output[cpos + i] = input[mpos + i] ^ x[i]\n  }\n\n  this._overflow = b & 63\n}\n\nFallback.prototype.finalize = function () {\n  this._s.fill(0)\n  this._z.fill(0)\n}\n\n// below methods are ported from tweet nacl\n\nfunction core_salsa20(o, p, k, c) {\n  var j0  = c[ 0] & 0xff | (c[ 1] & 0xff) << 8 | (c[ 2] & 0xff) << 16 | (c[ 3] & 0xff) << 24,\n      j1  = k[ 0] & 0xff | (k[ 1] & 0xff) << 8 | (k[ 2] & 0xff) << 16 | (k[ 3] & 0xff) << 24,\n      j2  = k[ 4] & 0xff | (k[ 5] & 0xff) << 8 | (k[ 6] & 0xff) << 16 | (k[ 7] & 0xff) << 24,\n      j3  = k[ 8] & 0xff | (k[ 9] & 0xff) << 8 | (k[10] & 0xff) << 16 | (k[11] & 0xff) << 24,\n      j4  = k[12] & 0xff | (k[13] & 0xff) << 8 | (k[14] & 0xff) << 16 | (k[15] & 0xff) << 24,\n      j5  = c[ 4] & 0xff | (c[ 5] & 0xff) << 8 | (c[ 6] & 0xff) << 16 | (c[ 7] & 0xff) << 24,\n      j6  = p[ 0] & 0xff | (p[ 1] & 0xff) << 8 | (p[ 2] & 0xff) << 16 | (p[ 3] & 0xff) << 24,\n      j7  = p[ 4] & 0xff | (p[ 5] & 0xff) << 8 | (p[ 6] & 0xff) << 16 | (p[ 7] & 0xff) << 24,\n      j8  = p[ 8] & 0xff | (p[ 9] & 0xff) << 8 | (p[10] & 0xff) << 16 | (p[11] & 0xff) << 24,\n      j9  = p[12] & 0xff | (p[13] & 0xff) << 8 | (p[14] & 0xff) << 16 | (p[15] & 0xff) << 24,\n      j10 = c[ 8] & 0xff | (c[ 9] & 0xff) << 8 | (c[10] & 0xff) << 16 | (c[11] & 0xff) << 24,\n      j11 = k[16] & 0xff | (k[17] & 0xff) << 8 | (k[18] & 0xff) << 16 | (k[19] & 0xff) << 24,\n      j12 = k[20] & 0xff | (k[21] & 0xff) << 8 | (k[22] & 0xff) << 16 | (k[23] & 0xff) << 24,\n      j13 = k[24] & 0xff | (k[25] & 0xff) << 8 | (k[26] & 0xff) << 16 | (k[27] & 0xff) << 24,\n      j14 = k[28] & 0xff | (k[29] & 0xff) << 8 | (k[30] & 0xff) << 16 | (k[31] & 0xff) << 24,\n      j15 = c[12] & 0xff | (c[13] & 0xff) << 8 | (c[14] & 0xff) << 16 | (c[15] & 0xff) << 24\n\n  var x0 = j0, x1 = j1, x2 = j2, x3 = j3, x4 = j4, x5 = j5, x6 = j6, x7 = j7,\n      x8 = j8, x9 = j9, x10 = j10, x11 = j11, x12 = j12, x13 = j13, x14 = j14,\n      x15 = j15, u\n\n  for (var i = 0; i < 20; i += 2) {\n    u = x0 + x12 | 0\n    x4 ^= u << 7 | u >>> 25\n    u = x4 + x0 | 0\n    x8 ^= u << 9 | u >>> 23\n    u = x8 + x4 | 0\n    x12 ^= u << 13 | u >>> 19\n    u = x12 + x8 | 0\n    x0 ^= u << 18 | u >>> 14\n\n    u = x5 + x1 | 0\n    x9 ^= u << 7 | u >>> 25\n    u = x9 + x5 | 0\n    x13 ^= u << 9 | u >>> 23\n    u = x13 + x9 | 0\n    x1 ^= u << 13 | u >>> 19\n    u = x1 + x13 | 0\n    x5 ^= u << 18 | u >>> 14\n\n    u = x10 + x6 | 0\n    x14 ^= u << 7 | u >>> 25\n    u = x14 + x10 | 0\n    x2 ^= u << 9 | u >>> 23\n    u = x2 + x14 | 0\n    x6 ^= u << 13 | u >>> 19\n    u = x6 + x2 | 0\n    x10 ^= u << 18 | u >>> 14\n\n    u = x15 + x11 | 0\n    x3 ^= u << 7 | u >>> 25\n    u = x3 + x15 | 0\n    x7 ^= u << 9 | u >>> 23\n    u = x7 + x3 | 0\n    x11 ^= u << 13 | u >>> 19\n    u = x11 + x7 | 0\n    x15 ^= u << 18 | u >>> 14\n\n    u = x0 + x3 | 0\n    x1 ^= u << 7 | u >>> 25\n    u = x1 + x0 | 0\n    x2 ^= u << 9 | u >>> 23\n    u = x2 + x1 | 0\n    x3 ^= u << 13 | u >>> 19\n    u = x3 + x2 | 0\n    x0 ^= u << 18 | u >>> 14\n\n    u = x5 + x4 | 0\n    x6 ^= u << 7 | u >>> 25\n    u = x6 + x5 | 0\n    x7 ^= u << 9 | u >>> 23\n    u = x7 + x6 | 0\n    x4 ^= u << 13 | u >>> 19\n    u = x4 + x7 | 0\n    x5 ^= u << 18 | u >>> 14\n\n    u = x10 + x9 | 0\n    x11 ^= u << 7 | u >>> 25\n    u = x11 + x10 | 0\n    x8 ^= u << 9 | u >>> 23\n    u = x8 + x11 | 0\n    x9 ^= u << 13 | u >>> 19\n    u = x9 + x8 | 0\n    x10 ^= u << 18 | u >>> 14\n\n    u = x15 + x14 | 0\n    x12 ^= u << 7 | u >>> 25\n    u = x12 + x15 | 0\n    x13 ^= u << 9 | u >>> 23\n    u = x13 + x12 | 0\n    x14 ^= u << 13 | u >>> 19\n    u = x14 + x13 | 0\n    x15 ^= u << 18 | u >>> 14\n  }\n   x0 =  x0 +  j0 | 0\n   x1 =  x1 +  j1 | 0\n   x2 =  x2 +  j2 | 0\n   x3 =  x3 +  j3 | 0\n   x4 =  x4 +  j4 | 0\n   x5 =  x5 +  j5 | 0\n   x6 =  x6 +  j6 | 0\n   x7 =  x7 +  j7 | 0\n   x8 =  x8 +  j8 | 0\n   x9 =  x9 +  j9 | 0\n  x10 = x10 + j10 | 0\n  x11 = x11 + j11 | 0\n  x12 = x12 + j12 | 0\n  x13 = x13 + j13 | 0\n  x14 = x14 + j14 | 0\n  x15 = x15 + j15 | 0\n\n  o[ 0] = x0 >>>  0 & 0xff\n  o[ 1] = x0 >>>  8 & 0xff\n  o[ 2] = x0 >>> 16 & 0xff\n  o[ 3] = x0 >>> 24 & 0xff\n\n  o[ 4] = x1 >>>  0 & 0xff\n  o[ 5] = x1 >>>  8 & 0xff\n  o[ 6] = x1 >>> 16 & 0xff\n  o[ 7] = x1 >>> 24 & 0xff\n\n  o[ 8] = x2 >>>  0 & 0xff\n  o[ 9] = x2 >>>  8 & 0xff\n  o[10] = x2 >>> 16 & 0xff\n  o[11] = x2 >>> 24 & 0xff\n\n  o[12] = x3 >>>  0 & 0xff\n  o[13] = x3 >>>  8 & 0xff\n  o[14] = x3 >>> 16 & 0xff\n  o[15] = x3 >>> 24 & 0xff\n\n  o[16] = x4 >>>  0 & 0xff\n  o[17] = x4 >>>  8 & 0xff\n  o[18] = x4 >>> 16 & 0xff\n  o[19] = x4 >>> 24 & 0xff\n\n  o[20] = x5 >>>  0 & 0xff\n  o[21] = x5 >>>  8 & 0xff\n  o[22] = x5 >>> 16 & 0xff\n  o[23] = x5 >>> 24 & 0xff\n\n  o[24] = x6 >>>  0 & 0xff\n  o[25] = x6 >>>  8 & 0xff\n  o[26] = x6 >>> 16 & 0xff\n  o[27] = x6 >>> 24 & 0xff\n\n  o[28] = x7 >>>  0 & 0xff\n  o[29] = x7 >>>  8 & 0xff\n  o[30] = x7 >>> 16 & 0xff\n  o[31] = x7 >>> 24 & 0xff\n\n  o[32] = x8 >>>  0 & 0xff\n  o[33] = x8 >>>  8 & 0xff\n  o[34] = x8 >>> 16 & 0xff\n  o[35] = x8 >>> 24 & 0xff\n\n  o[36] = x9 >>>  0 & 0xff\n  o[37] = x9 >>>  8 & 0xff\n  o[38] = x9 >>> 16 & 0xff\n  o[39] = x9 >>> 24 & 0xff\n\n  o[40] = x10 >>>  0 & 0xff\n  o[41] = x10 >>>  8 & 0xff\n  o[42] = x10 >>> 16 & 0xff\n  o[43] = x10 >>> 24 & 0xff\n\n  o[44] = x11 >>>  0 & 0xff\n  o[45] = x11 >>>  8 & 0xff\n  o[46] = x11 >>> 16 & 0xff\n  o[47] = x11 >>> 24 & 0xff\n\n  o[48] = x12 >>>  0 & 0xff\n  o[49] = x12 >>>  8 & 0xff\n  o[50] = x12 >>> 16 & 0xff\n  o[51] = x12 >>> 24 & 0xff\n\n  o[52] = x13 >>>  0 & 0xff\n  o[53] = x13 >>>  8 & 0xff\n  o[54] = x13 >>> 16 & 0xff\n  o[55] = x13 >>> 24 & 0xff\n\n  o[56] = x14 >>>  0 & 0xff\n  o[57] = x14 >>>  8 & 0xff\n  o[58] = x14 >>> 16 & 0xff\n  o[59] = x14 >>> 24 & 0xff\n\n  o[60] = x15 >>>  0 & 0xff\n  o[61] = x15 >>>  8 & 0xff\n  o[62] = x15 >>> 16 & 0xff\n  o[63] = x15 >>> 24 & 0xff\n}\n\nfunction core_hsalsa20(o,p,k,c) {\n  var j0  = c[ 0] & 0xff | (c[ 1] & 0xff) << 8 | (c[ 2] & 0xff) << 16 | (c[ 3] & 0xff) << 24,\n      j1  = k[ 0] & 0xff | (k[ 1] & 0xff) << 8 | (k[ 2] & 0xff) << 16 | (k[ 3] & 0xff) << 24,\n      j2  = k[ 4] & 0xff | (k[ 5] & 0xff) << 8 | (k[ 6] & 0xff) << 16 | (k[ 7] & 0xff) << 24,\n      j3  = k[ 8] & 0xff | (k[ 9] & 0xff) << 8 | (k[10] & 0xff) << 16 | (k[11] & 0xff) << 24,\n      j4  = k[12] & 0xff | (k[13] & 0xff) << 8 | (k[14] & 0xff) << 16 | (k[15] & 0xff) << 24,\n      j5  = c[ 4] & 0xff | (c[ 5] & 0xff) << 8 | (c[ 6] & 0xff) << 16 | (c[ 7] & 0xff) << 24,\n      j6  = p[ 0] & 0xff | (p[ 1] & 0xff) << 8 | (p[ 2] & 0xff) << 16 | (p[ 3] & 0xff) << 24,\n      j7  = p[ 4] & 0xff | (p[ 5] & 0xff) << 8 | (p[ 6] & 0xff) << 16 | (p[ 7] & 0xff) << 24,\n      j8  = p[ 8] & 0xff | (p[ 9] & 0xff) << 8 | (p[10] & 0xff) << 16 | (p[11] & 0xff) << 24,\n      j9  = p[12] & 0xff | (p[13] & 0xff) << 8 | (p[14] & 0xff) << 16 | (p[15] & 0xff) << 24,\n      j10 = c[ 8] & 0xff | (c[ 9] & 0xff) << 8 | (c[10] & 0xff) << 16 | (c[11] & 0xff) << 24,\n      j11 = k[16] & 0xff | (k[17] & 0xff) << 8 | (k[18] & 0xff) << 16 | (k[19] & 0xff) << 24,\n      j12 = k[20] & 0xff | (k[21] & 0xff) << 8 | (k[22] & 0xff) << 16 | (k[23] & 0xff) << 24,\n      j13 = k[24] & 0xff | (k[25] & 0xff) << 8 | (k[26] & 0xff) << 16 | (k[27] & 0xff) << 24,\n      j14 = k[28] & 0xff | (k[29] & 0xff) << 8 | (k[30] & 0xff) << 16 | (k[31] & 0xff) << 24,\n      j15 = c[12] & 0xff | (c[13] & 0xff) << 8 | (c[14] & 0xff) << 16 | (c[15] & 0xff) << 24\n\n  var x0 = j0, x1 = j1, x2 = j2, x3 = j3, x4 = j4, x5 = j5, x6 = j6, x7 = j7,\n      x8 = j8, x9 = j9, x10 = j10, x11 = j11, x12 = j12, x13 = j13, x14 = j14,\n      x15 = j15, u\n\n  for (var i = 0; i < 20; i += 2) {\n    u = x0 + x12 | 0\n    x4 ^= u << 7 | u >>> 25\n    u = x4 + x0 | 0\n    x8 ^= u << 9 | u >>> 23\n    u = x8 + x4 | 0\n    x12 ^= u << 13 | u >>> 19\n    u = x12 + x8 | 0\n    x0 ^= u << 18 | u >>> 14\n\n    u = x5 + x1 | 0\n    x9 ^= u << 7 | u >>> 25\n    u = x9 + x5 | 0\n    x13 ^= u << 9 | u >>> 23\n    u = x13 + x9 | 0\n    x1 ^= u << 13 | u >>> 19\n    u = x1 + x13 | 0\n    x5 ^= u << 18 | u >>> 14\n\n    u = x10 + x6 | 0\n    x14 ^= u << 7 | u >>> 25\n    u = x14 + x10 | 0\n    x2 ^= u << 9 | u >>> 23\n    u = x2 + x14 | 0\n    x6 ^= u << 13 | u >>> 19\n    u = x6 + x2 | 0\n    x10 ^= u << 18 | u >>> 14\n\n    u = x15 + x11 | 0\n    x3 ^= u << 7 | u >>> 25\n    u = x3 + x15 | 0\n    x7 ^= u << 9 | u >>> 23\n    u = x7 + x3 | 0\n    x11 ^= u << 13 | u >>> 19\n    u = x11 + x7 | 0\n    x15 ^= u << 18 | u >>> 14\n\n    u = x0 + x3 | 0\n    x1 ^= u << 7 | u >>> 25\n    u = x1 + x0 | 0\n    x2 ^= u << 9 | u >>> 23\n    u = x2 + x1 | 0\n    x3 ^= u << 13 | u >>> 19\n    u = x3 + x2 | 0\n    x0 ^= u << 18 | u >>> 14\n\n    u = x5 + x4 | 0\n    x6 ^= u << 7 | u >>> 25\n    u = x6 + x5 | 0\n    x7 ^= u << 9 | u >>> 23\n    u = x7 + x6 | 0\n    x4 ^= u << 13 | u >>> 19\n    u = x4 + x7 | 0\n    x5 ^= u << 18 | u >>> 14\n\n    u = x10 + x9 | 0\n    x11 ^= u << 7 | u >>> 25\n    u = x11 + x10 | 0\n    x8 ^= u << 9 | u >>> 23\n    u = x8 + x11 | 0\n    x9 ^= u << 13 | u >>> 19\n    u = x9 + x8 | 0\n    x10 ^= u << 18 | u >>> 14\n\n    u = x15 + x14 | 0\n    x12 ^= u << 7 | u >>> 25\n    u = x12 + x15 | 0\n    x13 ^= u << 9 | u >>> 23\n    u = x13 + x12 | 0\n    x14 ^= u << 13 | u >>> 19\n    u = x14 + x13 | 0\n    x15 ^= u << 18 | u >>> 14\n  }\n\n  o[ 0] = x0 >>>  0 & 0xff\n  o[ 1] = x0 >>>  8 & 0xff\n  o[ 2] = x0 >>> 16 & 0xff\n  o[ 3] = x0 >>> 24 & 0xff\n\n  o[ 4] = x5 >>>  0 & 0xff\n  o[ 5] = x5 >>>  8 & 0xff\n  o[ 6] = x5 >>> 16 & 0xff\n  o[ 7] = x5 >>> 24 & 0xff\n\n  o[ 8] = x10 >>>  0 & 0xff\n  o[ 9] = x10 >>>  8 & 0xff\n  o[10] = x10 >>> 16 & 0xff\n  o[11] = x10 >>> 24 & 0xff\n\n  o[12] = x15 >>>  0 & 0xff\n  o[13] = x15 >>>  8 & 0xff\n  o[14] = x15 >>> 16 & 0xff\n  o[15] = x15 >>> 24 & 0xff\n\n  o[16] = x6 >>>  0 & 0xff\n  o[17] = x6 >>>  8 & 0xff\n  o[18] = x6 >>> 16 & 0xff\n  o[19] = x6 >>> 24 & 0xff\n\n  o[20] = x7 >>>  0 & 0xff\n  o[21] = x7 >>>  8 & 0xff\n  o[22] = x7 >>> 16 & 0xff\n  o[23] = x7 >>> 24 & 0xff\n\n  o[24] = x8 >>>  0 & 0xff\n  o[25] = x8 >>>  8 & 0xff\n  o[26] = x8 >>> 16 & 0xff\n  o[27] = x8 >>> 24 & 0xff\n\n  o[28] = x9 >>>  0 & 0xff\n  o[29] = x9 >>>  8 & 0xff\n  o[30] = x9 >>> 16 & 0xff\n  o[31] = x9 >>> 24 & 0xff\n}\n","var __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[Object.keys(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __toBinary = /* @__PURE__ */ (() => {\n  var table = new Uint8Array(128);\n  for (var i = 0; i < 64; i++)\n    table[i < 26 ? i + 65 : i < 52 ? i + 71 : i < 62 ? i - 4 : i * 4 - 205] = i;\n  return (base64) => {\n    var n = base64.length, bytes2 = new Uint8Array((n - (base64[n - 1] == \"=\") - (base64[n - 2] == \"=\")) * 3 / 4 | 0);\n    for (var i2 = 0, j = 0; i2 < n; ) {\n      var c0 = table[base64.charCodeAt(i2++)], c1 = table[base64.charCodeAt(i2++)];\n      var c2 = table[base64.charCodeAt(i2++)], c3 = table[base64.charCodeAt(i2++)];\n      bytes2[j++] = c0 << 2 | c1 >> 4;\n      bytes2[j++] = c1 << 4 | c2 >> 2;\n      bytes2[j++] = c2 << 6 | c3;\n    }\n    return bytes2;\n  };\n})();\n\n// wasm-binary:./xsalsa20.wat\nvar require_xsalsa20 = __commonJS({\n  \"wasm-binary:./xsalsa20.wat\"(exports2, module2) {\n    module2.exports = __toBinary(\"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\");\n  }\n});\n\n// wasm-module:./xsalsa20.wat\nvar bytes = require_xsalsa20();\nvar compiled = new WebAssembly.Module(bytes);\nmodule.exports = (imports) => {\n  const instance = new WebAssembly.Instance(compiled, imports);\n  return instance.exports;\n};\n","/*\n* Port of Andrew Moon's Poly1305-donna-16. Public domain.\n* https://github.com/floodyberry/poly1305-donna\n*/\n\nif (new Uint16Array([1])[0] !== 1) throw new Error('Big endian architecture is not supported.')\n\nvar poly1305 = function(key) {\n  this.buffer = new Uint8Array(16);\n  this.r = new Uint16Array(10);\n  this.h = new Uint16Array(10);\n  this.pad = new Uint16Array(8);\n  this.leftover = 0;\n  this.fin = 0;\n\n  var t0, t1, t2, t3, t4, t5, t6, t7;\n\n  t0 = key[ 0] & 0xff | (key[ 1] & 0xff) << 8; this.r[0] = ( t0                     ) & 0x1fff;\n  t1 = key[ 2] & 0xff | (key[ 3] & 0xff) << 8; this.r[1] = ((t0 >>> 13) | (t1 <<  3)) & 0x1fff;\n  t2 = key[ 4] & 0xff | (key[ 5] & 0xff) << 8; this.r[2] = ((t1 >>> 10) | (t2 <<  6)) & 0x1f03;\n  t3 = key[ 6] & 0xff | (key[ 7] & 0xff) << 8; this.r[3] = ((t2 >>>  7) | (t3 <<  9)) & 0x1fff;\n  t4 = key[ 8] & 0xff | (key[ 9] & 0xff) << 8; this.r[4] = ((t3 >>>  4) | (t4 << 12)) & 0x00ff;\n  this.r[5] = ((t4 >>>  1)) & 0x1ffe;\n  t5 = key[10] & 0xff | (key[11] & 0xff) << 8; this.r[6] = ((t4 >>> 14) | (t5 <<  2)) & 0x1fff;\n  t6 = key[12] & 0xff | (key[13] & 0xff) << 8; this.r[7] = ((t5 >>> 11) | (t6 <<  5)) & 0x1f81;\n  t7 = key[14] & 0xff | (key[15] & 0xff) << 8; this.r[8] = ((t6 >>>  8) | (t7 <<  8)) & 0x1fff;\n  this.r[9] = ((t7 >>>  5)) & 0x007f;\n\n  this.pad[0] = key[16] & 0xff | (key[17] & 0xff) << 8;\n  this.pad[1] = key[18] & 0xff | (key[19] & 0xff) << 8;\n  this.pad[2] = key[20] & 0xff | (key[21] & 0xff) << 8;\n  this.pad[3] = key[22] & 0xff | (key[23] & 0xff) << 8;\n  this.pad[4] = key[24] & 0xff | (key[25] & 0xff) << 8;\n  this.pad[5] = key[26] & 0xff | (key[27] & 0xff) << 8;\n  this.pad[6] = key[28] & 0xff | (key[29] & 0xff) << 8;\n  this.pad[7] = key[30] & 0xff | (key[31] & 0xff) << 8;\n};\n\npoly1305.prototype.blocks = function(m, mpos, bytes) {\n  var hibit = this.fin ? 0 : (1 << 11);\n  var t0, t1, t2, t3, t4, t5, t6, t7, c;\n  var d0, d1, d2, d3, d4, d5, d6, d7, d8, d9;\n\n  var h0 = this.h[0],\n      h1 = this.h[1],\n      h2 = this.h[2],\n      h3 = this.h[3],\n      h4 = this.h[4],\n      h5 = this.h[5],\n      h6 = this.h[6],\n      h7 = this.h[7],\n      h8 = this.h[8],\n      h9 = this.h[9];\n\n  var r0 = this.r[0],\n      r1 = this.r[1],\n      r2 = this.r[2],\n      r3 = this.r[3],\n      r4 = this.r[4],\n      r5 = this.r[5],\n      r6 = this.r[6],\n      r7 = this.r[7],\n      r8 = this.r[8],\n      r9 = this.r[9];\n\n  while (bytes >= 16) {\n    t0 = m[mpos+ 0] & 0xff | (m[mpos+ 1] & 0xff) << 8; h0 += ( t0                     ) & 0x1fff;\n    t1 = m[mpos+ 2] & 0xff | (m[mpos+ 3] & 0xff) << 8; h1 += ((t0 >>> 13) | (t1 <<  3)) & 0x1fff;\n    t2 = m[mpos+ 4] & 0xff | (m[mpos+ 5] & 0xff) << 8; h2 += ((t1 >>> 10) | (t2 <<  6)) & 0x1fff;\n    t3 = m[mpos+ 6] & 0xff | (m[mpos+ 7] & 0xff) << 8; h3 += ((t2 >>>  7) | (t3 <<  9)) & 0x1fff;\n    t4 = m[mpos+ 8] & 0xff | (m[mpos+ 9] & 0xff) << 8; h4 += ((t3 >>>  4) | (t4 << 12)) & 0x1fff;\n    h5 += ((t4 >>>  1)) & 0x1fff;\n    t5 = m[mpos+10] & 0xff | (m[mpos+11] & 0xff) << 8; h6 += ((t4 >>> 14) | (t5 <<  2)) & 0x1fff;\n    t6 = m[mpos+12] & 0xff | (m[mpos+13] & 0xff) << 8; h7 += ((t5 >>> 11) | (t6 <<  5)) & 0x1fff;\n    t7 = m[mpos+14] & 0xff | (m[mpos+15] & 0xff) << 8; h8 += ((t6 >>>  8) | (t7 <<  8)) & 0x1fff;\n    h9 += ((t7 >>> 5)) | hibit;\n\n    c = 0;\n\n    d0 = c;\n    d0 += h0 * r0;\n    d0 += h1 * (5 * r9);\n    d0 += h2 * (5 * r8);\n    d0 += h3 * (5 * r7);\n    d0 += h4 * (5 * r6);\n    c = (d0 >>> 13); d0 &= 0x1fff;\n    d0 += h5 * (5 * r5);\n    d0 += h6 * (5 * r4);\n    d0 += h7 * (5 * r3);\n    d0 += h8 * (5 * r2);\n    d0 += h9 * (5 * r1);\n    c += (d0 >>> 13); d0 &= 0x1fff;\n\n    d1 = c;\n    d1 += h0 * r1;\n    d1 += h1 * r0;\n    d1 += h2 * (5 * r9);\n    d1 += h3 * (5 * r8);\n    d1 += h4 * (5 * r7);\n    c = (d1 >>> 13); d1 &= 0x1fff;\n    d1 += h5 * (5 * r6);\n    d1 += h6 * (5 * r5);\n    d1 += h7 * (5 * r4);\n    d1 += h8 * (5 * r3);\n    d1 += h9 * (5 * r2);\n    c += (d1 >>> 13); d1 &= 0x1fff;\n\n    d2 = c;\n    d2 += h0 * r2;\n    d2 += h1 * r1;\n    d2 += h2 * r0;\n    d2 += h3 * (5 * r9);\n    d2 += h4 * (5 * r8);\n    c = (d2 >>> 13); d2 &= 0x1fff;\n    d2 += h5 * (5 * r7);\n    d2 += h6 * (5 * r6);\n    d2 += h7 * (5 * r5);\n    d2 += h8 * (5 * r4);\n    d2 += h9 * (5 * r3);\n    c += (d2 >>> 13); d2 &= 0x1fff;\n\n    d3 = c;\n    d3 += h0 * r3;\n    d3 += h1 * r2;\n    d3 += h2 * r1;\n    d3 += h3 * r0;\n    d3 += h4 * (5 * r9);\n    c = (d3 >>> 13); d3 &= 0x1fff;\n    d3 += h5 * (5 * r8);\n    d3 += h6 * (5 * r7);\n    d3 += h7 * (5 * r6);\n    d3 += h8 * (5 * r5);\n    d3 += h9 * (5 * r4);\n    c += (d3 >>> 13); d3 &= 0x1fff;\n\n    d4 = c;\n    d4 += h0 * r4;\n    d4 += h1 * r3;\n    d4 += h2 * r2;\n    d4 += h3 * r1;\n    d4 += h4 * r0;\n    c = (d4 >>> 13); d4 &= 0x1fff;\n    d4 += h5 * (5 * r9);\n    d4 += h6 * (5 * r8);\n    d4 += h7 * (5 * r7);\n    d4 += h8 * (5 * r6);\n    d4 += h9 * (5 * r5);\n    c += (d4 >>> 13); d4 &= 0x1fff;\n\n    d5 = c;\n    d5 += h0 * r5;\n    d5 += h1 * r4;\n    d5 += h2 * r3;\n    d5 += h3 * r2;\n    d5 += h4 * r1;\n    c = (d5 >>> 13); d5 &= 0x1fff;\n    d5 += h5 * r0;\n    d5 += h6 * (5 * r9);\n    d5 += h7 * (5 * r8);\n    d5 += h8 * (5 * r7);\n    d5 += h9 * (5 * r6);\n    c += (d5 >>> 13); d5 &= 0x1fff;\n\n    d6 = c;\n    d6 += h0 * r6;\n    d6 += h1 * r5;\n    d6 += h2 * r4;\n    d6 += h3 * r3;\n    d6 += h4 * r2;\n    c = (d6 >>> 13); d6 &= 0x1fff;\n    d6 += h5 * r1;\n    d6 += h6 * r0;\n    d6 += h7 * (5 * r9);\n    d6 += h8 * (5 * r8);\n    d6 += h9 * (5 * r7);\n    c += (d6 >>> 13); d6 &= 0x1fff;\n\n    d7 = c;\n    d7 += h0 * r7;\n    d7 += h1 * r6;\n    d7 += h2 * r5;\n    d7 += h3 * r4;\n    d7 += h4 * r3;\n    c = (d7 >>> 13); d7 &= 0x1fff;\n    d7 += h5 * r2;\n    d7 += h6 * r1;\n    d7 += h7 * r0;\n    d7 += h8 * (5 * r9);\n    d7 += h9 * (5 * r8);\n    c += (d7 >>> 13); d7 &= 0x1fff;\n\n    d8 = c;\n    d8 += h0 * r8;\n    d8 += h1 * r7;\n    d8 += h2 * r6;\n    d8 += h3 * r5;\n    d8 += h4 * r4;\n    c = (d8 >>> 13); d8 &= 0x1fff;\n    d8 += h5 * r3;\n    d8 += h6 * r2;\n    d8 += h7 * r1;\n    d8 += h8 * r0;\n    d8 += h9 * (5 * r9);\n    c += (d8 >>> 13); d8 &= 0x1fff;\n\n    d9 = c;\n    d9 += h0 * r9;\n    d9 += h1 * r8;\n    d9 += h2 * r7;\n    d9 += h3 * r6;\n    d9 += h4 * r5;\n    c = (d9 >>> 13); d9 &= 0x1fff;\n    d9 += h5 * r4;\n    d9 += h6 * r3;\n    d9 += h7 * r2;\n    d9 += h8 * r1;\n    d9 += h9 * r0;\n    c += (d9 >>> 13); d9 &= 0x1fff;\n\n    c = (((c << 2) + c)) | 0;\n    c = (c + d0) | 0;\n    d0 = c & 0x1fff;\n    c = (c >>> 13);\n    d1 += c;\n\n    h0 = d0;\n    h1 = d1;\n    h2 = d2;\n    h3 = d3;\n    h4 = d4;\n    h5 = d5;\n    h6 = d6;\n    h7 = d7;\n    h8 = d8;\n    h9 = d9;\n\n    mpos += 16;\n    bytes -= 16;\n  }\n  this.h[0] = h0;\n  this.h[1] = h1;\n  this.h[2] = h2;\n  this.h[3] = h3;\n  this.h[4] = h4;\n  this.h[5] = h5;\n  this.h[6] = h6;\n  this.h[7] = h7;\n  this.h[8] = h8;\n  this.h[9] = h9;\n};\n\npoly1305.prototype.finish = function(mac, macpos) {\n  var g = new Uint16Array(10);\n  var c, mask, f, i;\n\n  if (this.leftover) {\n    i = this.leftover;\n    this.buffer[i++] = 1;\n    for (; i < 16; i++) this.buffer[i] = 0;\n    this.fin = 1;\n    this.blocks(this.buffer, 0, 16);\n  }\n\n  c = this.h[1] >>> 13;\n  this.h[1] &= 0x1fff;\n  for (i = 2; i < 10; i++) {\n    this.h[i] += c;\n    c = this.h[i] >>> 13;\n    this.h[i] &= 0x1fff;\n  }\n  this.h[0] += (c * 5);\n  c = this.h[0] >>> 13;\n  this.h[0] &= 0x1fff;\n  this.h[1] += c;\n  c = this.h[1] >>> 13;\n  this.h[1] &= 0x1fff;\n  this.h[2] += c;\n\n  g[0] = this.h[0] + 5;\n  c = g[0] >>> 13;\n  g[0] &= 0x1fff;\n  for (i = 1; i < 10; i++) {\n    g[i] = this.h[i] + c;\n    c = g[i] >>> 13;\n    g[i] &= 0x1fff;\n  }\n  g[9] -= (1 << 13);\n\n  mask = (c ^ 1) - 1;\n  for (i = 0; i < 10; i++) g[i] &= mask;\n  mask = ~mask;\n  for (i = 0; i < 10; i++) this.h[i] = (this.h[i] & mask) | g[i];\n\n  this.h[0] = ((this.h[0]       ) | (this.h[1] << 13)                    ) & 0xffff;\n  this.h[1] = ((this.h[1] >>>  3) | (this.h[2] << 10)                    ) & 0xffff;\n  this.h[2] = ((this.h[2] >>>  6) | (this.h[3] <<  7)                    ) & 0xffff;\n  this.h[3] = ((this.h[3] >>>  9) | (this.h[4] <<  4)                    ) & 0xffff;\n  this.h[4] = ((this.h[4] >>> 12) | (this.h[5] <<  1) | (this.h[6] << 14)) & 0xffff;\n  this.h[5] = ((this.h[6] >>>  2) | (this.h[7] << 11)                    ) & 0xffff;\n  this.h[6] = ((this.h[7] >>>  5) | (this.h[8] <<  8)                    ) & 0xffff;\n  this.h[7] = ((this.h[8] >>>  8) | (this.h[9] <<  5)                    ) & 0xffff;\n\n  f = this.h[0] + this.pad[0];\n  this.h[0] = f & 0xffff;\n  for (i = 1; i < 8; i++) {\n    f = (((this.h[i] + this.pad[i]) | 0) + (f >>> 16)) | 0;\n    this.h[i] = f & 0xffff;\n  }\n\n  mac[macpos+ 0] = (this.h[0] >>> 0) & 0xff;\n  mac[macpos+ 1] = (this.h[0] >>> 8) & 0xff;\n  mac[macpos+ 2] = (this.h[1] >>> 0) & 0xff;\n  mac[macpos+ 3] = (this.h[1] >>> 8) & 0xff;\n  mac[macpos+ 4] = (this.h[2] >>> 0) & 0xff;\n  mac[macpos+ 5] = (this.h[2] >>> 8) & 0xff;\n  mac[macpos+ 6] = (this.h[3] >>> 0) & 0xff;\n  mac[macpos+ 7] = (this.h[3] >>> 8) & 0xff;\n  mac[macpos+ 8] = (this.h[4] >>> 0) & 0xff;\n  mac[macpos+ 9] = (this.h[4] >>> 8) & 0xff;\n  mac[macpos+10] = (this.h[5] >>> 0) & 0xff;\n  mac[macpos+11] = (this.h[5] >>> 8) & 0xff;\n  mac[macpos+12] = (this.h[6] >>> 0) & 0xff;\n  mac[macpos+13] = (this.h[6] >>> 8) & 0xff;\n  mac[macpos+14] = (this.h[7] >>> 0) & 0xff;\n  mac[macpos+15] = (this.h[7] >>> 8) & 0xff;\n};\n\npoly1305.prototype.update = function(m, mpos, bytes) {\n  var i, want;\n\n  if (this.leftover) {\n    want = (16 - this.leftover);\n    if (want > bytes)\n      want = bytes;\n    for (i = 0; i < want; i++)\n      this.buffer[this.leftover + i] = m[mpos+i];\n    bytes -= want;\n    mpos += want;\n    this.leftover += want;\n    if (this.leftover < 16)\n      return;\n    this.blocks(this.buffer, 0, 16);\n    this.leftover = 0;\n  }\n\n  if (bytes >= 16) {\n    want = bytes - (bytes % 16);\n    this.blocks(m, mpos, want);\n    mpos += want;\n    bytes -= want;\n  }\n\n  if (bytes) {\n    for (i = 0; i < bytes; i++)\n      this.buffer[this.leftover + i] = m[mpos+i];\n    this.leftover += bytes;\n  }\n};\n\nmodule.exports = poly1305\n","/* eslint-disable camelcase */\nconst xsalsa20 = require('xsalsa20')\n\nif (new Uint16Array([1])[0] !== 1) throw new Error('Big endian architecture is not supported.')\n\nexports.crypto_stream_KEYBYTES = 32\nexports.crypto_stream_NONCEBYTES = 24\nexports.crypto_stream_PRIMITIVE = 'xsalsa20'\nexports.crypto_stream_xsalsa20_MESSAGEBYTES_MAX = Number.MAX_SAFE_INTEGER\n\nexports.crypto_stream = function (c, nonce, key) {\n  c.fill(0)\n  exports.crypto_stream_xor(c, c, nonce, key)\n}\n\nexports.crypto_stream_xor = function (c, m, nonce, key) {\n  const xor = xsalsa20(nonce, key)\n\n  xor.update(m, c)\n  xor.final()\n}\n\nexports.crypto_stream_xor_instance = function (nonce, key) {\n  return new XOR(nonce, key)\n}\n\nfunction XOR (nonce, key) {\n  this._instance = xsalsa20(nonce, key)\n}\n\nXOR.prototype.update = function (out, inp) {\n  this._instance.update(inp, out)\n}\n\nXOR.prototype.final = function () {\n  this._instance.finalize()\n  this._instance = null\n}\n","/* eslint-disable camelcase */\nconst assert = require('nanoassert')\nconst Poly1305 = require('./internal/poly1305')\nconst { crypto_verify_16 } = require('./crypto_verify')\n\nconst crypto_onetimeauth_BYTES = 16\nconst crypto_onetimeauth_KEYBYTES = 32\nconst crypto_onetimeauth_PRIMITIVE = 'poly1305'\n\nmodule.exports = {\n  crypto_onetimeauth,\n  crypto_onetimeauth_verify,\n  crypto_onetimeauth_BYTES,\n  crypto_onetimeauth_KEYBYTES,\n  crypto_onetimeauth_PRIMITIVE\n}\n\nfunction crypto_onetimeauth (mac, msg, key) {\n  assert(mac.byteLength === crypto_onetimeauth_BYTES, \"mac must be 'crypto_onetimeauth_BYTES' bytes\")\n  assert(msg.byteLength != null, 'msg must be buffer')\n  assert(key.byteLength === crypto_onetimeauth_KEYBYTES, \"key must be 'crypto_onetimeauth_KEYBYTES' bytes\")\n\n  var s = new Poly1305(key)\n  s.update(msg, 0, msg.byteLength)\n  s.finish(mac, 0)\n}\n\nfunction crypto_onetimeauth_verify (mac, msg, key) {\n  assert(mac.byteLength === crypto_onetimeauth_BYTES, \"mac must be 'crypto_onetimeauth_BYTES' bytes\")\n  assert(msg.byteLength != null, 'msg must be buffer')\n  assert(key.byteLength === crypto_onetimeauth_KEYBYTES, \"key must be 'crypto_onetimeauth_KEYBYTES' bytes\")\n\n  var tmp = new Uint8Array(16)\n  crypto_onetimeauth(tmp, msg, key)\n  return crypto_verify_16(mac, 0, tmp, 0)\n}\n","/* eslint-disable camelcase */\nconst assert = require('nanoassert')\nconst { crypto_stream, crypto_stream_xor } = require('./crypto_stream')\nconst { crypto_onetimeauth, crypto_onetimeauth_verify, crypto_onetimeauth_BYTES, crypto_onetimeauth_KEYBYTES } = require('./crypto_onetimeauth')\n\nconst crypto_secretbox_KEYBYTES = 32\nconst crypto_secretbox_NONCEBYTES = 24\nconst crypto_secretbox_ZEROBYTES = 32\nconst crypto_secretbox_BOXZEROBYTES = 16\nconst crypto_secretbox_MACBYTES = 16\n\nmodule.exports = {\n  crypto_secretbox,\n  crypto_secretbox_open,\n  crypto_secretbox_detached,\n  crypto_secretbox_open_detached,\n  crypto_secretbox_easy,\n  crypto_secretbox_open_easy,\n  crypto_secretbox_KEYBYTES,\n  crypto_secretbox_NONCEBYTES,\n  crypto_secretbox_ZEROBYTES,\n  crypto_secretbox_BOXZEROBYTES,\n  crypto_secretbox_MACBYTES\n}\n\nfunction crypto_secretbox (c, m, n, k) {\n  assert(c.byteLength === m.byteLength, \"c must be 'm.byteLength' bytes\")\n  const mlen = m.byteLength\n  assert(mlen >= crypto_secretbox_ZEROBYTES, \"mlen must be at least 'crypto_secretbox_ZEROBYTES'\")\n  assert(n.byteLength === crypto_secretbox_NONCEBYTES, \"n must be 'crypto_secretbox_NONCEBYTES' bytes\")\n  assert(k.byteLength === crypto_secretbox_KEYBYTES, \"k must be 'crypto_secretbox_KEYBYTES' bytes\")\n\n  crypto_stream_xor(c, m, n, k)\n  crypto_onetimeauth(\n    c.subarray(crypto_secretbox_BOXZEROBYTES, crypto_secretbox_BOXZEROBYTES + crypto_onetimeauth_BYTES),\n    c.subarray(crypto_secretbox_BOXZEROBYTES + crypto_onetimeauth_BYTES, c.byteLength),\n    c.subarray(0, crypto_onetimeauth_KEYBYTES)\n  )\n  c.fill(0, 0, crypto_secretbox_BOXZEROBYTES)\n}\n\nfunction crypto_secretbox_open (m, c, n, k) {\n  assert(c.byteLength === m.byteLength, \"c must be 'm.byteLength' bytes\")\n  const mlen = m.byteLength\n  assert(mlen >= crypto_secretbox_ZEROBYTES, \"mlen must be at least 'crypto_secretbox_ZEROBYTES'\")\n  assert(n.byteLength === crypto_secretbox_NONCEBYTES, \"n must be 'crypto_secretbox_NONCEBYTES' bytes\")\n  assert(k.byteLength === crypto_secretbox_KEYBYTES, \"k must be 'crypto_secretbox_KEYBYTES' bytes\")\n\n  const x = new Uint8Array(crypto_onetimeauth_KEYBYTES)\n  crypto_stream(x, n, k)\n  const validMac = crypto_onetimeauth_verify(\n    c.subarray(crypto_secretbox_BOXZEROBYTES, crypto_secretbox_BOXZEROBYTES + crypto_onetimeauth_BYTES),\n    c.subarray(crypto_secretbox_BOXZEROBYTES + crypto_onetimeauth_BYTES, c.byteLength),\n    x\n  )\n\n  if (validMac === false) return false\n  crypto_stream_xor(m, c, n, k)\n  m.fill(0, 0, 32)\n  return true\n}\n\nfunction crypto_secretbox_detached (o, mac, msg, n, k) {\n  assert(o.byteLength === msg.byteLength, \"o must be 'msg.byteLength' bytes\")\n  assert(mac.byteLength === crypto_secretbox_MACBYTES, \"mac must be 'crypto_secretbox_MACBYTES' bytes\")\n  assert(n.byteLength === crypto_secretbox_NONCEBYTES, \"n must be 'crypto_secretbox_NONCEBYTES' bytes\")\n  assert(k.byteLength === crypto_secretbox_KEYBYTES, \"k must be 'crypto_secretbox_KEYBYTES' bytes\")\n\n  const tmp = new Uint8Array(msg.byteLength + mac.byteLength)\n  crypto_secretbox_easy(tmp, msg, n, k)\n  mac.set(tmp.subarray(0, mac.byteLength))\n  o.set(tmp.subarray(mac.byteLength))\n  return true\n}\n\nfunction crypto_secretbox_open_detached (msg, o, mac, n, k) {\n  assert(o.byteLength === msg.byteLength, \"o must be 'msg.byteLength' bytes\")\n  assert(mac.byteLength === crypto_secretbox_MACBYTES, \"mac must be 'crypto_secretbox_MACBYTES' bytes\")\n  assert(n.byteLength === crypto_secretbox_NONCEBYTES, \"n must be 'crypto_secretbox_NONCEBYTES' bytes\")\n  assert(k.byteLength === crypto_secretbox_KEYBYTES, \"k must be 'crypto_secretbox_KEYBYTES' bytes\")\n\n  const tmp = new Uint8Array(o.byteLength + mac.byteLength)\n  tmp.set(mac)\n  tmp.set(o, mac.byteLength)\n  return crypto_secretbox_open_easy(msg, tmp, n, k)\n}\n\nfunction crypto_secretbox_easy (o, msg, n, k) {\n  assert(o.byteLength === msg.byteLength + crypto_secretbox_MACBYTES, \"o must be 'msg.byteLength + crypto_secretbox_MACBYTES' bytes\")\n  assert(n.byteLength === crypto_secretbox_NONCEBYTES, \"n must be 'crypto_secretbox_NONCEBYTES' bytes\")\n  assert(k.byteLength === crypto_secretbox_KEYBYTES, \"k must be 'crypto_secretbox_KEYBYTES' bytes\")\n\n  const m = new Uint8Array(crypto_secretbox_ZEROBYTES + msg.byteLength)\n  const c = new Uint8Array(m.byteLength)\n  m.set(msg, crypto_secretbox_ZEROBYTES)\n  crypto_secretbox(c, m, n, k)\n  o.set(c.subarray(crypto_secretbox_BOXZEROBYTES))\n}\n\nfunction crypto_secretbox_open_easy (msg, box, n, k) {\n  assert(box.byteLength === msg.byteLength + crypto_secretbox_MACBYTES, \"box must be 'msg.byteLength + crypto_secretbox_MACBYTES' bytes\")\n  assert(n.byteLength === crypto_secretbox_NONCEBYTES, \"n must be 'crypto_secretbox_NONCEBYTES' bytes\")\n  assert(k.byteLength === crypto_secretbox_KEYBYTES, \"k must be 'crypto_secretbox_KEYBYTES' bytes\")\n\n  const c = new Uint8Array(crypto_secretbox_BOXZEROBYTES + box.byteLength)\n  const m = new Uint8Array(c.byteLength)\n  c.set(box, crypto_secretbox_BOXZEROBYTES)\n  if (crypto_secretbox_open(m, c, n, k) === false) return false\n  msg.set(m.subarray(crypto_secretbox_ZEROBYTES))\n  return true\n}\n","/* eslint-disable camelcase */\nconst { crypto_hash_sha512 } = require('./crypto_hash')\nconst { crypto_scalarmult, crypto_scalarmult_base } = require('./crypto_scalarmult')\nconst { randombytes } = require('./randombytes')\nconst { crypto_generichash_batch } = require('./crypto_generichash')\nconst { crypto_stream_xsalsa20_MESSAGEBYTES_MAX } = require('./crypto_stream')\nconst {\n  crypto_secretbox_open_easy,\n  crypto_secretbox_easy,\n  crypto_secretbox_detached,\n  crypto_secretbox_open_detached\n} = require('./crypto_secretbox')\nconst xsalsa20 = require('xsalsa20')\nconst assert = require('nanoassert')\n\nconst crypto_box_PUBLICKEYBYTES = 32\nconst crypto_box_SECRETKEYBYTES = 32\nconst crypto_box_NONCEBYTES = 24\nconst crypto_box_ZEROBYTES = 32\nconst crypto_box_BOXZEROBYTES = 16\nconst crypto_box_SEALBYTES = 48\nconst crypto_box_SEEDBYTES = 32\nconst crypto_box_BEFORENMBYTES = 32\nconst crypto_box_MACBYTES = 16\n\nconst crypto_box_curve25519xsalsa20poly1305_MACBYTES = 16\n\nconst crypto_box_MESSAGEBYTES_MAX =\n  crypto_stream_xsalsa20_MESSAGEBYTES_MAX -\n  crypto_box_curve25519xsalsa20poly1305_MACBYTES\n\nmodule.exports = {\n  crypto_box_easy,\n  crypto_box_open_easy,\n  crypto_box_keypair,\n  crypto_box_seed_keypair,\n  crypto_box_seal,\n  crypto_box_seal_open,\n  crypto_box_PUBLICKEYBYTES,\n  crypto_box_SECRETKEYBYTES,\n  crypto_box_NONCEBYTES,\n  crypto_box_ZEROBYTES,\n  crypto_box_BOXZEROBYTES,\n  crypto_box_SEALBYTES,\n  crypto_box_SEEDBYTES,\n  crypto_box_BEFORENMBYTES,\n  crypto_box_MACBYTES\n}\n\nfunction crypto_box_keypair (pk, sk) {\n  check(pk, crypto_box_PUBLICKEYBYTES)\n  check(sk, crypto_box_SECRETKEYBYTES)\n  randombytes(sk, 32)\n  return crypto_scalarmult_base(pk, sk)\n}\nfunction crypto_box_seed_keypair (pk, sk, seed) {\n  assert(pk.byteLength === crypto_box_PUBLICKEYBYTES, \"pk should be 'crypto_box_PUBLICKEYBYTES' bytes\")\n  assert(sk.byteLength === crypto_box_SECRETKEYBYTES, \"sk should be 'crypto_box_SECRETKEYBYTES' bytes\")\n  assert(sk.byteLength === crypto_box_SEEDBYTES, \"sk should be 'crypto_box_SEEDBYTES' bytes\")\n\n  const hash = new Uint8Array(64)\n  crypto_hash_sha512(hash, seed, 32)\n  sk.set(hash.subarray(0, 32))\n  hash.fill(0)\n\n  return crypto_scalarmult_base(pk, sk)\n}\n\nfunction crypto_box_seal (c, m, pk) {\n  check(c, crypto_box_SEALBYTES + m.length)\n  check(pk, crypto_box_PUBLICKEYBYTES)\n\n  var epk = c.subarray(0, crypto_box_PUBLICKEYBYTES)\n  var esk = new Uint8Array(crypto_box_SECRETKEYBYTES)\n  crypto_box_keypair(epk, esk)\n\n  var n = new Uint8Array(crypto_box_NONCEBYTES)\n  crypto_generichash_batch(n, [epk, pk])\n\n  var s = new Uint8Array(crypto_box_PUBLICKEYBYTES)\n  crypto_scalarmult(s, esk, pk)\n\n  var k = new Uint8Array(crypto_box_BEFORENMBYTES)\n  var zero = new Uint8Array(16)\n  xsalsa20.core_hsalsa20(k, zero, s, xsalsa20.SIGMA)\n\n  crypto_secretbox_easy(c.subarray(epk.length), m, n, k)\n\n  cleanup(esk)\n}\n\nfunction crypto_box_seal_open (m, c, pk, sk) {\n  check(c, crypto_box_SEALBYTES)\n  check(m, c.length - crypto_box_SEALBYTES)\n  check(pk, crypto_box_PUBLICKEYBYTES)\n  check(sk, crypto_box_SECRETKEYBYTES)\n\n  var epk = c.subarray(0, crypto_box_PUBLICKEYBYTES)\n\n  var n = new Uint8Array(crypto_box_NONCEBYTES)\n  crypto_generichash_batch(n, [epk, pk])\n\n  var s = new Uint8Array(crypto_box_PUBLICKEYBYTES)\n  crypto_scalarmult(s, sk, epk)\n\n  var k = new Uint8Array(crypto_box_BEFORENMBYTES)\n  var zero = new Uint8Array(16)\n  xsalsa20.core_hsalsa20(k, zero, s, xsalsa20.SIGMA)\n\n  return crypto_secretbox_open_easy(m, c.subarray(epk.length), n, k)\n}\n\nfunction crypto_box_beforenm (k, pk, sk) {\n  const zero = new Uint8Array(16)\n  const s = new Uint8Array(32)\n\n  assert(crypto_scalarmult(s, sk, pk) === 0)\n\n  xsalsa20.core_hsalsa20(k, zero, s, xsalsa20.SIGMA)\n\n  return true\n}\n\nfunction crypto_box_detached_afternm (c, mac, m, n, k) {\n  return crypto_secretbox_detached(c, mac, m, n, k)\n}\n\nfunction crypto_box_detached (c, mac, m, n, pk, sk) {\n  check(mac, crypto_box_MACBYTES)\n  check(n, crypto_box_NONCEBYTES)\n  check(pk, crypto_box_PUBLICKEYBYTES)\n  check(sk, crypto_box_SECRETKEYBYTES)\n\n  const k = new Uint8Array(crypto_box_BEFORENMBYTES)\n\n  assert(crypto_box_beforenm(k, pk, sk))\n\n  const ret = crypto_box_detached_afternm(c, mac, m, n, k)\n  cleanup(k)\n\n  return ret\n}\n\nfunction crypto_box_easy (c, m, n, pk, sk) {\n  assert(\n    c.length >= m.length + crypto_box_MACBYTES,\n    \"c should be at least 'm.length + crypto_box_MACBYTES' bytes\"\n  )\n  assert(\n    m.length <= crypto_box_MESSAGEBYTES_MAX,\n    \"m should be at most 'crypto_box_MESSAGEBYTES_MAX' bytes\"\n  )\n\n  return crypto_box_detached(\n    c.subarray(crypto_box_MACBYTES, m.length + crypto_box_MACBYTES),\n    c.subarray(0, crypto_box_MACBYTES),\n    m,\n    n,\n    pk,\n    sk\n  )\n}\n\nfunction crypto_box_open_detached_afternm (m, c, mac, n, k) {\n  return crypto_secretbox_open_detached(m, c, mac, n, k)\n}\n\nfunction crypto_box_open_detached (m, c, mac, n, pk, sk) {\n  const k = new Uint8Array(crypto_box_BEFORENMBYTES)\n  assert(crypto_box_beforenm(k, pk, sk))\n\n  const ret = crypto_box_open_detached_afternm(m, c, mac, n, k)\n  cleanup(k)\n\n  return ret\n}\n\nfunction crypto_box_open_easy (m, c, n, pk, sk) {\n  assert(\n    c.length >= m.length + crypto_box_MACBYTES,\n    \"c should be at least 'm.length + crypto_box_MACBYTES' bytes\"\n  )\n\n  return crypto_box_open_detached(\n    m,\n    c.subarray(crypto_box_MACBYTES, m.length + crypto_box_MACBYTES),\n    c.subarray(0, crypto_box_MACBYTES),\n    n,\n    pk,\n    sk\n  )\n}\n\nfunction check (buf, len) {\n  if (!buf || (len && buf.length < len)) throw new Error('Argument must be a buffer' + (len ? ' of length ' + len : ''))\n}\n\nfunction cleanup (arr) {\n  for (let i = 0; i < arr.length; i++) arr[i] = 0\n}\n","const assert = require('nanoassert')\nconst b4a = require('b4a')\n\nmodule.exports = Sha256\nconst SHA256_BYTES = module.exports.SHA256_BYTES = 32\nconst BLOCKSIZE = 64\n\nconst K = [\n  0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5,\n  0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n  0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3,\n  0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n  0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc,\n  0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n  0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7,\n  0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n  0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13,\n  0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n  0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3,\n  0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n  0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5,\n  0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n  0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208,\n  0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]\n\nfunction expand (a, b, c, d) {\n  var b_ = (((a >>> 17) | (a << 15)) ^ ((a >>> 19) | (a << 13)) ^ (a >>> 10)) + b\n  var d_ = (((c >>> 7) | (c << 25)) ^ ((c >>> 18) | (c << 14)) ^ (c >>> 3)) + d\n\n  return (b_ + d_) << 0\n}\n\nfunction compress (state, words) {\n  // initialise registers\n  var ch, maj, s0, s1, T1, T2\n  var [a, b, c, d, e, f, g, h] = state\n\n  // expand message schedule\n  const w = new Uint32Array(64)\n  for (let i = 0; i < 16; i++) w[i] = bswap(words[i])\n  for (let i = 16; i < 64; i++) w[i] = expand(w[i - 2], w[i - 7], w[i - 15], w[i - 16])\n  for (let i = 0; i < 64; i += 4) round(i)\n\n  state[0] = state[0] + a\n  state[1] = state[1] + b\n  state[2] = state[2] + c\n  state[3] = state[3] + d\n  state[4] = state[4] + e\n  state[5] = state[5] + f\n  state[6] = state[6] + g\n  state[7] = state[7] + h\n\n  function round (n) {\n    ch = (e & f) ^ (~e & g)\n    maj = (a & b) ^ (a & c) ^ (b & c)\n    s0 = ((a >>> 2) | (a << 30)) ^ ((a >>> 13) | (a << 19)) ^ ((a >>> 22) | (a << 10))\n    s1 = ((e >>> 6) | (e << 26)) ^ ((e >>> 11) | (e << 21)) ^ ((e >>> 25) | (e << 7))\n    T1 = h + ch + s1 + w[n] + K[n]\n    T2 = s0 + maj\n    h = d + T1\n    d = T1 + T2\n\n    ch = (h & e) ^ (~h & f)\n    maj = (d & a) ^ (d & b) ^ (a & b)\n    s0 = ((d >>> 2) | (d << 30)) ^ ((d >>> 13) | (d << 19)) ^ ((d >>> 22) | (d << 10))\n    s1 = ((h >>> 6) | (h << 26)) ^ ((h >>> 11) | (h << 21)) ^ ((h >>> 25) | (h << 7))\n    T1 = g + ch + s1 + w[n + 1] + K[n + 1]\n    T2 = s0 + maj\n    g = c + T1\n    c = T1 + T2\n\n    ch = (g & h) ^ (~g & e)\n    maj = (c & d) ^ (c & a) ^ (d & a)\n    s0 = ((c >>> 2) | (c << 30)) ^ ((c >>> 13) | (c << 19)) ^ ((c >>> 22) | (c << 10))\n    s1 = ((g >>> 6) | (g << 26)) ^ ((g >>> 11) | (g << 21)) ^ ((g >>> 25) | (g << 7))\n    T1 = f + ch + s1 + w[n + 2] + K[n + 2]\n    T2 = s0 + maj\n    f = b + T1\n    b = T1 + T2\n\n    ch = (f & g) ^ (~f & h)\n    maj = (b & c) ^ (b & d) ^ (c & d)\n    s0 = ((b >>> 2) | (b << 30)) ^ ((b >>> 13) | (b << 19)) ^ ((b >>> 22) | (b << 10))\n    s1 = ((f >>> 6) | (f << 26)) ^ ((f >>> 11) | (f << 21)) ^ ((f >>> 25) | (f << 7))\n    T1 = e + ch + s1 + w[n + 3] + K[n + 3]\n    T2 = s0 + maj\n    e = a + T1\n    a = T1 + T2\n  }\n}\n\nfunction Sha256 () {\n  if (!(this instanceof Sha256)) return new Sha256()\n\n  this.buffer = new ArrayBuffer(64)\n  this.bytesRead = 0\n  this.pos = 0\n  this.digestLength = SHA256_BYTES\n  this.finalised = false\n\n  this.load = new Uint8Array(this.buffer)\n  this.words = new Uint32Array(this.buffer)\n\n  this.state = new Uint32Array([\n    0x6a09e667,\n    0xbb67ae85,\n    0x3c6ef372,\n    0xa54ff53a,\n    0x510e527f,\n    0x9b05688c,\n    0x1f83d9ab,\n    0x5be0cd19\n  ])\n\n  return this\n}\n\nSha256.prototype.update = function (input, enc) {\n  assert(this.finalised === false, 'Hash instance finalised')\n\n  var [inputBuf, len] = formatInput(input, enc)\n  var i = 0\n  this.bytesRead += len\n\n  while (len > 0) {\n    this.load.set(inputBuf.subarray(i, i + BLOCKSIZE - this.pos), this.pos)\n    i += BLOCKSIZE - this.pos\n    len -= BLOCKSIZE - this.pos\n\n    if (len < 0) break\n\n    this.pos = 0\n    compress(this.state, this.words)\n  }\n\n  this.pos = this.bytesRead & 0x3f\n  this.load.fill(0, this.pos)\n\n  return this\n}\n\nSha256.prototype.digest = function (enc, offset = 0) {\n  assert(this.finalised === false, 'Hash instance finalised')\n  this.finalised = true\n\n  this.load.fill(0, this.pos)\n  this.load[this.pos] = 0x80\n\n  if (this.pos > 55) {\n    compress(this.state, this.words)\n\n    this.words.fill(0)\n    this.pos = 0\n  }\n\n  const view = new DataView(this.buffer)\n  view.setUint32(56, this.bytesRead / 2 ** 29)\n  view.setUint32(60, this.bytesRead << 3)\n\n  compress(this.state, this.words)\n\n  const resultBuf = new Uint8Array(this.state.map(bswap).buffer)\n\n  if (!enc) {\n    return new Uint8Array(resultBuf)\n  }\n\n  if (typeof enc === 'string') {\n    return b4a.toString(resultBuf, enc)\n  }\n\n  assert(enc instanceof Uint8Array, 'input must be Uint8Array or Buffer')\n  assert(enc.byteLength >= this.digestLength + offset, 'input not large enough for digest')\n\n  for (let i = 0; i < this.digestLength; i++) {\n    enc[i + offset] = resultBuf[i]\n  }\n\n  return enc\n}\n\nfunction HMAC (key) {\n  if (!(this instanceof HMAC)) return new HMAC(key)\n\n  this.pad = b4a.alloc(64)\n  this.inner = Sha256()\n  this.outer = Sha256()\n\n  const keyhash = b4a.alloc(32)\n  if (key.byteLength > 64) {\n    Sha256().update(key).digest(keyhash)\n    key = keyhash\n  }\n\n  this.pad.fill(0x36)\n  for (let i = 0; i < key.byteLength; i++) {\n    this.pad[i] ^= key[i]\n  }\n  this.inner.update(this.pad)\n\n  this.pad.fill(0x5c)\n  for (let i = 0; i < key.byteLength; i++) {\n    this.pad[i] ^= key[i]\n  }\n  this.outer.update(this.pad)\n\n  this.pad.fill(0)\n  keyhash.fill(0)\n}\n\nHMAC.prototype.update = function (input, enc) {\n  this.inner.update(input, enc)\n  return this\n}\n\nHMAC.prototype.digest = function (enc, offset = 0) {\n  this.outer.update(this.inner.digest())\n  return this.outer.digest(enc, offset)\n}\n\nSha256.HMAC = HMAC\n\nfunction formatInput (input, enc) {\n  var result = b4a.from(input, enc)\n\n  return [result, result.byteLength]\n}\n\nfunction bswap (a) {\n  var r = ((a & 0x00ff00ff) >>> 8) | ((a & 0x00ff00ff) << 24)\n  var l = ((a & 0xff00ff00) << 8) | ((a & 0xff00ff00) >>> 24)\n\n  return r | l\n}\n","const assert = require('nanoassert')\nconst b4a = require('b4a')\n\nconst wasm = typeof WebAssembly !== 'undefined' && require('./sha256.js')({\n  imports: {\n    debug: {\n      log (...args) {\n        console.log(...args.map(int => (int >>> 0).toString(16).padStart(8, '0')))\n      },\n      log_tee (arg) {\n        console.log((arg >>> 0).toString(16).padStart(8, '0'))\n        return arg\n      }\n    }\n  }\n})\n\nlet head = 0\nconst freeList = []\n\nmodule.exports = Sha256\nconst SHA256_BYTES = module.exports.SHA256_BYTES = 32\nconst INPUT_OFFSET = 40\nconst STATEBYTES = 108\nconst BLOCKSIZE = 64\n\nfunction Sha256 () {\n  if (!(this instanceof Sha256)) return new Sha256()\n  if (!(wasm)) throw new Error('WASM not loaded. Wait for Sha256.ready(cb)')\n\n  if (!freeList.length) {\n    freeList.push(head)\n    head += STATEBYTES // need 100 bytes for internal state\n  }\n\n  this.finalized = false\n  this.digestLength = SHA256_BYTES\n  this.pointer = freeList.pop()\n  this.pos = 0\n\n  this._memory = new Uint8Array(wasm.memory.buffer)\n  this._memory.fill(0, this.pointer, this.pointer + STATEBYTES)\n\n  if (this.pointer + this.digestLength > this._memory.length) this._realloc(this.pointer + STATEBYTES)\n}\n\nSha256.prototype._realloc = function (size) {\n  wasm.memory.grow(Math.max(0, Math.ceil(Math.abs(size - this._memory.length) / 65536)))\n  this._memory = new Uint8Array(wasm.memory.buffer)\n}\n\nSha256.prototype.update = function (input, enc) {\n  assert(this.finalized === false, 'Hash instance finalized')\n\n  if (head % 4 !== 0) head += 4 - head % 4\n  assert(head % 4 === 0, 'input shoud be aligned for int32')\n\n  const [inputBuf, length] = formatInput(input, enc)\n\n  assert(inputBuf instanceof Uint8Array, 'input must be Uint8Array or Buffer')\n\n  if (head + length > this._memory.length) this._realloc(head + input.length)\n\n  this._memory.fill(0, head, head + roundUp(length, BLOCKSIZE) - BLOCKSIZE)\n  this._memory.set(inputBuf.subarray(0, BLOCKSIZE - this.pos), this.pointer + INPUT_OFFSET + this.pos)\n  this._memory.set(inputBuf.subarray(BLOCKSIZE - this.pos), head)\n\n  this.pos = (this.pos + length) & 0x3f\n  wasm.sha256(this.pointer, head, length, 0)\n\n  return this\n}\n\nSha256.prototype.digest = function (enc, offset = 0) {\n  assert(this.finalized === false, 'Hash instance finalized')\n\n  this.finalized = true\n  freeList.push(this.pointer)\n\n  const paddingStart = this.pointer + INPUT_OFFSET + this.pos\n  this._memory.fill(0, paddingStart, this.pointer + INPUT_OFFSET + BLOCKSIZE)\n  wasm.sha256(this.pointer, head, 0, 1)\n\n  const resultBuf = this._memory.subarray(this.pointer, this.pointer + this.digestLength)\n\n  if (!enc) {\n    return resultBuf\n  }\n\n  if (typeof enc === 'string') {\n    return b4a.toString(resultBuf, enc)\n  }\n\n  assert(enc instanceof Uint8Array, 'output must be Uint8Array or Buffer')\n  assert(enc.byteLength >= this.digestLength + offset,\n    \"output must have at least 'SHA256_BYTES' bytes remaining\")\n\n  for (let i = 0; i < this.digestLength; i++) {\n    enc[i + offset] = resultBuf[i]\n  }\n\n  return enc\n}\n\nSha256.WASM = wasm\nSha256.WASM_SUPPORTED = typeof WebAssembly !== 'undefined'\n\nSha256.ready = function (cb) {\n  if (!cb) cb = noop\n  if (!wasm) return cb(new Error('WebAssembly not supported'))\n  cb()\n  return Promise.resolve()\n}\n\nSha256.prototype.ready = Sha256.ready\n\nfunction HMAC (key) {\n  if (!(this instanceof HMAC)) return new HMAC(key)\n\n  this.pad = b4a.alloc(64)\n  this.inner = Sha256()\n  this.outer = Sha256()\n\n  const keyhash = b4a.alloc(32)\n  if (key.byteLength > 64) {\n    Sha256().update(key).digest(keyhash)\n    key = keyhash\n  }\n\n  this.pad.fill(0x36)\n  for (let i = 0; i < key.byteLength; i++) {\n    this.pad[i] ^= key[i]\n  }\n  this.inner.update(this.pad)\n\n  this.pad.fill(0x5c)\n  for (let i = 0; i < key.byteLength; i++) {\n    this.pad[i] ^= key[i]\n  }\n  this.outer.update(this.pad)\n\n  this.pad.fill(0)\n  keyhash.fill(0)\n}\n\nHMAC.prototype.update = function (input, enc) {\n  this.inner.update(input, enc)\n  return this\n}\n\nHMAC.prototype.digest = function (enc, offset = 0) {\n  this.outer.update(this.inner.digest())\n  return this.outer.digest(enc, offset)\n}\n\nSha256.HMAC = HMAC\n\nfunction noop () {}\n\nfunction formatInput (input, enc) {\n  var result = b4a.from(input, enc)\n\n  return [result, result.byteLength]\n}\n\n// only works for base that is power of 2\nfunction roundUp (n, base) {\n  return (n + base - 1) & -base\n}\n","var __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[Object.keys(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __toBinary = /* @__PURE__ */ (() => {\n  var table = new Uint8Array(128);\n  for (var i = 0; i < 64; i++)\n    table[i < 26 ? i + 65 : i < 52 ? i + 71 : i < 62 ? i - 4 : i * 4 - 205] = i;\n  return (base64) => {\n    var n = base64.length, bytes2 = new Uint8Array((n - (base64[n - 1] == \"=\") - (base64[n - 2] == \"=\")) * 3 / 4 | 0);\n    for (var i2 = 0, j = 0; i2 < n; ) {\n      var c0 = table[base64.charCodeAt(i2++)], c1 = table[base64.charCodeAt(i2++)];\n      var c2 = table[base64.charCodeAt(i2++)], c3 = table[base64.charCodeAt(i2++)];\n      bytes2[j++] = c0 << 2 | c1 >> 4;\n      bytes2[j++] = c1 << 4 | c2 >> 2;\n      bytes2[j++] = c2 << 6 | c3;\n    }\n    return bytes2;\n  };\n})();\n\n// wasm-binary:./sha256.wat\nvar require_sha256 = __commonJS({\n  \"wasm-binary:./sha256.wat\"(exports2, module2) {\n    module2.exports = __toBinary(\"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\");\n  }\n});\n\n// wasm-module:./sha256.wat\nvar bytes = require_sha256();\nvar compiled = new WebAssembly.Module(bytes);\nmodule.exports = (imports) => {\n  const instance = new WebAssembly.Instance(compiled, imports);\n  return instance.exports;\n};\n","const js = require('./sha256.js')\nconst wasm = require('sha256-wasm')\n\nvar Proto = js\n\nmodule.exports = function () {\n  return new Proto()\n}\n\nmodule.exports.ready = function (cb) {\n  wasm.ready(function () { // ignore errors\n    cb()\n  })\n}\n\nmodule.exports.WASM_SUPPORTED = wasm.WASM_SUPPORTED\nmodule.exports.WASM_LOADED = false\n\nvar SHA256_BYTES = module.exports.SHA256_BYTES = 32\n\nwasm.ready(function (err) {\n  if (!err) {\n    module.exports.WASM_LOADED = true\n    module.exports = Proto = wasm\n  }\n})\n","/* eslint-disable camelcase */\nconst sha256 = require('sha256-universal')\nconst assert = require('nanoassert')\n\nif (new Uint16Array([1])[0] !== 1) throw new Error('Big endian architecture is not supported.')\n\nconst crypto_hash_sha256_BYTES = 32\n\nfunction crypto_hash_sha256 (out, m, n) {\n  assert(out.byteLength === crypto_hash_sha256_BYTES, \"out must be 'crypto_hash_sha256_BYTES' bytes long\")\n\n  sha256().update(m.subarray(0, n)).digest(out)\n  return 0\n}\n\nmodule.exports = {\n  crypto_hash_sha256,\n  crypto_hash_sha256_BYTES\n}\n","/* eslint-disable camelcase */\nconst assert = require('nanoassert')\nconst randombytes_buf = require('./randombytes').randombytes_buf\nconst blake2b = require('blake2b')\n\nmodule.exports.crypto_kdf_PRIMITIVE = 'blake2b'\nmodule.exports.crypto_kdf_BYTES_MIN = 16\nmodule.exports.crypto_kdf_BYTES_MAX = 64\nmodule.exports.crypto_kdf_CONTEXTBYTES = 8\nmodule.exports.crypto_kdf_KEYBYTES = 32\n\nfunction STORE64_LE (dest, int) {\n  var mul = 1\n  var i = 0\n  dest[0] = int & 0xFF\n  while (++i < 8 && (mul *= 0x100)) {\n    dest[i] = (int / mul) & 0xFF\n  }\n}\n\nmodule.exports.crypto_kdf_derive_from_key = function crypto_kdf_derive_from_key (subkey, subkey_id, ctx, key) {\n  assert(subkey.length >= module.exports.crypto_kdf_BYTES_MIN, 'subkey must be at least crypto_kdf_BYTES_MIN')\n  assert(subkey_id >= 0 && subkey_id <= 0x1fffffffffffff, 'subkey_id must be safe integer')\n  assert(ctx.length >= module.exports.crypto_kdf_CONTEXTBYTES, 'context must be at least crypto_kdf_CONTEXTBYTES')\n\n  var ctx_padded = new Uint8Array(blake2b.PERSONALBYTES)\n  var salt = new Uint8Array(blake2b.SALTBYTES)\n\n  ctx_padded.set(ctx, 0, module.exports.crypto_kdf_CONTEXTBYTES)\n  STORE64_LE(salt, subkey_id)\n\n  var outlen = Math.min(subkey.length, module.exports.crypto_kdf_BYTES_MAX)\n  blake2b(outlen, key.subarray(0, module.exports.crypto_kdf_KEYBYTES), salt, ctx_padded, true)\n    .final(subkey)\n}\n\nmodule.exports.crypto_kdf_keygen = function crypto_kdf_keygen (out) {\n  assert(out.length >= module.exports.crypto_kdf_KEYBYTES, 'out.length must be crypto_kdf_KEYBYTES')\n  randombytes_buf(out.subarray(0, module.exports.crypto_kdf_KEYBYTES))\n}\n","/* eslint-disable camelcase */\nconst { crypto_scalarmult_base } = require('./crypto_scalarmult')\nconst { crypto_generichash } = require('./crypto_generichash')\nconst { randombytes_buf } = require('./randombytes')\nconst assert = require('nanoassert')\n\nconst crypto_kx_SEEDBYTES = 32\nconst crypto_kx_PUBLICKEYBYTES = 32\nconst crypto_kx_SECRETKEYBYTES = 32\n\nfunction crypto_kx_keypair (pk, sk) {\n  assert(pk.byteLength === crypto_kx_PUBLICKEYBYTES, \"pk must be 'crypto_kx_PUBLICKEYBYTES' bytes\")\n  assert(sk.byteLength === crypto_kx_SECRETKEYBYTES, \"sk must be 'crypto_kx_SECRETKEYBYTES' bytes\")\n\n  randombytes_buf(sk, crypto_kx_SECRETKEYBYTES)\n  return crypto_scalarmult_base(pk, sk)\n}\n\nfunction crypto_kx_seed_keypair (pk, sk, seed) {\n  assert(pk.byteLength === crypto_kx_PUBLICKEYBYTES, \"pk must be 'crypto_kx_PUBLICKEYBYTES' bytes\")\n  assert(sk.byteLength === crypto_kx_SECRETKEYBYTES, \"sk must be 'crypto_kx_SECRETKEYBYTES' bytes\")\n  assert(seed.byteLength === crypto_kx_SEEDBYTES, \"seed must be 'crypto_kx_SEEDBYTES' bytes\")\n\n  crypto_generichash(sk, seed)\n  return crypto_scalarmult_base(pk, sk)\n}\n\nmodule.exports = {\n  crypto_kx_keypair,\n  crypto_kx_seed_keypair,\n  crypto_kx_SEEDBYTES,\n  crypto_kx_SECRETKEYBYTES,\n  crypto_kx_PUBLICKEYBYTES\n}\n","const assert = require('nanoassert')\n\nmodule.exports = Chacha20\n\nconst constant = [1634760805, 857760878, 2036477234, 1797285236]\n\nfunction Chacha20 (nonce, key, counter) {\n  assert(key.byteLength === 32)\n  assert(nonce.byteLength === 8 || nonce.byteLength === 12)\n\n  const n = new Uint32Array(nonce.buffer, nonce.byteOffset, nonce.byteLength / 4)\n  const k = new Uint32Array(key.buffer, key.byteOffset, key.byteLength / 4)\n\n  if (!counter) counter = 0\n  assert(counter < Number.MAX_SAFE_INTEGER)\n\n  this.finalized = false\n  this.pos = 0\n  this.state = new Uint32Array(16)\n\n  for (let i = 0; i < 4; i++) this.state[i] = constant[i]\n  for (let i = 0; i < 8; i++) this.state[4 + i] = k[i]\n\n  this.state[12] = counter & 0xffffffff\n\n  if (n.byteLength === 8) {\n    this.state[13] = (counter && 0xffffffff00000000) >> 32\n    this.state[14] = n[0]\n    this.state[15] = n[1]\n  } else {\n    this.state[13] = n[0]\n    this.state[14] = n[1]\n    this.state[15] = n[2]\n  }\n\n  return this\n}\n\nChacha20.prototype.update = function (output, input) {\n  assert(!this.finalized, 'cipher finalized.')\n  assert(output.byteLength >= input.byteLength,\n    'output cannot be shorter than input.')\n\n  let len = input.length\n  let offset = this.pos % 64\n  this.pos += len\n\n  // input position\n  let j = 0\n\n  let keyStream = chacha20Block(this.state)\n\n  // try to finsih the current block\n  while (offset > 0 && len > 0) {\n    output[j] = input[j++] ^ keyStream[offset]\n    offset = (offset + 1) & 0x3f\n    if (!offset) this.state[12]++\n    len--\n  }\n\n  // encrypt rest block at a time\n  while (len > 0) {\n    keyStream = chacha20Block(this.state)\n\n    // less than a full block remaining\n    if (len < 64) {\n      for (let i = 0; i < len; i++) {\n        output[j] = input[j++] ^ keyStream[offset++]\n        offset &= 0x3f\n      }\n\n      return\n    }\n\n    for (; offset < 64;) {\n      output[j] = input[j++] ^ keyStream[offset++]\n    }\n\n    this.state[12]++\n    offset = 0\n    len -= 64\n  }\n}\n\nChacha20.prototype.final = function () {\n  this.state.fill(0)\n  this.pos = 0\n  this.finalized = true\n}\n\nfunction chacha20Block (state) {\n  // working state\n  const ws = new Uint32Array(16)\n  for (let i = 16; i--;) ws[i] = state[i]\n\n  for (let i = 0; i < 20; i += 2) {\n    QR(ws, 0, 4, 8, 12) // column 0\n    QR(ws, 1, 5, 9, 13) // column 1\n    QR(ws, 2, 6, 10, 14) // column 2\n    QR(ws, 3, 7, 11, 15) // column 3\n\n    QR(ws, 0, 5, 10, 15) // diagonal 1 (main diagonal)\n    QR(ws, 1, 6, 11, 12) // diagonal 2\n    QR(ws, 2, 7, 8, 13) // diagonal 3\n    QR(ws, 3, 4, 9, 14) // diagonal 4\n  }\n\n  for (let i = 0; i < 16; i++) {\n    ws[i] += state[i]\n  }\n\n  return new Uint8Array(ws.buffer, ws.byteOffset, ws.byteLength)\n}\n\nfunction rotl (a, b) {\n  return ((a << b) | (a >>> (32 - b)))\n}\n\nfunction QR (obj, a, b, c, d) {\n  obj[a] += obj[b]\n  obj[d] ^= obj[a]\n  obj[d] = rotl(obj[d], 16)\n\n  obj[c] += obj[d]\n  obj[b] ^= obj[c]\n  obj[b] = rotl(obj[b], 12)\n\n  obj[a] += obj[b]\n  obj[d] ^= obj[a]\n  obj[d] = rotl(obj[d], 8)\n\n  obj[c] += obj[d]\n  obj[b] ^= obj[c]\n  obj[b] = rotl(obj[b], 7)\n}\n","const assert = require('nanoassert')\nconst Chacha20 = require('chacha20-universal')\n\nif (new Uint16Array([1])[0] !== 1) throw new Error('Big endian architecture is not supported.')\n\nexports.crypto_stream_chacha20_KEYBYTES = 32\nexports.crypto_stream_chacha20_NONCEBYTES = 8\nexports.crypto_stream_chacha20_MESSAGEBYTES_MAX = Number.MAX_SAFE_INTEGER\n\nexports.crypto_stream_chacha20_ietf_KEYBYTES = 32\nexports.crypto_stream_chacha20_ietf_NONCEBYTES = 12\nexports.crypto_stream_chacha20_ietf_MESSAGEBYTES_MAX = 2 ** 32\n\nexports.crypto_stream_chacha20 = function (c, n, k) {\n  c.fill(0)\n  exports.crypto_stream_chacha20_xor(c, c, n, k)\n}\n\nexports.crypto_stream_chacha20_xor = function (c, m, n, k) {\n  assert(n.byteLength === exports.crypto_stream_chacha20_NONCEBYTES,\n    'n should be crypto_stream_chacha20_NONCEBYTES')\n  assert(k.byteLength === exports.crypto_stream_chacha20_KEYBYTES,\n    'k should be crypto_stream_chacha20_KEYBYTES')\n\n  const xor = new Chacha20(n, k)\n  xor.update(c, m)\n  xor.final()\n}\n\nexports.crypto_stream_chacha20_xor_ic = function (c, m, n, ic, k) {\n  assert(n.byteLength === exports.crypto_stream_chacha20_NONCEBYTES,\n    'n should be crypto_stream_chacha20_NONCEBYTES')\n  assert(k.byteLength === exports.crypto_stream_chacha20_KEYBYTES,\n    'k should be crypto_stream_chacha20_KEYBYTES')\n\n  const xor = new Chacha20(n, k, ic)\n  xor.update(c, m)\n  xor.final()\n}\n\nexports.crypto_stream_chacha20_xor_instance = function (n, k) {\n  assert(n.byteLength === exports.crypto_stream_chacha20_NONCEBYTES,\n    'n should be crypto_stream_chacha20_NONCEBYTES')\n  assert(k.byteLength === exports.crypto_stream_chacha20_KEYBYTES,\n    'k should be crypto_stream_chacha20_KEYBYTES')\n\n  return new Chacha20(n, k)\n}\n\nexports.crypto_stream_chacha20_ietf = function (c, n, k) {\n  c.fill(0)\n  exports.crypto_stream_chacha20_ietf_xor(c, c, n, k)\n}\n\nexports.crypto_stream_chacha20_ietf_xor = function (c, m, n, k) {\n  assert(n.byteLength === exports.crypto_stream_chacha20_ietf_NONCEBYTES,\n    'n should be crypto_stream_chacha20_ietf_NONCEBYTES')\n  assert(k.byteLength === exports.crypto_stream_chacha20_ietf_KEYBYTES,\n    'k should be crypto_stream_chacha20_ietf_KEYBYTES')\n\n  const xor = new Chacha20(n, k)\n  xor.update(c, m)\n  xor.final()\n}\n\nexports.crypto_stream_chacha20_ietf_xor_ic = function (c, m, n, ic, k) {\n  assert(n.byteLength === exports.crypto_stream_chacha20_ietf_NONCEBYTES,\n    'n should be crypto_stream_chacha20_ietf_NONCEBYTES')\n  assert(k.byteLength === exports.crypto_stream_chacha20_ietf_KEYBYTES,\n    'k should be crypto_stream_chacha20_ietf_KEYBYTES')\n\n  const xor = new Chacha20(n, k, ic)\n  xor.update(c, m)\n  xor.final()\n}\n\nexports.crypto_stream_chacha20_ietf_xor_instance = function (n, k) {\n  assert(n.byteLength === exports.crypto_stream_chacha20_ietf_NONCEBYTES,\n    'n should be crypto_stream_chacha20_ietf_NONCEBYTES')\n  assert(k.byteLength === exports.crypto_stream_chacha20_ietf_KEYBYTES,\n    'k should be crypto_stream_chacha20_ietf_KEYBYTES')\n\n  return new Chacha20(n, k)\n}\n","/* eslint-disable camelcase */\nconst { crypto_stream_chacha20_ietf, crypto_stream_chacha20_ietf_xor_ic } = require('./crypto_stream_chacha20')\nconst { crypto_verify_16 } = require('./crypto_verify')\nconst Poly1305 = require('./internal/poly1305')\nconst assert = require('nanoassert')\n\nconst crypto_aead_chacha20poly1305_ietf_KEYBYTES = 32\nconst crypto_aead_chacha20poly1305_ietf_NSECBYTES = 0\nconst crypto_aead_chacha20poly1305_ietf_NPUBBYTES = 12\nconst crypto_aead_chacha20poly1305_ietf_ABYTES = 16\nconst crypto_aead_chacha20poly1305_ietf_MESSAGEBYTES_MAX = Number.MAX_SAFE_INTEGER\n\nconst _pad0 = new Uint8Array(16)\n\nfunction crypto_aead_chacha20poly1305_ietf_encrypt (c, m, ad, nsec, npub, k) {\n  if (ad === null) return crypto_aead_chacha20poly1305_ietf_encrypt(c, m, new Uint8Array(0), nsec, npub, k)\n\n  assert(c.byteLength === m.byteLength + crypto_aead_chacha20poly1305_ietf_ABYTES,\n    \"ciphertext should be 'crypto_aead_chacha20poly1305_ietf_ABYTES' longer than message\")\n  assert(npub.byteLength === crypto_aead_chacha20poly1305_ietf_NPUBBYTES,\n    \"npub should be 'crypto_aead_chacha20poly1305_ietf_NPUBBYTES' long\")\n  assert(k.byteLength === crypto_aead_chacha20poly1305_ietf_KEYBYTES,\n    \"k should be 'crypto_aead_chacha20poly1305_ietf_KEYBYTES' long\")\n  assert(m.byteLength <= crypto_aead_chacha20poly1305_ietf_MESSAGEBYTES_MAX, 'message is too large')\n\n  const ret = crypto_aead_chacha20poly1305_ietf_encrypt_detached(c.subarray(0, m.byteLength),\n    c.subarray(m.byteLength), m, ad, nsec, npub, k)\n\n  return m.byteLength + ret\n}\n\nfunction crypto_aead_chacha20poly1305_ietf_encrypt_detached (c, mac, m, ad, nsec, npub, k) {\n  if (ad === null) return crypto_aead_chacha20poly1305_ietf_encrypt_detached(c, mac, m, new Uint8Array(0), nsec, npub, k)\n\n  assert(c.byteLength === m.byteLength, 'ciphertext should be same length than message')\n  assert(npub.byteLength === crypto_aead_chacha20poly1305_ietf_NPUBBYTES,\n    \"npub should be 'crypto_aead_chacha20poly1305_ietf_NPUBBYTES' long\")\n  assert(k.byteLength === crypto_aead_chacha20poly1305_ietf_KEYBYTES,\n    \"k should be 'crypto_aead_chacha20poly1305_ietf_KEYBYTES' long\")\n  assert(m.byteLength <= crypto_aead_chacha20poly1305_ietf_MESSAGEBYTES_MAX, 'message is too large')\n  assert(mac.byteLength <= crypto_aead_chacha20poly1305_ietf_ABYTES,\n    \"mac should be 'crypto_aead_chacha20poly1305_ietf_ABYTES' long\")\n\n  const block0 = new Uint8Array(64)\n  var slen = new Uint8Array(8)\n\n  crypto_stream_chacha20_ietf(block0, npub, k)\n  const poly = new Poly1305(block0)\n  block0.fill(0)\n\n  poly.update(ad, 0, ad.byteLength)\n  poly.update(_pad0, 0, (0x10 - ad.byteLength) & 0xf)\n\n  crypto_stream_chacha20_ietf_xor_ic(c, m, npub, 1, k)\n\n  poly.update(c, 0, m.byteLength)\n  poly.update(_pad0, 0, (0x10 - m.byteLength) & 0xf)\n\n  write64LE(slen, 0, ad.byteLength)\n  poly.update(slen, 0, slen.byteLength)\n\n  write64LE(slen, 0, m.byteLength)\n  poly.update(slen, 0, slen.byteLength)\n\n  poly.finish(mac, 0)\n  slen.fill(0)\n\n  return crypto_aead_chacha20poly1305_ietf_ABYTES\n}\n\nfunction crypto_aead_chacha20poly1305_ietf_decrypt (m, nsec, c, ad, npub, k) {\n  if (ad === null) return crypto_aead_chacha20poly1305_ietf_decrypt(m, nsec, c, new Uint8Array(0), npub, k)\n\n  assert(m.byteLength === c.byteLength - crypto_aead_chacha20poly1305_ietf_ABYTES,\n    \"message should be 'crypto_aead_chacha20poly1305_ietf_ABYTES' shorter than ciphertext\")\n  assert(npub.byteLength === crypto_aead_chacha20poly1305_ietf_NPUBBYTES,\n    \"npub should be 'crypto_aead_chacha20poly1305_ietf_NPUBBYTES' long\")\n  assert(k.byteLength === crypto_aead_chacha20poly1305_ietf_KEYBYTES,\n    \"k should be 'crypto_aead_chacha20poly1305_ietf_KEYBYTES' long\")\n  assert(m.byteLength <= crypto_aead_chacha20poly1305_ietf_MESSAGEBYTES_MAX, 'message is too large')\n\n  if (c.byteLength < crypto_aead_chacha20poly1305_ietf_ABYTES) throw new Error('could not verify data')\n\n  crypto_aead_chacha20poly1305_ietf_decrypt_detached(\n    m, nsec,\n    c.subarray(0, c.byteLength - crypto_aead_chacha20poly1305_ietf_ABYTES),\n    c.subarray(c.byteLength - crypto_aead_chacha20poly1305_ietf_ABYTES),\n    ad, npub, k)\n\n  return c.byteLength - crypto_aead_chacha20poly1305_ietf_ABYTES\n}\n\nfunction crypto_aead_chacha20poly1305_ietf_decrypt_detached (m, nsec, c, mac, ad, npub, k) {\n  if (ad === null) return crypto_aead_chacha20poly1305_ietf_decrypt_detached(m, nsec, c, mac, new Uint8Array(0), npub, k)\n\n  assert(c.byteLength === m.byteLength, 'message should be same length than ciphertext')\n  assert(npub.byteLength === crypto_aead_chacha20poly1305_ietf_NPUBBYTES,\n    \"npub should be 'crypto_aead_chacha20poly1305_ietf_NPUBBYTES' long\")\n  assert(k.byteLength === crypto_aead_chacha20poly1305_ietf_KEYBYTES,\n    \"k should be 'crypto_aead_chacha20poly1305_ietf_KEYBYTES' long\")\n  assert(m.byteLength <= crypto_aead_chacha20poly1305_ietf_MESSAGEBYTES_MAX, 'message is too large')\n  assert(mac.byteLength <= crypto_aead_chacha20poly1305_ietf_ABYTES,\n    \"mac should be 'crypto_aead_chacha20poly1305_ietf_ABYTES' long\")\n\n  const block0 = new Uint8Array(64)\n  const slen = new Uint8Array(8)\n  const computed_mac = new Uint8Array(crypto_aead_chacha20poly1305_ietf_ABYTES)\n\n  crypto_stream_chacha20_ietf(block0, npub, k)\n  const poly = new Poly1305(block0)\n  block0.fill(0)\n\n  poly.update(ad, 0, ad.byteLength)\n  poly.update(_pad0, 0, (0x10 - ad.byteLength) & 0xf)\n\n  const mlen = c.byteLength\n  poly.update(c, 0, mlen)\n  poly.update(_pad0, 0, (0x10 - mlen) & 0xf)\n\n  write64LE(slen, 0, ad.byteLength)\n  poly.update(slen, 0, slen.byteLength)\n\n  write64LE(slen, 0, mlen)\n  poly.update(slen, 0, slen.byteLength)\n\n  poly.finish(computed_mac, 0)\n\n  assert(computed_mac.byteLength === 16)\n  const ret = crypto_verify_16(computed_mac, 0, mac, 0)\n\n  computed_mac.fill(0)\n  slen.fill(0)\n\n  if (!ret) {\n    m.fill(0)\n    throw new Error('could not verify data')\n  }\n\n  crypto_stream_chacha20_ietf_xor_ic(m, c, npub, 1, k)\n}\n\nfunction write64LE (buf, offset, int) {\n  buf.fill(0, 0, 8)\n\n  const view = new DataView(buf.buffer, buf.byteOffset, buf.byteLength)\n  view.setUint32(offset, int & 0xffffffff, true)\n  view.setUint32(offset + 4, (int / 2 ** 32) & 0xffffffff, true)\n}\n\nmodule.exports = {\n  crypto_aead_chacha20poly1305_ietf_encrypt,\n  crypto_aead_chacha20poly1305_ietf_encrypt_detached,\n  crypto_aead_chacha20poly1305_ietf_decrypt,\n  crypto_aead_chacha20poly1305_ietf_decrypt_detached,\n  crypto_aead_chacha20poly1305_ietf_ABYTES,\n  crypto_aead_chacha20poly1305_ietf_KEYBYTES,\n  crypto_aead_chacha20poly1305_ietf_NPUBBYTES,\n  crypto_aead_chacha20poly1305_ietf_NSECBYTES,\n  crypto_aead_chacha20poly1305_ietf_MESSAGEBYTES_MAX\n}\n","module.exports = fallback\n\nfunction _add (a, b) {\n  var rl = a.l + b.l\n  var a2 = {\n    h: a.h + b.h + (rl / 2 >>> 31) >>> 0,\n    l: rl >>> 0\n  }\n  a.h = a2.h\n  a.l = a2.l\n}\n\nfunction _xor (a, b) {\n  a.h ^= b.h\n  a.h >>>= 0\n  a.l ^= b.l\n  a.l >>>= 0\n}\n\nfunction _rotl (a, n) {\n  var a2 = {\n    h: a.h << n | a.l >>> (32 - n),\n    l: a.l << n | a.h >>> (32 - n)\n  }\n  a.h = a2.h\n  a.l = a2.l\n}\n\nfunction _rotl32 (a) {\n  var al = a.l\n  a.l = a.h\n  a.h = al\n}\n\nfunction _compress (v0, v1, v2, v3) {\n  _add(v0, v1)\n  _add(v2, v3)\n  _rotl(v1, 13)\n  _rotl(v3, 16)\n  _xor(v1, v0)\n  _xor(v3, v2)\n  _rotl32(v0)\n  _add(v2, v1)\n  _add(v0, v3)\n  _rotl(v1, 17)\n  _rotl(v3, 21)\n  _xor(v1, v2)\n  _xor(v3, v0)\n  _rotl32(v2)\n}\n\nfunction _get_int (a, offset) {\n  return (a[offset + 3] << 24) | (a[offset + 2] << 16) | (a[offset + 1] << 8) | a[offset]\n}\n\nfunction fallback (out, m, key) { // modified from https://github.com/jedisct1/siphash-js to use uint8arrays\n  var k0 = {h: _get_int(key, 4), l: _get_int(key, 0)}\n  var k1 = {h: _get_int(key, 12), l: _get_int(key, 8)}\n  var v0 = {h: k0.h, l: k0.l}\n  var v2 = k0\n  var v1 = {h: k1.h, l: k1.l}\n  var v3 = k1\n  var mi\n  var mp = 0\n  var ml = m.length\n  var ml7 = ml - 7\n  var buf = new Uint8Array(new ArrayBuffer(8))\n\n  _xor(v0, {h: 0x736f6d65, l: 0x70736575})\n  _xor(v1, {h: 0x646f7261, l: 0x6e646f6d})\n  _xor(v2, {h: 0x6c796765, l: 0x6e657261})\n  _xor(v3, {h: 0x74656462, l: 0x79746573})\n\n  while (mp < ml7) {\n    mi = {h: _get_int(m, mp + 4), l: _get_int(m, mp)}\n    _xor(v3, mi)\n    _compress(v0, v1, v2, v3)\n    _compress(v0, v1, v2, v3)\n    _xor(v0, mi)\n    mp += 8\n  }\n\n  buf[7] = ml\n  var ic = 0\n  while (mp < ml) {\n    buf[ic++] = m[mp++]\n  }\n  while (ic < 7) {\n    buf[ic++] = 0\n  }\n\n  mi = {\n    h: buf[7] << 24 | buf[6] << 16 | buf[5] << 8 | buf[4],\n    l: buf[3] << 24 | buf[2] << 16 | buf[1] << 8 | buf[0]\n  }\n\n  _xor(v3, mi)\n  _compress(v0, v1, v2, v3)\n  _compress(v0, v1, v2, v3)\n  _xor(v0, mi)\n  _xor(v2, { h: 0, l: 0xff })\n  _compress(v0, v1, v2, v3)\n  _compress(v0, v1, v2, v3)\n  _compress(v0, v1, v2, v3)\n  _compress(v0, v1, v2, v3)\n\n  var h = v0\n  _xor(h, v1)\n  _xor(h, v2)\n  _xor(h, v3)\n\n  out[0] = h.l & 0xff\n  out[1] = (h.l >> 8) & 0xff\n  out[2] = (h.l >> 16) & 0xff\n  out[3] = (h.l >> 24) & 0xff\n  out[4] = h.h & 0xff\n  out[5] = (h.h >> 8) & 0xff\n  out[6] = (h.h >> 16) & 0xff\n  out[7] = (h.h >> 24) & 0xff\n}\n","var assert = require('nanoassert')\nvar wasm = typeof WebAssembly !== 'undefined' && require('./siphash24')()\nvar fallback = require('./fallback')\n\nmodule.exports = siphash24\n\nvar BYTES = siphash24.BYTES = 8\nvar KEYBYTES = siphash24.KEYBYTES = 16\n\nsiphash24.WASM_SUPPORTED = !!wasm\nsiphash24.WASM_LOADED = !!wasm\n\nvar memory = new Uint8Array(wasm.memory.buffer)\n\nfunction siphash24 (data, key, out, noAssert) {\n  if (!out) out = new Uint8Array(8)\n\n  if (noAssert !== true) {\n    assert(out.length >= BYTES, 'output must be at least ' + BYTES)\n    assert(key.length >= KEYBYTES, 'key must be at least ' + KEYBYTES)\n  }\n\n  if (wasm) {\n    if (data.length + 24 > memory.length) realloc(data.length + 24)\n    memory.set(key, 8)\n    memory.set(data, 24)\n    wasm.siphash(24, data.length)\n    out.set(memory.subarray(0, 8))\n  } else {\n    fallback(out, data, key)\n  }\n\n  return out\n}\n\nfunction realloc (size) {\n  wasm.memory.grow(Math.max(0, Math.ceil(Math.abs(size - memory.length) / 65536)))\n  memory = new Uint8Array(wasm.memory.buffer)\n}\n","var __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[Object.keys(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __toBinary = /* @__PURE__ */ (() => {\n  var table = new Uint8Array(128);\n  for (var i = 0; i < 64; i++)\n    table[i < 26 ? i + 65 : i < 52 ? i + 71 : i < 62 ? i - 4 : i * 4 - 205] = i;\n  return (base64) => {\n    var n = base64.length, bytes2 = new Uint8Array((n - (base64[n - 1] == \"=\") - (base64[n - 2] == \"=\")) * 3 / 4 | 0);\n    for (var i2 = 0, j = 0; i2 < n; ) {\n      var c0 = table[base64.charCodeAt(i2++)], c1 = table[base64.charCodeAt(i2++)];\n      var c2 = table[base64.charCodeAt(i2++)], c3 = table[base64.charCodeAt(i2++)];\n      bytes2[j++] = c0 << 2 | c1 >> 4;\n      bytes2[j++] = c1 << 4 | c2 >> 2;\n      bytes2[j++] = c2 << 6 | c3;\n    }\n    return bytes2;\n  };\n})();\n\n// wasm-binary:./siphash24.wat\nvar require_siphash24 = __commonJS({\n  \"wasm-binary:./siphash24.wat\"(exports2, module2) {\n    module2.exports = __toBinary(\"AGFzbQEAAAABBgFgAn9/AAMCAQAFBQEBCpBOBxQCBm1lbW9yeQIAB3NpcGhhc2gAAArdCAHaCAIIfgJ/QvXKzYPXrNu38wAhAkLt3pHzlszct+QAIQNC4eSV89bs2bzsACEEQvPK0cunjNmy9AAhBUEIKQMAIQdBECkDACEIIAGtQjiGIQYgAUEHcSELIAAgAWogC2shCiAFIAiFIQUgBCAHhSEEIAMgCIUhAyACIAeFIQICQANAIAAgCkYNASAAKQMAIQkgBSAJhSEFIAIgA3whAiADQg2JIQMgAyAChSEDIAJCIIkhAiAEIAV8IQQgBUIQiSEFIAUgBIUhBSACIAV8IQIgBUIViSEFIAUgAoUhBSAEIAN8IQQgA0IRiSEDIAMgBIUhAyAEQiCJIQQgAiADfCECIANCDYkhAyADIAKFIQMgAkIgiSECIAQgBXwhBCAFQhCJIQUgBSAEhSEFIAIgBXwhAiAFQhWJIQUgBSAChSEFIAQgA3whBCADQhGJIQMgAyAEhSEDIARCIIkhBCACIAmFIQIgAEEIaiEADAALCwJAAkACQAJAAkACQAJAAkAgCw4HBwYFBAMCAQALIAYgADEABkIwhoQhBgsgBiAAMQAFQiiGhCEGCyAGIAAxAARCIIaEIQYLIAYgADEAA0IYhoQhBgsgBiAAMQACQhCGhCEGCyAGIAAxAAFCCIaEIQYLIAYgADEAAIQhBgsgBSAGhSEFIAIgA3whAiADQg2JIQMgAyAChSEDIAJCIIkhAiAEIAV8IQQgBUIQiSEFIAUgBIUhBSACIAV8IQIgBUIViSEFIAUgAoUhBSAEIAN8IQQgA0IRiSEDIAMgBIUhAyAEQiCJIQQgAiADfCECIANCDYkhAyADIAKFIQMgAkIgiSECIAQgBXwhBCAFQhCJIQUgBSAEhSEFIAIgBXwhAiAFQhWJIQUgBSAChSEFIAQgA3whBCADQhGJIQMgAyAEhSEDIARCIIkhBCACIAaFIQIgBEL/AYUhBCACIAN8IQIgA0INiSEDIAMgAoUhAyACQiCJIQIgBCAFfCEEIAVCEIkhBSAFIASFIQUgAiAFfCECIAVCFYkhBSAFIAKFIQUgBCADfCEEIANCEYkhAyADIASFIQMgBEIgiSEEIAIgA3whAiADQg2JIQMgAyAChSEDIAJCIIkhAiAEIAV8IQQgBUIQiSEFIAUgBIUhBSACIAV8IQIgBUIViSEFIAUgAoUhBSAEIAN8IQQgA0IRiSEDIAMgBIUhAyAEQiCJIQQgAiADfCECIANCDYkhAyADIAKFIQMgAkIgiSECIAQgBXwhBCAFQhCJIQUgBSAEhSEFIAIgBXwhAiAFQhWJIQUgBSAChSEFIAQgA3whBCADQhGJIQMgAyAEhSEDIARCIIkhBCACIAN8IQIgA0INiSEDIAMgAoUhAyACQiCJIQIgBCAFfCEEIAVCEIkhBSAFIASFIQUgAiAFfCECIAVCFYkhBSAFIAKFIQUgBCADfCEEIANCEYkhAyADIASFIQMgBEIgiSEEQQAgAiADIAQgBYWFhTcDAAs=\");\n  }\n});\n\n// wasm-module:./siphash24.wat\nvar bytes = require_siphash24();\nvar compiled = new WebAssembly.Module(bytes);\nmodule.exports = (imports) => {\n  const instance = new WebAssembly.Instance(compiled, imports);\n  return instance.exports;\n};\n","var siphash = require('siphash24')\n\nif (new Uint16Array([1])[0] !== 1) throw new Error('Big endian architecture is not supported.')\n\nexports.crypto_shorthash_PRIMITIVE = 'siphash24'\nexports.crypto_shorthash_BYTES = siphash.BYTES\nexports.crypto_shorthash_KEYBYTES = siphash.KEYBYTES\nexports.crypto_shorthash_WASM_SUPPORTED = siphash.WASM_SUPPORTED\nexports.crypto_shorthash_WASM_LOADED = siphash.WASM_LOADED\nexports.crypto_shorthash = shorthash\n\nfunction shorthash (out, data, key, noAssert) {\n  siphash(data, key, out, noAssert)\n}\n","/* eslint-disable camelcase, one-var */\nconst { crypto_verify_32 } = require('./crypto_verify')\nconst { crypto_hash } = require('./crypto_hash')\nconst {\n  gf, gf0, gf1, D, D2,\n  X, Y, I, A, Z, M, S,\n  sel25519, pack25519,\n  inv25519, unpack25519\n} = require('./internal/ed25519')\nconst { randombytes } = require('./randombytes')\nconst { crypto_scalarmult_BYTES } = require('./crypto_scalarmult.js')\nconst { crypto_hash_sha512_BYTES } = require('./crypto_hash.js')\nconst assert = require('nanoassert')\n\nconst crypto_sign_ed25519_PUBLICKEYBYTES = 32\nconst crypto_sign_ed25519_SECRETKEYBYTES = 64\nconst crypto_sign_ed25519_SEEDBYTES = 32\nconst crypto_sign_ed25519_BYTES = 64\n\nconst crypto_sign_BYTES = crypto_sign_ed25519_BYTES\nconst crypto_sign_PUBLICKEYBYTES = crypto_sign_ed25519_PUBLICKEYBYTES\nconst crypto_sign_SECRETKEYBYTES = crypto_sign_ed25519_SECRETKEYBYTES\nconst crypto_sign_SEEDBYTES = crypto_sign_ed25519_SEEDBYTES\n\nmodule.exports = {\n  crypto_sign_keypair,\n  crypto_sign_seed_keypair,\n  crypto_sign,\n  crypto_sign_detached,\n  crypto_sign_open,\n  crypto_sign_verify_detached,\n  crypto_sign_BYTES,\n  crypto_sign_PUBLICKEYBYTES,\n  crypto_sign_SECRETKEYBYTES,\n  crypto_sign_SEEDBYTES,\n  crypto_sign_ed25519_PUBLICKEYBYTES,\n  crypto_sign_ed25519_SECRETKEYBYTES,\n  crypto_sign_ed25519_SEEDBYTES,\n  crypto_sign_ed25519_BYTES,\n  crypto_sign_ed25519_pk_to_curve25519,\n  crypto_sign_ed25519_sk_to_curve25519,\n  crypto_sign_ed25519_sk_to_pk,\n  unpackneg,\n  pack\n}\n\nfunction set25519 (r, a) {\n  for (let i = 0; i < 16; i++) r[i] = a[i] | 0\n}\n\nfunction pow2523 (o, i) {\n  var c = gf()\n  var a\n  for (a = 0; a < 16; a++) c[a] = i[a]\n  for (a = 250; a >= 0; a--) {\n    S(c, c)\n    if (a !== 1) M(c, c, i)\n  }\n  for (a = 0; a < 16; a++) o[a] = c[a]\n}\n\nfunction add (p, q) {\n  var a = gf(), b = gf(), c = gf(),\n    d = gf(), e = gf(), f = gf(),\n    g = gf(), h = gf(), t = gf()\n\n  Z(a, p[1], p[0])\n  Z(t, q[1], q[0])\n  M(a, a, t)\n  A(b, p[0], p[1])\n  A(t, q[0], q[1])\n  M(b, b, t)\n  M(c, p[3], q[3])\n  M(c, c, D2)\n  M(d, p[2], q[2])\n  A(d, d, d)\n  Z(e, b, a)\n  Z(f, d, c)\n  A(g, d, c)\n  A(h, b, a)\n\n  M(p[0], e, f)\n  M(p[1], h, g)\n  M(p[2], g, f)\n  M(p[3], e, h)\n}\n\nfunction cswap (p, q, b) {\n  var i\n  for (i = 0; i < 4; i++) {\n    sel25519(p[i], q[i], b)\n  }\n}\n\nfunction pack (r, p) {\n  var tx = gf(), ty = gf(), zi = gf()\n  inv25519(zi, p[2])\n  M(tx, p[0], zi)\n  M(ty, p[1], zi)\n  pack25519(r, ty)\n  r[31] ^= par25519(tx) << 7\n}\n\nfunction scalarmult (p, q, s) {\n  // don't mutate q\n  var h = [gf(q[0]), gf(q[1]), gf(q[2]), gf(q[3])]\n  var b, i\n  set25519(p[0], gf0)\n  set25519(p[1], gf1)\n  set25519(p[2], gf1)\n  set25519(p[3], gf0)\n  for (i = 255; i >= 0; --i) {\n    b = (s[(i / 8) | 0] >> (i & 7)) & 1\n    cswap(p, h, b)\n    add(h, p)\n    add(p, p)\n    cswap(p, h, b)\n  }\n}\n\nfunction scalarbase (p, s) {\n  var q = [gf(), gf(), gf(), gf()]\n  set25519(q[0], X)\n  set25519(q[1], Y)\n  set25519(q[2], gf1)\n  M(q[3], X, Y)\n  scalarmult(p, q, s)\n}\n\nfunction crypto_sign_keypair (pk, sk, seeded) {\n  check(pk, crypto_sign_PUBLICKEYBYTES)\n  check(sk, crypto_sign_SECRETKEYBYTES)\n\n  var d = new Uint8Array(64)\n  var p = [gf(), gf(), gf(), gf()]\n  var i\n\n  if (!seeded) randombytes(sk, 32)\n  crypto_hash(d, sk, 32)\n  d[0] &= 248\n  d[31] &= 127\n  d[31] |= 64\n\n  scalarbase(p, d)\n  pack(pk, p)\n\n  for (i = 0; i < 32; i++) sk[i + 32] = pk[i]\n}\n\nfunction crypto_sign_seed_keypair (pk, sk, seed) {\n  check(seed, crypto_sign_SEEDBYTES)\n  sk.set(seed)\n  return crypto_sign_keypair(pk, sk, true)\n}\n\nvar L = new Float64Array([0xed, 0xd3, 0xf5, 0x5c, 0x1a, 0x63, 0x12, 0x58, 0xd6, 0x9c, 0xf7, 0xa2, 0xde, 0xf9, 0xde, 0x14, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x10])\n\nfunction modL (r, x) {\n  var carry, i, j, k\n  for (i = 63; i >= 32; --i) {\n    carry = 0\n    for (j = i - 32, k = i - 12; j < k; ++j) {\n      x[j] += carry - 16 * x[i] * L[j - (i - 32)]\n      carry = (x[j] + 128) >> 8\n      x[j] -= carry * 256\n    }\n    x[j] += carry\n    x[i] = 0\n  }\n  carry = 0\n  for (j = 0; j < 32; j++) {\n    x[j] += carry - (x[31] >> 4) * L[j]\n    carry = x[j] >> 8\n    x[j] &= 255\n  }\n  for (j = 0; j < 32; j++) x[j] -= carry * L[j]\n  for (i = 0; i < 32; i++) {\n    x[i + 1] += x[i] >> 8\n    r[i] = x[i] & 255\n  }\n}\n\nfunction reduce (r) {\n  var x = new Float64Array(64)\n  for (let i = 0; i < 64; i++) x[i] = r[i]\n  for (let i = 0; i < 64; i++) r[i] = 0\n  modL(r, x)\n}\n\n// Note: difference from C - smlen returned, not passed as argument.\nfunction crypto_sign (sm, m, sk) {\n  check(sm, crypto_sign_BYTES + m.length)\n  check(m, 0)\n  check(sk, crypto_sign_SECRETKEYBYTES)\n  var n = m.length\n\n  var d = new Uint8Array(64), h = new Uint8Array(64), r = new Uint8Array(64)\n  var i, j, x = new Float64Array(64)\n  var p = [gf(), gf(), gf(), gf()]\n\n  crypto_hash(d, sk, 32)\n  d[0] &= 248\n  d[31] &= 127\n  d[31] |= 64\n\n  var smlen = n + 64\n  for (i = 0; i < n; i++) sm[64 + i] = m[i]\n  for (i = 0; i < 32; i++) sm[32 + i] = d[32 + i]\n\n  crypto_hash(r, sm.subarray(32), n + 32)\n  reduce(r)\n  scalarbase(p, r)\n  pack(sm, p)\n\n  for (i = 32; i < 64; i++) sm[i] = sk[i]\n  crypto_hash(h, sm, n + 64)\n  reduce(h)\n\n  for (i = 0; i < 64; i++) x[i] = 0\n  for (i = 0; i < 32; i++) x[i] = r[i]\n  for (i = 0; i < 32; i++) {\n    for (j = 0; j < 32; j++) {\n      x[i + j] += h[i] * d[j]\n    }\n  }\n\n  modL(sm.subarray(32), x)\n  return smlen\n}\n\nfunction crypto_sign_detached (sig, m, sk) {\n  var sm = new Uint8Array(m.length + crypto_sign_BYTES)\n  crypto_sign(sm, m, sk)\n  for (let i = 0; i < crypto_sign_BYTES; i++) sig[i] = sm[i]\n}\n\nfunction unpackneg (r, p) {\n  var t = gf(), chk = gf(), num = gf(),\n    den = gf(), den2 = gf(), den4 = gf(),\n    den6 = gf()\n\n  set25519(r[2], gf1)\n  unpack25519(r[1], p)\n  S(num, r[1])\n  M(den, num, D)\n  Z(num, num, r[2])\n  A(den, r[2], den)\n\n  S(den2, den)\n  S(den4, den2)\n  M(den6, den4, den2)\n  M(t, den6, num)\n  M(t, t, den)\n\n  pow2523(t, t)\n  M(t, t, num)\n  M(t, t, den)\n  M(t, t, den)\n  M(r[0], t, den)\n\n  S(chk, r[0])\n  M(chk, chk, den)\n  if (!neq25519(chk, num)) M(r[0], r[0], I)\n\n  S(chk, r[0])\n  M(chk, chk, den)\n  if (!neq25519(chk, num)) return false\n\n  if (par25519(r[0]) === (p[31] >> 7)) {\n    Z(r[0], gf(), r[0])\n  }\n\n  M(r[3], r[0], r[1])\n  return true\n}\n\n/* eslint-disable no-unused-vars */\nfunction crypto_sign_open (msg, sm, pk) {\n  check(msg, sm.length - crypto_sign_BYTES)\n  check(sm, crypto_sign_BYTES)\n  check(pk, crypto_sign_PUBLICKEYBYTES)\n  var n = sm.length\n  var m = new Uint8Array(sm.length)\n\n  var i, mlen\n  var t = new Uint8Array(32), h = new Uint8Array(64)\n  var p = [gf(), gf(), gf(), gf()],\n    q = [gf(), gf(), gf(), gf()]\n\n  mlen = -1\n  if (n < 64) return false\n\n  if (!unpackneg(q, pk)) return false\n\n  for (i = 0; i < n; i++) m[i] = sm[i]\n  for (i = 0; i < 32; i++) m[i + 32] = pk[i]\n  crypto_hash(h, m, n)\n  reduce(h)\n  scalarmult(p, q, h)\n\n  scalarbase(q, sm.subarray(32))\n  add(p, q)\n  pack(t, p)\n\n  n -= 64\n  if (!crypto_verify_32(sm, 0, t, 0)) {\n    for (i = 0; i < n; i++) m[i] = 0\n    return false\n    // throw new Error('crypto_sign_open failed')\n  }\n\n  for (i = 0; i < n; i++) msg[i] = sm[i + 64]\n  mlen = n\n  return true\n}\n/* eslint-enable no-unused-vars */\n\nfunction crypto_sign_verify_detached (sig, m, pk) {\n  check(sig, crypto_sign_BYTES)\n  var sm = new Uint8Array(m.length + crypto_sign_BYTES)\n  var i = 0\n  for (i = 0; i < crypto_sign_BYTES; i++) sm[i] = sig[i]\n  for (i = 0; i < m.length; i++) sm[i + crypto_sign_BYTES] = m[i]\n  return crypto_sign_open(m, sm, pk)\n}\n\nfunction par25519 (a) {\n  var d = new Uint8Array(32)\n  pack25519(d, a)\n  return d[0] & 1\n}\n\nfunction neq25519 (a, b) {\n  var c = new Uint8Array(32), d = new Uint8Array(32)\n  pack25519(c, a)\n  pack25519(d, b)\n  return crypto_verify_32(c, 0, d, 0)\n}\n\nfunction ed25519_mul_l (p, q) {\n  scalarmult(p, q, L)\n}\n\nfunction ed25519_is_on_main_subgroup (p) {\n  var pl = [gf(), gf(), gf(), gf()]\n\n  ed25519_mul_l(pl, p)\n\n  var zero = 0\n  for (let i = 0; i < 16; i++) {\n    zero |= (pl[0][i] & 0xffff)\n  }\n\n  return zero === 0\n}\n\nfunction crypto_sign_ed25519_pk_to_curve25519 (x25519_pk, ed25519_pk) {\n  check(x25519_pk, crypto_sign_PUBLICKEYBYTES)\n  check(ed25519_pk, crypto_sign_ed25519_PUBLICKEYBYTES)\n\n  var a = [gf(), gf(), gf(), gf()]\n  var x = gf([1])\n  var one_minus_y = gf([1])\n\n  assert(\n    isSmallOrder(ed25519_pk) &&\n    unpackneg(a, ed25519_pk) &&\n    ed25519_is_on_main_subgroup(a), 'Cannot convert key: bad point')\n\n  for (let i = 0; i < a.length; i++) {\n    pack25519(x25519_pk, a[i])\n  }\n\n  Z(one_minus_y, one_minus_y, a[1])\n  A(x, x, a[1])\n  inv25519(one_minus_y, one_minus_y)\n  M(x, x, one_minus_y)\n  pack25519(x25519_pk, x)\n\n  return 0\n}\n\nfunction isSmallOrder (s) {\n  Uint8Array.from([])\n\n  var bad_points = [\n    // 0 (order 4)\n    Uint8Array.from([0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00]),\n\n    // 1 (order 1)\n    Uint8Array.from([0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00]),\n\n    // 2707385501144840649318225287225658788936804267575313519463743609750303402022(order 8)\n    Uint8Array.from([0x26, 0xe8, 0x95, 0x8f, 0xc2, 0xb2, 0x27, 0xb0, 0x45, 0xc3,\n      0xf4, 0x89, 0xf2, 0xef, 0x98, 0xf0, 0xd5, 0xdf, 0xac, 0x05, 0xd3,\n      0xc6, 0x33, 0x39, 0xb1, 0x38, 0x02, 0x88, 0x6d, 0x53, 0xfc, 0x05]),\n\n    // 55188659117513257062467267217118295137698188065244968500265048394206261417927 (order 8)\n    Uint8Array.from([0xc7, 0x17, 0x6a, 0x70, 0x3d, 0x4d, 0xd8, 0x4f, 0xba, 0x3c,\n      0x0b, 0x76, 0x0d, 0x10, 0x67, 0x0f, 0x2a, 0x20, 0x53, 0xfa, 0x2c,\n      0x39, 0xcc, 0xc6, 0x4e, 0xc7, 0xfd, 0x77, 0x92, 0xac, 0x03, 0x7a]),\n\n    // p-1 (order 2)\n    Uint8Array.from([0xec, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n      0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n      0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x7f]),\n\n    //  p (=0 order 4)\n    Uint8Array.from([0xed, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n      0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n      0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x7f]),\n\n    // p + 1 (=1 order 1)\n    Uint8Array.from([0xee, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n      0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n      0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x7f])\n  ]\n\n  var c = new Uint8Array(7)\n  var j\n\n  check(bad_points, 7)\n  for (let i = 0; i < bad_points.length; i++) {\n    for (j = 0; j < 31; j++) {\n      c[i] |= s[j] ^ bad_points[i][j]\n    }\n  }\n\n  for (let i = 0; i < bad_points.length; i++) {\n    c[i] |= (s[j] & 0x7f) ^ bad_points[i][j]\n  }\n\n  var k = 0\n  for (let i = 0; i < bad_points.length; i++) {\n    k |= (c[i] - 1)\n  }\n\n  return ((k >> 8) & 1) === 0\n}\n\nfunction crypto_sign_ed25519_sk_to_pk (pk, sk) {\n  check(pk, crypto_sign_ed25519_PUBLICKEYBYTES)\n  pk.set(sk.subarray(crypto_sign_ed25519_SEEDBYTES))\n  return pk\n}\n\nfunction crypto_sign_ed25519_sk_to_curve25519 (curveSk, edSk) {\n  assert(curveSk && curveSk.byteLength === crypto_scalarmult_BYTES, \"curveSk must be 'crypto_sign_SECRETKEYBYTES' long\")\n  assert(edSk && edSk.byteLength === crypto_sign_ed25519_SECRETKEYBYTES, \"edSk must be 'crypto_sign_ed25519_SECRETKEYBYTES' long\")\n\n  var h = new Uint8Array(crypto_hash_sha512_BYTES)\n  crypto_hash(h, edSk, 32)\n\n  h[0] &= 248\n  h[31] &= 127\n  h[31] |= 64\n\n  curveSk.set(h.subarray(0, crypto_scalarmult_BYTES))\n  h.fill(0)\n  return curveSk\n}\n\nfunction check (buf, len, arg = 'Argument') {\n  if (!buf || (len && buf.length < len)) throw new Error(arg + ' must be a buffer' + (len ? ' of length ' + len : ''))\n}\n","'use strict'\n\n// Based on https://github.com/dchest/tweetnacl-js/blob/6dcbcaf5f5cbfd313f2dcfe763db35c828c8ff5b/nacl-fast.js.\n\n// Ported in 2014 by Dmitry Chestnykh and Devi Mandiri.\n// Public domain.\n//\n// Implementation derived from TweetNaCl version 20140427.\n// See for details: http://tweetnacl.cr.yp.to/\n\nforward(require('./randombytes'))\nforward(require('./memory'))\nforward(require('./helpers'))\nforward(require('./crypto_verify'))\nforward(require('./crypto_auth'))\nforward(require('./crypto_box'))\nforward(require('./crypto_generichash'))\nforward(require('./crypto_hash'))\nforward(require('./crypto_hash_sha256'))\nforward(require('./crypto_kdf'))\nforward(require('./crypto_kx'))\nforward(require('./crypto_aead'))\nforward(require('./crypto_onetimeauth'))\nforward(require('./crypto_scalarmult'))\nforward(require('./crypto_secretbox'))\nforward(require('./crypto_shorthash'))\nforward(require('./crypto_sign'))\nforward(require('./crypto_stream'))\nforward(require('./crypto_stream_chacha20'))\n\nfunction forward (submodule) {\n  Object.keys(submodule).forEach(function (prop) {\n    module.exports[prop] = submodule[prop]\n  })\n}\n","module.exports = require('sodium-native')\n","module.exports = Symbol.for('nodejs.util.inspect.custom')\n","// SPDX-License-Identifier: AGPL-3.0-or-later\n// Copyright  2020 Tony Ivanov <telamohn@pm.me>\n\n/* eslint-disable camelcase */\nconst {\n  crypto_sign_BYTES,\n  crypto_sign_SECRETKEYBYTES,\n  crypto_sign_PUBLICKEYBYTES,\n  crypto_sign_detached,\n  crypto_sign_verify_detached,\n  crypto_sign_keypair\n} = require('sodium-universal')\n/* eslint-enable camelcase */\n\nconst inspectSymbol = require('inspect-custom-symbol')\n// Using global symbols here might be unecessary\n// but feeds created in ancestors of picofeed dependents evaulate:\n// (feed instanceof PicoFeed) as false..\nconst BLOCK_SYMBOL = Symbol.for('Pico::block')\nconst FEED_SYMBOL = Symbol.for('Pico::feed')\n\nconst GENESIS = Buffer.alloc(crypto_sign_BYTES).fill(0)\n\nmodule.exports = class PicoFeed {\n  static get MAX_FEED_SIZE () { return 64 << 10 } // 64 kilo byte\n  static get INITIAL_FEED_SIZE () { return 1 << 10 } // 1 kilo byte\n  static get PICKLE () { return Buffer.from('PIC0.') } // Buffer.from('', 'utf8') }\n  static get KEY () { return Buffer.from('K0.') } // Buffer.from('f09f979d', 'hex') }\n  // consensus? pft! whoever can fit the most kittens into\n  // a single bottle is obviously the winner.\n  static get BLOCK () { return Buffer.from('B0.') } // Buffer.from('', 'utf8') }\n  static get KEY_SIZE () { return crypto_sign_PUBLICKEYBYTES } // eslint-disable-line camelcase\n  static get SIGNATURE_SIZE () { return crypto_sign_BYTES } // eslint-disable-line camelcase\n  static get COUNTER_SIZE () { return 4 } // Sizeof UInt32BE\n  static get META_SIZE () { return PicoFeed.SIGNATURE_SIZE * 2 + PicoFeed.COUNTER_SIZE }\n  static get BLOCK_SYMBOL () { return BLOCK_SYMBOL }\n  static get FEED_SYMBOL () { return FEED_SYMBOL }\n  static get GENESIS () { return GENESIS }\n\n  constructor (opts = {}) {\n    this[FEED_SYMBOL] = true\n    this.tail = 0 // Tail always points to next empty space\n    this._hasGenisis = null\n    this._keychain = [] // key-cache\n    this._cache = [] // block-cache\n    this._MAX_FEED_SIZE = opts.maxSize || PicoFeed.MAX_FEED_SIZE\n    this.buf = Buffer.alloc(opts.initialSize || PicoFeed.INITIAL_FEED_SIZE)\n  }\n\n  get partial () {\n    // length triggers _index(), empty feeds are neither partial nor full.\n    if (this._hasGenisis === null && !this.length) return false\n    return !this._hasGenisis\n  }\n\n  get free () { return this._MAX_FEED_SIZE - this.tail }\n\n  get _isDirty () {\n    if (!this.tail) return false // Buffer is empty\n    if (!this._cache.length) return true // Cache is empty\n\n    const descriptor = this._cache[this._cache.length - 1]\n    const block = PicoFeed.mapBlock(this.buf, descriptor.offset)\n    // Detect unindexed data between last cached block and tail\n    return block.end !== this.tail\n  }\n\n  get length () {\n    this._reIndex()\n    return this._cache.length\n  }\n\n  get last () { return this.get(this.length - 1) }\n  get first () { return this.get(0) }\n\n  get keys () {\n    this._reIndex()\n    return [...this._keychain]\n  }\n\n  // Forcefully re-index entire feed\n  _reIndex (force = false) {\n    if (!force && !this._isDirty) return\n    const iterator = this._index(force)\n    while (!iterator.next().done) continue\n  }\n\n  _appendKey (data) {\n    this._ensureMinimumCapacity(this.tail + PicoFeed.KEY.length + data.length)\n    this.tail += PicoFeed.KEY.copy(this.buf, this.tail)\n    this.tail += data.copy(this.buf, this.tail)\n  }\n\n  _appendBlock (chunk) {\n    this._ensureMinimumCapacity(this.tail + chunk.length)\n    this.tail += chunk.copy(this.buf, this.tail)\n  }\n\n  _ensureMinimumCapacity (size) {\n    if (this.buf.length < size) {\n      // console.info('Increasing backing buffer to new size:', size)\n      const nbuf = Buffer.allocUnsafe(size + 32)\n      this.buf.copy(nbuf)\n      this.buf = nbuf\n    }\n  }\n\n  _ensureKey (pk) {\n    for (const k of this.keys) {\n      if (pk.equals(k)) return\n    }\n    this._appendKey(pk)\n  }\n\n  get (idx) {\n    if (this._isDirty) this._reIndex()\n    if (idx < 0) idx = this.length + idx\n    const desc = this._cache[idx]\n    if (!desc) return undefined\n    return PicoFeed.mapBlock(this.buf, desc.offset, this._keychain[desc.keyId])\n  }\n\n  toArray () {\n    const arr = []\n    for (const block of this.blocks()) arr.push(block)\n    return arr\n  }\n\n  append (data, sk, cb) {\n    if (!sk) throw new Error('Can\\'t append without a signing secret')\n    if (sk.length !== 64) throw new Error('Unknown signature secret key format')\n    const pk = sk.slice(PicoFeed.KEY_SIZE) // this is a libsodium thing\n    this._ensureKey(pk)\n\n    const metaSz = PicoFeed.META_SIZE\n\n    const pBlock = this.last\n\n    // This is the only auto-encoding that will be supported\n    if (!Buffer.isBuffer(data)) data = Buffer.from(data)\n\n    const dataSize = data.length\n    const newEnd = this.tail + dataSize + metaSz\n\n    // Ensure we're not gonna pass the boundary\n    if (this._MAX_FEED_SIZE < newEnd) {\n      // console.error('NOFIT', this.tail, dataSize, metaSz)\n      console.error(`MAX_FEED_SIZE reached, block won't fit: ${newEnd} > ${this._MAX_FEED_SIZE}`)\n      const err = new Error('FeedOverflowError')\n      err.type = err.message\n      err.maxSize = this._MAX_FEED_SIZE\n      err.requestedSize = newEnd\n      err.bytesOverflow = newEnd - this._MAX_FEED_SIZE\n      throw err\n    }\n\n    // Resize current buffer if needed\n    this._ensureMinimumCapacity(newEnd)\n\n    const map = PicoFeed.mapBlock(this.buf, this.tail)\n\n    map.header.fill(0) // Zero out the header\n    map.size = dataSize\n\n    data.copy(map.body)\n\n    if (pBlock) { // Origin blocks are origins.\n      pBlock.sig.copy(map.parentSig)\n    }\n\n    crypto_sign_detached(map.sig, map.dat, sk)\n    // sanity check.\n    if (!map.verify(pk)) throw new Error('newly stored block is invalid. something went wrong')\n    this.tail = newEnd\n\n    // This method isn't async but we'll honour the old ways\n    if (typeof cb === 'function') cb(null, this.length)\n    return this.length\n  }\n\n  /* This generator is pretty magic,\n   * we're traversing the buffer and validating it\n   * in one sweep.\n   */\n  * _index (clearCache = false) {\n    let offset = 0\n    let blockIdx = 0\n\n    // Reset caches\n    if (clearCache) this._clearCache()\n\n    const ktok = PicoFeed.KEY\n    const KEY_SZ = PicoFeed.KEY_SIZE\n    // vars for block parsing\n    let prevSig = null\n    while (true) {\n      if (offset >= this.tail) return\n\n      if (offset + ktok.length > this.buf.length) return\n      const isKey = ktok.equals(this.buf.slice(offset, offset + ktok.length))\n\n      if (isKey) {\n        const key = this.buf.slice(offset + ktok.length, offset + ktok.length + KEY_SZ)\n        let keyIdx = this._keychain.findIndex(k => k.equals(key))\n        if (!~keyIdx) { // Append key to chain if missing\n          keyIdx = this._keychain.length\n          this._keychain.push(key)\n        }\n        yield { type: 0, id: keyIdx, key: key, offset }\n        offset += ktok.length + KEY_SZ\n      } else if (this._cache[blockIdx] && this._cache[blockIdx].offset === offset) {\n        // Load block from cache\n        const seq = blockIdx++\n        const desc = this._cache[seq]\n        const key = this._keychain[desc.keyId]\n        if (!key) throw new Error('InternalError:KeyCacheBroken')\n        const block = PicoFeed.mapBlock(this.buf, desc.offset, key)\n        yield { type: 1, seq, key, block, offset: desc.offset }\n        prevSig = block.sig\n        offset = block.end\n      } else {\n        // Index block from buffer and register in cache\n        const block = PicoFeed.mapBlock(this.buf, offset)\n        if (block.size === 0) return\n        if (offset + block.size > this.buf.length) return\n\n        // Parent verification\n        if (!blockIdx) {\n          // partial feeds/slices lack the genesis block\n          this._hasGenisis = block.parentSig.equals(Buffer.alloc(64))\n        } else if (!prevSig.equals(block.parentSig)) {\n          // Consequent blocks must state correct parent\n          return // reject block\n        }\n\n        let valid = false\n        for (let i = this._keychain.length - 1; i >= 0; i--) {\n          valid = block.verify(this._keychain[i])\n          if (!valid) continue\n          const seq = blockIdx++\n          block.key = this._keychain[i]\n          this._cache[seq] = { offset, keyId: i }\n          yield { type: 1, seq, block, offset, key: this._keychain[i] }\n          prevSig = block.sig\n          offset = block.end\n          break\n        }\n        if (!valid) return // chain of trust broken\n      }\n    }\n  }\n\n  toString () { return this.pickle() }\n\n  pickle (slice = 0) {\n    let str = encodeURIComponent(PicoFeed.PICKLE.toString('utf8'))\n    const kToken = PicoFeed.KEY\n    const bToken = PicoFeed.BLOCK\n    const itr = (slice ? this.slice(slice) : this)._index()\n    for (const fact of itr) {\n      str += !fact.type\n        ? kToken + b2ub(fact.key)\n        : bToken + b2ub(fact.block.buffer)\n    }\n    return str\n  }\n\n  /**\n   * Returns a sliced feed.\n   */\n  slice (start = 0, end = undefined, noKeys = false) {\n    const out = new PicoFeed()\n    for (const block of this.blocks(start, end)) {\n      if (!noKeys) out._ensureKey(block.key)\n      out._appendBlock(block.buffer)\n    }\n    return out\n  }\n\n  // Unpickle\n  _unpack (str) {\n    if (!str) throw new Error('Missing first argument')\n    if (typeof str !== 'string') throw new Error('url-friendly string expected')\n    // TODO: re-engineer for efficiency\n    const pToken = encodeURIComponent(PicoFeed.PICKLE)\n    const kToken = encodeURIComponent(PicoFeed.KEY)\n    const bToken = encodeURIComponent(PicoFeed.BLOCK)\n    const pickleOffset = str.indexOf(pToken)\n    if (pickleOffset === -1) throw new Error('NotPickleError')\n    let o = pToken.length + pickleOffset\n    let kM = 0\n    let bM = 0\n    let type = -1\n    let start = -1\n    const processChunk = () => {\n      if (type !== -1) {\n        const chunk = decodeURIComponent(str.substr(start, o - start - bM - kM + 1))\n        if (!type) { // Unpack Public Sign Key\n          const key = ub2b(chunk)\n          if (key.length !== PicoFeed.KEY_SIZE) throw new Error('PSIG key wrong size: ')\n          this._ensureKey(key) // modifies tail\n        } else { // Unpack Block\n          this._appendBlock(ub2b(chunk))\n        }\n        type = -1 // for sanity, not needed.\n      }\n      start = o + 1\n      type = kM ? 0 : 1\n      kM = bM = 0\n    }\n\n    while (o < str.length) {\n      if (str[o] === kToken[kM]) {\n        if (++kM === kToken.length) processChunk()\n      } else kM = 0\n\n      if (str[o] === bToken[bM]) {\n        if (++bM === bToken.length) processChunk()\n      } else bM = 0\n      o++\n    }\n    processChunk()\n  }\n\n  // Truncating is a lot faster\n  // than spawning a new feed.\n  truncate (toLength) {\n    if (toLength === 0) { // Empty the feed\n      this.tail = 0\n      this._cache = []\n      this._keychain = []\n      return true\n    }\n\n    const o = this.tail\n    const block = this.get(toLength - 1)\n    this.tail = block.end\n    if (o === this.tail) return false\n    // Truncate cache\n    let l = this._cache.length - toLength\n    while (l--) this._cache.pop()\n    return true\n  }\n\n  * blocks (start = 0, end = 0) {\n    if (start < 0) start = this.length + start\n    if (!end) end = this.length\n    if (end < 0) end = this.length + end + 1\n    while (start < end) yield this.get(start++)\n  }\n\n  /*\n   * Steals the state of other feed,\n   * once a feed has been pilfered it should not be used\n   * anymore. This method is only used internally as an optimization\n   * for \"theirs\" merge strategy to avoid re-indexing\n   */\n  _steal (other, copy = false) {\n    if (copy) {\n      this.buf = Buffer.alloc(other.buf.length)\n      other.buf.copy(this.buf)\n      this._cache = other._cache.map(desc => ({ ...desc })) // Clone descriptors\n    } else {\n      this.buf = other.buf\n      this._cache = [...other._cache] // Steal descriptors\n    }\n    this._keychain = [...other._keychain] // Steal keys\n    this._hasGenisis = other._hasGenisis\n    this.tail = other.tail\n    other._robbed = true // earmark other feed for debugging\n    return true\n  }\n\n  _clearCache () {\n    this._keychain = []\n    this._cache = []\n  }\n\n  /*\n   * This method is going to need a docs page of it's own..\n   * The fastest way to merge a temporary feed into an empty feed is to steal the\n   * temporary feeds buffer; This is not possible while doing interactive merging as\n   * by optimization we forego the entire loop with no way to index nor abort.\n   * So for now userValidate implies forceCopy/noSteal\n   *\n   * @param source something that from() can convert into feed.\n   * @param options Object, merge options\n   * @param options.forceCopy `Boolean` prevents buffer stealing from source; Forces new buffers to be created an copied\n   * @param indexCallback Invoked for each new commit that is about to be merged, abort method is NOT asyncroneous.\n   * @return {boolean} true if source is/was merged, false if unmergable\n   */\n  merge (source, options = {}, indexCallback = null) {\n    if (typeof options === 'function') return this.merge(source, undefined, options)\n    const forceCopy = options.forceCopy || false\n    if (!source) throw new Error('First argument `source` expected by merge')\n    const other = PicoFeed.from(source)\n\n    // Prepare user index/validator\n    const interactiveMode = typeof indexCallback === 'function'\n    const userValidate = !interactiveMode\n      ? () => false\n      : block => {\n        // Invoke user indexing callback to let them process\n        // and validate a block before actually merging it.\n        let abort = false\n        indexCallback(block, () => { abort = true }) // Abortion is only possible in syncronized mode.\n        return abort\n      }\n\n    const rebase = blocksIterator => {\n      let mutated = false\n      for (const block of blocksIterator) {\n        const key = block.key\n        if (interactiveMode) {\n          const aborted = userValidate(block)\n          if (aborted) return mutated\n        }\n\n        // Rebase block onto self (no parents are modified)\n        this._ensureKey(key)\n        this._appendBlock(block.buffer)\n        mutated = true\n      }\n      return mutated\n    }\n\n    // If we're empty then we'll just use theirs\n    if (!this.length) {\n      if (!interactiveMode) return this._steal(other, forceCopy)\n      else return rebase(other.blocks())\n    }\n\n    const attemptReverseMerge = () => {\n      if (this._reverseMergeFlag) return false\n      const c = other.clone() // Avoid mutating other\n      c._reverseMergeFlag = true // Prevent loops without poisoning the state.\n      const sanityCheck = c.length\n      const firstBlockAccepted = !interactiveMode || !userValidate(c.get(0))\n      if (\n        firstBlockAccepted &&\n        c.merge(this, options, indexCallback)\n      ) { // Success, steal buffer\n        if (sanityCheck === c.length) throw new Error('InternalError:NothingMerged')\n        return this._steal(c)\n      } else return false // Give up\n    }\n\n    // Expected 2 outcomes.\n    // 1. conflict, no merge, abort mission\n    // 2.a) no conflict, no new blocks, abort.\n    // 2.b) no conflict, new blocks, copy + validate?\n    try {\n      const s = this._compare(other)\n      if (s < 1) return true\n      return rebase(other.blocks(other.length - s))\n    } catch (err) {\n      switch (err.type) {\n        case 'BlockConflict':\n          return false\n        case 'NoCommonParent':\n          /* When this feed is partial and if this.merge(other)\n           * has no common parent; then there is yet a possibility\n           * that other.merge(this) yields a non-conflicting longer\n           * chain\n           */\n          if (!this.partial) return false\n          else return attemptReverseMerge()\n      }\n      throw err\n    }\n  }\n\n  clone () {\n    const f = new PicoFeed()\n    f._steal(this, true)\n    return f\n  }\n\n  /* How to look at counters\n   *\n   * A  0  1  2  3\n   * K0 B1 B2 B3 B4\n   * K0       B3 B4 B5 B6  (slice of a pickle)\n   * B        0  1  2  3\n   *\n   * A  0  1  2  3\n   * K0 B1 B2 B3 B4\n   * K0 B1 B2 B3 B4 B5 B6\n   * B  0  1  2  3  4  5\n   *\n   */\n  _compare (other) {\n    if (this === other) return 0\n    const counters = [-1, -1]\n    const iterators = [this._index(), other._index()]\n    const blocks = []\n    const eof = [false, false]\n    const parents = []\n\n    // Define a single step.\n    const step = (chain) => { // until block\n      if (blocks[chain]) parents[chain] = blocks[chain].sig\n      blocks[chain] = null\n      while (!blocks[chain] && !eof[chain]) {\n        const n = iterators[chain].next()\n        eof[chain] = eof[chain] || n.done\n        if (n.done && typeof n.value === 'undefined') break // Iterating an empty list..\n\n        if (n.value.type) {\n          counters[chain]++\n          blocks[chain] = n.value.block\n        }\n      }\n    }\n\n    const fastForward = chain => {\n      const c = counters[chain] - 1\n      while (blocks[chain]) step(chain)\n      return counters[chain] - c\n    }\n\n    const A = 0\n    const B = 1\n\n    const mkErr = text => {\n      const err = new Error(text)\n      err.type = text\n      err.idxA = counters[A]\n      err.idxB = counters[B]\n      return err\n    }\n\n    // 1. Find common parent / align B to A\n    step(B)\n    if (!blocks[B]) return -fastForward(A) // No new blocks no conflicts\n    const target = blocks[B].parentSig\n    while (!eof[A]) {\n      step(A)\n      if (!blocks[A]) break\n      if (blocks[A].parentSig.equals(target)) break\n\n      if (blocks[A].sig.equals(target) && this.length === counters[A] + 1) {\n        /* Current A is parent of B,\n         * - If there are no more blocks in A\n         *   then we can merge everything from B without conflict\n         * - If there are more blocks in A, then proceed,\n         *   the rest of the logic is legit and will detect conflicts.\n         */\n        return fastForward(B)\n      }\n    }\n    if (!blocks[A]) throw mkErr('NoCommonParent') // No common parent! [a: a.length > 0, b: 0]\n\n    // Check if it's the same block\n    if (!blocks[A].sig.equals(blocks[B].sig)) throw mkErr('BlockConflict')\n\n    // common parent found!\n    // if (counters[B] !== counters[A]) console.info('B is a slice of a pickle') // TODO: what?\n\n    // 2. lockstep the iterators while checking for conflicts.\n    while (1) {\n      step(A)\n      step(B)\n      if (blocks[A] && blocks[B]) {\n        // check for conflicts.\n        if (!blocks[A].sig.equals(blocks[B].sig)) throw mkErr('BlockConflict')\n      } else if (!blocks[A] && !blocks[B]) {\n        return 0\n      } else if (!blocks[A]) {\n        // B has some new blocks @ counters[B]\n        return fastForward(B)\n      } else { // !block[B]\n        // No new blocks / B is behind\n        return -fastForward(A)\n      }\n    }\n  }\n\n  inspect (noLog = false) {\n    const header = ['ID', 'KEY', 'SIG', 'PARENT', 'HEX', 'ASCII']\n    const table = [header]\n    const widths = [2]\n    let blockIdx = 0\n    for (const block of this.blocks()) {\n      const utf = block.body.slice(0, 12).toString('utf8')\n      const row = [\n        '' + (blockIdx++),\n        block.key.slice(0, 2).toString('hex'),\n        block.sig.slice(0, 4).toString('hex'),\n        block.isGenesis\n          ? '_GENESIS'\n          : block.parentSig.slice(0, 4).toString('hex'),\n        block.body.slice(0, 6)\n          .toString('hex')\n          .replace(/(.{2})/g, '$1 ')\n          .trimEnd(),\n        utf\n      ]\n\n      // All columns are static width except last utf8\n      for (let i = 0; i < row.length; i++) {\n        widths[i] = Math.max(widths[i] || 0, row[i].length)\n      }\n      table.push(row)\n    }\n\n    const lines = []\n    for (const row of table) {\n      lines.push(' ' + row.map((cell, i) => cell.padEnd(widths[i])).join('  ') + ' ')\n    }\n    lines.splice(1, 0, ''.padEnd(lines[0].length - 1, '') + '')\n    if (!noLog) console.log(lines.join('\\n'))\n    else return lines.join('\\n')\n  }\n\n  static isFeed (other) { return other && other[FEED_SYMBOL] }\n\n  static from (source, opts = {}) {\n    // Warn, feeds are not cloned same way as Buffer.from(aBuffer) produces a copy\n    if (PicoFeed.isFeed(source)) return source\n\n    const feed = new PicoFeed(opts)\n\n    // Upgrade a single mapped block into a feed\n    if (source[BLOCK_SYMBOL]) {\n      feed._ensureKey(source.key)\n      feed._appendBlock(source.buffer)\n\n      // Load string\n    } else if (typeof source === 'string') feed._unpack(source)\n    // Load URL\n    else if (typeof source.hash === 'string') feed._unpack(source.hash)\n    // Load buffers\n    else if (Buffer.isBuffer(source)) { // @Deprecated\n      // Assume buffer contains output from feed.pickle()\n      feed._unpack(source.toString('utf8'))\n\n      // We're not handling raw block buffers because you'd need to provide\n      // the tail and _lastBlockOffset in order to iterate them.\n    } else throw new Error('NotAFeed')\n    return feed\n  }\n\n  /**\n   * This is a fast alternative to reconstruct a Feed from\n   * Array of blocks as is used by PicoRepo.\n   * It reconstructs the buffer first and then indexes the feed once.\n   *\n   * params:\n   *  - blocks: Block[]\n   */\n  static fromBlockArray (blocks) {\n    if (!Array.isArray(blocks)) throw new Error('fromBlockArray() expects an Array of blocks')\n    // Attempt rebuild raw buffer from blocks and then do single verify.\n    const keys = {} // Unique public keys in feed\n    let bodySize = 0\n    // phase 1. collect keys && sizeof blocks\n    for (const block of blocks) {\n      bodySize += block.size // Sizeof body\n      keys[block.key.toString('hex')] = 1\n    }\n\n    const f = new PicoFeed()\n\n    // pre-allocate buffer to hold blocks\n    const size = Object.keys(keys).length * (PicoFeed.KEY_SIZE + PicoFeed.KEY.length) +\n      blocks.length * PicoFeed.META_SIZE +\n      bodySize\n\n    f.buf = Buffer.alloc(size)\n\n    // phase 2: reconstruct\n    for (const block of blocks) {\n      if (keys[block.key.toString('hex')] < 2) {\n        f._appendKey(block.key)\n      }\n      f._appendBlock(block.buffer)\n    }\n    f._reIndex(true)\n    return f\n  }\n\n  static signPair () {\n    const sk = Buffer.allocUnsafe(crypto_sign_SECRETKEYBYTES)\n    const pk = Buffer.allocUnsafe(crypto_sign_PUBLICKEYBYTES)\n    crypto_sign_keypair(pk, sk)\n    return { sk, pk }\n  }\n\n  static mapBlock (buf, start = 0, key = null) {\n    /**\n     * Block layout\n     *  ___________\n     * | Signature | <----------.\n     * |-----------|             '.\n     * | ParentSig | -.            '.\n     * |-----------|  |- HEADR ---.  '.\n     * | Body Size | -'           |    '.\n     * |-----------|              |--> Sign(skey, data)\n     * |           |              |\n     * | Body BLOB | -------------'\n     * |           |\n     * `-----------'\n     */\n    const SIG_N = PicoFeed.SIGNATURE_SIZE\n    const COUNT_N = PicoFeed.COUNTER_SIZE\n    const HDR_N = SIG_N + COUNT_N\n    const mapper = {\n      [BLOCK_SYMBOL]: true,\n      get start () { return start },\n      get sig () { return buf.subarray(start, start + SIG_N) },\n      get header () { return buf.subarray(start + SIG_N, start + SIG_N + HDR_N) },\n      get parentSig () { return buf.subarray(start + SIG_N, start + SIG_N + SIG_N) },\n\n      // Unsafe size read, use validateRead to ensure that you're reading a block.\n      get size () { return buf.readUInt32BE(start + SIG_N * 2) },\n      set size (v) {\n        if (typeof v !== 'number' || v < 0 || v + start + SIG_N + HDR_N > buf.length) throw new Error('Invalid blob size')\n        return buf.writeUInt32BE(v, start + SIG_N * 2)\n      },\n      get body () {\n        return buf.subarray(start + SIG_N + HDR_N, mapper.safeEnd)\n      },\n      get dat () {\n        return buf.subarray(start + SIG_N, mapper.safeEnd)\n      },\n      get end () { return start + SIG_N + HDR_N + mapper.size },\n      get safeEnd () {\n        const s = mapper.size\n        if (s < 1) throw new Error('Invalid blob size: ' + s)\n        const end = start + SIG_N + HDR_N + s\n        if (end > buf.length) throw new Error('Incomplete or invalid block: end overflows buffer length' + end)\n        return end\n      },\n      // get _unsafeNext () { return PicoFeed.mapBlock(buf, mapper.end) },\n      get next () { return PicoFeed.mapBlock(buf, mapper.safeEnd) },\n      verify (pk) {\n        return crypto_sign_verify_detached(mapper.sig, mapper.dat, pk)\n      },\n      get buffer () { return buf.subarray(start, mapper.safeEnd) },\n\n      get key () {\n        // Key is an experimental feature, fail-fast for now.\n        if (!key) throw new Error('InternalError:MissingKey')\n        return key\n      },\n      set key (pk) {\n        // Key is an experimental feature, fail-fast for now.\n        if (key) throw new Error('InternalError:KeyExists')\n        key = pk\n      },\n\n      get isGenesis () {\n        return GENESIS.equals(mapper.parentSig)\n      },\n\n      [inspectSymbol] () {\n        return `[BlockMapper] start: ${mapper.start}, blocksize: ${mapper.size}, id: ${mapper.sig.slice(0, 6).toString('hex')}, parent: ${mapper.parentSig.slice(0, 6).toString('hex')}`\n      }\n    }\n    return mapper\n  }\n}\n// Url compatible b64\nfunction b2ub (b) {\n  return b.toString('base64').replace(/\\+/, '-').replace(/\\//g, '_').replace(/=+$/, '')\n}\n\nfunction ub2b (str) {\n  str = (str + '===').slice(0, str.length + (str.length % 4))\n  str = str.replace(/-/g, '+').replace(/_/g, '/')\n  return Buffer.from(str, 'base64')\n}\n","/* TODO: move to independent module \"pico-repo\" as this file was cannibalized from PoH\n * So this is going to be a persistent block-store\n * as opposed to picofeed which is an in-memory datatype,\n *\n */\nconst Feed = require('picofeed')\nconst REPO_SYMBOL = Symbol.for('PicoRepo')\n\n// Namespaces\nconst HEAD = 0 // Feed end tag by Author PK\nconst BLOCK = 1 // Block contents\nconst TAIL = 2 // Feed start tag by Author PK\nconst LATEST = 3 // Last write of Author PK\nconst REG = 4 // misc application namespace/userland\n// Attempt to keep track of individual feeds in store\n// using the signature of their genesis block as \"chainID\"\nconst CHAIN_TAIL = 5 // Feed start tag by GenesisBlock Signature\nconst CHAIN_HEAD = 6 // Feed end tag inverse index of CHAIN_TAIL\n\nfunction mkKey (type, key) {\n  if (!Buffer.isBuffer(key)) throw new Error('Expected key to be a Buffer')\n  const buffer = Buffer.alloc(1 + key.length)\n  key.copy(buffer, 1)\n  buffer[0] = type\n  return buffer\n}\n\nclass PicoRepo { //  PicoJar (a jar for crypto-pickles)\n  static isRepo (o) { return o && o[REPO_SYMBOL] }\n\n  constructor (db, strategy = []) {\n    this[REPO_SYMBOL] = true\n    this._db = db\n\n    // Experimental flag\n    this.allowDetached = false\n\n    // A jar usually boasts a label describing it's contents\n    // so that people know what to expect to get and at least\n    // what not to accidentally put.\n    this._strategies = Array.isArray(strategy) ? strategy : [strategy]\n    for (const s of this._strategies) {\n      if (typeof s !== 'function') throw new Error('ExpectedCallback')\n    }\n  }\n\n  get mkKey () { return mkKey } // minimalistic sub-leveldown alternative\n\n  async _setHeadPtr (name, ptr) {\n    const key = mkKey(HEAD, name)\n    await this._db.put(key, ptr)\n    return ptr\n  }\n\n  async _setLatestPtr (name, ptr) {\n    const key = mkKey(LATEST, name)\n    await this._db.put(key, ptr)\n    return ptr\n  }\n\n  async _getTag (type, name) {\n    const key = mkKey(type, name)\n    const buffer = await this._db.get(key)\n      .catch(err => {\n        if (!err.notFound) throw err\n      })\n    return buffer\n  }\n\n  async _getHeadPtr (name) { return this._getTag(HEAD, name) }\n\n  async _getTailPtr (name) { return this._getTag(TAIL, name) }\n\n  async _getLatestPtr (name) { return this._getTag(LATEST, name) }\n\n  async _getChainPtr (name) { return this._getTag(CHAIN_TAIL, name) }\n\n  async writeBlock (block) {\n    const key = mkKey(BLOCK, block.sig)\n    // TODO: this method used to return false when block exists\n    const buffer = Buffer.alloc(32 + block.buffer.length)\n    block.key.copy(buffer, 0)\n    block.buffer.copy(buffer, 32)\n\n    const batch = []\n    batch.push({ type: 'put', key, value: buffer })\n\n    if (block.isGenesis) {\n      batch.push({ type: 'put', key: mkKey(TAIL, block.key), value: block.sig })\n      batch.push({ type: 'put', key: mkKey(CHAIN_TAIL, block.sig), value: block.sig })\n      batch.push({ type: 'put', key: mkKey(CHAIN_HEAD, block.sig), value: block.sig })\n    } else {\n      // Move ChainID tag\n      const prevKey = mkKey(CHAIN_TAIL, block.parentSig)\n      const chainId = await this._db.get(prevKey)\n      batch.push({ type: 'del', key: prevKey })\n      batch.push({ type: 'put', key: mkKey(CHAIN_TAIL, block.sig), value: chainId })\n      batch.push({ type: 'put', key: mkKey(CHAIN_HEAD, chainId), value: block.sig })\n    }\n    await this._db.batch(batch)\n    return true\n  }\n\n  async readBlock (id) {\n    const key = mkKey(BLOCK, id)\n    const buffer = await this._db.get(key)\n      .catch(err => {\n        if (!err.notFound) throw err\n      })\n\n    if (buffer) return Feed.mapBlock(buffer, 32, buffer.slice(0, 32))\n  }\n\n  // Internal because it performs a full block read, use with care.\n  // (blocks are small in this application, don't care)\n  async _hasBlock (id) {\n    return !!(await this.readBlock(id))\n  }\n\n  async _traceOwnerOf (sig) {\n    // Tricky... trading off some extra index memory could possibly\n    // reduce the need to traverse the chain backwards\n    // I don't know.\n    let n = 0\n    for await (const block of this._chainLoad(sig)) {\n      if (block.isGenesis) return block.key\n      n++\n    }\n    if (n) throw new Error('Orphaned Chain')\n    // else chain not found\n  }\n\n  /**\n   * Returns entire feed given a blockId of the set.\n   */\n  async resolveFeed (sig, stopCallback = undefined) {\n    // O-1 constant lookup via TAIL tag\n    let tip = await this._getTag(CHAIN_TAIL, sig)\n    // Assuming that sig === CHAIN_HEAD(CHAIN_TAIL(sig))\n    if (tip) return this.loadFeed(sig, stopCallback)\n\n    // Traverse backwards to find HEAD tag\n    for await (const block of this._chainLoad(sig)) {\n      if (!block.isGenesis) continue\n      tip = await this._getTag(CHAIN_HEAD, block.sig)\n    }\n    if (!tip) throw new Error('Unknown feed')\n    return this.loadFeed(tip, stopCallback)\n  }\n\n  async merge (feed, strategy) { // or merge() ?\n    if (!Feed.isFeed(feed)) feed = Feed.from(feed)\n    if (!feed.length) return 0\n    let blocksWritten = 0\n    let owner = null\n    const first = feed.first\n    if (first.isGenesis) owner = first.key\n    else owner = await this._traceOwnerOf(first.parentSig)\n    if (!owner) throw new Error('CannotMerge: Unknown Chain')\n\n    for (const block of feed.blocks()) {\n      const author = block.key\n      const id = block.sig\n\n      // Ignore existing blocks\n      if (await this._hasBlock(id)) continue\n\n      const bumpHead = async () => {\n        await this.writeBlock(block)\n        await this._setHeadPtr(owner, block.sig)\n        await this._setLatestPtr(author, block.sig)\n        blocksWritten++\n      }\n\n      // fetch current head\n      const head = await this._getHeadPtr(owner)\n\n      // Allow creation of new heads\n      if (!head) {\n        await bumpHead()\n        continue\n      }\n\n      // skip ahead when previous head points to parent of new block\n      if (head.equals(block.parentSig)) {\n        await bumpHead()\n        continue\n      }\n\n      // Check if the gateway to hell is open,\n      // intentions were good.\n      if (\n        this.allowDetached && (\n          block.isGenesis ||\n          await this._hasBlock(block.parentSig)\n        )\n      ) {\n        await bumpHead()\n        continue\n      }\n\n      // Abort if no verifiably common parent in repo\n      // console.debug('haveParent?: ', block.parentSig.hexSlice())\n      if (!(await this._hasBlock(block.parentSig))) break\n\n      // Fast-forward when previous head is an ancestor\n      let isAncestor = false\n      for await (const parentBlock of this._chainLoad(block.parentSig)) {\n        if (head.equals(parentBlock.sig)) {\n          isAncestor = true\n          break // break inner _chainLoad loop\n        }\n      }\n      if (isAncestor) {\n        await bumpHead()\n        continue\n      }\n\n      // Let user-logic decide if this block should\n      // be accepted as a new head\n      if (await this._queryUserStrategy(block, strategy)) {\n        await bumpHead()\n        continue\n      }\n      break // No strategy allowed this transition, abort merge\n    }\n    return blocksWritten\n  }\n\n  async _queryUserStrategy (block, inlineStrategy) {\n    for (const strategy of [inlineStrategy, ...this._strategies]) {\n      if (!strategy) continue\n      const p = strategy(block, this)\n      if (typeof p.then !== 'function') throw new Error('PromiseExpected')\n      if (await p) {\n        return true\n      }\n    }\n    return false\n  }\n\n  /**\n   * Loads feed from pubkey's personal feed\n   */\n  async loadHead (key, stopCallback = undefined) {\n    const head = await this._getHeadPtr(key)\n    if (head) return this.loadFeed(head, stopCallback)\n  }\n\n  /**\n   * Loads feed from pubkey's latest block and backwards\n   */\n  async loadLatest (key, stopCallback = undefined) {\n    const head = await this._getLatestPtr(key)\n    if (head) return this.loadFeed(head, stopCallback)\n  }\n\n  async loadFeed (ptr, stopCallback = undefined) {\n    let limit = 0\n    if (Number.isInteger(stopCallback) && stopCallback > 0) limit = stopCallback\n    if (limit) stopCallback = (_, after) => !--limit && after(true)\n    const pending = []\n    for await (const block of this._chainLoad(ptr)) {\n      /* If needed async abort use this instead.\n      if (typeof stopCallback === 'function') {\n        const abort = await defer(d => stopCallback(d.bind(null, null)))\n        if (abort) break\n      }\n      */\n      let abort = false\n      let abortAfter = false\n      if (typeof stopCallback === 'function') {\n        stopCallback(block, after => {\n          if (after) abortAfter = true\n          else abort = true\n        })\n      }\n\n      // Append block to in-memory feed\n      if (!abort) {\n        pending.unshift(block)\n      }\n\n      // Break loop to stop the chainloader\n      if (abortAfter || abort) break\n    }\n\n    // Reconstruct feed from blocks\n    const feed = Feed.fromBlockArray(pending)\n    if (feed.length) return feed\n  }\n\n  async * _chainLoad (next) {\n    let first = true\n    while (true) {\n      const block = await this.readBlock(next)\n      if (!block && first) break // chain not found, silent\n      first = false\n      if (!block) throw new Error('ParentNotFound') // broken chain, loud\n      yield block\n      if (block.isGenesis) break // We've hit a genesis block\n      next = block.parentSig\n    }\n  }\n\n  async rollback (head, ptr) {\n    let stopHit = false\n    const evicted = await this.loadHead(head, (block, abort) => {\n      if (ptr && block.sig.equals(ptr)) {\n        stopHit = true\n        abort()\n      }\n    })\n    if (ptr && !stopHit) throw new Error('ReferenceNotFound')\n\n    const batch = []\n    const relocate = []\n    const latest = {}\n    for (let i = evicted.length - 1; i >= 0; i--) {\n      const block = evicted.get(i)\n      const key = block.key.toString('hex')\n      if (!latest[key]) latest[key] = await this._getLatestPtr(block.key)\n      // detect if latest-ptr needs to be adjusted\n      if (latest[key]?.equals(block.sig)) {\n        relocate.push(block.key)\n      }\n      // Delete block op\n      batch.push({ type: 'del', key: mkKey(BLOCK, block.sig) })\n    }\n\n    /*\n     * Latest tags are not used atm. maybe let's just relocate them to\n     * their respective heads after rollback, it's not correct but\n     * better than nothing.\n     */\n    /*\n    const newTags = []\n    for await (const block of this._chainLoad(ptr)) {\n      if (!relocate.length) break\n      const idx = relocate.findIndex(k => k.equals(block.key))\n      if (~idx) {\n        newTags.push({\n          key: relocate[idx],\n          ptr: block.sig\n        })\n        relocate.splice(idx, 1)\n      }\n    } */\n\n    const isFeedPurged = evicted.first.isGenesis\n\n    // Clean up tail tag on full eviction\n    if (isFeedPurged) {\n      batch.push({ type: 'del', key: mkKey(TAIL, head) })\n    }\n\n    // -- Adjust new head\n    batch.push({ type: 'del', key: mkKey(HEAD, head) })\n    if (ptr) { // Partial Rollback, part of feed still exists\n      batch.push({ type: 'put', key: mkKey(HEAD, head), value: ptr })\n    } else if (!isFeedPurged) {\n      // Middle segment of a feed was left in repo, supporting this might be bad.\n      batch.push({ type: 'put', key: mkKey(HEAD, head), value: evicted.first.parentSig })\n    }\n\n    // Relocated chain-identifiers\n    batch.push({ type: 'del', key: mkKey(CHAIN_TAIL, evicted.last.sig) })\n    const chainId = await this._getTag(CHAIN_TAIL, evicted.last.sig)\n\n    if (chainId) batch.push({ type: 'del', key: mkKey(CHAIN_HEAD, chainId) })\n\n    if (chainId && !isFeedPurged) {\n      batch.push({\n        type: 'put',\n        key: mkKey(CHAIN_TAIL, evicted.first.parentSig),\n        value: chainId\n      })\n      batch.push({\n        type: 'put',\n        key: mkKey(CHAIN_HEAD, chainId),\n        value: evicted.first.parentSig\n      })\n    }\n\n    // For now, purge dangling 'latest'-tags\n    for (const key of relocate) {\n      batch.push({ type: 'del', key: mkKey(LATEST, key) })\n    }\n\n    await this._db.batch(batch)\n    return evicted\n  }\n\n  // Expose some wrappers to avoid invoking internal API directly\n  get headOf () { return this._getHeadPtr }\n  get tailOf () { return this._getTailPtr }\n  get latestOf () { return this._getLatestPtr }\n  get chainload () { return this._chainLoad }\n  get ownerOf () { return this._traceOwnerOf }\n\n  /* Signatures are keys are 32bytes in size and are duplicated\n   * into every block blob, an idea was to use a varint keyId to make each\n   * block 28bytes smaller on disk. Buuuuut:\n   * Let's waste some storage for alpha version.\n  async _readCounter (keepOpen = false) {\n    const file = this._store('key_counter')\n    const val = await defer(d => file.read(0, 64, d))\n      .then(b => b.readUInt32BE())\n      .catch(err => {\n        console.warn('Failed reading counter, resetting to 0', err)\n        return 0\n      })\n    if (this._autoClose && !keepOpen) await defer(d => file.close(d))\n    return val\n  }\n\n  async _incrementCounter () {\n    const file = this._store('key_counter')\n    let val = await this._readCounter(true)\n    const buf = Buffer.alloc(4)\n    buf.writeUInt32BE(++val)\n    await defer(d => file.write(0, buf, d))\n    if (this._autoClose) await defer(d => file.close(d))\n    return val\n  }\n  */\n\n  async writeReg (key, value) {\n    const bkey = mkKey(REG, Buffer.from(key))\n    await this._db.put(bkey, Buffer.from(value))\n    return true\n  }\n\n  async readReg (key) {\n    const bkey = mkKey(REG, Buffer.from(key))\n    const value = await this._db.get(bkey)\n      .catch(err => {\n        if (!err.notFound) throw err\n      })\n    return value\n  }\n\n  async listHeads () {\n    return this._listRange({\n      gt: mkKey(HEAD, Buffer.alloc(32).fill(0)),\n      lt: mkKey(HEAD, Buffer.alloc(32).fill(0xff))\n    })\n  }\n\n  async listTails () {\n    return this._listRange({\n      gt: mkKey(TAIL, Buffer.alloc(32).fill(0)),\n      lt: mkKey(TAIL, Buffer.alloc(32).fill(0xff))\n    })\n  }\n\n  async listLatest () {\n    return this._listRange({\n      gt: mkKey(LATEST, Buffer.alloc(32).fill(0)),\n      lt: mkKey(LATEST, Buffer.alloc(32).fill(0xff))\n    })\n  }\n\n  /**\n   * Returns a list of unique feeds in repo.\n   * [blockPtr, chainId+(length?)]\n   */\n  async listFeeds () {\n    return this._listRange({\n      gt: mkKey(CHAIN_TAIL, Buffer.alloc(32).fill(0)),\n      lt: mkKey(CHAIN_TAIL, Buffer.alloc(32).fill(0xff))\n    })\n  }\n\n  async listFeedHeads () {\n    return this._listRange({\n      gt: mkKey(CHAIN_HEAD, Buffer.alloc(32).fill(0)),\n      lt: mkKey(CHAIN_HEAD, Buffer.alloc(32).fill(0xff))\n    })\n  }\n\n  async _listRange (query) {\n    const iter = this._db.iterator(query)\n    const result = []\n    while (true) {\n      try {\n        const [key, value] = await new Promise((resolve, reject) => {\n          iter.next((err, key, value) => {\n            if (err) reject(err)\n            else resolve([key, value])\n          })\n        })\n        if (!key) break\n        result.push({ key: key.slice(1), value })\n      } catch (err) {\n        console.warn('Iterator died with an error', err)\n        break\n      }\n    }\n    await new Promise((resolve, reject) => {\n      iter.close(err => err ? reject(err) : resolve())\n    })\n    return result\n  }\n}\n\nmodule.exports = PicoRepo\n","\"use strict\"\nvar decoder\ntry {\n\tdecoder = new TextDecoder()\n} catch(error) {}\nvar src\nvar srcEnd\nvar position = 0\nvar alreadySet\nconst EMPTY_ARRAY = []\nvar strings = EMPTY_ARRAY\nvar stringPosition = 0\nvar currentUnpackr = {}\nvar currentStructures\nvar srcString\nvar srcStringStart = 0\nvar srcStringEnd = 0\nvar bundledStrings\nvar referenceMap\nvar currentExtensions = []\nvar dataView\nvar defaultOptions = {\n\tuseRecords: false,\n\tmapsAsObjects: true\n}\nexport class C1Type {}\nexport const C1 = new C1Type()\nC1.name = 'MessagePack 0xC1'\nvar sequentialMode = false\nvar inlineObjectReadThreshold = 2\nvar readStruct, onLoadedStructures\ntry {\n\tnew Function('')\n} catch(error) {\n\t// if eval variants are not supported, do not create inline object readers ever\n\tinlineObjectReadThreshold = Infinity\n}\n\nexport class Unpackr {\n\tconstructor(options) {\n\t\tif (options) {\n\t\t\tif (options.useRecords === false && options.mapsAsObjects === undefined)\n\t\t\t\toptions.mapsAsObjects = true\n\t\t\tif (options.sequential && options.trusted !== false) {\n\t\t\t\toptions.trusted = true;\n\t\t\t\tif (!options.structures && options.useRecords != false) {\n\t\t\t\t\toptions.structures = []\n\t\t\t\t\tif (!options.maxSharedStructures)\n\t\t\t\t\t\toptions.maxSharedStructures = 0\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (options.structures)\n\t\t\t\toptions.structures.sharedLength = options.structures.length\n\t\t\telse if (options.getStructures) {\n\t\t\t\t(options.structures = []).uninitialized = true // this is what we use to denote an uninitialized structures\n\t\t\t\toptions.structures.sharedLength = 0\n\t\t\t}\n\t\t}\n\t\tObject.assign(this, options)\n\t}\n\tunpack(source, options) {\n\t\tif (src) {\n\t\t\t// re-entrant execution, save the state and restore it after we do this unpack\n\t\t\treturn saveState(() => {\n\t\t\t\tclearSource()\n\t\t\t\treturn this ? this.unpack(source, options) : Unpackr.prototype.unpack.call(defaultOptions, source, options)\n\t\t\t})\n\t\t}\n\t\tif (typeof options === 'object') {\n\t\t\tsrcEnd = options.end || source.length\n\t\t\tposition = options.start || 0\n\t\t} else {\n\t\t\tposition = 0\n\t\t\tsrcEnd = options > -1 ? options : source.length\n\t\t}\n\t\tstringPosition = 0\n\t\tsrcStringEnd = 0\n\t\tsrcString = null\n\t\tstrings = EMPTY_ARRAY\n\t\tbundledStrings = null\n\t\tsrc = source\n\t\t// this provides cached access to the data view for a buffer if it is getting reused, which is a recommend\n\t\t// technique for getting data from a database where it can be copied into an existing buffer instead of creating\n\t\t// new ones\n\t\ttry {\n\t\t\tdataView = source.dataView || (source.dataView = new DataView(source.buffer, source.byteOffset, source.byteLength))\n\t\t} catch(error) {\n\t\t\t// if it doesn't have a buffer, maybe it is the wrong type of object\n\t\t\tsrc = null\n\t\t\tif (source instanceof Uint8Array)\n\t\t\t\tthrow error\n\t\t\tthrow new Error('Source must be a Uint8Array or Buffer but was a ' + ((source && typeof source == 'object') ? source.constructor.name : typeof source))\n\t\t}\n\t\tif (this instanceof Unpackr) {\n\t\t\tcurrentUnpackr = this\n\t\t\tif (this.structures) {\n\t\t\t\tcurrentStructures = this.structures\n\t\t\t\treturn checkedRead()\n\t\t\t} else if (!currentStructures || currentStructures.length > 0) {\n\t\t\t\tcurrentStructures = []\n\t\t\t}\n\t\t} else {\n\t\t\tcurrentUnpackr = defaultOptions\n\t\t\tif (!currentStructures || currentStructures.length > 0)\n\t\t\t\tcurrentStructures = []\n\t\t}\n\t\treturn checkedRead()\n\t}\n\tunpackMultiple(source, forEach) {\n\t\tlet values, lastPosition = 0\n\t\ttry {\n\t\t\tsequentialMode = true\n\t\t\tlet size = source.length\n\t\t\tlet value = this ? this.unpack(source, size) : defaultUnpackr.unpack(source, size)\n\t\t\tif (forEach) {\n\t\t\t\tforEach(value)\n\t\t\t\twhile(position < size) {\n\t\t\t\t\tlastPosition = position\n\t\t\t\t\tif (forEach(checkedRead()) === false) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvalues = [ value ]\n\t\t\t\twhile(position < size) {\n\t\t\t\t\tlastPosition = position\n\t\t\t\t\tvalues.push(checkedRead())\n\t\t\t\t}\n\t\t\t\treturn values\n\t\t\t}\n\t\t} catch(error) {\n\t\t\terror.lastPosition = lastPosition\n\t\t\terror.values = values\n\t\t\tthrow error\n\t\t} finally {\n\t\t\tsequentialMode = false\n\t\t\tclearSource()\n\t\t}\n\t}\n\t_mergeStructures(loadedStructures, existingStructures) {\n\t\tif (onLoadedStructures)\n\t\t\tloadedStructures = onLoadedStructures.call(this, loadedStructures);\n\t\tloadedStructures = loadedStructures || []\n\t\tfor (let i = 0, l = loadedStructures.length; i < l; i++) {\n\t\t\tlet structure = loadedStructures[i]\n\t\t\tif (structure) {\n\t\t\t\tstructure.isShared = true\n\t\t\t\tif (i >= 32)\n\t\t\t\t\tstructure.highByte = (i - 32) >> 5\n\t\t\t}\n\t\t}\n\t\tloadedStructures.sharedLength = loadedStructures.length\n\t\tfor (let id in existingStructures || []) {\n\t\t\tif (id >= 0) {\n\t\t\t\tlet structure = loadedStructures[id]\n\t\t\t\tlet existing = existingStructures[id]\n\t\t\t\tif (existing) {\n\t\t\t\t\tif (structure)\n\t\t\t\t\t\t(loadedStructures.restoreStructures || (loadedStructures.restoreStructures = []))[id] = structure\n\t\t\t\t\tloadedStructures[id] = existing\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this.structures = loadedStructures\n\t}\n\tdecode(source, end) {\n\t\treturn this.unpack(source, end)\n\t}\n}\nexport function getPosition() {\n\treturn position\n}\nexport function checkedRead() {\n\ttry {\n\t\tif (!currentUnpackr.trusted && !sequentialMode) {\n\t\t\tlet sharedLength = currentStructures.sharedLength || 0\n\t\t\tif (sharedLength < currentStructures.length)\n\t\t\t\tcurrentStructures.length = sharedLength\n\t\t}\n\t\tlet result\n\t\tif (currentUnpackr.randomAccessStructure && src[position] < 0x40 && src[position] >= 0x20 && readStruct) {\n\t\t\tresult = readStruct(src, position, srcEnd, currentUnpackr)\n\t\t\tposition = srcEnd\n\t\t} else\n\t\t\tresult = read()\n\t\tif (bundledStrings) // bundled strings to skip past\n\t\t\tposition = bundledStrings.postBundlePosition\n\n\t\tif (position == srcEnd) {\n\t\t\t// finished reading this source, cleanup references\n\t\t\tif (currentStructures.restoreStructures)\n\t\t\t\trestoreStructures()\n\t\t\tcurrentStructures = null\n\t\t\tsrc = null\n\t\t\tif (referenceMap)\n\t\t\t\treferenceMap = null\n\t\t} else if (position > srcEnd) {\n\t\t\t// over read\n\t\t\tthrow new Error('Unexpected end of MessagePack data')\n\t\t} else if (!sequentialMode) {\n\t\t\tthrow new Error('Data read, but end of buffer not reached ' + JSON.stringify(result).slice(0, 100))\n\t\t}\n\t\t// else more to read, but we are reading sequentially, so don't clear source yet\n\t\treturn result\n\t} catch(error) {\n\t\tif (currentStructures.restoreStructures)\n\t\t\trestoreStructures()\n\t\tclearSource()\n\t\tif (error instanceof RangeError || error.message.startsWith('Unexpected end of buffer') || position > srcEnd) {\n\t\t\terror.incomplete = true\n\t\t}\n\t\tthrow error\n\t}\n}\n\nfunction restoreStructures() {\n\tfor (let id in currentStructures.restoreStructures) {\n\t\tcurrentStructures[id] = currentStructures.restoreStructures[id]\n\t}\n\tcurrentStructures.restoreStructures = null\n}\n\nexport function read() {\n\tlet token = src[position++]\n\tif (token < 0xa0) {\n\t\tif (token < 0x80) {\n\t\t\tif (token < 0x40)\n\t\t\t\treturn token\n\t\t\telse {\n\t\t\t\tlet structure = currentStructures[token & 0x3f] ||\n\t\t\t\t\tcurrentUnpackr.getStructures && loadStructures()[token & 0x3f]\n\t\t\t\tif (structure) {\n\t\t\t\t\tif (!structure.read) {\n\t\t\t\t\t\tstructure.read = createStructureReader(structure, token & 0x3f)\n\t\t\t\t\t}\n\t\t\t\t\treturn structure.read()\n\t\t\t\t} else\n\t\t\t\t\treturn token\n\t\t\t}\n\t\t} else if (token < 0x90) {\n\t\t\t// map\n\t\t\ttoken -= 0x80\n\t\t\tif (currentUnpackr.mapsAsObjects) {\n\t\t\t\tlet object = {}\n\t\t\t\tfor (let i = 0; i < token; i++) {\n\t\t\t\t\tobject[readKey()] = read()\n\t\t\t\t}\n\t\t\t\treturn object\n\t\t\t} else {\n\t\t\t\tlet map = new Map()\n\t\t\t\tfor (let i = 0; i < token; i++) {\n\t\t\t\t\tmap.set(read(), read())\n\t\t\t\t}\n\t\t\t\treturn map\n\t\t\t}\n\t\t} else {\n\t\t\ttoken -= 0x90\n\t\t\tlet array = new Array(token)\n\t\t\tfor (let i = 0; i < token; i++) {\n\t\t\t\tarray[i] = read()\n\t\t\t}\n\t\t\tif (currentUnpackr.freezeData)\n\t\t\t\treturn Object.freeze(array)\n\t\t\treturn array\n\t\t}\n\t} else if (token < 0xc0) {\n\t\t// fixstr\n\t\tlet length = token - 0xa0\n\t\tif (srcStringEnd >= position) {\n\t\t\treturn srcString.slice(position - srcStringStart, (position += length) - srcStringStart)\n\t\t}\n\t\tif (srcStringEnd == 0 && srcEnd < 140) {\n\t\t\t// for small blocks, avoiding the overhead of the extract call is helpful\n\t\t\tlet string = length < 16 ? shortStringInJS(length) : longStringInJS(length)\n\t\t\tif (string != null)\n\t\t\t\treturn string\n\t\t}\n\t\treturn readFixedString(length)\n\t} else {\n\t\tlet value\n\t\tswitch (token) {\n\t\t\tcase 0xc0: return null\n\t\t\tcase 0xc1:\n\t\t\t\tif (bundledStrings) {\n\t\t\t\t\tvalue = read() // followed by the length of the string in characters (not bytes!)\n\t\t\t\t\tif (value > 0)\n\t\t\t\t\t\treturn bundledStrings[1].slice(bundledStrings.position1, bundledStrings.position1 += value)\n\t\t\t\t\telse\n\t\t\t\t\t\treturn bundledStrings[0].slice(bundledStrings.position0, bundledStrings.position0 -= value)\n\t\t\t\t}\n\t\t\t\treturn C1; // \"never-used\", return special object to denote that\n\t\t\tcase 0xc2: return false\n\t\t\tcase 0xc3: return true\n\t\t\tcase 0xc4:\n\t\t\t\t// bin 8\n\t\t\t\tvalue = src[position++]\n\t\t\t\tif (value === undefined)\n\t\t\t\t\tthrow new Error('Unexpected end of buffer')\n\t\t\t\treturn readBin(value)\n\t\t\tcase 0xc5:\n\t\t\t\t// bin 16\n\t\t\t\tvalue = dataView.getUint16(position)\n\t\t\t\tposition += 2\n\t\t\t\treturn readBin(value)\n\t\t\tcase 0xc6:\n\t\t\t\t// bin 32\n\t\t\t\tvalue = dataView.getUint32(position)\n\t\t\t\tposition += 4\n\t\t\t\treturn readBin(value)\n\t\t\tcase 0xc7:\n\t\t\t\t// ext 8\n\t\t\t\treturn readExt(src[position++])\n\t\t\tcase 0xc8:\n\t\t\t\t// ext 16\n\t\t\t\tvalue = dataView.getUint16(position)\n\t\t\t\tposition += 2\n\t\t\t\treturn readExt(value)\n\t\t\tcase 0xc9:\n\t\t\t\t// ext 32\n\t\t\t\tvalue = dataView.getUint32(position)\n\t\t\t\tposition += 4\n\t\t\t\treturn readExt(value)\n\t\t\tcase 0xca:\n\t\t\t\tvalue = dataView.getFloat32(position)\n\t\t\t\tif (currentUnpackr.useFloat32 > 2) {\n\t\t\t\t\t// this does rounding of numbers that were encoded in 32-bit float to nearest significant decimal digit that could be preserved\n\t\t\t\t\tlet multiplier = mult10[((src[position] & 0x7f) << 1) | (src[position + 1] >> 7)]\n\t\t\t\t\tposition += 4\n\t\t\t\t\treturn ((multiplier * value + (value > 0 ? 0.5 : -0.5)) >> 0) / multiplier\n\t\t\t\t}\n\t\t\t\tposition += 4\n\t\t\t\treturn value\n\t\t\tcase 0xcb:\n\t\t\t\tvalue = dataView.getFloat64(position)\n\t\t\t\tposition += 8\n\t\t\t\treturn value\n\t\t\t// uint handlers\n\t\t\tcase 0xcc:\n\t\t\t\treturn src[position++]\n\t\t\tcase 0xcd:\n\t\t\t\tvalue = dataView.getUint16(position)\n\t\t\t\tposition += 2\n\t\t\t\treturn value\n\t\t\tcase 0xce:\n\t\t\t\tvalue = dataView.getUint32(position)\n\t\t\t\tposition += 4\n\t\t\t\treturn value\n\t\t\tcase 0xcf:\n\t\t\t\tif (currentUnpackr.int64AsNumber) {\n\t\t\t\t\tvalue = dataView.getUint32(position) * 0x100000000\n\t\t\t\t\tvalue += dataView.getUint32(position + 4)\n\t\t\t\t} else\n\t\t\t\t\tvalue = dataView.getBigUint64(position)\n\t\t\t\tposition += 8\n\t\t\t\treturn value\n\n\t\t\t// int handlers\n\t\t\tcase 0xd0:\n\t\t\t\treturn dataView.getInt8(position++)\n\t\t\tcase 0xd1:\n\t\t\t\tvalue = dataView.getInt16(position)\n\t\t\t\tposition += 2\n\t\t\t\treturn value\n\t\t\tcase 0xd2:\n\t\t\t\tvalue = dataView.getInt32(position)\n\t\t\t\tposition += 4\n\t\t\t\treturn value\n\t\t\tcase 0xd3:\n\t\t\t\tif (currentUnpackr.int64AsNumber) {\n\t\t\t\t\tvalue = dataView.getInt32(position) * 0x100000000\n\t\t\t\t\tvalue += dataView.getUint32(position + 4)\n\t\t\t\t} else\n\t\t\t\t\tvalue = dataView.getBigInt64(position)\n\t\t\t\tposition += 8\n\t\t\t\treturn value\n\n\t\t\tcase 0xd4:\n\t\t\t\t// fixext 1\n\t\t\t\tvalue = src[position++]\n\t\t\t\tif (value == 0x72) {\n\t\t\t\t\treturn recordDefinition(src[position++] & 0x3f)\n\t\t\t\t} else {\n\t\t\t\t\tlet extension = currentExtensions[value]\n\t\t\t\t\tif (extension) {\n\t\t\t\t\t\tif (extension.read) {\n\t\t\t\t\t\t\tposition++ // skip filler byte\n\t\t\t\t\t\t\treturn extension.read(read())\n\t\t\t\t\t\t} else if (extension.noBuffer) {\n\t\t\t\t\t\t\tposition++ // skip filler byte\n\t\t\t\t\t\t\treturn extension()\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\treturn extension(src.subarray(position, ++position))\n\t\t\t\t\t} else\n\t\t\t\t\t\tthrow new Error('Unknown extension ' + value)\n\t\t\t\t}\n\t\t\tcase 0xd5:\n\t\t\t\t// fixext 2\n\t\t\t\tvalue = src[position]\n\t\t\t\tif (value == 0x72) {\n\t\t\t\t\tposition++\n\t\t\t\t\treturn recordDefinition(src[position++] & 0x3f, src[position++])\n\t\t\t\t} else\n\t\t\t\t\treturn readExt(2)\n\t\t\tcase 0xd6:\n\t\t\t\t// fixext 4\n\t\t\t\treturn readExt(4)\n\t\t\tcase 0xd7:\n\t\t\t\t// fixext 8\n\t\t\t\treturn readExt(8)\n\t\t\tcase 0xd8:\n\t\t\t\t// fixext 16\n\t\t\t\treturn readExt(16)\n\t\t\tcase 0xd9:\n\t\t\t// str 8\n\t\t\t\tvalue = src[position++]\n\t\t\t\tif (srcStringEnd >= position) {\n\t\t\t\t\treturn srcString.slice(position - srcStringStart, (position += value) - srcStringStart)\n\t\t\t\t}\n\t\t\t\treturn readString8(value)\n\t\t\tcase 0xda:\n\t\t\t// str 16\n\t\t\t\tvalue = dataView.getUint16(position)\n\t\t\t\tposition += 2\n\t\t\t\tif (srcStringEnd >= position) {\n\t\t\t\t\treturn srcString.slice(position - srcStringStart, (position += value) - srcStringStart)\n\t\t\t\t}\n\t\t\t\treturn readString16(value)\n\t\t\tcase 0xdb:\n\t\t\t// str 32\n\t\t\t\tvalue = dataView.getUint32(position)\n\t\t\t\tposition += 4\n\t\t\t\tif (srcStringEnd >= position) {\n\t\t\t\t\treturn srcString.slice(position - srcStringStart, (position += value) - srcStringStart)\n\t\t\t\t}\n\t\t\t\treturn readString32(value)\n\t\t\tcase 0xdc:\n\t\t\t// array 16\n\t\t\t\tvalue = dataView.getUint16(position)\n\t\t\t\tposition += 2\n\t\t\t\treturn readArray(value)\n\t\t\tcase 0xdd:\n\t\t\t// array 32\n\t\t\t\tvalue = dataView.getUint32(position)\n\t\t\t\tposition += 4\n\t\t\t\treturn readArray(value)\n\t\t\tcase 0xde:\n\t\t\t// map 16\n\t\t\t\tvalue = dataView.getUint16(position)\n\t\t\t\tposition += 2\n\t\t\t\treturn readMap(value)\n\t\t\tcase 0xdf:\n\t\t\t// map 32\n\t\t\t\tvalue = dataView.getUint32(position)\n\t\t\t\tposition += 4\n\t\t\t\treturn readMap(value)\n\t\t\tdefault: // negative int\n\t\t\t\tif (token >= 0xe0)\n\t\t\t\t\treturn token - 0x100\n\t\t\t\tif (token === undefined) {\n\t\t\t\t\tlet error = new Error('Unexpected end of MessagePack data')\n\t\t\t\t\terror.incomplete = true\n\t\t\t\t\tthrow error\n\t\t\t\t}\n\t\t\t\tthrow new Error('Unknown MessagePack token ' + token)\n\n\t\t}\n\t}\n}\nconst validName = /^[a-zA-Z_$][a-zA-Z\\d_$]*$/\nfunction createStructureReader(structure, firstId) {\n\tfunction readObject() {\n\t\t// This initial function is quick to instantiate, but runs slower. After several iterations pay the cost to build the faster function\n\t\tif (readObject.count++ > inlineObjectReadThreshold) {\n\t\t\tlet readObject = structure.read = (new Function('r', 'return function(){return ' + (currentUnpackr.freezeData ? 'Object.freeze' : '') +\n\t\t\t\t'({' + structure.map(key => validName.test(key) ? key + ':r()' : ('[' + JSON.stringify(key) + ']:r()')).join(',') + '})}'))(read)\n\t\t\tif (structure.highByte === 0)\n\t\t\t\tstructure.read = createSecondByteReader(firstId, structure.read)\n\t\t\treturn readObject() // second byte is already read, if there is one so immediately read object\n\t\t}\n\t\tlet object = {}\n\t\tfor (let i = 0, l = structure.length; i < l; i++) {\n\t\t\tlet key = structure[i]\n\t\t\tobject[key] = read()\n\t\t}\n\t\tif (currentUnpackr.freezeData)\n\t\t\treturn Object.freeze(object);\n\t\treturn object\n\t}\n\treadObject.count = 0\n\tif (structure.highByte === 0) {\n\t\treturn createSecondByteReader(firstId, readObject)\n\t}\n\treturn readObject\n}\n\nconst createSecondByteReader = (firstId, read0) => {\n\treturn function() {\n\t\tlet highByte = src[position++]\n\t\tif (highByte === 0)\n\t\t\treturn read0()\n\t\tlet id = firstId < 32 ? -(firstId + (highByte << 5)) : firstId + (highByte << 5)\n\t\tlet structure = currentStructures[id] || loadStructures()[id]\n\t\tif (!structure) {\n\t\t\tthrow new Error('Record id is not defined for ' + id)\n\t\t}\n\t\tif (!structure.read)\n\t\t\tstructure.read = createStructureReader(structure, firstId)\n\t\treturn structure.read()\n\t}\n}\n\nexport function loadStructures() {\n\tlet loadedStructures = saveState(() => {\n\t\t// save the state in case getStructures modifies our buffer\n\t\tsrc = null\n\t\treturn currentUnpackr.getStructures()\n\t})\n\treturn currentStructures = currentUnpackr._mergeStructures(loadedStructures, currentStructures)\n}\n\nvar readFixedString = readStringJS\nvar readString8 = readStringJS\nvar readString16 = readStringJS\nvar readString32 = readStringJS\nexport let isNativeAccelerationEnabled = false\n\nexport function setExtractor(extractStrings) {\n\tisNativeAccelerationEnabled = true\n\treadFixedString = readString(1)\n\treadString8 = readString(2)\n\treadString16 = readString(3)\n\treadString32 = readString(5)\n\tfunction readString(headerLength) {\n\t\treturn function readString(length) {\n\t\t\tlet string = strings[stringPosition++]\n\t\t\tif (string == null) {\n\t\t\t\tif (bundledStrings)\n\t\t\t\t\treturn readStringJS(length)\n\t\t\t\tlet extraction = extractStrings(position - headerLength, srcEnd, src)\n\t\t\t\tif (typeof extraction == 'string') {\n\t\t\t\t\tstring = extraction\n\t\t\t\t\tstrings = EMPTY_ARRAY\n\t\t\t\t} else {\n\t\t\t\t\tstrings = extraction\n\t\t\t\t\tstringPosition = 1\n\t\t\t\t\tsrcStringEnd = 1 // even if a utf-8 string was decoded, must indicate we are in the midst of extracted strings and can't skip strings\n\t\t\t\t\tstring = strings[0]\n\t\t\t\t\tif (string === undefined)\n\t\t\t\t\t\tthrow new Error('Unexpected end of buffer')\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet srcStringLength = string.length\n\t\t\tif (srcStringLength <= length) {\n\t\t\t\tposition += length\n\t\t\t\treturn string\n\t\t\t}\n\t\t\tsrcString = string\n\t\t\tsrcStringStart = position\n\t\t\tsrcStringEnd = position + srcStringLength\n\t\t\tposition += length\n\t\t\treturn string.slice(0, length) // we know we just want the beginning\n\t\t}\n\t}\n}\nfunction readStringJS(length) {\n\tlet result\n\tif (length < 16) {\n\t\tif (result = shortStringInJS(length))\n\t\t\treturn result\n\t}\n\tif (length > 64 && decoder)\n\t\treturn decoder.decode(src.subarray(position, position += length))\n\tconst end = position + length\n\tconst units = []\n\tresult = ''\n\twhile (position < end) {\n\t\tconst byte1 = src[position++]\n\t\tif ((byte1 & 0x80) === 0) {\n\t\t\t// 1 byte\n\t\t\tunits.push(byte1)\n\t\t} else if ((byte1 & 0xe0) === 0xc0) {\n\t\t\t// 2 bytes\n\t\t\tconst byte2 = src[position++] & 0x3f\n\t\t\tunits.push(((byte1 & 0x1f) << 6) | byte2)\n\t\t} else if ((byte1 & 0xf0) === 0xe0) {\n\t\t\t// 3 bytes\n\t\t\tconst byte2 = src[position++] & 0x3f\n\t\t\tconst byte3 = src[position++] & 0x3f\n\t\t\tunits.push(((byte1 & 0x1f) << 12) | (byte2 << 6) | byte3)\n\t\t} else if ((byte1 & 0xf8) === 0xf0) {\n\t\t\t// 4 bytes\n\t\t\tconst byte2 = src[position++] & 0x3f\n\t\t\tconst byte3 = src[position++] & 0x3f\n\t\t\tconst byte4 = src[position++] & 0x3f\n\t\t\tlet unit = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0c) | (byte3 << 0x06) | byte4\n\t\t\tif (unit > 0xffff) {\n\t\t\t\tunit -= 0x10000\n\t\t\t\tunits.push(((unit >>> 10) & 0x3ff) | 0xd800)\n\t\t\t\tunit = 0xdc00 | (unit & 0x3ff)\n\t\t\t}\n\t\t\tunits.push(unit)\n\t\t} else {\n\t\t\tunits.push(byte1)\n\t\t}\n\n\t\tif (units.length >= 0x1000) {\n\t\t\tresult += fromCharCode.apply(String, units)\n\t\t\tunits.length = 0\n\t\t}\n\t}\n\n\tif (units.length > 0) {\n\t\tresult += fromCharCode.apply(String, units)\n\t}\n\n\treturn result\n}\nexport function readString(source, start, length) {\n\tlet existingSrc = src;\n\tsrc = source;\n\tposition = start;\n\ttry {\n\t\treturn readStringJS(length);\n\t} finally {\n\t\tsrc = existingSrc;\n\t}\n}\n\nfunction readArray(length) {\n\tlet array = new Array(length)\n\tfor (let i = 0; i < length; i++) {\n\t\tarray[i] = read()\n\t}\n\tif (currentUnpackr.freezeData)\n\t\treturn Object.freeze(array)\n\treturn array\n}\n\nfunction readMap(length) {\n\tif (currentUnpackr.mapsAsObjects) {\n\t\tlet object = {}\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tobject[readKey()] = read()\n\t\t}\n\t\treturn object\n\t} else {\n\t\tlet map = new Map()\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tmap.set(read(), read())\n\t\t}\n\t\treturn map\n\t}\n}\n\nvar fromCharCode = String.fromCharCode\nfunction longStringInJS(length) {\n\tlet start = position\n\tlet bytes = new Array(length)\n\tfor (let i = 0; i < length; i++) {\n\t\tconst byte = src[position++];\n\t\tif ((byte & 0x80) > 0) {\n\t\t\t\tposition = start\n\t\t\t\treturn\n\t\t\t}\n\t\t\tbytes[i] = byte\n\t\t}\n\t\treturn fromCharCode.apply(String, bytes)\n}\nfunction shortStringInJS(length) {\n\tif (length < 4) {\n\t\tif (length < 2) {\n\t\t\tif (length === 0)\n\t\t\t\treturn ''\n\t\t\telse {\n\t\t\t\tlet a = src[position++]\n\t\t\t\tif ((a & 0x80) > 1) {\n\t\t\t\t\tposition -= 1\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\treturn fromCharCode(a)\n\t\t\t}\n\t\t} else {\n\t\t\tlet a = src[position++]\n\t\t\tlet b = src[position++]\n\t\t\tif ((a & 0x80) > 0 || (b & 0x80) > 0) {\n\t\t\t\tposition -= 2\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (length < 3)\n\t\t\t\treturn fromCharCode(a, b)\n\t\t\tlet c = src[position++]\n\t\t\tif ((c & 0x80) > 0) {\n\t\t\t\tposition -= 3\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn fromCharCode(a, b, c)\n\t\t}\n\t} else {\n\t\tlet a = src[position++]\n\t\tlet b = src[position++]\n\t\tlet c = src[position++]\n\t\tlet d = src[position++]\n\t\tif ((a & 0x80) > 0 || (b & 0x80) > 0 || (c & 0x80) > 0 || (d & 0x80) > 0) {\n\t\t\tposition -= 4\n\t\t\treturn\n\t\t}\n\t\tif (length < 6) {\n\t\t\tif (length === 4)\n\t\t\t\treturn fromCharCode(a, b, c, d)\n\t\t\telse {\n\t\t\t\tlet e = src[position++]\n\t\t\t\tif ((e & 0x80) > 0) {\n\t\t\t\t\tposition -= 5\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\treturn fromCharCode(a, b, c, d, e)\n\t\t\t}\n\t\t} else if (length < 8) {\n\t\t\tlet e = src[position++]\n\t\t\tlet f = src[position++]\n\t\t\tif ((e & 0x80) > 0 || (f & 0x80) > 0) {\n\t\t\t\tposition -= 6\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (length < 7)\n\t\t\t\treturn fromCharCode(a, b, c, d, e, f)\n\t\t\tlet g = src[position++]\n\t\t\tif ((g & 0x80) > 0) {\n\t\t\t\tposition -= 7\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn fromCharCode(a, b, c, d, e, f, g)\n\t\t} else {\n\t\t\tlet e = src[position++]\n\t\t\tlet f = src[position++]\n\t\t\tlet g = src[position++]\n\t\t\tlet h = src[position++]\n\t\t\tif ((e & 0x80) > 0 || (f & 0x80) > 0 || (g & 0x80) > 0 || (h & 0x80) > 0) {\n\t\t\t\tposition -= 8\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (length < 10) {\n\t\t\t\tif (length === 8)\n\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h)\n\t\t\t\telse {\n\t\t\t\t\tlet i = src[position++]\n\t\t\t\t\tif ((i & 0x80) > 0) {\n\t\t\t\t\t\tposition -= 9\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i)\n\t\t\t\t}\n\t\t\t} else if (length < 12) {\n\t\t\t\tlet i = src[position++]\n\t\t\t\tlet j = src[position++]\n\t\t\t\tif ((i & 0x80) > 0 || (j & 0x80) > 0) {\n\t\t\t\t\tposition -= 10\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (length < 11)\n\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j)\n\t\t\t\tlet k = src[position++]\n\t\t\t\tif ((k & 0x80) > 0) {\n\t\t\t\t\tposition -= 11\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k)\n\t\t\t} else {\n\t\t\t\tlet i = src[position++]\n\t\t\t\tlet j = src[position++]\n\t\t\t\tlet k = src[position++]\n\t\t\t\tlet l = src[position++]\n\t\t\t\tif ((i & 0x80) > 0 || (j & 0x80) > 0 || (k & 0x80) > 0 || (l & 0x80) > 0) {\n\t\t\t\t\tposition -= 12\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (length < 14) {\n\t\t\t\t\tif (length === 12)\n\t\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k, l)\n\t\t\t\t\telse {\n\t\t\t\t\t\tlet m = src[position++]\n\t\t\t\t\t\tif ((m & 0x80) > 0) {\n\t\t\t\t\t\t\tposition -= 13\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k, l, m)\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlet m = src[position++]\n\t\t\t\t\tlet n = src[position++]\n\t\t\t\t\tif ((m & 0x80) > 0 || (n & 0x80) > 0) {\n\t\t\t\t\t\tposition -= 14\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tif (length < 15)\n\t\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k, l, m, n)\n\t\t\t\t\tlet o = src[position++]\n\t\t\t\t\tif ((o & 0x80) > 0) {\n\t\t\t\t\t\tposition -= 15\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction readOnlyJSString() {\n\tlet token = src[position++]\n\tlet length\n\tif (token < 0xc0) {\n\t\t// fixstr\n\t\tlength = token - 0xa0\n\t} else {\n\t\tswitch(token) {\n\t\t\tcase 0xd9:\n\t\t\t// str 8\n\t\t\t\tlength = src[position++]\n\t\t\t\tbreak\n\t\t\tcase 0xda:\n\t\t\t// str 16\n\t\t\t\tlength = dataView.getUint16(position)\n\t\t\t\tposition += 2\n\t\t\t\tbreak\n\t\t\tcase 0xdb:\n\t\t\t// str 32\n\t\t\t\tlength = dataView.getUint32(position)\n\t\t\t\tposition += 4\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tthrow new Error('Expected string')\n\t\t}\n\t}\n\treturn readStringJS(length)\n}\n\n\nfunction readBin(length) {\n\treturn currentUnpackr.copyBuffers ?\n\t\t// specifically use the copying slice (not the node one)\n\t\tUint8Array.prototype.slice.call(src, position, position += length) :\n\t\tsrc.subarray(position, position += length)\n}\nfunction readExt(length) {\n\tlet type = src[position++]\n\tif (currentExtensions[type]) {\n\t\tlet end\n\t\treturn currentExtensions[type](src.subarray(position, end = (position += length)), (readPosition) => {\n\t\t\tposition = readPosition;\n\t\t\ttry {\n\t\t\t\treturn read();\n\t\t\t} finally {\n\t\t\t\tposition = end;\n\t\t\t}\n\t\t})\n\t}\n\telse\n\t\tthrow new Error('Unknown extension type ' + type)\n}\n\nvar keyCache = new Array(4096)\nfunction readKey() {\n\tlet length = src[position++]\n\tif (length >= 0xa0 && length < 0xc0) {\n\t\t// fixstr, potentially use key cache\n\t\tlength = length - 0xa0\n\t\tif (srcStringEnd >= position) // if it has been extracted, must use it (and faster anyway)\n\t\t\treturn srcString.slice(position - srcStringStart, (position += length) - srcStringStart)\n\t\telse if (!(srcStringEnd == 0 && srcEnd < 180))\n\t\t\treturn readFixedString(length)\n\t} else { // not cacheable, go back and do a standard read\n\t\tposition--\n\t\treturn read()\n\t}\n\tlet key = ((length << 5) ^ (length > 1 ? dataView.getUint16(position) : length > 0 ? src[position] : 0)) & 0xfff\n\tlet entry = keyCache[key]\n\tlet checkPosition = position\n\tlet end = position + length - 3\n\tlet chunk\n\tlet i = 0\n\tif (entry && entry.bytes == length) {\n\t\twhile (checkPosition < end) {\n\t\t\tchunk = dataView.getUint32(checkPosition)\n\t\t\tif (chunk != entry[i++]) {\n\t\t\t\tcheckPosition = 0x70000000\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tcheckPosition += 4\n\t\t}\n\t\tend += 3\n\t\twhile (checkPosition < end) {\n\t\t\tchunk = src[checkPosition++]\n\t\t\tif (chunk != entry[i++]) {\n\t\t\t\tcheckPosition = 0x70000000\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\tif (checkPosition === end) {\n\t\t\tposition = checkPosition\n\t\t\treturn entry.string\n\t\t}\n\t\tend -= 3\n\t\tcheckPosition = position\n\t}\n\tentry = []\n\tkeyCache[key] = entry\n\tentry.bytes = length\n\twhile (checkPosition < end) {\n\t\tchunk = dataView.getUint32(checkPosition)\n\t\tentry.push(chunk)\n\t\tcheckPosition += 4\n\t}\n\tend += 3\n\twhile (checkPosition < end) {\n\t\tchunk = src[checkPosition++]\n\t\tentry.push(chunk)\n\t}\n\t// for small blocks, avoiding the overhead of the extract call is helpful\n\tlet string = length < 16 ? shortStringInJS(length) : longStringInJS(length)\n\tif (string != null)\n\t\treturn entry.string = string\n\treturn entry.string = readFixedString(length)\n}\n\n// the registration of the record definition extension (as \"r\")\nconst recordDefinition = (id, highByte) => {\n\tvar structure = read()\n\tlet firstByte = id\n\tif (highByte !== undefined) {\n\t\tid = id < 32 ? -((highByte << 5) + id) : ((highByte << 5) + id)\n\t\tstructure.highByte = highByte\n\t}\n\tlet existingStructure = currentStructures[id]\n\tif (existingStructure && existingStructure.isShared) {\n\t\t(currentStructures.restoreStructures || (currentStructures.restoreStructures = []))[id] = existingStructure\n\t}\n\tcurrentStructures[id] = structure\n\tstructure.read = createStructureReader(structure, firstByte)\n\treturn structure.read()\n}\ncurrentExtensions[0] = () => {} // notepack defines extension 0 to mean undefined, so use that as the default here\ncurrentExtensions[0].noBuffer = true\n\ncurrentExtensions[0x65] = () => {\n\tlet data = read()\n\treturn (globalThis[data[0]] || Error)(data[1])\n}\n\ncurrentExtensions[0x69] = (data) => {\n\t// id extension (for structured clones)\n\tlet id = dataView.getUint32(position - 4)\n\tif (!referenceMap)\n\t\treferenceMap = new Map()\n\tlet token = src[position]\n\tlet target\n\t// TODO: handle Maps, Sets, and other types that can cycle; this is complicated, because you potentially need to read\n\t// ahead past references to record structure definitions\n\tif (token >= 0x90 && token < 0xa0 || token == 0xdc || token == 0xdd)\n\t\ttarget = []\n\telse\n\t\ttarget = {}\n\n\tlet refEntry = { target } // a placeholder object\n\treferenceMap.set(id, refEntry)\n\tlet targetProperties = read() // read the next value as the target object to id\n\tif (refEntry.used) // there is a cycle, so we have to assign properties to original target\n\t\treturn Object.assign(target, targetProperties)\n\trefEntry.target = targetProperties // the placeholder wasn't used, replace with the deserialized one\n\treturn targetProperties // no cycle, can just use the returned read object\n}\n\ncurrentExtensions[0x70] = (data) => {\n\t// pointer extension (for structured clones)\n\tlet id = dataView.getUint32(position - 4)\n\tlet refEntry = referenceMap.get(id)\n\trefEntry.used = true\n\treturn refEntry.target\n}\n\ncurrentExtensions[0x73] = () => new Set(read())\n\nexport const typedArrays = ['Int8','Uint8','Uint8Clamped','Int16','Uint16','Int32','Uint32','Float32','Float64','BigInt64','BigUint64'].map(type => type + 'Array')\n\ncurrentExtensions[0x74] = (data) => {\n\tlet typeCode = data[0]\n\tlet typedArrayName = typedArrays[typeCode]\n\tif (!typedArrayName)\n\t\tthrow new Error('Could not find typed array for code ' + typeCode)\n\t// we have to always slice/copy here to get a new ArrayBuffer that is word/byte aligned\n\treturn new globalThis[typedArrayName](Uint8Array.prototype.slice.call(data, 1).buffer)\n}\ncurrentExtensions[0x78] = () => {\n\tlet data = read()\n\treturn new RegExp(data[0], data[1])\n}\nconst TEMP_BUNDLE = []\ncurrentExtensions[0x62] = (data) => {\n\tlet dataSize = (data[0] << 24) + (data[1] << 16) + (data[2] << 8) + data[3]\n\tlet dataPosition = position\n\tposition += dataSize - data.length\n\tbundledStrings = TEMP_BUNDLE\n\tbundledStrings = [readOnlyJSString(), readOnlyJSString()]\n\tbundledStrings.position0 = 0\n\tbundledStrings.position1 = 0\n\tbundledStrings.postBundlePosition = position\n\tposition = dataPosition\n\treturn read()\n}\n\ncurrentExtensions[0xff] = (data) => {\n\t// 32-bit date extension\n\tif (data.length == 4)\n\t\treturn new Date((data[0] * 0x1000000 + (data[1] << 16) + (data[2] << 8) + data[3]) * 1000)\n\telse if (data.length == 8)\n\t\treturn new Date(\n\t\t\t((data[0] << 22) + (data[1] << 14) + (data[2] << 6) + (data[3] >> 2)) / 1000000 +\n\t\t\t((data[3] & 0x3) * 0x100000000 + data[4] * 0x1000000 + (data[5] << 16) + (data[6] << 8) + data[7]) * 1000)\n\telse if (data.length == 12)// TODO: Implement support for negative\n\t\treturn new Date(\n\t\t\t((data[0] << 24) + (data[1] << 16) + (data[2] << 8) + data[3]) / 1000000 +\n\t\t\t(((data[4] & 0x80) ? -0x1000000000000 : 0) + data[6] * 0x10000000000 + data[7] * 0x100000000 + data[8] * 0x1000000 + (data[9] << 16) + (data[10] << 8) + data[11]) * 1000)\n\telse\n\t\treturn new Date('invalid')\n} // notepack defines extension 0 to mean undefined, so use that as the default here\n// registration of bulk record definition?\n// currentExtensions[0x52] = () =>\n\nfunction saveState(callback) {\n\tlet savedSrcEnd = srcEnd\n\tlet savedPosition = position\n\tlet savedStringPosition = stringPosition\n\tlet savedSrcStringStart = srcStringStart\n\tlet savedSrcStringEnd = srcStringEnd\n\tlet savedSrcString = srcString\n\tlet savedStrings = strings\n\tlet savedReferenceMap = referenceMap\n\tlet savedBundledStrings = bundledStrings\n\n\t// TODO: We may need to revisit this if we do more external calls to user code (since it could be slow)\n\tlet savedSrc = new Uint8Array(src.slice(0, srcEnd)) // we copy the data in case it changes while external data is processed\n\tlet savedStructures = currentStructures\n\tlet savedStructuresContents = currentStructures.slice(0, currentStructures.length)\n\tlet savedPackr = currentUnpackr\n\tlet savedSequentialMode = sequentialMode\n\tlet value = callback()\n\tsrcEnd = savedSrcEnd\n\tposition = savedPosition\n\tstringPosition = savedStringPosition\n\tsrcStringStart = savedSrcStringStart\n\tsrcStringEnd = savedSrcStringEnd\n\tsrcString = savedSrcString\n\tstrings = savedStrings\n\treferenceMap = savedReferenceMap\n\tbundledStrings = savedBundledStrings\n\tsrc = savedSrc\n\tsequentialMode = savedSequentialMode\n\tcurrentStructures = savedStructures\n\tcurrentStructures.splice(0, currentStructures.length, ...savedStructuresContents)\n\tcurrentUnpackr = savedPackr\n\tdataView = new DataView(src.buffer, src.byteOffset, src.byteLength)\n\treturn value\n}\nexport function clearSource() {\n\tsrc = null\n\treferenceMap = null\n\tcurrentStructures = null\n}\n\nexport function addExtension(extension) {\n\tif (extension.unpack)\n\t\tcurrentExtensions[extension.type] = extension.unpack\n\telse\n\t\tcurrentExtensions[extension.type] = extension\n}\n\nexport const mult10 = new Array(147) // this is a table matching binary exponents to the multiplier to determine significant digit rounding\nfor (let i = 0; i < 256; i++) {\n\tmult10[i] = +('1e' + Math.floor(45.15 - i * 0.30103))\n}\nexport const Decoder = Unpackr\nvar defaultUnpackr = new Unpackr({ useRecords: false })\nexport const unpack = defaultUnpackr.unpack\nexport const unpackMultiple = defaultUnpackr.unpackMultiple\nexport const decode = defaultUnpackr.unpack\nexport const FLOAT32_OPTIONS = {\n\tNEVER: 0,\n\tALWAYS: 1,\n\tDECIMAL_ROUND: 3,\n\tDECIMAL_FIT: 4\n}\nlet f32Array = new Float32Array(1)\nlet u8Array = new Uint8Array(f32Array.buffer, 0, 4)\nexport function roundFloat32(float32Number) {\n\tf32Array[0] = float32Number\n\tlet multiplier = mult10[((u8Array[3] & 0x7f) << 1) | (u8Array[2] >> 7)]\n\treturn ((multiplier * float32Number + (float32Number > 0 ? 0.5 : -0.5)) >> 0) / multiplier\n}\nexport function setReadStruct(updatedReadStruct, loadedStructs) {\n\treadStruct = updatedReadStruct;\n\tonLoadedStructures = loadedStructs;\n}\n","\"use strict\"\nimport { Unpackr, mult10, C1Type, typedArrays, addExtension as unpackAddExtension } from './unpack.js'\nlet textEncoder\ntry {\n\ttextEncoder = new TextEncoder()\n} catch (error) {}\nlet extensions, extensionClasses\nconst hasNodeBuffer = typeof Buffer !== 'undefined'\nconst ByteArrayAllocate = hasNodeBuffer ?\n\tfunction(length) { return Buffer.allocUnsafeSlow(length) } : Uint8Array\nconst ByteArray = hasNodeBuffer ? Buffer : Uint8Array\nconst MAX_BUFFER_SIZE = hasNodeBuffer ? 0x100000000 : 0x7fd00000\nlet target, keysTarget\nlet targetView\nlet position = 0\nlet safeEnd\nlet bundledStrings = null\nlet writeStructSlots, prepareStructures\nconst MAX_BUNDLE_SIZE = 0xf000\nconst hasNonLatin = /[\\u0080-\\uFFFF]/\nexport const RECORD_SYMBOL = Symbol('record-id')\nexport class Packr extends Unpackr {\n\tconstructor(options) {\n\t\tsuper(options)\n\t\tthis.offset = 0\n\t\tlet typeBuffer\n\t\tlet start\n\t\tlet hasSharedUpdate\n\t\tlet structures\n\t\tlet referenceMap\n\t\tlet encodeUtf8 = ByteArray.prototype.utf8Write ? function(string, position) {\n\t\t\treturn target.utf8Write(string, position, 0xffffffff)\n\t\t} : (textEncoder && textEncoder.encodeInto) ?\n\t\t\tfunction(string, position) {\n\t\t\t\treturn textEncoder.encodeInto(string, target.subarray(position)).written\n\t\t\t} : false\n\n\t\tlet packr = this\n\t\tif (!options)\n\t\t\toptions = {}\n\t\tlet isSequential = options && options.sequential\n\t\tlet hasSharedStructures = options.structures || options.saveStructures\n\t\tlet maxSharedStructures = options.maxSharedStructures\n\t\tif (maxSharedStructures == null)\n\t\t\tmaxSharedStructures = hasSharedStructures ? 32 : 0\n\t\tif (maxSharedStructures > 8160)\n\t\t\tthrow new Error('Maximum maxSharedStructure is 8160')\n\t\tif (options.structuredClone && options.moreTypes == undefined) {\n\t\t\toptions.moreTypes = true\n\t\t}\n\t\tlet maxOwnStructures = options.maxOwnStructures\n\t\tif (maxOwnStructures == null)\n\t\t\tmaxOwnStructures = hasSharedStructures ? 32 : 64\n\t\tif (!this.structures && options.useRecords != false)\n\t\t\tthis.structures = []\n\t\t// two byte record ids for shared structures\n\t\tlet useTwoByteRecords = maxSharedStructures > 32 || (maxOwnStructures + maxSharedStructures > 64)\t\t\n\t\tlet sharedLimitId = maxSharedStructures + 0x40\n\t\tlet maxStructureId = maxSharedStructures + maxOwnStructures + 0x40\n\t\tif (maxStructureId > 8256) {\n\t\t\tthrow new Error('Maximum maxSharedStructure + maxOwnStructure is 8192')\n\t\t}\n\t\tlet recordIdsToRemove = []\n\t\tlet transitionsCount = 0\n\t\tlet serializationsSinceTransitionRebuild = 0\n\n\t\tthis.pack = this.encode = function(value, encodeOptions) {\n\t\t\tif (!target) {\n\t\t\t\ttarget = new ByteArrayAllocate(8192)\n\t\t\t\ttargetView = target.dataView = new DataView(target.buffer, 0, 8192)\n\t\t\t\tposition = 0\n\t\t\t}\n\t\t\tsafeEnd = target.length - 10\n\t\t\tif (safeEnd - position < 0x800) {\n\t\t\t\t// don't start too close to the end, \n\t\t\t\ttarget = new ByteArrayAllocate(target.length)\n\t\t\t\ttargetView = target.dataView = new DataView(target.buffer, 0, target.length)\n\t\t\t\tsafeEnd = target.length - 10\n\t\t\t\tposition = 0\n\t\t\t} else\n\t\t\t\tposition = (position + 7) & 0x7ffffff8 // Word align to make any future copying of this buffer faster\n\t\t\tstart = position\n\t\t\treferenceMap = packr.structuredClone ? new Map() : null\n\t\t\tif (packr.bundleStrings && typeof value !== 'string') {\n\t\t\t\tbundledStrings = []\n\t\t\t\tbundledStrings.size = Infinity // force a new bundle start on first string\n\t\t\t} else\n\t\t\t\tbundledStrings = null\n\t\t\tstructures = packr.structures\n\t\t\tif (structures) {\n\t\t\t\tif (structures.uninitialized)\n\t\t\t\t\tstructures = packr._mergeStructures(packr.getStructures())\n\t\t\t\tlet sharedLength = structures.sharedLength || 0\n\t\t\t\tif (sharedLength > maxSharedStructures) {\n\t\t\t\t\t//if (maxSharedStructures <= 32 && structures.sharedLength > 32) // TODO: could support this, but would need to update the limit ids\n\t\t\t\t\tthrow new Error('Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to ' + structures.sharedLength)\n\t\t\t\t}\n\t\t\t\tif (!structures.transitions) {\n\t\t\t\t\t// rebuild our structure transitions\n\t\t\t\t\tstructures.transitions = Object.create(null)\n\t\t\t\t\tfor (let i = 0; i < sharedLength; i++) {\n\t\t\t\t\t\tlet keys = structures[i]\n\t\t\t\t\t\tif (!keys)\n\t\t\t\t\t\t\tcontinue\n\t\t\t\t\t\tlet nextTransition, transition = structures.transitions\n\t\t\t\t\t\tfor (let j = 0, l = keys.length; j < l; j++) {\n\t\t\t\t\t\t\tlet key = keys[j]\n\t\t\t\t\t\t\tnextTransition = transition[key]\n\t\t\t\t\t\t\tif (!nextTransition) {\n\t\t\t\t\t\t\t\tnextTransition = transition[key] = Object.create(null)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttransition = nextTransition\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttransition[RECORD_SYMBOL] = i + 0x40\n\t\t\t\t\t}\n\t\t\t\t\tthis.lastNamedStructuresLength = sharedLength\n\t\t\t\t}\n\t\t\t\tif (!isSequential) {\n\t\t\t\t\tstructures.nextId = sharedLength + 0x40\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (hasSharedUpdate)\n\t\t\t\thasSharedUpdate = false\n\t\t\ttry {\n\t\t\t\tif (packr.randomAccessStructure && value.constructor && value.constructor === Object)\n\t\t\t\t\twriteStruct(value);\n\t\t\t\telse\n\t\t\t\t\tpack(value)\n\t\t\t\tif (bundledStrings) {\n\t\t\t\t\twriteBundles(start, pack)\n\t\t\t\t}\n\t\t\t\tpackr.offset = position // update the offset so next serialization doesn't write over our buffer, but can continue writing to same buffer sequentially\n\t\t\t\tif (referenceMap && referenceMap.idsToInsert) {\n\t\t\t\t\tposition += referenceMap.idsToInsert.length * 6\n\t\t\t\t\tif (position > safeEnd)\n\t\t\t\t\t\tmakeRoom(position)\n\t\t\t\t\tpackr.offset = position\n\t\t\t\t\tlet serialized = insertIds(target.subarray(start, position), referenceMap.idsToInsert)\n\t\t\t\t\treferenceMap = null\n\t\t\t\t\treturn serialized\n\t\t\t\t}\n\t\t\t\tif (encodeOptions & REUSE_BUFFER_MODE) {\n\t\t\t\t\ttarget.start = start\n\t\t\t\t\ttarget.end = position\n\t\t\t\t\treturn target\n\t\t\t\t}\n\t\t\t\treturn target.subarray(start, position) // position can change if we call pack again in saveStructures, so we get the buffer now\n\t\t\t} finally {\n\t\t\t\tif (structures) {\n\t\t\t\t\tif (serializationsSinceTransitionRebuild < 10)\n\t\t\t\t\t\tserializationsSinceTransitionRebuild++\n\t\t\t\t\tlet sharedLength = structures.sharedLength || maxSharedStructures\n\t\t\t\t\tif (structures.length > sharedLength)\n\t\t\t\t\t\tstructures.length = sharedLength\n\t\t\t\t\tif (transitionsCount > 10000) {\n\t\t\t\t\t\t// force a rebuild occasionally after a lot of transitions so it can get cleaned up\n\t\t\t\t\t\tstructures.transitions = null\n\t\t\t\t\t\tserializationsSinceTransitionRebuild = 0\n\t\t\t\t\t\ttransitionsCount = 0\n\t\t\t\t\t\tif (recordIdsToRemove.length > 0)\n\t\t\t\t\t\t\trecordIdsToRemove = []\n\t\t\t\t\t} else if (recordIdsToRemove.length > 0 && !isSequential) {\n\t\t\t\t\t\tfor (let i = 0, l = recordIdsToRemove.length; i < l; i++) {\n\t\t\t\t\t\t\trecordIdsToRemove[i][RECORD_SYMBOL] = 0\n\t\t\t\t\t\t}\n\t\t\t\t\t\trecordIdsToRemove = []\n\t\t\t\t\t}\n\t\t\t\t\tif (hasSharedUpdate && packr.saveStructures) {\n\t\t\t\t\t\t// we can't rely on start/end with REUSE_BUFFER_MODE since they will (probably) change when we save\n\t\t\t\t\t\tlet returnBuffer = target.subarray(start, position)\n\t\t\t\t\t\tlet newSharedData = prepareStructures ? prepareStructures(structures, packr) : structures;\n\t\t\t\t\t\tif (packr.saveStructures(newSharedData, newSharedData.isCompatible || packr.lastNamedStructuresLength || 0) === false) {\n\t\t\t\t\t\t\t// get updated structures and try again if the update failed\n\t\t\t\t\t\t\tpackr._mergeStructures(packr.getStructures())\n\t\t\t\t\t\t\treturn packr.pack(value)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpackr.lastNamedStructuresLength = sharedLength\n\t\t\t\t\t\treturn returnBuffer\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (encodeOptions & RESET_BUFFER_MODE)\n\t\t\t\t\tposition = start\n\t\t\t}\n\t\t}\n\t\tconst pack = (value) => {\n\t\t\tif (position > safeEnd)\n\t\t\t\ttarget = makeRoom(position)\n\n\t\t\tvar type = typeof value\n\t\t\tvar length\n\t\t\tif (type === 'string') {\n\t\t\t\tlet strLength = value.length\n\t\t\t\tif (bundledStrings && strLength >= 4 && strLength < 0x1000) {\n\t\t\t\t\tif ((bundledStrings.size += strLength) > MAX_BUNDLE_SIZE) {\n\t\t\t\t\t\tlet extStart\n\t\t\t\t\t\tlet maxBytes = (bundledStrings[0] ? bundledStrings[0].length * 3 + bundledStrings[1].length : 0) + 10\n\t\t\t\t\t\tif (position + maxBytes > safeEnd)\n\t\t\t\t\t\t\ttarget = makeRoom(position + maxBytes)\n\t\t\t\t\t\tif (bundledStrings.position) { // here we use the 0x62 extension to write the last bundle and reserve sapce for the reference pointer to the next/current bundle\n\t\t\t\t\t\t\ttarget[position] = 0xc8 // ext 16\n\t\t\t\t\t\t\tposition += 3 // reserve for the writing bundle size\n\t\t\t\t\t\t\ttarget[position++] = 0x62 // 'b'\n\t\t\t\t\t\t\textStart = position - start\n\t\t\t\t\t\t\tposition += 4 // reserve for writing bundle reference\n\t\t\t\t\t\t\twriteBundles(start, pack) // write the last bundles\n\t\t\t\t\t\t\ttargetView.setUint16(extStart + start - 3, position - start - extStart)\n\t\t\t\t\t\t} else { // here we use the 0x62 extension just to reserve the space for the reference pointer to the bundle (will be updated once the bundle is written)\n\t\t\t\t\t\t\ttarget[position++] = 0xd6 // fixext 4\n\t\t\t\t\t\t\ttarget[position++] = 0x62 // 'b'\n\t\t\t\t\t\t\textStart = position - start\n\t\t\t\t\t\t\tposition += 4 // reserve for writing bundle reference\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbundledStrings = ['', ''] // create new ones\n\t\t\t\t\t\tbundledStrings.size = 0\n\t\t\t\t\t\tbundledStrings.position = extStart\n\t\t\t\t\t}\n\t\t\t\t\tlet twoByte = hasNonLatin.test(value)\n\t\t\t\t\tbundledStrings[twoByte ? 0 : 1] += value\n\t\t\t\t\ttarget[position++] = 0xc1\n\t\t\t\t\tpack(twoByte ? -strLength : strLength);\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tlet headerSize\n\t\t\t\t// first we estimate the header size, so we can write to the correct location\n\t\t\t\tif (strLength < 0x20) {\n\t\t\t\t\theaderSize = 1\n\t\t\t\t} else if (strLength < 0x100) {\n\t\t\t\t\theaderSize = 2\n\t\t\t\t} else if (strLength < 0x10000) {\n\t\t\t\t\theaderSize = 3\n\t\t\t\t} else {\n\t\t\t\t\theaderSize = 5\n\t\t\t\t}\n\t\t\t\tlet maxBytes = strLength * 3\n\t\t\t\tif (position + maxBytes > safeEnd)\n\t\t\t\t\ttarget = makeRoom(position + maxBytes)\n\n\t\t\t\tif (strLength < 0x40 || !encodeUtf8) {\n\t\t\t\t\tlet i, c1, c2, strPosition = position + headerSize\n\t\t\t\t\tfor (i = 0; i < strLength; i++) {\n\t\t\t\t\t\tc1 = value.charCodeAt(i)\n\t\t\t\t\t\tif (c1 < 0x80) {\n\t\t\t\t\t\t\ttarget[strPosition++] = c1\n\t\t\t\t\t\t} else if (c1 < 0x800) {\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 6 | 0xc0\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 & 0x3f | 0x80\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t(c1 & 0xfc00) === 0xd800 &&\n\t\t\t\t\t\t\t((c2 = value.charCodeAt(i + 1)) & 0xfc00) === 0xdc00\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tc1 = 0x10000 + ((c1 & 0x03ff) << 10) + (c2 & 0x03ff)\n\t\t\t\t\t\t\ti++\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 18 | 0xf0\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 12 & 0x3f | 0x80\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 6 & 0x3f | 0x80\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 & 0x3f | 0x80\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 12 | 0xe0\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 6 & 0x3f | 0x80\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 & 0x3f | 0x80\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlength = strPosition - position - headerSize\n\t\t\t\t} else {\n\t\t\t\t\tlength = encodeUtf8(value, position + headerSize)\n\t\t\t\t}\n\n\t\t\t\tif (length < 0x20) {\n\t\t\t\t\ttarget[position++] = 0xa0 | length\n\t\t\t\t} else if (length < 0x100) {\n\t\t\t\t\tif (headerSize < 2) {\n\t\t\t\t\t\ttarget.copyWithin(position + 2, position + 1, position + 1 + length)\n\t\t\t\t\t}\n\t\t\t\t\ttarget[position++] = 0xd9\n\t\t\t\t\ttarget[position++] = length\n\t\t\t\t} else if (length < 0x10000) {\n\t\t\t\t\tif (headerSize < 3) {\n\t\t\t\t\t\ttarget.copyWithin(position + 3, position + 2, position + 2 + length)\n\t\t\t\t\t}\n\t\t\t\t\ttarget[position++] = 0xda\n\t\t\t\t\ttarget[position++] = length >> 8\n\t\t\t\t\ttarget[position++] = length & 0xff\n\t\t\t\t} else {\n\t\t\t\t\tif (headerSize < 5) {\n\t\t\t\t\t\ttarget.copyWithin(position + 5, position + 3, position + 3 + length)\n\t\t\t\t\t}\n\t\t\t\t\ttarget[position++] = 0xdb\n\t\t\t\t\ttargetView.setUint32(position, length)\n\t\t\t\t\tposition += 4\n\t\t\t\t}\n\t\t\t\tposition += length\n\t\t\t} else if (type === 'number') {\n\t\t\t\tif (value >>> 0 === value) {// positive integer, 32-bit or less\n\t\t\t\t\t// positive uint\n\t\t\t\t\tif (value < 0x20 || (value < 0x80 && this.useRecords === false) || (value < 0x40 && !this.randomAccessStructure)) {\n\t\t\t\t\t\ttarget[position++] = value\n\t\t\t\t\t} else if (value < 0x100) {\n\t\t\t\t\t\ttarget[position++] = 0xcc\n\t\t\t\t\t\ttarget[position++] = value\n\t\t\t\t\t} else if (value < 0x10000) {\n\t\t\t\t\t\ttarget[position++] = 0xcd\n\t\t\t\t\t\ttarget[position++] = value >> 8\n\t\t\t\t\t\ttarget[position++] = value & 0xff\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttarget[position++] = 0xce\n\t\t\t\t\t\ttargetView.setUint32(position, value)\n\t\t\t\t\t\tposition += 4\n\t\t\t\t\t}\n\t\t\t\t} else if (value >> 0 === value) { // negative integer\n\t\t\t\t\tif (value >= -0x20) {\n\t\t\t\t\t\ttarget[position++] = 0x100 + value\n\t\t\t\t\t} else if (value >= -0x80) {\n\t\t\t\t\t\ttarget[position++] = 0xd0\n\t\t\t\t\t\ttarget[position++] = value + 0x100\n\t\t\t\t\t} else if (value >= -0x8000) {\n\t\t\t\t\t\ttarget[position++] = 0xd1\n\t\t\t\t\t\ttargetView.setInt16(position, value)\n\t\t\t\t\t\tposition += 2\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttarget[position++] = 0xd2\n\t\t\t\t\t\ttargetView.setInt32(position, value)\n\t\t\t\t\t\tposition += 4\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlet useFloat32\n\t\t\t\t\tif ((useFloat32 = this.useFloat32) > 0 && value < 0x100000000 && value >= -0x80000000) {\n\t\t\t\t\t\ttarget[position++] = 0xca\n\t\t\t\t\t\ttargetView.setFloat32(position, value)\n\t\t\t\t\t\tlet xShifted\n\t\t\t\t\t\tif (useFloat32 < 4 ||\n\t\t\t\t\t\t\t\t// this checks for rounding of numbers that were encoded in 32-bit float to nearest significant decimal digit that could be preserved\n\t\t\t\t\t\t\t\t((xShifted = value * mult10[((target[position] & 0x7f) << 1) | (target[position + 1] >> 7)]) >> 0) === xShifted) {\n\t\t\t\t\t\t\tposition += 4\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\tposition-- // move back into position for writing a double\n\t\t\t\t\t}\n\t\t\t\t\ttarget[position++] = 0xcb\n\t\t\t\t\ttargetView.setFloat64(position, value)\n\t\t\t\t\tposition += 8\n\t\t\t\t}\n\t\t\t} else if (type === 'object') {\n\t\t\t\tif (!value)\n\t\t\t\t\ttarget[position++] = 0xc0\n\t\t\t\telse {\n\t\t\t\t\tif (referenceMap) {\n\t\t\t\t\t\tlet referee = referenceMap.get(value)\n\t\t\t\t\t\tif (referee) {\n\t\t\t\t\t\t\tif (!referee.id) {\n\t\t\t\t\t\t\t\tlet idsToInsert = referenceMap.idsToInsert || (referenceMap.idsToInsert = [])\n\t\t\t\t\t\t\t\treferee.id = idsToInsert.push(referee)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttarget[position++] = 0xd6 // fixext 4\n\t\t\t\t\t\t\ttarget[position++] = 0x70 // \"p\" for pointer\n\t\t\t\t\t\t\ttargetView.setUint32(position, referee.id)\n\t\t\t\t\t\t\tposition += 4\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t} else \n\t\t\t\t\t\t\treferenceMap.set(value, { offset: position - start })\n\t\t\t\t\t}\n\t\t\t\t\tlet constructor = value.constructor\n\t\t\t\t\tif (constructor === Object) {\n\t\t\t\t\t\twriteObject(value, true)\n\t\t\t\t\t} else if (constructor === Array) {\n\t\t\t\t\t\tlength = value.length\n\t\t\t\t\t\tif (length < 0x10) {\n\t\t\t\t\t\t\ttarget[position++] = 0x90 | length\n\t\t\t\t\t\t} else if (length < 0x10000) {\n\t\t\t\t\t\t\ttarget[position++] = 0xdc\n\t\t\t\t\t\t\ttarget[position++] = length >> 8\n\t\t\t\t\t\t\ttarget[position++] = length & 0xff\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttarget[position++] = 0xdd\n\t\t\t\t\t\t\ttargetView.setUint32(position, length)\n\t\t\t\t\t\t\tposition += 4\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\t\t\t\tpack(value[i])\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (constructor === Map) {\n\t\t\t\t\t\tlength = value.size\n\t\t\t\t\t\tif (length < 0x10) {\n\t\t\t\t\t\t\ttarget[position++] = 0x80 | length\n\t\t\t\t\t\t} else if (length < 0x10000) {\n\t\t\t\t\t\t\ttarget[position++] = 0xde\n\t\t\t\t\t\t\ttarget[position++] = length >> 8\n\t\t\t\t\t\t\ttarget[position++] = length & 0xff\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttarget[position++] = 0xdf\n\t\t\t\t\t\t\ttargetView.setUint32(position, length)\n\t\t\t\t\t\t\tposition += 4\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (let [ key, entryValue ] of value) {\n\t\t\t\t\t\t\tpack(key)\n\t\t\t\t\t\t\tpack(entryValue)\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\t\n\t\t\t\t\t\tfor (let i = 0, l = extensions.length; i < l; i++) {\n\t\t\t\t\t\t\tlet extensionClass = extensionClasses[i]\n\t\t\t\t\t\t\tif (value instanceof extensionClass) {\n\t\t\t\t\t\t\t\tlet extension = extensions[i]\n\t\t\t\t\t\t\t\tif (extension.write) {\n\t\t\t\t\t\t\t\t\tif (extension.type) {\n\t\t\t\t\t\t\t\t\t\ttarget[position++] = 0xd4 // one byte \"tag\" extension\n\t\t\t\t\t\t\t\t\t\ttarget[position++] = extension.type\n\t\t\t\t\t\t\t\t\t\ttarget[position++] = 0\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tpack(extension.write.call(this, value))\n\t\t\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlet currentTarget = target\n\t\t\t\t\t\t\t\tlet currentTargetView = targetView\n\t\t\t\t\t\t\t\tlet currentPosition = position\n\t\t\t\t\t\t\t\ttarget = null\n\t\t\t\t\t\t\t\tlet result\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tresult = extension.pack.call(this, value, (size) => {\n\t\t\t\t\t\t\t\t\t\t// restore target and use it\n\t\t\t\t\t\t\t\t\t\ttarget = currentTarget\n\t\t\t\t\t\t\t\t\t\tcurrentTarget = null\n\t\t\t\t\t\t\t\t\t\tposition += size\n\t\t\t\t\t\t\t\t\t\tif (position > safeEnd)\n\t\t\t\t\t\t\t\t\t\t\tmakeRoom(position)\n\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\ttarget, targetView, position: position - size\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}, pack)\n\t\t\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\t\t\t// restore current target information (unless already restored)\n\t\t\t\t\t\t\t\t\tif (currentTarget) {\n\t\t\t\t\t\t\t\t\t\ttarget = currentTarget\n\t\t\t\t\t\t\t\t\t\ttargetView = currentTargetView\n\t\t\t\t\t\t\t\t\t\tposition = currentPosition\n\t\t\t\t\t\t\t\t\t\tsafeEnd = target.length - 10\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\t\t\tif (result.length + position > safeEnd)\n\t\t\t\t\t\t\t\t\t\tmakeRoom(result.length + position)\n\t\t\t\t\t\t\t\t\tposition = writeExtensionData(result, target, position, extension.type)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// no extension found, write as object\n\t\t\t\t\t\twriteObject(value, !value.hasOwnProperty) // if it doesn't have hasOwnProperty, don't do hasOwnProperty checks\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (type === 'boolean') {\n\t\t\t\ttarget[position++] = value ? 0xc3 : 0xc2\n\t\t\t} else if (type === 'bigint') {\n\t\t\t\tif (value < (BigInt(1)<<BigInt(63)) && value >= -(BigInt(1)<<BigInt(63))) {\n\t\t\t\t\t// use a signed int as long as it fits\n\t\t\t\t\ttarget[position++] = 0xd3\n\t\t\t\t\ttargetView.setBigInt64(position, value)\n\t\t\t\t} else if (value < (BigInt(1)<<BigInt(64)) && value > 0) {\n\t\t\t\t\t// if we can fit an unsigned int, use that\n\t\t\t\t\ttarget[position++] = 0xcf\n\t\t\t\t\ttargetView.setBigUint64(position, value)\n\t\t\t\t} else {\n\t\t\t\t\t// overflow\n\t\t\t\t\tif (this.largeBigIntToFloat) {\n\t\t\t\t\t\ttarget[position++] = 0xcb\n\t\t\t\t\t\ttargetView.setFloat64(position, Number(value))\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new RangeError(value + ' was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tposition += 8\n\t\t\t} else if (type === 'undefined') {\n\t\t\t\tif (this.encodeUndefinedAsNil)\n\t\t\t\t\ttarget[position++] = 0xc0\n\t\t\t\telse {\n\t\t\t\t\ttarget[position++] = 0xd4 // a number of implementations use fixext1 with type 0, data 0 to denote undefined, so we follow suite\n\t\t\t\t\ttarget[position++] = 0\n\t\t\t\t\ttarget[position++] = 0\n\t\t\t\t}\n\t\t\t} else if (type === 'function') {\n\t\t\t\tpack(this.writeFunction && this.writeFunction()) // if there is a writeFunction, use it, otherwise just encode as undefined\n\t\t\t} else {\n\t\t\t\tthrow new Error('Unknown type: ' + type)\n\t\t\t}\n\t\t}\n\n\t\tconst writeObject = this.useRecords === false ? this.variableMapSize ? (object) => {\n\t\t\t// this method is slightly slower, but generates \"preferred serialization\" (optimally small for smaller objects)\n\t\t\tlet keys = Object.keys(object)\n\t\t\tlet length = keys.length\n\t\t\tif (length < 0x10) {\n\t\t\t\ttarget[position++] = 0x80 | length\n\t\t\t} else if (length < 0x10000) {\n\t\t\t\ttarget[position++] = 0xde\n\t\t\t\ttarget[position++] = length >> 8\n\t\t\t\ttarget[position++] = length & 0xff\n\t\t\t} else {\n\t\t\t\ttarget[position++] = 0xdf\n\t\t\t\ttargetView.setUint32(position, length)\n\t\t\t\tposition += 4\n\t\t\t}\n\t\t\tlet key\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tpack(key = keys[i])\n\t\t\t\tpack(object[key])\n\t\t\t}\n\t\t} :\n\t\t(object, safePrototype) => {\n\t\t\ttarget[position++] = 0xde // always using map 16, so we can preallocate and set the length afterwards\n\t\t\tlet objectOffset = position - start\n\t\t\tposition += 2\n\t\t\tlet size = 0\n\t\t\tfor (let key in object) {\n\t\t\t\tif (safePrototype || object.hasOwnProperty(key)) {\n\t\t\t\t\tpack(key)\n\t\t\t\t\tpack(object[key])\n\t\t\t\t\tsize++\n\t\t\t\t}\n\t\t\t}\n\t\t\ttarget[objectOffset++ + start] = size >> 8\n\t\t\ttarget[objectOffset + start] = size & 0xff\n\t\t} :\n\t\t(options.progressiveRecords && !useTwoByteRecords) ?  // this is about 2% faster for highly stable structures, since it only requires one for-in loop (but much more expensive when new structure needs to be written)\n\t\t(object, safePrototype) => {\n\t\t\tlet nextTransition, transition = structures.transitions || (structures.transitions = Object.create(null))\n\t\t\tlet objectOffset = position++ - start\n\t\t\tlet wroteKeys\n\t\t\tfor (let key in object) {\n\t\t\t\tif (safePrototype || object.hasOwnProperty(key)) {\n\t\t\t\t\tnextTransition = transition[key]\n\t\t\t\t\tif (nextTransition)\n\t\t\t\t\t\ttransition = nextTransition\n\t\t\t\t\telse {\n\t\t\t\t\t\t// record doesn't exist, create full new record and insert it\n\t\t\t\t\t\tlet keys = Object.keys(object)\n\t\t\t\t\t\tlet lastTransition = transition\n\t\t\t\t\t\ttransition = structures.transitions\n\t\t\t\t\t\tlet newTransitions = 0\n\t\t\t\t\t\tfor (let i = 0, l = keys.length; i < l; i++) {\n\t\t\t\t\t\t\tlet key = keys[i]\n\t\t\t\t\t\t\tnextTransition = transition[key]\n\t\t\t\t\t\t\tif (!nextTransition) {\n\t\t\t\t\t\t\t\tnextTransition = transition[key] = Object.create(null)\n\t\t\t\t\t\t\t\tnewTransitions++\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttransition = nextTransition\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (objectOffset + start + 1 == position) {\n\t\t\t\t\t\t\t// first key, so we don't need to insert, we can just write record directly\n\t\t\t\t\t\t\tposition--\n\t\t\t\t\t\t\tnewRecord(transition, keys, newTransitions)\n\t\t\t\t\t\t} else // otherwise we need to insert the record, moving existing data after the record\n\t\t\t\t\t\t\tinsertNewRecord(transition, keys, objectOffset, newTransitions)\n\t\t\t\t\t\twroteKeys = true\n\t\t\t\t\t\ttransition = lastTransition[key]\n\t\t\t\t\t}\n\t\t\t\t\tpack(object[key])\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!wroteKeys) {\n\t\t\t\tlet recordId = transition[RECORD_SYMBOL]\n\t\t\t\tif (recordId)\n\t\t\t\t\ttarget[objectOffset + start] = recordId\n\t\t\t\telse\n\t\t\t\t\tinsertNewRecord(transition, Object.keys(object), objectOffset, 0)\n\t\t\t}\n\t\t} :\n\t\t(object, safePrototype) => {\n\t\t\tlet nextTransition, transition = structures.transitions || (structures.transitions = Object.create(null))\n\t\t\tlet newTransitions = 0\n\t\t\tfor (let key in object) if (safePrototype || object.hasOwnProperty(key)) {\n\t\t\t\tnextTransition = transition[key]\n\t\t\t\tif (!nextTransition) {\n\t\t\t\t\tnextTransition = transition[key] = Object.create(null)\n\t\t\t\t\tnewTransitions++\n\t\t\t\t}\n\t\t\t\ttransition = nextTransition\n\t\t\t}\n\t\t\tlet recordId = transition[RECORD_SYMBOL]\n\t\t\tif (recordId) {\n\t\t\t\tif (recordId >= 0x60 && useTwoByteRecords) {\n\t\t\t\t\ttarget[position++] = ((recordId -= 0x60) & 0x1f) + 0x60\n\t\t\t\t\ttarget[position++] = recordId >> 5\n\t\t\t\t} else\n\t\t\t\t\ttarget[position++] = recordId\n\t\t\t} else {\n\t\t\t\tnewRecord(transition, transition.__keys__ || Object.keys(object), newTransitions)\n\t\t\t}\n\t\t\t// now write the values\n\t\t\tfor (let key in object)\n\t\t\t\tif (safePrototype || object.hasOwnProperty(key))\n\t\t\t\t\tpack(object[key])\n\t\t}\n\t\tconst makeRoom = (end) => {\n\t\t\tlet newSize\n\t\t\tif (end > 0x1000000) {\n\t\t\t\t// special handling for really large buffers\n\t\t\t\tif ((end - start) > MAX_BUFFER_SIZE)\n\t\t\t\t\tthrow new Error('Packed buffer would be larger than maximum buffer size')\n\t\t\t\tnewSize = Math.min(MAX_BUFFER_SIZE,\n\t\t\t\t\tMath.round(Math.max((end - start) * (end > 0x4000000 ? 1.25 : 2), 0x400000) / 0x1000) * 0x1000)\n\t\t\t} else // faster handling for smaller buffers\n\t\t\t\tnewSize = ((Math.max((end - start) << 2, target.length - 1) >> 12) + 1) << 12\n\t\t\tlet newBuffer = new ByteArrayAllocate(newSize)\n\t\t\ttargetView = newBuffer.dataView = new DataView(newBuffer.buffer, 0, newSize)\n\t\t\tend = Math.min(end, target.length)\n\t\t\tif (target.copy)\n\t\t\t\ttarget.copy(newBuffer, 0, start, end)\n\t\t\telse\n\t\t\t\tnewBuffer.set(target.slice(start, end))\n\t\t\tposition -= start\n\t\t\tstart = 0\n\t\t\tsafeEnd = newBuffer.length - 10\n\t\t\treturn target = newBuffer\n\t\t}\n\t\tconst newRecord = (transition, keys, newTransitions) => {\n\t\t\tlet recordId = structures.nextId\n\t\t\tif (!recordId)\n\t\t\t\trecordId = 0x40\n\t\t\tif (recordId < sharedLimitId && this.shouldShareStructure && !this.shouldShareStructure(keys)) {\n\t\t\t\trecordId = structures.nextOwnId\n\t\t\t\tif (!(recordId < maxStructureId))\n\t\t\t\t\trecordId = sharedLimitId\n\t\t\t\tstructures.nextOwnId = recordId + 1\n\t\t\t} else {\n\t\t\t\tif (recordId >= maxStructureId)// cycle back around\n\t\t\t\t\trecordId = sharedLimitId\n\t\t\t\tstructures.nextId = recordId + 1\n\t\t\t}\n\t\t\tlet highByte = keys.highByte = recordId >= 0x60 && useTwoByteRecords ? (recordId - 0x60) >> 5 : -1\n\t\t\ttransition[RECORD_SYMBOL] = recordId\n\t\t\ttransition.__keys__ = keys\n\t\t\tstructures[recordId - 0x40] = keys\n\n\t\t\tif (recordId < sharedLimitId) {\n\t\t\t\tkeys.isShared = true\n\t\t\t\tstructures.sharedLength = recordId - 0x3f\n\t\t\t\thasSharedUpdate = true\n\t\t\t\tif (highByte >= 0) {\n\t\t\t\t\ttarget[position++] = (recordId & 0x1f) + 0x60\n\t\t\t\t\ttarget[position++] = highByte\n\t\t\t\t} else {\n\t\t\t\t\ttarget[position++] = recordId\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (highByte >= 0) {\n\t\t\t\t\ttarget[position++] = 0xd5 // fixext 2\n\t\t\t\t\ttarget[position++] = 0x72 // \"r\" record defintion extension type\n\t\t\t\t\ttarget[position++] = (recordId & 0x1f) + 0x60\n\t\t\t\t\ttarget[position++] = highByte\n\t\t\t\t} else {\n\t\t\t\t\ttarget[position++] = 0xd4 // fixext 1\n\t\t\t\t\ttarget[position++] = 0x72 // \"r\" record defintion extension type\n\t\t\t\t\ttarget[position++] = recordId\n\t\t\t\t}\n\n\t\t\t\tif (newTransitions)\n\t\t\t\t\ttransitionsCount += serializationsSinceTransitionRebuild * newTransitions\n\t\t\t\t// record the removal of the id, we can maintain our shared structure\n\t\t\t\tif (recordIdsToRemove.length >= maxOwnStructures)\n\t\t\t\t\trecordIdsToRemove.shift()[RECORD_SYMBOL] = 0 // we are cycling back through, and have to remove old ones\n\t\t\t\trecordIdsToRemove.push(transition)\n\t\t\t\tpack(keys)\n\t\t\t}\n\t\t}\n\t\tconst insertNewRecord = (transition, keys, insertionOffset, newTransitions) => {\n\t\t\tlet mainTarget = target\n\t\t\tlet mainPosition = position\n\t\t\tlet mainSafeEnd = safeEnd\n\t\t\tlet mainStart = start\n\t\t\ttarget = keysTarget\n\t\t\tposition = 0\n\t\t\tstart = 0\n\t\t\tif (!target)\n\t\t\t\tkeysTarget = target = new ByteArrayAllocate(8192)\n\t\t\tsafeEnd = target.length - 10\n\t\t\tnewRecord(transition, keys, newTransitions)\n\t\t\tkeysTarget = target\n\t\t\tlet keysPosition = position\n\t\t\ttarget = mainTarget\n\t\t\tposition = mainPosition\n\t\t\tsafeEnd = mainSafeEnd\n\t\t\tstart = mainStart\n\t\t\tif (keysPosition > 1) {\n\t\t\t\tlet newEnd = position + keysPosition - 1\n\t\t\t\tif (newEnd > safeEnd)\n\t\t\t\t\tmakeRoom(newEnd)\n\t\t\t\tlet insertionPosition = insertionOffset + start\n\t\t\t\ttarget.copyWithin(insertionPosition + keysPosition, insertionPosition + 1, position)\n\t\t\t\ttarget.set(keysTarget.slice(0, keysPosition), insertionPosition)\n\t\t\t\tposition = newEnd\n\t\t\t} else {\n\t\t\t\ttarget[insertionOffset + start] = keysTarget[0]\n\t\t\t}\n\t\t}\n\t\tconst writeStruct = (object, safePrototype) => {\n\t\t\tlet newPosition = writeStructSlots(object, target, position, structures, makeRoom, (value, newPosition, notifySharedUpdate) => {\n\t\t\t\tif (notifySharedUpdate)\n\t\t\t\t\thasSharedUpdate = true;\n\t\t\t\tposition = newPosition;\n\t\t\t\tif (start > 0) {\n\t\t\t\t\tpack(value);\n\t\t\t\t\tif (start == 0)\n\t\t\t\t\t\treturn { position, targetView, target }; // indicate the buffer was re-allocated\n\t\t\t\t} else\n\t\t\t\t\tpack(value);\n\t\t\t\treturn position;\n\t\t\t}, this);\n\t\t\tif (newPosition === 0) // bail and go to a msgpack object\n\t\t\t\treturn writeObject(object, true);\n\t\t\tposition = newPosition;\n\t\t}\n\t}\n\tuseBuffer(buffer) {\n\t\t// this means we are finished using our own buffer and we can write over it safely\n\t\ttarget = buffer\n\t\ttargetView = new DataView(target.buffer, target.byteOffset, target.byteLength)\n\t\tposition = 0\n\t}\n\tclearSharedData() {\n\t\tif (this.structures)\n\t\t\tthis.structures = []\n\t\tif (this.typedStructs)\n\t\t\tthis.typedStructs = []\n\t}\n}\n\nfunction copyBinary(source, target, targetOffset, offset, endOffset) {\n\twhile (offset < endOffset) {\n\t\ttarget[targetOffset++] = source[offset++]\n\t}\n}\n\nextensionClasses = [ Date, Set, Error, RegExp, ArrayBuffer, Object.getPrototypeOf(Uint8Array.prototype).constructor /*TypedArray*/, C1Type ]\nextensions = [{\n\tpack(date, allocateForWrite, pack) {\n\t\tlet seconds = date.getTime() / 1000\n\t\tif ((this.useTimestamp32 || date.getMilliseconds() === 0) && seconds >= 0 && seconds < 0x100000000) {\n\t\t\t// Timestamp 32\n\t\t\tlet { target, targetView, position} = allocateForWrite(6)\n\t\t\ttarget[position++] = 0xd6\n\t\t\ttarget[position++] = 0xff\n\t\t\ttargetView.setUint32(position, seconds)\n\t\t} else if (seconds > 0 && seconds < 0x100000000) {\n\t\t\t// Timestamp 64\n\t\t\tlet { target, targetView, position} = allocateForWrite(10)\n\t\t\ttarget[position++] = 0xd7\n\t\t\ttarget[position++] = 0xff\n\t\t\ttargetView.setUint32(position, date.getMilliseconds() * 4000000 + ((seconds / 1000 / 0x100000000) >> 0))\n\t\t\ttargetView.setUint32(position + 4, seconds)\n\t\t} else if (isNaN(seconds)) {\n\t\t\tif (this.onInvalidDate) {\n\t\t\t\tallocateForWrite(0)\n\t\t\t\treturn pack(this.onInvalidDate())\n\t\t\t}\n\t\t\t// Intentionally invalid timestamp\n\t\t\tlet { target, targetView, position} = allocateForWrite(3)\n\t\t\ttarget[position++] = 0xd4\n\t\t\ttarget[position++] = 0xff\n\t\t\ttarget[position++] = 0xff\n\t\t} else {\n\t\t\t// Timestamp 96\n\t\t\tlet { target, targetView, position} = allocateForWrite(15)\n\t\t\ttarget[position++] = 0xc7\n\t\t\ttarget[position++] = 12\n\t\t\ttarget[position++] = 0xff\n\t\t\ttargetView.setUint32(position, date.getMilliseconds() * 1000000)\n\t\t\ttargetView.setBigInt64(position + 4, BigInt(Math.floor(seconds)))\n\t\t}\n\t}\n}, {\n\tpack(set, allocateForWrite, pack) {\n\t\tlet array = Array.from(set)\n\t\tlet { target, position} = allocateForWrite(this.moreTypes ? 3 : 0)\n\t\tif (this.moreTypes) {\n\t\t\ttarget[position++] = 0xd4\n\t\t\ttarget[position++] = 0x73 // 's' for Set\n\t\t\ttarget[position++] = 0\n\t\t}\n\t\tpack(array)\n\t}\n}, {\n\tpack(error, allocateForWrite, pack) {\n\t\tlet { target, position} = allocateForWrite(this.moreTypes ? 3 : 0)\n\t\tif (this.moreTypes) {\n\t\t\ttarget[position++] = 0xd4\n\t\t\ttarget[position++] = 0x65 // 'e' for error\n\t\t\ttarget[position++] = 0\n\t\t}\n\t\tpack([ error.name, error.message ])\n\t}\n}, {\n\tpack(regex, allocateForWrite, pack) {\n\t\tlet { target, position} = allocateForWrite(this.moreTypes ? 3 : 0)\n\t\tif (this.moreTypes) {\n\t\t\ttarget[position++] = 0xd4\n\t\t\ttarget[position++] = 0x78 // 'x' for regeXp\n\t\t\ttarget[position++] = 0\n\t\t}\n\t\tpack([ regex.source, regex.flags ])\n\t}\n}, {\n\tpack(arrayBuffer, allocateForWrite) {\n\t\tif (this.moreTypes)\n\t\t\twriteExtBuffer(arrayBuffer, 0x10, allocateForWrite)\n\t\telse\n\t\t\twriteBuffer(hasNodeBuffer ? Buffer.from(arrayBuffer) : new Uint8Array(arrayBuffer), allocateForWrite)\n\t}\n}, {\n\tpack(typedArray, allocateForWrite) {\n\t\tlet constructor = typedArray.constructor\n\t\tif (constructor !== ByteArray && this.moreTypes)\n\t\t\twriteExtBuffer(typedArray, typedArrays.indexOf(constructor.name), allocateForWrite)\n\t\telse\n\t\t\twriteBuffer(typedArray, allocateForWrite)\n\t}\n}, {\n\tpack(c1, allocateForWrite) { // specific 0xC1 object\n\t\tlet { target, position} = allocateForWrite(1)\n\t\ttarget[position] = 0xc1\n\t}\n}]\n\nfunction writeExtBuffer(typedArray, type, allocateForWrite, encode) {\n\tlet length = typedArray.byteLength\n\tif (length + 1 < 0x100) {\n\t\tvar { target, position } = allocateForWrite(4 + length)\n\t\ttarget[position++] = 0xc7\n\t\ttarget[position++] = length + 1\n\t} else if (length + 1 < 0x10000) {\n\t\tvar { target, position } = allocateForWrite(5 + length)\n\t\ttarget[position++] = 0xc8\n\t\ttarget[position++] = (length + 1) >> 8\n\t\ttarget[position++] = (length + 1) & 0xff\n\t} else {\n\t\tvar { target, position, targetView } = allocateForWrite(7 + length)\n\t\ttarget[position++] = 0xc9\n\t\ttargetView.setUint32(position, length + 1) // plus one for the type byte\n\t\tposition += 4\n\t}\n\ttarget[position++] = 0x74 // \"t\" for typed array\n\ttarget[position++] = type\n\ttarget.set(new Uint8Array(typedArray.buffer, typedArray.byteOffset, typedArray.byteLength), position)\n}\nfunction writeBuffer(buffer, allocateForWrite) {\n\tlet length = buffer.byteLength\n\tvar target, position\n\tif (length < 0x100) {\n\t\tvar { target, position } = allocateForWrite(length + 2)\n\t\ttarget[position++] = 0xc4\n\t\ttarget[position++] = length\n\t} else if (length < 0x10000) {\n\t\tvar { target, position } = allocateForWrite(length + 3)\n\t\ttarget[position++] = 0xc5\n\t\ttarget[position++] = length >> 8\n\t\ttarget[position++] = length & 0xff\n\t} else {\n\t\tvar { target, position, targetView } = allocateForWrite(length + 5)\n\t\ttarget[position++] = 0xc6\n\t\ttargetView.setUint32(position, length)\n\t\tposition += 4\n\t}\n\ttarget.set(buffer, position)\n}\n\nfunction writeExtensionData(result, target, position, type) {\n\tlet length = result.length\n\tswitch (length) {\n\t\tcase 1:\n\t\t\ttarget[position++] = 0xd4\n\t\t\tbreak\n\t\tcase 2:\n\t\t\ttarget[position++] = 0xd5\n\t\t\tbreak\n\t\tcase 4:\n\t\t\ttarget[position++] = 0xd6\n\t\t\tbreak\n\t\tcase 8:\n\t\t\ttarget[position++] = 0xd7\n\t\t\tbreak\n\t\tcase 16:\n\t\t\ttarget[position++] = 0xd8\n\t\t\tbreak\n\t\tdefault:\n\t\t\tif (length < 0x100) {\n\t\t\t\ttarget[position++] = 0xc7\n\t\t\t\ttarget[position++] = length\n\t\t\t} else if (length < 0x10000) {\n\t\t\t\ttarget[position++] = 0xc8\n\t\t\t\ttarget[position++] = length >> 8\n\t\t\t\ttarget[position++] = length & 0xff\n\t\t\t} else {\n\t\t\t\ttarget[position++] = 0xc9\n\t\t\t\ttarget[position++] = length >> 24\n\t\t\t\ttarget[position++] = (length >> 16) & 0xff\n\t\t\t\ttarget[position++] = (length >> 8) & 0xff\n\t\t\t\ttarget[position++] = length & 0xff\n\t\t\t}\n\t}\n\ttarget[position++] = type\n\ttarget.set(result, position)\n\tposition += length\n\treturn position\n}\n\nfunction insertIds(serialized, idsToInsert) {\n\t// insert the ids that need to be referenced for structured clones\n\tlet nextId\n\tlet distanceToMove = idsToInsert.length * 6\n\tlet lastEnd = serialized.length - distanceToMove\n\tidsToInsert.sort((a, b) => a.offset > b.offset ? 1 : -1)\n\twhile (nextId = idsToInsert.pop()) {\n\t\tlet offset = nextId.offset\n\t\tlet id = nextId.id\n\t\tserialized.copyWithin(offset + distanceToMove, offset, lastEnd)\n\t\tdistanceToMove -= 6\n\t\tlet position = offset + distanceToMove\n\t\tserialized[position++] = 0xd6\n\t\tserialized[position++] = 0x69 // 'i'\n\t\tserialized[position++] = id >> 24\n\t\tserialized[position++] = (id >> 16) & 0xff\n\t\tserialized[position++] = (id >> 8) & 0xff\n\t\tserialized[position++] = id & 0xff\n\t\tlastEnd = offset\n\t}\n\treturn serialized\n}\n\nfunction writeBundles(start, pack) {\n\tif (bundledStrings.length > 0) {\n\t\ttargetView.setUint32(bundledStrings.position + start, position - bundledStrings.position - start)\n\t\tlet writeStrings = bundledStrings\n\t\tbundledStrings = null\n\t\tlet startPosition = position\n\t\tpack(writeStrings[0])\n\t\tpack(writeStrings[1])\n\t}\n}\n\nexport function addExtension(extension) {\n\tif (extension.Class) {\n\t\tif (!extension.pack && !extension.write)\n\t\t\tthrow new Error('Extension has no pack or write function')\n\t\tif (extension.pack && !extension.type)\n\t\t\tthrow new Error('Extension has no type (numeric code to identify the extension)')\n\t\textensionClasses.unshift(extension.Class)\n\t\textensions.unshift(extension)\n\t}\n\tunpackAddExtension(extension)\n}\nexport function setWriteStructSlots(writeSlots, makeStructures) {\n\twriteStructSlots = writeSlots;\n\tprepareStructures = makeStructures;\n}\n\nlet defaultPackr = new Packr({ useRecords: false })\nexport const pack = defaultPackr.pack\nexport const encode = defaultPackr.pack\nexport const Encoder = Packr\nexport { FLOAT32_OPTIONS } from './unpack.js'\nimport { FLOAT32_OPTIONS } from './unpack.js'\nexport const { NEVER, ALWAYS, DECIMAL_ROUND, DECIMAL_FIT } = FLOAT32_OPTIONS\nexport const REUSE_BUFFER_MODE = 512\nexport const RESET_BUFFER_MODE = 1024\n","import { Packr } from './pack.js'\nimport { Unpackr } from './unpack.js'\n\n/**\n * Given an Iterable first argument, returns an Iterable where each value is packed as a Buffer\n * If the argument is only Async Iterable, the return value will be an Async Iterable.\n * @param {Iterable|Iterator|AsyncIterable|AsyncIterator} objectIterator - iterable source, like a Readable object stream, an array, Set, or custom object\n * @param {options} [options] - msgpackr pack options\n * @returns {IterableIterator|Promise.<AsyncIterableIterator>}\n */\nexport function packIter (objectIterator, options = {}) {\n  if (!objectIterator || typeof objectIterator !== 'object') {\n    throw new Error('first argument must be an Iterable, Async Iterable, or a Promise for an Async Iterable')\n  } else if (typeof objectIterator[Symbol.iterator] === 'function') {\n    return packIterSync(objectIterator, options)\n  } else if (typeof objectIterator.then === 'function' || typeof objectIterator[Symbol.asyncIterator] === 'function') {\n    return packIterAsync(objectIterator, options)\n  } else {\n    throw new Error('first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a Promise')\n  }\n}\n\nfunction * packIterSync (objectIterator, options) {\n  const packr = new Packr(options)\n  for (const value of objectIterator) {\n    yield packr.pack(value)\n  }\n}\n\nasync function * packIterAsync (objectIterator, options) {\n  const packr = new Packr(options)\n  for await (const value of objectIterator) {\n    yield packr.pack(value)\n  }\n}\n\n/**\n * Given an Iterable/Iterator input which yields buffers, returns an IterableIterator which yields sync decoded objects\n * Or, given an Async Iterable/Iterator which yields promises resolving in buffers, returns an AsyncIterableIterator.\n * @param {Iterable|Iterator|AsyncIterable|AsyncIterableIterator} bufferIterator\n * @param {object} [options] - unpackr options\n * @returns {IterableIterator|Promise.<AsyncIterableIterator}\n */\nexport function unpackIter (bufferIterator, options = {}) {\n  if (!bufferIterator || typeof bufferIterator !== 'object') {\n    throw new Error('first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a promise')\n  }\n\n  const unpackr = new Unpackr(options)\n  let incomplete\n  const parser = (chunk) => {\n    let yields\n    // if there's incomplete data from previous chunk, concatinate and try again\n    if (incomplete) {\n      chunk = Buffer.concat([incomplete, chunk])\n      incomplete = undefined\n    }\n\n    try {\n      yields = unpackr.unpackMultiple(chunk)\n    } catch (err) {\n      if (err.incomplete) {\n        incomplete = chunk.slice(err.lastPosition)\n        yields = err.values\n      } else {\n        throw err\n      }\n    }\n    return yields\n  }\n\n  if (typeof bufferIterator[Symbol.iterator] === 'function') {\n    return (function * iter () {\n      for (const value of bufferIterator) {\n        yield * parser(value)\n      }\n    })()\n  } else if (typeof bufferIterator[Symbol.asyncIterator] === 'function') {\n    return (async function * iter () {\n      for await (const value of bufferIterator) {\n        yield * parser(value)\n      }\n    })()\n  }\n}\nexport const decodeIter = unpackIter\nexport const encodeIter = packIter","export { Packr, Encoder, addExtension, pack, encode, NEVER, ALWAYS, DECIMAL_ROUND, DECIMAL_FIT, REUSE_BUFFER_MODE } from './pack.js'\nexport { Unpackr, Decoder, C1, unpack, unpackMultiple, decode, FLOAT32_OPTIONS, clearSource, roundFloat32, isNativeAccelerationEnabled } from './unpack.js'\nexport { decodeIter, encodeIter } from './iterators.js'\nexport const useRecords = false\nexport const mapsAsObjects = true\n","const PicoRepo = require('picorepo')\nconst Feed = require('picofeed')\nconst { Packr, pack, unpack } = require('msgpackr')\nconst STRUCTS = 'msgpackr::structs'\nclass PicoStore {\n  constructor (db, mergeStrategy) {\n    this.repo = PicoRepo.isRepo(db) ? db : new PicoRepo(db)\n    this.cache = new SparseBlockCache(this.repo._db)\n    this._strategy = mergeStrategy || (() => {})\n    this._stores = []\n    this._loaded = false\n    this._mutex = Promise.resolve(0)\n    this._tap = null // global sigint trap\n    this._packr = null\n    this.mutexTimeout = 5000\n  }\n\n  async _waitLock () {\n    const current = this._mutex\n    let release, fail\n    const next = new Promise((resolve, reject) => { release = resolve; fail = reject })\n    this._mutex = next\n    let timeoutError = null\n    try { throw new Error('MutexTimeout') } catch (err) { timeoutError = err }\n    const timerId = setTimeout(() => {\n      console.error('MutexTimeout', timeoutError.stack)\n      fail(timeoutError)\n    }, this.mutexTimeout)\n    await current\n    return () => {\n      clearTimeout(timerId)\n      release()\n    }\n  }\n\n  register (name, initialValue, validator, reducer, trap) {\n    if (this._loaded) throw new Error('register() must be invoked before load()')\n    if (typeof name !== 'string') {\n      return this.register(name.name, name.initialValue, name.filter, name.reducer, name.trap)\n    } else if (typeof initialValue === 'function') {\n      return this.register(name, undefined, initialValue, validator)\n    }\n\n    this._stores.push({\n      name,\n      validator,\n      reducer,\n      trap,\n      version: 0,\n      head: undefined,\n      value: initialValue,\n      initialValue,\n      observers: new Set()\n    })\n  }\n\n  async load () {\n    const unlock = await this._waitLock()\n    if (this._loaded) throw new Error('Store already loaded')\n\n    let structures = await this.repo.readReg(STRUCTS)\n    if (structures) structures = unpack(structures)\n    else structures = []\n\n    this._packr = new Packr({\n      structures,\n      saveStructures: () => this.repo.writeReg(STRUCTS, pack(structures))\n        // .then(console.info.bind(null, 'msgpackr:structs saved'))\n        .catch(console.error.bind(null, 'Failed saving msgpackr:structs'))\n    })\n\n    for (const store of this._stores) {\n      const head = await this.repo.readReg(`HEADS/${store.name}`)\n      if (!head) continue // Empty\n      store.head = head\n      store.version = this._decodeValue(await this.repo.readReg(`VER/${store.name}`))\n      store.value = this._decodeValue(await this.repo.readReg(`STATES/${store.name}`))\n      for (const listener of store.observers) listener(store.value)\n    }\n    this._loaded = true\n    unlock()\n  }\n\n  /**\n   * Mutates the state, if a reload is in progress the dispatch will wait\n   * for it to complete.\n   */\n  async dispatch (patch, loud) {\n    const unlock = await this._waitLock()\n    try { // Ensure mutex release on error\n      const res = await this._dispatch(patch, loud)\n      unlock()\n      return res\n    } catch (err) {\n      unlock()\n      throw err\n    }\n  }\n\n  async _dispatch (patch, loud = false) {\n    if (!this._loaded) throw Error('Store not ready, call load()')\n    patch = Feed.from(patch)\n\n    let local = null // Target branch to merge to\n    try {\n      const sig = patch.first.isGenesis\n        ? patch.first.sig\n        : patch.first.parentSig\n      local = await this.repo.resolveFeed(sig)\n    } catch (err) {\n      if (err.message !== 'Unknown feed') throw err\n      if (patch.first.isGenesis) local = new Feed() // Happy birthday!\n      else {\n        await this.cache.push(patch) // Stash for later\n        // throw new Error('UnknownTargetBranch')\n        return []\n      }\n    }\n\n    // Local reference point exists,\n    // attempt to extend patch from blocks in cache\n    for (const block of patch.blocks()) {\n      const [bwd, fwd] = await this.cache.pop(block.parentSig, block.sig)\n      if (bwd) assert(!patch.merge(bwd), 'Backward merge failed')\n      if (fwd) assert(!patch.merge(fwd), 'Forwrad merge failed')\n    }\n\n    // canMerge?\n    if (!local.clone().merge(patch)) {\n      if (loud) throw new Error('UnmergablePatch')\n      else return []\n    }\n\n    // Extract tags (used by application to keep track of objects)\n    const tags = {}\n    if (local.first?.isGenesis) {\n      tags.HEAD = local.first.key\n      tags.CHAIN = local.first.sig\n    } else if (!local.length && patch.first.isGenesis) {\n      tags.HEAD = patch.first.key\n      tags.CHAIN = patch.first.sig\n    }\n\n    const diff = !local.length ? patch.length : local._compare(patch) // WARNING untested internal api.\n    if (diff < 1) return [] // Patch contains equal or less blocks than local\n\n    const modified = new Set()\n    const root = this.state\n\n    let parentBlock = null\n    const _first = patch.get(-diff)\n    if (!_first.isGenesis && !local.length) {\n      if (loud) throw new Error('NoCommonParent')\n      return []\n    } else if (!_first.isGenesis && local.length) {\n      const it = local.blocks()\n      let res = it.next()\n      while (!parentBlock && !res.done) { // TODO: avoid loop using local.get(something)\n        if (res.value.sig.equals(_first.parentSig)) parentBlock = res.value\n        res = it.next()\n      }\n      if (!parentBlock) {\n        throw new Error('ParentNotFound') // real logical error\n      }\n    }\n    let nMerged = 0\n    for (const block of patch.blocks(-diff)) {\n      const accepted = []\n      for (const store of this._stores) {\n        if (typeof store.validator !== 'function') continue\n        let validationError = store.validator({\n          block,\n          parentBlock,\n          state: store.value,\n          root,\n          ...tags\n        })\n\n        if (!validationError) accepted.push(store) // no error, proceed.\n        else if (validationError === true) {\n          // NO-OP\n          // Returning 'true' from a validator explicitly means silent ignore.\n        } else if (loud) { // throw validation errors\n          if (typeof validationError === 'string') validationError = new Error(`InvalidBlock: ${validationError}`)\n          throw validationError\n        }\n      }\n      if (!accepted.length) break // reject rest of chain if block not accepted\n      const mod = await this._mutateState(block, parentBlock, tags, false, loud)\n\n      for (const s of mod) modified.add(s)\n      parentBlock = block\n      nMerged++\n    }\n    this._notifyObservers(modified)\n\n    // TODO: Clean this up, patch needs\n    // to be exported to RPC for transmission\n    const m = Array.from(modified)\n    Object.defineProperty(m, 'patch', {\n      enumerable: false,\n      get () { return patch.slice(-diff, -diff + nMerged) }\n    })\n\n    return m\n  }\n\n  async _mutateState (block, parentBlock, tags, dryMerge = false, loud = false) {\n    const modified = []\n\n    // Generate list of stores that want to reduce this block\n    const stores = []\n    for (const store of this._stores) {\n      if (typeof store.validator !== 'function') continue\n      if (typeof store.reducer !== 'function') continue\n      const root = this.state\n      const rejected = store.validator({ block, parentBlock, state: store.value, root, ...tags })\n      if (rejected) continue\n      stores.push(store)\n    }\n\n    // Attempt repo.merge if at least one store accepts block\n    if (stores.length) {\n      const merged = await this.repo.merge(block, this._strategy)\n      if (!dryMerge && !merged) {\n        if (loud) console.warn('RejectedByBucket: MergeStrategy failed')\n        return modified // Rejected by bucket\n      }\n    }\n\n    // Interrupts are buffered until after the mutations have run\n    const interrupts = []\n    const signal = (i, p) => interrupts.push([i, p])\n\n    // Run all state reducers\n    for (const store of stores) {\n      // If repo accepted the change, apply it\n      const root = this.state\n      const val = store.reducer({ block, parentBlock, state: store.value, root, signal, ...tags })\n      if (typeof val === 'undefined') console.warn('Reducer returned `undefined` state.')\n      await this._commitHead(store, block.sig, val)\n      modified.push(store.name)\n    }\n\n    // Run all traps in signal order\n    // NOTE: want to avoid reusing term 'signal' as it's a function\n    // TODO: rewrite to while(interrupts.length) to let traps re-signal\n    // TODO: max-interrupts counter of 255 to throw and avoid overuse\n    for (const [code, payload] of interrupts) {\n      for (const store of this._stores) {\n        if (typeof store.trap !== 'function') continue\n        const root = this.state\n        const val = store.trap({ code, payload, block, parentBlock, state: store.value, root, ...tags })\n        if (typeof val === 'undefined') continue // undefined equals no change\n        await this._commitHead(store, block.sig, val)\n        modified.push(store.name)\n      }\n    }\n    if (typeof this._tap === 'function') {\n      for (const [code, payload] of interrupts) this._tap(code, payload)\n    }\n    return modified\n  }\n\n  _notifyObservers (modified) {\n    for (const name of modified) {\n      const store = this._stores.find(s => s.name === name)\n      for (const listener of store.observers) listener(store.value)\n    }\n  }\n\n  async _commitHead (store, head, val) {\n    await this.repo.writeReg(`STATES/${store.name}`, this._encodeValue(val))\n    await this.repo.writeReg(`HEADS/${store.name}`, head)\n    await this.repo.writeReg(`VER/${store.name}`, this._encodeValue(store.version++))\n\n    // who needs a seatbelt anyway? let's save some memory.\n    store.value = val // Object.freeze(val)\n    store.head = head\n  }\n\n  get state () {\n    return this._stores.reduce((state, store) => {\n      state[store.name] = store.value\n      return state\n    }, {})\n  }\n\n  /**\n   * Restores all registers to initial values and re-applies all mutations from database.\n   */\n  async reload () {\n    const unlock = await this._waitLock()\n    try {\n      const modified = []\n      const feeds = await this.repo.listFeeds()\n\n      for (const store of this._stores) {\n        store.value = store.initialValue\n        store.version = 0\n        store.head = undefined\n        for (const listener of store.observers) listener(store.value)\n      }\n\n      for (const { key: ptr, value: CHAIN } of feeds) {\n        const part = await this.repo.loadFeed(ptr)\n        const tags = {\n          HEAD: part.first.key,\n          CHAIN\n        }\n        let parentBlock = null\n        for (const block of part.blocks()) {\n          const mods = await this._mutateState(block, parentBlock, tags, true)\n          // TODO: bug, reload does not persist state?\n          for (const s of mods) {\n            if (!~modified.indexOf(s)) modified.push(s)\n          }\n          parentBlock = block\n        }\n      }\n      unlock()\n      this._notifyObservers(modified)\n      return modified\n    } catch (err) {\n      unlock()\n      throw err\n    }\n  }\n\n  on (name, observer) {\n    const store = this._stores.find(s => s.name === name)\n    if (!store) throw new Error(`No such store: \"${name}\"`)\n    if (typeof observer !== 'function') throw new Error('observer must be a function')\n    store.observers.add(observer)\n    observer(store.value)\n    // unsub\n    return () => store.observers.delete(observer)\n  }\n\n  /**\n   * Hotswaps data-storage immediately reloading store from given bucket\n   * and destroying previous database deleting all values in the background\n   * to free up memory in storage.\n   * returns an array containing two promises:\n   *   Reload op: Store ready for use again when resolves.\n   *   Destroy op: Old database was succesfully cleared when resolved.\n   */\n  hotswap (db) {\n    const prev = this.repo\n    // Swap database and begin reload\n    this.repo = db instanceof PicoRepo ? db : new PicoRepo(db)\n    const reloaded = this.reload()\n    // TODO: move this to PicoRepo#destroy() => Promise\n    const destroyed = prev._db.clear()\n    return [reloaded, destroyed]\n  }\n\n  _decodeValue (buf) {\n    if (!buf) return buf\n    return this._packr.unpack(buf)\n  }\n\n  _encodeValue (obj) {\n    return this._packr.pack(obj)\n  }\n}\n\nmodule.exports = PicoStore\n\n// TODO:\n// - extract into separate package (sibling to repo)\n// - choose eviction algo (avoid ddos)\nclass SparseBlockCache {\n  constructor (db) {\n    this.blocks = db.sublevel('b', {\n      keyEncoding: 'buffer',\n      valueEncoding: 'buffer'\n    })\n    this.refs = db.sublevel('r', {\n      keyEncoding: 'buffer',\n      valueEncoding: 'buffer'\n    })\n  }\n\n  async push (feed) {\n    if (feed.first.isGenesis) throw new Error('GenesisRefused')\n    for (const block of feed.blocks()) {\n      // Store forward ref\n      await this.refs.put(block.parentSig, block.sig)\n      await this._writeBlock(block)\n    }\n  }\n\n  async pop (backward, forward) {\n    const delRefs = []\n    const delBlocks = []\n    const segments = []\n    let next = backward\n    let blocks = []\n    // Load backwards\n    while (1) {\n      const block = await this._readBlock(next)\n      if (!block) break\n      delRefs.push(block.parentSig)\n      delBlocks.push(block.parentSig)\n      blocks.push(block)\n      next = block.parentSig\n    }\n    if (blocks.length) segments.push(Feed.fromBlockArray(blocks))\n\n    // Load forward\n    next = forward\n    blocks = []\n    while (1) {\n      const ptr = await this.refs.get(next).catch(ignore404)\n      if (!ptr) break\n      const block = await this._readBlock(ptr)\n      delRefs.push(ptr)\n      delBlocks.push(block.sig)\n      blocks.push(block)\n      next = block.sig\n    }\n    if (blocks.length) segments.push(Feed.fromBlockArray(blocks))\n\n    await Promise.all([\n      this.blocks.batch(delBlocks.map(key => ({ type: 'del', key }))),\n      this.refs.batch(delRefs.map(key => ({ type: 'del', key })))\n    ])\n    return segments\n  }\n\n  async _writeBlock (block) {\n    const key = block.sig\n    const buffer = Buffer.alloc(32 + block.buffer.length)\n    block.key.copy(buffer, 0)\n    block.buffer.copy(buffer, 32)\n    await this.blocks.put(key, buffer)\n  }\n\n  async _readBlock (id) {\n    const buffer = await this.blocks.get(id).catch(ignore404)\n    if (buffer) return Feed.mapBlock(buffer, 32, buffer.slice(0, 32))\n  }\n\n  async _hasBlock (id) {\n    return !!(await this.readBlock(id))\n  }\n}\n\nfunction ignore404 (err) { if (!err.notFound) throw err }\nfunction assert (c, m) { if (c) throw new Error(m || 'AssertionError') }\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.slice(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","// SPDX-License-Identifier: AGPL-3.0-or-later\nconst D = require('debug')('pico-net')\nconst PLUG_SYMBOL = Symbol.for('pico:plug')\nconst REPLY_EXPECTED = 1\n// const END_OF_STREAM = 1  // plug.close()\n// const ERROR = 1 << 1 // plug.close(new Error('RemoteError'))\n// const BANNED = 1 << 2 // plug.close(new Error('BannedByRemote'))\n\nfunction picoWire (opts = {}) {\n  const MESSAGE_TIMEOUT = opts?.timeout || 30 * 1000\n  let id = opts?.id // named pipes?\n  let closed = false\n  let [aOpened, bOpened] = [false, false]\n  const a = mkPlug(true)\n  const b = mkPlug(false)\n  const [castA, setCastA, abortCastA] = unpromise()\n  const [castB, setCastB, abortCastB] = unpromise()\n  const broadcastsExported = [false, false]\n\n  const [$closed, setClosed] = unpromise()\n  const pending = new Set()\n  return [a, b]\n  function mkPlug (isA) {\n    const plug = {\n      // get name () { return `${id || '|'}_${isA ? 'a' : 'b'}` },\n      get name () { return `${id || '|'} ${isA ? '-->' : '<--'} ` },\n      get id () { return id },\n      set id (v) {\n        if (id) throw new Error('ID has already been set')\n        id = v\n      },\n      get onmessage () {\n        broadcastsExported[isA ? 0 : 1] = true\n        return isA ? castA : castB\n      },\n      get opened () {\n        if (closed) return Promise.reject(new Error('Disconnected'))\n        broadcastsExported[isA ? 1 : 0] = true\n        return (isA ? castB : castA).then(cast => !!cast)\n      },\n      get closed () {\n        return $closed\n      },\n      set onmessage (fn) { // broadcast handler\n        if (typeof fn !== 'function') throw new Error('expected onmessage to be a function')\n        if (isA ? aOpened : bOpened) throw new Error('Handler has already been set')\n        if (isA) {\n          setCastA(fn)\n          aOpened = true\n        } else {\n          setCastB(fn)\n          bOpened = true\n        }\n      },\n\n      async postMessage (msg, flags) {\n        if (closed) throw new Error('Disconnected')\n        if (!plug.isActive) throw new Error('Void')\n        broadcastsExported[isA ? 1 : 0] = true\n        const sink = await (isA ? castB : castA)\n        const resolve = scope => sink(scope)\n        return Recurser(isA, resolve, msg, flags)\n      },\n      get isActive () { return (isA ? bOpened : aOpened) && !closed },\n      get isClosed () { return closed },\n\n      open (handler) {\n        if (isPlug(handler)) return spliceWires(plug, handler)\n        plug.onmessage = handler\n        return plug.opened\n          .then(() => [plug.postMessage, plug])\n      },\n      close (err = null) { tearDown(isA, err) },\n      get other () { return isA ? b : a }\n    }\n    plug[PLUG_SYMBOL] = true // used by open/splice\n    return plug\n  }\n\n  /**\n   * Generates two lock-stepped promise chains until\n   * a reply is invoked without the expectResponse flags set\n   */\n  async function Recurser (isA, sink, msg, flags) {\n    if (closed) throw new Error('Disconnected') // console.warn('Message dropped, connection closed', msg)\n    if (typeof flags === 'function') throw new Error('Callback API has been deprecated')\n    const replyExpected = flags & REPLY_EXPECTED || flags\n    const tag = module.exports.V && `${(isA ? a : b).name} = ${msg.toString(Buffer.isBuffer(msg) && 'hex').slice(0, 14)}`\n    const [$scope, setScope, abortScope] = unpromiseTimeout(MESSAGE_TIMEOUT, tag)\n    setScope.abort = abortScope // tiny hack\n    if (replyExpected) pending.add(setScope)\n    pending.delete(sink)\n    const reply = !replyExpected ? null : Recurser.bind(null, !isA, setScope)\n    try { // Second async context that runs past this methods lifetime\n      sink([msg, reply, !isA ? a : b]) // transmit to other\n      if (!replyExpected) setScope([]) // Consider message delivered\n    } catch (err) { abortScope(err); console.warn('Trap A: ', err.message) }\n    return $scope // installTrap($scope, err => { console.warn('Trap B: ', err.message) })\n      .catch(err => { console.warn('Trap B: ', err.message); throw err })\n  }\n\n  /*\n  // Now some black magic\n  function installTrap (p, h, depth = 0) {\n    if (!p || typeof p.then !== 'function') return p\n    const t = p.then.bind(p)\n    p.then = (a) => {\n      console.info(depth, 'Installing trap after', a.toString())\n      const next = t(s => { console.log(depth, 'then Hijacked', s[0]); return a(s) })\n        .catch(err => { console.log(depth, 'catch Hijacked', err); h(err); throw err })\n      installTrap(next, h, ++depth)\n      return next\n    }\n    return p\n  }\n  */\n\n  function tearDown (isA, error = null) {\n    if (closed) return true\n    D('PipeClosed by: %s cause: %s pending: %d', isA ? 'A' : 'B', error?.message, pending.size)\n    closed = true // block further interaction\n    for (const set of Array.from(pending)) {\n      pending.delete(set)\n      set.abort(error || new Error('Disconnected'))\n    }\n    setClosed(error)\n    if (broadcastsExported[0]) abortCastA(error || new Error('Disconnected'))\n    if (broadcastsExported[1]) abortCastB(error || new Error('Disconnected'))\n    return $closed\n  }\n}\n\nfunction isPlug (o) { return !!(o && o[PLUG_SYMBOL]) }\n\nfunction spliceWires (a, b) {\n  if (!isPlug(a) || !isPlug(b)) throw new Error('Expected two pipe-ends')\n  // console.log(`Splicing ${plug.id} <--> ${other.id}`)\n  function stitch (sink, scope) {\n    if (!Array.isArray(scope)) throw new Error('DesignFlaw')\n    const [msg, reply] = scope\n    let next = sink(msg, !!reply)\n    if (reply) next = next.then(stitch.bind(null, reply))\n    return next\n      .catch(err => {\n        console.warn('Trap S: ', err.message)\n        // throw err // there's nothing to catch this error\n      })\n  }\n  a.onmessage = scope => stitch(b.postMessage, scope)\n  b.onmessage = scope => stitch(a.postMessage, scope)\n  a.closed.then(b.close).catch(b.close)\n  b.closed.then(a.close).catch(a.close)\n  return a.close\n}\n\nfunction _picoWire (onmessage, onopen, onclose) {\n  const [a, b] = picoWire()\n  a.closed\n    .then(onclose)\n    .catch(onclose)\n  a.opened\n    .then(onopen)\n    .catch(onopen)\n  a.onmessage = onmessage\n  return b\n}\n\nfunction unpromiseTimeout (t, debug = false) {\n  const [promise, set, abort] = unpromise(debug)\n  const id = setTimeout(abort.bind(null, new Error('Timeout')), t)\n  return [\n    promise,\n    (err, value) => {\n      clearTimeout(id)\n      set(err, value)\n    },\n    function _abort (err) {\n      clearTimeout(id)\n      abort(err || new Error('Aborted'))\n    }\n  ]\n}\n\n// Stay healthy, stay sane\nlet _unpctr = 0\nconst _active = []\nfunction unpromiseD (tag = '_') {\n  const id = _unpctr++\n  let stack = null\n  try { throw new Error() } catch (e) { stack = e.stack }\n  console.debug('[UNP]', id, tag, 'Promise Created\\n', module.exports.V > 1 && stack)\n\n  const [$p, set, abort] = unpromise()\n  _active[id] = abort\n  return [\n    $p.then(v => ((notify('resolved', v), v)))\n      .catch(e => { notify('rejected', undefined, e); throw e }),\n    v => { notify('set', v); set(v) },\n    e => { notify('abort', undefined, e); abort(e) }\n  ]\n  function notify (state, value, error) {\n    _active[id] = undefined\n    const active = _active.map((a, i) => a && i).filter(n => n)\n    if (state === 'set') {\n      let stack = null\n      try { throw new Error() } catch (e) { stack = e.stack }\n      module.exports.V > 1 && console.debug('[UNP]', id, tag, 'SET at: \\n', stack)\n      return\n    }\n    console.debug(\n      '[UNP]',\n      id,\n      tag,\n      state,\n      `P(${active.join(',')})`,\n      error\n        ? error.message\n        : Array.isArray(value)\n          ? `Arr[${value.length}]: ${value[0] || ''}`\n          : value\n    )\n  }\n}\nfunction unpromise (debug = false) {\n  if (debug) return unpromiseD(debug)\n  let set, abort\n  return [\n    new Promise((resolve, reject) => { set = resolve; abort = reject }),\n    set,\n    abort\n  ]\n}\n\n/**\n * So the repeater is a naive fictional network-hub that dumbly\n * repeats all message to all available nodes;\n * I might have just described a shared message-bus (a.k.a EventEmitter)\n *\n * Bridging two repeaters is surprisingly simple:\n * const a = new Repeater()\n * const b = new Repeater()\n * a.createWire()(b.broadcast)\n * b.createWire()(a.broadcast)\n * - or -\n * a.createWire().pipe(b.createWire())\n *\n *\n * Repeater is now PicoHub having 2 modes of operation.\n * if instantiated without onmessage handler it acts as a dumb\n * repeater, re-emitting a messages on all wires.\n * When onmessage handler is provided all incoming traffic will\n * be forwarded to the master handler.\n */\nclass PicoHub {\n  constructor (onmessage, onclose) {\n    this._nodes = new Set()\n    this._tap = null\n    if (typeof onmessage === 'function') this._tap = onmessage\n    if (typeof onclose === 'function') this._afterRemove = onclose\n  }\n\n  /**\n   * Repeater.createWire() spawns a new 'connect' function\n   * that can be used as such:\n   *\n   * const publish = connect(function onread (msg, reply, disconnect) {\n   *   if (msg === 'Hello') publish('Hey!!')\n   *   else if (msg === 'Bye') disconnect()\n   *   else if (msg === 'Hello tony!' && this.name === 'tony') reply('Bob, is that you?')\n   * })\n   */\n  createWire (externalOnOpen, opts = {}) {\n    const [hubEnd, looseEnd] = picoWire(opts)\n    hubEnd.onmessage = ([msg, reply]) => {\n      if (this._tap) {\n        this._tap(hubEnd, msg, reply)\n          .catch(err => console.error('_tap failed:', err))\n      } else {\n        return this.broadcast(msg, reply, hubEnd)\n          .catch(err => console.error('_broadcast failed:', err))\n      }\n    }\n    const antiLeakTimer = setTimeout(\n      () => hubEnd.close(new Error('NodeTimedout')),\n      30 * 1000\n    )\n    hubEnd.opened.then(open => {\n      if (!open) return console.warn('wire.opened resolved false?', open)\n      clearTimeout(antiLeakTimer)\n      this._nodes.add(hubEnd)\n      if (typeof externalOnOpen === 'function') externalOnOpen(hubEnd)\n    }).catch(err => this.disconnect(hubEnd, err))\n\n    hubEnd.closed.then(err => this.disconnect(hubEnd, err))\n    return looseEnd\n  }\n\n  disconnect (sink, err) {\n    if (!sink) return false\n    if (this._nodes.delete(sink)) {\n      if (typeof this._afterRemove === 'function') this._afterRemove(sink, err)\n      else if (err) console.warn('NodeDisconnected', err)\n      return true\n    }\n    // Attempt to delete by id equality\n    for (const sink of this._nodes) {\n      if (sink.id === sink && this._nodes.delete(sink)) {\n        if (typeof this._afterRemove === 'function') this._afterRemove(sink, err)\n        else if (err) console.warn('NodeDisconnected', err)\n        return true\n      }\n    }\n  }\n\n  get count () { return this._nodes.size }\n\n  /**\n   * A special broadcast that supports bi-directional channels\n   * */\n  async * survey (message, flags, filter) {\n    let abort = false\n    const pending = new Set()\n    // Broadcast message to all wires, push returned promise to pending\n    for (const sink of this._filterNodes(filter)) {\n      const p = sink.postMessage(message, flags)\n      pending.add(p)\n      p.catch(err => {\n        pending.delete(p)\n        console.warn('Survey node ignored:', err)\n      })\n    }\n    // race all promises and remove them from pending list as they resolve or timeout.\n    while (!abort && pending.size) {\n      const res = await Promise.race(\n        Array.from(pending)\n          .map(p => p.then(val => ({ val, p })))\n      )\n      if (!res) continue\n      pending.delete(res.p)\n      const abortSurvey = () => { abort = true }\n      yield [...res.val, abortSurvey]\n    }\n  }\n\n  /*\n   * A simplier interface for survey iterator\n   * that waits for all messages to be transmited\n   * before returning. Use survey directly if you want\n   * fast asynchroneous behaviour.\n   */\n  async broadcast (message, flags, filter) {\n    const iterator = this.survey(message, flags, filter)\n    const responses = []\n    let res = await iterator.next()\n    while (!res.done) {\n      responses.push(res.value)\n      res = await iterator.next()\n    }\n    return responses\n  }\n\n  _filterNodes (filter) {\n    if (!filter) return this._nodes\n    if (!Array.isArray(filter)) filter = [filter]\n    return Array.from(this._nodes).filter(sink =>\n      sink.isActive &&\n      !filter.find(t => isPlug(t) ? t === sink : t === sink.id)\n    )\n  }\n}\n\n/**\n * HyperWire: PicoWire <-> Stream adapter\n * Encodes callstack into vector clocks (inspired by TCP/IP sequence numbers)\n * Or maybe more like ports.\n * TODO: convert into binaryEncoderAdapter(plug) for compatibility with\n * any type of serial socket.\n */\nconst NETWORK_TIMEOUT = 30 * 1000\nfunction hyperWire (plug, hyperStream, key, extensionId = 125) {\n  if (!isPlug(plug)) throw new Error('Wire end expected')\n  const routingTable = new Map()\n  let seq = 1\n  const channel = hyperStream.open(key, {\n    onextension: onStreamReceive,\n    onclose: plug.close\n  })\n  const closeStream = () => {\n    channel.close()\n  }\n  // TODO: consider changing onmessage api to (scope: Array)\n  // to avoid unwrap/rewrap issues\n  plug.onmessage = scope => sendExt(0, scope)\n  plug.closed\n    .then(() => !channel.closed && closeStream())\n    .catch(err => hyperStream.delete(err))\n  return closeStream\n\n  function onStreamReceive (id, chunk) {\n    if (id !== extensionId) {\n      return console.warn('Message dropped! multiple extensions on this channel??', extensionId, id)\n    }\n    const dstPort = chunk.readUInt16BE(0)\n    const srcPort = chunk.readUInt16BE(2)\n    const flags = chunk[4]\n    const replyExpected = !!(flags & REPLY_EXPECTED)\n    if (routingTable.has(dstPort)) {\n      const { replyTo, timer } = routingTable.get(dstPort)\n      routingTable.delete(dstPort)\n      clearTimeout(timer)\n      replyTo(chunk.slice(5), flags)\n        .then(replyExpected && sendExt.bind(null, srcPort))\n        .catch(error => console.error('Hyperwire writeerror', error))\n    } else if (dstPort === 0) { // broadcast\n      plug.postMessage(chunk.slice(5), flags)\n        .then(replyExpected && sendExt.bind(null, srcPort))\n        .catch(error => console.error('Hyperwire writeerror', error))\n    } else {\n      console.warn('Hyperwire message dropped! unknown port', dstPort, srcPort)\n    }\n  }\n\n  function sendExt (dstPort, scope) {\n    const [message, replyTo] = scope\n    if (!Buffer.isBuffer(message)) throw new Error('Binary message expected')\n    let srcPort = 0\n    let flags = 0\n    if (typeof replyTo === 'function') {\n      srcPort = seq++\n      registerCallback(srcPort, replyTo)\n      flags = flags | REPLY_EXPECTED\n    }\n    const txBuffer = Buffer.alloc(message.length + 5)\n    txBuffer.writeUInt16BE(dstPort) // In reply to\n    txBuffer.writeUInt16BE(srcPort, 2) // this packet id\n    txBuffer[4] = flags\n    message.copy(txBuffer, 5)\n    channel.extension(extensionId, txBuffer)\n  }\n\n  function registerCallback (srcPort, replyTo) {\n    const timer = setTimeout(() => {\n      if (!routingTable.has(srcPort)) return\n      routingTable.delete(srcPort)\n      closeStream(new Error('ResponseTimeout'))\n    }, NETWORK_TIMEOUT)\n    routingTable.set(srcPort, { replyTo, timer })\n  }\n}\n\nconst MTU = 256 << 10 // 256kB\nfunction streamWire (plug, duplexStream) {\n  const routingTable = new Map()\n  let seq = 1\n  let txBuffer = Buffer.alloc(256)\n  const broadcast = plug(streamSend.bind(null, 0))\n  duplexStream.on('data', onStreamReceive)\n  duplexStream.once('close', onclose)\n  duplexStream.once('error', onclose)\n\n  const closeStream = err => err ? duplexStream.end() : duplexStream.destroy(err)\n  return closeStream\n\n  function onclose (err) {\n    duplexStream.off('data', onStreamReceive)\n    duplexStream.off('error', onclose)\n    duplexStream.off('close', onclose)\n    broadcast.close(err)\n  }\n\n  function onStreamReceive (chunk) {\n    const dstPort = chunk.readUInt16BE(0)\n    const srcPort = chunk.readUInt16BE(2)\n    // const size = chunk.readUInt16BE(4)\n    // TODO: streamWire does not support fragmentation ATM\n    // if (chunk.length < size) debugger\n\n    if (routingTable.has(dstPort)) {\n      const { replyTo, timer } = routingTable.get(dstPort)\n      routingTable.delete(dstPort)\n      clearTimeout(timer)\n      replyTo(chunk.slice(6), (msg, replyTo) => streamSend(srcPort, msg, replyTo))\n    } else if (dstPort === 0) { // broadcast\n      broadcast(chunk.slice(6), (msg, replyTo) => streamSend(srcPort, msg, replyTo))\n    } else {\n      console.warn('WARN: streamWire Message dropped', chunk[6])\n    }\n  }\n\n  function streamSend (dstPort, msg, replyTo) {\n    let srcPort = 0\n    if (typeof replyTo === 'function') {\n      srcPort = seq++\n      registerCallback(srcPort, replyTo)\n    }\n    const packetSize = msg.length + 6 // seq\n    if (packetSize > txBuffer.length) {\n      if (packetSize >= MTU) throw new Error('Message exceeds MTU')\n      txBuffer = Buffer.alloc(packetSize)\n    }\n    txBuffer.writeUInt16BE(dstPort) // In reply to\n    txBuffer.writeUInt16BE(srcPort, 2) // this packet id\n    txBuffer.writeUInt16BE(packetSize, 4) // Packet size\n    msg.copy(txBuffer, 6)\n    duplexStream.write(txBuffer.slice(0, packetSize))\n  }\n\n  function registerCallback (srcPort, replyTo) {\n    const timer = setTimeout(() => {\n      if (!routingTable.has(srcPort)) return\n      // get replyTo from table to allow GC clear up replyTo reference\n      routingTable.delete(srcPort)\n      closeStream(new Error('ResponseTimeout'))\n    }, NETWORK_TIMEOUT)\n    routingTable.set(srcPort, { replyTo, timer })\n  }\n}\n\nasync function * messageIterator (wire) {\n  const pBuffer = []\n  const rBuffer = []\n  let done = false\n  pBuffer.push(new Promise(resolve => rBuffer.push(resolve)))\n\n  const send = wire((message, reply) => {\n    pBuffer.push(new Promise(resolve => rBuffer.push(resolve)))\n    rBuffer.shift()([\n      message,\n      reply,\n      function stopGeneratorAndCloseWire () {\n        send.close()\n        done = true\n      }\n    ])\n  })\n  while (!done) yield await pBuffer.shift() // eslint-disable-line no-unmodified-loop-condition\n}\n\n// Recursivly binds JSON codec without plugging in\n// wire.\nfunction jsonTransformer (plug) {\n  return encodingTransformer(plug, {\n    encode: obj => Buffer.from(JSON.stringify(obj)),\n    decode: msg => JSON.parse(msg)\n  })\n}\n\n// Recursivly binds abstract encoding codec without plugging in\n// wire.\nfunction encodingTransformer (plug, encoder) {\n  const encode = (forward, obj, r, c) => forward(\n    encoder.encode(obj),\n    r && decode.bind(null, r, c)\n  )\n  const decode = (forward, msg, r, c) => forward(\n    encoder.decode(msg),\n    r && encode.bind(null, r, c)\n  )\n\n  return down => {\n    const up = plug(decode.bind(null, down))\n    return encode.bind(null, up)\n  }\n}\n\n// Practical starting point\nmodule.exports = PicoHub\nmodule.exports.V = 0 // verbosity level 'debug' lib is good but need conditional execution.\n// Main pipe/wire spawners\nmodule.exports.picoWire = picoWire\nmodule.exports.simpleWire = _picoWire\n\n// Adapters\nmodule.exports.streamWire = streamWire\nmodule.exports.hyperWire = hyperWire\nmodule.exports.spliceWires = spliceWires\n\n// Transformers\nmodule.exports.jsonTransformer = jsonTransformer\nmodule.exports.encodingTransformer = encodingTransformer\n\n// misc\nmodule.exports.messageIterator = messageIterator\nmodule.exports.unpromise = unpromise\n","/**\n * This RPC has 2 remote procedure calls.\n * First is \"blocks\" which sends one-or-more feeds to remote peer.\n * Second is \"query\" which expects remote peer to respond with \"blocks\".\n * Feel free to copy and modify if you need something different. (AGPL)\n */\nconst Hub = require('piconet')\nconst Feed = require('picofeed')\nconst { pack, unpack } = require('msgpackr')\nconst { write } = require('piconuro')\n\n// const { randomBytes } = require('crypto')\n// TODO: is crypto.randomBytes() available in Browser?\nconst randomBytes = n => Buffer.from(\n  Array.from(new Array(n))\n    // Not very random, used to generate a node-id\n    .map(_ => Math.floor(Math.random() * 256))\n)\n\n// Message Types\nconst OK = 0\nconst ERR = -1\nconst QUERY = 1\nconst BLOCKS = 2\nconst NODE_ID = 3\n\nclass SimpleRPC {\n  /** Handlers spec:\n   * {\n   *    // When peer conects\n   *    onconnect: send => { ... }\n   *\n   *    // When peer asks for blocks\n   *    onquery: async query => { return Feed || Feeds[] }\n   *\n   *    // When blocks received from peer\n   *    onblocks: async feed => { ... }\n   *\n   *    // When peer disconnects\n   *    ondisconnect: peer => { ... }\n   * }\n   */\n  constructor (handlers) {\n    this.nodeId = randomBytes(8)\n    this._controller = this._controller.bind(this)\n    this.hub = new Hub(\n      (...a) => this._controller(...a),\n      (...a) => this._ondisconnect(...a)\n    )\n    this.handlers = handlers\n\n    // Export connections neuron\n    const [$n, set] = write([])\n    this._setConnections = set\n    this.$connections = $n\n  }\n\n  spawnWire () {\n    // Internal 'onconnect'\n    const plug = this.hub.createWire(hubEnd => {\n      // Exchange node Id\n      hubEnd.postMessage(encodeMsg(NODE_ID, this.nodeId), true)\n        .then(([msg, reply]) => {\n          if (decodeMsg(msg).type !== OK) return // dupe-peer, wire will close\n          this._setConnections(Array.from(this.hub._nodes))\n          // Exchange done, continue with application handshake\n          return this.handlers.onconnect(hubEnd)\n        })\n        .catch(err => console.error('Handshake failed', err))\n    })\n    return plug\n  }\n\n  _ondisconnect (...a) {\n    this._setConnections(Array.from(this.hub._nodes))\n    this.handlers.ondisconnect(...a)\n  }\n\n  async _controller (node, msg, replyTo) {\n    try {\n      const { type, data } = decodeMsg(msg)\n      switch (type) {\n        // Download blocks\n        case BLOCKS:\n          for await (const blocks of this._downloadFeeds(msg, replyTo)) {\n            const patch = await this.handlers.onblocks(blocks)\n            // Gossip if our store accepted the blocks\n            if (patch) {\n              this.shareBlocks(patch, node) // second param prevents echo\n                .catch(err => console.error('Gossip failed', err))\n            }\n          }\n          break\n\n        // Respond to queries\n        case QUERY: {\n          const feeds = await this.handlers.onquery(data)\n          // Upload feeds to peer\n          this._uploadFeeds(replyTo, feeds)\n            .catch(err => console.error('Failed uploading blocks', err))\n        } break\n\n        case NODE_ID:\n          // Prevent accidental duplicate peer connections\n          for (const n of this.hub._nodes) {\n            if (Buffer.isBuffer(n.id) && n.id.equals(data)) {\n              // Ignore dupe-ack error handling as conection is about\n              // to be killed anyway\n              replyTo(encodeMsg(ERR))\n              return node.close(new Error('DuplicatePeer')) // dedupe peers\n            }\n          }\n          node.id = data\n          await replyTo(encodeMsg(OK))\n          break\n\n        default:\n          throw new Error(`Unknown message type: ${type}`)\n      }\n    } catch (err) {\n      console.error('RPC:internal error', err)\n    }\n  }\n\n  // Shares blocks to all connected peers\n  async shareBlocks (feeds, filter) {\n    if (Feed.isFeed(feeds)) feeds = [feeds]\n    feeds = [...feeds]\n    const first = feeds.shift()\n    const iterator = this.hub.survey(encodeMsg(BLOCKS, first), !!feeds.length, filter)\n\n    for await (const [msg, sink] of iterator) {\n      if (!feeds.length) continue // one feed sent, that's it.\n      if (typeOfMsg(msg) === OK && sink) {\n        this._uploadFeeds(sink, feeds)\n          .catch(err => console.error('Failed sending subsequent feeds', err))\n      } else {\n        console.warn('Remote rejected subsequent blocks', typeOfMsg(msg))\n      }\n    }\n  }\n\n  async query (node, params = {}) {\n    const [msg, reply] = await node.postMessage(encodeMsg(QUERY, params), true)\n    if (decodeMsg(msg).type === OK) return // Empty reply\n    // Let the controller handle the rest\n    this._controller(node, msg, reply)\n  }\n\n  // Recursively uploads feeds until array\n  // is empty or aborted by remote peer\n  _uploadFeeds (sink, feeds) {\n    if (!feeds || !feeds.length) {\n      return sink(encodeMsg(OK))\n    }\n    const remaining = [...feeds]\n    const current = remaining.shift()\n    return sink(encodeMsg(BLOCKS, current), !!remaining.length)\n      .then(([msg, next]) => {\n        if (!remaining.length) return // It's done\n        if (!msg) return console.warn('Empty scope')\n        if (typeOfMsg(msg) !== OK) return console.warn('Peer rejected subsequent blocks', typeOfMsg(msg))\n        return this._uploadFeeds(next, remaining)\n      })\n  }\n\n  async * _downloadFeeds (msg, sink) {\n    let done = false\n    while (!done) {\n      done = true\n      const { type, data } = decodeMsg(msg)\n      if (type === BLOCKS) yield data\n      else if (sink) {\n        console.warn('Expected BLOCKS but got', type)\n        await sink(encodeMsg(ERR), false)\n        continue\n      }\n      if (!sink) continue // End of stream\n\n      // Download one more feed\n      // updating msg and sink then do another loop.\n      const scope = await sink(encodeMsg(OK), true)\n      msg = scope[0]\n      sink = scope[1]\n      done = false\n    }\n  }\n}\nmodule.exports = SimpleRPC\n\nfunction encodeMsg (type, obj) {\n  let buffer = null\n  switch (type) {\n    case BLOCKS:\n      // TODO: Extend picofeed with official binary pickle support.\n      if (!obj) throw new Error('Feed expected')\n      obj = Feed.from(obj)\n      buffer = Buffer.alloc(obj.tail + 1)\n      obj.buf.copy(buffer, 1, 0, obj.tail)\n      break\n\n    // Serialize signals\n    case ERR:\n    case OK:\n      buffer = Buffer.alloc(1)\n      break\n\n    // Serialize msgpack messages\n    case QUERY: {\n      const data = pack(obj)\n      buffer = Buffer.alloc(data.length + 1)\n      data.copy(buffer, 1)\n    } break\n\n    case NODE_ID:\n      buffer = Buffer.alloc(8 + 1)\n      obj.copy(buffer, 1)\n      break\n\n    default:\n      throw new Error('UnknownMessageType: ' + type)\n  }\n  buffer[0] = type\n  return buffer\n}\n\nfunction typeOfMsg (buffer) {\n  if (!Buffer.isBuffer(buffer)) throw new Error('BufferExpected')\n  return buffer[0]\n}\n\nfunction decodeMsg (buffer) {\n  if (!Buffer.isBuffer(buffer)) throw new Error('BufferExpected')\n  const type = typeOfMsg(buffer)\n  let data = null\n  switch (type) {\n    case BLOCKS:\n      // TODO: Feed.from(buffer) in picofeed\n      data = new Feed()\n      data.buf = buffer.slice(1)\n      data.tail = buffer.length - 1\n      break\n\n    // deserialize signals\n    case OK:\n      data = 'OK'\n      break\n    case ERR:\n      data = 'ERROR'\n      break\n\n    // deserialize msgpack messages\n    case QUERY:\n      data = unpack(buffer.slice(1))\n      break\n\n    case NODE_ID:\n      data = buffer.slice(1, 9)\n      break\n\n    default:\n      throw new Error('UnknownMessageType: ' + type)\n  }\n  return { type, data }\n}\n","// Kernel includes\nconst Repo = require('picorepo')\nconst Store = require('@telamon/picostore')\nconst Feed = require('picofeed')\nconst { pack, unpack } = require('msgpackr')\nconst SimpleRPC = require('./simple-rpc')\nconst KEY_SK = 'reg/sk'\n\n/* This is a simple but complete pico-kernel,\n * It sets up a user-identity, store and rpc.\n * It uses msgpack as block-encoder and also injects\n * sequence-number, type and timestamp props into each block.\n *\n * If you need something more advanced feel free to\n * fork off and hack. <3\n */\nclass SimplePicoKernel {\n  constructor (db, opts = {}) {\n    // Setup store\n    this.db = db\n    this.repo = new Repo(db)\n    this.store = new Store(this.repo, this.mergeStrategy.bind(this))\n    // this.store.mutexTimeout = 600000000\n    this.ready = false\n    this._secret = opts.secret ?? null\n\n    // Setup network\n    this.rpc = new SimpleRPC({\n      onconnect: send => this.onconnect(send),\n      ondisconnect: peer => this.ondisconnect(peer),\n      onquery: (q, reply) => this.onquery(q, reply),\n      onblocks: feed => this.onblocks(feed)\n    })\n  }\n\n  /**\n   * Returns user's public key (same thing as userId)\n   */\n  get pk () {\n    return this._secret?.slice(32)\n  }\n\n  async boot () {\n    if (this.__loading) return this.__loading\n    this.__loading = (async () => {\n      // If identity wasn't provided via opts.\n      if (!this._secret) {\n        try {\n          // Attempt to restore existing identity\n          this._secret = await this.repo.readReg(KEY_SK)\n        } catch (err) {\n          if (!err.notFound) throw err\n        }\n      }\n\n      // Fallback to generate new identity\n      if (!this._secret) {\n        const { sk } = Feed.signPair()\n        this._secret = sk\n        await this.repo.writeReg(KEY_SK, sk)\n      }\n\n      await this.store.load() // load stores\n      this.ready = true\n    })()\n    return this.__loading\n  }\n\n  /**\n   * PicoRepo: Default merge strategy restricts feeds\n   * to only allow same-author blocks to be appended.\n   * Override this method if you need different behavior.\n   */\n  mergeStrategy (block, repo) {\n    return false\n  }\n\n  /**\n   * Returns user's feed\n   */\n  async feed (limit = undefined) {\n    this._checkReady()\n    return this.repo.loadHead(this.pk)\n  }\n\n  _checkReady () {\n    if (!this.ready) throw new Error('Kernel not ready, did you await kernel.boot()?')\n  }\n\n  /**\n   * Returns the last block number of user\n   * Block sequence starts from 0 and increments by 1 for each new user-block\n   */\n  async seq () {\n    const feed = await this.feed(1)\n    if (!feed) return -1\n    return SimplePicoKernel.decodeBlock(feed.last.body).seq\n  }\n\n  /**\n   * Mutates store and reduced state\n   * returns {string[]} names of stores that were modified by this action\n   */\n  async dispatch (patch, loudFail = false) {\n    this._checkReady()\n    return await this.store.dispatch(patch, loudFail)\n  }\n\n  /**\n   * Creates a new block on parent feed and dispatches it to store\n   *\n   * - branch {Feed} the parent feed, OPTIONAL! defaults to user's private feed.\n   * - type {string} (block-type: 'profile' | 'box' | 'message')\n   * - payload {object} The data contents\n   * returns list of modified stores\n   */\n  async createBlock (branch, type, payload) {\n    if (typeof branch === 'string') return this.createBlock(null, branch, type)\n    this._checkReady() // Abort if not ready\n\n    // Use provided branch or fetch user's feed\n    // if that also fails then initialize a new empty Feed.\n    branch = branch || (await this.feed()) || new Feed()\n\n    const seq = (await this.seq()) + 1 // Increment block sequence\n    const data = SimplePicoKernel.encodeBlock(type, seq, payload) // Pack data into string/buffer\n    branch.append(data, this._secret) // Append data on selected branch\n\n    const mut = await this.dispatch(branch, true) // Dispatch blocks\n    if (!mut.length) throw new Error('createBlock() failed: rejected by store')\n    // Transmit new block on all wires.\n    this.rpc.shareBlocks(branch.slice(-1))\n    return branch\n  }\n\n  /**\n   * Forwards call to RPC,\n   * spawns a stateless Pico-net wire\n   */\n  spawnWire () {\n    return this.rpc.spawnWire()\n  }\n\n  /**\n   * RPC: on Peer disconnect handler, override for custom behaviour\n   */\n  ondisconnect (peer) {\n    // Stub\n  }\n\n  /**\n   * RPC: on Peer connect handler, override for custom behaviour\n   * (like a handshake or something.)\n   * The \"wire-end\" received contains two useful functions:\n   * wire.postMessage(data, replyExpected: boolean) // => Promise\n   * and\n   * wire.close() // disconnects the peer\n   */\n  async onconnect (node) {\n    // Ask peer for blocks\n    await this.rpc.query(node)\n  }\n\n  /**\n   * RPC: when remote Peer asks us for blocks\n   * override friendly.\n   * Expected to return a Feed or array of Feeds\n   */\n  async onquery (params) {\n    // We'll just send the entire repo for now *shrug*\n    const feeds = []\n    const heads = await this.repo.listHeads()\n    for (const { key } of heads) {\n      const f = await this.repo.loadHead(key)\n      // Tradeoff performance to reduce traffic\n      // if (f && !feeds.find(a => a.merge(f))) feeds.push(f) // what?\n      if (f) feeds.push(f)\n    }\n    return feeds\n  }\n\n  /**\n   * RPC: when blocks are received\n   * we simply dispatch them to the store.\n   * They're 'mutations' =)\n   * Returns feed to be forwarded to all connected peers\n   */\n  async onblocks (feed) {\n    const loudFail = false\n    const mutated = await this.dispatch(feed, loudFail)\n    return mutated.patch\n  }\n\n  // Handles orphaned blocks by asking network\n  // for a sync-up\n  async _networkResolveFeed (feed, loudFail) {\n    // Except this is not how query works atm.\n    // const remote = await this.rpc.query({ resolve: feed.first.parentSig })\n    // if (!feed) return 0 // Give up\n    // remote.merge(feed)\n    // const mutated = await this.dispatch(remote, loudFail)\n    // return !!mutated.length\n  }\n\n  $connections () { return this.rpc.$connections }\n\n  async close () {\n    for (const sink of this.rpc.hub._nodes) {\n      this.rpc.hub.disconnect(sink)\n    }\n    await this.db.close()\n  }\n\n  /**\n   * Convert Object to buffer\n   */\n  static encodeBlock (type, seq, payload) {\n    return pack({\n      ...payload,\n      type,\n      seq,\n      date: new Date().getTime()\n    })\n  }\n\n  /**\n   * Converts buffer to Object\n   */\n  static decodeBlock (body) {\n    return unpack(body)\n  }\n\n  /**\n   * Returns block's type as a string\n   */\n  static typeOfBlock (body) {\n    return SimplePicoKernel.decodeBlock(body).type\n  }\n}\n\nmodule.exports = SimplePicoKernel\n","// SPDX-License-Identifier: AGPL-3.0-or-later\nconst Feed = require('picofeed')\nconst Store = require('@telamon/picostore')\nconst Hub = require('piconet')\nconst SimpleKernel = require('./simple-kernel')\nconst SimpleRPC = require('./simple-rpc')\nconst Repo = require('picorepo')\nconst { decodeBlock, encodeBlock } = SimpleKernel\nconst n = require('piconuro')\n\n/**\n * Attempted to flatten dependency tree\n * by setting all sub-module deps as peer-deps\n * and using this package as final version control.\n *\n * Thus exporting all sub-modules here to let\n * application avoid dep management..\n * But require/import resolves to sub-mod deps anyway i think,\n * unecessary exports?\n * I don't know. help!\n */\nmodule.exports = {\n  // Necessary Exports\n  Feed,\n  SimpleKernel,\n  decodeBlock,\n  encodeBlock,\n  n, // Nuro\n\n  // Convenience exports\n  Store,\n  Hub,\n  SimpleRPC,\n  Repo\n}\n","/* eslint-disable camelcase */\nconst {\n  crypto_box_seal,\n  crypto_box_seal_open,\n  crypto_box_keypair,\n  crypto_box_SEALBYTES,\n  crypto_box_PUBLICKEYBYTES,\n  crypto_box_SECRETKEYBYTES\n} = require('sodium-universal')\n/* eslint-enable camelcase */\nconst assert = require('nanoassert')\nconst createDebug = require('debug')\nconst { SimpleKernel } = require('picostack')\n\n// Global registry names (used as session variables)\nconst KEY_SK = 'reg/sk'\nconst KEY_BOX_LIKES_PK = 'reg/likes_pk'\nconst KEY_BOX_LIKES_SK = 'reg/likes_sk'\n\n// Block-types\nconst TYPE_PROFILE = 'peer'\nconst TYPE_VIBE = 'vibe' // A.k.a  Like \nconst TYPE_VIBE_RESP = 'vres' // <3 / </3\nconst TYPE_MESSAGE = 'msg'\nconst TYPE_BYE = 'bye'\nconst TYPE_BYE_RESP = 'byebye'\nconst TYPE_ITEMS = 'bar' // Delivery from Bartender\nconst TYPE_ACTIVATE = 'act' // Consume/Toggle/Interact with items\n\n// Interrupts (internal lowlevel events)\n// Yes.. they look scary cause they probably are. :/\nconst EV_CHAT_END = 60\nconst EV_BALANCE_CREDIT = 70\nconst EV_BALANCE_DEBIT = 71\nconst EV_ADD_SCORE = 72\n\n// Other Constants\nconst VIBE_REJECTED = Buffer.from('')\nconst PASS_TURN = Buffer.from('')\nconst PEACE = 0\nconst UNDERSTANDING = 1\nconst LOVE = 2\n\nconst G_M = 0\nconst G_F = 1\nconst G_NB = 2\nconst G_R = 3 // Robots are people too\n\n// It's silly to waste\nconst GEO_BITS = 17\n\nconst { encodeBlock, decodeBlock, typeOfBlock } = SimpleKernel\n\nfunction bufferReplacer (k, o) {\n  return (o && typeof o === 'object' && o.type === 'Buffer') ? Buffer.from(o.data) : o\n}\n\n/**\n * Fixes JSON.parse(JSON.stringify(Buffer.alloc(1))) => Buffer\n * instead of: { type: 'Buffer', data [ 0 ] }\n */\nfunction fixJsonBuffers (o) {\n  if (typeof o === 'object' && o.type === 'Buffer') return Buffer.from(o.data)\n  if (Array.isArray(o)) return o.map(fixJsonBuffers)\n  if (typeof o === 'object') {\n    for (const prop in o) {\n      o[prop] = fixJsonBuffers(o[prop])\n    }\n  }\n  return o\n}\n\n/**\n * Converts hexString to buffer\n */\nfunction toBuffer (o) {\n  if (!o) return o\n  if (Buffer.isBuffer(o)) return o\n  if (typeof o === 'string' && /^[0-9A-f]+$/.test(o)) return Buffer.from(o, 'hex')\n  if (typeof o === 'string') return Buffer.from(o) // Not sure if like, remember PHP anyone?\n  if (typeof o === 'object' && o.type === 'Buffer') return Buffer.from(o.data)\n  else return o\n}\n\n/*\n * Sodium seal/unseal encryption\n * https://doc.libsodium.org/public-key_cryptography/sealed_boxes\n */\nfunction seal (m, pk) {\n  const c = Buffer.allocUnsafe(crypto_box_SEALBYTES + m.length) // eslint-disable-line camelcase\n  crypto_box_seal(c, m, pk)\n  return c\n}\n\nfunction unseal (c, sk, pk) {\n  const m = Buffer.allocUnsafe(c.length - crypto_box_SEALBYTES) // eslint-disable-line camelcase\n  const succ = crypto_box_seal_open(m, c, pk, sk)\n  assert(succ, 'DecryptionFailedError')\n  return m\n}\n\nfunction boxPair () {\n  const pk = Buffer.allocUnsafe(crypto_box_PUBLICKEYBYTES)\n  const sk = Buffer.allocUnsafe(crypto_box_SECRETKEYBYTES)\n  crypto_box_keypair(pk, sk)\n  return { pk, sk }\n}\n\n/*\n * Pepper `debug` lib with buf->hexstring interpolators\n */\ncreateDebug.formatters.h = v => {\n  if (!Buffer.isBuffer(v) || !v?.length) return v\n  return v.slice(0, Math.min(8, v.length)).toString('hex')\n}\ncreateDebug.formatters.H = v => {\n  if (!Buffer.isBuffer(v) || !v?.length) return v\n  return v.toString('hex')\n}\n\n// KEY codec: Buffer<->String\nfunction btok (b, length = -1) { // 'base64url' not supported in browser :'(\n  assert(Buffer.isBuffer(b), 'Expected Buffer')\n  if (length > 0) b = b.slice(0, length)\n  return b.toString('hex')\n}\nfunction ktob (s) {\n  assert(typeof s === 'string', 'Expected string')\n  return Buffer.from(s, 'hex')\n}\n\nmodule.exports = {\n  KEY_SK,\n  KEY_BOX_LIKES_PK,\n  KEY_BOX_LIKES_SK,\n  TYPE_PROFILE,\n  TYPE_VIBE,\n  TYPE_VIBE_RESP,\n  TYPE_MESSAGE,\n  TYPE_BYE,\n  TYPE_BYE_RESP,\n  TYPE_ITEMS,\n  TYPE_ACTIVATE,\n  EV_CHAT_END,\n  EV_BALANCE_DEBIT,\n  EV_BALANCE_CREDIT,\n  EV_ADD_SCORE,\n  VIBE_REJECTED,\n  PASS_TURN,\n  PEACE,\n  LOVE,\n  UNDERSTANDING,\n  G_M,\n  G_F,\n  G_NB,\n  G_R,\n  GEO_BITS,\n  encodeBlock,\n  decodeBlock,\n  typeOfBlock,\n  fixJsonBuffers,\n  toBuffer,\n  boxPair,\n  seal,\n  unseal,\n  bufferReplacer,\n  btok,\n  ktob\n}\n","/**\n * What is the meaning of Silence?\n *\n  |---+------------+----+----+-------------------------|\n  |   | Name       | W  | B  | Note                    |\n  |---+------------+----+----+-------------------------|\n  |   | TIER 0     |    |    |                         |\n  |---+------------+----+----+-------------------------|\n  |  | Profile    |    |    |                         |\n  |  | Vibe       |    |    |                         |\n  |  | VibeResp   |    |    |                         |\n  |  | W Msg      | +1 | +0 |                         |\n  |  | B Msg      | +0 | +1 |                         |\n  |  | W Pass     |    |    |                         |\n  |  | B Pass     |    |    |                         |\n  |  | W End      |    |    |                         |\n  |  | B End      |    |    |                         |\n  |---+------------+----+----+-------------------------|\n  |   | TIER 1     |    |    |                         |\n  |---+------------+----+----+-------------------------|\n  |  | Lock/start |    |    |                       |\n  |  | GameOver   |    |    | ,                 |\n  |  | W Advance  | +2 | +1 |                       |\n  |  | B Advance  | +1 | +2 |                       |\n  |  | W Combo    | +4 | +3 |                       |\n  |  | B Combo    | +3 | +4 |                       |\n  |  | W Unlock   | +5 | +3 |                       |\n  |  | B Unlock   | +2 | +4 |                       |\n  |  | Miss       | -1 | +2 |                       |\n  |---+------------+----+----+-------------------------|\n  |   | TIER 2     |    |    |                         |\n  |---+------------+----+----+-------------------------|\n  |  | Engarde    |    |    | ,                   |\n  |  | Evade      | -1 | +3 |                       |\n  |  | Riposte    | +2 | +4 |                      |\n  |  | D. Riposte | +2 | +5 |                      |\n  |  | Block      | +1 | +3 | , White is vulnerable |\n  |  | F.O.P      |    |    |                      |\n  |---+------------+----+----+-------------------------|\n  |   | TIER 3     |    |    |                         |\n  |---+------------+----+----+-------------------------|\n  |  | TKO        |    |    |                      |\n  |\n */\n\nconst {\n  typeOfBlock,\n  TYPE_PROFILE,\n  TYPE_VIBE,\n  TYPE_VIBE_RESP,\n  TYPE_MESSAGE,\n  TYPE_BYE,\n  TYPE_BYE_RESP,\n  VIBE_REJECTED,\n  PASS_TURN,\n  PEACE,\n  LOVE,\n  UNDERSTANDING,\n  decodeBlock\n} = require('./util')\n\nfunction feedToGraph (f) {\n  let graph = ''\n  let wk = f.first.isGenesis ? f.first.key : null\n  for (const block of f.blocks()) {\n    // White is the initiator, they who sent the vibe.\n    if (typeOfBlock(block.body) === TYPE_VIBE && !wk) wk = block.key\n    const white = wk && block.key.equals(wk)\n    graph += blockToGlyph(block, white)\n  }\n  return graph\n}\n\nfunction blockToGlyph (block, white = true) {\n  switch (typeOfBlock(block.body)) {\n    case TYPE_PROFILE:\n      return ''\n    case TYPE_VIBE:\n      return ''\n    case TYPE_VIBE_RESP: {\n      const r = VIBE_REJECTED.equals(decodeBlock(block.body).box)\n      return r ? '' : ''\n    }\n    case TYPE_MESSAGE: {\n      const p = PASS_TURN.equals(decodeBlock(block.body).content)\n      return p\n        ? white ? '' : ''\n        : white ? '' : ''\n    }\n    case TYPE_BYE:\n    case TYPE_BYE_RESP: {\n      const plu = []\n      plu[PEACE] = ''\n      plu[LOVE] = ''\n      plu[UNDERSTANDING] = ''\n      // TODO: Think this through\n      return (white ? '' : '') // + plu[decodeBlock(block.body).gesture]\n    }\n  }\n}\n\nfunction scoreGraph (input) {\n  input = rewrite(input)\n  if (//.test(input)) return [0, 0]\n\n  const table = {\n    : [0, 0],\n    : [1, 0],\n    : [0, 1],\n    : [5, 3],\n    : [2, 4],\n    : [2, 1],\n    : [0, 2],\n    : [4, 3],\n    : [2, 4],\n    : [-1, 2],\n    : [-1, +3],\n    : [2, 4],\n    : [2, 5],\n    : [1, 3],\n    : [-1, 0]\n  }\n\n  let w = 0\n  let b = 0\n  for (const glyph of input.split('')) {\n    if (!table[glyph]) {\n      console.warn('Unscored glyph: ', glyph)\n      continue\n    }\n    w += table[glyph][0]\n    b += table[glyph][1]\n  }\n  // console.log('Game:', input, `score W${w}/B${b}`)\n  return [w, b]\n}\n\nfunction rewrite (input) {\n  const rules = [\n    // Tier 1\n    [//, ''], // Lock\n    [/(|)/, ''], // Game over\n    [/([])/, '$1'], // white advance\n    [/([])/, '$1'], // black advance\n    [//, ''], // WCombo\n    [//, ''], // BCombo\n    [//, ''], // Unlock WB\n    [//, ''], // Unlock BW\n    [//, ''], // Miss\n\n    // Tier 2\n    [/(|)/, ''], // Engarde\n    [//, ''], // Evade\n    [//, ''], // Reposte\n    [//, ''], // Deadly reposte\n    [//, ''], // Block, reversal.\n\n    // Tier 3\n    [//, ''], // W Retreat.\n    [//, ''], // KO, w surrender.\n    [//, ''], // FOP, w defeat.\n    [//, ''] // TKO, w defeat.\n  ]\n  let prev = null\n  while (prev !== input) {\n    prev = input\n    for (const [p, r] of rules) input = input.replace(p, r)\n  }\n  return input\n}\n\nmodule.exports = {\n  feedToGraph,\n  scoreGraph,\n  blockToGlyph,\n  rewrite\n}\n\n// Operates on arrays of tokens, if tokens in pattern are contained by\n// tokens in input, then they are replaced with tokens in replacement.\n// If pattern is not contained by input, then unmodified input is returned.\n// (Original code located in Xeno, written to allow unordered graph-rewrites)\nfunction uRewrite (input, pattern, replacement) {\n  if (typeof input === 'string') input = input.split('')\n  if (typeof pattern === 'string') pattern = pattern.split('')\n  const pool = [...input]\n\n  for (const chr of pattern) {\n    const idx = pool.findIndex((elem, n) =>\n      (chr instanceof RegExp) ? elem.match(chr) : chr === elem\n    )\n    if (!~idx) return input // idx: -1, no match; return original input\n    else pool.splice(idx, 1) // remove match from pool and continue to next token\n  }\n  if (!Array.isArray(replacement)) replacement = [replacement]\n  return [...pool, ...replacement]\n}\n\n// Recursivly rewrites an array with rules until it stops changing.\nfunction uEvolve (mem, rules) {\n  if (typeof mem === 'string') mem = mem.split('')\n  let n = 0\n  let prev = null\n  do {\n    prev = mem\n    for (const rule of rules) mem = uRewrite(mem, rule[0], rule[1])\n    if (mem.join() === prev.join()) n++\n  } while (n < 2)\n  return mem\n}\n\n// Don't know what it's supposed to do.\nfunction uRegrow (mem, rules) {\n  return mem.reduce((buf, elem) => {\n    return uEvolve([...buf, elem], rules)\n  })\n}\n","module.exports = Object.freeze({\n  profile_timeout: 3 * 60 * 60000, // 3hours\n  vibe_timeout: 5 * 60000, // 5 minutes\n  vibe_response_timeout: 3 * 1000 * 60, // 3 minutes\n  chat_timeout: 30 * 60000, // 30minutes\n  now: Date.now\n})\n","const {\n  TYPE_PROFILE,\n  EV_CHAT_END,\n  EV_BALANCE_CREDIT,\n  EV_BALANCE_DEBIT,\n  EV_ADD_SCORE,\n  decodeBlock,\n  btok\n} = require('../util')\nconst assert = require('nanoassert')\nconst { scoreGraph } = require('../game')\n\nconst ACTIVE = 'active' // head is Profile|Bye|Items|Use\nconst PENDING = 'pending' // Waiting for vibe-resp\nconst LOCKED = 'locked' // Locked in convo\nconst EXPIRED = 'expired' // GC-candy\n\nconst { profile_timeout: TTL } = require('../../config.js')\n\nmodule.exports = () => ({\n  name: 'peers',\n  initialValue: {}, // Initial state, empty hash\n\n  filter: ({ block, state }) => {\n    const data = decodeBlock(block.body)\n    if (data.type !== TYPE_PROFILE) return true // Ignore non-profile blocks.\n    return validateProfile(data)\n  },\n\n  // Reducer updates state with values from block\n  reducer: ({ block, state, schedule }) => {\n    const key = block.key.toString('hex')\n    state[key] = state[key] || mkProfile(key) // Lazy initalize profile object\n    Object.assign(state[key], decodeBlock(block.body, 1)) // Set new values\n    state[key].pk = block.key // Store profile.pk as hexString\n    state[key].sig = block.sig // Store profile.pk as hexString\n    state[key].expiresAt = state[key].date + TTL\n    schedule('peer', block.key, state[key].expiresAt)\n    return state // return new state\n  },\n\n  trap ({ code, payload, root, state }) {\n    switch (code) {\n      case EV_CHAT_END: {\n        const strkey = btok(payload)\n        const chat = root.chats.chats[strkey]\n        const score = scoreGraph(chat.graph)\n        state[btok(chat.a)].score += score[0]\n        state[btok(chat.b)].score += score[1]\n        // Scores affect balance as well\n        state[btok(chat.a)].balance += score[0]\n        state[btok(chat.b)].balance += score[1]\n\n        // Handle balance affecting transactions\n        const pending = root.trs[strkey]\n        if (!pending?.length) return\n        for (const op of pending) {\n          switch (op.type) {\n            case 'debit':\n              assert(Buffer.isBuffer(op.target), 'InvalidPeerId')\n              assert(Number.isFinite(op.amount), 'InvalidAmount')\n              state[btok(op.target)].balance -= op.amount\n              break\n            case 'credit':\n              assert(Buffer.isBuffer(op.target), 'InvalidPeerId')\n              assert(Number.isFinite(op.amount), 'InvalidAmount')\n              state[btok(op.target)].balance += op.amount\n              break\n          }\n        }\n      } break\n      case EV_BALANCE_CREDIT: {\n        const { target, amount } = payload\n        state[btok(target)].balance += amount\n      } break\n      case EV_BALANCE_DEBIT: {\n        const { target, amount } = payload\n        state[btok(target)].balance -= amount\n      } break\n      case EV_ADD_SCORE: {\n        const { target, amount } = payload\n        state[btok(target)].score += amount\n      } break\n      default:\n        return // unhandled signal\n    }\n    return state\n  }\n})\n\n// Experimental: attempt maintaining own profile as separate slice\n// TODO: redesign later to formalize cross-slice dependencies.\n// just don't recreate immutable state as that would create inmemory\n// blocks of blocks and quad memory usage.\n// The size of a swarm will always be limited by the slowest node.\n// TODO: deprecate this slice, it's sole function is make\n// own-peerId available to other slices.\nmodule.exports.ProfileCtrl = function ProfileCtrl (pubKeyGetter) {\n  let peerId = null\n  return {\n    name: 'peer',\n    initialValue: mkProfile(),\n    filter ({ block }) {\n      peerId = peerId || pubKeyGetter()\n      if (!peerId) return 'Cannot process block without knowing own identity'\n      if (!block.key.equals(peerId)) return true // Ignore non self-authored blocks\n      const data = decodeBlock(block.body)\n      if (data.type !== TYPE_PROFILE) return true // Ignore non-profile blocks.\n      return validateProfile(data)\n    },\n    reducer ({ block, state, root }) {\n      return { ...root.peers[btok(peerId)] }\n    },\n\n    // This slice runs AFTER the peers slice\n    trap ({ code, payload, root, state }) {\n      const rootPeer = root.peers[btok(peerId)]\n      let copy = false\n      switch (code) {\n        case EV_CHAT_END: {\n          const cid = btok(payload)\n          const chat = root.chats.chats[cid]\n          copy = peerId.equals(chat.a) ||\n            peerId.equals(chat.b)\n        } break\n        case EV_BALANCE_CREDIT:\n        case EV_BALANCE_DEBIT:\n        case EV_ADD_SCORE:\n          copy = peerId.equals(payload.target)\n          break\n      }\n      if (copy) return { ...rootPeer }\n    }\n  }\n}\n\nfunction mkProfile (pk) {\n  return {\n    name: null,\n    picture: null,\n    pk,\n    tagline: null,\n    date: null,\n    sex: 2,\n    sig: null,\n    expiresAt: 0,\n    state: ACTIVE,\n    balance: 0, // Current amount of  Decents\n    score: 0 // score equals total acquired  through rewards\n  }\n}\n\nfunction validateProfile (data) {\n  // Validate profile content\n  if (!data.picture) return 'Profile Picture missing'\n  if (Buffer.isBuffer(data.picture)) { // webp support\n    // TODO: validate webp headers && bitmap offsets?\n    if (data.picture.length > 21000) return 'Picture should be less than 21kB'\n  } else if (typeof data.picture !== 'string' || data.picture.length > 10) {\n    return 'Picture should be an emoji'\n  }\n\n  if (containsURL(data.tagline)) return 'URL in tagline not permitted'\n  if (containsURL(data.name)) return 'Links in name is not permitted'\n  if (data.name.match(/^\\s/)) return 'Name must contain only letters or numbers'\n  if (typeof data.age !== 'number') return 'Age must be a number'\n  if (data.age < 18) return 'Kids not allowed into bars'\n  if (!~[0, 1, 2].indexOf(data.sex)) return 'Sex should be 0: female, 1: male, 2: other'\n\n  return false // All good, accept block\n}\n\nfunction containsURL (s) {\n  if (typeof s !== 'string') return false\n  if (s.match('://')) return true\n  return false\n}\n\n\n/**\n * Low-level state helper,\n * tradeoff signaling for realtime computation\n */\nfunction stateOfPeer (peer, vibes, chats) {\n  if (peer.state === EXPIRED) return EXPIRED\n  if (peer.state !== ACTIVE) throw new Error(`InvalidState: ${peer.state}`)\n  const pid = peer.pk.toString('hex')\n  const cid = vibes.seen[pid]?.toString('hex')\n  if (!cid) return ACTIVE\n  const match = vibes.matches[cid]\n  if (!match) throw new Error('MentalError')\n  if (match.state === 'rejected') return ACTIVE\n  if (match.state !== 'match') return PENDING\n  const chat = chats.chats[cid]\n  if (chat && chat.state === 'end') return ACTIVE\n  return LOCKED\n}\n\nmodule.exports.stateOfPeer = stateOfPeer\nmodule.exports.ACTIVE = ACTIVE\nmodule.exports.PENDING = PENDING\nmodule.exports.LOCKED = LOCKED\nmodule.exports.EXPIRED = EXPIRED\n","const {\n  TYPE_VIBE,\n  TYPE_VIBE_RESP,\n  TYPE_PROFILE,\n  TYPE_BYE_RESP,\n  TYPE_ITEMS,\n  TYPE_ACTIVATE,\n  EV_CHAT_END,\n  VIBE_REJECTED,\n  decodeBlock,\n  unseal\n} = require('../util')\nconst D = require('debug')('picochat:slices:vibes')\n\nconst {\n  vibe_timeout: TTL,\n  vibe_response_timeout: RESP_TTL\n} = require('../../config')\n\nclass VibeCtrl { // TODO: use same pattern as aother reducers instead of class\n  constructor (vibeTTL = TTL) {\n    this._sk = null\n    this._pk = null\n    this._reduceHasRun = false\n    this.ttl = vibeTTL\n    this.reducer = this.reducer.bind(this)\n  }\n\n  setKeys (peerId, { sk, pk }) {\n    if (this._sk) throw new Error('VibeBox secret has already been set')\n    if (this._reduceHasRun) throw new Error('Reducer has already run without box secret')\n    this._sk = sk\n    this._pk = pk\n    this._peerId = peerId\n  }\n\n  get name () { return 'vibes' }\n\n  get initialValue () {\n    return {\n      // Register to maintain flood rules/timers\n      seen: {},\n\n      // Register chatId\n      // ( ChatID is block.signature of first vibe )\n      // TODO: introducing this register creates incentive to mess with it.\n      // patch 3rd-party vibe-response by introducing a public hash(nonce) in init and reveal the nonce in reply\n      // this will most likely superseed the sent/received[] registers\n      matches: {},\n      own: []\n    }\n  }\n\n  filter ({ block, parentBlock, state }) {\n    const data = decodeBlock(block.body)\n    const { type } = data\n\n    // Silently ignore unrelated blocks\n    if (type !== TYPE_VIBE && type !== TYPE_VIBE_RESP) return true\n\n    const parentType = parentBlock && decodeBlock(parentBlock.body).type\n\n    // Assert vibes\n    if (type === TYPE_VIBE) {\n      // Ensure parent is either profile or own chat-head or tail?\n      if (\n        parentType !== TYPE_PROFILE &&\n        parentType !== TYPE_BYE_RESP &&\n        parentType !== TYPE_ITEMS &&\n        parentType !== TYPE_ACTIVATE // Continue where we left off\n      ) return `InvalidParent: ${parentType}`\n\n      const key = block.key.toString('hex')\n      // Reject block if vibe timestamp located in the future.\n      if (data.date > new Date().getTime()) return 'Vibe from the future'\n      const chatId = state.seen[key]\n      if (chatId) {\n        const m = state.matches[chatId.toString('hex')]\n        if (m.expiresAt >= Date.now()) return 'Only 1 active vibe allowed'\n      }\n    }\n\n    // Assert VibeResponses\n    if (type === TYPE_VIBE_RESP) {\n      // TODO: assert parent.nonce equals SHA(vibeRes.reveal)\n\n      // VibeResponses only allowed onto a Vibe\n      if (parentType !== TYPE_VIBE) return `InvalidParent: ${parentType}`\n      // TODO: return 'Expired' if match.expiresAt < now()\n    }\n    D('Accepting Vibe %h', block.sig)\n    return false // All good, accept block\n  }\n\n  // Reducer updates state with values from block\n  reducer ({ block, state, parentBlock, root, schedule }) {\n    const vibe = decodeBlock(block.body, 1)\n    const { type } = vibe\n    const chatId = type === TYPE_VIBE ? block.sig : block.parentSig\n    const key = chatId.toString('hex')\n    const rejected = VIBE_REJECTED.equals(vibe.box)\n\n    if (type === TYPE_VIBE) {\n      D('%s reducing vibe: %o %h', root.peer.name, !!state.matches[key], block.sig)\n      if (state.matches[key]) throw new Error('InternalError: Vibe already registered')\n      // Set lookup reference\n      state.seen[block.key.toString('hex')] = chatId\n      const match = state.matches[key] = mkMatch()\n      match.chatId = chatId\n      match.a = block.key\n      match.updatedAt = vibe.date\n      match.createdAt = vibe.date\n      match.expiresAt = vibe.date + TTL\n      match.state = 'wait'\n    } else { // type === TYPE_VIBE_RESP\n      const match = state.matches[key]\n      if (!match) throw new Error('InternalError: MatchNotFound')\n      match.response = block.sig\n      match.b = block.key\n      match.updatedAt = vibe.date\n      match.expiresAt = match.createdAt + RESP_TTL\n      match.state = rejected ? 'rejected' : 'match'\n    }\n\n    const peerId = root.peer.pk\n    const match = state.matches[key]\n\n    // Push sent vibes to \"own\" registry\n    if (type === TYPE_VIBE && peerId.equals(block.key)) state.own.push(chatId)\n\n    let decrypted = null\n    if (!rejected && !peerId.equals(block.key) && this._sk) { // Attempt decryption\n      try {\n        decrypted = unseal(vibe.box, this._sk, this._pk)\n      } catch (error) {\n        if (error.message !== 'DecryptionFailedError') throw error\n      }\n    }\n\n    if (decrypted) {\n      // Push decryptable received vibes/responses to \"own\" registry\n      if (!state.own.find(c => c.equals(chatId))) state.own.push(chatId)\n      match.remoteBox = decrypted\n    }\n\n    this._reduceHasRun = true\n    schedule('chat', match.chatId, match.expiresAt)\n    return state // return new state\n  }\n\n  trap ({ code, payload, root, state }) {\n    switch (code) {\n      case EV_CHAT_END: {\n        const strkey = payload.toString('hex')\n        const chat = root.chats.chats[strkey]\n        delete state.seen[chat.a.toString('hex')] // Release vibe-block\n        // delete state.matches[strkey] // remove match to please single-vibe filter.\n        // Question; should state.own be cleared here??\n        // i know too little about what to do with completed chats.\n        // they should most likely be archived.\n        D('%s Peer Unseen %h => %h', root.peer.name, chat.a.toString('hex'), payload)\n      } break\n      default:\n        return // return undefined, (interrupt ignored/state-unchanged)\n    }\n    return state\n  }\n}\n\nconst mkMatch = () => ({\n  chatId: null, // tail blocksig\n  response: null, // head blocksig\n  updatedAt: 0, // Counter for garbage collection\n  // Participants/Peers\n  a: null,\n  b: null,\n  remoteBox: null\n})\n\nmodule.exports = VibeCtrl\n","const D = require('debug')('picochat:slice:chat')\nconst {\n  TYPE_VIBE_RESP,\n  TYPE_MESSAGE,\n  TYPE_BYE,\n  TYPE_BYE_RESP,\n  EV_CHAT_END,\n  PASS_TURN,\n  decodeBlock\n} = require('../util')\nconst { blockToGlyph } = require('../game')\n\nfunction ConversationCtrl (opts = {}) {\n  const {\n    ttl: ChatTimeout,\n    blockReward: BlockReward,\n    health: InitialHealth,\n    regenerate: RegenerateAmount\n  } = {\n    ttl: 3 * 60 * 1000, // 3 minutes\n    blockReward: 60 * 1000, // Each successfull block adds 1 minute\n    health: 3, // <3 <3 <3\n    regenerate: 0.3,\n    ...opts\n  }\n\n  const now = () => new Date().getTime()\n  const mkChat = chatId => ({\n    id: chatId,\n    head: null,\n    messages: [],\n    expiresAt: 0,\n    updatedAt: 0,\n    state: 'active',\n    a: null, // Peer id\n    b: null, // Peer id\n    hp: InitialHealth, // Mana/ Conversation health\n    aEnd: -1,\n    bEnd: -1,\n    graph: ''\n  })\n\n  const mkStats = peerId => ({\n    peerId,\n    lastSeen: 0,\n    nMessages: 0,\n    nExhausted: 0,\n    nPassed: 0,\n    nEnded: 0,\n    nStarted: 0,\n    blocks: 0,\n    blockSize: 0,\n    hpRegenerated: 0\n  })\n\n  return {\n    name: 'chats',\n\n    initialValue: {\n      chats: {},\n      heads: {},\n      own: [],\n      stats: {} // Indexed by peer\n    },\n\n    filter ({ block, parentBlock, state, root }) {\n      const data = decodeBlock(block.body)\n      const { type } = data\n      if (!~[TYPE_MESSAGE, TYPE_BYE, TYPE_BYE_RESP].indexOf(type)) return true\n      const parentType = parentBlock && decodeBlock(parentBlock.body).type\n      D('[%s] FilterOP: %s %h <-- %s %h', root.peer.name, parentType, parentBlock.sig, type, block.sig)\n      if (\n        // message onto message or vibe_resp\n        (type === TYPE_MESSAGE && parentType !== TYPE_MESSAGE && parentType !== TYPE_VIBE_RESP) ||\n        // bye onto message\n        (type === TYPE_BYE && parentType !== TYPE_MESSAGE) ||\n        // bye-response onto bye\n        (type === TYPE_BYE_RESP && parentType !== TYPE_BYE)\n      ) return `Invalid parent type: ${parentType}`\n\n      const from = block.key\n      if (from.equals(parentBlock.key)) return 'MonologueNotAllowed'\n\n      // Reject 3rdParty blocks\n      if (parentType === TYPE_VIBE_RESP) {\n        // need to Lookup in matches registry\n        const chatId = parentBlock.parentSig\n        const match = root.vibes.matches[chatId.toString('hex')]\n        if (!match) return true // Unknown conversation TODO: cache block for later (partially available chain)\n        if (match.state !== 'match') return 'MessagingNotAllowed'\n        if (![match.a, match.b].find(k => from.equals(k))) return 'NotYourConversation'\n        if (match.expiresAt < now()) return 'ConversationTimeout'\n      } else { // TYPE_MESSAGE || TYPE_BYE\n        const chatId = state.heads[block.parentSig.toString('hex')]\n        if (!chatId) return 'ConversationNotFound'\n        const chat = state.chats[chatId.toString('hex')]\n        const nextAuthor = chat.mLength % 2 ? chat.b : chat.a\n        if (!from.equals(nextAuthor)) return 'NotYourConversation'\n        if (chat.expiresAt < now()) return 'ConversationTimeout'\n        if (type !== TYPE_BYE_RESP && chat.state !== 'active') return 'ConversationEnded'\n        else if (type === TYPE_BYE_RESP && chat.state !== 'finalizing') return 'InvalidState'\n      }\n      return false // All good, accept block\n    },\n\n    reducer ({ block, parentBlock, root, state, schedule, signal }) {\n      const data = decodeBlock(block.body)\n      const { type } = data\n      const parentType = decodeBlock(parentBlock.body).type\n      const peerId = root.peer.pk\n      const from = block.key\n      let chatId = null\n\n      if (parentType === TYPE_VIBE_RESP) chatId = parentBlock.parentSig\n      else chatId = state.heads[block.parentSig.toString('hex')]\n\n      const indexKey = chatId.toString('hex')\n\n      // Initialize entry from vibes.matches register\n      if (parentType === TYPE_VIBE_RESP) {\n        const match = root.vibes.matches[indexKey]\n        const chat = mkChat(chatId)\n        chat.a = match.a\n        chat.b = match.b\n        chat.remoteBox = match.remoteBox\n        chat.createdAt = match.createdAt\n        chat.mLength = 0\n        state.chats[indexKey] = chat\n      }\n\n      const chat = state.chats[indexKey]\n\n      chat.updatedAt = data.date\n      chat.mLength++ // Always availble compared to messages array that's only indexed for own conversations\n      chat.expiresAt = chat.createdAt + ChatTimeout + (chat.mLength * BlockReward)\n      chat.graph += blockToGlyph(block, block.key.equals(chat.a))\n\n      const authorId = block.key.toString('hex')\n      let stats = state.stats[authorId]\n      if (!stats) {\n        stats = state.stats[authorId] = mkStats(block.key)\n        stats.nStarted++\n        D('[%s] Initating new stats for %h', root.peer.name, block.key)\n      }\n      stats.lastSeen = Math.max(stats.lastSeen, data.date)\n      stats.nMessages++\n      stats.blocks++\n      stats.blockSize += block.body.length\n\n      if (TYPE_MESSAGE === type) {\n        const turnPassed = PASS_TURN.equals(data.content)\n        turnPassed && stats.nPassed++\n        if (turnPassed && --chat.hp < 1) {\n          chat.state = 'exhausted'\n          stats.nExhausted++\n        } else if (!turnPassed) {\n          // Regenerate\n          chat.hp = Math.min(RegenerateAmount + chat.hp, InitialHealth)\n          stats.hpRegenerated += RegenerateAmount\n        }\n\n        chat.own = !![chat.a, chat.b].find(k => peerId.equals(k))\n        if (chat.own) {\n          // Push messages\n          const isSent = peerId.equals(from)\n          chat.messages.push({\n            type: isSent ? 'sent' : 'received',\n            date: data.date,\n            content: !isSent ? data.content : null, // contents are encrypted, decrypt here?\n            pass: turnPassed,\n            sig: block.sig // when type is sent, use signature to lookup decrypted copy of contents.\n          })\n        }\n\n        // Insert into \"own\" register\n        if (chat.own && !state.own.find(b => b.equals(chatId))) state.own.push(chatId)\n      } else {\n        if (TYPE_BYE === type) chat.state = 'finalizing'\n        else chat.state = 'end' // Assume BYE_RESPONSE\n        // Set gesture\n        if (chat.a.equals(from)) chat.aEnd = data.gesture\n        else chat.bEnd = data.gesture\n        D('ENDING: ', root.peer.name, type, chat.state, chat.aEnd, chat.bEnd)\n      }\n\n      if (chat.state === 'end') {\n        const aStat = state.stats[chat.b.toString('hex')]\n        const bStat = state.stats[chat.a.toString('hex')]\n        aStat.nEnded++\n        bStat.nEnded++\n        signal(EV_CHAT_END, chatId)\n      }\n\n      D('[%s] Conversation(%h) state: %s mLength: %d, head: %h => %h', root.peer.name, chatId, chat.state, chat.mLength, block.parentSig, block.sig)\n      // Bump head of findChatIdBy(parentSig) index\n      delete state.heads[block.parentSig.toString('hex')]\n      state.heads[block.sig.toString('hex')] = chatId\n      chat.head = block.sig\n      schedule('chat', chat.id, chat.expiresAt)\n      return state\n    }\n  }\n}\n\n/*\n * Some time has passed, the pass feature is decidedly\n * silence, what's the meaning of silence? check game.js\n */\n\nmodule.exports = ConversationCtrl\n","const assert = require('nanoassert')\nconst GROUPS = {}\nconst ITEMS = []\nconst _names = {}\n\n/* The Items Database\n* ID ranges:\n*\n* 0xD000 - 0xD0FF # non-purchasable special stuff.\n* 0xD100 - 0xD1FF # bartender purchasable with \n* 0xD200 - 0xD2ff # gear purchasable with \n*\n*\n* \"type\" prop:\n* - collectible: just a gimmick\n* - passive: effects while in inventory\n* - active: self toggle, has cooldown\n* - consumable: self use, can be attached to transfer effects to other peer on timeunlock\n* - attachment: consumed on timelock.\n*    - affects chat (minigames)\n*    - applies effect on timeunlock (give beer)\n*/\n\n// ----------- Drinks\nitem(0xD701, 'WATER')`\nname: Glass of Water\ntime: 60\nprice: 0\nshort: Stay hydrated\nimage: \ngroup: drinks\ntype: consumable\ndesc: |-\n  Disregarding the looks, it's a regular glass of\n  water.\n  Can be purchased once a Day\n`\n\nitem(0xD101)`\nname: Lager\ntime: 20\nshort: Cold, quenching\nprice: 200\nimage: \ntype: consumable\ngroup: drinks\ndesc: |-\n  Freshly brewed from the finest grains.\n  There's always more.\n`\n\nitem(0xD102)`\n  name: Kosmo\n  time: 18\n  short: Sweet, intoxicating\n  price: 300\n  mod: Random perk\n  image: \n  type: consumable\ngroup: drinks\n  desc: |-\n    Applies one random effect for the duration of the drink.\n\n    - One part moonlight\n    - Two parts autumn honey\n    - An orange stolen from a dream\n    - A leaf caught midair\n    You can barely taste the vodka\n`\n\nitem(0xD103)`\nname: White\ntime: 22\nshort: Dry refreshing\nprice: 320\nimage: \ngroup: drinks\ntype: consumable\ndesc:\n  slightly matured\n`\n\nitem(0xD104)`\nname: Stout\ntime: 30\nprice: 500\nmod: silence\nshort: Liquid darkness\nimage: \ntype: consumable\ngroup: drinks\ndesc: |-\n  Vibe disabled\n\n  The bitterness is intense with aftertones of\n  dark chocolate.\n  Not a lager\n`\n\nitem(0xD105)`\nname: Sparkly Wine\ntime: 15\nmod: 1.5X Rewards\nprice: 600\nshort: Proof of Prestige\nimage: \ntype: consumable\ngroup: drinks\ndesc:\n  Bob liked to show off, it was deeply embedded in his psyche.\n`\n\n// ----------- Misc\nitem(0xD100)`\nname: Tip\nimage: \nprice: 100\nshort: Boost feature development\ntype: passive\ngroup: misc\ndesc: |-\n  DecentLabs - Compressing the internet to fit in the palm of your hand.\n\n  Thank you for playing.\n`\n\nitem(0xD001)`\ntime: 60\nname: Verified Badge\nshort: Not a robot\ntype: passive\ngroup: misc\nsoulbind: pickup\nimage: \ndesc: |-\n  \"Don't collect what you can't protect\"\n\n  We only store your email for a short while to keep track of your purchases.\n`\nitem(0xD002)`\ntime: 80\nname: V.I.P. Ticket\nshort: Welcome to the Void\ntype: passive\ngroup: misc\nsoulbind: pickup\nimage: \ndesc: |-\n  Entrance-fee and complimentary drink included.\n`\n// Deprecated\nitem(0xD700)`\nname: Search Water\ntime: 10\nprice: 0\nshort: The developers best friend\nimage: \ngroup: misc\ncooldown: 500\ntype: attachment\ndesc: |-\n  Lorem ipsum dolor sit amet went on a long journey\n  but lorem forgot to bring a snack. So amet said\n  \"Don't worry bruh, I got you, I brought enough chocolate to bring down the entire mountain!\"\n  And so the adventure continued.\n`\n// ----------- GEAR\nitem(0xD200, 'BAB')`\nname: B.A.B.\nslot: head\nprice: 12\nmod: 1.1X rewards\nsoulbind: pickup\nshort: Never leave home without it\nimage: \ntype: active\ngroup: gear\ndesc: |-\n  Consecutive wins increases rewards +0.3X stacks upto 3X.\n  But lose and you'll lose your stacks and\n  get no reward for that game.\n\n  Life's a gamble trust Cosmos\n`\n\nitem(0xD201)`\nname: Fades\nslot: eyes\nprice: 38\nsoulbind: use\nmod: Silenced, Timestrech 3X\nshort: Lean back and enjoy your stay\nimage: \ntype: active\ngroup: gear\ndesc: |-\n  Vibe disabled and time flows 3X slower while active.\n  Relax, listen to the music, you're not in a hurry.\n`\n\nitem(0xD203)`\nname: Tic Tac Nano\nprice: 5\nshort: No talk, Play!\nmod: minigame\nimage: \ntype: attachment\ngroup: gear\ndesc: |-\n  Attach to vibe to challenge someone to a round of tic-tac-toe.\n`\n\nitem(0xD204)`\nname: Question Card\nprice: 7\nshort: Draw card, compare answers\nmod: minigame\nimage: \ntype: attachment\ngroup: gear\ndesc: |-\n  Attach to vibe to answer a random question,\n  answers revealed when both players have answered.\n`\n\nitem(0xD205)`\nname: Twin Bed\nimage: \nprice: 50\nshort: Just sleep, nothing else\ntype: attachment\nmod: sleep 6H\ngroup: gear\ndesc: |-\n  Had enough for one day?\n  Attach to vibe to put both players to sleep\n  and save your profile for tomorrow.\n`\n\nitem(0xD202)`\nname: Boom Deck 202\nslot: hands\nprice: 2400\nmod: DJ mode | TIMEFLOW 3X\nshort: Play the song of your people\nimage: \ntype: active\ngroup: gear\ndesc: |-\n  Take the DJ seat and broadcast your tunes.\n  But beware! Time flows 3X faster while active \n  Make sure to collect tips.\n`\n\n// TODO: port earlier prototypes to pico\nitem()`\nname: Super POH Turbo II\nshort: Insert Coin\nprice: 12\nimage: \ntype: collectible\ngroup: gear\ndesc: |-\n  Play a nervewrecking arcade featuring unique characters and combos.\n`\n\nitem()`\nname: Xorcery Offline\nshort: Crypts of Cryptography\nimage: \nprice: 60\ntype: collectible\ngroup: gear\ndesc: |-\n  Rougelike dungeon crawler, form your party and\n  explore the Crypts of Cryptography finding treasures\n  and monsters.\n`\n\n// --------- loader code\nfunction item (id, exportName) {\n  if (!id) return () => {}\n  const istr = 'Item#' + id.toString(16).toUpperCase()\n  assert(typeof ITEMS[id] === 'undefined', `Duplicate ${istr}`)\n  return (ml, ...args) => {\n    const lines = ml.join('').split('\\n')\n    const i = { id }\n    while (lines.length) {\n      const line = lines.shift().trim()\n      if (!line.length) continue\n      const [key, value] = line.split(':').map(s => s.trim())\n      if (key === 'desc') break\n      switch (key) {\n        case 'time':\n        case 'price':\n          i[key] = parseInt(value)\n          break\n        default:\n          i[key] = value\n      }\n    }\n    if (lines.length) i.desc = lines.map(i => i.trim()).join('\\n')\n    // validate\n    // Required fields\n    assert(i.name?.length, `${istr}: 'name' required`)\n    assert(i.short?.length, `${istr}: 'short' required`)\n    assert(i.image?.length, `${istr}: 'image' required`)\n    assert(i.desc?.length, `${istr}: 'desc' required`)\n\n    const validTypes = ['consumable', 'active', 'passive', 'attachment']\n    assert(i.type?.length, `${istr}: 'type' required`)\n    assert(~validTypes.indexOf(i.type), `${istr}: Invalid 'type'`)\n\n    const validGroups = ['drinks', 'gear', 'misc']\n    assert(i.type?.length, `${istr}: 'group' required`)\n    assert(~validGroups.indexOf(i.group), `${istr}: Invalid 'group'`)\n\n    if (i.time) assert(Number.isFinite(i.time), `${istr}: 'time' Invalid`)\n    if (i.price) { // Assume purchasable\n      assert(Number.isFinite(i.price), `${istr}: 'price' Invalid`)\n      // Reserved realworld currency range\n      i.irlPrice = id < 0xD200 && id >= 0xD100\n    }\n\n    // Index\n    ITEMS[id] = i\n    GROUPS[i.group] = GROUPS[i.group] || []\n    GROUPS[i.group].push(i)\n    if (exportName) _names[exportName] = id\n  }\n}\nmodule.exports = { ..._names, ITEMS, GROUPS }\n","const assert = require('nanoassert')\nconst { ITEMS, WATER } = require('./items.db')\nmodule.exports = class Transactions {\n  // static ACTION_CONJURE_WATER = 0 // Deprecated\n  static ACTION_OFFER = 1\n  static ACTION_NETWORK_PURCHASE = 2\n  static ACTION_ATTACHMENT = 3\n\n  static validate (transaction) {\n    if (!transaction) throw new Error('Must be an object')\n    const { t: type, p: payload } = transaction\n    let p\n    switch (type) {\n      case Transactions.ACTION_NETWORK_PURCHASE: {\n        const { i: item, q: quantity } = payload\n        assert(isPositiveInteger(item), 'p.i: ItemId missing')\n        assert(ITEMS[item], 'p.i: UnknownItem')\n        assert(item >= 0xD200, 'NotPurchasable')\n        assert(isInteger(quantity), 'p.q: Quantity missing')\n        if (item === WATER) assert(quantity === 1, 'p.q. One per customer')\n        p = { i: item, q: quantity }\n      } break\n      case Transactions.ACTION_OFFER: {\n        const { i: item, q: quantity } = payload\n        assert(isPositiveInteger(item), 'p.i: ItemId missing')\n        assert(ITEMS[item], 'p.i: UnknownItem')\n        assert(isInteger(quantity), 'p.q: Quantity missing')\n        p = { i: item, q: quantity }\n      } break\n      case Transactions.ACTION_ATTACHMENT:\n        assert(isPositiveInteger(payload), 'p: ItemId missing')\n        assert(ITEMS[payload], 'p: UnknownItem')\n        assert(~['attachment', 'consumable'].indexOf(ITEMS[payload].type), 'p: ItemNotAttachable')\n        p = payload\n        break\n      default:\n        assert(false, `UnknownTransaction: ${type}`)\n    }\n    return { t: type, p }\n  }\n}\n\nfunction isInteger (n) { return Number.isInteger(n) }\nfunction isPositiveInteger (n) { return Number.isInteger(n) && n >= 0 }\n","/** *                  *\n *   .  *\n *  /\\       *\n * /___\\ [Content Advisory Warning]\n *\n * Read at your own risk.\n * This file shortcircuits the left with the right\n * causing loss of sanity for the legally inclined.\n */\nconst {\n  btok,\n  decodeBlock,\n  EV_CHAT_END,\n  EV_BALANCE_CREDIT,\n  EV_BALANCE_DEBIT,\n  EV_ADD_SCORE, // Also adds time\n  TYPE_VIBE,\n  TYPE_VIBE_RESP,\n  TYPE_ITEMS,\n  TYPE_ACTIVATE,\n  VIBE_REJECTED\n} = require('../util')\nconst { now } = require('../../config')\nconst D = require('debug')('picochat:slices:inv')\nconst { ACTIVE, stateOfPeer } = require('./peers.reg')\nconst {\n  validate,\n  ACTION_OFFER,\n  ACTION_NETWORK_PURCHASE,\n  ACTION_ATTACHMENT\n} = require('../transactions')\nconst BARPK = Buffer.from('jWR6XgHjIeNA8xDtVtjOxdsUhgKzABQ75HHi30ab8X0=', 'base64')\nconst { ITEMS } = require('../items.db')\n// Shit this is so confusing already.\nfunction InventorySlice () {\n  return {\n    name: 'inv',\n    initialValue: {},\n\n    filter ({ block, root, state, HEAD }) {\n      const data = decodeBlock(block.body)\n      if (\n        data.type !== TYPE_ITEMS &&\n        data.type !== TYPE_ACTIVATE\n      ) return true\n      // validate peer state\n      const pid = btok(HEAD)\n      const peer = root.peers[pid]\n      const pState = stateOfPeer(peer, root.vibes, root.chats)\n      if (pState !== ACTIVE) return 'PeerBusy'\n\n      // Validate block\n      if (data.type === TYPE_ITEMS) {\n        const hasBarItems = data.items.find(i => i.id < 0xD200)\n        if (hasBarItems && !block.key.equals(BARPK)) return 'StampNotTrusted'\n        if (now() - data.date >= 60 * 60 * 1000) return 'DeliveryTimeout'\n      } else { // TYPE_ACTIVATE\n        if (!ITEMS[data.i]) return 'UnknownItem'\n        if (!~['consumable', 'active'].indexOf(ITEMS[data.i].type)) return 'CannotBeActivated'\n        const inv = state[pid]\n        if (!inv) return 'InventoryEmpty'\n        const item = inv[data.i]\n        if (!item) return 'ItemNotHeld'\n        if (item.qty <= 0) return 'OutOfStock'\n      }\n      return false\n    },\n\n    reducer ({ block, state, schedule, signal, HEAD }) {\n      const pid = btok(HEAD)\n      const data = decodeBlock(block.body)\n      // initialize peer inventory\n      const inv = initInv(state, pid)\n      if (data.type === TYPE_ITEMS) {\n        for (const item of data.items) { // uncrate items\n          const slot = initSlot(inv, item.id)\n          slot.qty++\n          slot.expiresAt = item.expiresAt\n          onPickup(HEAD, item.id, signal)\n          D('onPickup(%x, %x, %i)', HEAD, item.id, slot.qty)\n\n          /* TODO: schedule perishables to expire\n            if (item.expiresAt) {\n              schedule(item.expiresAt, `item|${item.id}|${pid}`)\n            }\n          */\n        }\n      } else { // TYPE_ACTIVATE\n        const { i } = data\n        const item = ITEMS[i]\n        const slot = initSlot(inv, i)\n        if (item.type === 'consumable') {\n          slot.qty--\n          slot.activatedAt = now()\n          // TODO: Rethink before proceed, inflation in time and score?\n          signal(EV_ADD_SCORE, { target: HEAD, amount: item.time })\n          signal(EV_BALANCE_CREDIT, { target: HEAD, amount: item.time })\n        } else { // type: active (can be toggled)\n          if (isActive(slot)) {\n            slot.deactivatedAt = now()\n            // TODO: Apply deactivation effects\n            console.warn('Item deactivation effects not implemented')\n          } else {\n            slot.activatedAt = now()\n            // TODO: Apply activation effects\n            console.warn('Item activation effects not implemented')\n          }\n        }\n        // onActivate(HEAD, item.id, signal)\n        D('onActivate(%x, %x, %i)', HEAD, item, slot.qty)\n      }\n      return state\n    }, // Picochat is a social survival game with in the setting of a night club. It's powered by pico-blockchains.\n\n    trap ({ code, payload, root, state }) {\n      if (code !== EV_CHAT_END) return\n      const cid = btok(payload)\n      const pending = root.trs[cid]\n      if (!pending?.length) return\n      for (const op of pending) {\n        if (op.type !== 'item') continue\n        const inv = initInv(state, btok(op.target))\n        const slot = initSlot(inv, op.item)\n        slot.qty += op.qty\n        const tname = root.peers[btok(op.target)]?.name || op.target\n        D('[%s]onTrade(%h, %h, %i) => %i', root.peer.name, tname, op.item, op.qty, slot.qty)\n      }\n      return state\n    }\n  }\n}\n\nfunction initInv (state, pid) {\n  state[pid] = state[pid] || {}\n  return state[pid]\n}\n\nfunction initSlot (inv, id) {\n  inv[id] = inv[id] || {\n    id, // item id\n    qty: 0,\n    activatedAt: -1,\n    deactivatedAt: -1,\n    expiresAt: -1\n  }\n  return inv[id]\n}\n\nfunction isActive (slot) {\n  return !(slot.activatedAt === -1 || slot.activatedAt < slot.deactivatedAt)\n}\n\n// A slice holding pending transactions\n// and applying them on successfull timelock break\nfunction TransactionsSlice () {\n  return {\n    name: 'trs',\n    initialValue: {\n    },\n    // This slice, accepts VIBE_RESPONSES if and only if\n    // the VIBE was silently passed.\n    // it's wierd, transactions are validated on vibe, but\n    // state is mutated only after the vibe was accepted.\n    // I didn't notice it before but now i see that it's\n    // weird that decodes parentBlock\n    filter ({ block, parentBlock, root, state }) {\n      const { type, box, t: transactions } = decodeBlock(block.body)\n\n      // Validate transactions in VIBE\n      if (type === TYPE_VIBE) {\n        try {\n          for (const ta of transactions) {\n            const { t: type, p: payload } = validate(ta)\n            switch (type) {\n              case ACTION_OFFER: {\n                const sourcePid = btok(block.key)\n                const inv = root.inv[sourcePid]\n                if (!inv) return 'InventoryEmpty'\n                const item = inv[payload.i]\n                if (!item) return 'ItemNotHeld'\n                if (item.qty - payload.q < 0) return 'NegativeQuantity'\n              } break\n\n              case ACTION_NETWORK_PURCHASE: {\n                const { i, q } = payload\n                const item = ITEMS[i]\n                const sum = item.price * q\n                const target = btok(block.key)\n                if (root.peers[target].balance < sum) return 'InsufficientFunds'\n              }\n            }\n          }\n        } catch (err) { return err.message }\n        return true // Vibe looks good, silent ignore until VibeRes\n      }\n\n      if (type !== TYPE_VIBE_RESP) return true\n      if (VIBE_REJECTED.equals(box)) return true\n      return false\n    },\n\n    reducer ({ block, parentBlock, root, state }) {\n      const cid = btok(parentBlock.sig)\n      const { t: transactions } = decodeBlock(parentBlock.body)\n      const pending = state[cid] = []\n      for (const { t: type, p: payload } of transactions) {\n        switch (type) {\n          case ACTION_ATTACHMENT: {\n            const white = parentBlock.key\n            const black = block.key\n            const item = ITEMS[payload]\n            if (item.consumable) {\n              pending.push({\n                type: 'item',\n                item: payload.i,\n                qty: -payload.q,\n                target: white\n              })\n            }\n            // TODO: what to do if item has no boost time?\n            pending.push({\n              type: 'credit',\n              target: black,\n              amount: item.time\n            })\n          } break\n          case ACTION_OFFER: // Swap ownership\n            pending.push({\n              type: 'item',\n              item: payload.i,\n              qty: payload.q,\n              target: block.key // black\n            })\n            pending.push({\n              type: 'item',\n              item: payload.i,\n              qty: -payload.q,\n              target: parentBlock.key // white\n            })\n            break\n          case ACTION_NETWORK_PURCHASE: {\n            const white = parentBlock.key\n            const black = block.key\n            const tname = root.peers[btok(white)]?.name || white\n            D('[%s]txBuy(%h, %h, %i) => %i', root.peer.name, tname, payload.i, payload.q)\n            const item = ITEMS[payload.i]\n            pending.push({ type: 'debit', target: white, amount: item.price })\n            pending.push({ type: 'credit', target: black, amount: item.price * 0.02 }) // reward 2% of minted value\n            pending.push({\n              type: 'item',\n              item: payload.i,\n              qty: payload.q,\n              target: white\n            })\n            // TODO: pending.push( item.onPickup effects)\n          } break\n        }\n      }\n      return state\n    },\n\n    trap ({ code, payload, root, state }) {\n      if (code !== EV_CHAT_END) return\n      const cid = btok(payload)\n      delete state[cid] // Clear out pending transactions\n      return state\n    }\n  }\n}\n\n/**\n * TODO: lookup stats in ../../items.js\n */\nfunction onPickup (pid, item, signal) {\n  switch (item) {\n    case 0xD001: { // badge\n      const amount = ITEMS[0xD001].time\n      signal(EV_BALANCE_CREDIT, { target: pid, amount })\n      signal(EV_ADD_SCORE, { target: pid, amount })\n    } break\n  }\n}\nmodule.exports = {\n  InventorySlice,\n  TransactionsSlice\n}\n","const D = require('debug')('picochat:mod:chat')\nconst {\n  TYPE_MESSAGE,\n  TYPE_BYE,\n  TYPE_BYE_RESP,\n  PASS_TURN,\n  PEACE, LOVE,\n  UNDERSTANDING,\n  seal,\n  unseal,\n  toBuffer\n} = require('../util')\nconst { feedToGraph } = require('../game')\n\nconst { combine, mute, init, gate } = require('piconuro')\n\n/* Source of truth: Chat States\n *\n  | STATE      | DESCRIPTION                           |\n  |------------+---------------------------------------|\n  | loading    | chat found, register join in progress |\n  | error      | Failed to produce neuron              |\n  | active     | Chat in progress                      |\n  | rejected   | Vibe was rejected                     |\n  | expired    | Chat ran out of time                  |\n  | finalizing | One of players has ended              |\n  | end        | Second player responded to bye        |\n */\n\n/* A reactive store whose value is conversation object\n * containing all then necesarry tidbits and bound actions\n * to progress the conversation\n */\nmodule.exports = function ChatModule () {\n  return {\n    $chats () {\n      // For now just return list of vibes with 'match' state\n      return mute(\n        this.$vibes(),\n        vibes => vibes.filter(v => v.state === 'match')\n      )\n    },\n\n    $chat (chatId) {\n      chatId = toBuffer(chatId)\n      let localPair = null\n\n      // Actions\n      const _send = async (message, pass = false) => {\n        if (!cache.myTurn) throw new Error('NotYourTurn')\n        if (!pass && typeof message !== 'string') throw new Error('Message should be a string')\n        if (!pass && !message.length) throw new Error('EmptyMessage')\n        const pk = await this._getRemoteChatKey(chatId) // Remote Public Key\n\n        // Not sure which feed load is correct. loadFeed is def more efficient.\n        const branch = await this.repo.loadFeed(cache.head)\n        // const branch = await this.loadChat(chatId) // await this.repo.loadFeed(cache.head)\n\n        const content = pass ? PASS_TURN : seal(Buffer.from(message), pk)\n        // console.log('Appending message to', feedToGraph(branch))\n        await this.createBlock(branch, TYPE_MESSAGE, { content })\n        // Branch \"hopefully\" contains new block, if not use return of createBlock() in future\n        if (!pass) await this._setMessageBody(branch.last.sig, Buffer.from(message))\n      }\n      const send = async message => _send(message)\n      const pass = async () => {\n        if (!cache.myTurn) throw new Error('NotYourTurn')\n        return _send(0, true)\n      }\n\n      const bye = async gesture => {\n        if (!cache.myTurn) throw new Error('NotYourTurn')\n        if (!~[PEACE, LOVE, UNDERSTANDING].indexOf(gesture)) throw new Error('InvalidGesture')\n        if (!~['active', 'finalizing'].indexOf(cache.state)) throw new Error('InvalidState')\n\n        // loadFeed() fails tests. cached head seems outdated.\n        const branch = await this.loadChat(chatId) // await this.repo.loadFeed(cache.head)\n        if (!branch) return console.error('branch dissapeared, expected head sig:', cache.head?.toString('hex'))\n\n        await this.createBlock(branch, cache.state === 'active' ? TYPE_BYE : TYPE_BYE_RESP,\n          {\n            gesture\n            // TBD\n          }\n        )\n      }\n      const chat = {\n        id: chatId,\n        state: 'loading',\n        initiator: false,\n        myTurn: null,\n        peerId: null,\n        peer: null,\n        mLength: 0,\n        messages: [],\n        updatedAt: 0,\n        createdAt: 0,\n        expiresAt: 0,\n        health: -1,\n        errorMessage: null,\n        head: null,\n        send,\n        pass,\n        bye\n      }\n      let cache = chat\n      const computeChat = async ([vibe, chats]) => {\n        const lChat = chats.chats[chatId.toString('hex')]\n\n        // All conversations must start with a vibe\n        if (!vibe || vibe.state === 'error') {\n          chat.state = 'error'\n          chat.errorMessage = 'ChatNotFound'\n          return chat // TODO return  ERR_CHAT_NOT_FOUND causes test-fail\n        }\n        // let vibe load before processing chat\n        if (vibe.state === 'loading') return chat\n\n        chat.head = vibe.head\n        if (vibe.state === 'match') chat.state = 'active'\n        else if (vibe.state === 'rejected') chat.state = 'rejected'\n        chat.createdAt = lChat ? lChat.createdAt : vibe.createdAt\n        chat.updatedAt = lChat ? lChat.updatedAt : vibe.updatedAt\n        chat.expiresAt = lChat ? lChat.expiresAt : vibe.expiresAt\n        chat.peerId = vibe.peerId\n        chat.peer = vibe.peer\n        chat.initiator = vibe.initiator\n        chat.myTurn = vibe.myTurn\n        chat.health = vibe.health\n\n        if (!lChat) return chat\n        chat.head = lChat.head\n        chat.graph = lChat.graph\n        // chat.hgraph = rewrite(lChat.graph) // rewrite where needed for now\n\n        // Update headers\n        chat.state = lChat.state\n        if (chat.state === 'active' && chat.expiresAt < Date.now()) chat.state = 'expired'\n\n        chat.mLength = lChat.mLength\n\n        // Skip message decryption if no new messages available\n        if (chat.messages.length === lChat.messages.length) return chat\n        // Decrypt messages\n        try {\n          if (!localPair) localPair = await this._getLocalChatKey(chatId)\n          chat.messages = [...chat.messages] // copy message array\n          // loop through unread messages\n          for (let i = chat.messages.length; i < lChat.messages.length; i++) {\n            const msg = { ...lChat.messages[i] } // copy lowlevel message\n            if (!msg.pass) {\n              if (msg.type === 'received') {\n                msg.content = unseal(msg.content, localPair.sk, localPair.pk).toString()\n              } else {\n                msg.content = await this._getMessageBody(msg.sig)\n              }\n            } else msg.content = PASS_TURN.toString()\n            chat.messages[i] = msg\n          }\n        } catch (err) { console.error('Message decryption failed', err) }\n        cache = chat\n        return chat\n      }\n      return gate(\n        init(chat,\n          mute(\n            combine(\n              this._vibe(chatId),\n              s => this.store.on('chats', s)\n            ),\n            computeChat\n          )\n        )\n      )\n    },\n\n    async loadChat (chatId) {\n      chatId = toBuffer(chatId)\n      const str = chatId.toString('hex')\n      let head = null\n      const v = this.store.state.vibes.matches[str]\n      head = v?.response || v?.chatId\n      if (!v) D('vibe does not exist for chatId:', str)\n\n      const c = this.store.state.chats.chats[str]\n      if (!v && !c) D('conversation not found %h', chatId)\n      head = c?.head || head\n      if (!head) return\n      const search = await this._tracePath(head)\n      return search.feed\n    },\n\n    async _inspectChat (chatId, dump = false) {\n      const f = await this.loadChat(chatId)\n      console.log(feedToGraph(f))\n      if (dump) f.inspect()\n    }\n  }\n}\n","const { SIGNATURE_SIZE } = require('picofeed')\nconst { toBuffer } = require('../util')\n\nmodule.exports = function BufferedRegistry () {\n  const timeout = 5000\n  const pending = {}\n  return {\n    // - Buffered versions of write and read registry\n    async _writeReg (key, value) {\n      await this.repo.writeReg(key, value)\n      if (!pending[key.toString()]) return\n      const { set, timerId } = pending[key.toString()]\n      delete pending[key.toString()]\n      clearTimeout(timerId)\n      set(value)\n    },\n\n    async _readReg (key) {\n      const value = await this.repo.readReg(key)\n      if (value) return value\n      if (pending[key.toString()]) return pending[key.toString()].promise\n      let set = null\n      let timerId = null\n      const promise = new Promise((resolve, reject) => {\n        set = resolve\n        timerId = setTimeout(() => {\n          delete pending[key.toString()]\n          reject(new Error('BufferedReadTimedOut'))\n        }, timeout)\n      })\n      if (!set) throw new Error('ConcurrencyError')\n      pending[key.toString()] = { promise, set, timerId }\n      return promise\n    },\n\n    // -- Conversation encryption-key management\n    async _storeLocalChatKey (chatId, msgBox) {\n      const CONVERSATION_PREFIX = 67 // Ascii 'C'\n      // const CONVERSATION_PREFIX = 99 // Ascii 'c'\n      const vLength = msgBox.sk.length + msgBox.pk.length\n      if (vLength !== 64) throw new Error(`Expected box keypair to be 32bytes each, did algorithm change?: ${vLength}`)\n      chatId = toBuffer(chatId)\n      if (chatId.length !== SIGNATURE_SIZE) throw new Error('Expected chatId to be a block signature')\n\n      const value = Buffer.allocUnsafe(msgBox.sk.length + msgBox.pk.length)\n      msgBox.sk.copy(value)\n      msgBox.pk.copy(value, msgBox.sk.length)\n      const key = Buffer.allocUnsafe(SIGNATURE_SIZE + 1)\n      chatId.copy(key, 1)\n      key[0] = CONVERSATION_PREFIX\n      return await this._writeReg(key, value)\n    },\n\n    async _getLocalChatKey (chatId) {\n      const CONVERSATION_PREFIX = 67 // Ascii 'C'\n      if (typeof chatId === 'string') chatId = Buffer.from(chatId, 'hex') // Attempt normalize to buffer\n      chatId = toBuffer(chatId)\n      if (chatId.length !== SIGNATURE_SIZE) throw new Error('Expected chatId to be a block signature')\n\n      const key = Buffer.allocUnsafe(SIGNATURE_SIZE + 1)\n      chatId.copy(key, 1)\n      key[0] = CONVERSATION_PREFIX\n      const value = await this._readReg(key)\n      if (!value) throw new Error('BoxPairNotFound')\n      const box = {\n        pk: value.slice(32),\n        sk: value.slice(0, 32)\n      }\n      return box\n    },\n\n    async _getRemoteChatKey (chatId) {\n      const key = chatId.toString('hex')\n      const vibe = this.store.state.vibes.matches[key]\n      if (!vibe) throw new Error('ConversationNotFound')\n      if (!vibe.remoteBox) throw new Error('BoxPublicKeyNotAvailable')\n      return vibe.remoteBox\n    },\n\n    // -- Encrypted messages can only be decrypted by receiver\n    // hence we need to store a copy of each message locally (might add some local encryption to it later)\n    async _setMessageBody (sig, message) {\n      const CONVERSATION_PREFIX = 77 // Ascii 'M'\n      sig = toBuffer(sig)\n      if (!Buffer.isBuffer(sig) || sig.length !== SIGNATURE_SIZE) throw new Error('Expected chatId to be a block signature')\n      const key = Buffer.allocUnsafe(SIGNATURE_SIZE + 1)\n      sig.copy(key, 1)\n      key[0] = CONVERSATION_PREFIX\n      return await this._writeReg(key, toBuffer(message))\n    },\n\n    async _getMessageBody (sig) {\n      const CONVERSATION_PREFIX = 77 // Ascii 'M'\n      sig = toBuffer(sig)\n      if (!Buffer.isBuffer(sig) || sig.length !== SIGNATURE_SIZE) throw new Error('Expected chatId to be a block signature')\n      const key = Buffer.allocUnsafe(SIGNATURE_SIZE + 1)\n      sig.copy(key, 1)\n      key[0] = CONVERSATION_PREFIX\n      const msg = await this._readReg(key)\n      if (!msg) throw new Error('MessageNotFound')\n      return msg.toString()\n    }\n  }\n}\n","const D = require('debug')('picochat:mod:gc')\nconst { EXPIRED } = require('../slices/peers.reg.js')\nconst REG_TIMER = 116 // 't'\n\nmodule.exports = function GarbageCollectModule (store) {\n  const repo = store.repo\n  let timerId = null\n  function schedule (type, id, date) {\n    const key = mkKey(date)\n    // console.info('Scheduing removal', type, new Date(date))\n    repo._db.put(key, packValue(type, id))\n      .catch(error => console.error('Failed queing GC: ', error))\n  }\n\n  // Guerilla-patch store reducers to include the gc function.\n  for (const slice of store._stores) {\n    slice._originalReducer = slice.reducer\n    slice.reducer = ctx => slice._originalReducer({\n      ...ctx,\n      schedule\n    })\n  }\n\n  return {\n    async _collectGarbage (now) {\n      D('Locking store')\n      const unlock = await store._waitLock()\n      try {\n        const res = await collectGarbage.bind(this)(now)\n        unlock()\n        return res\n      } catch (err) {\n        unlock()\n        throw err\n      }\n    },\n\n    startGC (interval = 3 * 1000) {\n      if (!this.ready || timerId) return\n      timerId = setInterval(this._collectGarbage.bind(this), interval)\n    },\n\n    stopGC () {\n      if (!timerId) return\n      clearInterval(timerId)\n      timerId = null\n    }\n  }\n\n  async function collectGarbage (now = Date.now()) {\n    D('Starting collecting garbage...')\n    const pending = await tickQuery(repo._db, now)\n    D('Fetched pending from store:', pending.length)\n    let mutated = new Set()\n    const segments = []\n    for (const p of pending) {\n      const { type, id } = unpackValue(p.value)\n      if (!type) throw new Error('GC OP missing')\n      await sweep({ // TOO PHAT CONTEXT\n        now,\n        id,\n        gcType: type,\n        rootState: store.state,\n        didMutate: n => mutated.add(n),\n        drop: head => segments.push([head, type === 'chat' ? id : null])\n      })\n    }\n    const evicted = []\n    for (const [ptr, segmentId] of segments) {\n      // const owner = await this.repo._traceOwnerOf(ptr) // repo.ownerOf(ptr)\n      try {\n        const s = await this._tracePath(ptr)\n        if (segmentId) { // Delete a chat/vibe off a user-profile\n          if (!segmentId.equals(s.chatId)) throw new Error('InternalError: Attempted to evict wrong segment')\n          const d = await this.repo.rollback(s.keys[0], s.heads[0])\n          evicted.push(d)\n        } else { // Clear out stale profiles\n          evicted.push(await this.repo.rollback(s.keys[0]))\n        }\n      } catch (err) {\n        if (err.message === 'FeedNotFound') {\n          D('RollbackFailed, Feed already gone', err)\n        } else console.error('Rollback failed', err)\n      }\n    }\n    // notify all affected stores\n    mutated = Array.from(mutated)\n    store._notifyObservers(mutated)\n    D('Stores mutated', mutated, 'segments evicted', evicted.length)\n    /// D(evicted.map(f => f.inspect(true)))\n    return { mutated, evicted }\n  }\n\n  // TODO: if this hack works, move the time-based GarbageCollector functionality to PicoStore\n  // and allow store.register() to include a sweep function, `expiresAt` prop becomes a first citizen.\n  function sweep ({ now, rootState, drop, gcType, id, didMutate }) {\n    if (gcType === 'chat') {\n      const match = rootState.vibes.matches[id.toString('hex')]\n      const chat = rootState.chats.chats[id.toString('hex')]\n      const head = chat?.head || match?.response || match?.chatId\n      let del = false\n      if (!head) return // nothing to do\n      const expiresAt = (chat?.expiresAt || match?.expiresAt || 0)\n      const hasExpired = expiresAt < now\n      D('Chat[%h] expired: %s, timeLeft: %d', id, hasExpired, expiresAt - now)\n      if (!hasExpired) return // not yet\n\n      // Clear chat registry\n      if (chat) {\n        const { chats, heads, own } = rootState.chats\n        delete chats[id.toString('hex')]\n        delete heads[head.toString('hex')]\n        const idx = own.findIndex(b => b.equals(id))\n        if (~idx) own.splice(idx, 1)\n        didMutate('chats')\n        del = true\n      }\n\n      // Clear vibes registry\n      if (match) {\n        // Restore state\n        const { seen, matches, own } = rootState.vibes\n        if (match.a && seen[match.a.toString('hex')]?.equals(id)) delete seen[match.a.toString('hex')]\n        if (match.b && seen[match.b.toString('hex')]?.equals(id)) delete seen[match.b.toString('hex')] // redundant?\n        delete matches[id.toString('hex')]\n        const idx = own.findIndex(b => b.equals(id))\n        if (~idx) own.splice(idx, 1)\n        didMutate('vibes')\n        del = true\n      }\n      if (del) drop(head, id) // id: chatId, head: lastBlock on chat\n    } else if (gcType === 'peer') {\n      const { peers } = rootState\n      const isSelf = rootState.peer.pk?.equals(id)\n      if (isSelf && rootState.peer.expiresAt < now) {\n        rootState.peer.state = EXPIRED // Not sure if should delete.\n        didMutate('peer')\n      }\n      const peer = peers[id.toString('hex')]\n      if (peer && peer.expiresAt < now) {\n        peer.state = EXPIRED\n        didMutate('peers')\n        if (!isSelf) {\n          delete peers[id.toString('hex')]\n          drop(peer.sig)\n        }\n      }\n    } else throw new Error(`Garbage collection for \"${gcType}\" not supported!`)\n  }\n}\n\n// TODO; Accuracy of browser might overwrite previous index,\n// add couple bytes of signature to end and maybe slice name\nfunction mkKey (date) {\n  const b = Buffer.alloc(9)\n  b.writeBigUInt64BE(BigInt(date), 1)\n  b[0] = REG_TIMER\n  return b\n}\n\nfunction packValue (sliceName, id) {\n  sliceName = Buffer.from(sliceName)\n  const sz = id.length\n  const b = Buffer.alloc(1 + sz + sliceName.length)\n  id.copy(b, 1)\n  sliceName.copy(b, sz + 1)\n  b[0] = sz\n  return b\n}\n\nfunction unpackValue (b) {\n  const len = b[0]\n  return {\n    type: b.slice(len + 1).toString(),\n    id: b.slice(1, len + 1)\n  }\n}\n\nasync function tickQuery (db, now) {\n  const query = {\n    gt: mkKey(0),\n    lt: mkKey(now)\n  }\n\n  const iter = db.iterator(query)\n  const result = []\n  while (true) {\n    try {\n      const [key, value] = await new Promise((resolve, reject) => {\n        iter.next((err, key, value) => {\n          if (err) reject(err)\n          else resolve([key, value])\n        })\n      })\n      if (!key) break\n      result.push({ key, value })\n    } catch (err) {\n      console.warn('Iterator died with an error', err)\n      break\n    }\n  }\n  await new Promise((resolve, reject) => {\n    iter.close(err => err ? reject(err) : resolve())\n  })\n  return result\n}\n","const D = require('debug')('picochat:mod:peers')\nconst Feed = require('picofeed')\nconst {\n  toBuffer,\n  boxPair,\n  btok,\n  TYPE_PROFILE,\n  KEY_SK,\n  KEY_BOX_LIKES_PK,\n  KEY_BOX_LIKES_SK\n} = require('../util')\nconst { mute, combine, init, gate, when } = require('piconuro')\nconst { EXPIRED, stateOfPeer } = require('../slices/peers.reg.js')\nconst ERR_PEER_NOT_FOUND = Object.freeze({ state: 'error', errorMessage: 'PeerNotFound' })\nconst PEER_PLACEHOLDER = Object.freeze({ state: 'loading' })\n\nmodule.exports = function PeersModule () {\n  let setHasProfile = null\n  const hasProfile = new Promise(resolve => { setHasProfile = resolve })\n  return {\n    __setHasProfile: setHasProfile, // Used by kernel.load()\n    hasProfile,\n    /**\n     * Publishes a profile block.\n     */\n    async register (profile, sk) {\n      sk = sk || Feed.signPair().sk\n      // Signing identity\n      this._secret = sk\n\n      // A box for love-letters\n      const box = boxPair()\n      this._vibeBox = box\n      this._vibeController.setKeys(this.pk, this._vibeBox)\n\n      await this.updateProfile(profile)\n      await this.repo.writeReg(KEY_SK, sk)\n      await this.repo.writeReg(KEY_BOX_LIKES_PK, box.pk)\n      await this.repo.writeReg(KEY_BOX_LIKES_SK, box.sk)\n      setHasProfile(true)\n    },\n\n    async profileOf (key) {\n      /*\n    const tail = await this.repo.tailOf(key)\n    const block = await this.repo.readBlock(tail)\n    if (!block) throw new Error('Profile not found, error due to profileOf is WIP; Need multihead resolve + network query')\n    if (!key.equals(block.key)) throw new Error('Wrong profile encountered')\n    const profile = decodeBlock(block.body)\n    if (profile.type !== TYPE_PROFILE) throw new Error('Tail is not a profile: ' + profile.type)\n    */\n      key = toPublicKey(key)\n      const profile = this.store.state.peers[key.toString('hex')]\n      if (!profile) {\n        D('Peer does not exist in registry %h', key)\n        // throw new Error('ProfileNotFound')\n        return ERR_PEER_NOT_FOUND\n      }\n      return profile\n    },\n\n    /**\n     * Creates a new profile-block\n     */\n    async updateProfile (profile) {\n      return await this.createBlock(TYPE_PROFILE, {\n        ...profile,\n        box: this._vibeBox.pk\n      })\n    },\n\n    /**\n     * Peer by id\n     * same as _peer but introduces gate and default placeholder\n     */\n    $peer (id) {\n      return gate(init(PEER_PLACEHOLDER, this._peer(id)))\n    },\n\n    _peer (id) { // raw neuron\n      try {\n        id = toPublicKey(id)\n      } catch (err) {\n        return init({\n          ...ERR_PEER_NOT_FOUND,\n          errorMessage: err.message\n        })\n      }\n\n      if (this.pk.equals(id)) return this.$profile()\n\n      const $peer = mute(\n        s => this.store.on('peers', s),\n        peers => peers[id.toString('hex')] || ERR_PEER_NOT_FOUND\n      )\n      const $chats = s => this.store.on('chats', s)\n      const $vibes = s => this.store.on('vibes', s)\n      const $inv = s => this.store.on('inv', s)\n      return mute(\n        combine($peer, $vibes, $chats, $inv),\n        computeProfile\n      )\n    },\n\n    /**\n     * List of known and active peers\n     */\n    $peers () {\n      // TODO: make LRU-backed $profiles singleton-neuron\n      const $peers = mute( // filter own profile.\n        this.store.on.bind(this.store, 'peers'),\n        peerMap => {\n          const list = Object.values(peerMap)\n          return this.pk\n            ? list.filter(p => !this.pk.equals(p.pk))\n            : list\n        }\n      )\n      const $chats = this.store.on.bind(this.store, 'chats')\n      const $vibes = s => this.store.on('vibes', s)\n      const $inv = s => this.store.on('inv', s)\n      // Higher level profiles neuron\n      const $profiles = gate(init([],\n        mute(\n          combine($peers, $vibes, $chats, $inv),\n          ([peers, vibes, chats, inv]) => peers\n            .map(p => computeProfile([p, vibes, chats, inv]))\n            .filter(p => p.state !== EXPIRED)\n        )\n      ))\n      return $profiles\n    },\n\n    /**\n     * Local peer/-profile\n     */\n    $profile () {\n      const $chats = s => this.store.on('chats', s)\n      const $vibes = s => this.store.on('vibes', s)\n      const $inv = s => this.store.on('inv', s)\n      const $loaded = when(this.boot())\n      return gate(init(PEER_PLACEHOLDER,\n        mute(\n          combine(\n            mute(\n              s => this.store.on('peer', s),\n              async peer => {\n                await hasProfile\n                return peer\n              }\n            ),\n            $vibes,\n            $chats,\n            $inv,\n            $loaded\n          ),\n          computeProfile\n        )\n      ))\n    }\n  }\n}\n\nfunction computeProfile ([peer, vibes, chats, inv]) {\n  if (!peer) return ERR_PEER_NOT_FOUND // TODO: most likely redundant\n  if (peer.date === null) return PEER_PLACEHOLDER // when neuron invoked pre-kernel load.\n  if (peer.state === 'error') return peer\n  if (!peer.pk) throw new Error('kernel.$peers invoked before kernel.load() finished?')\n  const pid = peer.pk.toString('hex')\n  const stats = chats.stats[pid] || {\n    nEnded: 0,\n    nStarted: 0,\n    nMessages: 0,\n    nPassed: 0,\n    nExhausted: 0\n  }\n  const extraTime = peer.score * 60 * 1000\n  const expiresAt = peer.expiresAt + extraTime\n  const pid2 = btok(peer.pk)\n  const inventory = Object.values(inv[pid2] || {})\n  const hasBadge = !!(inv[pid2] && inv[pid2][0xD001])\n  return {\n    ...peer,\n    stats,\n    expiresAt,\n    hasBadge,\n    state: expiresAt < Date.now() ? EXPIRED : stateOfPeer(peer, vibes, chats),\n    inventory\n  }\n}\n\nfunction toPublicKey (key) {\n  if (!key ||\n    !(\n      (Buffer.isBuffer(key) && key.length === 32) ||\n      (typeof key !== 'string' && key.length === 64)\n    )\n  ) {\n    throw new Error(`PublicKey expected got \"${key}\"`)\n  }\n  return toBuffer(key)\n}\n\nmodule.exports.PEER_PLACEHOLDER = PEER_PLACEHOLDER\nmodule.exports.ERR_PEER_NOT_FOUND = ERR_PEER_NOT_FOUND\n","const Feed = require('picofeed')\nconst {\n  TYPE_VIBE,\n  TYPE_VIBE_RESP,\n  VIBE_REJECTED,\n  toBuffer,\n  seal,\n  boxPair\n} = require('../util')\nconst { mute, combine, gate, init, until } = require('piconuro')\nconst { PEER_PLACEHOLDER } = require('./peers.mod')\nconst Transactions = require('../transactions')\nconst D = require('debug')('picochat:mod:vibes')\n\nmodule.exports = function VibesModule () {\n  return {\n    /**\n     * Sends a vibe to a peer giving initiating a private\n     * channel for communication.\n     * params:\n     * - peerId {SignaturePublicKey} a peer's signing key\n     */\n    async sendVibe (peerId, transactions = []) {\n      peerId = toBuffer(peerId)\n      if (this.pk.equals(peerId)) throw new Error('SelfVibeNotAllowed')\n      // Don't sendVibes to peers waiting for your response.\n      const { matches, own } = this.store.state.vibes\n      for (const ckey of own) {\n        const match = matches[ckey.toString('hex')]\n        // Send response to received vibes\n        if (match.state === 'wait' && peerId.equals(match.a)) {\n          return this.respondVibe(match.chatId)\n        }\n      }\n      if (!Array.isArray(transactions)) transactions = [transactions]\n      transactions = transactions.map(t => Transactions.validate(t))\n      const cd = await until(this.$cooldowns(), cd => cd.state !== 'loading')\n      if (!cd.canVibe) throw new Error('VibeNotReady')\n\n      const msgBox = boxPair()\n      const peer = await this.profileOf(peerId)\n      if (peer.state === 'error') throw new Error(peer.errorMessage)\n      const sealedMessage = seal(msgBox.pk, peer.box)\n      const convo = await this.createBlock(TYPE_VIBE, {\n        box: sealedMessage,\n        t: transactions\n      })\n      const chatId = convo.last.sig\n      await this._storeLocalChatKey(chatId, msgBox)\n      // Store target ref\n      const key = Buffer.allocUnsafe(Feed.SIGNATURE_SIZE + 1)\n      chatId.copy(key, 1)\n      key[0] = 84 // ASCII: 'T'\n      await this._writeReg(key, peer.pk)\n      return chatId\n    },\n\n    /**\n     * Responds to a vibe by generating the second box pair\n     * params:\n     * - chatId {BlockSignature} id of the initial vibe-block.\n     */\n    async respondVibe (chatId, like = true) {\n      chatId = toBuffer(chatId)\n      const msgBox = boxPair()\n      const { own, matches } = this.store.state.vibes\n      if (!own.find(v => v.equals(chatId))) throw new Error('NotYourVibe')\n\n      const vibe = matches[chatId.toString('hex')]\n      if (!vibe) throw new Error('VibeNotFound')\n      if (vibe.state !== 'wait') throw new Error('VibeResponseNotApplicable')\n      const peer = await this.profileOf(vibe.a)\n\n      if (!peer) throw new Error('PeerNotFound')\n      const sealedMessage = seal(msgBox.pk, peer.box)\n\n      const block = await this.repo.readBlock(chatId)\n      if (!block) throw new Error('Vibe no longer exists')\n\n      const head = await this.feed(1)\n\n      const convo = await this.createBlock(Feed.from(block), TYPE_VIBE_RESP, {\n        box: !like ? VIBE_REJECTED : sealedMessage,\n        link: head.last.sig // Weak-ref to own checkpoint\n      })\n      if (!convo) throw new Error('Failed creating block')\n      if (like) await this._storeLocalChatKey(vibe.chatId, msgBox)\n      return chatId\n    },\n\n    $vibe (chatId) {\n      return gate(init({ state: 'loading', type: 'vibe' }, this._vibe(chatId)))\n    },\n    _vibe (chatId) { // ungated/inited raw\n      try {\n        chatId = toChatId(chatId)\n      } catch (err) {\n        return init({\n          state: 'error',\n          errorMessage: err.message\n        })\n      }\n      return mute(\n        combine(\n          s => this.store.on('chats', s),\n          s => this.store.on('vibes', s)\n        ),\n        ([chats, { matches }]) => {\n          const match = matches[chatId.toString('hex')]\n          const chat = chats.chats[chatId.toString('hex')]\n          if (!match) return { state: 'error', errorMessage: 'VibeNotFound' }\n          const initiator = this.pk.equals(match.a)\n          const vibe = computeVibe(chatId, match, initiator, chat)\n          return joinPeer.bind(this)(vibe)\n        }\n      )\n    },\n\n    $vibes () {\n      const joinPeers = async vibes => {\n        // INNER JOIN profile of 'other' on vibe\n        const out = []\n        for (let i = 0; i < vibes.length; i++) {\n          const vibe = { ...vibes[i] }\n          await joinPeer.bind(this)(vibe)\n          out.push(vibe)\n        }\n        D('emit $vibes async')\n        return out\n      }\n      return gate(init([], mute(this._vibes(), joinPeers)))\n    },\n    // Lower-level alternative without\n    // Vibe.peer joined in which requires readReg lookup\n    _vibes () {\n      return mute(\n        combine(\n          s => this.store.on('chats', s),\n          s => this.store.on('vibes', s)\n        ),\n        ([chats, { sent, received, own, matches }], set) => {\n          const vibes = []\n          for (const chatId of own) {\n            const match = matches[chatId.toString('hex')]\n            const chat = chats.chats[chatId.toString('hex')]\n            const initiator = this.pk.equals(match.a)\n            const vibe = computeVibe(chatId, match, initiator, chat)\n            if (vibe.state === 'expired') continue // let GC handle the rest\n            if (chat && chat.state === 'end') continue\n            vibes.push(vibe)\n          }\n          D('emit _vibes')\n          return vibes\n        }\n      )\n    }\n  }\n}\n\nasync function joinPeer (vibe) {\n  try {\n    if (!vibe.peerId && vibe.initiator) {\n      // Attempt to remember who we sent what to.\n      const key = Buffer.allocUnsafe(Feed.SIGNATURE_SIZE + 1)\n      vibe.id.copy(key, 1)\n      key[0] = 84 // ASCII: 'T'\n      const pk = await this._readReg(key)\n      vibe.peerId = pk\n    }\n\n    if (vibe.peer.state === 'loading') {\n      vibe.peer = await this.profileOf(vibe.peerId)\n    }\n  } catch (err) {\n    console.warn('Failed resolving vibe.peer', err)\n    vibe.peer = { state: 'error', errorMessage: err.message }\n  }\n  return vibe\n}\n\nfunction computeVibe (chatId, match, initiator, chat) {\n  const out = {\n    ...initVibe(chatId),\n    updatedAt: match.updatedAt,\n    createdAt: match.createdAt,\n    expiresAt: chat?.expiresAt || match.expiresAt,\n    box: match.remoteBox,\n    initiator, // : initiator ? 'local' : 'remote',\n    localRejected: initiator && match.state === 'rejected',\n    remoteRejected: !initiator && match.state === 'rejected',\n    a: match.a,\n    b: match.b,\n    head: match.response\n  }\n  if (!initiator) out.peerId = out.a\n  else if (match.b) out.peerId = out.b\n  // else gotta lookup using _readReg(chatId), handled higher up\n\n  if (match.state === 'rejected') out.state = 'rejected'\n  else if (match.a && match.b) out.state = 'match'\n  else if (!initiator && !match.b) out.state = 'waiting_local'\n  else if (initiator && !match.b) out.state = 'waiting_remote'\n  else out.state = 'mental_error'\n\n  out.myTurn = out.state === 'match'\n    ? !chat\n        ? initiator\n        : !((chat.mLength % 2) ^ (initiator ? 0 : 1))\n    : out.state === 'waiting_local'\n  if (chat?.state === 'end') out.myTurn = false\n\n  out.health = !chat\n    ? 3\n    : Math.floor(chat.hp)\n\n  if (\n    ~['waiting_remote', 'waiting_local'].indexOf(out.state) &&\n    out.expiresAt < Date.now()\n  ) out.state = 'expired'\n  return out\n\n  function initVibe (id) {\n    return {\n      id,\n      head: null,\n      peer: PEER_PLACEHOLDER,\n      peerId: null,\n      box: null,\n      state: 'waiting',\n      updatedAt: 0,\n      createdAt: Infinity,\n      expiresAt: 0,\n      remoteRejected: false,\n      localRejected: false,\n      a: null,\n      b: null,\n      myTurn: false,\n      health: -1\n    }\n  }\n}\n\nfunction toChatId (key) {\n  if (!key ||\n    !(\n      (Buffer.isBuffer(key) && key.length === 64) ||\n      (typeof key !== 'string' && key.length === 128)\n    )\n  ) {\n    throw new Error(`ChatID expected got \"${key}\"`)\n  }\n  return toBuffer(key)\n}\n","const { mute, combine } = require('piconuro')\nconst { ACTIVE } = require('../slices/peers.reg')\nconst { btok } = require('../util')\n\nmodule.exports = function MonitorModule () {\n  return {\n    $cooldowns () {\n      return mute(\n        combine(\n          this.$profile(),\n          s => this.store.on('vibes', s),\n          s => this.store.on('chats', s)\n        ),\n        ([profile, vibes, chats]) => {\n          const cd = {\n            canVibe: profile.state === ACTIVE,\n            vibe: -1\n          }\n          if (profile.state === 'loading') return { state: 'loading', ...cd }\n\n          // Peer has a sent vibe\n          const sent = vibes.seen[btok(profile.pk)]\n          if (!sent) {\n            cd.vibe = 0\n            return cd\n          }\n\n          // Peer is initiating a conversation\n          const match = vibes.matches[btok(sent)]\n          if (!match) throw new Error('MentalError')\n          cd.vibe = match.expiresAt\n\n          // Peer is having an conversation\n          const chat = chats.chats[btok(sent)]\n          if (chat) {\n            cd.vibe = chat.expiresAt\n          }\n          return cd\n        }\n      )\n    }\n  }\n}\n","const assert = require('nanoassert')\n// const { mute, combine } = require('piconuro')\n// const { ACTIVE } = require('../slices/peers.reg')\nconst {\n  // btok,\n  TYPE_ACTIVATE\n} = require('../util')\n\nmodule.exports = function InventoryModule () {\n  return {\n    // $hasItem(pk, itemId) { return  inv[itemId].qty }\n    async useItem (i) {\n      assert(Number.isInteger(i), 'ItemID expected')\n      // const cd = await until(this.$cooldowns(), cd => cd.state !== 'loading')\n      // if (!cd.canVibe) throw new Error('VibeNotReady')\n      const feed = await this.createBlock(TYPE_ACTIVATE, { i })\n      return feed.last.sig // block id\n    }\n  }\n}\n","export default {};\n","const C_BG = '#2f383e' // graphite\nconst C_BG2 = '#2c323d' // slate\nconst C_FG = '#bbbba9' // cream\nconst C_FG2 = '#818e85' // subtle\nconst C_BGH = '#cd94b0' // violet\nconst C_BGC = '#db797b' // rust\nconst C_BGL = '#9ab278' // leaf\nconst C_BGO = '#73a8a2' // sky/sea\nconst C_P = '#d08c6d' // copper\n// const C_Y = '#cbaf78' // ochre\n\nasync function inspect (repo, opts = {}) {\n  const heads = await repo.listHeads()\n  const tails = await repo.listTails()\n  const latest = await repo.listLatest()\n  const feeds = await repo.listFeeds()\n  const feedHeads = await repo.listFeedHeads()\n\n  const colors = opts.colors || {}\n  const makeBlockLabel = opts.blockLabel || (block => {\n    const body = block.body.subarray(0, 8).toString('hex')\n    const id = hx8(block.sig)\n    const author = hx8(block.key)\n    return `ID: ${id}\\nKEY: ${author}\\nBDY: ${body}`\n  })\n\n  // generate dot-graph\n  let nodes = '// Nodes\\n'\n  let edges = '// Edges\\n'\n  const chains = []\n  const orphaned = []\n  // Generate head nodes\n  for (const h of heads) {\n    const id = hx8(h.key)\n    const label = `Author Head \\n${hx8(h.key)}`\n    nodes += `\"H${id}\"\n      [\n        fontcolor=\"${C_BGH}\",\n        color=\"${C_BGH}\",\n        label=\"${label}\"\n      ];\\n`\n    edges += `\"H${id}\" -> \"B${hx8(h.value)}\"[arrowhead=odot];\\n` // link to tag to block\n    chains.push(h.value)\n  }\n\n  for (const t of tails) {\n    const id = hx8(t.value)\n    const label = `Author Tail\\n ${hx8(t.key)}`\n    nodes += `\"T${id}\"\n      [\n        fontcolor=\"${C_BGH}\",\n        color=\"${C_BGH}\",\n        label=\"${label}\"\n      ];\\n`\n    // edges += `\"T${id}\" -> \"B${id}\";\\n` // link to tag to block\n    edges += `\"B${id}\" -> \"T${id}\"[dir=back,arrowtail=odot];\\n` // genesis links to tail for visual clarity.\n  }\n\n  for (const l of latest) {\n    const id = hx8(l.value)\n    const label = `Latest\\n ${hx8(l.key)}`\n    nodes += `\"L${id}\"\n      [\n        fontcolor=\"${C_BGL}\",\n        color=\"${C_BGL}\",\n        label=\"${label}\"\n      ];\\n`\n    edges += `\"L${id}\" -> \"B${id}\"[arrowhead=odot];\\n` // link to tag to block\n  }\n\n  for (const f of feeds) {\n    const id = hx8(f.key)\n    const label = `Chain Tail\\n${hx8(f.value)}`\n    nodes += `\"F${id}\"\n      [\n        fontcolor=\"${C_BGC}\",\n        color=\"${C_BGC}\",\n        label=\"${label}\"\n      ];\\n`\n    // edges += `\"F${id}\" -> \"B${id}\"[dir=back];\\n` // link to tag to block\n    edges += `\"B${hx8(f.value)}\" -> \"F${id}\"[dir=back,arrowtail=odot];\\n` // link to tag to block\n    if (!chains.find(c => c.equals(f.key))) {\n      chains.push(f.key)\n      orphaned.push(f.key)\n    }\n  }\n\n  for (const f of feedHeads) {\n    const id = hx8(f.key)\n    const label = `Chain Head\\n${hx8(f.key)}`\n    nodes += `\"FT${id}\"\n      [\n        fontcolor=\"${C_BGC}\",\n        color=\"${C_BGC}\",\n        label=\"${label}\"\n      ];\\n`\n    edges += `\"FT${id}\" -> \"B${hx8(f.value)}\"[arrowhead=odot];\\n` // link to tag to block\n  }\n\n  let nChains = 0\n  let nBlocks = 0\n  let nBytes = 0\n  let nBytesContent = 0\n\n  for (const ptr of chains) {\n    const isOrphan = orphaned.find(c => c.equals(ptr))\n    nChains++\n    // Chainload blocks\n    for await (const block of repo._chainLoad(ptr)) {\n      nBlocks++\n      nBytes += block.buffer.length\n      nBytesContent += block.size\n\n      const id = hx8(block.sig)\n      const label = makeBlockLabel(block, {\n        link (blockId, dotOpts = `style=dashed,weight=0.1,color=\"${C_P}\"`) {\n          if (!Buffer.isBuffer(blockId)) throw new Error('link(id) expected id to be Buffer')\n          edges += `\"B${id}\" -> \"B${hx8(blockId)}\"[${dotOpts}];\\n` // Link to parent\n        }\n      })\n      const c = !isOrphan\n        ? colors.block || C_FG\n        : colors.orphanBlock || C_BGO\n      nodes += `\"B${id}\"\n        [\n          fontcolor=\"${c}\",\n          color=\"${c}\"\n          shape=\"square\",\n          label=\"${label}\"\n        ];\\n`\n      if (!block.isGenesis) {\n        edges += `\"B${id}\" -> \"B${hx8(block.parentSig)}\"\n          [\n            color=\"${C_FG2}\",\n            fillcolor=\"${C_FG}\",\n            weight=1.0\n          ];\\n` // Link to parent\n      }\n    }\n  }\n  const label = opts.label ||\n    `[PicoRepo] Authors: ${latest.length} Feeds: ${nChains}, Blocks: ${nBlocks}, Bytes: ${bs(nBytes)} (${bs(nBytes - nBytesContent)} ${(100 * (nBytes - nBytesContent) / nBytes).toFixed(2)}%)`\n  const graph = `\n    digraph G {\n      graph [pad=0.2,labelloc=\"t\",fontcolor=\"${C_FG}\",bgcolor=\"${C_BG}\",fontname=\"fixed\",overlap=\"false\",center=\"1\",ratio=\"compress\",label=\"${label}\",rankdir=BT];\n      edge [color=\"black\",fillcolor=\"${C_BG2}\",weight=2.0];\n      node [style=filled,fillcolor=\"${C_BG2}\",color=\"${C_FG2}\",shape=\"rect\",fontcolor=\"${C_FG}\",shape=box];\n    ${nodes}\n    ${edges}\n    }\n  `\n  return graph\n\n  function hx8 (buf) {\n    return buf.subarray(0, 4).toString('hex')\n  }\n}\n\nasync function dump (repo, filename = 'repo.dot', opts = {}) {\n  const dot = await inspect(repo, opts)\n  require('fs').writeFileSync(filename, dot)\n}\n\nmodule.exports = {\n  inspect,\n  dump\n}\n\n// Borrowed from https://github.com/mafintosh/tiny-byte-size/blob/master/index.js\nfunction bs (bytes, space = false) {\n  const b = bytes < 0 ? -bytes : bytes\n  if (b < 1e3) return fmt(bytes, 'B')\n  if (b < 1e6) return fmt(bytes / 1e3, 'kB')\n  if (b < 1e9) return fmt(bytes / 1e6, 'MB')\n  return fmt(bytes / 1e9, 'GB')\n  function fmt (n, u) {\n    n = Math.round(10 * n) / 10\n    return n + (space ? ' ' : '') + u\n  }\n}\n","const { inspect: dumpDot } = require('picorepo/dot')\nconst { SimpleKernel } = require('picostack')\nconst {\n  btok,\n  TYPE_PROFILE,\n  TYPE_VIBE,\n  TYPE_VIBE_RESP,\n  TYPE_MESSAGE,\n  TYPE_BYE,\n  TYPE_BYE_RESP,\n  TYPE_ITEMS,\n  TYPE_ACTIVATE,\n  PASS_TURN,\n  VIBE_REJECTED\n} = require('../util')\nconst { ITEMS } = require('../items.db')\nconst { ACTION_OFFER, ACTION_NETWORK_PURCHASE } = require('../transactions')\nconst { scoreGraph } = require('../game')\nmodule.exports = function InspectModule () {\n  return {\n    async inspect () {\n      const peers = this.store.state.peers\n      const chats = this.store.state.chats\n      const dot = await dumpDot(this.repo, {\n        blockLabel (block, { link }) {\n          const data = SimpleKernel.decodeBlock(block.body)\n          let author = peers[btok(block.key)]?.name\n          if (!author) author = btok(block.key, 3)\n          let str = bq`\n            [${btok(block.sig, 3)}]\n            ${data.seq}:${author}\n          `\n          switch (data.type) {\n            case TYPE_PROFILE: return str\n            case TYPE_VIBE: {\n              const { t: transactions } = data\n              const give = transactions.filter(ts => ts.t === ACTION_OFFER)\n                .map(({ p }) => p.q + ITEMS[p.i].image)\n              const buy = transactions.filter(ts => ts.t === ACTION_NETWORK_PURCHASE)\n                .map(({ p }) => p.q + ITEMS[p.i].image)\n              str += '\\n'\n              if (give.length) str += '\\n' + give.join(' ')\n              if (buy.length) str += '\\n' + buy.join(' ')\n              return str\n            }\n            case TYPE_VIBE_RESP: {\n              link(data.link)\n              const resp = VIBE_REJECTED.equals(data.box) ? '' : ''\n              return bq`\n                ${str}\n                ${resp}\n              `\n            }\n            case TYPE_MESSAGE: {\n              const t = PASS_TURN.equals(data.content) ? '' : ''\n              return bq`\n                ${str}\n                ${t}\n              `\n            }\n            case TYPE_BYE: {\n              str += '\\n' + ['', '', ''][data.gesture]\n              return str\n            }\n            case TYPE_BYE_RESP: {\n              str += '\\n' + ['', '', ''][data.gesture]\n              const cid = chats.heads[btok(block.sig)]\n              if (cid) {\n                const chat = chats.chats[btok(cid)]\n                return bq`\n                  ${str}\n                  ${scoreGraph(chat.graph).join('/')}\n                `\n              }\n              return str\n            }\n            case TYPE_ACTIVATE: {\n              return bq`\n                ${str}\n                use ${ITEMS[data.i].image}\n              `\n            }\n            default:\n              console.info('Unknown type', data.type, data)\n              return bq`\n                ${str}\n                ${data.type}\n              `\n          }\n        }\n      })\n      return dot\n    }\n  }\n}\n\n// nice this is a useful hack for multiline strings\nfunction bq (str, ...tokens) {\n  str = [...str]\n  for (let i = tokens.length; i > 0; i--) str.splice(i, 0, tokens.pop())\n  return str.join('').split('\\n').map(t => t.trim()).join('\\n').trim()\n}\n","const { SimpleKernel } = require('picostack')\n// Lowlevel registers that hold block-state\nconst PeerCtrl = require('./slices/peers.reg')\nconst VibeCtrl = require('./slices/vibes.reg')\nconst ConversationCtrl = require('./slices/chats.reg')\nconst { InventorySlice, TransactionsSlice } = require('./slices/inv.reg')\n\n// Kernel Modules (basically mixins)\nconst ChatModule = require('./mod/chat.mod')\nconst BufferedRegistry = require('./mod/buffered-registry.mod')\nconst GarbageCollector = require('./mod/gc.mod')\nconst PeersModule = require('./mod/peers.mod')\nconst VibesModule = require('./mod/vibes.mod')\nconst MonitorModule = require('./mod/monitor.mod')\nconst InventoryModule = require('./mod/inv.mod')\nconst DumpModule = require('./mod/dump.mod.js')\n\n// Util\nconst {\n  KEY_SK,\n  KEY_BOX_LIKES_PK,\n  KEY_BOX_LIKES_SK,\n  TYPE_VIBE,\n  TYPE_VIBE_RESP,\n  TYPE_MESSAGE,\n  TYPE_PROFILE,\n  TYPE_BYE,\n  TYPE_BYE_RESP,\n  TYPE_ITEMS,\n  TYPE_ACTIVATE,\n  VIBE_REJECTED,\n  decodeBlock,\n  typeOfBlock\n} = require('./util')\nconst Transactions = require('./transactions')\n\nconst debug = require('debug')\nconst D = debug('picochat:kernel')\n// debug.enable('pico*')\n\nclass Kernel extends SimpleKernel {\n  static Transactions = Transactions\n\n  constructor (db, opts = {}) {\n    super(db, opts)\n    // Process opts\n    this._vibeBox = opts.box ?? null // Vibe box-pair\n\n    // Setup slices\n    this.store.register(PeerCtrl()) // Register PeerStore that holds user profiles\n    this.store.register(PeerCtrl.ProfileCtrl(() => this.pk))\n    this._vibeController = new VibeCtrl() // TODO: return { resolveKeys: fn, controller: fn }\n    this.store.register(this._vibeController)\n    this.store.register(ConversationCtrl())\n    this.store.register(InventorySlice())\n    this.store.register(TransactionsSlice())\n    // this.store.register(StatsCtrl())\n\n    // Load Mixins/ Kernel Modules\n    Object.assign(this, PeersModule())\n    Object.assign(this, VibesModule())\n    Object.assign(this, ChatModule())\n    Object.assign(this, BufferedRegistry())\n    Object.assign(this, GarbageCollector(this.store))\n    Object.assign(this, MonitorModule())\n    Object.assign(this, InventoryModule())\n    Object.assign(this, DumpModule())\n  }\n\n  /**\n   * Restores session/data from store\n   * returns {boolean} true if user exists\n   */\n  async boot () {\n    if (this.__loading) return this.__loading\n    this.__loading = (async () => {\n      // If identity wasn't provided via opts.\n      if (!this._secret) {\n        try {\n          // Attempt to restore existing identity\n          this._secret = await this.repo.readReg(KEY_SK)\n        } catch (err) {\n          if (!err.notFound) throw err\n        }\n      }\n      // Fallback to generate new identity\n      /**\n       * TODO: bugged state, before profile was assumed if\n       * secret was available, SimpleKernel autogenerates\n       * anonymous secret but profile is not guaranteed.\n       * Think... Do i want to accidentally initialize\n       * slices with wrong identity?\n      if (!this._secret) {\n        const { sk } = Feed.signPair()\n        this._secret = sk\n        await this.repo.writeReg(KEY_SK, sk)\n      }\n      */\n\n      if (this._secret) {\n        this._vibeBox = {\n          sk: await this.repo.readReg(KEY_BOX_LIKES_SK),\n          pk: await this.repo.readReg(KEY_BOX_LIKES_PK)\n        }\n        this._vibeController.setKeys(this.pk, this._vibeBox)\n      }\n      await this.store.load() // load stores\n      this.ready = true\n\n      if (this._secret && this.store.state.peer) {\n        this.__setHasProfile(true)\n        return true\n      }\n      return false\n    })()\n    return this.__loading\n  }\n\n  async _tracePath (head) {\n    const keys = []\n    const heads = []\n    let chatId = null\n    let nLoaded = 0\n    const feed = await this.repo.loadFeed(head, (block, abort) => {\n      const type = typeOfBlock(block.body)\n      switch (type) {\n        case TYPE_VIBE_RESP:\n          keys[1] = block.key\n          heads[1] = decodeBlock(block.body).link\n          break\n        // TODO: add & verify:\n        case TYPE_ITEMS: // issued by bar\n        case TYPE_ACTIVATE: // self issued\n        case TYPE_PROFILE:\n        case TYPE_BYE_RESP:\n          keys[0] = block.key\n          heads[0] = block.sig\n          // If this is not the first block encountered\n          // and we reached a bye or profile, then we've reached\n          // end of segment and should not load further.\n          // to load that next segment rerun tracepath with exported\n          // head[0]\n          if (nLoaded) abort()\n          // abort(!nLoaded && type !== TYPE_BYE_RESP)\n          break\n        case TYPE_VIBE:\n          chatId = block.sig\n          break\n      }\n      nLoaded++\n    })\n    if (!feed) throw new Error('FeedNotFound')\n    return { keys, heads, feed, chatId }\n  }\n\n  // The idea of merge strategy needs to be reworked a bit.\n  // besides passing block here, pico-repo should pass an array\n  // of keys that are already encountered in the feed.\n  //\n  // Strategy attempts to answer the question:\n  //  \"When block with foreign identity encountered,\n  //  should the block be allowed to bump the peer's head?\"\n  //\n  // Vibe is an invitation to participate so: yes. (if it was adressed to you)\n  // Message? \"yes\" if you were the one that was adressed.\n  // Same thing with bye.\n  // There are identity checks in store-filters but\n  // maybe should be handled on strategy level.\n  // TODO: Heads up, there's a bug here? Why isn't bartender blocks rejected?\n  async mergeStrategy (block, repo) { // TODO: expose loudFail flag? mergStr(b, r, !dryMerge && loud)\n    const content = decodeBlock(block.body)\n    const { type } = content\n    const pBlock = await repo.readBlock(block.parentSig)\n    const parentType = typeOfBlock(pBlock.body)\n\n    // Allow VibeResponses to be merged onto foreign vibes\n    if (type === TYPE_VIBE_RESP) {\n      const pBlock = await repo.readBlock(block.parentSig)\n      if (parentType !== TYPE_VIBE) return false\n      if (!VIBE_REJECTED.equals(content.box)) {\n        D('Match detected: %h <3 %h', block.key, pBlock.key)\n      } else {\n        D('Rejection detected: %h </3 %h', block.key, pBlock.key)\n      }\n      return true // All good, merge permitted\n    }\n\n    // Allow Messages onto foreign VibeResponses or Messages\n    if (type === TYPE_MESSAGE) {\n      if (parentType === TYPE_MESSAGE) return true\n    }\n    if (type === TYPE_BYE && parentType === TYPE_MESSAGE) return true\n    if (type === TYPE_BYE_RESP && parentType === TYPE_BYE) return true\n\n    console.warn('MergeStrategy rejected', parentType, '<--', type)\n    return false // disallow by default\n  }\n\n  async reload () {\n    return this.store.reload()\n  }\n\n  /* Clock counter is useful but what the hack. */\n  // TODO: backport to SimpleKernel\n  async seq () {\n    const f = await this.repo.loadLatest(this.pk, 1)\n    if (!f) return -1\n    if (!this.pk.equals(f.last.key)) throw new Error('InternalError: Wrong feed?')\n    return SimpleKernel.decodeBlock(f.last.body).seq\n  }\n}\n\nmodule.exports = Kernel\n","// const { randomBytes } = require('crypto')\n\n/*\n * const randomBytes = (n) => {\n  const buf = new Uint8Array(n)\n  window.crypto.getRandomValues(buf)\n  return buf\n} */\n\n// Exports\nmodule.exports = {\n  // functions\n  binstr,\n  roundByte,\n  shift,\n  unshift,\n  countTrailingZeroes,\n  countOnes,\n  proximityOf,\n  mapOverlap,\n  packGeo,\n  unpackGeo,\n  gammaShift,\n  gammaUnshift,\n  dGapEncode,\n  decodeSL,\n  bitAt,\n  setBit\n}\n\n/*\nfunction countLeadingZeroes (p, SIZE = DEF_SIZE) {\n  let n = 0\n  for (let i = 0; i < SIZE; i++) {\n    let b = p[i]\n    for (let j = 0; j < 8; j++) {\n      if (b & 1) return n\n      n++\n      b >>= 1\n    }\n  }\n}\n*/\n\n// Round bits upwards to closet byte\nfunction roundByte (b) { return (b >> 3) + (b % 8 ? 1 : 0) }\n\n/*\n * Treats buffer as a series of latched 8bit shift-registers\n * shifts all bits 1 step from low to high.\n *             _____________\n *   input -> | 0 1 0 1 1 1 | -> return overflow\n *             -------------\n *           Low            High\n */\nfunction shift (x, inp = 0) {\n  let c = inp ? 1 : 0\n  for (let i = 0; i < x.length; i++) {\n    const nc = (x[i] >> 7) & 1\n    x[i] = (x[i] << 1) | c\n    c = nc\n  }\n  return c\n}\n\n/*\n * Opposite of shift, shifts all bits\n * 1 step towards low.\n *              _____________\n *   output <- | 0 1 0 1 1 1 | <- input\n *              -------------\n *           Low            High\n */\nfunction unshift (x, inp = 0) {\n  let i = x.length\n  let c = (inp ? 1 : 0) << 7\n  while (i--) {\n    const nc = (x[i] & 1) << 7\n    x[i] = c | x[i] >> 1\n    c = nc\n  }\n  return c ? 1 : 0\n}\n/*\nfunction roll (bits) {\n  const size = roundByte(bits)\n  const o = randomBytes(size)\n  const r = bits % 8 ? bits % 8 : 8\n  o[size - 1] = o[size - 1] & // Fix last byte\n    ((1 << r) - 1) | // Mask after LIFE marker\n    (1 << (r - 1)) // Insert LIFE marker\n  return o\n}\n*/\n\nfunction countTrailingZeroes (x) {\n  let i = x.length\n  let n = 0 // vBits - (x.length << 3)\n  while (i--) {\n    for (let j = 7; j >= 0; j--) {\n      if (x[i] & (1 << j)) return n\n      n++\n    }\n  }\n  return n\n}\n\nfunction countOnes (p) {\n  let out = 0\n  for (let i = 0; i < p.length; i++) {\n    let b = p[i]\n    while (b) {\n      if (b & 1) out++\n      b >>= 1\n    }\n  }\n  return out\n}\n\n// Higher order function to align multiple registers\n// and iterate the bits within the overlap.\n//\n//                  Operational zone\n//     Start bit    _____\n//               * | | | |\n// A:    0 0 0 0 1 1 0 1 0 1 1\n// B:        0 0 1 0 1 1 1 1 1 1 0\n// C:      0 0 0 1 0 0 1 0\n//       HI        ^            LOW\n//            idx: 0 1 2 3\n//\nfunction mapOverlap (registers, process) {\n  process = process || (() => {})\n  const o = registers.map(() => 0)\n  const found = registers.map(() => 0)\n  const outputs = registers.map(() => 0)\n  let sync = false\n  const result = []\n  let cancel = false\n  while (!cancel) {\n    for (let r = 0; r < registers.length; r++) {\n      if (!sync && found[r]) continue // wait-state reached\n      const reg = registers[r]\n      const bitIdx = o[r]++\n      const byteIdx = reg.length - 1 - (bitIdx >> 3)\n      // return function as soon as first buffer end is reached.\n      if (byteIdx < 0) return result\n\n      const bit = (reg[byteIdx] >> (7 - (bitIdx % 8))) & 1\n      if (!found[r]) {\n        if (bit) found[r] = true\n        continue\n      }\n      outputs[r] = bit\n    }\n\n    if (!sync) {\n      sync = found.reduce((c, n) => c && n, true)\n      continue\n    }\n    const z = process(outputs, () => { cancel = true })\n    if (shift(result, z)) result[result.length] = 1\n  }\n  return result\n}\n\nfunction binstr (x, cap) {\n  cap = cap || x.length * 8\n  let str = ''\n  for (let i = 0; i < x.length; i++) {\n    for (let j = 0; j < 8; j++) {\n      if (cap === i * 8 + j) str += '|'\n      str += x[i] & (1 << j) ? '1' : '0'\n    }\n  }\n  return str\n}\n\nconst GHSMAP = '0123456789bcdefghjkmnpqrstuvwxyz' // (geohash-specific) Base32 map\nconst GHSUNMAP = GHSMAP.split('').reduce((h, l, i) => { h[l] = i; return h }, {})\n/**\n * Bitpacks a geohash string containing quintets to arbitrary bit-precision:\n *\n *  'u120fw' <-- contains 6*5 bits accurate to ~1.2 Kilometers\n * MSB    LSB\n *\n *  'u' being is the most significant coordinate,\n *  'w' is the least significant coordinate.\n *\n *  References:\n *  Format specification:  https://en.m.wikipedia.org/wiki/Geohash\n *  Bitdepthchart: https://www.ibm.com/docs/en/streams/4.3.0?topic=334-geohashes\n *\n */\nfunction packGeo (str, nBits, buf) {\n  if (!nBits) nBits = str.length * 5\n  // if (nBits > 64) throw new Error('unsupported precision')\n  if (nBits < 5) throw new Error('precision has to be at least 5')\n\n  // const nQuints = (nBits >> 2) + (nBits % 5 ? 1 : 0)\n  const nBytes = roundByte(nBits)\n  // This is horribly inefficient and ugly but i'm tired. have mercy.\n  if (!buf) buf = Buffer.alloc(nBytes) // Array.from(new Array(nBytes).map(() => 0)\n  // buf[0] = 1\n  const val = str\n    .split('')\n    .reverse()\n    .reduce((sum, c, b) => sum + (GHSUNMAP[c] * (32 ** b)), 0)\n  const bits = val.toString(2).slice(0, nBits).split('').reverse() // lsb\n  for (const bit of bits) { // buf.writeUInt32BE(bits)\n    shift(buf, bit === '0' ? 0 : 1) // msb\n  }\n  return buf\n}\n\n/**\n * Unpacks bitarray back into base32 string\n */\nfunction unpackGeo (buf, nBits = 16) {\n  const nBytes = roundByte(nBits)\n  if (buf.length < nBytes) throw new Error('BufferUnderflow, dst buffer too small')\n  const cpy = []\n  for (let i = 0; i < nBytes; i++) cpy[i] = buf[i]\n  let str = ''\n  let tmp = 0\n  for (let n = 0; n < nBits; n++) {\n    const bit = unshift(cpy)\n    tmp = tmp | bit << (4 - (n % 5))\n    if (n && !(n % 5)) {\n      str += GHSMAP.charAt(tmp)\n      tmp = 0\n    }\n  }\n  str += GHSMAP.charAt(tmp)\n  return str.replace(/0+$/, '') // Truncate trailing zero-fields\n}\n\n// Elias gamma encoding\n// https://en.wikipedia.org/wiki/Elias_gamma_coding\n// http://bitmagic.io/dGap-gamma.html\nfunction gammaShift (buf, x) {\n  // x++ // 0support\n  const N = Math.ceil(Math.log2(x))\n  for (let n = 0; n < N; n++) unshift(buf, 0)\n  unshift(buf, 1)\n  for (let n = 0; n < N; n++) unshift(buf, (x >> n) & 1)\n}\n\nfunction gammaUnshift (buf) {\n  let N = 0\n  const cap = buf.length * 8\n  for (; N < cap; N++) {\n    const b = unshift(buf)\n    if (b) break\n    if (N === cap - 1 && !b) throw new Error('NBitNotFound: end of buffer reached')\n  }\n  let x = 1 << N\n  while (N--) x = x | (unshift(buf) << N)\n  return x\n  // return --x // 0support\n}\n\nfunction bitAt (buf, idx) {\n  return (buf[idx >> 3] >> (idx % 8)) & 1\n}\n\nfunction setBit (buf, idx, v = 1) {\n  if (v) buf[idx >> 3] = (buf[idx >> 3] || 0) | (1 << (idx % 8)) // set\n  else buf[idx >> 3] = (buf[idx >> 3] || 0) & (~(1 << (idx % 8))) // clear\n  return buf\n}\n\nfunction dGapEncode (buf, cap) {\n  if (!cap) cap = buf.length * 8\n  const out = [bitAt(buf, 0)]\n  let n = 0\n  let seek = out[0]\n  let i = 0\n  while (i < cap) {\n    const b = bitAt(buf, i)\n    if (b !== seek) {\n      seek = b\n      out.push(n)\n      n = 0\n    } n++\n    i++\n  }\n  out.push(n)\n  return out\n}\n\nfunction decodeSL (buf, geoPrecision = 16) {\n  const nBits = geoPrecision + 1\n  const tmp = []\n  for (let i = 0; i < roundByte(nBits); i++) tmp[i] = buf[i]\n  const sex = unshift(tmp) // (unshift(tmp) << 1) | unshift(tmp)\n  const geohash = unpackGeo(tmp, geoPrecision)\n  return { sex, geohash }\n}\n\nfunction proximityOf (a, b) {\n  let n = 0\n  for (;n < a.length; n++) {\n    if (bitAt(a, n) !== bitAt(b, n)) break\n  }\n  return n\n}\n","/* eslint-disable camelcase */\nconst {\n  crypto_sign_SECRETKEYBYTES: SIGN_SKBYTES,\n  crypto_sign_PUBLICKEYBYTES: SIGN_PKBYTES,\n  crypto_sign_keypair\n} = require('sodium-universal')\n/* eslint-enable camelcase */\nconst { packGeo, shift, binstr, roundByte, decodeSL } = require('./bits')\nconst { GEO_BITS } = require('./util')\nconst { pack, unpack } = require('msgpackr')\nconst DEFAULT_SIGN = 'default_signpair'\nconst DEFAULT_PROFILE = 'default_profile'\n\nclass Keychain {\n  constructor (db) {\n    this.db = db\n  }\n\n  /*\n   * TODO:\n   * async addFriend (alias, pk)\n   * async removeFriend (alias)\n   * async listFriends ()\n   */\n\n  async readIdentity (alias = DEFAULT_SIGN) {\n    return this.db.get(alias)\n      .catch(err => {\n        if (!err.notFound) throw err\n      })\n  }\n\n  async writeIdentity (sk, alias = DEFAULT_SIGN) {\n    if (!Buffer.isBuffer(sk) || sk.length !== SIGN_SKBYTES) throw new Error('Expected SigningSecret')\n    return this.db.put(alias, sk)\n  }\n\n  async writeProfile (profile, alias = DEFAULT_PROFILE) {\n    return this.db.put(alias, pack(profile))\n  }\n\n  async readProfile (alias = DEFAULT_PROFILE) {\n    const p = await this.db.get(alias)\n      .catch(err => {\n        if (!err.notFound) throw err\n      })\n    if (p) return unpack(p)\n  }\n\n  static generateAnonymous () {\n    const sk = Buffer.allocUnsafe(SIGN_SKBYTES)\n    const pk = Buffer.allocUnsafe(SIGN_PKBYTES)\n    crypto_sign_keypair(pk, sk)\n    return { pk, sk }\n  }\n\n  static generate (gender, geohash, maxTries) {\n    console.info('generate(', gender, geohash, maxTries, ')')\n    gender = gender ?? 666\n    if (gender === 666 && !geohash) return Keychain.generateAnonymous()\n    if (!geohash) return prayFor(Buffer.from([gender]), 0b11, maxTries)\n\n    const nBits = GEO_BITS + 1\n    const buf = Buffer.allocUnsafe(roundByte(nBits))\n    const prefix = packGeo(geohash, GEO_BITS, buf)\n    shift(prefix, gender & 1)\n    // shift(prefix, (gender >> 1) & 1) // TODO: Move this flag to profile block?\n    const mask = nBits % 8\n      ? (1 << (nBits % 8)) - 1\n      : 0xff\n    console.info('Searching for', nBits, prefix.toString('hex'), binstr(prefix).length, 'mask', mask.toString(2))\n    return prayFor(prefix, mask, maxTries)\n  }\n\n  static decodePk (pk) {\n    return decodeSL(pk, GEO_BITS)\n  }\n}\n\nconst MAX_SEARCH = 500000 // ~10second on my laptop\nfunction prayFor (b, mask = 0xff, max = MAX_SEARCH) {\n  if (!Buffer.isBuffer(b) && !Array.isArray(b)) throw new Error('Array or Buffer Expected')\n  const pk = Buffer.allocUnsafe(SIGN_PKBYTES)\n  const sk = Buffer.allocUnsafe(SIGN_SKBYTES)\n  const nBytes = b.length\n\n  for (let i = 0; i < max; i++) {\n    crypto_sign_keypair(pk, sk)\n    let v = true\n    for (let n = 0; v && n < nBytes; n++) {\n      v = (n + 1 === nBytes)\n        ? (pk[n] & mask) === (b[n] & mask)\n        : v = pk[n] === b[n]\n    }\n    if (v) return { pk, sk }\n  }\n}\n\nmodule.exports = Keychain\n","export default (typeof global !== \"undefined\" ? global :\n  typeof self !== \"undefined\" ? self :\n  typeof window !== \"undefined\" ? window : {});","function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nlet src_url_equal_anchor;\nfunction src_url_equal(element_src, url) {\n    if (!src_url_equal_anchor) {\n        src_url_equal_anchor = document.createElement('a');\n    }\n    src_url_equal_anchor.href = url;\n    return element_src === src_url_equal_anchor.href;\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn) {\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\nfunction get_all_dirty_from_scope($$scope) {\n    if ($$scope.ctx.length > 32) {\n        const dirty = [];\n        const length = $$scope.ctx.length / 32;\n        for (let i = 0; i < length; i++) {\n            dirty[i] = -1;\n        }\n        return dirty;\n    }\n    return -1;\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\nfunction start_hydrating() {\n    is_hydrating = true;\n}\nfunction end_hydrating() {\n    is_hydrating = false;\n}\nfunction upper_bound(low, high, key, value) {\n    // Return first index of value larger than input value in the range [low, high)\n    while (low < high) {\n        const mid = low + ((high - low) >> 1);\n        if (key(mid) <= value) {\n            low = mid + 1;\n        }\n        else {\n            high = mid;\n        }\n    }\n    return low;\n}\nfunction init_hydrate(target) {\n    if (target.hydrate_init)\n        return;\n    target.hydrate_init = true;\n    // We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n    let children = target.childNodes;\n    // If target is <head>, there may be children without claim_order\n    if (target.nodeName === 'HEAD') {\n        const myChildren = [];\n        for (let i = 0; i < children.length; i++) {\n            const node = children[i];\n            if (node.claim_order !== undefined) {\n                myChildren.push(node);\n            }\n        }\n        children = myChildren;\n    }\n    /*\n    * Reorder claimed children optimally.\n    * We can reorder claimed children optimally by finding the longest subsequence of\n    * nodes that are already claimed in order and only moving the rest. The longest\n    * subsequence subsequence of nodes that are claimed in order can be found by\n    * computing the longest increasing subsequence of .claim_order values.\n    *\n    * This algorithm is optimal in generating the least amount of reorder operations\n    * possible.\n    *\n    * Proof:\n    * We know that, given a set of reordering operations, the nodes that do not move\n    * always form an increasing subsequence, since they do not move among each other\n    * meaning that they must be already ordered among each other. Thus, the maximal\n    * set of nodes that do not move form a longest increasing subsequence.\n    */\n    // Compute longest increasing subsequence\n    // m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n    const m = new Int32Array(children.length + 1);\n    // Predecessor indices + 1\n    const p = new Int32Array(children.length);\n    m[0] = -1;\n    let longest = 0;\n    for (let i = 0; i < children.length; i++) {\n        const current = children[i].claim_order;\n        // Find the largest subsequence length such that it ends in a value less than our current value\n        // upper_bound returns first greater value, so we subtract one\n        // with fast path for when we are on the current longest subsequence\n        const seqLen = ((longest > 0 && children[m[longest]].claim_order <= current) ? longest + 1 : upper_bound(1, longest, idx => children[m[idx]].claim_order, current)) - 1;\n        p[i] = m[seqLen] + 1;\n        const newLen = seqLen + 1;\n        // We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n        m[newLen] = i;\n        longest = Math.max(newLen, longest);\n    }\n    // The longest increasing subsequence of nodes (initially reversed)\n    const lis = [];\n    // The rest of the nodes, nodes that will be moved\n    const toMove = [];\n    let last = children.length - 1;\n    for (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n        lis.push(children[cur - 1]);\n        for (; last >= cur; last--) {\n            toMove.push(children[last]);\n        }\n        last--;\n    }\n    for (; last >= 0; last--) {\n        toMove.push(children[last]);\n    }\n    lis.reverse();\n    // We sort the nodes being moved to guarantee that their insertion order matches the claim order\n    toMove.sort((a, b) => a.claim_order - b.claim_order);\n    // Finally, we move the nodes\n    for (let i = 0, j = 0; i < toMove.length; i++) {\n        while (j < lis.length && toMove[i].claim_order >= lis[j].claim_order) {\n            j++;\n        }\n        const anchor = j < lis.length ? lis[j] : null;\n        target.insertBefore(toMove[i], anchor);\n    }\n}\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction append_styles(target, style_sheet_id, styles) {\n    const append_styles_to = get_root_for_style(target);\n    if (!append_styles_to.getElementById(style_sheet_id)) {\n        const style = element('style');\n        style.id = style_sheet_id;\n        style.textContent = styles;\n        append_stylesheet(append_styles_to, style);\n    }\n}\nfunction get_root_for_style(node) {\n    if (!node)\n        return document;\n    const root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n    if (root && root.host) {\n        return root;\n    }\n    return node.ownerDocument;\n}\nfunction append_empty_stylesheet(node) {\n    const style_element = element('style');\n    append_stylesheet(get_root_for_style(node), style_element);\n    return style_element.sheet;\n}\nfunction append_stylesheet(node, style) {\n    append(node.head || node, style);\n}\nfunction append_hydration(target, node) {\n    if (is_hydrating) {\n        init_hydrate(target);\n        if ((target.actual_end_child === undefined) || ((target.actual_end_child !== null) && (target.actual_end_child.parentElement !== target))) {\n            target.actual_end_child = target.firstChild;\n        }\n        // Skip nodes of undefined ordering\n        while ((target.actual_end_child !== null) && (target.actual_end_child.claim_order === undefined)) {\n            target.actual_end_child = target.actual_end_child.nextSibling;\n        }\n        if (node !== target.actual_end_child) {\n            // We only insert if the ordering of this node should be modified or the parent node is not target\n            if (node.claim_order !== undefined || node.parentNode !== target) {\n                target.insertBefore(node, target.actual_end_child);\n            }\n        }\n        else {\n            target.actual_end_child = node.nextSibling;\n        }\n    }\n    else if (node.parentNode !== target || node.nextSibling !== null) {\n        target.appendChild(node);\n    }\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction insert_hydration(target, node, anchor) {\n    if (is_hydrating && !anchor) {\n        append_hydration(target, node);\n    }\n    else if (node.parentNode !== target || node.nextSibling != anchor) {\n        target.insertBefore(node, anchor || null);\n    }\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction trusted(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.isTrusted)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction init_claim_info(nodes) {\n    if (nodes.claim_info === undefined) {\n        nodes.claim_info = { last_index: 0, total_claimed: 0 };\n    }\n}\nfunction claim_node(nodes, predicate, processNode, createNode, dontUpdateLastIndex = false) {\n    // Try to find nodes in an order such that we lengthen the longest increasing subsequence\n    init_claim_info(nodes);\n    const resultNode = (() => {\n        // We first try to find an element after the previous one\n        for (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                return node;\n            }\n        }\n        // Otherwise, we try to find one before\n        // We iterate in reverse so that we don't go too far back\n        for (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                else if (replacement === undefined) {\n                    // Since we spliced before the last_index, we decrease it\n                    nodes.claim_info.last_index--;\n                }\n                return node;\n            }\n        }\n        // If we can't find any matching node, we create a new one\n        return createNode();\n    })();\n    resultNode.claim_order = nodes.claim_info.total_claimed;\n    nodes.claim_info.total_claimed += 1;\n    return resultNode;\n}\nfunction claim_element_base(nodes, name, attributes, create_element) {\n    return claim_node(nodes, (node) => node.nodeName === name, (node) => {\n        const remove = [];\n        for (let j = 0; j < node.attributes.length; j++) {\n            const attribute = node.attributes[j];\n            if (!attributes[attribute.name]) {\n                remove.push(attribute.name);\n            }\n        }\n        remove.forEach(v => node.removeAttribute(v));\n        return undefined;\n    }, () => create_element(name));\n}\nfunction claim_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, element);\n}\nfunction claim_svg_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, svg_element);\n}\nfunction claim_text(nodes, data) {\n    return claim_node(nodes, (node) => node.nodeType === 3, (node) => {\n        const dataStr = '' + data;\n        if (node.data.startsWith(dataStr)) {\n            if (node.data.length !== dataStr.length) {\n                return node.splitText(dataStr.length);\n            }\n        }\n        else {\n            node.data = dataStr;\n        }\n    }, () => text(data), true // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n    );\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction find_comment(nodes, text, start) {\n    for (let i = start; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n            return i;\n        }\n    }\n    return nodes.length;\n}\nfunction claim_html_tag(nodes, is_svg) {\n    // find html opening tag\n    const start_index = find_comment(nodes, 'HTML_TAG_START', 0);\n    const end_index = find_comment(nodes, 'HTML_TAG_END', start_index);\n    if (start_index === end_index) {\n        return new HtmlTagHydration(undefined, is_svg);\n    }\n    init_claim_info(nodes);\n    const html_tag_nodes = nodes.splice(start_index, end_index - start_index + 1);\n    detach(html_tag_nodes[0]);\n    detach(html_tag_nodes[html_tag_nodes.length - 1]);\n    const claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n    for (const n of claimed_nodes) {\n        n.claim_order = nodes.claim_info.total_claimed;\n        nodes.claim_info.total_claimed += 1;\n    }\n    return new HtmlTagHydration(claimed_nodes, is_svg);\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    if (value === null) {\n        node.style.removeProperty(key);\n    }\n    else {\n        node.style.setProperty(key, value, important ? 'important' : '');\n    }\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n    select.selectedIndex = -1; // no option should be selected\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;');\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, bubbles, cancelable, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor(is_svg = false) {\n        this.is_svg = false;\n        this.is_svg = is_svg;\n        this.e = this.n = null;\n    }\n    c(html) {\n        this.h(html);\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            if (this.is_svg)\n                this.e = svg_element(target.nodeName);\n            else\n                this.e = element(target.nodeName);\n            this.t = target;\n            this.c(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\nclass HtmlTagHydration extends HtmlTag {\n    constructor(claimed_nodes, is_svg = false) {\n        super(is_svg);\n        this.e = this.n = null;\n        this.l = claimed_nodes;\n    }\n    c(html) {\n        if (this.l) {\n            this.n = this.l;\n        }\n        else {\n            super.c(html);\n        }\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert_hydration(this.t, this.n[i], anchor);\n        }\n    }\n}\nfunction attribute_to_object(attributes) {\n    const result = {};\n    for (const attribute of attributes) {\n        result[attribute.name] = attribute.value;\n    }\n    return result;\n}\nfunction get_custom_elements_slots(element) {\n    const result = {};\n    element.childNodes.forEach((node) => {\n        result[node.slot || 'default'] = true;\n    });\n    return result;\n}\n\n// we need to store the information for multiple documents because a Svelte application could also contain iframes\n// https://github.com/sveltejs/svelte/issues/3624\nconst managed_styles = new Map();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_style_information(doc, node) {\n    const info = { stylesheet: append_empty_stylesheet(node), rules: {} };\n    managed_styles.set(doc, info);\n    return info;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = get_root_for_style(node);\n    const { stylesheet, rules } = managed_styles.get(doc) || create_style_information(doc, node);\n    if (!rules[name]) {\n        rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        managed_styles.forEach(info => {\n            const { stylesheet } = info;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            info.rules = {};\n        });\n        managed_styles.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail, { cancelable = false } = {}) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail, { cancelable });\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n            return !event.defaultPrevented;\n        }\n        return true;\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n    return context;\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\nfunction getAllContexts() {\n    return get_current_component().$$.context;\n}\nfunction hasContext(key) {\n    return get_current_component().$$.context.has(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        // @ts-ignore\n        callbacks.slice().forEach(fn => fn.call(this, event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\nlet flushidx = 0; // Do *not* move this inside the flush() function\nfunction flush() {\n    const saved_component = current_component;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        while (flushidx < dirty_components.length) {\n            const component = dirty_components[flushidx];\n            flushidx++;\n            set_current_component(component);\n            update(component.$$);\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        flushidx = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    seen_callbacks.clear();\n    set_current_component(saved_component);\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n    else if (callback) {\n        callback();\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            started = true;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = (program.b - t);\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro  we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro  needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            if (info.blocks[i] === block) {\n                                info.blocks[i] = null;\n                            }\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\nfunction update_await_block_branch(info, ctx, dirty) {\n    const child_ctx = ctx.slice();\n    const { resolved } = info;\n    if (info.current === info.then) {\n        child_ctx[info.value] = resolved;\n    }\n    if (info.current === info.catch) {\n        child_ctx[info.error] = resolved;\n    }\n    info.block.p(child_ctx, dirty);\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst void_element_names = /^(?:area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/;\nfunction is_void(name) {\n    return void_element_names.test(name) || name.toLowerCase() === '!doctype';\n}\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, attrs_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (attrs_to_add) {\n        const classes_to_add = attrs_to_add.classes;\n        const styles_to_add = attrs_to_add.styles;\n        if (classes_to_add) {\n            if (attributes.class == null) {\n                attributes.class = classes_to_add;\n            }\n            else {\n                attributes.class += ' ' + classes_to_add;\n            }\n        }\n        if (styles_to_add) {\n            if (attributes.style == null) {\n                attributes.style = style_object_to_string(styles_to_add);\n            }\n            else {\n                attributes.style = style_object_to_string(merge_ssr_styles(attributes.style, styles_to_add));\n            }\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${value}\"`;\n        }\n    });\n    return str;\n}\nfunction merge_ssr_styles(style_attribute, style_directive) {\n    const style_object = {};\n    for (const individual_style of style_attribute.split(';')) {\n        const colon_index = individual_style.indexOf(':');\n        const name = individual_style.slice(0, colon_index).trim();\n        const value = individual_style.slice(colon_index + 1).trim();\n        if (!name)\n            continue;\n        style_object[name] = value;\n    }\n    for (const name in style_directive) {\n        const value = style_directive[name];\n        if (value) {\n            style_object[name] = value;\n        }\n        else {\n            delete style_object[name];\n        }\n    }\n    return style_object;\n}\nconst ATTR_REGEX = /[&\"]/g;\nconst CONTENT_REGEX = /[&<]/g;\n/**\n * Note: this method is performance sensitive and has been optimized\n * https://github.com/sveltejs/svelte/pull/5701\n */\nfunction escape(value, is_attr = false) {\n    const str = String(value);\n    const pattern = is_attr ? ATTR_REGEX : CONTENT_REGEX;\n    pattern.lastIndex = 0;\n    let escaped = '';\n    let last = 0;\n    while (pattern.test(str)) {\n        const i = pattern.lastIndex - 1;\n        const ch = str[i];\n        escaped += str.substring(last, i) + (ch === '&' ? '&amp;' : (ch === '\"' ? '&quot;' : '&lt;'));\n        last = i + 1;\n    }\n    return escaped + str.substring(last);\n}\nfunction escape_attribute_value(value) {\n    // keep booleans, null, and undefined for the sake of `spread`\n    const should_escape = typeof value === 'string' || (value && typeof value === 'object');\n    return should_escape ? escape(value, true) : value;\n}\nfunction escape_object(obj) {\n    const result = {};\n    for (const key in obj) {\n        result[key] = escape_attribute_value(obj[key]);\n    }\n    return result;\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots, context) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(context || (parent_component ? parent_component.$$.context : [])),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, { $$slots = {}, context = new Map() } = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, $$slots, context);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    const assignment = (boolean && value === true) ? '' : `=\"${escape(value, true)}\"`;\n    return ` ${name}${assignment}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\nfunction style_object_to_string(style_object) {\n    return Object.keys(style_object)\n        .filter(key => style_object[key])\n        .map(key => `${key}: ${style_object[key]};`)\n        .join(' ');\n}\nfunction add_styles(style_object) {\n    const styles = style_object_to_string(style_object);\n    return styles ? ` style=\"${styles}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor, customElement) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    if (!customElement) {\n        // onMount happens before the initial afterUpdate\n        add_render_callback(() => {\n            const new_on_destroy = on_mount.map(run).filter(is_function);\n            if (on_destroy) {\n                on_destroy.push(...new_on_destroy);\n            }\n            else {\n                // Edge case - component was destroyed immediately,\n                // most likely as a result of a binding initialising\n                run_all(new_on_destroy);\n            }\n            component.$$.on_mount = [];\n        });\n    }\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, append_styles, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        on_disconnect: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false,\n        root: options.target || parent_component.$$.root\n    };\n    append_styles && append_styles($$.root);\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, options.props || {}, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            start_hydrating();\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor, options.customElement);\n        end_hydrating();\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            const { on_mount } = this.$$;\n            this.$$.on_disconnect = on_mount.map(run).filter(is_function);\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        disconnectedCallback() {\n            run_all(this.$$.on_disconnect);\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.49.0' }, detail), { bubbles: true }));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction append_hydration_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append_hydration(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction insert_hydration_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert_hydration(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\nfunction validate_dynamic_element(tag) {\n    const is_string = typeof tag === 'string';\n    if (tag && !is_string) {\n        throw new Error('<svelte:element> expects \"this\" attribute to be a string.');\n    }\n}\nfunction validate_void_dynamic_element(tag) {\n    if (tag && is_void(tag)) {\n        throw new Error(`<svelte:element this=\"${tag}\"> is self-closing and cannot have content.`);\n    }\n}\n/**\n * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.\n */\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\n/**\n * Base class to create strongly typed Svelte components.\n * This only exists for typing purposes and should be used in `.d.ts` files.\n *\n * ### Example:\n *\n * You have component library on npm called `component-library`, from which\n * you export a component called `MyComponent`. For Svelte+TypeScript users,\n * you want to provide typings. Therefore you create a `index.d.ts`:\n * ```ts\n * import { SvelteComponentTyped } from \"svelte\";\n * export class MyComponent extends SvelteComponentTyped<{foo: string}> {}\n * ```\n * Typing this makes it possible for IDEs like VS Code with the Svelte extension\n * to provide intellisense and to use the component like this in a Svelte file\n * with TypeScript:\n * ```svelte\n * <script lang=\"ts\">\n * \timport { MyComponent } from \"component-library\";\n * </script>\n * <MyComponent foo={'bar'} />\n * ```\n *\n * #### Why not make this part of `SvelteComponent(Dev)`?\n * Because\n * ```ts\n * class ASubclassOfSvelteComponent extends SvelteComponent<{foo: string}> {}\n * const component: typeof SvelteComponent = ASubclassOfSvelteComponent;\n * ```\n * will throw a type error, so we need to separate the more strictly typed class.\n */\nclass SvelteComponentTyped extends SvelteComponentDev {\n    constructor(options) {\n        super(options);\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, HtmlTagHydration, SvelteComponent, SvelteComponentDev, SvelteComponentTyped, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_styles, add_transform, afterUpdate, append, append_dev, append_empty_stylesheet, append_hydration, append_hydration_dev, append_styles, assign, attr, attr_dev, attribute_to_object, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_html_tag, claim_space, claim_svg_element, claim_text, clear_loops, component_subscribe, compute_rest_props, compute_slots, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, end_hydrating, escape, escape_attribute_value, escape_object, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getAllContexts, getContext, get_all_dirty_from_scope, get_binding_group_value, get_current_component, get_custom_elements_slots, get_root_for_style, get_slot_changes, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, hasContext, has_prop, identity, init, insert, insert_dev, insert_hydration, insert_hydration_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, is_void, listen, listen_dev, loop, loop_guard, merge_ssr_styles, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, src_url_equal, start_hydrating, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, trusted, update_await_block_branch, update_keyed_each, update_slot, update_slot_base, validate_component, validate_dynamic_element, validate_each_argument, validate_each_keys, validate_slots, validate_store, validate_void_dynamic_element, xlink_attr };\n","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal/index.mjs';\nexport { get_store_value as get } from '../internal/index.mjs';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = new Set();\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (const subscriber of subscribers) {\n                    subscriber[1]();\n                    subscriber_queue.push(subscriber, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.add(subscriber);\n        if (subscribers.size === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            subscribers.delete(subscriber);\n            if (subscribers.size === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","import { BrowserLevel } from 'browser-level'\nimport Geohash from 'latlon-geohash'\nimport Kernel from '../blockend/'\nimport Keychain from '../blockend/keychain'\nimport { readable } from 'svelte/store'\nimport { mute, gate, init, write, combine, get, nfo } from 'piconuro'\nimport { navigate } from './router'\nconst Modem56 = window.Modem56\nconst TOPIC = 'picochat-testnet'\n\n/**\n * Pico::N(e)uro -> svelte adapter\n * */\nexport function svlt (neuron, dbg) {\n  return readable(null, set =>\n    !dbg\n      ? neuron(set)\n      : nfo(neuron, dbg)(set)\n  )\n}\n\nconst ROOT_DB = new BrowserLevel('PicoChat')\nexport const kernel = new Kernel(\n  ROOT_DB.sublevel('app', {\n    keyEncoding: 'buffer',\n    valueEncoding: 'buffer'\n  })\n)\n\nexport const keychain = new Keychain(\n  ROOT_DB.sublevel('key', {\n    keyEncoding: 'buffer',\n    valueEncoding: 'buffer'\n  })\n)\n\nexport const keygen = (gender, geo, attempts) => {\n  return Keychain.generate(gender, geo, attempts)\n}\n\nexport function decodePk (pk) {\n  const info = Keychain.decodePk(pk)\n  const ll = Geohash.decode(info.geohash)\n  return { ...info, ...ll }\n}\n\n// Helpers hooks for quick register access\nexport function Profile (dbg) {\n  return svlt(kernel.$profile(), dbg)\n}\n\nexport function Peers (dbg) {\n  return svlt(kernel.$peers(), dbg)\n}\n\nexport function Peer (id, dbg) {\n  return svlt(kernel.$peer(id), dbg)\n}\n\nexport function Vibes (dbg) {\n  return svlt(\n    kernel.$vibes(), dbg\n  )\n}\n\nexport function NotificationsCount () {\n  return svlt(\n    mute(\n      combine(kernel.$vibes(), kernel.$chats()),\n      ([vibes, chats]) => vibes.reduce(\n        (sum, v) => v.state === 'waiting_local' ? sum + 1 : sum,\n        0\n      ) +\n      chats.reduce( // Dosen't work cause chats are actually vibe-objects.\n        (sum, c) => c.myTurn ? sum + 1 : sum,\n        0\n      )\n    )\n  )\n}\n\nexport function Chats () {\n  return svlt(kernel.$chats())\n}\n\nexport function Cooldowns () {\n  return svlt(kernel.$cooldowns())\n}\n\nexport function Connections () {\n  return svlt(\n    gate(init(0, mute(kernel.$connections(), cnns => cnns.length)))\n  )\n}\n\nexport function GameOver () {\n  return svlt(\n    mute(\n      kernel.$profile(), p => p.state === 'expired'\n    )\n  )\n}\n\n// Boot up\nlet tryBoot = null\nexport let lastError = null\n\nconst [$kstate, setKstate] = write('loading')\nconst [$error, setError] = write()\nconst [$entered, setEntered] = write(false) // block published/ participating\nconst [$swarming, setSwarming] = write(false) // are the m56 lights blinking?\nconst [$hasKey, setHasKey] = write(false)\nconst [$hasProfile, setHasProfile] = write(false)\nconst [$profilePicture, setProfilePicture] = write(null)\n\nconst $state = combine({\n  state: $kstate,\n  error: $error,\n  hasKey: $hasKey,\n  hasProfile: $hasProfile,\n  entered: $entered,\n  swarming: $swarming\n})\n\nexport const state = svlt($state)\nexport const profilePicture = svlt($profilePicture)\n\n/* Bootloader */\nexport function boot () {\n  if (!tryBoot) {\n    tryBoot = keychain.readIdentity()\n      .then(sk => {\n        setHasKey(!!sk)\n        return keychain.readProfile()\n      })\n      .then(pTemplate => {\n        setHasProfile(!!pTemplate)\n        if (pTemplate?.picture) setProfilePicture(pTemplate.picture)\n        return kernel.boot()\n      })\n      .then(entered => {\n        setEntered(entered)\n        kernel.startGC()\n      })\n      .catch(err => {\n        console.error('kernel boot failure', err)\n        lastError = err\n        setError(err)\n        setKstate('error')\n        throw err\n      })\n      .then(entered => { // Auto-redirect if needed\n        setKstate('running')\n        const s = get($state)\n        console.info('Final state', s)\n        const autoSwarm = JSON.parse(window.localStorage.getItem('auto_swarm'))\n        if (s.error) window.location.hash = '/error?message=' + s.error.message\n        else if (!s.hasKey) navigate('/keygen')\n        else if (!s.hasProfile) navigate('/profile')\n        else return autoSwarm && connectSwarm()\n      })\n  }\n  // tryBoot.then(do something everytime boot is invoked)\n  return tryBoot\n}\n\n/*\n * subscribes your component to a specific conversation.\n * returns a high-level object containing both stats and actions\n *\n * usage example:\n * const {\n *   // Props\n *   myTurn, // boolean, actions can only be invoked when true.\n *   updatedAt, // Last activity of chat\n *   status, // string '|active|timeout|exhausted|ended'\n *   messages // Array of messages.\n *\n *   // Actions\n *   send, // async function, send(message: string)\n *   pass, // async function, passes turn to opponent\n *   bye,  // async function, bye(mood)\n * } = useChat(id) // <-- same id as vibeId\n */\nexport function Chat (chatId, d) {\n  if (chatId === 'mock') return svlt(mockChat())\n  return svlt(kernel.$chat(chatId), d)\n}\n\n/**\n *  It's **beep** time!\n *      \n *   ___|_\n *  /____/|  ~ Modem 56 ~\n * |_o_=_|/\n *\n */\nlet modem = null // hardware is expensive, we can only afford a single modem for now.\n// Helper to wire up modem56 to kernel and enter a pub in a single action.\nexport async function connectSwarm () {\n  if (!Modem56) throw new Error('Modem not available, did you load it?')\n  const devOpts = {\n    // Attempted to debug: https://github.com/RangerMauve/hyperswarm-web/issues/20\n    // announceLocalAddress: true,\n    // webrtcBootstrap: ['ws://localhost:4977/signal']\n  }\n  if (!modem) modem = new Modem56(null, devOpts)\n  else return // already connected\n  // else modem.leave()\n  modem.join(TOPIC, kernel.spawnWire.bind(kernel))\n  setSwarming(true)\n}\n\nexport function encodeImage (url) {\n  const regex = /^data:([^;]+);base64,/\n  const m = url.match(regex)\n  if (m[1] !== 'image/jpeg') throw new Error('CanvasExportedUnexpectedFiletype: ' + m[1])\n  return Buffer.from(url.replace(regex, ''), 'base64')\n}\n\nexport function decodeImage (buf) {\n  return 'data:image/jpeg;base64,' + buf?.toString('base64')\n}\n\nexport async function updateProfile (profile) {\n  await keychain.writeProfile(profile)\n  setHasProfile(true)\n  if (profile.picture) setProfilePicture(profile.picture)\n  if (get($hasKey) && !get($swarming)) {\n    await connectSwarm()\n    navigate('/pub')\n  }\n}\n\nexport async function storeIdentity (sk) {\n  await keychain.writeIdentity(sk)\n  setHasKey(true)\n}\n\nexport async function enter () {\n  if (!get($hasKey)) return navigate('/keygen')\n  if (!get($hasProfile)) return navigate('/profile')\n  // TODO: in this contexted $entered refers to if profile-block is published or not\n  // need to refactor kernel states for clarity\n  if (!get($entered)) {\n    const sk = await keychain.readIdentity()\n    const profile = await keychain.readProfile()\n    await kernel.register(profile, sk)\n    setEntered(true)\n  }\n  return connectSwarm()\n}\n\nexport async function purge (purgeKeychain = false) {\n  const msg = purgeKeychain\n    ? 'You are about to burn your passport and everything with it... you sure about this?'\n    : 'Permanently wipe ALL data, you sure?'\n  if (!window.confirm(msg)) return\n  if (purgeKeychain) await keychain.db.clear()\n  await kernel.db.clear()\n  window.location.reload()\n}\n\nexport async function reloadStore () {\n  const m = await kernel.store.reload()\n  console.info('Stores refreshed', m)\n  window.location.reload()\n}\n\nexport async function saveBackup () {\n  const File = window.File\n  const secret = await keychain.readIdentity()\n  const b = new File(\n    [secret.toString('hex')],\n    'idsqr-insecure-backup.txt',\n    { type: 'application/text' }\n  )\n  const u = URL.createObjectURL(b)\n  window.open(u, '_blank')\n  // TODO: revokeObjectURL\n}\n\nfunction mockChat () {\n  const [$initiator, setInitiator] = write(true)\n  const [$turn, setTurn] = write(true)\n  const $msgs = init([\n    'Hello',\n    'Hi',\n    'Weather\\'s nice! ',\n    'You\\'re joking right?',\n    undefined,\n    'There\\'s a thunderstorm going on!',\n    'No way! That\\'s so cool!',\n    'The roof is gone ',\n    'Is your pants still on?',\n    undefined,\n    'Please tell me you\\'re not stroking yourself during a hurricane',\n    'Yup!'\n  ])\n\n  return mute(\n    combine($initiator, $turn, $msgs, $profilePicture),\n    ([initiator, myTurn, msgs, picture]) => {\n      let graph = ''\n      const messages = msgs.map((m, i) => {\n        const remote = i % 2\n        const type = remote ^ initiator ? 'sent' : 'received'\n        graph += m\n          ? remote ? '' : ''\n          : remote ? '' : ''\n        return { type, content: m || '', pass: !m }\n      })\n\n      return {\n        peer: {\n          name: !initiator ? 'Whitemane' : 'Blackie',\n          picture,\n          tagline: 'mock tag',\n          date: Date.now(),\n          sex: 0,\n          score: 99,\n          age: 23\n        },\n        myTurn,\n        initiator,\n        state: 'active',\n        graph,\n        health: 2,\n        expiresAt: Date.now() + 24 * 60 * 60 * 1000,\n        async send () {},\n        async pass () {\n          setTurn(false)\n          return new Promise(resolve => {\n            setTimeout(() => {\n              setTurn(true)\n              resolve()\n            }, 1000)\n          })\n        },\n        async bye () {\n          setInitiator(!initiator)\n        },\n        mLength: messages.length,\n        messages\n      }\n    }\n  )\n}\n","<script>\nimport { createEventDispatcher } from 'svelte'\n// Silly workaround for svelte props clashing with custom attrs.\nexport let open = true\nconst dispatch = createEventDispatcher()\nlet elem\nfunction updateAttribute(node, name, value) {\n  if (value === null || value === false) {\n    node.removeAttribute(name);\n  }\n  else node.setAttribute(name, value+\"\")\n}\nfunction attr(node, entry) {\n  if(entry) {\n     updateAttribute(node, entry[0], entry[1])\n   }\n  return {\n    update(updated) {\n      if(!updated) return\n      updateAttribute(node, updated[0], updated[1])\n    }\n  }\n}\nfunction onClick (ev) {\n  if (ev.target !== elem) return\n  dispatch('fade')\n}\n\n</script>\n<dialog  use:attr={[\"open\", !!open]} on:click={onClick} bind:this={elem}>\n  <slot>Empty Modal</slot>\n</dialog>\n","<script>\nexport let id = ''\nexport let tag = ''\nexport let nofill = false\nconst SPRITE_URL = 'build/sprites.svg'\nconst ref = `${SPRITE_URL}#${id}`\nconst classes = `icon ${tag}`.trim()\n</script>\n<svg class={classes} class:nofill={nofill}>\n  <use xlink:href={ref} href={ref}></use>\n</svg>\n<style>\n.icon { fill: unset; }\n.nofill { fill: none; }\n</style>\n","//---------------------------------------------------------------------\n//\n// QR Code Generator for JavaScript\n//\n// Copyright (c) 2009 Kazuhiko Arase\n//\n// URL: http://www.d-project.com/\n//\n// Licensed under the MIT license:\n//  http://www.opensource.org/licenses/mit-license.php\n//\n// The word 'QR Code' is registered trademark of\n// DENSO WAVE INCORPORATED\n//  http://www.denso-wave.com/qrcode/faqpatent-e.html\n//\n//---------------------------------------------------------------------\n\nvar qrcode = function() {\n\n  //---------------------------------------------------------------------\n  // qrcode\n  //---------------------------------------------------------------------\n\n  /**\n   * qrcode\n   * @param typeNumber 1 to 40\n   * @param errorCorrectionLevel 'L','M','Q','H'\n   */\n  var qrcode = function(typeNumber, errorCorrectionLevel) {\n\n    var PAD0 = 0xEC;\n    var PAD1 = 0x11;\n\n    var _typeNumber = typeNumber;\n    var _errorCorrectionLevel = QRErrorCorrectionLevel[errorCorrectionLevel];\n    var _modules = null;\n    var _moduleCount = 0;\n    var _dataCache = null;\n    var _dataList = [];\n\n    var _this = {};\n\n    var makeImpl = function(test, maskPattern) {\n\n      _moduleCount = _typeNumber * 4 + 17;\n      _modules = function(moduleCount) {\n        var modules = new Array(moduleCount);\n        for (var row = 0; row < moduleCount; row += 1) {\n          modules[row] = new Array(moduleCount);\n          for (var col = 0; col < moduleCount; col += 1) {\n            modules[row][col] = null;\n          }\n        }\n        return modules;\n      }(_moduleCount);\n\n      setupPositionProbePattern(0, 0);\n      setupPositionProbePattern(_moduleCount - 7, 0);\n      setupPositionProbePattern(0, _moduleCount - 7);\n      setupPositionAdjustPattern();\n      setupTimingPattern();\n      setupTypeInfo(test, maskPattern);\n\n      if (_typeNumber >= 7) {\n        setupTypeNumber(test);\n      }\n\n      if (_dataCache == null) {\n        _dataCache = createData(_typeNumber, _errorCorrectionLevel, _dataList);\n      }\n\n      mapData(_dataCache, maskPattern);\n    };\n\n    var setupPositionProbePattern = function(row, col) {\n\n      for (var r = -1; r <= 7; r += 1) {\n\n        if (row + r <= -1 || _moduleCount <= row + r) continue;\n\n        for (var c = -1; c <= 7; c += 1) {\n\n          if (col + c <= -1 || _moduleCount <= col + c) continue;\n\n          if ( (0 <= r && r <= 6 && (c == 0 || c == 6) )\n              || (0 <= c && c <= 6 && (r == 0 || r == 6) )\n              || (2 <= r && r <= 4 && 2 <= c && c <= 4) ) {\n            _modules[row + r][col + c] = true;\n          } else {\n            _modules[row + r][col + c] = false;\n          }\n        }\n      }\n    };\n\n    var getBestMaskPattern = function() {\n\n      var minLostPoint = 0;\n      var pattern = 0;\n\n      for (var i = 0; i < 8; i += 1) {\n\n        makeImpl(true, i);\n\n        var lostPoint = QRUtil.getLostPoint(_this);\n\n        if (i == 0 || minLostPoint > lostPoint) {\n          minLostPoint = lostPoint;\n          pattern = i;\n        }\n      }\n\n      return pattern;\n    };\n\n    var setupTimingPattern = function() {\n\n      for (var r = 8; r < _moduleCount - 8; r += 1) {\n        if (_modules[r][6] != null) {\n          continue;\n        }\n        _modules[r][6] = (r % 2 == 0);\n      }\n\n      for (var c = 8; c < _moduleCount - 8; c += 1) {\n        if (_modules[6][c] != null) {\n          continue;\n        }\n        _modules[6][c] = (c % 2 == 0);\n      }\n    };\n\n    var setupPositionAdjustPattern = function() {\n\n      var pos = QRUtil.getPatternPosition(_typeNumber);\n\n      for (var i = 0; i < pos.length; i += 1) {\n\n        for (var j = 0; j < pos.length; j += 1) {\n\n          var row = pos[i];\n          var col = pos[j];\n\n          if (_modules[row][col] != null) {\n            continue;\n          }\n\n          for (var r = -2; r <= 2; r += 1) {\n\n            for (var c = -2; c <= 2; c += 1) {\n\n              if (r == -2 || r == 2 || c == -2 || c == 2\n                  || (r == 0 && c == 0) ) {\n                _modules[row + r][col + c] = true;\n              } else {\n                _modules[row + r][col + c] = false;\n              }\n            }\n          }\n        }\n      }\n    };\n\n    var setupTypeNumber = function(test) {\n\n      var bits = QRUtil.getBCHTypeNumber(_typeNumber);\n\n      for (var i = 0; i < 18; i += 1) {\n        var mod = (!test && ( (bits >> i) & 1) == 1);\n        _modules[Math.floor(i / 3)][i % 3 + _moduleCount - 8 - 3] = mod;\n      }\n\n      for (var i = 0; i < 18; i += 1) {\n        var mod = (!test && ( (bits >> i) & 1) == 1);\n        _modules[i % 3 + _moduleCount - 8 - 3][Math.floor(i / 3)] = mod;\n      }\n    };\n\n    var setupTypeInfo = function(test, maskPattern) {\n\n      var data = (_errorCorrectionLevel << 3) | maskPattern;\n      var bits = QRUtil.getBCHTypeInfo(data);\n\n      // vertical\n      for (var i = 0; i < 15; i += 1) {\n\n        var mod = (!test && ( (bits >> i) & 1) == 1);\n\n        if (i < 6) {\n          _modules[i][8] = mod;\n        } else if (i < 8) {\n          _modules[i + 1][8] = mod;\n        } else {\n          _modules[_moduleCount - 15 + i][8] = mod;\n        }\n      }\n\n      // horizontal\n      for (var i = 0; i < 15; i += 1) {\n\n        var mod = (!test && ( (bits >> i) & 1) == 1);\n\n        if (i < 8) {\n          _modules[8][_moduleCount - i - 1] = mod;\n        } else if (i < 9) {\n          _modules[8][15 - i - 1 + 1] = mod;\n        } else {\n          _modules[8][15 - i - 1] = mod;\n        }\n      }\n\n      // fixed module\n      _modules[_moduleCount - 8][8] = (!test);\n    };\n\n    var mapData = function(data, maskPattern) {\n\n      var inc = -1;\n      var row = _moduleCount - 1;\n      var bitIndex = 7;\n      var byteIndex = 0;\n      var maskFunc = QRUtil.getMaskFunction(maskPattern);\n\n      for (var col = _moduleCount - 1; col > 0; col -= 2) {\n\n        if (col == 6) col -= 1;\n\n        while (true) {\n\n          for (var c = 0; c < 2; c += 1) {\n\n            if (_modules[row][col - c] == null) {\n\n              var dark = false;\n\n              if (byteIndex < data.length) {\n                dark = ( ( (data[byteIndex] >>> bitIndex) & 1) == 1);\n              }\n\n              var mask = maskFunc(row, col - c);\n\n              if (mask) {\n                dark = !dark;\n              }\n\n              _modules[row][col - c] = dark;\n              bitIndex -= 1;\n\n              if (bitIndex == -1) {\n                byteIndex += 1;\n                bitIndex = 7;\n              }\n            }\n          }\n\n          row += inc;\n\n          if (row < 0 || _moduleCount <= row) {\n            row -= inc;\n            inc = -inc;\n            break;\n          }\n        }\n      }\n    };\n\n    var createBytes = function(buffer, rsBlocks) {\n\n      var offset = 0;\n\n      var maxDcCount = 0;\n      var maxEcCount = 0;\n\n      var dcdata = new Array(rsBlocks.length);\n      var ecdata = new Array(rsBlocks.length);\n\n      for (var r = 0; r < rsBlocks.length; r += 1) {\n\n        var dcCount = rsBlocks[r].dataCount;\n        var ecCount = rsBlocks[r].totalCount - dcCount;\n\n        maxDcCount = Math.max(maxDcCount, dcCount);\n        maxEcCount = Math.max(maxEcCount, ecCount);\n\n        dcdata[r] = new Array(dcCount);\n\n        for (var i = 0; i < dcdata[r].length; i += 1) {\n          dcdata[r][i] = 0xff & buffer.getBuffer()[i + offset];\n        }\n        offset += dcCount;\n\n        var rsPoly = QRUtil.getErrorCorrectPolynomial(ecCount);\n        var rawPoly = qrPolynomial(dcdata[r], rsPoly.getLength() - 1);\n\n        var modPoly = rawPoly.mod(rsPoly);\n        ecdata[r] = new Array(rsPoly.getLength() - 1);\n        for (var i = 0; i < ecdata[r].length; i += 1) {\n          var modIndex = i + modPoly.getLength() - ecdata[r].length;\n          ecdata[r][i] = (modIndex >= 0)? modPoly.getAt(modIndex) : 0;\n        }\n      }\n\n      var totalCodeCount = 0;\n      for (var i = 0; i < rsBlocks.length; i += 1) {\n        totalCodeCount += rsBlocks[i].totalCount;\n      }\n\n      var data = new Array(totalCodeCount);\n      var index = 0;\n\n      for (var i = 0; i < maxDcCount; i += 1) {\n        for (var r = 0; r < rsBlocks.length; r += 1) {\n          if (i < dcdata[r].length) {\n            data[index] = dcdata[r][i];\n            index += 1;\n          }\n        }\n      }\n\n      for (var i = 0; i < maxEcCount; i += 1) {\n        for (var r = 0; r < rsBlocks.length; r += 1) {\n          if (i < ecdata[r].length) {\n            data[index] = ecdata[r][i];\n            index += 1;\n          }\n        }\n      }\n\n      return data;\n    };\n\n    var createData = function(typeNumber, errorCorrectionLevel, dataList) {\n\n      var rsBlocks = QRRSBlock.getRSBlocks(typeNumber, errorCorrectionLevel);\n\n      var buffer = qrBitBuffer();\n\n      for (var i = 0; i < dataList.length; i += 1) {\n        var data = dataList[i];\n        buffer.put(data.getMode(), 4);\n        buffer.put(data.getLength(), QRUtil.getLengthInBits(data.getMode(), typeNumber) );\n        data.write(buffer);\n      }\n\n      // calc num max data.\n      var totalDataCount = 0;\n      for (var i = 0; i < rsBlocks.length; i += 1) {\n        totalDataCount += rsBlocks[i].dataCount;\n      }\n\n      if (buffer.getLengthInBits() > totalDataCount * 8) {\n        throw 'code length overflow. ('\n          + buffer.getLengthInBits()\n          + '>'\n          + totalDataCount * 8\n          + ')';\n      }\n\n      // end code\n      if (buffer.getLengthInBits() + 4 <= totalDataCount * 8) {\n        buffer.put(0, 4);\n      }\n\n      // padding\n      while (buffer.getLengthInBits() % 8 != 0) {\n        buffer.putBit(false);\n      }\n\n      // padding\n      while (true) {\n\n        if (buffer.getLengthInBits() >= totalDataCount * 8) {\n          break;\n        }\n        buffer.put(PAD0, 8);\n\n        if (buffer.getLengthInBits() >= totalDataCount * 8) {\n          break;\n        }\n        buffer.put(PAD1, 8);\n      }\n\n      return createBytes(buffer, rsBlocks);\n    };\n\n    _this.addData = function(data, mode) {\n\n      mode = mode || 'Byte';\n\n      var newData = null;\n\n      switch(mode) {\n      case 'Numeric' :\n        newData = qrNumber(data);\n        break;\n      case 'Alphanumeric' :\n        newData = qrAlphaNum(data);\n        break;\n      case 'Byte' :\n        newData = qr8BitByte(data);\n        break;\n      case 'Kanji' :\n        newData = qrKanji(data);\n        break;\n      default :\n        throw 'mode:' + mode;\n      }\n\n      _dataList.push(newData);\n      _dataCache = null;\n    };\n\n    _this.isDark = function(row, col) {\n      if (row < 0 || _moduleCount <= row || col < 0 || _moduleCount <= col) {\n        throw row + ',' + col;\n      }\n      return _modules[row][col];\n    };\n\n    _this.getModuleCount = function() {\n      return _moduleCount;\n    };\n\n    _this.make = function() {\n      if (_typeNumber < 1) {\n        var typeNumber = 1;\n\n        for (; typeNumber < 40; typeNumber++) {\n          var rsBlocks = QRRSBlock.getRSBlocks(typeNumber, _errorCorrectionLevel);\n          var buffer = qrBitBuffer();\n\n          for (var i = 0; i < _dataList.length; i++) {\n            var data = _dataList[i];\n            buffer.put(data.getMode(), 4);\n            buffer.put(data.getLength(), QRUtil.getLengthInBits(data.getMode(), typeNumber) );\n            data.write(buffer);\n          }\n\n          var totalDataCount = 0;\n          for (var i = 0; i < rsBlocks.length; i++) {\n            totalDataCount += rsBlocks[i].dataCount;\n          }\n\n          if (buffer.getLengthInBits() <= totalDataCount * 8) {\n            break;\n          }\n        }\n\n        _typeNumber = typeNumber;\n      }\n\n      makeImpl(false, getBestMaskPattern() );\n    };\n\n    _this.createTableTag = function(cellSize, margin) {\n\n      cellSize = cellSize || 2;\n      margin = (typeof margin == 'undefined')? cellSize * 4 : margin;\n\n      var qrHtml = '';\n\n      qrHtml += '<table style=\"';\n      qrHtml += ' border-width: 0px; border-style: none;';\n      qrHtml += ' border-collapse: collapse;';\n      qrHtml += ' padding: 0px; margin: ' + margin + 'px;';\n      qrHtml += '\">';\n      qrHtml += '<tbody>';\n\n      for (var r = 0; r < _this.getModuleCount(); r += 1) {\n\n        qrHtml += '<tr>';\n\n        for (var c = 0; c < _this.getModuleCount(); c += 1) {\n          qrHtml += '<td style=\"';\n          qrHtml += ' border-width: 0px; border-style: none;';\n          qrHtml += ' border-collapse: collapse;';\n          qrHtml += ' padding: 0px; margin: 0px;';\n          qrHtml += ' width: ' + cellSize + 'px;';\n          qrHtml += ' height: ' + cellSize + 'px;';\n          qrHtml += ' background-color: ';\n          qrHtml += _this.isDark(r, c)? '#000000' : '#ffffff';\n          qrHtml += ';';\n          qrHtml += '\"/>';\n        }\n\n        qrHtml += '</tr>';\n      }\n\n      qrHtml += '</tbody>';\n      qrHtml += '</table>';\n\n      return qrHtml;\n    };\n\n    _this.createSvgTag = function(cellSize, margin, alt, title) {\n\n      var opts = {};\n      if (typeof arguments[0] == 'object') {\n        // Called by options.\n        opts = arguments[0];\n        // overwrite cellSize and margin.\n        cellSize = opts.cellSize;\n        margin = opts.margin;\n        alt = opts.alt;\n        title = opts.title;\n      }\n\n      cellSize = cellSize || 2;\n      margin = (typeof margin == 'undefined')? cellSize * 4 : margin;\n\n      // Compose alt property surrogate\n      alt = (typeof alt === 'string') ? {text: alt} : alt || {};\n      alt.text = alt.text || null;\n      alt.id = (alt.text) ? alt.id || 'qrcode-description' : null;\n\n      // Compose title property surrogate\n      title = (typeof title === 'string') ? {text: title} : title || {};\n      title.text = title.text || null;\n      title.id = (title.text) ? title.id || 'qrcode-title' : null;\n\n      var size = _this.getModuleCount() * cellSize + margin * 2;\n      var c, mc, r, mr, qrSvg='', rect;\n\n      rect = 'l' + cellSize + ',0 0,' + cellSize +\n        ' -' + cellSize + ',0 0,-' + cellSize + 'z ';\n\n      qrSvg += '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"';\n      qrSvg += !opts.scalable ? ' width=\"' + size + 'px\" height=\"' + size + 'px\"' : '';\n      qrSvg += ' viewBox=\"0 0 ' + size + ' ' + size + '\" ';\n      qrSvg += ' preserveAspectRatio=\"xMinYMin meet\"';\n      qrSvg += (title.text || alt.text) ? ' role=\"img\" aria-labelledby=\"' +\n          escapeXml([title.id, alt.id].join(' ').trim() ) + '\"' : '';\n      qrSvg += '>';\n      qrSvg += (title.text) ? '<title id=\"' + escapeXml(title.id) + '\">' +\n          escapeXml(title.text) + '</title>' : '';\n      qrSvg += (alt.text) ? '<description id=\"' + escapeXml(alt.id) + '\">' +\n          escapeXml(alt.text) + '</description>' : '';\n      qrSvg += '<rect width=\"100%\" height=\"100%\" fill=\"white\" cx=\"0\" cy=\"0\"/>';\n      qrSvg += '<path d=\"';\n\n      for (r = 0; r < _this.getModuleCount(); r += 1) {\n        mr = r * cellSize + margin;\n        for (c = 0; c < _this.getModuleCount(); c += 1) {\n          if (_this.isDark(r, c) ) {\n            mc = c*cellSize+margin;\n            qrSvg += 'M' + mc + ',' + mr + rect;\n          }\n        }\n      }\n\n      qrSvg += '\" stroke=\"transparent\" fill=\"black\"/>';\n      qrSvg += '</svg>';\n\n      return qrSvg;\n    };\n\n    _this.createDataURL = function(cellSize, margin) {\n\n      cellSize = cellSize || 2;\n      margin = (typeof margin == 'undefined')? cellSize * 4 : margin;\n\n      var size = _this.getModuleCount() * cellSize + margin * 2;\n      var min = margin;\n      var max = size - margin;\n\n      return createDataURL(size, size, function(x, y) {\n        if (min <= x && x < max && min <= y && y < max) {\n          var c = Math.floor( (x - min) / cellSize);\n          var r = Math.floor( (y - min) / cellSize);\n          return _this.isDark(r, c)? 0 : 1;\n        } else {\n          return 1;\n        }\n      } );\n    };\n\n    _this.createImgTag = function(cellSize, margin, alt) {\n\n      cellSize = cellSize || 2;\n      margin = (typeof margin == 'undefined')? cellSize * 4 : margin;\n\n      var size = _this.getModuleCount() * cellSize + margin * 2;\n\n      var img = '';\n      img += '<img';\n      img += '\\u0020src=\"';\n      img += _this.createDataURL(cellSize, margin);\n      img += '\"';\n      img += '\\u0020width=\"';\n      img += size;\n      img += '\"';\n      img += '\\u0020height=\"';\n      img += size;\n      img += '\"';\n      if (alt) {\n        img += '\\u0020alt=\"';\n        img += escapeXml(alt);\n        img += '\"';\n      }\n      img += '/>';\n\n      return img;\n    };\n\n    var escapeXml = function(s) {\n      var escaped = '';\n      for (var i = 0; i < s.length; i += 1) {\n        var c = s.charAt(i);\n        switch(c) {\n        case '<': escaped += '&lt;'; break;\n        case '>': escaped += '&gt;'; break;\n        case '&': escaped += '&amp;'; break;\n        case '\"': escaped += '&quot;'; break;\n        default : escaped += c; break;\n        }\n      }\n      return escaped;\n    };\n\n    var _createHalfASCII = function(margin) {\n      var cellSize = 1;\n      margin = (typeof margin == 'undefined')? cellSize * 2 : margin;\n\n      var size = _this.getModuleCount() * cellSize + margin * 2;\n      var min = margin;\n      var max = size - margin;\n\n      var y, x, r1, r2, p;\n\n      var blocks = {\n        '': '',\n        ' ': '',\n        ' ': '',\n        '  ': ' '\n      };\n\n      var blocksLastLineNoMargin = {\n        '': '',\n        ' ': '',\n        ' ': ' ',\n        '  ': ' '\n      };\n\n      var ascii = '';\n      for (y = 0; y < size; y += 2) {\n        r1 = Math.floor((y - min) / cellSize);\n        r2 = Math.floor((y + 1 - min) / cellSize);\n        for (x = 0; x < size; x += 1) {\n          p = '';\n\n          if (min <= x && x < max && min <= y && y < max && _this.isDark(r1, Math.floor((x - min) / cellSize))) {\n            p = ' ';\n          }\n\n          if (min <= x && x < max && min <= y+1 && y+1 < max && _this.isDark(r2, Math.floor((x - min) / cellSize))) {\n            p += ' ';\n          }\n          else {\n            p += '';\n          }\n\n          // Output 2 characters per pixel, to create full square. 1 character per pixels gives only half width of square.\n          ascii += (margin < 1 && y+1 >= max) ? blocksLastLineNoMargin[p] : blocks[p];\n        }\n\n        ascii += '\\n';\n      }\n\n      if (size % 2 && margin > 0) {\n        return ascii.substring(0, ascii.length - size - 1) + Array(size+1).join('');\n      }\n\n      return ascii.substring(0, ascii.length-1);\n    };\n\n    _this.createASCII = function(cellSize, margin) {\n      cellSize = cellSize || 1;\n\n      if (cellSize < 2) {\n        return _createHalfASCII(margin);\n      }\n\n      cellSize -= 1;\n      margin = (typeof margin == 'undefined')? cellSize * 2 : margin;\n\n      var size = _this.getModuleCount() * cellSize + margin * 2;\n      var min = margin;\n      var max = size - margin;\n\n      var y, x, r, p;\n\n      var white = Array(cellSize+1).join('');\n      var black = Array(cellSize+1).join('  ');\n\n      var ascii = '';\n      var line = '';\n      for (y = 0; y < size; y += 1) {\n        r = Math.floor( (y - min) / cellSize);\n        line = '';\n        for (x = 0; x < size; x += 1) {\n          p = 1;\n\n          if (min <= x && x < max && min <= y && y < max && _this.isDark(r, Math.floor((x - min) / cellSize))) {\n            p = 0;\n          }\n\n          // Output 2 characters per pixel, to create full square. 1 character per pixels gives only half width of square.\n          line += p ? white : black;\n        }\n\n        for (r = 0; r < cellSize; r += 1) {\n          ascii += line + '\\n';\n        }\n      }\n\n      return ascii.substring(0, ascii.length-1);\n    };\n\n    _this.renderTo2dContext = function(context, cellSize) {\n      cellSize = cellSize || 2;\n      var length = _this.getModuleCount();\n      for (var row = 0; row < length; row++) {\n        for (var col = 0; col < length; col++) {\n          context.fillStyle = _this.isDark(row, col) ? 'black' : 'white';\n          context.fillRect(row * cellSize, col * cellSize, cellSize, cellSize);\n        }\n      }\n    }\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // qrcode.stringToBytes\n  //---------------------------------------------------------------------\n\n  qrcode.stringToBytesFuncs = {\n    'default' : function(s) {\n      var bytes = [];\n      for (var i = 0; i < s.length; i += 1) {\n        var c = s.charCodeAt(i);\n        bytes.push(c & 0xff);\n      }\n      return bytes;\n    }\n  };\n\n  qrcode.stringToBytes = qrcode.stringToBytesFuncs['default'];\n\n  //---------------------------------------------------------------------\n  // qrcode.createStringToBytes\n  //---------------------------------------------------------------------\n\n  /**\n   * @param unicodeData base64 string of byte array.\n   * [16bit Unicode],[16bit Bytes], ...\n   * @param numChars\n   */\n  qrcode.createStringToBytes = function(unicodeData, numChars) {\n\n    // create conversion map.\n\n    var unicodeMap = function() {\n\n      var bin = base64DecodeInputStream(unicodeData);\n      var read = function() {\n        var b = bin.read();\n        if (b == -1) throw 'eof';\n        return b;\n      };\n\n      var count = 0;\n      var unicodeMap = {};\n      while (true) {\n        var b0 = bin.read();\n        if (b0 == -1) break;\n        var b1 = read();\n        var b2 = read();\n        var b3 = read();\n        var k = String.fromCharCode( (b0 << 8) | b1);\n        var v = (b2 << 8) | b3;\n        unicodeMap[k] = v;\n        count += 1;\n      }\n      if (count != numChars) {\n        throw count + ' != ' + numChars;\n      }\n\n      return unicodeMap;\n    }();\n\n    var unknownChar = '?'.charCodeAt(0);\n\n    return function(s) {\n      var bytes = [];\n      for (var i = 0; i < s.length; i += 1) {\n        var c = s.charCodeAt(i);\n        if (c < 128) {\n          bytes.push(c);\n        } else {\n          var b = unicodeMap[s.charAt(i)];\n          if (typeof b == 'number') {\n            if ( (b & 0xff) == b) {\n              // 1byte\n              bytes.push(b);\n            } else {\n              // 2bytes\n              bytes.push(b >>> 8);\n              bytes.push(b & 0xff);\n            }\n          } else {\n            bytes.push(unknownChar);\n          }\n        }\n      }\n      return bytes;\n    };\n  };\n\n  //---------------------------------------------------------------------\n  // QRMode\n  //---------------------------------------------------------------------\n\n  var QRMode = {\n    MODE_NUMBER :    1 << 0,\n    MODE_ALPHA_NUM : 1 << 1,\n    MODE_8BIT_BYTE : 1 << 2,\n    MODE_KANJI :     1 << 3\n  };\n\n  //---------------------------------------------------------------------\n  // QRErrorCorrectionLevel\n  //---------------------------------------------------------------------\n\n  var QRErrorCorrectionLevel = {\n    L : 1,\n    M : 0,\n    Q : 3,\n    H : 2\n  };\n\n  //---------------------------------------------------------------------\n  // QRMaskPattern\n  //---------------------------------------------------------------------\n\n  var QRMaskPattern = {\n    PATTERN000 : 0,\n    PATTERN001 : 1,\n    PATTERN010 : 2,\n    PATTERN011 : 3,\n    PATTERN100 : 4,\n    PATTERN101 : 5,\n    PATTERN110 : 6,\n    PATTERN111 : 7\n  };\n\n  //---------------------------------------------------------------------\n  // QRUtil\n  //---------------------------------------------------------------------\n\n  var QRUtil = function() {\n\n    var PATTERN_POSITION_TABLE = [\n      [],\n      [6, 18],\n      [6, 22],\n      [6, 26],\n      [6, 30],\n      [6, 34],\n      [6, 22, 38],\n      [6, 24, 42],\n      [6, 26, 46],\n      [6, 28, 50],\n      [6, 30, 54],\n      [6, 32, 58],\n      [6, 34, 62],\n      [6, 26, 46, 66],\n      [6, 26, 48, 70],\n      [6, 26, 50, 74],\n      [6, 30, 54, 78],\n      [6, 30, 56, 82],\n      [6, 30, 58, 86],\n      [6, 34, 62, 90],\n      [6, 28, 50, 72, 94],\n      [6, 26, 50, 74, 98],\n      [6, 30, 54, 78, 102],\n      [6, 28, 54, 80, 106],\n      [6, 32, 58, 84, 110],\n      [6, 30, 58, 86, 114],\n      [6, 34, 62, 90, 118],\n      [6, 26, 50, 74, 98, 122],\n      [6, 30, 54, 78, 102, 126],\n      [6, 26, 52, 78, 104, 130],\n      [6, 30, 56, 82, 108, 134],\n      [6, 34, 60, 86, 112, 138],\n      [6, 30, 58, 86, 114, 142],\n      [6, 34, 62, 90, 118, 146],\n      [6, 30, 54, 78, 102, 126, 150],\n      [6, 24, 50, 76, 102, 128, 154],\n      [6, 28, 54, 80, 106, 132, 158],\n      [6, 32, 58, 84, 110, 136, 162],\n      [6, 26, 54, 82, 110, 138, 166],\n      [6, 30, 58, 86, 114, 142, 170]\n    ];\n    var G15 = (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0);\n    var G18 = (1 << 12) | (1 << 11) | (1 << 10) | (1 << 9) | (1 << 8) | (1 << 5) | (1 << 2) | (1 << 0);\n    var G15_MASK = (1 << 14) | (1 << 12) | (1 << 10) | (1 << 4) | (1 << 1);\n\n    var _this = {};\n\n    var getBCHDigit = function(data) {\n      var digit = 0;\n      while (data != 0) {\n        digit += 1;\n        data >>>= 1;\n      }\n      return digit;\n    };\n\n    _this.getBCHTypeInfo = function(data) {\n      var d = data << 10;\n      while (getBCHDigit(d) - getBCHDigit(G15) >= 0) {\n        d ^= (G15 << (getBCHDigit(d) - getBCHDigit(G15) ) );\n      }\n      return ( (data << 10) | d) ^ G15_MASK;\n    };\n\n    _this.getBCHTypeNumber = function(data) {\n      var d = data << 12;\n      while (getBCHDigit(d) - getBCHDigit(G18) >= 0) {\n        d ^= (G18 << (getBCHDigit(d) - getBCHDigit(G18) ) );\n      }\n      return (data << 12) | d;\n    };\n\n    _this.getPatternPosition = function(typeNumber) {\n      return PATTERN_POSITION_TABLE[typeNumber - 1];\n    };\n\n    _this.getMaskFunction = function(maskPattern) {\n\n      switch (maskPattern) {\n\n      case QRMaskPattern.PATTERN000 :\n        return function(i, j) { return (i + j) % 2 == 0; };\n      case QRMaskPattern.PATTERN001 :\n        return function(i, j) { return i % 2 == 0; };\n      case QRMaskPattern.PATTERN010 :\n        return function(i, j) { return j % 3 == 0; };\n      case QRMaskPattern.PATTERN011 :\n        return function(i, j) { return (i + j) % 3 == 0; };\n      case QRMaskPattern.PATTERN100 :\n        return function(i, j) { return (Math.floor(i / 2) + Math.floor(j / 3) ) % 2 == 0; };\n      case QRMaskPattern.PATTERN101 :\n        return function(i, j) { return (i * j) % 2 + (i * j) % 3 == 0; };\n      case QRMaskPattern.PATTERN110 :\n        return function(i, j) { return ( (i * j) % 2 + (i * j) % 3) % 2 == 0; };\n      case QRMaskPattern.PATTERN111 :\n        return function(i, j) { return ( (i * j) % 3 + (i + j) % 2) % 2 == 0; };\n\n      default :\n        throw 'bad maskPattern:' + maskPattern;\n      }\n    };\n\n    _this.getErrorCorrectPolynomial = function(errorCorrectLength) {\n      var a = qrPolynomial([1], 0);\n      for (var i = 0; i < errorCorrectLength; i += 1) {\n        a = a.multiply(qrPolynomial([1, QRMath.gexp(i)], 0) );\n      }\n      return a;\n    };\n\n    _this.getLengthInBits = function(mode, type) {\n\n      if (1 <= type && type < 10) {\n\n        // 1 - 9\n\n        switch(mode) {\n        case QRMode.MODE_NUMBER    : return 10;\n        case QRMode.MODE_ALPHA_NUM : return 9;\n        case QRMode.MODE_8BIT_BYTE : return 8;\n        case QRMode.MODE_KANJI     : return 8;\n        default :\n          throw 'mode:' + mode;\n        }\n\n      } else if (type < 27) {\n\n        // 10 - 26\n\n        switch(mode) {\n        case QRMode.MODE_NUMBER    : return 12;\n        case QRMode.MODE_ALPHA_NUM : return 11;\n        case QRMode.MODE_8BIT_BYTE : return 16;\n        case QRMode.MODE_KANJI     : return 10;\n        default :\n          throw 'mode:' + mode;\n        }\n\n      } else if (type < 41) {\n\n        // 27 - 40\n\n        switch(mode) {\n        case QRMode.MODE_NUMBER    : return 14;\n        case QRMode.MODE_ALPHA_NUM : return 13;\n        case QRMode.MODE_8BIT_BYTE : return 16;\n        case QRMode.MODE_KANJI     : return 12;\n        default :\n          throw 'mode:' + mode;\n        }\n\n      } else {\n        throw 'type:' + type;\n      }\n    };\n\n    _this.getLostPoint = function(qrcode) {\n\n      var moduleCount = qrcode.getModuleCount();\n\n      var lostPoint = 0;\n\n      // LEVEL1\n\n      for (var row = 0; row < moduleCount; row += 1) {\n        for (var col = 0; col < moduleCount; col += 1) {\n\n          var sameCount = 0;\n          var dark = qrcode.isDark(row, col);\n\n          for (var r = -1; r <= 1; r += 1) {\n\n            if (row + r < 0 || moduleCount <= row + r) {\n              continue;\n            }\n\n            for (var c = -1; c <= 1; c += 1) {\n\n              if (col + c < 0 || moduleCount <= col + c) {\n                continue;\n              }\n\n              if (r == 0 && c == 0) {\n                continue;\n              }\n\n              if (dark == qrcode.isDark(row + r, col + c) ) {\n                sameCount += 1;\n              }\n            }\n          }\n\n          if (sameCount > 5) {\n            lostPoint += (3 + sameCount - 5);\n          }\n        }\n      };\n\n      // LEVEL2\n\n      for (var row = 0; row < moduleCount - 1; row += 1) {\n        for (var col = 0; col < moduleCount - 1; col += 1) {\n          var count = 0;\n          if (qrcode.isDark(row, col) ) count += 1;\n          if (qrcode.isDark(row + 1, col) ) count += 1;\n          if (qrcode.isDark(row, col + 1) ) count += 1;\n          if (qrcode.isDark(row + 1, col + 1) ) count += 1;\n          if (count == 0 || count == 4) {\n            lostPoint += 3;\n          }\n        }\n      }\n\n      // LEVEL3\n\n      for (var row = 0; row < moduleCount; row += 1) {\n        for (var col = 0; col < moduleCount - 6; col += 1) {\n          if (qrcode.isDark(row, col)\n              && !qrcode.isDark(row, col + 1)\n              &&  qrcode.isDark(row, col + 2)\n              &&  qrcode.isDark(row, col + 3)\n              &&  qrcode.isDark(row, col + 4)\n              && !qrcode.isDark(row, col + 5)\n              &&  qrcode.isDark(row, col + 6) ) {\n            lostPoint += 40;\n          }\n        }\n      }\n\n      for (var col = 0; col < moduleCount; col += 1) {\n        for (var row = 0; row < moduleCount - 6; row += 1) {\n          if (qrcode.isDark(row, col)\n              && !qrcode.isDark(row + 1, col)\n              &&  qrcode.isDark(row + 2, col)\n              &&  qrcode.isDark(row + 3, col)\n              &&  qrcode.isDark(row + 4, col)\n              && !qrcode.isDark(row + 5, col)\n              &&  qrcode.isDark(row + 6, col) ) {\n            lostPoint += 40;\n          }\n        }\n      }\n\n      // LEVEL4\n\n      var darkCount = 0;\n\n      for (var col = 0; col < moduleCount; col += 1) {\n        for (var row = 0; row < moduleCount; row += 1) {\n          if (qrcode.isDark(row, col) ) {\n            darkCount += 1;\n          }\n        }\n      }\n\n      var ratio = Math.abs(100 * darkCount / moduleCount / moduleCount - 50) / 5;\n      lostPoint += ratio * 10;\n\n      return lostPoint;\n    };\n\n    return _this;\n  }();\n\n  //---------------------------------------------------------------------\n  // QRMath\n  //---------------------------------------------------------------------\n\n  var QRMath = function() {\n\n    var EXP_TABLE = new Array(256);\n    var LOG_TABLE = new Array(256);\n\n    // initialize tables\n    for (var i = 0; i < 8; i += 1) {\n      EXP_TABLE[i] = 1 << i;\n    }\n    for (var i = 8; i < 256; i += 1) {\n      EXP_TABLE[i] = EXP_TABLE[i - 4]\n        ^ EXP_TABLE[i - 5]\n        ^ EXP_TABLE[i - 6]\n        ^ EXP_TABLE[i - 8];\n    }\n    for (var i = 0; i < 255; i += 1) {\n      LOG_TABLE[EXP_TABLE[i] ] = i;\n    }\n\n    var _this = {};\n\n    _this.glog = function(n) {\n\n      if (n < 1) {\n        throw 'glog(' + n + ')';\n      }\n\n      return LOG_TABLE[n];\n    };\n\n    _this.gexp = function(n) {\n\n      while (n < 0) {\n        n += 255;\n      }\n\n      while (n >= 256) {\n        n -= 255;\n      }\n\n      return EXP_TABLE[n];\n    };\n\n    return _this;\n  }();\n\n  //---------------------------------------------------------------------\n  // qrPolynomial\n  //---------------------------------------------------------------------\n\n  function qrPolynomial(num, shift) {\n\n    if (typeof num.length == 'undefined') {\n      throw num.length + '/' + shift;\n    }\n\n    var _num = function() {\n      var offset = 0;\n      while (offset < num.length && num[offset] == 0) {\n        offset += 1;\n      }\n      var _num = new Array(num.length - offset + shift);\n      for (var i = 0; i < num.length - offset; i += 1) {\n        _num[i] = num[i + offset];\n      }\n      return _num;\n    }();\n\n    var _this = {};\n\n    _this.getAt = function(index) {\n      return _num[index];\n    };\n\n    _this.getLength = function() {\n      return _num.length;\n    };\n\n    _this.multiply = function(e) {\n\n      var num = new Array(_this.getLength() + e.getLength() - 1);\n\n      for (var i = 0; i < _this.getLength(); i += 1) {\n        for (var j = 0; j < e.getLength(); j += 1) {\n          num[i + j] ^= QRMath.gexp(QRMath.glog(_this.getAt(i) ) + QRMath.glog(e.getAt(j) ) );\n        }\n      }\n\n      return qrPolynomial(num, 0);\n    };\n\n    _this.mod = function(e) {\n\n      if (_this.getLength() - e.getLength() < 0) {\n        return _this;\n      }\n\n      var ratio = QRMath.glog(_this.getAt(0) ) - QRMath.glog(e.getAt(0) );\n\n      var num = new Array(_this.getLength() );\n      for (var i = 0; i < _this.getLength(); i += 1) {\n        num[i] = _this.getAt(i);\n      }\n\n      for (var i = 0; i < e.getLength(); i += 1) {\n        num[i] ^= QRMath.gexp(QRMath.glog(e.getAt(i) ) + ratio);\n      }\n\n      // recursive call\n      return qrPolynomial(num, 0).mod(e);\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // QRRSBlock\n  //---------------------------------------------------------------------\n\n  var QRRSBlock = function() {\n\n    var RS_BLOCK_TABLE = [\n\n      // L\n      // M\n      // Q\n      // H\n\n      // 1\n      [1, 26, 19],\n      [1, 26, 16],\n      [1, 26, 13],\n      [1, 26, 9],\n\n      // 2\n      [1, 44, 34],\n      [1, 44, 28],\n      [1, 44, 22],\n      [1, 44, 16],\n\n      // 3\n      [1, 70, 55],\n      [1, 70, 44],\n      [2, 35, 17],\n      [2, 35, 13],\n\n      // 4\n      [1, 100, 80],\n      [2, 50, 32],\n      [2, 50, 24],\n      [4, 25, 9],\n\n      // 5\n      [1, 134, 108],\n      [2, 67, 43],\n      [2, 33, 15, 2, 34, 16],\n      [2, 33, 11, 2, 34, 12],\n\n      // 6\n      [2, 86, 68],\n      [4, 43, 27],\n      [4, 43, 19],\n      [4, 43, 15],\n\n      // 7\n      [2, 98, 78],\n      [4, 49, 31],\n      [2, 32, 14, 4, 33, 15],\n      [4, 39, 13, 1, 40, 14],\n\n      // 8\n      [2, 121, 97],\n      [2, 60, 38, 2, 61, 39],\n      [4, 40, 18, 2, 41, 19],\n      [4, 40, 14, 2, 41, 15],\n\n      // 9\n      [2, 146, 116],\n      [3, 58, 36, 2, 59, 37],\n      [4, 36, 16, 4, 37, 17],\n      [4, 36, 12, 4, 37, 13],\n\n      // 10\n      [2, 86, 68, 2, 87, 69],\n      [4, 69, 43, 1, 70, 44],\n      [6, 43, 19, 2, 44, 20],\n      [6, 43, 15, 2, 44, 16],\n\n      // 11\n      [4, 101, 81],\n      [1, 80, 50, 4, 81, 51],\n      [4, 50, 22, 4, 51, 23],\n      [3, 36, 12, 8, 37, 13],\n\n      // 12\n      [2, 116, 92, 2, 117, 93],\n      [6, 58, 36, 2, 59, 37],\n      [4, 46, 20, 6, 47, 21],\n      [7, 42, 14, 4, 43, 15],\n\n      // 13\n      [4, 133, 107],\n      [8, 59, 37, 1, 60, 38],\n      [8, 44, 20, 4, 45, 21],\n      [12, 33, 11, 4, 34, 12],\n\n      // 14\n      [3, 145, 115, 1, 146, 116],\n      [4, 64, 40, 5, 65, 41],\n      [11, 36, 16, 5, 37, 17],\n      [11, 36, 12, 5, 37, 13],\n\n      // 15\n      [5, 109, 87, 1, 110, 88],\n      [5, 65, 41, 5, 66, 42],\n      [5, 54, 24, 7, 55, 25],\n      [11, 36, 12, 7, 37, 13],\n\n      // 16\n      [5, 122, 98, 1, 123, 99],\n      [7, 73, 45, 3, 74, 46],\n      [15, 43, 19, 2, 44, 20],\n      [3, 45, 15, 13, 46, 16],\n\n      // 17\n      [1, 135, 107, 5, 136, 108],\n      [10, 74, 46, 1, 75, 47],\n      [1, 50, 22, 15, 51, 23],\n      [2, 42, 14, 17, 43, 15],\n\n      // 18\n      [5, 150, 120, 1, 151, 121],\n      [9, 69, 43, 4, 70, 44],\n      [17, 50, 22, 1, 51, 23],\n      [2, 42, 14, 19, 43, 15],\n\n      // 19\n      [3, 141, 113, 4, 142, 114],\n      [3, 70, 44, 11, 71, 45],\n      [17, 47, 21, 4, 48, 22],\n      [9, 39, 13, 16, 40, 14],\n\n      // 20\n      [3, 135, 107, 5, 136, 108],\n      [3, 67, 41, 13, 68, 42],\n      [15, 54, 24, 5, 55, 25],\n      [15, 43, 15, 10, 44, 16],\n\n      // 21\n      [4, 144, 116, 4, 145, 117],\n      [17, 68, 42],\n      [17, 50, 22, 6, 51, 23],\n      [19, 46, 16, 6, 47, 17],\n\n      // 22\n      [2, 139, 111, 7, 140, 112],\n      [17, 74, 46],\n      [7, 54, 24, 16, 55, 25],\n      [34, 37, 13],\n\n      // 23\n      [4, 151, 121, 5, 152, 122],\n      [4, 75, 47, 14, 76, 48],\n      [11, 54, 24, 14, 55, 25],\n      [16, 45, 15, 14, 46, 16],\n\n      // 24\n      [6, 147, 117, 4, 148, 118],\n      [6, 73, 45, 14, 74, 46],\n      [11, 54, 24, 16, 55, 25],\n      [30, 46, 16, 2, 47, 17],\n\n      // 25\n      [8, 132, 106, 4, 133, 107],\n      [8, 75, 47, 13, 76, 48],\n      [7, 54, 24, 22, 55, 25],\n      [22, 45, 15, 13, 46, 16],\n\n      // 26\n      [10, 142, 114, 2, 143, 115],\n      [19, 74, 46, 4, 75, 47],\n      [28, 50, 22, 6, 51, 23],\n      [33, 46, 16, 4, 47, 17],\n\n      // 27\n      [8, 152, 122, 4, 153, 123],\n      [22, 73, 45, 3, 74, 46],\n      [8, 53, 23, 26, 54, 24],\n      [12, 45, 15, 28, 46, 16],\n\n      // 28\n      [3, 147, 117, 10, 148, 118],\n      [3, 73, 45, 23, 74, 46],\n      [4, 54, 24, 31, 55, 25],\n      [11, 45, 15, 31, 46, 16],\n\n      // 29\n      [7, 146, 116, 7, 147, 117],\n      [21, 73, 45, 7, 74, 46],\n      [1, 53, 23, 37, 54, 24],\n      [19, 45, 15, 26, 46, 16],\n\n      // 30\n      [5, 145, 115, 10, 146, 116],\n      [19, 75, 47, 10, 76, 48],\n      [15, 54, 24, 25, 55, 25],\n      [23, 45, 15, 25, 46, 16],\n\n      // 31\n      [13, 145, 115, 3, 146, 116],\n      [2, 74, 46, 29, 75, 47],\n      [42, 54, 24, 1, 55, 25],\n      [23, 45, 15, 28, 46, 16],\n\n      // 32\n      [17, 145, 115],\n      [10, 74, 46, 23, 75, 47],\n      [10, 54, 24, 35, 55, 25],\n      [19, 45, 15, 35, 46, 16],\n\n      // 33\n      [17, 145, 115, 1, 146, 116],\n      [14, 74, 46, 21, 75, 47],\n      [29, 54, 24, 19, 55, 25],\n      [11, 45, 15, 46, 46, 16],\n\n      // 34\n      [13, 145, 115, 6, 146, 116],\n      [14, 74, 46, 23, 75, 47],\n      [44, 54, 24, 7, 55, 25],\n      [59, 46, 16, 1, 47, 17],\n\n      // 35\n      [12, 151, 121, 7, 152, 122],\n      [12, 75, 47, 26, 76, 48],\n      [39, 54, 24, 14, 55, 25],\n      [22, 45, 15, 41, 46, 16],\n\n      // 36\n      [6, 151, 121, 14, 152, 122],\n      [6, 75, 47, 34, 76, 48],\n      [46, 54, 24, 10, 55, 25],\n      [2, 45, 15, 64, 46, 16],\n\n      // 37\n      [17, 152, 122, 4, 153, 123],\n      [29, 74, 46, 14, 75, 47],\n      [49, 54, 24, 10, 55, 25],\n      [24, 45, 15, 46, 46, 16],\n\n      // 38\n      [4, 152, 122, 18, 153, 123],\n      [13, 74, 46, 32, 75, 47],\n      [48, 54, 24, 14, 55, 25],\n      [42, 45, 15, 32, 46, 16],\n\n      // 39\n      [20, 147, 117, 4, 148, 118],\n      [40, 75, 47, 7, 76, 48],\n      [43, 54, 24, 22, 55, 25],\n      [10, 45, 15, 67, 46, 16],\n\n      // 40\n      [19, 148, 118, 6, 149, 119],\n      [18, 75, 47, 31, 76, 48],\n      [34, 54, 24, 34, 55, 25],\n      [20, 45, 15, 61, 46, 16]\n    ];\n\n    var qrRSBlock = function(totalCount, dataCount) {\n      var _this = {};\n      _this.totalCount = totalCount;\n      _this.dataCount = dataCount;\n      return _this;\n    };\n\n    var _this = {};\n\n    var getRsBlockTable = function(typeNumber, errorCorrectionLevel) {\n\n      switch(errorCorrectionLevel) {\n      case QRErrorCorrectionLevel.L :\n        return RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 0];\n      case QRErrorCorrectionLevel.M :\n        return RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 1];\n      case QRErrorCorrectionLevel.Q :\n        return RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 2];\n      case QRErrorCorrectionLevel.H :\n        return RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 3];\n      default :\n        return undefined;\n      }\n    };\n\n    _this.getRSBlocks = function(typeNumber, errorCorrectionLevel) {\n\n      var rsBlock = getRsBlockTable(typeNumber, errorCorrectionLevel);\n\n      if (typeof rsBlock == 'undefined') {\n        throw 'bad rs block @ typeNumber:' + typeNumber +\n            '/errorCorrectionLevel:' + errorCorrectionLevel;\n      }\n\n      var length = rsBlock.length / 3;\n\n      var list = [];\n\n      for (var i = 0; i < length; i += 1) {\n\n        var count = rsBlock[i * 3 + 0];\n        var totalCount = rsBlock[i * 3 + 1];\n        var dataCount = rsBlock[i * 3 + 2];\n\n        for (var j = 0; j < count; j += 1) {\n          list.push(qrRSBlock(totalCount, dataCount) );\n        }\n      }\n\n      return list;\n    };\n\n    return _this;\n  }();\n\n  //---------------------------------------------------------------------\n  // qrBitBuffer\n  //---------------------------------------------------------------------\n\n  var qrBitBuffer = function() {\n\n    var _buffer = [];\n    var _length = 0;\n\n    var _this = {};\n\n    _this.getBuffer = function() {\n      return _buffer;\n    };\n\n    _this.getAt = function(index) {\n      var bufIndex = Math.floor(index / 8);\n      return ( (_buffer[bufIndex] >>> (7 - index % 8) ) & 1) == 1;\n    };\n\n    _this.put = function(num, length) {\n      for (var i = 0; i < length; i += 1) {\n        _this.putBit( ( (num >>> (length - i - 1) ) & 1) == 1);\n      }\n    };\n\n    _this.getLengthInBits = function() {\n      return _length;\n    };\n\n    _this.putBit = function(bit) {\n\n      var bufIndex = Math.floor(_length / 8);\n      if (_buffer.length <= bufIndex) {\n        _buffer.push(0);\n      }\n\n      if (bit) {\n        _buffer[bufIndex] |= (0x80 >>> (_length % 8) );\n      }\n\n      _length += 1;\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // qrNumber\n  //---------------------------------------------------------------------\n\n  var qrNumber = function(data) {\n\n    var _mode = QRMode.MODE_NUMBER;\n    var _data = data;\n\n    var _this = {};\n\n    _this.getMode = function() {\n      return _mode;\n    };\n\n    _this.getLength = function(buffer) {\n      return _data.length;\n    };\n\n    _this.write = function(buffer) {\n\n      var data = _data;\n\n      var i = 0;\n\n      while (i + 2 < data.length) {\n        buffer.put(strToNum(data.substring(i, i + 3) ), 10);\n        i += 3;\n      }\n\n      if (i < data.length) {\n        if (data.length - i == 1) {\n          buffer.put(strToNum(data.substring(i, i + 1) ), 4);\n        } else if (data.length - i == 2) {\n          buffer.put(strToNum(data.substring(i, i + 2) ), 7);\n        }\n      }\n    };\n\n    var strToNum = function(s) {\n      var num = 0;\n      for (var i = 0; i < s.length; i += 1) {\n        num = num * 10 + chatToNum(s.charAt(i) );\n      }\n      return num;\n    };\n\n    var chatToNum = function(c) {\n      if ('0' <= c && c <= '9') {\n        return c.charCodeAt(0) - '0'.charCodeAt(0);\n      }\n      throw 'illegal char :' + c;\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // qrAlphaNum\n  //---------------------------------------------------------------------\n\n  var qrAlphaNum = function(data) {\n\n    var _mode = QRMode.MODE_ALPHA_NUM;\n    var _data = data;\n\n    var _this = {};\n\n    _this.getMode = function() {\n      return _mode;\n    };\n\n    _this.getLength = function(buffer) {\n      return _data.length;\n    };\n\n    _this.write = function(buffer) {\n\n      var s = _data;\n\n      var i = 0;\n\n      while (i + 1 < s.length) {\n        buffer.put(\n          getCode(s.charAt(i) ) * 45 +\n          getCode(s.charAt(i + 1) ), 11);\n        i += 2;\n      }\n\n      if (i < s.length) {\n        buffer.put(getCode(s.charAt(i) ), 6);\n      }\n    };\n\n    var getCode = function(c) {\n\n      if ('0' <= c && c <= '9') {\n        return c.charCodeAt(0) - '0'.charCodeAt(0);\n      } else if ('A' <= c && c <= 'Z') {\n        return c.charCodeAt(0) - 'A'.charCodeAt(0) + 10;\n      } else {\n        switch (c) {\n        case ' ' : return 36;\n        case '$' : return 37;\n        case '%' : return 38;\n        case '*' : return 39;\n        case '+' : return 40;\n        case '-' : return 41;\n        case '.' : return 42;\n        case '/' : return 43;\n        case ':' : return 44;\n        default :\n          throw 'illegal char :' + c;\n        }\n      }\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // qr8BitByte\n  //---------------------------------------------------------------------\n\n  var qr8BitByte = function(data) {\n\n    var _mode = QRMode.MODE_8BIT_BYTE;\n    var _data = data;\n    var _bytes = qrcode.stringToBytes(data);\n\n    var _this = {};\n\n    _this.getMode = function() {\n      return _mode;\n    };\n\n    _this.getLength = function(buffer) {\n      return _bytes.length;\n    };\n\n    _this.write = function(buffer) {\n      for (var i = 0; i < _bytes.length; i += 1) {\n        buffer.put(_bytes[i], 8);\n      }\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // qrKanji\n  //---------------------------------------------------------------------\n\n  var qrKanji = function(data) {\n\n    var _mode = QRMode.MODE_KANJI;\n    var _data = data;\n\n    var stringToBytes = qrcode.stringToBytesFuncs['SJIS'];\n    if (!stringToBytes) {\n      throw 'sjis not supported.';\n    }\n    !function(c, code) {\n      // self test for sjis support.\n      var test = stringToBytes(c);\n      if (test.length != 2 || ( (test[0] << 8) | test[1]) != code) {\n        throw 'sjis not supported.';\n      }\n    }('\\u53cb', 0x9746);\n\n    var _bytes = stringToBytes(data);\n\n    var _this = {};\n\n    _this.getMode = function() {\n      return _mode;\n    };\n\n    _this.getLength = function(buffer) {\n      return ~~(_bytes.length / 2);\n    };\n\n    _this.write = function(buffer) {\n\n      var data = _bytes;\n\n      var i = 0;\n\n      while (i + 1 < data.length) {\n\n        var c = ( (0xff & data[i]) << 8) | (0xff & data[i + 1]);\n\n        if (0x8140 <= c && c <= 0x9FFC) {\n          c -= 0x8140;\n        } else if (0xE040 <= c && c <= 0xEBBF) {\n          c -= 0xC140;\n        } else {\n          throw 'illegal char at ' + (i + 1) + '/' + c;\n        }\n\n        c = ( (c >>> 8) & 0xff) * 0xC0 + (c & 0xff);\n\n        buffer.put(c, 13);\n\n        i += 2;\n      }\n\n      if (i < data.length) {\n        throw 'illegal char at ' + (i + 1);\n      }\n    };\n\n    return _this;\n  };\n\n  //=====================================================================\n  // GIF Support etc.\n  //\n\n  //---------------------------------------------------------------------\n  // byteArrayOutputStream\n  //---------------------------------------------------------------------\n\n  var byteArrayOutputStream = function() {\n\n    var _bytes = [];\n\n    var _this = {};\n\n    _this.writeByte = function(b) {\n      _bytes.push(b & 0xff);\n    };\n\n    _this.writeShort = function(i) {\n      _this.writeByte(i);\n      _this.writeByte(i >>> 8);\n    };\n\n    _this.writeBytes = function(b, off, len) {\n      off = off || 0;\n      len = len || b.length;\n      for (var i = 0; i < len; i += 1) {\n        _this.writeByte(b[i + off]);\n      }\n    };\n\n    _this.writeString = function(s) {\n      for (var i = 0; i < s.length; i += 1) {\n        _this.writeByte(s.charCodeAt(i) );\n      }\n    };\n\n    _this.toByteArray = function() {\n      return _bytes;\n    };\n\n    _this.toString = function() {\n      var s = '';\n      s += '[';\n      for (var i = 0; i < _bytes.length; i += 1) {\n        if (i > 0) {\n          s += ',';\n        }\n        s += _bytes[i];\n      }\n      s += ']';\n      return s;\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // base64EncodeOutputStream\n  //---------------------------------------------------------------------\n\n  var base64EncodeOutputStream = function() {\n\n    var _buffer = 0;\n    var _buflen = 0;\n    var _length = 0;\n    var _base64 = '';\n\n    var _this = {};\n\n    var writeEncoded = function(b) {\n      _base64 += String.fromCharCode(encode(b & 0x3f) );\n    };\n\n    var encode = function(n) {\n      if (n < 0) {\n        // error.\n      } else if (n < 26) {\n        return 0x41 + n;\n      } else if (n < 52) {\n        return 0x61 + (n - 26);\n      } else if (n < 62) {\n        return 0x30 + (n - 52);\n      } else if (n == 62) {\n        return 0x2b;\n      } else if (n == 63) {\n        return 0x2f;\n      }\n      throw 'n:' + n;\n    };\n\n    _this.writeByte = function(n) {\n\n      _buffer = (_buffer << 8) | (n & 0xff);\n      _buflen += 8;\n      _length += 1;\n\n      while (_buflen >= 6) {\n        writeEncoded(_buffer >>> (_buflen - 6) );\n        _buflen -= 6;\n      }\n    };\n\n    _this.flush = function() {\n\n      if (_buflen > 0) {\n        writeEncoded(_buffer << (6 - _buflen) );\n        _buffer = 0;\n        _buflen = 0;\n      }\n\n      if (_length % 3 != 0) {\n        // padding\n        var padlen = 3 - _length % 3;\n        for (var i = 0; i < padlen; i += 1) {\n          _base64 += '=';\n        }\n      }\n    };\n\n    _this.toString = function() {\n      return _base64;\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // base64DecodeInputStream\n  //---------------------------------------------------------------------\n\n  var base64DecodeInputStream = function(str) {\n\n    var _str = str;\n    var _pos = 0;\n    var _buffer = 0;\n    var _buflen = 0;\n\n    var _this = {};\n\n    _this.read = function() {\n\n      while (_buflen < 8) {\n\n        if (_pos >= _str.length) {\n          if (_buflen == 0) {\n            return -1;\n          }\n          throw 'unexpected end of file./' + _buflen;\n        }\n\n        var c = _str.charAt(_pos);\n        _pos += 1;\n\n        if (c == '=') {\n          _buflen = 0;\n          return -1;\n        } else if (c.match(/^\\s$/) ) {\n          // ignore if whitespace.\n          continue;\n        }\n\n        _buffer = (_buffer << 6) | decode(c.charCodeAt(0) );\n        _buflen += 6;\n      }\n\n      var n = (_buffer >>> (_buflen - 8) ) & 0xff;\n      _buflen -= 8;\n      return n;\n    };\n\n    var decode = function(c) {\n      if (0x41 <= c && c <= 0x5a) {\n        return c - 0x41;\n      } else if (0x61 <= c && c <= 0x7a) {\n        return c - 0x61 + 26;\n      } else if (0x30 <= c && c <= 0x39) {\n        return c - 0x30 + 52;\n      } else if (c == 0x2b) {\n        return 62;\n      } else if (c == 0x2f) {\n        return 63;\n      } else {\n        throw 'c:' + c;\n      }\n    };\n\n    return _this;\n  };\n\n  //---------------------------------------------------------------------\n  // gifImage (B/W)\n  //---------------------------------------------------------------------\n\n  var gifImage = function(width, height) {\n\n    var _width = width;\n    var _height = height;\n    var _data = new Array(width * height);\n\n    var _this = {};\n\n    _this.setPixel = function(x, y, pixel) {\n      _data[y * _width + x] = pixel;\n    };\n\n    _this.write = function(out) {\n\n      //---------------------------------\n      // GIF Signature\n\n      out.writeString('GIF87a');\n\n      //---------------------------------\n      // Screen Descriptor\n\n      out.writeShort(_width);\n      out.writeShort(_height);\n\n      out.writeByte(0x80); // 2bit\n      out.writeByte(0);\n      out.writeByte(0);\n\n      //---------------------------------\n      // Global Color Map\n\n      // black\n      out.writeByte(0x00);\n      out.writeByte(0x00);\n      out.writeByte(0x00);\n\n      // white\n      out.writeByte(0xff);\n      out.writeByte(0xff);\n      out.writeByte(0xff);\n\n      //---------------------------------\n      // Image Descriptor\n\n      out.writeString(',');\n      out.writeShort(0);\n      out.writeShort(0);\n      out.writeShort(_width);\n      out.writeShort(_height);\n      out.writeByte(0);\n\n      //---------------------------------\n      // Local Color Map\n\n      //---------------------------------\n      // Raster Data\n\n      var lzwMinCodeSize = 2;\n      var raster = getLZWRaster(lzwMinCodeSize);\n\n      out.writeByte(lzwMinCodeSize);\n\n      var offset = 0;\n\n      while (raster.length - offset > 255) {\n        out.writeByte(255);\n        out.writeBytes(raster, offset, 255);\n        offset += 255;\n      }\n\n      out.writeByte(raster.length - offset);\n      out.writeBytes(raster, offset, raster.length - offset);\n      out.writeByte(0x00);\n\n      //---------------------------------\n      // GIF Terminator\n      out.writeString(';');\n    };\n\n    var bitOutputStream = function(out) {\n\n      var _out = out;\n      var _bitLength = 0;\n      var _bitBuffer = 0;\n\n      var _this = {};\n\n      _this.write = function(data, length) {\n\n        if ( (data >>> length) != 0) {\n          throw 'length over';\n        }\n\n        while (_bitLength + length >= 8) {\n          _out.writeByte(0xff & ( (data << _bitLength) | _bitBuffer) );\n          length -= (8 - _bitLength);\n          data >>>= (8 - _bitLength);\n          _bitBuffer = 0;\n          _bitLength = 0;\n        }\n\n        _bitBuffer = (data << _bitLength) | _bitBuffer;\n        _bitLength = _bitLength + length;\n      };\n\n      _this.flush = function() {\n        if (_bitLength > 0) {\n          _out.writeByte(_bitBuffer);\n        }\n      };\n\n      return _this;\n    };\n\n    var getLZWRaster = function(lzwMinCodeSize) {\n\n      var clearCode = 1 << lzwMinCodeSize;\n      var endCode = (1 << lzwMinCodeSize) + 1;\n      var bitLength = lzwMinCodeSize + 1;\n\n      // Setup LZWTable\n      var table = lzwTable();\n\n      for (var i = 0; i < clearCode; i += 1) {\n        table.add(String.fromCharCode(i) );\n      }\n      table.add(String.fromCharCode(clearCode) );\n      table.add(String.fromCharCode(endCode) );\n\n      var byteOut = byteArrayOutputStream();\n      var bitOut = bitOutputStream(byteOut);\n\n      // clear code\n      bitOut.write(clearCode, bitLength);\n\n      var dataIndex = 0;\n\n      var s = String.fromCharCode(_data[dataIndex]);\n      dataIndex += 1;\n\n      while (dataIndex < _data.length) {\n\n        var c = String.fromCharCode(_data[dataIndex]);\n        dataIndex += 1;\n\n        if (table.contains(s + c) ) {\n\n          s = s + c;\n\n        } else {\n\n          bitOut.write(table.indexOf(s), bitLength);\n\n          if (table.size() < 0xfff) {\n\n            if (table.size() == (1 << bitLength) ) {\n              bitLength += 1;\n            }\n\n            table.add(s + c);\n          }\n\n          s = c;\n        }\n      }\n\n      bitOut.write(table.indexOf(s), bitLength);\n\n      // end code\n      bitOut.write(endCode, bitLength);\n\n      bitOut.flush();\n\n      return byteOut.toByteArray();\n    };\n\n    var lzwTable = function() {\n\n      var _map = {};\n      var _size = 0;\n\n      var _this = {};\n\n      _this.add = function(key) {\n        if (_this.contains(key) ) {\n          throw 'dup key:' + key;\n        }\n        _map[key] = _size;\n        _size += 1;\n      };\n\n      _this.size = function() {\n        return _size;\n      };\n\n      _this.indexOf = function(key) {\n        return _map[key];\n      };\n\n      _this.contains = function(key) {\n        return typeof _map[key] != 'undefined';\n      };\n\n      return _this;\n    };\n\n    return _this;\n  };\n\n  var createDataURL = function(width, height, getPixel) {\n    var gif = gifImage(width, height);\n    for (var y = 0; y < height; y += 1) {\n      for (var x = 0; x < width; x += 1) {\n        gif.setPixel(x, y, getPixel(x, y) );\n      }\n    }\n\n    var b = byteArrayOutputStream();\n    gif.write(b);\n\n    var base64 = base64EncodeOutputStream();\n    var bytes = b.toByteArray();\n    for (var i = 0; i < bytes.length; i += 1) {\n      base64.writeByte(bytes[i]);\n    }\n    base64.flush();\n\n    return 'data:image/gif;base64,' + base64;\n  };\n\n  //---------------------------------------------------------------------\n  // returns qrcode function.\n\n  return qrcode;\n}();\n\n// multibyte support\n!function() {\n\n  qrcode.stringToBytesFuncs['UTF-8'] = function(s) {\n    // http://stackoverflow.com/questions/18729405/how-to-convert-utf8-string-to-byte-array\n    function toUTF8Array(str) {\n      var utf8 = [];\n      for (var i=0; i < str.length; i++) {\n        var charcode = str.charCodeAt(i);\n        if (charcode < 0x80) utf8.push(charcode);\n        else if (charcode < 0x800) {\n          utf8.push(0xc0 | (charcode >> 6),\n              0x80 | (charcode & 0x3f));\n        }\n        else if (charcode < 0xd800 || charcode >= 0xe000) {\n          utf8.push(0xe0 | (charcode >> 12),\n              0x80 | ((charcode>>6) & 0x3f),\n              0x80 | (charcode & 0x3f));\n        }\n        // surrogate pair\n        else {\n          i++;\n          // UTF-16 encodes 0x10000-0x10FFFF by\n          // subtracting 0x10000 and splitting the\n          // 20 bits of 0x0-0xFFFFF into two halves\n          charcode = 0x10000 + (((charcode & 0x3ff)<<10)\n            | (str.charCodeAt(i) & 0x3ff));\n          utf8.push(0xf0 | (charcode >>18),\n              0x80 | ((charcode>>12) & 0x3f),\n              0x80 | ((charcode>>6) & 0x3f),\n              0x80 | (charcode & 0x3f));\n        }\n      }\n      return utf8;\n    }\n    return toUTF8Array(s);\n  };\n\n}();\n\n(function (factory) {\n  if (typeof define === 'function' && define.amd) {\n      define([], factory);\n  } else if (typeof exports === 'object') {\n      module.exports = factory();\n  }\n}(function () {\n    return qrcode;\n}));\n","<script>\nimport QR from 'qrcode-generator'\nimport { onMount } from 'svelte'\nexport let data = null\nexport let size = 2\nexport let margin = 0\nexport let level = 'L'\n// export let colorDark = '#000' // '#253900'\n// export let colorLight = '#808000'\nlet imgElem\nfunction paint (bin) {\n  if (!bin) return\n  if (Buffer.isBuffer(bin)) bin = bin.toString('base64')\n  // TODO: hack to modify colors,\n  // maybe use qr.drawToContext() + canvas instead of img.\n  const qr = new QR(0, level)\n  qr.addData(bin)\n  qr.make()\n  const url = qr.createDataURL(size, margin)\n  imgElem.src = url\n}\nonMount(() => {\n  if (typeof data?.subscribe === 'function') return data.subscribe(paint)\n  else data && paint(data)\n})\n</script>\n<pico-qr>\n  <img bind:this=\"{imgElem}\"/>\n</pico-qr>\n<style>\n  pico-qr { display: block; }\n</style>\n","<script>\nimport { navigate } from '../router'\nimport { keychain, keygen, decodePk, storeIdentity, purge, saveBackup } from '../api'\nimport { writable } from 'svelte/store'\nimport Geohash from 'latlon-geohash'\nimport Dialog from '../components/Dialog.svelte'\nimport Icon from '../components/Icon.svelte'\nimport QRCode from '../components/QRCode.svelte'\n\nconst progress = writable(100)\nconst idsqr = writable()\nconst secret = writable()\nconst geohash = writable(null) // Geohash.encode(52.20, 0.12, 6))\nconst gender = writable(0)\nconst unlucky = writable(false)\nconst fails = writable(0)\nconst showImportDialog = writable(false)\nconst importInput = writable('')\nconst showAboutDialog = writable(false)\n\nasync function loadKeychain () {\n  try {\n    const sk = await keychain.readIdentity()\n    if (!sk) return\n    $secret = sk\n    const res = decodePk(sk.slice(32))\n    $gender = res.sex\n    $geohash = res.geohash\n  } catch (err) {\n    console.error('loadKeychain() failed:', err)\n    throw err\n  }\n}\n\nasync function roll (mode = 0) {\n  if ($secret) return // Refuse to roll while secret exists\n  console.info(`roll(${mode})`)\n  $progress = 0\n  $unlucky = false\n  let pair = null\n  for (let i = 0; i < 100; i++) {\n    $progress++\n    pair = keygen(\n      mode < 2 ? $gender : null,\n      mode < 1 ? $geohash : null,\n      500\n    )\n    if (pair) break\n    await new Promise(resolve => setTimeout(resolve, 100)) // give browser some breathing space\n  }\n\n  if (pair) {\n    await storeIdentity(pair.sk)\n    $secret = pair.sk\n  } else {\n    $unlucky = true\n    $fails++\n  }\n  $progress = 100\n}\n/* Geolocation is being moved to profile */\nfunction fetchPosition (options) {\n  return new Promise((resolve, reject) => {\n    if (!navigator.geolocation) reject(new Error('Browser does not support geolocation APIs'))\n    else navigator.geolocation.getCurrentPosition(resolve, reject, options)\n  })\n}\nasync function autoGeohash () {\n  const res = await fetchPosition()\n  console.log(res)\n  const { latitude: lat, longitude: lng } = res.coords\n  $geohash = Geohash.encode(lat, lng, 6)\n\n}\nasync function validateImport () {\n  console.error('TODO: not yet implemented')\n}\n\n</script>\n<keygen-view class=\"block container\">\n  <h1 on:click={() => $showAboutDialog = true}>\n    Setup\n    <Icon id=\"icon-info\" />\n  </h1>\n  <h5>Gender</h5>\n  <fieldset>\n    <input type=\"radio\" value={1} bind:group={$gender} id=\"M\" name=\"gender\"/>\n    <label for=\"M\">M</label>\n    <input type=\"radio\" value={0} bind:group={$gender} id=\"F\" name=\"gender\"/>\n    <label for=\"F\">F</label>\n    <input type=\"radio\" value={2} bind:group={$gender} id=\"NB\" name=\"gender\"/>\n    <label for=\"NB\">NB</label>\n  </fieldset>\n  <br/>\n  <!--\n  <h5>Location</h5>\n  <div class=\"flex row\">\n    <div>\n      <a role=\"button\" on:click={autoGeohash}><Icon id=\"icon-location\" /></a>\n    </div>\n    <div>\n      <input type=\"text\"\n        placeholder=\"Geohash\"\n        readonly\n        on:click={autoGeohash}\n        bind:value={$geohash} >\n    </div>\n  </div>\n  -->\n  <h5>IDSQR</h5>\n\n  <div class=\"flex column xcenter\">\n    <idsqr data-theme=\"dark\" class=\"flex column space-around\">\n      {#await loadKeychain()}\n        <h1 aria-busy=\"true\">%nbsp;</h1>\n      {:then}\n        {#if !$secret}\n          <!--<h5 class=\"text-center\">Keygen</h5>-->\n          <div>\n            {#if $progress === 100}\n              <p class=\"text-center\">Press the button to generate your own unique passport</p>\n            {:else}\n              <progress min=\"0\" max=\"100\" value={$progress}/>\n              <!-- <p>Finding a key might take a while, but you only have to do it once.</p>-->\n            {/if}\n          </div>\n          <div>\n            <div class=\"row space-between xcenter\">\n              {#if $fails > 1}\n                <button on:click={() => roll(1)} disabled={$progress !== 100}>Give up</button>\n              {/if}\n              <!-- Defaults to gender only; Geohash mining disabled for now -->\n              <button on:click={() => roll(1)} disabled={$progress !== 100 || $secret}>Create</button>\n            </div>\n            {#if $unlucky}\n              <danger>Sorry.. RNG0D ignored your prayers, please try again</danger>\n            {/if}\n          </div>\n        {:else}\n          <QRCode data={$secret.slice(32)} size={10}/>\n        {/if}\n      {:catch error}\n        <div>\n          <h5>Error:</h5>\n          <danger>{error.message}</danger>\n        </div>\n      {/await}\n    </idsqr>\n  </div>\n  <div class=\"row end hpad\">\n    <small>\n      {#if $secret}\n        <a on:click={() => purge(true)}>Destroy</a> |\n        <a on:click={saveBackup}>Backup</a>\n      {:else}\n        <a on:click={() => roll(2)}>Anonkey</a> |\n        <a on:click={() => $showImportDialog = true}>Import</a>\n      {/if}\n    </small>\n  </div>\n  <br/>\n  <button disabled={!$secret} on:click={() => navigate('/profile')}>next</button>\n\n  {#if $showImportDialog}\n    <Dialog open={true} on:fade={() => $showImportDialog = false}>\n      <article>\n        <header><h5>Import Secret</h5></header>\n        <p>Paste the secret as a hex-string</p>\n        <textarea bind:value={$importInput}></textarea>\n        <footer>\n          <div class=\"row space-between\">\n            <a role=\"button\" on:click={() => $showImportDialog = false}>Cancel</a>\n            <a role=\"button\" on:click={validateImport}>Import</a>\n          </div>\n        </footer>\n      </article>\n    </Dialog>\n  {/if}\n\n  {#if $showAboutDialog}\n    <Dialog open={true} on:fade={() => $showAboutDialog = false}>\n      <article>\n        <h3>Welcome to True Decentralization</h3>\n        <div class=\"about\">\n          <p>\n            Picochat is a <strong>coinless blockchain</strong>, there\n            are no super-nodes and everything is slightly different from\n            what you're used to.<br/>\n            But don't worry, it's all good.\n          </p>\n          <p>\n            First of all, you have to generate your own key.<br/>\n            It takes about a minute or two on a handheld device.<br/>\n            Once you've found a one, keep it safe, it's your passport to hyperspace.\n            \n          </p>\n          <p>\n            If you don't care about location nor gender, then\n            feel free to use an <i>anonymous</i> key.<br/>\n            Trees say \"Thanks!\" \n          </p>\n          <p>\n            Please don't generate more keys than you need, mining of any form is a pointless waste of world-resources.\n            Hate to say it; but don't ever trade a key, it is <strong>insecure and dangerous</strong>.\n          </p>\n          <p><i>\n            The hyperspace is vast.<br/>\n            It's real-estate, just like air -\n            worth nothing while there's enough for everyone.<br/>\n            Let's keep it that way\n          </i> </p>\n        </div>\n        <footer>\n          <button on:click={() => $showAboutDialog = false}>gotcha</button>\n        </footer>\n      </article>\n    </Dialog>\n  {/if}\n</keygen-view>\n<style>\ndanger { color: var(--blood); }\n.about {\n  max-height: 50vh;\n  overflow-y: scroll;\n}\n</style>\n\n","import { derived, writable, get } from 'svelte/store'\nimport { ITEMS } from '../blockend/items.db'\n// Cart for Network purchases\n// (staging area)\nexport const cart = writable([])\nexport const cartSum = derived(cart, c =>\n  c.reduce((sum, i) => (sum + ITEMS[i.id].price * i.qty), 0)\n)\nexport const cartQty = derived(cart, c => c.reduce((q, i) => q + i.qty, 0))\n\nexport function addCart (id) {\n  const $cart = get(cart)\n  const q = $cart.find(i => i.id === id)?.qty || 0\n  setQty(id, q + 1)\n}\nexport function delCart (id) {\n  const $cart = get(cart)\n  const q = $cart.find(i => i.id === id)?.qty || 0\n  setQty(id, q - 1)\n}\nexport function setQty (id, qty = 0) {\n  const $cart = get(cart)\n  let item = $cart.find(i => i.id === id)\n  if (!item) {\n    item = { id, qty: 0 }\n    $cart.push(item)\n  }\n  item.qty = Math.max(qty, 0)\n  cart.set($cart)\n}\n","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs=e()}(this,(function(){\"use strict\";var t=1e3,e=6e4,n=36e5,r=\"millisecond\",i=\"second\",s=\"minute\",u=\"hour\",a=\"day\",o=\"week\",f=\"month\",h=\"quarter\",c=\"year\",d=\"date\",$=\"Invalid Date\",l=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[Tt\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/,y=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\")},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},g={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+m(r,2,\"0\")+\":\"+m(i,2,\"0\")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,f),s=n-i<0,u=e.clone().add(r+(s?-1:1),f);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:f,y:c,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:h}[t]||String(t||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},v=\"en\",D={};D[v]=M;var p=function(t){return t instanceof _},S=function t(e,n,r){var i;if(!e)return v;if(\"string\"==typeof e){var s=e.toLowerCase();D[s]&&(i=s),n&&(D[s]=n,i=s);var u=e.split(\"-\");if(!i&&u.length>1)return t(u[0])}else{var a=e.name;D[a]=e,i=a}return!r&&i&&(v=i),i||!r&&v},w=function(t,e){if(p(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},O=g;O.l=S,O.i=p,O.w=function(t,e){return w(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=S(t.locale,null,!0),this.parse(t)}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(O.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match(l);if(r){var i=r[2]-1||0,s=(r[7]||\"0\").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return O},m.isValid=function(){return!(this.$d.toString()===$)},m.isSame=function(t,e){var n=w(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return w(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<w(t)},m.$g=function(t,e,n){return O.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!O.u(e)||e,h=O.p(t),$=function(t,e){var i=O.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},l=function(t,e){return O.w(n.toDate()[t].apply(n.toDate(\"s\"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,g=\"set\"+(this.$u?\"UTC\":\"\");switch(h){case c:return r?$(1,0):$(31,11);case f:return r?$(1,M):$(0,M+1);case o:var v=this.$locale().weekStart||0,D=(y<v?y+7:y)-v;return $(r?m-D:m+(6-D),M);case a:case d:return l(g+\"Hours\",0);case u:return l(g+\"Minutes\",1);case s:return l(g+\"Seconds\",2);case i:return l(g+\"Milliseconds\",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=O.p(t),h=\"set\"+(this.$u?\"UTC\":\"\"),$=(n={},n[a]=h+\"Date\",n[d]=h+\"Date\",n[f]=h+\"Month\",n[c]=h+\"FullYear\",n[u]=h+\"Hours\",n[s]=h+\"Minutes\",n[i]=h+\"Seconds\",n[r]=h+\"Milliseconds\",n)[o],l=o===a?this.$D+(e-this.$W):e;if(o===f||o===c){var y=this.clone().set(d,1);y.$d[$](l),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else $&&this.$d[$](l);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[O.p(t)]()},m.add=function(r,h){var d,$=this;r=Number(r);var l=O.p(h),y=function(t){var e=w($);return O.w(e.date(e.date()+Math.round(t*r)),$)};if(l===f)return this.set(f,this.$M+r);if(l===c)return this.set(c,this.$y+r);if(l===a)return y(1);if(l===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[l]||1,m=this.$d.getTime()+r*M;return O.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||$;var r=t||\"YYYY-MM-DDTHH:mm:ssZ\",i=O.z(this),s=this.$H,u=this.$m,a=this.$M,o=n.weekdays,f=n.months,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].slice(0,s)},c=function(t){return O.s(s%12||12,t,\"0\")},d=n.meridiem||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r},l={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:O.s(a+1,2,\"0\"),MMM:h(n.monthsShort,a,f,3),MMMM:h(f,a),D:this.$D,DD:O.s(this.$D,2,\"0\"),d:String(this.$W),dd:h(n.weekdaysMin,this.$W,o,2),ddd:h(n.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(s),HH:O.s(s,2,\"0\"),h:c(1),hh:c(2),a:d(s,u,!0),A:d(s,u,!1),m:String(u),mm:O.s(u,2,\"0\"),s:String(this.$s),ss:O.s(this.$s,2,\"0\"),SSS:O.s(this.$ms,3,\"0\"),Z:i};return r.replace(y,(function(t,e){return e||l[t]||i.replace(\":\",\"\")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,$){var l,y=O.p(d),M=w(r),m=(M.utcOffset()-this.utcOffset())*e,g=this-M,v=O.m(this,M);return v=(l={},l[c]=v/12,l[f]=v,l[h]=v/3,l[o]=(g-m)/6048e5,l[a]=(g-m)/864e5,l[u]=g/n,l[s]=g/e,l[i]=g/t,l)[y]||g,$?v:O.a(v)},m.daysInMonth=function(){return this.endOf(f).$D},m.$locale=function(){return D[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=S(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return O.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),T=_.prototype;return w.prototype=T,[[\"$ms\",r],[\"$s\",i],[\"$m\",s],[\"$H\",u],[\"$W\",a],[\"$M\",f],[\"$y\",c],[\"$D\",d]].forEach((function(t){T[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),w.extend=function(t,e){return t.$i||(t(e,_,w),t.$i=!0),w},w.locale=S,w.isDayjs=p,w.unix=function(t){return w(1e3*t)},w.en=D[v],w.Ls=D,w.p={},w}));","<script>\nimport dayjs from 'dayjs'\nimport { onMount, afterUpdate } from 'svelte'\nimport { writable } from 'svelte/store'\nexport let expiresAt\nexport let format = 'HH:mm'\nlet intervalId = null\nconst timeLeft = writable(expiresAt - Date.now())\n/*\nlet classes = 'count-down'\nif (timeLeft < 10 * 1000) classes += ' danger'\nelse if (timeLeft < 60 * 1000) classes += ' warning'\nelse if (timeLeft <= 0) classes += ' expired'\n*/\nonMount(() => {\n  if (intervalId) {\n    clearInterval(intervalId)\n    intervalId = null\n  }\n  intervalId = setInterval(() => {\n    $timeLeft = expiresAt - Date.now()\n    if ($timeLeft <= 0) clearInterval(intervalId)\n  }, 200)\n\n  return () => {\n    clearInterval(intervalId)\n  }\n})\nfunction ddFormat(millis) {\n  const dd = millis / 1000 / 60\n  switch (format) {\n    case '': return Math.floor(dd)\n    case '': return `${Math.floor(dd)}<small>${(dd- Math.floor(dd)).toFixed(1).substr(1)}</small>`\n    case '': return `${Math.floor(dd)}<small>${(dd- Math.floor(dd)).toFixed(2).substr(1)}</small>`\n  }\n}\n</script>\n<timer>\n{#if /^+$/.test(format)}\n  {@html ddFormat($timeLeft > 0 ? $timeLeft : 0)}\n{:else}\n  {dayjs.duration($timeLeft > 0 ? $timeLeft : 0).format(format)}\n{/if}\n</timer>\n","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.areaConversion=exports.timeConversion=exports.distanceConversion=exports.altitudeKeys=exports.latitudeKeys=exports.longitudeKeys=exports.MAXLON=exports.MINLON=exports.MAXLAT=exports.MINLAT=exports.earthRadius=exports.sexagesimalPattern=void 0;var sexagesimalPattern=/^([0-9]{1,3})\\s*([0-9]{1,3}(?:\\.(?:[0-9]{1,}))?)[']\\s*(([0-9]{1,3}(\\.([0-9]{1,}))?)[\"]\\s*)?([NEOSW]?)$/;exports.sexagesimalPattern=sexagesimalPattern;var earthRadius=6378137;exports.earthRadius=earthRadius;var MINLAT=-90;exports.MINLAT=MINLAT;var MAXLAT=90;exports.MAXLAT=MAXLAT;var MINLON=-180;exports.MINLON=MINLON;var MAXLON=180;exports.MAXLON=MAXLON;var longitudeKeys=[\"lng\",\"lon\",\"longitude\",0];exports.longitudeKeys=longitudeKeys;var latitudeKeys=[\"lat\",\"latitude\",1];exports.latitudeKeys=latitudeKeys;var altitudeKeys=[\"alt\",\"altitude\",\"elevation\",\"elev\",2];exports.altitudeKeys=altitudeKeys;var distanceConversion={m:1,km:0.001,cm:100,mm:1000,mi:1/1609.344,sm:1/1852.216,ft:100/30.48,in:100/2.54,yd:1/0.9144};exports.distanceConversion=distanceConversion;var timeConversion={m:60,h:3600,d:86400};exports.timeConversion=timeConversion;var areaConversion={m2:1,km2:0.000001,ha:0.0001,a:0.01,ft2:10.763911,yd2:1.19599,in2:1550.0031};exports.areaConversion=areaConversion;areaConversion.sqm=areaConversion.m2;areaConversion.sqkm=areaConversion.km2;areaConversion.sqft=areaConversion.ft2;areaConversion.sqyd=areaConversion.yd2;areaConversion.sqin=areaConversion.in2;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var getCoordinateKey=function getCoordinateKey(point,keysToLookup){return keysToLookup.reduce(function(foundKey,key){if(typeof point===\"undefined\"||point===null){throw new Error(\"'\".concat(point,\"' is no valid coordinate.\"))}if(Object.prototype.hasOwnProperty.call(point,key)&&typeof key!==\"undefined\"&&typeof foundKey===\"undefined\"){foundKey=key;return key}return foundKey},undefined)};var _default=getCoordinateKey;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var isDecimal=function isDecimal(value){var checkedValue=value.toString().trim();if(isNaN(parseFloat(checkedValue))){return false}return parseFloat(checkedValue)===Number(checkedValue)};var _default=isDecimal;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _constants=require(\"./constants\");var isSexagesimal=function isSexagesimal(value){return _constants.sexagesimalPattern.test(value.toString().trim())};var _default=isSexagesimal;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _constants=require(\"./constants\");var sexagesimalToDecimal=function sexagesimalToDecimal(sexagesimal){var data=new RegExp(_constants.sexagesimalPattern).exec(sexagesimal.toString().trim());if(typeof data===\"undefined\"||data===null){throw new Error(\"Given value is not in sexagesimal format\")}var min=Number(data[2])/60||0;var sec=Number(data[4])/3600||0;var decimal=parseFloat(data[1])+min+sec;return[\"S\",\"W\"].includes(data[7])?-decimal:decimal};var _default=sexagesimalToDecimal;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _constants=require(\"./constants\");var _getCoordinateKey=_interopRequireDefault(require(\"./getCoordinateKey\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var getCoordinateKeys=function getCoordinateKeys(point){var keysToLookup=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{longitude:_constants.longitudeKeys,latitude:_constants.latitudeKeys,altitude:_constants.altitudeKeys};var longitude=(0,_getCoordinateKey.default)(point,keysToLookup.longitude);var latitude=(0,_getCoordinateKey.default)(point,keysToLookup.latitude);var altitude=(0,_getCoordinateKey.default)(point,keysToLookup.altitude);return _objectSpread({latitude:latitude,longitude:longitude},altitude?{altitude:altitude}:{})};var _default=getCoordinateKeys;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _isDecimal=_interopRequireDefault(require(\"./isDecimal\"));var _isSexagesimal=_interopRequireDefault(require(\"./isSexagesimal\"));var _sexagesimalToDecimal=_interopRequireDefault(require(\"./sexagesimalToDecimal\"));var _constants=require(\"./constants\");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var isValidLatitude=function isValidLatitude(value){if((0,_isDecimal.default)(value)){if(parseFloat(value)>_constants.MAXLAT||value<_constants.MINLAT){return false}return true}if((0,_isSexagesimal.default)(value)){return isValidLatitude((0,_sexagesimalToDecimal.default)(value))}return false};var _default=isValidLatitude;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _isDecimal=_interopRequireDefault(require(\"./isDecimal\"));var _isSexagesimal=_interopRequireDefault(require(\"./isSexagesimal\"));var _sexagesimalToDecimal=_interopRequireDefault(require(\"./sexagesimalToDecimal\"));var _constants=require(\"./constants\");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var isValidLongitude=function isValidLongitude(value){if((0,_isDecimal.default)(value)){if(parseFloat(value)>_constants.MAXLON||value<_constants.MINLON){return false}return true}if((0,_isSexagesimal.default)(value)){return isValidLongitude((0,_sexagesimalToDecimal.default)(value))}return false};var _default=isValidLongitude;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _getCoordinateKeys2=_interopRequireDefault(require(\"./getCoordinateKeys\"));var _isValidLatitude=_interopRequireDefault(require(\"./isValidLatitude\"));var _isValidLongitude=_interopRequireDefault(require(\"./isValidLongitude\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var isValidCoordinate=function isValidCoordinate(point){var _getCoordinateKeys=(0,_getCoordinateKeys2.default)(point),latitude=_getCoordinateKeys.latitude,longitude=_getCoordinateKeys.longitude;if(Array.isArray(point)&&point.length>=2){return(0,_isValidLongitude.default)(point[0])&&(0,_isValidLatitude.default)(point[1])}if(typeof latitude===\"undefined\"||typeof longitude===\"undefined\"){return false}var lon=point[longitude];var lat=point[latitude];if(typeof lat===\"undefined\"||typeof lon===\"undefined\"){return false}if((0,_isValidLatitude.default)(lat)===false||(0,_isValidLongitude.default)(lon)===false){return false}return true};var _default=isValidCoordinate;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _isDecimal=_interopRequireDefault(require(\"./isDecimal\"));var _isSexagesimal=_interopRequireDefault(require(\"./isSexagesimal\"));var _sexagesimalToDecimal=_interopRequireDefault(require(\"./sexagesimalToDecimal\"));var _isValidCoordinate=_interopRequireDefault(require(\"./isValidCoordinate\"));var _getCoordinateKeys=_interopRequireDefault(require(\"./getCoordinateKeys\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var toDecimal=function toDecimal(value){if((0,_isDecimal.default)(value)){return Number(value)}if((0,_isSexagesimal.default)(value)){return(0,_sexagesimalToDecimal.default)(value)}if((0,_isValidCoordinate.default)(value)){var keys=(0,_getCoordinateKeys.default)(value);if(Array.isArray(value)){return value.map(function(v,index){return[0,1].includes(index)?toDecimal(v):v})}return _objectSpread(_objectSpread(_objectSpread({},value),keys.latitude&&_defineProperty({},keys.latitude,toDecimal(value[keys.latitude]))),keys.longitude&&_defineProperty({},keys.longitude,toDecimal(value[keys.longitude])))}if(Array.isArray(value)){return value.map(function(point){return(0,_isValidCoordinate.default)(point)?toDecimal(point):point})}return value};var _default=toDecimal;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _constants=require(\"./constants\");var _getCoordinateKey=_interopRequireDefault(require(\"./getCoordinateKey\"));var _toDecimal=_interopRequireDefault(require(\"./toDecimal\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getLatitude=function getLatitude(point,raw){var latKey=(0,_getCoordinateKey.default)(point,_constants.latitudeKeys);if(typeof latKey===\"undefined\"||latKey===null){return}var value=point[latKey];return raw===true?value:(0,_toDecimal.default)(value)};var _default=getLatitude;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _constants=require(\"./constants\");var _getCoordinateKey=_interopRequireDefault(require(\"./getCoordinateKey\"));var _toDecimal=_interopRequireDefault(require(\"./toDecimal\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getLongitude=function getLongitude(point,raw){var latKey=(0,_getCoordinateKey.default)(point,_constants.longitudeKeys);if(typeof latKey===\"undefined\"||latKey===null){return}var value=point[latKey];return raw===true?value:(0,_toDecimal.default)(value)};var _default=getLongitude;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var toRad=function toRad(value){return value*Math.PI/180};var _default=toRad;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var toDeg=function toDeg(value){return value*180/Math.PI};var _default=toDeg;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _getLatitude=_interopRequireDefault(require(\"./getLatitude\"));var _getLongitude=_interopRequireDefault(require(\"./getLongitude\"));var _toRad=_interopRequireDefault(require(\"./toRad\"));var _toDeg=_interopRequireDefault(require(\"./toDeg\"));var _constants=require(\"./constants\");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var computeDestinationPoint=function computeDestinationPoint(start,distance,bearing){var radius=arguments.length>3&&arguments[3]!==undefined?arguments[3]:6371000;var lat=(0,_getLatitude.default)(start);var lng=(0,_getLongitude.default)(start);var delta=distance/radius;var theta=(0,_toRad.default)(bearing);var phi1=(0,_toRad.default)(lat);var lambda1=(0,_toRad.default)(lng);var phi2=Math.asin(Math.sin(phi1)*Math.cos(delta)+Math.cos(phi1)*Math.sin(delta)*Math.cos(theta));var lambda2=lambda1+Math.atan2(Math.sin(theta)*Math.sin(delta)*Math.cos(phi1),Math.cos(delta)-Math.sin(phi1)*Math.sin(phi2));var longitude=(0,_toDeg.default)(lambda2);if(longitude<_constants.MINLON||longitude>_constants.MAXLON){lambda2=(lambda2+3*Math.PI)%(2*Math.PI)-Math.PI;longitude=(0,_toDeg.default)(lambda2)}return{latitude:(0,_toDeg.default)(phi2),longitude:longitude}};var _default=computeDestinationPoint;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _constants=require(\"./constants\");var convertArea=function convertArea(squareMeters){var targetUnit=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"m\";var factor=_constants.areaConversion[targetUnit];if(factor){return squareMeters*factor}throw new Error(\"Invalid unit used for area conversion.\")};var _default=convertArea;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _constants=require(\"./constants\");var convertDistance=function convertDistance(meters){var targetUnit=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"m\";var factor=_constants.distanceConversion[targetUnit];if(factor){return meters*factor}throw new Error(\"Invalid unit used for distance conversion.\")};var _default=convertDistance;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _constants=require(\"./constants\");var convertSpeed=function convertSpeed(metersPerSecond){var targetUnit=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"kmh\";switch(targetUnit){case\"kmh\":return metersPerSecond*_constants.timeConversion.h*_constants.distanceConversion.km;case\"mph\":return metersPerSecond*_constants.timeConversion.h*_constants.distanceConversion.mi;default:return metersPerSecond;}};var _default=convertSpeed;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o===\"string\")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n===\"Object\"&&o.constructor)n=o.constructor.name;if(n===\"Map\"||n===\"Set\")return Array.from(o);if(n===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol===\"undefined\"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i[\"return\"]!=null)_i[\"return\"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var imprecise=function imprecise(number){var decimals=arguments.length>1&&arguments[1]!==undefined?arguments[1]:4;var factor=Math.pow(10,decimals);return Math.round(number*factor)/factor};var decimal2sexagesimalNext=function decimal2sexagesimalNext(decimal){var _decimal$toString$spl=decimal.toString().split(\".\"),_decimal$toString$spl2=_slicedToArray(_decimal$toString$spl,2),pre=_decimal$toString$spl2[0],post=_decimal$toString$spl2[1];var deg=Math.abs(Number(pre));var min0=Number(\"0.\"+(post||0))*60;var sec0=min0.toString().split(\".\");var min=Math.floor(min0);var sec=imprecise(Number(\"0.\"+(sec0[1]||0))*60).toString();var _sec$split=sec.split(\".\"),_sec$split2=_slicedToArray(_sec$split,2),secPreDec=_sec$split2[0],_sec$split2$=_sec$split2[1],secDec=_sec$split2$===void 0?\"0\":_sec$split2$;return deg+\"\\xB0 \"+min.toString().padStart(2,\"0\")+\"' \"+secPreDec.padStart(2,\"0\")+\".\"+secDec.padEnd(1,\"0\")+\"\\\"\"};var _default=decimal2sexagesimalNext;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var robustAcos=function robustAcos(value){if(value>1){return 1}if(value<-1){return-1}return value};var _default=robustAcos;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _getLatitude=_interopRequireDefault(require(\"./getLatitude\"));var _getLongitude=_interopRequireDefault(require(\"./getLongitude\"));var _toRad=_interopRequireDefault(require(\"./toRad\"));var _robustAcos=_interopRequireDefault(require(\"./robustAcos\"));var _constants=require(\"./constants\");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getDistance=function getDistance(from,to){var accuracy=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;accuracy=typeof accuracy!==\"undefined\"&&!isNaN(accuracy)?accuracy:1;var fromLat=(0,_getLatitude.default)(from);var fromLon=(0,_getLongitude.default)(from);var toLat=(0,_getLatitude.default)(to);var toLon=(0,_getLongitude.default)(to);var distance=Math.acos((0,_robustAcos.default)(Math.sin((0,_toRad.default)(toLat))*Math.sin((0,_toRad.default)(fromLat))+Math.cos((0,_toRad.default)(toLat))*Math.cos((0,_toRad.default)(fromLat))*Math.cos((0,_toRad.default)(fromLon)-(0,_toRad.default)(toLon))))*_constants.earthRadius;return Math.round(distance/accuracy)*accuracy};var _default=getDistance;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _getDistance=_interopRequireDefault(require(\"./getDistance\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var orderByDistance=function orderByDistance(point,coords){var distanceFn=arguments.length>2&&arguments[2]!==undefined?arguments[2]:_getDistance.default;distanceFn=typeof distanceFn===\"function\"?distanceFn:_getDistance.default;return coords.slice().sort(function(a,b){return distanceFn(point,a)-distanceFn(point,b)})};var _default=orderByDistance;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _orderByDistance=_interopRequireDefault(require(\"./orderByDistance\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var findNearest=function findNearest(point,coords){return(0,_orderByDistance.default)(point,coords)[0]};var _default=findNearest;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _toRad=_interopRequireDefault(require(\"./toRad\"));var _getLatitude=_interopRequireDefault(require(\"./getLatitude\"));var _getLongitude=_interopRequireDefault(require(\"./getLongitude\"));var _constants=require(\"./constants\");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getAreaOfPolygon=function getAreaOfPolygon(points){var area=0;if(points.length>2){var lowerIndex;var middleIndex;var upperIndex;for(var i=0;i<points.length;i++){if(i===points.length-2){lowerIndex=points.length-2;middleIndex=points.length-1;upperIndex=0}else if(i===points.length-1){lowerIndex=points.length-1;middleIndex=0;upperIndex=1}else{lowerIndex=i;middleIndex=i+1;upperIndex=i+2}var p1lon=(0,_getLongitude.default)(points[lowerIndex]);var p2lat=(0,_getLatitude.default)(points[middleIndex]);var p3lon=(0,_getLongitude.default)(points[upperIndex]);area+=((0,_toRad.default)(p3lon)-(0,_toRad.default)(p1lon))*Math.sin((0,_toRad.default)(p2lat))}area=area*_constants.earthRadius*_constants.earthRadius/2}return Math.abs(area)};var _default=getAreaOfPolygon;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _getLatitude=_interopRequireDefault(require(\"./getLatitude\"));var _getLongitude=_interopRequireDefault(require(\"./getLongitude\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getBounds=function getBounds(points){if(Array.isArray(points)===false||points.length===0){throw new Error(\"No points were given.\")}return points.reduce(function(stats,point){var latitude=(0,_getLatitude.default)(point);var longitude=(0,_getLongitude.default)(point);return{maxLat:Math.max(latitude,stats.maxLat),minLat:Math.min(latitude,stats.minLat),maxLng:Math.max(longitude,stats.maxLng),minLng:Math.min(longitude,stats.minLng)}},{maxLat:-Infinity,minLat:Infinity,maxLng:-Infinity,minLng:Infinity})};var _default=getBounds;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _getLatitude=_interopRequireDefault(require(\"./getLatitude\"));var _getLongitude=_interopRequireDefault(require(\"./getLongitude\"));var _toRad=_interopRequireDefault(require(\"./toRad\"));var _toDeg=_interopRequireDefault(require(\"./toDeg\"));var _constants=require(\"./constants\");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getBoundsOfDistance=function getBoundsOfDistance(point,distance){var latitude=(0,_getLatitude.default)(point);var longitude=(0,_getLongitude.default)(point);var radLat=(0,_toRad.default)(latitude);var radLon=(0,_toRad.default)(longitude);var radDist=distance/_constants.earthRadius;var minLat=radLat-radDist;var maxLat=radLat+radDist;var MAX_LAT_RAD=(0,_toRad.default)(_constants.MAXLAT);var MIN_LAT_RAD=(0,_toRad.default)(_constants.MINLAT);var MAX_LON_RAD=(0,_toRad.default)(_constants.MAXLON);var MIN_LON_RAD=(0,_toRad.default)(_constants.MINLON);var minLon;var maxLon;if(minLat>MIN_LAT_RAD&&maxLat<MAX_LAT_RAD){var deltaLon=Math.asin(Math.sin(radDist)/Math.cos(radLat));minLon=radLon-deltaLon;if(minLon<MIN_LON_RAD){minLon+=Math.PI*2}maxLon=radLon+deltaLon;if(maxLon>MAX_LON_RAD){maxLon-=Math.PI*2}}else{minLat=Math.max(minLat,MIN_LAT_RAD);maxLat=Math.min(maxLat,MAX_LAT_RAD);minLon=MIN_LON_RAD;maxLon=MAX_LON_RAD}return[{latitude:(0,_toDeg.default)(minLat),longitude:(0,_toDeg.default)(minLon)},{latitude:(0,_toDeg.default)(maxLat),longitude:(0,_toDeg.default)(maxLon)}]};var _default=getBoundsOfDistance;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _getLatitude=_interopRequireDefault(require(\"./getLatitude\"));var _getLongitude=_interopRequireDefault(require(\"./getLongitude\"));var _toRad=_interopRequireDefault(require(\"./toRad\"));var _toDeg=_interopRequireDefault(require(\"./toDeg\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getCenter=function getCenter(points){if(Array.isArray(points)===false||points.length===0){return false}var numberOfPoints=points.length;var sum=points.reduce(function(acc,point){var pointLat=(0,_toRad.default)((0,_getLatitude.default)(point));var pointLon=(0,_toRad.default)((0,_getLongitude.default)(point));return{X:acc.X+Math.cos(pointLat)*Math.cos(pointLon),Y:acc.Y+Math.cos(pointLat)*Math.sin(pointLon),Z:acc.Z+Math.sin(pointLat)}},{X:0,Y:0,Z:0});var X=sum.X/numberOfPoints;var Y=sum.Y/numberOfPoints;var Z=sum.Z/numberOfPoints;return{longitude:(0,_toDeg.default)(Math.atan2(Y,X)),latitude:(0,_toDeg.default)(Math.atan2(Z,Math.sqrt(X*X+Y*Y)))}};var _default=getCenter;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _getBounds=_interopRequireDefault(require(\"./getBounds\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getCenterOfBounds=function getCenterOfBounds(coords){var bounds=(0,_getBounds.default)(coords);var latitude=bounds.minLat+(bounds.maxLat-bounds.minLat)/2;var longitude=bounds.minLng+(bounds.maxLng-bounds.minLng)/2;return{latitude:parseFloat(latitude.toFixed(6)),longitude:parseFloat(longitude.toFixed(6))}};var _default=getCenterOfBounds;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _getLatitude=_interopRequireDefault(require(\"./getLatitude\"));var _getLongitude=_interopRequireDefault(require(\"./getLongitude\"));var _toRad=_interopRequireDefault(require(\"./toRad\"));var _toDeg=_interopRequireDefault(require(\"./toDeg\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getRhumbLineBearing=function getRhumbLineBearing(origin,dest){var diffLon=(0,_toRad.default)((0,_getLongitude.default)(dest))-(0,_toRad.default)((0,_getLongitude.default)(origin));var diffPhi=Math.log(Math.tan((0,_toRad.default)((0,_getLatitude.default)(dest))/2+Math.PI/4)/Math.tan((0,_toRad.default)((0,_getLatitude.default)(origin))/2+Math.PI/4));if(Math.abs(diffLon)>Math.PI){if(diffLon>0){diffLon=(Math.PI*2-diffLon)*-1}else{diffLon=Math.PI*2+diffLon}}return((0,_toDeg.default)(Math.atan2(diffLon,diffPhi))+360)%360};var _default=getRhumbLineBearing;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _getRhumbLineBearing=_interopRequireDefault(require(\"./getRhumbLineBearing\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getCompassDirection=function getCompassDirection(origin,dest){var bearingFn=arguments.length>2&&arguments[2]!==undefined?arguments[2]:_getRhumbLineBearing.default;var bearing=typeof bearingFn===\"function\"?bearingFn(origin,dest):(0,_getRhumbLineBearing.default)(origin,dest);if(isNaN(bearing)){throw new Error(\"Could not calculate bearing for given points. Check your bearing function\")}switch(Math.round(bearing/22.5)){case 1:return\"NNE\";case 2:return\"NE\";case 3:return\"ENE\";case 4:return\"E\";case 5:return\"ESE\";case 6:return\"SE\";case 7:return\"SSE\";case 8:return\"S\";case 9:return\"SSW\";case 10:return\"SW\";case 11:return\"WSW\";case 12:return\"W\";case 13:return\"WNW\";case 14:return\"NW\";case 15:return\"NNW\";default:return\"N\";}};var _default=getCompassDirection;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _getDistance=_interopRequireDefault(require(\"./getDistance\"));var _robustAcos=_interopRequireDefault(require(\"./robustAcos\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getDistanceFromLine=function getDistanceFromLine(point,lineStart,lineEnd){var accuracy=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;var d1=(0,_getDistance.default)(lineStart,point,accuracy);var d2=(0,_getDistance.default)(point,lineEnd,accuracy);var d3=(0,_getDistance.default)(lineStart,lineEnd,accuracy);var alpha=Math.acos((0,_robustAcos.default)((d1*d1+d3*d3-d2*d2)/(2*d1*d3)));var beta=Math.acos((0,_robustAcos.default)((d2*d2+d3*d3-d1*d1)/(2*d2*d3)));if(alpha>Math.PI/2){return d1}if(beta>Math.PI/2){return d2}return Math.sin(alpha)*d1};var _default=getDistanceFromLine;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _getLatitude=_interopRequireDefault(require(\"./getLatitude\"));var _getLongitude=_interopRequireDefault(require(\"./getLongitude\"));var _toRad=_interopRequireDefault(require(\"./toRad\"));var _toDeg=_interopRequireDefault(require(\"./toDeg\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getGreatCircleBearing=function getGreatCircleBearing(origin,dest){var destLat=(0,_getLatitude.default)(dest);var detLon=(0,_getLongitude.default)(dest);var originLat=(0,_getLatitude.default)(origin);var originLon=(0,_getLongitude.default)(origin);var bearing=((0,_toDeg.default)(Math.atan2(Math.sin((0,_toRad.default)(detLon)-(0,_toRad.default)(originLon))*Math.cos((0,_toRad.default)(destLat)),Math.cos((0,_toRad.default)(originLat))*Math.sin((0,_toRad.default)(destLat))-Math.sin((0,_toRad.default)(originLat))*Math.cos((0,_toRad.default)(destLat))*Math.cos((0,_toRad.default)(detLon)-(0,_toRad.default)(originLon))))+360)%360;return bearing};var _default=getGreatCircleBearing;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _getDistance=_interopRequireDefault(require(\"./getDistance\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){\"@babel/helpers - typeof\";if(typeof Symbol===\"function\"&&typeof Symbol.iterator===\"symbol\"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj}}return _typeof(obj)}var getPathLength=function getPathLength(points){var distanceFn=arguments.length>1&&arguments[1]!==undefined?arguments[1]:_getDistance.default;return points.reduce(function(acc,point){if(_typeof(acc)===\"object\"&&acc.last!==null){acc.distance+=distanceFn(point,acc.last)}acc.last=point;return acc},{last:null,distance:0}).distance};var _default=getPathLength;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _getLatitude=_interopRequireDefault(require(\"./getLatitude\"));var _getLongitude=_interopRequireDefault(require(\"./getLongitude\"));var _toRad=_interopRequireDefault(require(\"./toRad\"));var _constants=require(\"./constants\");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getDistance=function getDistance(start,end){var accuracy=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;accuracy=typeof accuracy!==\"undefined\"&&!isNaN(accuracy)?accuracy:1;var startLat=(0,_getLatitude.default)(start);var startLon=(0,_getLongitude.default)(start);var endLat=(0,_getLatitude.default)(end);var endLon=(0,_getLongitude.default)(end);var b=6356752.314245;var ellipsoidParams=1/298.257223563;var L=(0,_toRad.default)(endLon-startLon);var cosSigma;var sigma;var sinAlpha;var cosSqAlpha;var cos2SigmaM;var sinSigma;var U1=Math.atan((1-ellipsoidParams)*Math.tan((0,_toRad.default)(parseFloat(startLat))));var U2=Math.atan((1-ellipsoidParams)*Math.tan((0,_toRad.default)(parseFloat(endLat))));var sinU1=Math.sin(U1);var cosU1=Math.cos(U1);var sinU2=Math.sin(U2);var cosU2=Math.cos(U2);var lambda=L;var lambdaP;var iterLimit=100;do{var sinLambda=Math.sin(lambda);var cosLambda=Math.cos(lambda);sinSigma=Math.sqrt(cosU2*sinLambda*(cosU2*sinLambda)+(cosU1*sinU2-sinU1*cosU2*cosLambda)*(cosU1*sinU2-sinU1*cosU2*cosLambda));if(sinSigma===0){return 0}cosSigma=sinU1*sinU2+cosU1*cosU2*cosLambda;sigma=Math.atan2(sinSigma,cosSigma);sinAlpha=cosU1*cosU2*sinLambda/sinSigma;cosSqAlpha=1-sinAlpha*sinAlpha;cos2SigmaM=cosSigma-2*sinU1*sinU2/cosSqAlpha;if(isNaN(cos2SigmaM)){cos2SigmaM=0}var C=ellipsoidParams/16*cosSqAlpha*(4+ellipsoidParams*(4-3*cosSqAlpha));lambdaP=lambda;lambda=L+(1-C)*ellipsoidParams*sinAlpha*(sigma+C*sinSigma*(cos2SigmaM+C*cosSigma*(-1+2*cos2SigmaM*cos2SigmaM)))}while(Math.abs(lambda-lambdaP)>1e-12&&--iterLimit>0);if(iterLimit===0){return NaN}var uSq=cosSqAlpha*(_constants.earthRadius*_constants.earthRadius-b*b)/(b*b);var A=1+uSq/16384*(4096+uSq*(-768+uSq*(320-175*uSq)));var B=uSq/1024*(256+uSq*(-128+uSq*(74-47*uSq)));var deltaSigma=B*sinSigma*(cos2SigmaM+B/4*(cosSigma*(-1+2*cos2SigmaM*cos2SigmaM)-B/6*cos2SigmaM*(-3+4*sinSigma*sinSigma)*(-3+4*cos2SigmaM*cos2SigmaM)));var distance=b*A*(sigma-deltaSigma);return Math.round(distance/accuracy)*accuracy};var _default=getDistance;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var getRoughCompassDirection=function getRoughCompassDirection(exact){if(/^NNE|NE|NNW|N$/.test(exact)){return\"N\"}if(/^ENE|E|ESE|SE$/.test(exact)){return\"E\"}if(/^SSE|S|SSW|SW$/.test(exact)){return\"S\"}if(/^WSW|W|WNW|NW$/.test(exact)){return\"W\"}};var _default=getRoughCompassDirection;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _getDistance=_interopRequireDefault(require(\"./getDistance\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getSpeed=function getSpeed(start,end){var distanceFn=arguments.length>2&&arguments[2]!==undefined?arguments[2]:_getDistance.default;var distance=distanceFn(start,end);var time=Number(end.time)-Number(start.time);var metersPerSecond=distance/time*1000;return metersPerSecond};var _default=getSpeed;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _getDistance=_interopRequireDefault(require(\"./getDistance\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var isPointInLine=function isPointInLine(point,lineStart,lineEnd){return(0,_getDistance.default)(lineStart,point)+(0,_getDistance.default)(point,lineEnd)===(0,_getDistance.default)(lineStart,lineEnd)};var _default=isPointInLine;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _getLatitude=_interopRequireDefault(require(\"./getLatitude\"));var _getLongitude=_interopRequireDefault(require(\"./getLongitude\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var isPointInPolygon=function isPointInPolygon(point,polygon){var isInside=false;var totalPolys=polygon.length;for(var i=-1,j=totalPolys-1;++i<totalPolys;j=i){if(((0,_getLongitude.default)(polygon[i])<=(0,_getLongitude.default)(point)&&(0,_getLongitude.default)(point)<(0,_getLongitude.default)(polygon[j])||(0,_getLongitude.default)(polygon[j])<=(0,_getLongitude.default)(point)&&(0,_getLongitude.default)(point)<(0,_getLongitude.default)(polygon[i]))&&(0,_getLatitude.default)(point)<((0,_getLatitude.default)(polygon[j])-(0,_getLatitude.default)(polygon[i]))*((0,_getLongitude.default)(point)-(0,_getLongitude.default)(polygon[i]))/((0,_getLongitude.default)(polygon[j])-(0,_getLongitude.default)(polygon[i]))+(0,_getLatitude.default)(polygon[i])){isInside=!isInside}}return isInside};var _default=isPointInPolygon;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _getDistanceFromLine=_interopRequireDefault(require(\"./getDistanceFromLine\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var isPointNearLine=function isPointNearLine(point,start,end,distance){return(0,_getDistanceFromLine.default)(point,start,end)<distance};var _default=isPointNearLine;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _getDistance=_interopRequireDefault(require(\"./getDistance\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var isPointWithinRadius=function isPointWithinRadius(point,center,radius){return(0,_getDistance.default)(point,center)<radius};var _default=isPointWithinRadius;exports.default=_default;","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o===\"string\")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n===\"Object\"&&o.constructor)n=o.constructor.name;if(n===\"Map\"||n===\"Set\")return Array.from(o);if(n===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol===\"undefined\"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i[\"return\"]!=null)_i[\"return\"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var wktToPolygon=function wktToPolygon(wkt){if(!wkt.startsWith(\"POLYGON\")){throw new Error(\"Invalid wkt.\")}var coordsText=wkt.slice(wkt.indexOf(\"(\")+2,wkt.indexOf(\")\")).split(\", \");var polygon=coordsText.map(function(coordText){var _coordText$split=coordText.split(\" \"),_coordText$split2=_slicedToArray(_coordText$split,2),longitude=_coordText$split2[0],latitude=_coordText$split2[1];return{longitude:parseFloat(longitude),latitude:parseFloat(latitude)}});return polygon};var _default=wktToPolygon;exports.default=_default;","<script>\nimport { decodeImage } from '../api'\nexport let src = null\nexport let size = null\n/*\n  import { onMount } from 'svelte'\n  const url = ''\n  onMount(() => {\n    return () => URL.revokeObjectURL(url)\n  })\n*/\nconst style = !(size ?? false) ? '' : `width: ${size}; height: ${size}`\n</script>\n<img\n  class=\"bimg\"\n  style={style}\n  src={decodeImage(src)}>\n","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});var _exportNames={computeDestinationPoint:true,convertArea:true,convertDistance:true,convertSpeed:true,decimalToSexagesimal:true,findNearest:true,getAreaOfPolygon:true,getBounds:true,getBoundsOfDistance:true,getCenter:true,getCenterOfBounds:true,getCompassDirection:true,getCoordinateKey:true,getCoordinateKeys:true,getDistance:true,getDistanceFromLine:true,getGreatCircleBearing:true,getLatitude:true,getLongitude:true,getPathLength:true,getPreciseDistance:true,getRhumbLineBearing:true,getRoughCompassDirection:true,getSpeed:true,isDecimal:true,isPointInLine:true,isPointInPolygon:true,isPointNearLine:true,isPointWithinRadius:true,isSexagesimal:true,isValidCoordinate:true,isValidLatitude:true,isValidLongitude:true,orderByDistance:true,sexagesimalToDecimal:true,toDecimal:true,toRad:true,toDeg:true,wktToPolygon:true};Object.defineProperty(exports,\"computeDestinationPoint\",{enumerable:true,get:function get(){return _computeDestinationPoint.default}});Object.defineProperty(exports,\"convertArea\",{enumerable:true,get:function get(){return _convertArea.default}});Object.defineProperty(exports,\"convertDistance\",{enumerable:true,get:function get(){return _convertDistance.default}});Object.defineProperty(exports,\"convertSpeed\",{enumerable:true,get:function get(){return _convertSpeed.default}});Object.defineProperty(exports,\"decimalToSexagesimal\",{enumerable:true,get:function get(){return _decimalToSexagesimal.default}});Object.defineProperty(exports,\"findNearest\",{enumerable:true,get:function get(){return _findNearest.default}});Object.defineProperty(exports,\"getAreaOfPolygon\",{enumerable:true,get:function get(){return _getAreaOfPolygon.default}});Object.defineProperty(exports,\"getBounds\",{enumerable:true,get:function get(){return _getBounds.default}});Object.defineProperty(exports,\"getBoundsOfDistance\",{enumerable:true,get:function get(){return _getBoundsOfDistance.default}});Object.defineProperty(exports,\"getCenter\",{enumerable:true,get:function get(){return _getCenter.default}});Object.defineProperty(exports,\"getCenterOfBounds\",{enumerable:true,get:function get(){return _getCenterOfBounds.default}});Object.defineProperty(exports,\"getCompassDirection\",{enumerable:true,get:function get(){return _getCompassDirection.default}});Object.defineProperty(exports,\"getCoordinateKey\",{enumerable:true,get:function get(){return _getCoordinateKey.default}});Object.defineProperty(exports,\"getCoordinateKeys\",{enumerable:true,get:function get(){return _getCoordinateKeys.default}});Object.defineProperty(exports,\"getDistance\",{enumerable:true,get:function get(){return _getDistance.default}});Object.defineProperty(exports,\"getDistanceFromLine\",{enumerable:true,get:function get(){return _getDistanceFromLine.default}});Object.defineProperty(exports,\"getGreatCircleBearing\",{enumerable:true,get:function get(){return _getGreatCircleBearing.default}});Object.defineProperty(exports,\"getLatitude\",{enumerable:true,get:function get(){return _getLatitude.default}});Object.defineProperty(exports,\"getLongitude\",{enumerable:true,get:function get(){return _getLongitude.default}});Object.defineProperty(exports,\"getPathLength\",{enumerable:true,get:function get(){return _getPathLength.default}});Object.defineProperty(exports,\"getPreciseDistance\",{enumerable:true,get:function get(){return _getPreciseDistance.default}});Object.defineProperty(exports,\"getRhumbLineBearing\",{enumerable:true,get:function get(){return _getRhumbLineBearing.default}});Object.defineProperty(exports,\"getRoughCompassDirection\",{enumerable:true,get:function get(){return _getRoughCompassDirection.default}});Object.defineProperty(exports,\"getSpeed\",{enumerable:true,get:function get(){return _getSpeed.default}});Object.defineProperty(exports,\"isDecimal\",{enumerable:true,get:function get(){return _isDecimal.default}});Object.defineProperty(exports,\"isPointInLine\",{enumerable:true,get:function get(){return _isPointInLine.default}});Object.defineProperty(exports,\"isPointInPolygon\",{enumerable:true,get:function get(){return _isPointInPolygon.default}});Object.defineProperty(exports,\"isPointNearLine\",{enumerable:true,get:function get(){return _isPointNearLine.default}});Object.defineProperty(exports,\"isPointWithinRadius\",{enumerable:true,get:function get(){return _isPointWithinRadius.default}});Object.defineProperty(exports,\"isSexagesimal\",{enumerable:true,get:function get(){return _isSexagesimal.default}});Object.defineProperty(exports,\"isValidCoordinate\",{enumerable:true,get:function get(){return _isValidCoordinate.default}});Object.defineProperty(exports,\"isValidLatitude\",{enumerable:true,get:function get(){return _isValidLatitude.default}});Object.defineProperty(exports,\"isValidLongitude\",{enumerable:true,get:function get(){return _isValidLongitude.default}});Object.defineProperty(exports,\"orderByDistance\",{enumerable:true,get:function get(){return _orderByDistance.default}});Object.defineProperty(exports,\"sexagesimalToDecimal\",{enumerable:true,get:function get(){return _sexagesimalToDecimal.default}});Object.defineProperty(exports,\"toDecimal\",{enumerable:true,get:function get(){return _toDecimal.default}});Object.defineProperty(exports,\"toRad\",{enumerable:true,get:function get(){return _toRad.default}});Object.defineProperty(exports,\"toDeg\",{enumerable:true,get:function get(){return _toDeg.default}});Object.defineProperty(exports,\"wktToPolygon\",{enumerable:true,get:function get(){return _wktToPolygon.default}});var _computeDestinationPoint=_interopRequireDefault(require(\"./computeDestinationPoint\"));var _convertArea=_interopRequireDefault(require(\"./convertArea\"));var _convertDistance=_interopRequireDefault(require(\"./convertDistance\"));var _convertSpeed=_interopRequireDefault(require(\"./convertSpeed\"));var _decimalToSexagesimal=_interopRequireDefault(require(\"./decimalToSexagesimal\"));var _findNearest=_interopRequireDefault(require(\"./findNearest\"));var _getAreaOfPolygon=_interopRequireDefault(require(\"./getAreaOfPolygon\"));var _getBounds=_interopRequireDefault(require(\"./getBounds\"));var _getBoundsOfDistance=_interopRequireDefault(require(\"./getBoundsOfDistance\"));var _getCenter=_interopRequireDefault(require(\"./getCenter\"));var _getCenterOfBounds=_interopRequireDefault(require(\"./getCenterOfBounds\"));var _getCompassDirection=_interopRequireDefault(require(\"./getCompassDirection\"));var _getCoordinateKey=_interopRequireDefault(require(\"./getCoordinateKey\"));var _getCoordinateKeys=_interopRequireDefault(require(\"./getCoordinateKeys\"));var _getDistance=_interopRequireDefault(require(\"./getDistance\"));var _getDistanceFromLine=_interopRequireDefault(require(\"./getDistanceFromLine\"));var _getGreatCircleBearing=_interopRequireDefault(require(\"./getGreatCircleBearing\"));var _getLatitude=_interopRequireDefault(require(\"./getLatitude\"));var _getLongitude=_interopRequireDefault(require(\"./getLongitude\"));var _getPathLength=_interopRequireDefault(require(\"./getPathLength\"));var _getPreciseDistance=_interopRequireDefault(require(\"./getPreciseDistance\"));var _getRhumbLineBearing=_interopRequireDefault(require(\"./getRhumbLineBearing\"));var _getRoughCompassDirection=_interopRequireDefault(require(\"./getRoughCompassDirection\"));var _getSpeed=_interopRequireDefault(require(\"./getSpeed\"));var _isDecimal=_interopRequireDefault(require(\"./isDecimal\"));var _isPointInLine=_interopRequireDefault(require(\"./isPointInLine\"));var _isPointInPolygon=_interopRequireDefault(require(\"./isPointInPolygon\"));var _isPointNearLine=_interopRequireDefault(require(\"./isPointNearLine\"));var _isPointWithinRadius=_interopRequireDefault(require(\"./isPointWithinRadius\"));var _isSexagesimal=_interopRequireDefault(require(\"./isSexagesimal\"));var _isValidCoordinate=_interopRequireDefault(require(\"./isValidCoordinate\"));var _isValidLatitude=_interopRequireDefault(require(\"./isValidLatitude\"));var _isValidLongitude=_interopRequireDefault(require(\"./isValidLongitude\"));var _orderByDistance=_interopRequireDefault(require(\"./orderByDistance\"));var _sexagesimalToDecimal=_interopRequireDefault(require(\"./sexagesimalToDecimal\"));var _toDecimal=_interopRequireDefault(require(\"./toDecimal\"));var _toRad=_interopRequireDefault(require(\"./toRad\"));var _toDeg=_interopRequireDefault(require(\"./toDeg\"));var _wktToPolygon=_interopRequireDefault(require(\"./wktToPolygon\"));var _constants=require(\"./constants\");Object.keys(_constants).forEach(function(key){if(key===\"default\"||key===\"__esModule\")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _constants[key]}})});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}","<script>\nimport { getDistance } from 'geolib'\nimport BinaryImage from './BinaryImage.svelte'\nimport { kernel, decodePk } from '../api'\nimport { ITEMS } from '../../blockend/items.db'\nexport let peer\nexport let size = 'normal'\nlet distance = null\n// Let's leave distances alone it alone for now.\n/*\nif (kernel.pk) {\n  const a = decodePk(kernel.pk)\n  const b = decodePk(peer.pk)\n  distance = getDistance(a, b, 1000)\n}\n*/\nconst inv = peer.inventory || []\n</script>\n  <article class=\"peer\">\n    <legend>\n      <overlay>\n        <div style=\"grid-area: nw;\" class=\"hpad\">\n          <slot name=\"nw\">\n            <h3>\n              <dot class={peer.state} data-tooltip={peer.state}>&nbsp;</dot>\n              {peer.score}\n            </h3>\n          </slot>\n        </div>\n        <div style=\"grid-area: sw; align-self: end;\" class=\"hpad\">\n          <h2>{peer.name}</h2>\n        </div>\n        <div style=\"grid-area: se; align-self: end; justify-self: end;\" class=\"end\">\n          <h2>\n            {#each inv as item}\n              <!-- TODO: lookup inventory.yaml for:\n                attr:title = item.short\n                img = item.gfx\n                on:click => $showItemPopup(item.id) ?\n                <code>{JSON.stringify(item)}</code>\n              -->\n              {ITEMS[item.id].image}\n            {/each}\n          </h2>\n        </div>\n      </overlay>\n      <BinaryImage src={peer.picture}/>\n    </legend>\n    <slot name=\"genderloc\">\n      <!--{#if distance !== null}\n        Distance {distance}Km\n      {/if}-->\n    </slot>\n    <slot></slot>\n  </article>\n","<script>\nimport { ITEMS } from '../../blockend/items.db'\nimport { writable } from 'svelte/store'\nimport Dialog from '../components/Dialog.svelte'\nexport let item = undefined\nexport let items = []\n// items = Object.values(ITEMS).map(i => i.id)\nconst pop = writable(false)\nconsole.log('ItemInput', items)\nfunction select (id) {\n  $pop = false\n  item = id\n}\n</script>\n<item-input role=\"list\">\n  {#if $pop}\n    <Dialog>\n      <backdrop>\n        {#if items?.length}\n        <inventory role=\"listbox\">\n          <item role=\"button\"\n            on:click={() => select(null)}>\n            <emo></emo>\n          </item>{#each items as i}\n            <item role=\"button\" class={ITEMS[i].category}\n              on:click={() => select(i)}>\n              <emo>{ITEMS[i].image}</emo>\n            </item>\n          {/each}\n        </inventory>\n        {:else}\n          <article>\n            <slot>No items</slot>\n            <footer>\n              <button on:click={() => $pop = false}>ok</button>\n          </article>\n        {/if}\n      </backdrop>\n    </Dialog>\n  {/if}\n  <inventory on:click={() => $pop = !$pop}>\n    {#if item}\n    <item role=\"button\" class={ITEMS[item].category}>\n      <emo>{ITEMS[item].image}</emo>\n    </item>\n    {/if}\n  </inventory>\n</item-input>\n<style>\nbackdrop inventory {\n  width: calc(var(--sb) * 3);\n}\n</style>\n","<script>\nimport { onMount } from 'svelte'\nimport { writable, derived } from 'svelte/store'\nimport {\n  state,\n  kernel,\n  boot,\n  Peers,\n  Cooldowns,\n  Profile,\n  Vibes,\n} from '../api'\nimport { cart } from '../network-cart'\nimport { ITEMS } from '../../blockend/items.db'\nimport { btok } from '../../blockend/util'\nimport Timer from '../components/Timer.svelte'\nimport Portrait from '../components/PeerPortrait.svelte'\nimport Icon from '../components/Icon.svelte'\nimport Dialog from '../components/Dialog.svelte'\nimport ItemInput from '../components/ItemInput.svelte'\nimport { navigate } from '../router'\nimport { ACTION_OFFER, ACTION_NETWORK_PURCHASE } from '../../blockend/transactions'\nconst profile = Profile('profile')\nconst cooldowns = Cooldowns('cd')\nconst peers = Peers()\nconst vibes = Vibes()\nconst showFiltersDialog = writable(false)\nconst inspectPeer = writable(false)\nconst activeVibe = derived([vibes, inspectPeer], ([vs, peer]) => {\n    const empty = { state: 'none' }\n    return !peer\n      ? empty\n      : vs.find(v => v.peerId?.equals(peer.pk)) || empty\n})\n// Auto-connect to swarm-topic\nif (!$state.swarming) boot()\n  .catch(console.error.bind(null, 'Auto-connect failed'))\n\nconst attachment = writable(null)\nconst availableAttachments = derived(profile, p => {\n  if (!p.inventory) return []\n  const items = p.inventory.filter(i => !ITEMS[i.id].soulbound && i.qty)\n    .map(i => i.id)\n  return items\n})\n\n\nfunction sendVibe (pk) {\n  const transactions = []\n  for (const item of $cart) {\n    transactions.push({\n      t: ACTION_NETWORK_PURCHASE,\n      p: { i: item.id, q: item.qty }\n    })\n  }\n  if ($attachment) {\n    transactions.push({ t: ACTION_OFFER, p: { i: $attachment, q: 1 } })\n  }\n\n  kernel.sendVibe(pk, transactions)\n    .then(() => $cart = [])\n    .catch(err => console.error('Failed sending vibe', err))\n}\n\n</script>\n<pub-view class=\"block container\">\n  <h1 class=\"view-header\">Club Room</h1>\n  <p>\n    This is the common room, see someone interesting?<br/>\n    Shoot!\n  </p>\n  <p>\n  {#if !$state.entered}\n    Press the <strong>START</strong> button to play.\n  {:else}\n    {#if $cooldowns.canVibe}\n      Your\n        <strong\n          data-tooltip=\"Initiate a conversation, cooldown 5min\"\n          data-placement=\"right\">\n          <purple>vibe</purple>\n        </strong>\n      is primed and loaded.\n      <sup>Pow pow! </sup>\n    {:else}\n      Vibe available in again <Timer expiresAt={$cooldowns.vibe} format=\"mm:ss\" />\n    {/if}\n  {/if}\n  </p>\n  <div class=\"row space-between xcenter\">\n    <h6 class=\"nogap\">Patrons {$peers.length}</h6>\n    <b role=\"button\"\n       class=\"outline hpad vgap\"\n       on:click={() => $showFiltersDialog = true}>\n      Filter\n    </b>\n  </div>\n  <peers class=\"row wrap center\">\n  {#each $peers as peer}\n    <!-- TODO: Make a small thumbnail cb style,\n      it's awkward to be up in someone's face, when you\n      enter a bar you wanna start out as part of a herd -->\n    <div on:click={() => $inspectPeer = peer}>\n      <Portrait peer={peer}>\n        <div class=\"flex row space-between pad\">\n          <p class=\"nogap\">\n            {peer.tagline}\n          </p>\n        </div>\n      </Portrait>\n    </div>\n  {/each}\n  </peers>\n  {#if $showFiltersDialog}\n    <Dialog open={true} on:fade={() => $showFiltersDialog = false}>\n      <article>\n        <h6>Genders</h6>\n        <fieldset>\n          <label for=\"m\">\n            <input type=\"checkbox\" id=\"m\" name=\"m\" role=\"switch\">\n            M\n          </label>\n        </fieldset>\n        <fieldset>\n          <label for=\"f\">\n            <input type=\"checkbox\" id=\"f\" name=\"f\" role=\"switch\">\n            F\n          </label>\n        </fieldset>\n        <fieldset>\n          <label for=\"nb\">\n            <input type=\"checkbox\" id=\"nb\" name=\"nb\" role=\"switch\">\n            NB\n          </label>\n        </fieldset>\n        <h6>Distance</h6>\n        <label for=\"distance\">\n          GLOBAL\n          <input type=\"range\" min=\"0\" max=\"100\" value=\"100\" id=\"distance\" name=\"distance\">\n        </label>\n        <footer>\n          <b role=\"button\">reset</b>\n          <b role=\"button\" on:click={() => $showFiltersDialog = false}>filter</b>\n        </footer>\n      </article>\n    </Dialog>\n  {/if}\n  {#if $inspectPeer}\n    <Dialog on:fade={() => $inspectPeer = false}>\n      <div>\n        <Portrait peer={$inspectPeer}>\n          <span slot=\"nw\"></span>\n        </Portrait>\n        <article class=\"nogap\">\n          <div class=\"row space-between xcenter\">\n            <h6 class=\"nogap\">\n              Score {$inspectPeer.score}\n              | {$inspectPeer.balance}\n            </h6>\n            <h6 class=\"nogap\">\n              <!-- {$inspectPeer.state} -->\n               <code><Timer expiresAt={$inspectPeer.expiresAt} format=\"HH:mm:ss\"/></code>\n            </h6>\n          </div>\n          <p>{$inspectPeer.tagline}</p>\n          <br/>\n          <div class=\"column end xcenter\">\n              <h6 class=\"nogap\">Attachments</h6>\n              <ItemInput bind:item={$attachment}\n                items={$availableAttachments}>\n                <p>\n                  You don't have anything to offer.<br/>\n                  <a href=\"#/shop\">Visit the bar to get items</a>\n                </p>\n              </ItemInput>\n          </div>\n          {#if $cart.length}\n          <div class=\"text-right\">\n            Delivery: {#each $cart as item}{ITEMS[item.id].image}{/each}\n          </div>\n          {/if}\n          <footer>\n            {#if !$state.entered}\n              <div class=\"text-right\">\n                <sup class=\"hpad\">Press START to play</sup>\n              </div>\n            {/if}\n            <div class=\"row space-between\">\n              <button class=\"hgap\" on:click={() => $inspectPeer = false}>ok</button>\n              {#if !$state.entered}\n                <button class=\"hgap purple\" disabled>vibe</button>\n              {:else if $state.entered && !$cooldowns.vibe}\n                <button class=\"hgap purple\" on:click={() => sendVibe($inspectPeer.pk)}>\n                  vibe\n                </button>\n              {:else if $activeVibe?.state === 'match'}\n                <button class=\"hgap green\"\n                  on:click={() => navigate(`chat/${btok($activeVibe.id)}`)}>\n                  chat\n                </button>\n              {:else}\n                <button class=\"hgap red\" disabled>\n                  <Timer expiresAt={$cooldowns.vibe} format=\"mm:ss\" />\n                </button>\n              {/if}\n            </div>\n          </footer>\n        </article>\n      </div>\n    </Dialog>\n  {/if}\n</pub-view>\n","/**\n * Compute the dimension of the crop area based on image size and aspect ratio\n * @param {number} imgWidth width of the src image in pixels\n * @param {number} imgHeight height of the src image in pixels\n * @param {number} aspect aspect ratio of the crop\n */\nexport function getCropSize(imgWidth, imgHeight, aspect) {\n  if (imgWidth >= imgHeight * aspect) {\n    return {\n      width: imgHeight * aspect,\n      height: imgHeight,\n    }\n  }\n  return {\n    width: imgWidth,\n    height: imgWidth / aspect,\n  }\n}\n\n/**\n * Ensure a new image position stays in the crop area.\n * @param {{x: number, y: number}} position new x/y position requested for the image\n * @param {{width: number, height: number}} imageSize width/height of the src image\n * @param {{width: number, height: number}} cropSize width/height of the crop area\n * @param {number} zoom zoom value\n * @returns {{x: number, y: number}}\n */\nexport function restrictPosition(position, imageSize, cropSize, zoom) {\n  return {\n    x: restrictPositionCoord(position.x, imageSize.width, cropSize.width, zoom),\n    y: restrictPositionCoord(position.y, imageSize.height, cropSize.height, zoom),\n  }\n}\n\nfunction restrictPositionCoord(position, imageSize, cropSize, zoom) {\n  const maxPosition = (imageSize * zoom) / 2 - cropSize / 2\n  return Math.min(maxPosition, Math.max(position, -maxPosition))\n}\n\nexport function getDistanceBetweenPoints(pointA, pointB) {\n  return Math.sqrt(Math.pow(pointA.y - pointB.y, 2) + Math.pow(pointA.x - pointB.x, 2))\n}\n\n/**\n * Compute the output cropped area of the image in percentages and pixels.\n * x/y are the top-left coordinates on the src image\n * @param {{x: number, y number}} crop x/y position of the current center of the image\n * @param {{width: number, height: number, naturalWidth: number, naturelHeight: number}} imageSize width/height of the src image (default is size on the screen, natural is the original size)\n * @param {{width: number, height: number}} cropSize width/height of the crop area\n * @param {number} aspect aspect value\n * @param {number} zoom zoom value\n * @param {boolean} restrictPosition whether we should limit or not the cropped area\n */\nexport function computeCroppedArea(crop, imgSize, cropSize, aspect, zoom, restrictPosition = true) {\n  const limitAreaFn = restrictPosition ? limitArea : noOp\n  const croppedAreaPercentages = {\n    x: limitAreaFn(\n      100,\n      (((imgSize.width - cropSize.width / zoom) / 2 - crop.x / zoom) / imgSize.width) * 100\n    ),\n    y: limitAreaFn(\n      100,\n      (((imgSize.height - cropSize.height / zoom) / 2 - crop.y / zoom) / imgSize.height) * 100\n    ),\n    width: limitAreaFn(100, ((cropSize.width / imgSize.width) * 100) / zoom),\n    height: limitAreaFn(100, ((cropSize.height / imgSize.height) * 100) / zoom),\n  }\n\n  // we compute the pixels size naively\n  const widthInPixels = limitAreaFn(\n    imgSize.naturalWidth,\n    (croppedAreaPercentages.width * imgSize.naturalWidth) / 100,\n    true\n  )\n  const heightInPixels = limitAreaFn(\n    imgSize.naturalHeight,\n    (croppedAreaPercentages.height * imgSize.naturalHeight) / 100,\n    true\n  )\n  const isImgWiderThanHigh = imgSize.naturalWidth >= imgSize.naturalHeight * aspect\n\n  // then we ensure the width and height exactly match the aspect (to avoid rounding approximations)\n  // if the image is wider than high, when zoom is 0, the crop height will be equals to iamge height\n  // thus we want to compute the width from the height and aspect for accuracy.\n  // Otherwise, we compute the height from width and aspect.\n  const sizePixels = isImgWiderThanHigh\n    ? {\n        width: Math.round(heightInPixels * aspect),\n        height: heightInPixels,\n      }\n    : {\n        width: widthInPixels,\n        height: Math.round(widthInPixels / aspect),\n      }\n  const croppedAreaPixels = {\n    ...sizePixels,\n    x: limitAreaFn(\n      imgSize.naturalWidth - sizePixels.width,\n      (croppedAreaPercentages.x * imgSize.naturalWidth) / 100,\n      true\n    ),\n    y: limitAreaFn(\n      imgSize.naturalHeight - sizePixels.height,\n      (croppedAreaPercentages.y * imgSize.naturalHeight) / 100,\n      true\n    ),\n  }\n  return { croppedAreaPercentages, croppedAreaPixels }\n}\n\n/**\n * Ensure the returned value is between 0 and max\n * @param {number} max\n * @param {number} value\n * @param {boolean} shouldRound\n */\nfunction limitArea(max, value, shouldRound = false) {\n  const v = shouldRound ? Math.round(value) : value\n  return Math.min(max, Math.max(0, v))\n}\n\nfunction noOp(max, value) {\n  return value\n}\n\n/**\n * Return the point that is the center of point a and b\n * @param {{x: number, y: number}} a\n * @param {{x: number, y: number}} b\n */\nexport function getCenter(a, b) {\n  return {\n    x: (b.x + a.x) / 2,\n    y: (b.y + a.y) / 2,\n  }\n}\n","<script>\n  import { onMount, onDestroy, createEventDispatcher } from 'svelte'\n  import * as helpers from './helpers'\n\n  export let image\n  export let crop = { x: 0, y: 0 }\n  export let zoom = 1\n  export let aspect = 4 / 3\n  export let minZoom = 1\n  export let maxZoom = 3\n  export let cropSize = null\n  export let cropShape = 'rect'\n  export let showGrid = true\n  export let zoomSpeed = 1\n  export let crossOrigin = null\n  export let restrictPosition = true\n\n  let cropperSize = null\n  let imageSize = { width: 0, height: 0, naturalWidth: 0, naturalHeight: 0 }\n  let containerEl = null\n  let containerRect = null\n  let imgEl = null\n  let dragStartPosition = { x: 0, y: 0 }\n  let dragStartCrop = { x: 0, y: 0 }\n  let lastPinchDistance = 0\n  let rafDragTimeout = null\n  let rafZoomTimeout = null\n\n  const dispatch = createEventDispatcher()\n\n  onMount(() => {\n    // when rendered via SSR, the image can already be loaded and its onLoad callback will never be called\n    if (imgEl && imgEl.complete) {\n      onImgLoad()\n    }\n  })\n\n  onDestroy(() => {\n    cleanEvents()\n  })\n\n  const cleanEvents = () => {\n    document.removeEventListener('mousemove', onMouseMove)\n    document.removeEventListener('mouseup', onDragStopped)\n    document.removeEventListener('touchmove', onTouchMove)\n    document.removeEventListener('touchend', onDragStopped)\n  }\n\n  const onImgLoad = () => {\n    computeSizes()\n    emitCropData()\n  }\n\n  const getAspect = () => {\n    if (cropSize) {\n      return cropSize.width / cropSize.height\n    }\n    return aspect\n  }\n\n  const computeSizes = () => {\n    if (imgEl) {\n      imageSize = {\n        width: imgEl.width,\n        height: imgEl.height,\n        naturalWidth: imgEl.naturalWidth,\n        naturalHeight: imgEl.naturalHeight,\n      }\n      cropperSize = cropSize ? cropSize : helpers.getCropSize(imgEl.width, imgEl.height, aspect)\n    }\n    if (containerEl) {\n      containerRect = containerEl.getBoundingClientRect()\n    }\n  }\n\n  const getMousePoint = e => ({ x: Number(e.clientX), y: Number(e.clientY) })\n\n  const getTouchPoint = touch => ({\n    x: Number(touch.clientX),\n    y: Number(touch.clientY),\n  })\n\n  const onMouseDown = e => {\n    document.addEventListener('mousemove', onMouseMove)\n    document.addEventListener('mouseup', onDragStopped)\n    onDragStart(getMousePoint(e))\n  }\n\n  const onMouseMove = e => onDrag(getMousePoint(e))\n\n  const onTouchStart = e => {\n    document.addEventListener('touchmove', onTouchMove, { passive: false }) // iOS 11 now defaults to passive: true\n    document.addEventListener('touchend', onDragStopped)\n\n    if (e.touches.length === 2) {\n      onPinchStart(e)\n    } else if (e.touches.length === 1) {\n      onDragStart(getTouchPoint(e.touches[0]))\n    }\n  }\n\n  const onTouchMove = e => {\n    // Prevent whole page from scrolling on iOS.\n    e.preventDefault()\n    if (e.touches.length === 2) {\n      onPinchMove(e)\n    } else if (e.touches.length === 1) {\n      onDrag(getTouchPoint(e.touches[0]))\n    }\n  }\n\n  const onDragStart = ({ x, y }) => {\n    dragStartPosition = { x, y }\n    dragStartCrop = { x: crop.x, y: crop.y }\n  }\n\n  const onDrag = ({ x, y }) => {\n    if (rafDragTimeout) window.cancelAnimationFrame(rafDragTimeout)\n\n    rafDragTimeout = window.requestAnimationFrame(() => {\n      if (x === undefined || y === undefined) return\n      const offsetX = x - dragStartPosition.x\n      const offsetY = y - dragStartPosition.y\n      const requestedPosition = {\n        x: dragStartCrop.x + offsetX,\n        y: dragStartCrop.y + offsetY,\n      }\n\n      crop = restrictPosition\n        ? helpers.restrictPosition(requestedPosition, imageSize, cropperSize, zoom)\n        : requestedPosition\n    })\n  }\n\n  const onDragStopped = () => {\n    cleanEvents()\n    emitCropData()\n  }\n\n  const onPinchStart = e => {\n    const pointA = getTouchPoint(e.touches[0])\n    const pointB = getTouchPoint(e.touches[1])\n    lastPinchDistance = helpers.getDistanceBetweenPoints(pointA, pointB)\n    onDragStart(helpers.getCenter(pointA, pointB))\n  }\n\n  const onPinchMove = e => {\n    const pointA = getTouchPoint(e.touches[0])\n    const pointB = getTouchPoint(e.touches[1])\n    const center = helpers.getCenter(pointA, pointB)\n    onDrag(center)\n\n    if (rafZoomTimeout) window.cancelAnimationFrame(rafZoomTimeout)\n    rafZoomTimeout = window.requestAnimationFrame(() => {\n      const distance = helpers.getDistanceBetweenPoints(pointA, pointB)\n      const newZoom = zoom * (distance / lastPinchDistance)\n      setNewZoom(newZoom, center)\n      lastPinchDistance = distance\n    })\n  }\n\n  const onWheel = e => {\n    const point = getMousePoint(e)\n    const newZoom = zoom - (e.deltaY * zoomSpeed) / 200\n    setNewZoom(newZoom, point)\n  }\n\n  const getPointOnContainer = ({ x, y }) => {\n    if (!containerRect) {\n      throw new Error('The Cropper is not mounted')\n    }\n    return {\n      x: containerRect.width / 2 - (x - containerRect.left),\n      y: containerRect.height / 2 - (y - containerRect.top),\n    }\n  }\n\n  const getPointOnImage = ({ x, y }) => ({\n    x: (x + crop.x) / zoom,\n    y: (y + crop.y) / zoom,\n  })\n\n  const setNewZoom = (newZoom, point) => {\n    const zoomPoint = getPointOnContainer(point)\n    const zoomTarget = getPointOnImage(zoomPoint)\n    zoom = Math.min(maxZoom, Math.max(newZoom, minZoom))\n\n    const requestedPosition = {\n      x: zoomTarget.x * zoom - zoomPoint.x,\n      y: zoomTarget.y * zoom - zoomPoint.y,\n    }\n    crop = restrictPosition\n      ? helpers.restrictPosition(requestedPosition, imageSize, cropperSize, zoom)\n      : requestedPosition\n  }\n\n  const emitCropData = () => {\n    if (!cropperSize || cropperSize.width === 0) return\n    // this is to ensure the crop is correctly restricted after a zoom back (https://github.com/ricardo-ch/svelte-easy-crop/issues/6)\n    const position = restrictPosition\n      ? helpers.restrictPosition(crop, imageSize, cropperSize, zoom)\n      : crop\n    const { croppedAreaPercentages, croppedAreaPixels } = helpers.computeCroppedArea(\n      position,\n      imageSize,\n      cropperSize,\n      getAspect(),\n      zoom,\n      restrictPosition\n    )\n\n    dispatch('cropcomplete', {\n      percent: croppedAreaPercentages,\n      pixels: croppedAreaPixels,\n    })\n  }\n\n  // ------ Reactive statement ------\n  //when aspect changes, we reset the cropperSize\n  $: if (imgEl) {\n    cropperSize = cropSize ? cropSize : helpers.getCropSize(imgEl.width, imgEl.height, aspect)\n  }\n\n  // when zoom changes, we recompute the cropped area\n  $: zoom && emitCropData()\n</script>\n\n<svelte:window on:resize={computeSizes} />\n<div\n  class=\"container\"\n  bind:this={containerEl}\n  on:mousedown|preventDefault={onMouseDown}\n  on:touchstart|preventDefault={onTouchStart}\n  on:wheel|preventDefault={onWheel}\n  on:gesturestart|preventDefault\n  on:gesturechange|preventDefault\n  data-testid=\"container\"\n>\n  <img\n    bind:this={imgEl}\n    class=\"image\"\n    src={image}\n    on:load={onImgLoad}\n    alt=\"\"\n    style=\"transform: translate({crop.x}px, {crop.y}px) scale({zoom});\"\n    crossorigin={crossOrigin}\n  />\n  {#if cropperSize}\n    <div\n      class=\"cropperArea\"\n      class:round={cropShape === 'round'}\n      class:grid={showGrid}\n      style=\"width: {cropperSize.width}px; height: {cropperSize.height}px;\"\n      data-testid=\"cropper\"\n    />\n  {/if}\n</div>\n\n<style>\n  .container {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    overflow: hidden;\n    user-select: none;\n    touch-action: none;\n    cursor: move;\n  }\n\n  .image {\n    max-width: 100%;\n    max-height: 100%;\n    margin: auto;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    will-change: transform;\n  }\n\n  .cropperArea {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    box-shadow: 0 0 0 9999em;\n    box-sizing: border-box;\n    color: rgba(0, 0, 0, 0.5);\n    border: 1px solid rgba(255, 255, 255, 0.5);\n    overflow: hidden;\n  }\n\n  .grid:before {\n    content: ' ';\n    box-sizing: border-box;\n    border: 1px solid rgba(255, 255, 255, 0.5);\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 33.33%;\n    right: 33.33%;\n    border-top: 0;\n    border-bottom: 0;\n  }\n\n  .grid:after {\n    content: ' ';\n    box-sizing: border-box;\n    border: 1px solid rgba(255, 255, 255, 0.5);\n    position: absolute;\n    top: 33.33%;\n    bottom: 33.33%;\n    left: 0;\n    right: 0;\n    border-left: 0;\n    border-right: 0;\n  }\n\n  .round {\n    border-radius: 50%;\n  }\n</style>\n","<script>\nimport { onMount } from 'svelte'\nimport Cropper from 'svelte-easy-crop' // The guy who wrote this built a hammer without a shaft.\n// Other candidates\n// https://www.npmjs.com/package/svelte-imgcrop\nimport { writable } from 'svelte/store'\nimport { encodeImage, decodeImage } from '../api'\nexport let output\nlet canvasElement, ctx, imgElement\nconst cropURL = writable()\nlet files\nlet crop = { x: 0, y: 0 }\nlet zoom = 1\n$: if (files) {\n  const file = files[0]\n  preprocessFile(file).catch(console.error.bind(null, 'Preprocess failed'))\n}\n\nasync function setImage (url) {\n  return new Promise(resolve => {\n    imgElement.onload = () => {\n      if (imgElement.src === '') return\n      console.info(imgElement.width, imgElement.height)\n      const s =  Math.min(imgElement.height, imgElement.width)\n      ctx.drawImage(imgElement,\n        (imgElement.width - s) / 2, (imgElement.height - s) / 2, s, s, // Src\n        0, 0, 300, 300 // Dst\n      )\n      imgElement.src = ''\n      resolve()\n    }\n    imgElement.src = url\n  })\n}\n\nasync function preprocessFile(file) {\n  let url\n  try {\n    url = URL.createObjectURL(file)\n    await setImage(url)\n    URL.revokeObjectURL(url)\n\n    const dataUrl = canvasElement.toDataURL('image/jpeg', 0.35)\n    const buf = encodeImage(dataUrl)\n    console.info(`DataURL: ${dataUrl.length}, Binary: ${buf.length}, compression: ${buf.length / dataUrl.length}`)\n    $output = buf\n    /*\n\t\tlet reader = new FileReader()\n\t\treader.onload = e => {\n\t\t\timage = e.target.result\n\t\t}\n\t\treader.readAsDataURL(imageFile)\n    */\n  } catch (e) {\n    // URL.revokeObjectURL(url)\n    throw e\n  }\n}\n\nfunction onCrop (ev) {\n  const { percent, pixels } = ev.detail\n  console.info('CropComplete', percent, pixels)\n  console.info('Crop', crop, 'Zoom', zoom)\n  // transform: translate(11.64px, 21.84px) scale(1.84);\n  // $doCrop = false\n  $output = false\n}\n\nonMount(() => {\n  ctx = canvasElement.getContext('2d')\n  ctx.fillStyle = 'gray'\n  ctx.fillRect(0, 0, 300, 300)\n  const unsub = output?.subscribe(blob => {\n    console.info('Redrawing preview due to change', blob?.length)\n    if (blob) {\n      // gonna have to tweak $profile and $peer neurons to provide object-urls\n      // also have to not load peer.picture blob into register memory.\n      // also have to use an interrupt to catch each incoming image and store\n      // to some separate store that allows createObjectURL api/reference\n      const url = decodeImage($output)\n      setImage(url)\n    }\n  })\n\n  return () => { // Destroy\n    unsub && unsub()\n  }\n})\n</script>\n<image-loader>\n  <input type=\"file\" bind:files accept=\"image/*\" id=\"picture\" name=\"picture\">\n  {#if false}\n    <button>done</button>\n    <Cropper\n      image={$cropURL}\n      aspect={1}\n      bind:crop bind:zoom\n      on:cropcomplete={onCrop}\n      showGrid={false}\n      />\n  {:else}\n    <div class=\"row center\">\n      <canvas bind:this={canvasElement} width=\"300\" height=\"300\"/>\n    </div>\n    <img bind:this={imgElement} alt=\"preview\" id=\"preview\" style=\"display:none\"/>\n  {/if}\n</image-loader>\n<style>\n  #preview {\n    width: 300px;\n    height: 300px;\n  }\n</style>\n","<script>\nimport {\n  kernel,\n  keychain,\n  updateProfile,\n  Profile,\n  decodePk,\n  reloadStore,\n  purge,\n  saveBackup\n} from '../api'\nimport { navigate } from '../router'\nimport { writable } from 'svelte/store'\nimport Geohash from 'latlon-geohash'\nimport ImageLoader from '../components/ImageLoader.svelte'\nimport Icon from '../components/Icon.svelte'\nimport Dialog from '../components/Dialog.svelte'\nimport QRCode from '../components/QRCode.svelte'\nimport PeerPortrait from '../components/PeerPortrait.svelte'\n\nconst name = writable()\nconst tagline = writable()\nconst picture = writable()\nconst geohash = writable()\nconst pk = writable()\nconst sk = writable()\nconst showKeyDialog = writable(false)\nconst dirty = writable(true)\n\n// Profile preview dialogue\nconst profile = Profile(true)\nconst showPreviewDialog = writable(false)\n\nasync function save () {\n  await updateProfile({\n    name: $name,\n    tagline: $tagline,\n    age: 99,\n    sex: 0,\n    picture: $picture,\n    geohash: $geohash\n  })\n  $dirty = false\n}\n\nasync function load () {\n  const p = await keychain.readProfile()\n  if (!p) return\n  $name = p.name\n  $tagline = p.tagline\n  $picture = p.picture\n  $sk = await keychain.readIdentity()\n  $pk = $sk.slice(32)\n  $geohash = p.geohash\n  // TODO: update current geoloc if !entered\n  if (!$geohash) {\n    // $geohash = await getCurrentGeohash()\n    //   .catch(console.info.bind(null, 'noneogeo'))\n  }\n  return p\n}\n\nasync function getCurrentGeohash () {\n  const res = await fetchPosition()\n  // console.log(res)\n  const { latitude: lat, longitude: lng } = res.coords\n  return Geohash.encode(lat, lng, 6)\n\n  function fetchPosition (options) {\n    return new Promise((resolve, reject) => {\n      if (!navigator.geolocation) reject(new Error('Browser does not support geolocation APIs'))\n      else navigator.geolocation.getCurrentPosition(resolve, reject, options)\n    })\n  }\n}\n\nlet _loading = load()\n</script>\n<profile-view class=\"block container\">\n  <div class=\"row space-between xstart\">\n    <h1 on:click={() => $showPreviewDialog = true}> Profile</h1>\n    <div class=\"row\">\n      <h2 on:click={() => $showKeyDialog = true}>\n        <Icon id=\"icon-qr\" />\n      </h2>\n      <h2 on:click={() => navigate('/about')}>\n        <Icon id=\"icon-info\" />\n      </h2>\n    </div>\n  </div>\n\n  <label for=\"file\">\n    <h5>picture</h5>\n    <ImageLoader output={picture} />\n    {#if $picture?.length}\n      <small class=\"block text-center\">{$picture?.length} B</small>\n    {/if}\n    <!--<img src={$pictureURI} alt=\"profile picture preview\"/>-->\n  </label>\n\n  <label for=\"name\">\n    <h5>name</h5>\n    <input type=\"text\" bind:value={$name} placeholder=\"You got a street name?\" id=\"name\" name=\"name\">\n  </label>\n  <label for=\"tagline\">\n    <h5>spark</h5>\n    <input type=\"text\" bind:value={$tagline} placeholder=\"what's on your mind?\" id=\"tagline\" name=\"tagline\">\n  </label>\n  {#await _loading}\n    Loading...\n  {:then}\n  <button disabled={!$dirty} on:click={() => _loading = save()}>save</button>\n  {:catch error}\n    <danger>Loading profile failed {error.message}</danger>\n    <pre>{error.stack}</pre>\n  {/await}\n\n  {#if $showKeyDialog}\n    <Dialog open={true} on:fade={() => $showKeyDialog = false}>\n      <article>\n        <header><h5>IDSQR</h5></header>\n        <div class=\"column xcenter\">\n          {#if $pk}\n            <ul>\n              <li>Gender: {['F', 'M', 'NB'][decodePk($pk).sex]}</li>\n              <li>Location: {decodePk($pk).geohash}</li>\n            </ul>\n          {/if}\n          <div class=\"vpad\">\n            <QRCode data={pk} size={6}/>\n          </div>\n          <p>\n            This is your cryptographic identity.\n            <br/>\n            Let your friends scan your code\n            but keep the backed up image safe.\n          </p>\n        </div>\n        <footer>\n          <div class=\"row space-between\">\n            <b role=\"button\" on:click={() => purge(true)}>purge</b>\n            <!-- Bug in picostore, only first store is reloaded? -->\n            <!-- <b role=\"button\" on:click={() => reloadStore()}>reload</b> -->\n            <b role=\"button\" on:click={saveBackup}>backup</b>\n            <b role=\"button\" on:click={() => $showKeyDialog = false}>close</b>\n          </div>\n        </footer>\n      </article>\n    </Dialog>\n  {/if}\n\n  {#if $showPreviewDialog}\n    <Dialog open={true} on:fade={() => $showPreviewDialog = false}>\n      <article>\n        <header><h5>Preview</h5></header>\n        <PeerPortrait peer={$profile} />\n        <footer>\n            <button on:click={() => $showPreviewDialog = false}>close</button>\n        </footer>\n      </article>\n    </Dialog>\n  {/if}\n</profile-view>\n<style>\n</style>\n","/**\n * Centralized API\n *                  *\n *   .  *\n *  /\\       *\n * /__\\  Copyright  Decent Labs AB 2022\n *\n * All I wanted was to sell beer without fucking up the environment.\n * What's the point of anything? :'(\n *\n * Don't touch this file, will move it out of the way later :/\n */\nimport { kernel } from './api'\nimport { until } from 'piconuro'\nimport Feed from 'picofeed'\n\n// eslint-disable-next-line no-constant-condition\nconst baseUri = '__ENV__' === 'dev' || true\n  ? 'http://localhost:4000'\n  : 'https://api.pico.pub'\n\nexport async function requestVerificationStamp (email) {\n  const f = await kernel.feed()\n  f.append(kernel.constructor.encodeBlock('badge-plz', await kernel.seq(), { email }), kernel._secret)\n  const res = await postFeed(baseUri + '/v0/verify', f)\n  return res.message\n}\n\nexport async function postFeed (uri, feed, options = {}) {\n  const headers = new window.Headers()\n  const raw = {\n    'Content-Type': 'pico/feed',\n    ...(options?.headers || {})\n  }\n  for (const key in raw) headers.append(key, raw[key])\n  const res = await fetch(uri, {\n    method: 'POST',\n    headers,\n    body: feed.buf.slice(0, feed.tail)\n  })\n\n  const data = await res.json()\n  if (!res.ok) {\n    if (!data.error) console.error(data)\n    throw new Error(`[${res.status}] ${data.error}`)\n  }\n  return data\n}\n\nexport async function getPickle (uri, options = {}) {\n  const headers = new window.Headers()\n  const raw = {\n    // Accept: 'pico/feed, application/json',\n    ...(options?.headers || {})\n  }\n  for (const key in raw) headers.append(key, raw[key])\n  const res = await fetch(uri, {\n    method: 'GET',\n    headers\n  })\n  const type = res.headers.get('Content-Type')\n  // console.log('Response type', type)\n  let data\n  if (/application\\/json/.test(type)) {\n    data = await res.json()\n  }\n  if (!res.ok) {\n    throw new Error(`[${res.status}] ${data?.error || ''}`)\n  }\n  if (!data?.feed) throw new Error('Feed missing')\n  return Feed.from(data.feed)\n}\n\nexport async function createCheckout (cart) {\n  console.log('checkout cart', cart)\n  const p = await until(kernel.$profile(), p => p.state !== 'loading')\n  if (p.state !== 'active') throw new Error('Feed busy')\n  const f = await kernel.feed()\n  const seq = (await kernel.seq()) + 1\n  cart = cart.map(i => i.id !== 0xD100\n    ? ({ id: i.id, q: i.qty })\n    : ({ id: i.id, q: 1, a: i.qty * 100 }))\n  f.append(kernel.constructor.encodeBlock('cart', seq, { items: cart }), kernel._secret)\n  const res = await postFeed(baseUri + '/v0/checkout', f)\n  window.location = res.url\n  return res.url\n}\n\nexport async function redeem (sid, success) {\n  const crate = await getPickle(baseUri + '/v0/checkout/redeem/' + sid)\n  const m = await kernel.dispatch(crate, true)\n  if (!m.length) {\n    throw new Error('Merge Failed')\n  }\n  return 'Enjoy!'\n}\n","<script>\nimport { ITEMS } from '../../blockend/items.db'\nexport let id = -1\nexport let noDescription = false\nconst item = ITEMS[id]\n</script>\n<item-description class=\"flex column xcenter start\">\n  {#if !item}\n    <h3 class=\"nogap\"><error>Item Not Found!</error></h3>\n    <emo></emo>\n    <div><p>Unknown item [{id}]</p></div>\n  {:else}\n    <h3 class=\"nogap\">{item.name}</h3>\n    <i>{item.short}</i>\n    <emo>{item.image}</emo>\n    <h6>\n      <small>{item.type}</small>\n      {#if item.time} | {item.time}{/if}\n      {#if item.mod} | {item.mod}{/if}\n    </h6>\n    {#if !noDescription}\n    <div>\n      <p>\n        {#if !item.desc}\n          <error>The description for this item seems to be missing</error>\n        {:else}\n          {@html item.desc.replace(/\\n/g, '<br/>\\n')}\n        {/if}\n      </p>\n    </div>\n    {/if}\n  {/if}\n</item-description>\n<style>\n  emo {\n    --size: 5em;\n    display: inline-block;\n    font-size: var(--size);\n    /* line-height: var(--size);\n    height: var(--size);\n    width: var(--size); */\n  }\n</style>\n","<script>\nexport let q = {}\nimport { derived, writable } from 'svelte/store'\nimport { Profile } from '../api'\nimport { ITEMS, GROUPS } from '../../blockend/items.db'\nimport { requestVerificationStamp, createCheckout, redeem } from '../capi'\nimport { navigate } from '../router'\nimport Dialog from '../components/Dialog.svelte'\nimport Timer from '../components/Timer.svelte'\nimport ItemDescription from '../components/ItemDescription.svelte'\nimport { // prefix with d(ecentral)\n  cart as dCart,\n  addCart as dAddCart,\n  delCart as dDelCart,\n  cartSum as dCartSum,\n  cartQty as dCartQty\n} from '../network-cart'\n\nconst profile = Profile()\nconst hasBadge = derived(profile, p => p?.hasBadge)\nconst BADGE_ID = 0xD001\nconst badge = ITEMS[BADGE_ID]\n\nconst showItem = writable(false)\n// Email verification\nconst showVerifyDialog = writable(false)\nconst email = writable('')\nconst badgeStatus = writable(false)\nfunction requestStamp () {\n  $badgeStatus = true\n  $_waitRequestStamp = requestVerificationStamp($email)\n    .catch(err => {\n      $badgeStatus = false\n      console.error(err)\n      throw err\n    })\n}\nlet _waitRequestStamp = writable(Promise.resolve(''))\n// Cart\nconst cart = writable([])\nconst cartSum = derived(cart, c =>\n  c.reduce((sum, i) => (sum + ITEMS[i.id].price * i.qty), 0)\n)\nconst cartQty = derived(cart, c => c.reduce((q, i) => q + i.qty, 0))\n\nfunction addCart(id) {\n  const q = $cart.find(i => i.id === id)?.qty || 0\n  setQty(id, q + 1)\n}\nfunction delCart(id) {\n  const q = $cart.find(i => i.id === id)?.qty || 0\n  setQty(id, q - 1)\n}\nfunction setQty (id, qty = 0) {\n  let item = $cart.find(i => i.id === id)\n  if (!item) {\n    item = { id, qty: 0}\n    $cart.push(item)\n  }\n  item.qty = Math.max(qty, 0)\n  $cart = $cart\n}\nconst checkoutPromise = writable(Promise.resolve())\nfunction doCheckout () {\n  $checkoutPromise = createCheckout($cart)\n}\nconst showCartDialog = writable(false)\nconst showDCartDialog = writable(false)\n\nconst showRedeemDialog = writable(q.redeem)\n\nconst waitRedeem = writable(Promise.resolve())\nif (q.redeem) { doRedeem() }\n\nfunction doRedeem () {\n  const success = q.redeem === 'success'\n  const sid = q.session\n  $waitRedeem = redeem(sid, success)\n}\n\nconst balance = derived([dCartSum, profile], ([s, p]) =>\n  p.balance - s\n)\n</script>\n<shop-view data-theme=\"dark\">\n  <splash class=\"column xcenter\">\n    <img src=\"/gfx/shop.jpg\" alt=\"The Bar\"/>\n  </splash>\n  <section class=\"block container\">\n    <h1 class=\"text-center\">Bar</h1>\n    <drinks>\n      <!-- BADGE LINE -->\n      <item class=\"drink row xcenter\" on:click={() => $showVerifyDialog = true}>\n        <iimage>{badge.image}</iimage>\n        <description class=\"column xstart grow2 space-between\">\n          <h3>{badge.name}</h3>\n          <h6> {badge.time} | ONE TIME</h6>\n          <short>{badge.short}</short>\n        </description>\n        <buy class=\"column center\">\n          <button disabled={$hasBadge} class=\"green\"\n            on:click|stopPropagation={() => $showVerifyDialog = true}>\n            free\n          </button>\n        </buy>\n      </item>\n\n      <h2 class=\"text-center nogap\">Drinks</h2>\n      {#if !$hasBadge}\n        <green on:click={() => $showVerifyDialog = true} class=\"row xcenter center\">\n          <div>Verify your profile to buy drinks</div>\n        </green>\n        <br/>\n      {/if}\n\n      {#each GROUPS.drinks as drink}\n        <item class=\"drink row xcenter\" on:click={() => $showItem = drink}>\n          <iimage>{drink.image}</iimage>\n          <description class=\"column xstart grow2 space-between\">\n            <h3>{drink.name}</h3>\n            <h6>\n               {drink.time}\n              {#if drink.mod}\n                | {drink.mod}\n              {/if}\n            </h6>\n            <short>{drink.short}</short>\n          </description>\n          <buy class=\"column center\">\n            {#if drink.irlPrice}\n              <button class=\"blue\" disabled={!$hasBadge}\n                on:click|stopPropagation={() => addCart(drink.id)}>\n                 {(drink.price / 100)}\n              </button>\n            {:else}\n              <button on:click|stopPropagation={() => dAddCart(drink.id)}>\n                 {drink.price}\n              </button>\n            {/if}\n          </buy>\n        </item>\n      {/each}\n    </drinks>\n\n    <h2 class=\"text-center nogap\">Gear</h2>\n    <gear>\n      {#each GROUPS.gear as item}\n        <item class=\"item row xcenter\" on:click={() => $showItem = item}>\n          <iimage>{item.image}</iimage>\n          <description class=\"column xstart grow2 space-between\">\n            <h3>{item.name}</h3>\n            <h6>\n              {#if item.mod}\n                {item.mod}\n              {/if}\n            </h6>\n            <short>{item.short}</short>\n          </description>\n          <buy class=\"column center\">\n            <button\n              disabled={$balance < item.price || null}\n              on:click|stopPropagation={() => dAddCart(item.id)}>\n               {item.price}\n            </button>\n          </buy>\n        </item>\n      {/each}\n    </gear>\n  </section>\n\n  {#if $showVerifyDialog}\n    <Dialog open={true} on:fade={() => $showVerifyDialog = false}>\n      <article>\n        <ItemDescription id={BADGE_ID} noDescription={!$hasBadge} />\n        {#if $hasBadge}\n          <br/>\n          <p class=\"text-center\"><blue>Your email is verified</blue></p>\n        {:else}\n          <label for=\"email\">\n            <div>Verify your email to buy drinks</div>\n            <input type=\"email\"\n              bind:value={$email}\n              placeholder=\"name@host.tld\"\n              disabled={$badgeStatus ? 'true' : null}\n              on:keypress={e => e.charCode === 13 && requestStamp()} />\n          </label>\n          <div class=\"row center xcenter\">\n            {#await $_waitRequestStamp}\n              <p aria-busy=\"true\">Requesting badge</p>\n            {:then message}\n              <p>{message}</p>\n            {:catch err}\n              <error>{err.message}</error>\n            {/await}\n          </div>\n        {/if}\n        <footer class=\"row space-between\">\n          <button class=\"hgap\" on:click={() => $showVerifyDialog = false}>ok</button>\n          <button class=\"hgap green\"\n            on:click={requestStamp}\n            disabled={$badgeStatus || $hasBadge ? 'true' : null}>\n            verify\n          </button>\n        </footer>\n      </article>\n    </Dialog>\n  {/if}\n  {#if $showCartDialog}\n    <Dialog open={true} on:fade={() => $showCartDialog = false}>\n      <article>\n        <header><h5>Cart</h5></header>\n        {#if !$cart.length}\n          <h3>Your cart is empty</h3>\n        {/if}\n\n        {#each $cart as item}\n          <item class=\"item row xcenter\">\n            <iimage>{ITEMS[item.id].image}</iimage>\n            <description class=\"column xstart grow2 space-between\">\n              <h3>{ITEMS[item.id].name}</h3>\n              <short>{ITEMS[item.id].short}</short>\n            </description>\n            <buy class=\"row center xcenter\">\n              <b role=\"button\" class=\"blue\" on:click={() => delCart(item.id)}>-</b>\n              <!-- <input type=\"number\" value={item.qty} /> -->\n              <h3 class=\"nogap nopad hpad\">{item.qty}</h3>\n              <b role=\"button\" class=\"blue\" on:click={() => addCart(item.id)}>+</b>\n            </buy>\n          </item>\n        {/each}\n          <h3 class=\"text-right\">\n            Sum  {($cartSum / 100).toFixed(2)}\n          </h3>\n          <b role=\"button\" on:click={() => addCart(0xD100)}>Add tip</b>\n        {#await $checkoutPromise}\n          <h2 aria-busy=\"true\" class=\"nogap text-center\">Loading...</h2>\n        {:then url}\n          {#if url?.length}\n            <h3 class=\"nogap text-center\"><a href={url}>Proceed to checkout</a></h3>\n          {/if}\n        {:catch err}\n          <p class=\"error text-center\">{err.message}</p>\n        {/await}\n        <footer class=\"flex row space-between xcenter\">\n          <button on:click={() => $showCartDialog = false}>hide</button>\n          <div>&nbsp;</div>\n          <button class=\"green\" on:click={doCheckout} disabled={!$cart.length}>checkout</button>\n        </footer>\n      </article>\n    </Dialog>\n  {/if}\n  {#if $showRedeemDialog}\n    <Dialog open={true}>\n      <article>\n        <header><h5>Redeeming order</h5></header>\n        <div class=\"flex column xcenter\">\n          {#await $waitRedeem}\n            <emo aria-busy=\"true\"></emo>\n          {:then message}\n            <emo></emo>\n            <p>{message}</p>\n          {:catch err}\n            <emo></emo>\n            <error>{err.message}</error>\n            <p>\n            Something went wrong, please contact support\n            tony@decentlabs.se and include error report\n            below in the message<br/>\n            We're very sorry to be us right now.\n            </p>\n<pre class=\"error-report vgap\">\n{window.location}\n{err.message}\n{err.stack}\n</pre>\n          {/await}\n        </div>\n        <footer class=\"flex row space-between xcenter\">\n          {#await $waitRedeem}\n            <button class=\"green\" disabled=\"true\">Ok</button>\n          {:then}\n            <button class=\"green\" on:click={() => navigate('/wallet')}>Ok</button>\n          {:catch}\n            <button class=\"red\" on:click={doRedeem}>Retry</button>\n          {/await}\n        </footer>\n      </article>\n    </Dialog>\n  {/if}\n  {#if $showItem}\n    <Dialog open={true} on:fade={() => $showItem = false}>\n      <article>\n        <ItemDescription id={$showItem.id} />\n        <footer class=\"row space-between\">\n          <button class=\"hgap\" on:click={() => $showItem = false}>ok</button>\n          {#if $showItem.irlPrice}\n            <button class=\"hgap blue\"\n              disabled={!$hasBadge}\n              on:click={() => { addCart($showItem.id); $showItem = false; }}>\n               {($showItem.price / 100)}\n            </button>\n          {:else if !$showItem.irlPrice && $showItem.price > -1}\n            <button class=\"hgap red\"\n              disabled={$balance < $showItem.price || null}\n              on:click={() => {dAddCart($showItem.id); $showItem = false; }}>\n               {$showItem.price}\n            </button>\n          {/if}\n        </footer>\n      </article>\n    </Dialog>\n  {/if}\n  {#if $showDCartDialog}\n    <Dialog open={true} on:fade={() => $showDCartDialog = false}>\n      <article>\n        <header><h5>Decentral Cart</h5></header>\n        {#if !$dCart.length}\n          <h3>Your cart is empty</h3>\n        {/if}\n\n        {#each $dCart as item}\n          <item class=\"item row xcenter\">\n            <iimage>{ITEMS[item.id].image}</iimage>\n            <description class=\"column xstart grow2 space-between\">\n              <h3>{ITEMS[item.id].name}</h3>\n              <short>{ITEMS[item.id].short}</short>\n            </description>\n            <buy class=\"row center xcenter\">\n              <b role=\"button\" class=\"blue\" on:click={() => dDelCart(item.id)}>-</b>\n              <!-- <input type=\"number\" value={item.qty} /> -->\n              <h3 class=\"nogap nopad hpad\">{item.qty}</h3>\n              <b role=\"button\" class=\"blue\"\n                disabled={$balance - ITEMS[item.id].price < 0 || null}\n                on:click={() => dAddCart(item.id)}>+</b>\n            </buy>\n          </item>\n        {/each}\n        <h3 class=\"text-right\">\n          Sum  {$dCartSum}\n        </h3>\n        <p class=\"text-center\">\n          Items will be delivered after next vibe\n        </p>\n        <footer class=\"flex row space-between xcenter\">\n          <button on:click={() => $showDCartDialog = false}>ok</button>\n          <div>&nbsp;</div>\n          <button class=\"blue\" on:click={() => navigate('/')}>socialize</button>\n        </footer>\n      </article>\n    </Dialog>\n  {/if}\n  <bar class=\"flex row space-between xcenter\">\n    <div>\n      <button class=\"nogap\" on:click={() => navigate('/')}>back</button>\n    </div>\n    <h3 class=\"stat nopad nogap\" on:click={() => $showDCartDialog = !$showDCartDialog}>\n      {$balance}\n      {#if $dCartQty}\n        <small><blue>({$dCartSum})</blue></small>\n      {/if}\n    </h3>\n\n    <h3 class=\"nopad nogap\" on:click={() => $showCartDialog = !$showCartDialog}>\n       {$cartQty}\n    </h3>\n  </bar>\n</shop-view>\n<style>\n  splash { margin-bottom: -3em; }\n  item {\n    border-bottom: 1px solid var(--slate);\n    margin-bottom: 7px;\n    padding-bottom: 7px;\n  }\n  gear item, drinks item:last-child { border-bottom: none; }\n\n  item iimage {\n    display: block;\n    width: 50px;\n    height: 50px;\n    border: 1px solid var(--slate);\n    line-height: 50px;\n    vertical-align: middle;\n    text-align: center;\n  }\n  item description {\n    line-height: 1.1;\n  }\n  item description h3, item description h6, item description short { margin: 3px; }\n  item buy button {\n    margin: 0;\n    padding: 4px 1em;\n  }\n  item description short { color: var(--h6-color); }\n  item description h6 { color: var(--muted-color); }\n  emo {\n    --size: 5em;\n    display: inline-block;\n    font-size: var(--size);\n    /* line-height: var(--size);\n    height: var(--size);\n    width: var(--size); */\n  }\n  .error-report {\n    max-width: 100%;\n    max-height: 5em;\n    overflow: scroll;\n  }\n  bar {\n    border-top: 1px solid var(--slate);\n  }\n</style>\n","<script>\n// TODO: rewrite this component using canvas or interactive svg?\nimport { readable } from 'svelte/store'\nimport BinaryImage from '../components/BinaryImage.svelte'\nexport let vibe\nconst VIBE_TTL = vibe.expiresAt - vibe.createdAt // 5mins\n\nconst progress = readable(1, set => {\n  const id = setInterval(() => {\n    const left = vibe.expiresAt - Date.now()\n    if (left <= 0) {\n      set(0)\n      clearInterval(id)\n    } else set(left / VIBE_TTL)\n  }, 1000)\n  return () => clearInterval(id)\n})\n\n</script>\n<vibe>\n  <mask><tint style={`width: ${$progress * 100}px;`}>&nbsp;</tint></mask>\n  <portrait><BinaryImage src={vibe.peer.picture}/></portrait>\n</vibe>\n<style>\nvibe mask {\n  z-index: 3;\n  display: block;\n  position: absolute;\n  border-radius: 100%;\n  height: 100px;\n  overflow: hidden;\n}\nvibe tint {\n  display: block;\n  background-color: var(--wizardry);\n  opacity: 0.5;\n  height: 100px;\n}\nvibe {\n  --size: 100px;\n  display: inline-block;\n  width: var(--size);\n  height: var(--size);\n  border: 4px solid var(--background-color);\n  border-radius: 100%;\n  overflow: hidden;\n  box-shadow: var(--card-box-shadow);\n}\nvibe portrait {\n  z-index: 2;\n  display: block;\n  position: relative;\n}\n</style>\n","<script>\nimport { writable } from 'svelte/store'\nimport PendingVibe from '../components/PendingVibe.svelte'\nimport PeerPortrait from '../components/PeerPortrait.svelte'\nimport Timer from '../components/Timer.svelte'\nimport Dialog from '../components/Dialog.svelte'\nimport Icon from '../components/Icon.svelte'\nimport BinaryImage from '../components/BinaryImage.svelte'\nimport {\n  kernel,\n  Vibes,\n  Chats\n} from '../api'\nimport { navigate } from '../router'\nconst chats = Chats()\nconst vibes = Vibes()\nconst vibeDetail = writable(null)\nfunction respondVibe (chatId, rejected) {\n  kernel.respondVibe(chatId, rejected)\n    .then(() => { $vibeDetail = null })\n    .catch(err => console.error('Vibe response failed', err))\n}\n</script>\n<messages-view class=\"block container\">\n  <h1> Messages</h1>\n  <h5>Vibes</h5>\n  <vibes class=\"row xcenter\">\n  {#each $vibes as vibe}\n    {#if vibe.state !== 'match'}\n    <div on:click={() => $vibeDetail = vibe}>\n      <PendingVibe vibe={vibe}/>\n    </div>\n    {/if}\n  {/each}\n  </vibes>\n  <h5>Conversations</h5>\n  <conversations>\n  {#each $chats as chat}\n    <div class=\"row space-between\"\n      on:click={() => navigate('/chat/' + chat.id.toString('hex'))}>\n      <div class=\"row xcenter\">\n        <BinaryImage src={chat.peer.picture} size=\"80px\"/>\n        <div class=\"columns space-between gap\">\n          <h3 class=\"no-margin\">{chat.peer.name}</h3>\n          <h6 class=\"no-margin\">{chat.myTurn ? 'your turn' : 'waiting'}</h6>\n        </div>\n      </div>\n      <div class=\"columns xcenter gap\">\n        <health>\n          {#each [0, 1, 2] as n}\n            {#if n < chat.health}\n              <Icon id=\"heal_resp\" tag=\"full\" />\n            {:else}\n              <Icon id=\"heal_resp\" tag=\"empty\" />\n            {/if}\n          {/each}\n        </health>\n        <h3 class=\"no-margin\"><Timer expiresAt={chat.expiresAt} format=\"mm:ss\" /></h3>\n      </div>\n    </div>\n  {/each}\n  </conversations>\n  {#if $vibeDetail}\n  <Dialog open={true} on:fade={() => $vibeDetail = null}>\n    <article>\n      <BinaryImage src={$vibeDetail?.peer.picture} />\n      <p>{$vibeDetail.peer.tagline}</p>\n      <p>TODO: transaction details</p>\n      <h6 class=\"text-center no-margin\">Vibe Expires in</h6>\n      <h2 class=\"text-center timer\"><Timer expiresAt={$vibeDetail.expiresAt} format=\"mm:ss\"/></h2>\n      <footer class=\"row space-between\">\n        {#if !$vibeDetail.initiator}\n          <button class=\"hgap reject\" on:click={() => respondVibe($vibeDetail.id, true)}>reject</button>\n          <button class=\"hgap accept\" on:click={() => respondVibe($vibeDetail.id)}>accept</button>\n        {:else}\n          <button class=\"hgap\" on:click={() => $vibeDetail = null}>hide</button>\n          <div class=\"text-center\">Waiting for player2</div>\n        {/if}\n      </footer>\n    </article>\n  </Dialog>\n  {/if}\n</messages-view>\n<style>\n.reject { color: var(--blood); }\n.accept { color: var(--wizardry); }\n.timer { margin-top: 0; margin-bottom: 0.5em; }\nchat { border-bottom: 1px solid var(--ash); }\n</style>\n","<script>\nimport { afterUpdate } from 'svelte'\nimport { writable, derived } from 'svelte/store'\nimport { Chat } from '../api'\nimport BinaryImage from '../components/BinaryImage.svelte'\nimport Icon from '../components/Icon.svelte'\nimport Timer from '../components/Timer.svelte'\nimport { rewrite, scoreGraph } from '../../blockend/game'\nexport let id\n\nlet messagesElement\nlet inputElement\nconst chat = Chat(id, 'Chat')\nconst showInput = writable(false)\nconst line = writable('')\n\n// Auto-bye\n$: if ($chat.state === 'finalizing' && $chat.myTurn) end()\n\nconst health = derived(chat, c =>\n  Array.from(new Array(3)).map((_, n) => n < c.health)\n)\n\nconst score = derived(chat, c => {\n  if (!c.graph) return [0, 0]\n  return c.initiator\n    ? scoreGraph(c.graph)\n    : scoreGraph(c.graph).reverse()\n})\n\nconst preview = derived([chat, score], ([c, s]) => {\n  if (!c.graph) return [[0, 0], [0, 0], [0, 0]]\n  if (!c.initiator) s = s.reverse()\n  return [\n    c.initiator ? '' : '',\n    c.initiator ? '' : '',\n    c.initiator ? '' : ''\n  ].map(glyph => {\n    const path = scoreGraph(c.graph + glyph).map((n, i) => n - s[i])\n      .map(n => nf(n))\n    return c.initiator ? path : path.reverse()\n  })\n})\nfunction nf (n) { return  n > 0 ? `+${n}` : n }\n\n// Auto-scroll\nafterUpdate(() => {\n  messagesElement.scrollTo({\n    top: messagesElement.scrollHeight,\n    left: 0,\n    behaviour: 'smooth'\n  })\n  if ($showInput) inputElement.focus()\n})\n\nfunction sendMessage () {\n  $chat.send($line.trim())\n    .then(() => {\n      console.info('Message published')\n      $line = ''\n      $showInput = false\n    })\n    .catch(err => console.error('Failed publishing Message', err))\n}\n\nfunction end (gesture = 0) {\n  console.log('Bye button pressed')\n  $chat.bye(gesture)\n    .then(() => console.info('Bye published'))\n    .catch(err => console.error('Failed publishing Bye', err))\n}\n\nfunction pass () {\n  $chat.pass()\n    .then(() => console.info('Pass published'))\n    .catch(err => console.error('Failed publishing Pass', err))\n}\n\nfunction onKeyPress ({ charCode }) {\n  switch (charCode) {\n    case 13:\n      sendMessage()\n      break\n    default:\n      break\n  }\n}\n</script>\n<chat class:white={$chat.initiator} class:black={!$chat.initiator}>\n  <header class=\"container row space-between\">\n    <div class=\"row xcenter\">\n      {#if $chat.peer}\n        <portrait><BinaryImage src={$chat.peer.picture} size=\"70px\" /></portrait>\n        <div class=\"column\">\n          <h1 class=\"hgap\">\n            {$chat.peer.name}\n          </h1>\n          <div class=\"hgap\">\n          </div>\n        </div>\n      {:else}\n        <placeholder aria-busy=\"true\">&nbsp;</placeholder>\n      {/if}\n    </div>\n    <div class=\"column xend\">\n      <health>\n        {#each $health as heart}\n          {#if heart}\n            <Icon id=\"heal_resp\" tag=\"full\" />\n          {:else}\n            <Icon id=\"heal_resp\" tag=\"empty\" />\n          {/if}\n        {/each}\n      </health>\n      <h3><Timer expiresAt={$chat.expiresAt} format=\"mm:ss\" /></h3>\n    </div>\n  </header>\n  <messages bind:this={messagesElement} class=\"container\">\n    <p class=\"text-center\">{rewrite($chat.graph || '')}</p>\n    {#each $chat.messages as message}\n      <msg\n        class=\"row xcenter\"\n        class:start={message.type === 'received'}\n        class:remote={message.type === 'received'}\n        class:local={message.type === 'sent'}\n        class:end={message.type === 'sent'}>\n        {#if message.pass}\n          <sym class=\"hgap\">\n            {#if ($chat.initiator && message.type === 'sent') ||\n              (!$chat.initiator && message.type === 'received')\n            }\n              \n              <!---->\n            {:else}\n              \n              <!---->\n            {/if}\n\n          </sym>\n        {:else}\n          <txt>{message.content}</txt>\n        {/if}\n      </msg>\n    {/each}\n    <msg class=\"row xcenter center\">\n      <balance class:inv={!$chat.initiator}>\n        {#if $chat.initiator}\n          <black>{$score[1]}</black>\n          <white>{$score[0]}</white>\n        {:else}\n          <white>{$score[0]}</white>\n          <black>{$score[1]}</black>\n        {/if}\n      </balance>\n    </msg>\n  </messages>\n  <ctrls>\n  {#if $chat.state === 'active'}\n    <h2 class=\"text-center nogap\">\n        {#if $chat.myTurn}\n          Your turn\n        {:else}\n          Waiting\n        {/if}\n    </h2>\n    <div class=\"row space-between\">\n      {#if !$showInput}\n      <button class=\"hgap\" disabled={!$chat.myTurn}\n        on:click={() => end(0)}>end</button>\n\n      <button class=\"hgap\"\n        disabled={!$chat.myTurn}\n        on:click={() => $showInput = true}>\n        msg\n      </button>\n\n      <button class=\"hgap\" disabled={!$chat.myTurn}\n        on:click={pass}>\n        pass\n      </button>\n      {:else}\n        <input bind:this={inputElement}\n          class=\"line\"\n          bind:value={$line}\n          on:keypress={onKeyPress}\n          on:blur={() => $showInput = !!$line.length} />\n      {/if}\n    </div>\n    <div class=\"row space-between\">\n      <samp>{$preview[0].join('/')}</samp>\n      <samp>{$preview[1].join('/')}</samp>\n      <samp>{$preview[2].join('/')}</samp>\n    </div>\n  {:else if $chat.state === 'end'}\n    <!-- depricated end-game glyph, cool if-logic\n      {#if $chat.messages % 2}\n        ended by responder\n      {:else}\n        ended by initator\n      {/if}\n    -->\n    <h2 class=\"text-center nogap\">Conversion ended</h2>\n  {:else}\n    <h2 class=\"text-center nogap\">{$chat.state}</h2>\n  {/if}\n  </ctrls>\n</chat>\n<style>\nheader h1, header h2, header h3 { margin-bottom: unset; }\n.black header, .black header h1, .black header h2, .black header h3 {\n  background-color: var(--p2);\n  color: var(--ash);\n}\n/* header { margin-top: 1em; }*/\nportrait {\n  border-radius: 4px;\n  overflow: hidden;\n  height: 70px;\n  width: 70px;\n  box-shadow: var(--card-box-shadow);\n}\nmessages {\n  display: block;\n  /* height: 59vh;*/\n  overflow-y: scroll;\n  overflow-x: hidden;\n}\n/* Common */\nmsg {\n  margin-bottom: 0.4em;\n}\nmsg txt {\n  border-radius: 2em;\n  display: inline-block;\n  padding: 0.2em 1.5em;\n  max-width: 65%;\n}\n/* White */\n.white msg.local txt, .black msg.remote txt {\n  color: var(--p2);\n  background-color: var(--p1);\n  border: 1.6px solid var(--ash);\n\n  /*\n  border: 1.4px solid var(--reef);\n  box-shadow: 0 0 3px var(--wizardry);\n  margin: 2px;\n  */\n}\n/* Black */\n.white msg.remote txt, .black msg.local txt {\n  color: var(--p1);\n  background-color: var(--p2);\n  border: 1.4px solid var(--p1);\n}\n\n\nmsg sym {\n  --sz: 1.6em;\n  display: inline-block;\n  line-height: calc(var(--sz) * 0.93);\n  width: var(--sz);\n  height: var(--sz);\n  font-size: calc(var(--sz) * 0.8);\n  border-radius: 50%;\n  vertical-align: middle;\n  text-align: center;\n}\n/* White Ev/Glyph/Pass */\n.white msg.local sym, .black msg.remote sym {\n  color: var(--p2);\n  background-color: var(--p1);\n  border: 1.4px solid gold;\n  box-shadow: 0 0 5px var(--ember);\n}\n\n/* Black Ev/Glyph/Pass */\n.white msg.remote sym, .black msg.local sym {\n  color: var(--p1);\n  background-color: var(--p2);\n  border: 1.4px solid var(--wizardry); /*var(--p1);*/\n  box-shadow: 0 0 5px var(--blood);\n}\n</style>\n","<script>\nimport Icon from '../components/Icon.svelte'\n</script>\n<about class=\"block container\">\n  <div class=\"column xcenter vgap\">\n    <logo>\n      <Icon id=\"dl-logo-red\" />\n    </logo>\n  </div>\n  <h1>\n    Picochat\n    <samp>{'__VERSION__'.replace(/^(\\d+).+/, '$1')}</samp>\n  </h1>\n  <p>\n    Where ever we're going, we'll get there eventually.\n    Meanwhile, come say hi!\n  <ul>\n    <li><a href=\"https://discord.gg/K5XjmZx\">Discord (community chat)</a></li>\n    <li><a href=\"https://github.com/telamon/picochat/issues\">Questions &amp; Support</a></li>\n    <li><a href=\"https://github.com/telamon/picochat\">Source code</a></li>\n  </ul>\n\n  <h5>Legalities</h5>\n  <table>\n    <tdata>\n      <tr><td>build</td><td>__ENV__-__VERSION__-{'__COMMIT__'.substr(0, 8)}</td></tr>\n      <tr><td>Cookies</td><td>none, zilch, zero</td></tr>\n      <tr><td>GDPR</td><td>All blocks are automatically erased when timers hit <code>00:00</code></td></tr>\n      <tr><td>User</td><td>We have absolutley no control over p2p interactions, apply common sense, be polite</td></tr>\n      <tr><td>License</td><td>GNU AGPL version 3</td></tr>\n      <tr><td>Motto</td><td>No servers, no supernodes, liberate humans and machines alike</td></tr>\n    </tdata>\n  </table>\n  <p>\n    <sub>Bottom line</sub><br/>\n    <samp>\n      This software is presented to you as is,\n      Decent Labs AB takes no responsibility for how this software is used or distributed.\n      <br/>\n      Refer to the contents of the aforementioned license for more details.\n    </samp>\n  </p>\n</about>\n<style>\n  ul a { color: var(--pool); }\n  ul li { list-style: circle; }\n</style>\n","<script>\n/**\n * This view imports foreign blocks via URL\n * When done maybe displays block info or merge error.\n * Like a barcode-qr scan receiver.\n */\nexport let id\nimport { Feed, SimpleKernel } from 'picostack'\nimport { mute, init } from 'piconuro'\nimport { nId, navigate } from '../router'\nimport { svlt, kernel } from '../api'\n\nconst merge = svlt(\n  init({ loading: true },\n    mute(nId, async pickle => {\n      if (!pickle) return { loading: true }\n      const foreign = Feed.from(pickle)\n\n      const lType =  SimpleKernel.decodeBlock(foreign.last.body).type\n      const hasBlock = !!(await kernel.repo.readBlock(foreign.last.sig))\n      let error = null\n      let imported = false\n      if (hasBlock) {\n        error = 'Already merged'\n        if (lType === 'items') navigate('shop')\n      } else {\n        try {\n          const mutated = await kernel.dispatch(foreign, true)\n          if (!mutated.length) throw new Error('Rejected by kernel')\n          else {\n            imported = true\n            if (lType === 'items') navigate('shop')\n          }\n        } catch (err) {\n          console.error(err)\n          error = err.message\n        }\n      }\n\n      return  {\n        loading: false,\n        imported,\n        error,\n        feed: foreign\n      }\n    })\n  )\n)\n\n</script>\n<append class=\"block container\">\n  <div class=\"flex column xcenter center\">\n    <h1>&nbsp;</h1>\n    {#if $merge.loading}\n      <h3>Reading blocks...</h3>\n      <h1 aria-busy=\"true\"></h1>\n    {:else if !$merge.imported}\n      <h3>Not imported</h3>\n      <danger>{$merge.error}</danger>\n    {:else}\n      <h3>Done!</h3>\n      <button on:click={() => navigate('/')}>done</button>\n    {/if}\n    <!-- {#for block of $merge.feed}-->\n    <!--  <a href={`#/explore/${$block.blocks.last.sig}`}>Explore blocks</a> -->\n  </div>\n</append>\n","<script>\nimport { writable, derived } from 'svelte/store'\nimport { Profile, kernel } from '../api'\nimport { ITEMS } from '../../blockend/items.db'\nimport Timer from '../components/Timer.svelte'\nimport Dialog from '../components/Dialog.svelte'\nimport ItemDescription from '../components/ItemDescription.svelte'\nconst profile = Profile()\nconst inventory = derived(profile, p => {\n  if (p.state === 'loading') return []\n  // dev-inventory\n  // return Object.keys(ITEMS).map(id => ({ id, qty: 1}))\n  return p.inventory.filter(i => i.qty)\n})\nconst showItem = writable(false)\nasync function consume (id) {\n  await kernel.useItem(id)\n    .then(sig => console.log('Consumed item', id, sig))\n    .catch(err => console.error('Failed consuming', id, err))\n\n  $showItem = false\n}\nfunction toggle (id) {\n  console.info('todo implement item activation')\n}\n</script>\n<wallet-view>\n\n  <div class=\"row column xcenter start\">\n    <!-- For the record: I perfer the term \"inventory\" but wallet is shorter and relatable -->\n    <h1 class=\"nogap\">Balance</h1>\n    <h1>{$profile.balance}</h1>\n    <div>\n      <h6 class=\"nogap\">\n         <code><Timer expiresAt={$profile.expiresAt} format=\"HH:mm:ss\"/></code>\n      </h6>\n      Score {$profile.score}<br/>\n    </div>\n    <h1>&nbsp;</h1>\n    <h1 class=\"nogap\">Inventory</h1>\n    <inventory>\n      {#each $inventory as i}\n        <item role=\"button\" class={ITEMS[i.id].category}\n          on:click={() => $showItem = i}>\n          <emo>{ITEMS[i.id].image}</emo>\n          {#if ITEMS[i.id].type === 'consumable'}{i.qty}{/if}\n        </item>\n      {/each}\n    </inventory>\n    {#if $showItem}\n      <Dialog open={true} on:fade={() => $showItem = false}>\n        <article>\n          <ItemDescription id={$showItem.id} />\n          <footer class=\"row space-between\">\n            <button class=\"hgap\" on:click={() => $showItem = false}>ok</button>\n            {#if ITEMS[$showItem.id].type === 'consumable'}\n              <button class=\"hgap\" on:click={() => consume($showItem.id)}>Use</button>\n            {/if}\n            {#if ITEMS[$showItem.id].type === 'active'}\n              <button class=\"hgap\" on:click={() => toggle($showItem.id)}>\n                Activate\n              </button>\n            {/if}\n          </footer>\n        </article>\n      </Dialog>\n    {/if}\n  </div>\n</wallet-view>\n","<script>\nimport { kernel } from '../api'\nlet graphElem\n\nasync function a () {\n  const { graphviz } = window[\"@hpcc-js/wasm\"]\n  const dot = await kernel.inspect()\n  const svg = await graphviz.layout(dot, 'svg', 'dot')\n  graphElem.innerHTML = svg\n  /*\n  const feed = await kernel.feed()\n  feed.inspect()\n  console.log(`Size: ${(feed.tail / 1024).toFixed(2)} kB`, )\n  */\n}\n\nasync function reload () {\n  await kernel.reload()\n}\n</script>\n<devel-view>\n  <h1>Developers view</h1>\n  <p>(everything is broken)</p>\n  <script src=\"https://cdn.jsdelivr.net/npm/@hpcc-js/wasm/dist/index.min.js\"></script>\n  <div class=\"flex row space-between\">\n    <button class=\"hpad\" on:click={a}>dump</button>\n    <button class=\"hpad\" on:click={reload}>reload</button>\n  </div>\n  <graph bind:this={graphElem}>g</graph>\n</devel-view>\n","import { writable, gate, mute } from 'piconuro'\nimport { svlt } from './api'\n\n// Import Views\nimport Keygen from './views/Keygen.svelte'\nimport Pub from './views/Pub.svelte'\nimport Profile from './views/Profile.svelte'\nimport Shop from './views/Shop.svelte'\nimport Messages from './views/Messages.svelte'\nimport Chat from './views/Chat.svelte'\nimport About from './views/About.svelte'\nimport Append from './views/Append.svelte'\nimport Wallet from './views/Wallet.svelte'\nimport Devel from './views/Devel.svelte'\n\nconst [$name, setName] = writable()\nconst [$id, setId] = writable()\nconst [$q, setQ] = writable()\n// map name to component\nconst $view = gate(mute($name, name => {\n  switch (name) {\n    case 'shop': return Shop\n    case 'msgs': return Messages\n    case 'profile': return Profile\n    case 'chat': return Chat\n    case 'about': return About\n    case 'keygen': return Keygen\n    case 'append': return Append\n    case 'wallet': return Wallet\n    case 'devel': return Devel\n    case 'pub': default: return Pub\n  }\n}))\n\n// -----------------------------------------\n// Internal router code\n// (just pretend it's not here)\n// ----------------------------------------\nexport const routeName = svlt($name)\nexport const view = svlt($view)\nexport const id = svlt($id)\nexport const q = svlt($q)\nexport const nId = $id // expose raw neuron\n\nlet current = null\nexport function setView (path, id, search) {\n  if (current && path === current) return false\n  current = path\n  console.info('Rerouting to path:', path, 'id:', id, 'Q/Search:', search)\n  setName(path)\n  setId(id)\n  setQ(search)\n}\n\nfunction apply () {\n  if (window.location.hash === '') return setView('pub', null, new URLSearchParams())\n  const virt = new URL(\n    window.location.hash.replace(/^#\\/?/, 'x:')\n  )\n  const [path, id] = virt.pathname.split('/')\n  const search = new URLSearchParams(virt.search)\n  const q = {}\n  let searchEmpty = true\n  for (const [k, v] of search.entries()) {\n    q[k] = v\n    searchEmpty = false\n  }\n  setView(path.toLowerCase(), id, searchEmpty ? undefined : q)\n}\nexport function navigate (path) {\n  window.history.pushState(null, null, `/#${path}`.replace(/^#\\/+/, '#/'))\n  apply()\n}\nwindow.addEventListener('popstate', apply)\napply()\n","<script>\nimport { writable } from 'svelte/store'\nimport debug from 'debug'\nimport Dialog from './Dialog.svelte'\nexport let open = null ?? writable(false)\n// patterns.map(name => ({ name, enabled: debug.enabled(name) }))\nconst patterns = [\n  '*',\n  'hyper*',\n  'pico*',\n  'picochat:kernel',\n  'picochat:mod:*',\n  'picochat:mod:net',\n  'picochat:mod:gc',\n  'picochat:mod:reg',\n  'picochat:slice*'\n]\nconst namespaces = writable(debug.namespaces)\n\nfunction set (value) {\n  if (value === '') {\n    debug.disable()\n    $namespaces = ''\n  } else {\n    debug.enable(value)\n    $namespaces = debug.namespaces\n  }\n}\n\n</script>\n<Dialog open={$open} on:fade={() => $open = false}>\n  <article>\n    <h6>namespaces</h6>\n    <input type=\"text\" bind:value={$namespaces} />\n    <h6>quickfilters</h6>\n    <div><a on:click={() => set('')}><code>DEBUG:OFF</code></a></div>\n    {#each patterns as pattern}\n      <div>\n        <a on:click={() => set(pattern)}><code>{pattern}</code></a>\n      </div>\n    {/each}\n    <footer>\n      <!--\n      <a href=\"#cancel\" role=\"button\" class=\"secondary\" on:click={() => $open = false}>Cancel</a>\n      <a href=\"#confirm\" role=\"button\" on:click={() => $open = false}>Confirm</a>\n      -->\n      <button on:click={() => $open = false}>ok</button>\n    </footer>\n  </article>\n</Dialog>\n<style>\n</style>\n","<script>\n// \nimport { onMount } from 'svelte'\nimport { writable, derived } from 'svelte/store'\nimport { view, id, setView, navigate, routeName, q } from './router'\nimport {\n  boot,\n  enter,\n  state,\n  kernel,\n  Connections,\n  Profile,\n  profilePicture,\n  NotificationsCount,\n  purge\n} from './api'\nimport Icon from './components/Icon.svelte'\nimport Timer from './components/Timer.svelte'\nimport BinaryImage from './components/BinaryImage.svelte'\nimport DebugSelector from './components/DebugSelector.svelte'\nconst _loading = boot()\nconst conn = Connections()\nconst showBar = derived([state, routeName], ([s, name]) =>\n  // Disable during profile setup\n  s.hasKey && s.hasProfile &&\n  // Disable on shop page\n  name !== 'shop'\n)\nconst showDev = derived(routeName, name =>\n  name === 'profile'\n)\n\nconst showDebugSelector = writable(false)\nconst nCount = NotificationsCount()\nconst profile = Profile()\n\nasync function inspectFeed () {\n  navigate('/devel')\n}\nasync function reloadStores () {\n  await kernel.store.reload()\n  console.info('Internal cache`s cleared')\n}\n\nfunction toggleTheme () {\n  const htmlTag = document.documentElement\n  if(htmlTag.dataset.theme) delete htmlTag.dataset.theme\n  else htmlTag.dataset.theme = 'dark'\n}\n\nfunction enterPub () {\n  enter()\n}\n\nconst autoSwarm = JSON.parse(window.localStorage.getItem('auto_swarm'))\nfunction toggleAutoConnect() {\n  window.localStorage.setItem('auto_swarm', !autoSwarm)\n  window.location.reload()\n}\nfunction globReject (error) {\n  console.error('[Unhandled Rejection]', error)\n}\nfunction globError (error) {\n  console.error('[GlobError]', error)\n}\n\n// Scroll top on route change\nonMount(() =>\n  view.subscribe(() => {\n    window.document.scrollingElement.scrollTo({ top: 0, left: 0})\n  })\n)\n</script>\n\n<root class={'view-' + $routeName}>\n  {#if $showDev}\n  <!-- Developer bar -->\n  <dev-bar class=\"flex row xcenter space-between\">\n    <div >\n      K[{$state?.state[0]}]\n      ID[{$state.hasKey ? 1 : 0}]\n      P[{$state.hasProfile ? 1 : 0}]\n      m56[{$conn}]\n      E[{$state.entered ? 1 : 0}]\n    </div>\n    <div>\n      <!--\n        sometimes you just need to\n        let yourself have some fun.\n        Say hello to modem-kun!\n      -->\n      <btn on:click={toggleAutoConnect} class={autoSwarm ? 'm56 auto' : 'm56 no-auto'}>\n        {#if !$state.swarming}\n          |=_=|\n        {:else if !$conn}\n          |o_=|\n        {:else if 2 > $conn}\n          |o_o|\n        {:else}\n          |_|\n        {/if}\n      </btn>\n      <btn on:click={reloadStores}>r</btn>\n      <btn on:click={() => $showDebugSelector = true}>D</btn>\n      <btn on:click={toggleTheme}>t</btn>\n      <btn on:click={inspectFeed}>i</btn>\n      <btn class=\"danger\" on:click={() => purge(false)}>X</btn>\n    </div>\n  </dev-bar>\n  <DebugSelector open={showDebugSelector}/>\n  {/if}\n\n  <!-- Main container -->\n  <main class:has-dev={$showDev}\n        class:has-bar={$showBar}>\n    {#await _loading}\n      <div class=\"column center xcenter\" style=\"height: 100%\">\n        <h5 aria-busy=\"true\">Booting up...</h5>\n      </div>\n    {:then}\n      {#if $id && $q}\n        <svelte:component this={$view} id={$id} q={$q} />\n      {:else if $q}\n        <svelte:component this={$view} q={$q} />\n      {:else if $id}\n        <svelte:component this={$view} id={$id} />\n      {:else}\n        <svelte:component this={$view} />\n      {/if}\n    {:catch err}\n      <h3>KernelPanic! {err.message}</h3>\n      <pre>{err.stack}</pre>\n    {/await}\n  </main>\n  {#if $showBar}\n  <!-- Bottom bar with phat buttons -->\n  <bar class=\"flex row xcenter space-between\">\n    <round class=\"flex column center xcenter noselect\" on:click={() => navigate('pub')}>\n      <Icon id=\"gfx-vibe\" nofill/>\n    </round>\n    <round class=\"flex column center xcenter noselect\"\n      disabled={!$state.entered || null}\n      on:click={() => $state.entered && navigate('shop')}>\n      <Icon id=\"gfx-shop\" nofill/>\n    </round>\n    {#if !$state.entered}\n      <stat class=\"flex column center xcenter outside noselect btn-enter\"\n        on:click={enterPub}>\n        <h3 class=\"muted\">--:--</h3>\n        <h6 class=\"primary\">start</h6>\n      </stat>\n    {:else}\n      <stat class=\"flex column center xcenter inside noselect\"\n        on:click={() => navigate('wallet')}>\n        <h3 class=\"primary\">\n         <Timer expiresAt={$profile.expiresAt} format='HH:mm' />\n        </h3>\n        <h6 class=\"muted\">wallet</h6>\n      </stat>\n    {/if}\n    <round class=\"flex column center xcenter noselect\"\n      disabled={!$state.entered || null}\n      on:click={() => $state.entered && navigate('msgs')}>\n      <Icon id=\"gfx-msgs\" nofill/>\n      <samp class=\"notifications-badge\" class:zero={!$nCount}>{$nCount}</samp>\n      <!-- TODO: read/unread messages tracking not yet implemented -->\n    </round>\n    <round class=\"flex column center xcenter noselect\" on:click={() => navigate('profile')}>\n      {#if !$profilePicture}\n        <Icon id=\"gfx-profile\" nofill/>\n      {:else}\n        <BinaryImage src={$profilePicture} />\n      {/if}\n    </round>\n  </bar>\n  {/if}\n</root>\n<svelte:window on:error={globError} on:unhandledrejection={globReject} />\n<style>\n.m56 { padding: 0; }\n.m56.no-auto { background-color: var(--grave); }\n\nstat.outside h3 { color: var(--muted-color); }\nstat.outside h6 { color: var(--ash); }\nstat.inside h3 { color: var(--ash); }\nstat.inside h6 { color: var(--muted-color); }\n</style>\n","!function(t,s){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=s():\"function\"==typeof define&&define.amd?define(s):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs_plugin_duration=s()}(this,(function(){\"use strict\";var t,s,n=1e3,i=6e4,e=36e5,r=864e5,o=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,u=31536e6,h=2592e6,a=/^(-|\\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,d={years:u,months:h,days:r,hours:e,minutes:i,seconds:n,milliseconds:1,weeks:6048e5},c=function(t){return t instanceof p},f=function(t,s,n){return new p(t,n,s.$l)},m=function(t){return s.p(t)+\"s\"},l=function(t){return t<0},$=function(t){return l(t)?Math.ceil(t):Math.floor(t)},y=function(t){return Math.abs(t)},g=function(t,s){return t?l(t)?{negative:!0,format:\"\"+y(t)+s}:{negative:!1,format:\"\"+t+s}:{negative:!1,format:\"\"}},p=function(){function l(t,s,n){var i=this;if(this.$d={},this.$l=n,void 0===t&&(this.$ms=0,this.parseFromMilliseconds()),s)return f(t*d[m(s)],this);if(\"number\"==typeof t)return this.$ms=t,this.parseFromMilliseconds(),this;if(\"object\"==typeof t)return Object.keys(t).forEach((function(s){i.$d[m(s)]=t[s]})),this.calMilliseconds(),this;if(\"string\"==typeof t){var e=t.match(a);if(e){var r=e.slice(2).map((function(t){return null!=t?Number(t):0}));return this.$d.years=r[0],this.$d.months=r[1],this.$d.weeks=r[2],this.$d.days=r[3],this.$d.hours=r[4],this.$d.minutes=r[5],this.$d.seconds=r[6],this.calMilliseconds(),this}}return this}var y=l.prototype;return y.calMilliseconds=function(){var t=this;this.$ms=Object.keys(this.$d).reduce((function(s,n){return s+(t.$d[n]||0)*d[n]}),0)},y.parseFromMilliseconds=function(){var t=this.$ms;this.$d.years=$(t/u),t%=u,this.$d.months=$(t/h),t%=h,this.$d.days=$(t/r),t%=r,this.$d.hours=$(t/e),t%=e,this.$d.minutes=$(t/i),t%=i,this.$d.seconds=$(t/n),t%=n,this.$d.milliseconds=t},y.toISOString=function(){var t=g(this.$d.years,\"Y\"),s=g(this.$d.months,\"M\"),n=+this.$d.days||0;this.$d.weeks&&(n+=7*this.$d.weeks);var i=g(n,\"D\"),e=g(this.$d.hours,\"H\"),r=g(this.$d.minutes,\"M\"),o=this.$d.seconds||0;this.$d.milliseconds&&(o+=this.$d.milliseconds/1e3);var u=g(o,\"S\"),h=t.negative||s.negative||i.negative||e.negative||r.negative||u.negative,a=e.format||r.format||u.format?\"T\":\"\",d=(h?\"-\":\"\")+\"P\"+t.format+s.format+i.format+a+e.format+r.format+u.format;return\"P\"===d||\"-P\"===d?\"P0D\":d},y.toJSON=function(){return this.toISOString()},y.format=function(t){var n=t||\"YYYY-MM-DDTHH:mm:ss\",i={Y:this.$d.years,YY:s.s(this.$d.years,2,\"0\"),YYYY:s.s(this.$d.years,4,\"0\"),M:this.$d.months,MM:s.s(this.$d.months,2,\"0\"),D:this.$d.days,DD:s.s(this.$d.days,2,\"0\"),H:this.$d.hours,HH:s.s(this.$d.hours,2,\"0\"),m:this.$d.minutes,mm:s.s(this.$d.minutes,2,\"0\"),s:this.$d.seconds,ss:s.s(this.$d.seconds,2,\"0\"),SSS:s.s(this.$d.milliseconds,3,\"0\")};return n.replace(o,(function(t,s){return s||String(i[t])}))},y.as=function(t){return this.$ms/d[m(t)]},y.get=function(t){var s=this.$ms,n=m(t);return\"milliseconds\"===n?s%=1e3:s=\"weeks\"===n?$(s/d[n]):this.$d[n],0===s?0:s},y.add=function(t,s,n){var i;return i=s?t*d[m(s)]:c(t)?t.$ms:f(t,this).$ms,f(this.$ms+i*(n?-1:1),this)},y.subtract=function(t,s){return this.add(t,s,!0)},y.locale=function(t){var s=this.clone();return s.$l=t,s},y.clone=function(){return f(this.$ms,this)},y.humanize=function(s){return t().add(this.$ms,\"ms\").locale(this.$l).fromNow(!s)},y.milliseconds=function(){return this.get(\"milliseconds\")},y.asMilliseconds=function(){return this.as(\"milliseconds\")},y.seconds=function(){return this.get(\"seconds\")},y.asSeconds=function(){return this.as(\"seconds\")},y.minutes=function(){return this.get(\"minutes\")},y.asMinutes=function(){return this.as(\"minutes\")},y.hours=function(){return this.get(\"hours\")},y.asHours=function(){return this.as(\"hours\")},y.days=function(){return this.get(\"days\")},y.asDays=function(){return this.as(\"days\")},y.weeks=function(){return this.get(\"weeks\")},y.asWeeks=function(){return this.as(\"weeks\")},y.months=function(){return this.get(\"months\")},y.asMonths=function(){return this.as(\"months\")},y.years=function(){return this.get(\"years\")},y.asYears=function(){return this.as(\"years\")},l}();return function(n,i,e){t=e,s=e().$utils(),e.duration=function(t,s){var n=e.locale();return f(t,{$l:n},s)},e.isDuration=c;var r=i.prototype.add,o=i.prototype.subtract;i.prototype.add=function(t,s){return c(t)&&(t=t.asMilliseconds()),r.bind(this)(t,s)},i.prototype.subtract=function(t,s){return c(t)&&(t=t.asMilliseconds()),o.bind(this)(t,s)}}}));","import '@picocss/pico'\nimport 'picoflex'\nimport './icons'\nimport './router'\nimport App from './App.svelte'\nimport dayjs from 'dayjs'\nimport duration from 'dayjs/plugin/duration'\ndayjs.extend(duration)\n\nconst app = new App({\n  target: document.body,\n  props: { }\n})\n\nexport default app\n"],"names":["ERROR","Symbol","for","module","exports","get","neuron","value","v","next","async","n","inspect","nfo","iter","until","condition","timeout","set","setErr","result","Promise","resolve","reject","timerId","setTimeout","Error","unsub","clearTimeout","finally","write","writable","notEqual","notEqualDeep","memo","synapses","Set","disconnect","syn","add","spreadForward","delete","length","mute","fn","prev","input","output","then","catch","err","console","error","init","disconnected","fired","clone","when","promise","combine","neurons","Array","isArray","props","m","prop","push","loaded","values","remaining","i","handler","bind","val","reduce","isSync","ms","aFired","unlock","mutex","tid","_isSync","ii","gate","shallow","check","first","dirty","settle","debounceMs","risingEdge","__nfoCtr","name","V","ni","pn","nlog","info","s","log","p","padStart","o","a","b","find","kA","Object","keys","kBl","subs","notify","subcriber","nValues","rQue","pQue","oneMore","r","shift","base64Js","b64","lens","getLens","validLen","placeHoldersLen","tmp","arr","Arr","_byteLength","curByte","len","revLookup","charCodeAt","uint8","extraBytes","parts","maxChunkLength","len2","encodeChunk","lookup","join","Uint8Array","code","indexOf","start","end","num","ieee754","buffer","offset","isLE","mLen","nBytes","e","eLen","eMax","eBias","nBits","d","NaN","Infinity","Math","pow","c","rt","abs","isNaN","floor","LN2","base64","require$$0","require$$1","customInspectSymbol","Buffer","SlowBuffer","alloc","INSPECT_MAX_BYTES","K_MAX_LENGTH","createBuffer","RangeError","buf","setPrototypeOf","prototype","arg","encodingOrOffset","TypeError","allocUnsafe","from","string","encoding","isEncoding","byteLength","actual","slice","fromString","ArrayBuffer","isView","arrayView","isInstance","copy","fromArrayBuffer","byteOffset","fromArrayLike","fromArrayView","SharedArrayBuffer","valueOf","obj","isBuffer","checked","undefined","numberIsNaN","type","data","fromObject","toPrimitive","assertSize","size","array","toString","mustMatch","arguments","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","this","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","dir","arrayIndexOf","call","lastIndexOf","indexSize","arrLength","valLength","String","read","readUInt16BE","foundIndex","found","j","hexWrite","Number","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","str","byteArray","asciiToBytes","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","fromByteArray","min","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","apply","decodeCodePointsArray","kMaxLength","TYPED_ARRAY_SUPPORT","proto","foo","typedArraySupport","defineProperty","enumerable","poolSize","fill","allocUnsafeSlow","_isBuffer","compare","x","y","concat","list","pos","swap16","swap32","swap64","toLocaleString","equals","max","replace","trim","target","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","ret","out","hexSliceLookupTable","bytes","checkOffset","ext","checkInt","wrtBigUInt64LE","checkIntBI","BigInt","wrtBigUInt64BE","checkIEEE754","writeFloat","littleEndian","noAssert","writeDouble","newBuf","subarray","readUintLE","readUIntLE","mul","readUintBE","readUIntBE","readUint8","readUInt8","readUint16LE","readUInt16LE","readUint16BE","readUint32LE","readUInt32LE","readUint32BE","readUInt32BE","readBigUInt64LE","defineBigIntMethod","validateNumber","last","boundsError","readBigUInt64BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readBigInt64LE","readBigInt64BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUintLE","writeUIntLE","writeUintBE","writeUIntBE","writeUint8","writeUInt8","writeUint16LE","writeUInt16LE","writeUint16BE","writeUInt16BE","writeUint32LE","writeUInt32LE","writeUint32BE","writeUInt32BE","writeBigUInt64LE","writeBigUInt64BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeBigInt64LE","writeBigInt64BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","copyWithin","errors","E","sym","getMessage","Base","constructor","super","configurable","stack","message","addNumericalSeparator","range","ERR_OUT_OF_RANGE","checkBounds","ERR_INVALID_ARG_TYPE","ERR_BUFFER_OUT_OF_BOUNDS","msg","received","isInteger","INVALID_BASE64_RE","leadSurrogate","toByteArray","split","base64clean","src","dst","alphabet","table","i16","BufferBigIntNotDefined","levelSupports","manifests","manifest","acc","assign","snapshots","permanence","seek","clear","getMany","keyIterator","valueIterator","iteratorNextv","iteratorAll","status","createIfMissing","errorIfExists","deferredOpen","promises","streams","encodings","events","additionalMethods","moduleError","options","expected","transient","cause","captureStackTrace","lazy","textEndec","textEncoder","TextEncoder","textDecoder","TextDecoder","ModuleError","formats","Encoding","encode","decode","format","has","createViewTranscoder","createBufferTranscoder","createUTF8Transcoder","commonName","require$$2","BufferFormat","ViewFormat","view","formats$2","UTF8Format","identity","utf8","json","JSON","stringify","parse","hex","require$$3","kFormats","kEncodings","validFormats","levelTranscoder","Transcoder","every","f","Map","k","resolved","maybeType","anonymousCount","detectFormat","aliases","binary","ReflectOwnKeys","R","Reflect","ReflectApply","receiver","args","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","NumberIsNaN","EventEmitter","eventsModule","once","emitter","errorListener","removeListener","resolver","eventTargetAgnosticAddListener","flags","on","addErrorHandlerIfEventEmitter","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","_getMaxListeners","that","_addListener","prepend","existing","warning","create","newListener","emit","unshift","warned","w","count","warn","onceWrapper","wrapFn","_onceWrap","state","wrapped","_listeners","unwrap","evlistener","unwrapListeners","arrayClone","listenerCount","addEventListener","wrapListener","removeEventListener","EventEmitter$1","getPrototypeOf","setMaxListeners","getMaxListeners","doError","er","context","listeners","addListener","prependListener","prependOnceListener","position","originalListener","index","pop","spliceOne","off","removeAllListeners","key","rawListeners","eventNames","queueTick","queueMicrotask","catering","fromCallback","callback","symbol","fromPromise","common","def","getOptions","getCallback","kPromise","kCallback","kWorking","kHandleOne","kHandleMany","kAutoClose","kFinishWork","kReturnMany","kClosing","kHandleClose","kClosed","kCloseCallbacks","kKeyEncoding","kValueEncoding","kAbortOnClose","kLegacy","kKeys","kValues","kLimit","kCount","emptyOptions","freeze","noop","warnedEnd","CommonIterator","db","legacy","abortOnClose","attachResource","nextTick","_next","nextv","_nextv","onnext","all","_all","onnextv","items","cb","_close","close","keyEncoding","keyFormat","mapped","prefixKey","_seek","detachResource","callbacks","asyncIterator","item","AbstractIterator","kHandleOne$1","IteratorDecodeError","kHandleMany$1","entries","entry","subject","AbstractIterator$3","valueEncoding","abstractIterator","AbstractKeyIterator","AbstractValueIterator","kIterator","DefaultKeyIterator","iterator","DefaultValueIterator","Iterator","mapEntry","map","defaultKvIterator","kNut","kUndefer","kFactory","DeferredIterator","defer","DeferredKeyIterator","DeferredValueIterator","deferredIterator","kStatus","kOperations","kFinishClose","abstractChainedBatch","AbstractChainedBatch","put","_checkKey","_checkValue","sublevel","original","mappedKey","mappedValue","_put","del","_del","_clear","_write","kEncoded","defaultChainedBatch","DefaultChainedBatch","_batch","hasOwnProperty","rangeOptions","queueMicrotask_1","window","global","supports","require$$4","require$$5","require$$6","require$$7","require$$8","require$$9","reverse","kLanded","kResources","kCloseResources","kDeferOpen","kOptions","kDefaultOptions","kTranscoder","AbstractLevel","passive","forward","opening","open","closing","closed","batch","empty","maybeOpened","_open","maybeClosed","cancel","pending","sync","resource","maybeError","valueFormat","_get","notFound","test","mappedKeys","_getMany","operations","_chainedBatch","ke","ve","op","valueErr","_sublevel","AbstractSublevel","defaults","_iterator","_keys","_values","nextTickBrowser","require$$11","AbstractSublevelIterator","AbstractSublevelKeyIterator","AbstractSublevelValueIterator","kUnfix","unfix","abstractSublevelIterator","kPrefix","kUpperBound","kPrefixRange","kParent","separator","abstractSublevel","static","reserved","parent","mergeManifests","prefix","upperBound","MultiFormat","Unfixer","gte","gt","lte","lt","supportsEncoding","cache","prefixLength","char","require$$12","abstractLevel","filter","runParallelLimit_1","tasks","results","isErrored","done","each","some","task","keyRange","lower","upper","lowerExclusive","upperExclusive","IDBKeyRange","bound","lowerBound","deserialize","createKeyRange","kCache","kFinished","kCurrentOptions","kPosition","kLocation","kFirst","maybeCommit","transaction","commit","location","splice","_","store","objectStore","openKeyCursor","onsuccess","ev","cursor","continue","complete","getAllKeys","getAll","onabort","oncomplete","parallel","method","direction","DEFAULT_PREFIX","kIDB","kNamePrefix","kVersion","kStore","kOnComplete","BrowserLevel","version","namePrefix","req","indexedDB","onerror","onupgradeneeded","objectStoreNames","contains","createObjectStore","mode","request","stopPropagation","loop","abort","destroy","deleteDatabase","BrowserLevel_1","base32","Geohash","lat","lon","precision","hash","posn","idx","bit","evenBit","geohash","latMin","latMax","lonMin","lonMax","lonMid","latMid","charAt","bounds","sw","ne","toFixed","LN10","chr","bitN","lastCh","adjacent","se","nw","sink","nanoassert","assert","t","AssertionError","sodium_memzero","crypto","randombytes","globalThis","msCrypto","getRandomValues","require","randomBytes","randombytes_buf","memory","sodium_malloc","sodium_free","MessageChannel","loadSink","port1","postMessage","vn","xi","yi","crypto_verify_16","crypto_verify_32","crypto_verify_64","helpers","sodium_increment","nlen","sodium_memcmp","sodium_is_zero","ascii","codes","substring","DataView","getUint32","getUint8","hexValue","decoder","byte","bytesNeeded","fromCodePoint","encoder","encodeInto","codePointAt","bits","utf16le","codecFor","codec","fromArray","fromBuffer","arrayBuffer","browser","buffers","totalLength","source","toBuffer","b4a","sha512","Sha512","BLOCKSIZE","K","hh","Int32Array","hl","finalised","bytesRead","ts64","h","l","compress","bh0","bh1","bh2","bh3","bh4","bh5","bh6","bh7","bl0","bl1","bl2","bl3","bl4","bl5","bl6","bl7","th","tl","wh","wl","ah0","ah1","ah2","ah3","ah4","ah5","ah6","ah7","al0","al1","al2","al3","al4","al5","al6","al7","HMAC","pad","inner","outer","keyhash","update","digest","Sha512$2","enc","inputBuf","formatInput","full","resultBuf","HMAC$3","mod","__toBinary","bytes2","i2","c0","c1","c2","c3","exports2","module2","compiled","WebAssembly","Module","wasm","imports","debug","int","log_tee","Instance","head","freeList","sha512Wasm","SHA512_BYTES","finalized","digestLength","pointer","_memory","_realloc","grow","ceil","Sha512$1","base","roundUp","paddingStart","WASM","WASM_SUPPORTED","ready","HMAC$2","js","Proto","sha512Universal","SUPPORTED","WASM_LOADED","sha512UniversalModule","crypto_auth_1","crypto_auth_BYTES","crypto_auth_KEYBYTES","crypto_auth","out0","hmac","crypto_auth_verify","correct","Uint16Array","crypto_hash_sha512","crypto_hash_1","crypto_hash","crypto_hash_sha512_BYTES","crypto_hash_BYTES","gf","Float64Array","_9","gf0","gf1","_121665","D","D2","X","Y","I","M","t0","t1","t2","t3","t4","t5","t6","t7","t8","t9","t10","t11","t12","t13","t14","t15","t16","t17","t18","t19","t20","t21","t22","t23","t24","t25","t26","t27","t28","t29","t30","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","b10","b11","b12","b13","b14","b15","S","sel25519","q","car25519","ed25519","A","Z","pack25519","unpack25519","inv25519","crypto_scalarmult_1","crypto_scalarmult","crypto_scalarmult_base","crypto_scalarmult_BYTES","crypto_scalarmult_SCALARBYTES","z","x32","x16","wasmPromise","require_blake2b","__commonJS","compile","blake2b","instantiate","blake2bWasm","Blake2b","BYTES_MIN","BYTES_MAX","BYTES","KEYBYTES_MIN","KEYBYTES_MAX","KEYBYTES","SALTBYTES","PERSONALBYTES","salt","personal","blake2b_init","blake2b_update","blake2b_final","Blake2b$1","final","getPartialHash","setPartialHash","ph","b2wasm","ADD64AA","o0","o1","ADD64AC","B2B_GET32","B2B_G","ix","iy","x0","x1","y0","y1","xor0","xor1","BLAKE2B_IV32","Uint32Array","SIGMA82","blake2bCompress","ctx","parameter_block","outlen","blake2bUpdate","toHex","blake2bFinal","blake2bModule","blake2b$1","crypto_generichash_PRIMITIVE","crypto_generichash_BYTES_MIN","crypto_generichash_BYTES_MAX","crypto_generichash_BYTES","crypto_generichash_KEYBYTES_MIN","crypto_generichash_KEYBYTES_MAX","crypto_generichash_KEYBYTES","crypto_generichash_WASM_SUPPORTED","crypto_generichash_WASM_LOADED","crypto_generichash","crypto_generichash_ready","crypto_generichash_batch","inputArray","crypto_generichash_instance","xsalsa20","require_xsalsa20","SIGMA","top","free","xsalsa20_1","XSalsa20","nonce","_xor","Fallback","_pointer","_nonce","_key","_overflow","_s","_z","core_hsalsa20","core_salsa20","u","j0","j1","j2","j3","j4","j5","j6","j7","j8","j9","j10","j11","j12","j13","j14","j15","x2","x3","x4","x5","x6","x7","x8","x9","x10","x11","x12","x13","x14","x15","NONCEBYTES","finalize","realloc","xsalsa20_xor","mpos","cpos","XOR","_instance","crypto_stream_KEYBYTES","crypto_stream_NONCEBYTES","crypto_stream_PRIMITIVE","crypto_stream_xsalsa20_MESSAGEBYTES_MAX","MAX_SAFE_INTEGER","crypto_stream","crypto_stream_xor","xor","crypto_stream_xor_instance","inp","poly1305","leftover","fin","blocks","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","hibit","h0","h1","h2","h3","h4","h5","h6","h7","h8","h9","r0","r1","r2","r3","r4","r5","r6","r7","r8","r9","finish","mac","macpos","mask","g","want","poly1305_1","Poly1305","crypto_onetimeauth_1","crypto_onetimeauth","crypto_onetimeauth_verify","crypto_onetimeauth_BYTES","crypto_onetimeauth_KEYBYTES","crypto_onetimeauth_PRIMITIVE","crypto_secretbox_KEYBYTES","crypto_secretbox_NONCEBYTES","crypto_secretbox_ZEROBYTES","crypto_secretbox_BOXZEROBYTES","crypto_secretbox_1","crypto_secretbox","crypto_secretbox_open","crypto_secretbox_detached","crypto_secretbox_easy","crypto_secretbox_open_detached","crypto_secretbox_open_easy","crypto_secretbox_MACBYTES","mlen","box","crypto_box_PUBLICKEYBYTES","crypto_box_SECRETKEYBYTES","crypto_box_MACBYTES","crypto_box_MESSAGEBYTES_MAX","crypto_box","crypto_box_easy","pk","sk","crypto_box_detached","crypto_box_open_easy","crypto_box_open_detached","crypto_box_keypair","crypto_box_seed_keypair","seed","crypto_box_seal","epk","esk","zero","cleanup","crypto_box_seal_open","crypto_box_NONCEBYTES","crypto_box_ZEROBYTES","crypto_box_BOXZEROBYTES","crypto_box_SEALBYTES","crypto_box_SEEDBYTES","crypto_box_BEFORENMBYTES","crypto_box_beforenm","crypto_box_detached_afternm","crypto_box_open_detached_afternm","sha256$2","Sha256","SHA256_BYTES","sha256","expand","words","maj","s0","T1","bswap","round","load","Sha256$1","setUint32","HMAC$1","require_sha256","sha256Wasm","sha256Universal","sha256UniversalModule","crypto_hash_sha256_1","crypto_hash_sha256","crypto_hash_sha256_BYTES","crypto_kdf_PRIMITIVE","crypto_kdf_BYTES_MIN","crypto_kdf_BYTES_MAX","crypto_kdf_CONTEXTBYTES","crypto_kdf_KEYBYTES","crypto_kdf_derive_from_key","subkey","subkey_id","ctx_padded","dest","STORE64_LE","crypto_kdf_keygen","crypto_kx","crypto_kx_keypair","crypto_kx_seed_keypair","crypto_kx_SEEDBYTES","crypto_kx_SECRETKEYBYTES","crypto_kx_PUBLICKEYBYTES","chacha20Universal","Chacha20","constant","counter","chacha20Block","ws","QR","rotl","keyStream","crypto_stream_chacha20_KEYBYTES","crypto_stream_chacha20_NONCEBYTES","crypto_stream_chacha20_MESSAGEBYTES_MAX","crypto_stream_chacha20_ietf_KEYBYTES","crypto_stream_chacha20_ietf_NONCEBYTES","crypto_stream_chacha20_ietf_MESSAGEBYTES_MAX","crypto_stream_chacha20","crypto_stream_chacha20_xor","crypto_stream_chacha20_xor_ic","ic","crypto_stream_chacha20_xor_instance","crypto_stream_chacha20_ietf","crypto_stream_chacha20_ietf_xor","crypto_stream_chacha20_ietf_xor_ic","crypto_stream_chacha20_ietf_xor_instance","crypto_aead_chacha20poly1305_ietf_ABYTES","crypto_aead_chacha20poly1305_ietf_MESSAGEBYTES_MAX","_pad0","crypto_aead_chacha20poly1305_ietf_encrypt_detached","ad","nsec","npub","block0","slen","poly","write64LE","crypto_aead_chacha20poly1305_ietf_decrypt_detached","computed_mac","crypto_aead","crypto_aead_chacha20poly1305_ietf_encrypt","crypto_aead_chacha20poly1305_ietf_decrypt","crypto_aead_chacha20poly1305_ietf_KEYBYTES","crypto_aead_chacha20poly1305_ietf_NPUBBYTES","crypto_aead_chacha20poly1305_ietf_NSECBYTES","fallback_1","mi","k0","_get_int","k1","v0","v2","v1","v3","mp","ml","ml7","_compress","_add","rl","a2","_rotl","_rotl32","al","require_siphash24","siphash24","fallback","siphash24_1","siphash","crypto_shorthash","crypto_shorthash_PRIMITIVE","crypto_shorthash_BYTES","crypto_shorthash_KEYBYTES","crypto_shorthash_WASM_SUPPORTED","crypto_shorthash_WASM_LOADED","crypto_sign_BYTES","crypto_sign_1","crypto_sign_keypair","crypto_sign_seed_keypair","crypto_sign","crypto_sign_detached","sig","sm","crypto_sign_open","crypto_sign_verify_detached","crypto_sign_PUBLICKEYBYTES","crypto_sign_SECRETKEYBYTES","crypto_sign_SEEDBYTES","crypto_sign_ed25519_PUBLICKEYBYTES","crypto_sign_ed25519_SECRETKEYBYTES","crypto_sign_ed25519_SEEDBYTES","crypto_sign_ed25519_BYTES","crypto_sign_ed25519_pk_to_curve25519","x25519_pk","ed25519_pk","one_minus_y","bad_points","isSmallOrder","unpackneg","pl","scalarmult","L","ed25519_mul_l","ed25519_is_on_main_subgroup","crypto_sign_ed25519_sk_to_curve25519","curveSk","edSk","crypto_sign_ed25519_sk_to_pk","pack","set25519","cswap","tx","ty","zi","par25519","scalarbase","seeded","modL","carry","smlen","chk","den","den2","den4","den6","pow2523","neq25519","submodule","forEach","require$$10","require$$13","require$$14","require$$15","require$$16","require$$17","require$$18","inspectSymbol","BLOCK_SYMBOL","FEED_SYMBOL","GENESIS","picofeed","PicoFeed","MAX_FEED_SIZE","INITIAL_FEED_SIZE","PICKLE","KEY","BLOCK","KEY_SIZE","SIGNATURE_SIZE","COUNTER_SIZE","META_SIZE","opts","tail","_hasGenisis","_keychain","_cache","_MAX_FEED_SIZE","maxSize","initialSize","partial","_isDirty","descriptor","mapBlock","_reIndex","force","_index","_appendKey","_ensureMinimumCapacity","_appendBlock","chunk","nbuf","_ensureKey","desc","keyId","toArray","block","append","metaSz","pBlock","dataSize","newEnd","requestedSize","bytesOverflow","header","body","parentSig","dat","verify","clearCache","blockIdx","_clearCache","ktok","KEY_SZ","prevSig","keyIdx","findIndex","id","seq","valid","pickle","encodeURIComponent","kToken","bToken","itr","fact","b2ub","noKeys","_unpack","pToken","pickleOffset","kM","bM","processChunk","decodeURIComponent","ub2b","truncate","toLength","_steal","other","_robbed","merge","indexCallback","forceCopy","interactiveMode","userValidate","rebase","blocksIterator","mutated","attemptReverseMerge","_reverseMergeFlag","sanityCheck","_compare","counters","iterators","eof","step","chain","fastForward","mkErr","text","idxA","idxB","noLog","widths","utf","row","isGenesis","trimEnd","lines","cell","padEnd","isFeed","feed","bodySize","SIG_N","COUNT_N","HDR_N","mapper","safeEnd","Feed","REPO_SYMBOL","mkKey","srcEnd","picorepo","strategy","_db","allowDetached","_strategies","ptr","_getTag","prevKey","chainId","readBlock","_chainLoad","stopCallback","tip","loadFeed","blocksWritten","owner","_traceOwnerOf","author","_hasBlock","bumpHead","writeBlock","_setHeadPtr","_setLatestPtr","_getHeadPtr","isAncestor","parentBlock","_queryUserStrategy","inlineStrategy","_getLatestPtr","after","abortAfter","fromBlockArray","stopHit","evicted","loadHead","relocate","latest","isFeedPurged","headOf","tailOf","_getTailPtr","latestOf","chainload","ownerOf","bkey","_listRange","query","currentStructures","srcString","bundledStrings","referenceMap","dataView","currentUnpackr","srcStringStart","srcStringEnd","currentExtensions","defaultOptions","useRecords","mapsAsObjects","C1Type","C1","sequentialMode","inlineObjectReadThreshold","Unpackr","sequential","trusted","structures","maxSharedStructures","sharedLength","getStructures","uninitialized","unpack","saveState","clearSource","checkedRead","unpackMultiple","lastPosition","defaultUnpackr","_mergeStructures","loadedStructures","existingStructures","structure","isShared","highByte","restoreStructures","randomAccessStructure","postBundlePosition","startsWith","incomplete","token","loadStructures","createStructureReader","object","readKey","freezeData","shortStringInJS","longStringInJS","readFixedString","position1","position0","readBin","getUint16","readExt","getFloat32","useFloat32","multiplier","mult10","getFloat64","int64AsNumber","getBigUint64","getInt8","getInt16","getInt32","getBigInt64","recordDefinition","extension","noBuffer","readString8","readString16","readString32","readArray","readMap","validName","firstId","readObject","createSecondByteReader","read0","readStringJS","byte1","byte2","byte3","unit","readOnlyJSString","copyBuffers","readPosition","keyCache","checkPosition","existingStructure","refEntry","targetProperties","used","typedArrays","typeCode","typedArrayName","RegExp","TEMP_BUNDLE","savedSrcEnd","savedPosition","savedSrcStringStart","savedSrcStringEnd","savedSrcString","savedReferenceMap","savedBundledStrings","savedSrc","savedStructures","savedStructuresContents","savedPackr","savedSequentialMode","dataPosition","Date","Decoder","FLOAT32_OPTIONS","NEVER","ALWAYS","DECIMAL_ROUND","DECIMAL_FIT","extensions","extensionClasses","f32Array","Float32Array","u8Array","hasNodeBuffer","ByteArrayAllocate","ByteArray","MAX_BUFFER_SIZE","keysTarget","targetView","hasNonLatin","RECORD_SYMBOL","Packr","hasSharedUpdate","encodeUtf8","written","packr","isSequential","hasSharedStructures","saveStructures","structuredClone","moreTypes","maxOwnStructures","useTwoByteRecords","sharedLimitId","maxStructureId","recordIdsToRemove","transitionsCount","serializationsSinceTransitionRebuild","encodeOptions","bundleStrings","transitions","nextTransition","transition","lastNamedStructuresLength","nextId","writeStruct","writeBundles","idsToInsert","makeRoom","serialized","distanceToMove","lastEnd","sort","insertIds","REUSE_BUFFER_MODE","returnBuffer","newSharedData","isCompatible","RESET_BUFFER_MODE","headerSize","strLength","extStart","maxBytes","setUint16","twoByte","strPosition","setInt16","setInt32","xShifted","setFloat32","setFloat64","referee","writeObject","entryValue","currentTarget","currentTargetView","currentPosition","writeExtensionData","setBigInt64","setBigUint64","largeBigIntToFloat","encodeUndefinedAsNil","writeFunction","variableMapSize","safePrototype","objectOffset","progressiveRecords","wroteKeys","lastTransition","newTransitions","newRecord","insertNewRecord","recordId","__keys__","newSize","newBuffer","shouldShareStructure","nextOwnId","insertionOffset","mainTarget","mainPosition","mainSafeEnd","mainStart","keysPosition","insertionPosition","newPosition","writeStructSlots","notifySharedUpdate","useBuffer","clearSharedData","typedStructs","writeExtBuffer","typedArray","allocateForWrite","writeBuffer","writeStrings","date","seconds","getTime","useTimestamp32","getMilliseconds","onInvalidDate","regex","defaultPackr","Encoder","decodeIter","bufferIterator","unpackr","parser","yields","encodeIter","objectIterator","packIterSync","packIterAsync","Class","unpackAddExtension","float32Number","PicoRepo","STRUCTS","picostore","mergeStrategy","repo","isRepo","SparseBlockCache","_strategy","_stores","_loaded","_mutex","_tap","_packr","mutexTimeout","current","release","fail","timeoutError","register","initialValue","validator","reducer","trap","observers","_waitLock","readReg","writeReg","_decodeValue","patch","loud","_dispatch","local","resolveFeed","bwd","fwd","tags","HEAD","CHAIN","diff","modified","root","_first","it","nMerged","accepted","validationError","_mutateState","_notifyObservers","dryMerge","stores","merged","interrupts","signal","_commitHead","payload","_encodeValue","feeds","listFeeds","part","mods","observer","hotswap","reload","refs","_writeBlock","backward","delRefs","delBlocks","segments","_readBlock","ignore404","cachedSetTimeout","cachedClearTimeout","process","browserModule","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","run","marker","runClearTimeout","Item","title","env","argv","versions","binding","cwd","chdir","umask","plural","msAbs","isPlural","match","exec","parseFloat","long","fmtLong","fmtShort","createDebug","namespace","prevTime","namespacesCache","enabledCache","enableOverride","enabled","self","curr","coerce","formatter","formatters","formatArgs","useColors","color","selectColor","extend","namespaces","delimiter","newDebug","toNamespace","regexp","default","disable","names","skips","enable","save","humanize","colors","lastC","storage","setItem","removeItem","getItem","DEBUG","__nwjs","navigator","userAgent","document","documentElement","style","WebkitAppearance","firebug","exception","$1","localStorage","localstorage","PLUG_SYMBOL","picoWire","MESSAGE_TIMEOUT","aOpened","bOpened","mkPlug","castA","setCastA","abortCastA","unpromise","castB","setCastB","abortCastB","broadcastsExported","$closed","setClosed","isA","plug","onmessage","opened","cast","isActive","Recurser","scope","isClosed","isPlug","spliceWires","tearDown","replyExpected","tag","$scope","setScope","abortScope","unpromiseTimeout","reply","stitch","_unpctr","_active","$p","active","unpromiseD","NETWORK_TIMEOUT","encodingTransformer","down","up","onclose","_nodes","_afterRemove","createWire","externalOnOpen","hubEnd","looseEnd","broadcast","antiLeakTimer","_filterNodes","race","abortSurvey","survey","responses","simpleWire","onopen","streamWire","duplexStream","routingTable","txBuffer","streamSend","onStreamReceive","closeStream","dstPort","srcPort","replyTo","timer","registerCallback","packetSize","hyperWire","hyperStream","extensionId","channel","onextension","sendExt","jsonTransformer","messageIterator","wire","pBuffer","rBuffer","send","Hub","simpleRpc","handlers","nodeId","random","_controller","hub","_ondisconnect","$n","_setConnections","$connections","spawnWire","encodeMsg","decodeMsg","onconnect","ondisconnect","node","_downloadFeeds","onblocks","shareBlocks","onquery","_uploadFeeds","typeOfMsg","params","Repo","Store","SimpleRPC","KEY_SK","SimplePicoKernel","_secret","secret","rpc","peer","__loading","signPair","_checkReady","decodeBlock","loudFail","dispatch","branch","createBlock","encodeBlock","heads","listHeads","SimpleKernel","picostack","VIBE_REJECTED","PASS_TURN","typeOfBlock","H","util","KEY_BOX_LIKES_PK","KEY_BOX_LIKES_SK","TYPE_PROFILE","TYPE_VIBE","TYPE_VIBE_RESP","TYPE_MESSAGE","TYPE_BYE","TYPE_BYE_RESP","TYPE_ITEMS","TYPE_ACTIVATE","EV_CHAT_END","EV_BALANCE_DEBIT","EV_BALANCE_CREDIT","EV_ADD_SCORE","PEACE","LOVE","UNDERSTANDING","G_M","G_F","G_NB","G_R","GEO_BITS","fixJsonBuffers","boxPair","seal","unseal","succ","bufferReplacer","btok","ktob","blockToGlyph","white","content","rewrite","rules","game","feedToGraph","graph","wk","scoreGraph","glyph","config","profile_timeout","vibe_timeout","vibe_response_timeout","chat_timeout","now","ACTIVE","PENDING","LOCKED","EXPIRED","TTL","mkProfile","picture","tagline","sex","expiresAt","balance","score","validateProfile","containsURL","age","peers_reg","schedule","strkey","chat","chats","trs","amount","ProfileCtrl","pubKeyGetter","peerId","peers","rootPeer","cid","stateOfPeer","vibes","pid","seen","matches","RESP_TTL","mkMatch","chatId","response","updatedAt","remoteBox","vibes_reg","vibeTTL","_sk","_pk","_reduceHasRun","ttl","setKeys","_peerId","own","parentType","vibe","rejected","createdAt","decrypted","chats_reg","ChatTimeout","blockReward","BlockReward","health","InitialHealth","regenerate","RegenerateAmount","stats","nextAuthor","mLength","indexKey","messages","hp","aEnd","bEnd","mkChat","authorId","lastSeen","nMessages","nExhausted","nPassed","nEnded","nStarted","blockSize","hpRegenerated","mkStats","turnPassed","isSent","pass","gesture","aStat","bStat","GROUPS","ITEMS","_names","exportName","istr","toUpperCase","line","short","image","group","time","price","irlPrice","items_db","WATER","transactions","Transactions","ACTION_NETWORK_PURCHASE","quantity","isPositiveInteger","ACTION_OFFER","ACTION_ATTACHMENT","validate","BARPK","initInv","initSlot","inv","qty","activatedAt","deactivatedAt","onPickup","inv_reg","InventorySlice","hasBarItems","slot","tname","TransactionsSlice","ta","sourcePid","sum","black","consumable","unpackValue","ERR_PEER_NOT_FOUND","errorMessage","PEER_PLACEHOLDER","computeProfile","extraTime","pid2","inventory","hasBadge","toPublicKey","peers_modModule","setHasProfile","hasProfile","__setHasProfile","profile","_vibeBox","_vibeController","updateProfile","$peer","_peer","$profile","$peers","peerMap","$chats","$loaded","boot","peers_mod","joinPeer","initiator","_readReg","profileOf","computeVibe","remoteRejected","localRejected","myTurn","initVibe","C_FG","tails","listTails","listLatest","feedHeads","listFeedHeads","makeBlockLabel","blockLabel","hx8","nodes","edges","chains","orphaned","nChains","nBlocks","nBytesContent","isOrphan","label","link","blockId","dotOpts","orphanBlock","bs","dot","dump","filename","writeFileSync","space","fmt","dumpDot","bq","tokens","PeerCtrl","VibeCtrl","ConversationCtrl","ChatModule","$vibes","$chat","localPair","_send","_getRemoteChatKey","_setMessageBody","bye","loadChat","_vibe","lChat","_getLocalChatKey","_getMessageBody","_tracePath","BufferedRegistry","msgBox","vLength","_writeReg","GarbageCollector","sliceName","sz","packValue","_originalReducer","collectGarbage","startGC","interval","setInterval","_collectGarbage","stopGC","clearInterval","tickQuery","sweep","gcType","rootState","didMutate","drop","segmentId","rollback","hasExpired","isSelf","PeersModule","VibesModule","ckey","respondVibe","$cooldowns","cd","canVibe","sealedMessage","_storeLocalChatKey","like","$vibe","toChatId","_vibes","sent","MonitorModule","InventoryModule","DumpModule","give","ts","buy","blockend","nLoaded","loadLatest","binstr","cap","roundByte","countTrailingZeroes","countOnes","proximityOf","bitAt","mapOverlap","registers","outputs","reg","bitIdx","byteIdx","packGeo","GHSUNMAP","unpackGeo","gammaShift","N","log2","gammaUnshift","dGapEncode","decodeSL","geoPrecision","setBit","nc","GHSMAP","cpy","SIGN_SKBYTES","SIGN_PKBYTES","DEFAULT_SIGN","DEFAULT_PROFILE","Keychain","alias","gender","maxTries","generateAnonymous","prayFor","keychain","global$1","blank_object","run_all","fns","is_function","thing","safe_not_equal","src_url_equal_anchor","current_component","src_url_equal","element_src","url","createElement","href","subscribe","unsubscribe","get_store_value","component_subscribe","component","$$","on_destroy","create_slot","definition","$$scope","slot_ctx","get_slot_context","tar","get_slot_changes","lets","update_slot_base","slot_definition","slot_changes","get_slot_context_fn","slot_context","get_all_dirty_from_scope","null_to_empty","set_store_value","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","element","svg_element","createElementNS","createTextNode","listen","event","prevent_default","preventDefault","stop_propagation","attr","attribute","removeAttribute","getAttribute","setAttribute","set_custom_element_data","set_data","wholeText","set_input_value","set_style","important","removeProperty","setProperty","toggle_class","toggle","classList","HtmlTag","is_svg","html","nodeName","innerHTML","childNodes","set_current_component","get_current_component","onMount","on_mount","createEventDispatcher","detail","cancelable","bubbles","createEvent","initCustomEvent","custom_event","defaultPrevented","bubble","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","update_scheduled","add_render_callback","add_flush_callback","seen_callbacks","flushidx","flush","saved_component","fragment","before_update","after_update","outroing","outros","group_outros","check_outros","transition_in","transition_out","handle_promise","child_ctx","needs_flush","mount","hasCatch","update_await_block_branch","globals","create_component","mount_component","customElement","new_on_destroy","destroy_component","make_dirty","instance","create_fragment","not_equal","append_styles","parent_component","on_disconnect","skip_bound","rest","hydrate","children","intro","SvelteComponent","$destroy","$on","$set","$$props","$$set","subscriber_queue","readable","stop","subscribers","new_value","run_queue","subscriber","invalidate","derived","initial_value","single","stores_array","auto","inited","unsubscribers","Modem56","svlt","dbg","ROOT_DB","kernel","Kernel","keygen","geo","attempts","generate","decodePk","ll","Profile","Vibes","tryBoot","$kstate","setKstate","$error","setError","$entered","setEntered","$swarming","setSwarming","$hasKey","setHasKey","$hasProfile","$profilePicture","setProfilePicture","$state","hasKey","entered","swarming","profilePicture","readIdentity","readProfile","pTemplate","autoSwarm","connectSwarm","navigate","Chat","$initiator","setInitiator","$turn","setTurn","$msgs","msgs","remote","mockChat","modem","decodeImage","purge","purgeKeychain","confirm","saveBackup","File","URL","createObjectURL","action_result","dialog","attr_action","updateAttribute","updated","elem","$$value","setAttributeNS","svg","use","nofill","ref","classes","qrcode","typeNumber","errorCorrectionLevel","_typeNumber","_errorCorrectionLevel","QRErrorCorrectionLevel","_modules","_moduleCount","_dataCache","_dataList","_this","makeImpl","maskPattern","moduleCount","modules","col","setupPositionProbePattern","setupPositionAdjustPattern","setupTimingPattern","setupTypeInfo","setupTypeNumber","createData","mapData","QRUtil","getPatternPosition","getBCHTypeNumber","getBCHTypeInfo","inc","bitIndex","byteIndex","maskFunc","getMaskFunction","dark","dataList","rsBlocks","QRRSBlock","getRSBlocks","qrBitBuffer","getMode","getLength","getLengthInBits","totalDataCount","dataCount","putBit","maxDcCount","maxEcCount","dcdata","ecdata","dcCount","ecCount","totalCount","getBuffer","rsPoly","getErrorCorrectPolynomial","modPoly","qrPolynomial","modIndex","getAt","totalCodeCount","createBytes","addData","newData","qrNumber","qrAlphaNum","qr8BitByte","qrKanji","isDark","getModuleCount","make","minLostPoint","pattern","lostPoint","getLostPoint","getBestMaskPattern","createTableTag","cellSize","margin","qrHtml","createSvgTag","alt","mr","rect","qrSvg","scalable","escapeXml","createDataURL","createImgTag","img","escaped","createASCII","blocksLastLineNoMargin","_createHalfASCII","renderTo2dContext","fillStyle","fillRect","stringToBytes","stringToBytesFuncs","createStringToBytes","unicodeData","numChars","unicodeMap","bin","base64DecodeInputStream","unknownChar","PATTERN_POSITION_TABLE","G15","G18","getBCHDigit","QRMode","Q","QRMaskPattern","digit","errorCorrectLength","multiply","QRMath","gexp","sameCount","darkCount","EXP_TABLE","LOG_TABLE","_num","glog","ratio","RS_BLOCK_TABLE","qrRSBlock","rsBlock","getRsBlockTable","_buffer","_length","bufIndex","_mode","_data","strToNum","chatToNum","getCode","_bytes","byteArrayOutputStream","writeByte","_str","_pos","_buflen","width","height","getPixel","gif","_width","_height","pixel","writeString","writeShort","raster","getLZWRaster","writeBytes","lzwMinCodeSize","clearCode","endCode","bitLength","lzwTable","_out","_bitLength","_bitBuffer","byteOut","bitOut","dataIndex","_map","_size","gifImage","setPixel","_base64","writeEncoded","padlen","base64EncodeOutputStream","charcode","toUTF8Array","pico_qr","imgElem","level","paint","qr","t2_value","div","danger","create_if_block_6","if_block1","create_if_block_5","create_if_block_4","div0","div2","div1","button","progress_1","disabled","button_disabled_value","a0","a1","article","textarea","footer","validateImport","create_if_block_2","create_if_block_1","create_if_block","keygen_view","h50","fieldset","input0","label0","input1","label1","input2","label2","br0","h51","idsqr_1","small","br1","progress","unlucky","fails","showImportDialog","importInput","showAboutDialog","roll","$secret","$progress","$unlucky","pair","$gender","$geohash","writeIdentity","storeIdentity","$fails","$showAboutDialog","__value","$showImportDialog","$importInput","cart","cartSum","cartQty","addCart","setQty","delCart","$cart","$","weekdays","months","utcOffset","year","month","O","locale","$L","utc","$u","$x","$offset","$d","UTC","$y","getFullYear","$M","getMonth","$D","getDate","$W","getDay","$H","getHours","$m","getMinutes","$s","getSeconds","$ms","$utils","isValid","isSame","startOf","endOf","isAfter","isBefore","$g","unix","toDate","$locale","weekStart","daysInMonth","subtract","invalidDate","meridiem","YY","YYYY","MM","MMM","monthsShort","MMMM","DD","dd","weekdaysMin","ddd","weekdaysShort","dddd","HH","mm","ss","SSS","getTimezoneOffset","toISOString","toUTCString","T","$i","isDayjs","en","Ls","t_value","dayjs","duration","raw_value","html_tag","intervalId","timeLeft","$timeLeft","millis","constants","areaConversion","timeConversion","distanceConversion","altitudeKeys","latitudeKeys","longitudeKeys","MINLON","MAXLAT","MINLAT","earthRadius","sexagesimalPattern","MAXLON","km","cm","ft","in","yd","m2","km2","ha","ft2","yd2","in2","sqm","sqkm","sqft","sqyd","sqin","getCoordinateKey_1","_default","point","keysToLookup","foundKey","isDecimal_1","checkedValue","isSexagesimal_1","_constants","sexagesimalToDecimal_1","sexagesimal","sec","decimal","getCoordinateKeys_1","_getCoordinateKey","__esModule","enumerableOnly","symbols","getOwnPropertyDescriptor","_objectSpread","_defineProperty","getOwnPropertyDescriptors","defineProperties","longitude","latitude","altitude","isValidLatitude_1","_isDecimal","_interopRequireDefault","_isSexagesimal","_sexagesimalToDecimal","isValidLatitude","isValidLongitude_1","isValidLongitude","isValidCoordinate_1","_getCoordinateKeys2","_isValidLatitude","_isValidLongitude","_getCoordinateKeys","toDecimal_1","_isValidCoordinate","toDecimal","getLatitude_1","_toDecimal","raw","latKey","getLongitude_1","toRad_1","PI","toDeg_1","computeDestinationPoint_1","_getLatitude","_getLongitude","_toRad","_toDeg","distance","bearing","radius","lng","delta","theta","phi1","lambda1","phi2","asin","sin","cos","lambda2","atan2","convertArea_1","squareMeters","targetUnit","factor","convertDistance_1","meters","convertSpeed_1","metersPerSecond","_slicedToArray","_arrayWithHoles","_n","_d","_e","_i","_iterableToArrayLimit","minLen","_arrayLikeToArray","_unsupportedIterableToArray","_nonIterableRest","arr2","decimalToSexagesimal","_decimal$toString$spl2","pre","post","deg","min0","sec0","number","decimals","imprecise","_sec$split2","secPreDec","_sec$split2$","secDec","robustAcos_1","getDistance_1","_robustAcos","to","accuracy","fromLat","fromLon","toLat","toLon","acos","orderByDistance_1","_getDistance","coords","distanceFn","findNearest_1","_orderByDistance","getAreaOfPolygon_1","points","area","lowerIndex","middleIndex","upperIndex","p1lon","p2lat","p3lon","getBounds_1","maxLat","minLat","maxLng","minLng","getBoundsOfDistance_1","minLon","maxLon","radLat","radLon","radDist","MAX_LAT_RAD","MIN_LAT_RAD","MAX_LON_RAD","MIN_LON_RAD","deltaLon","getCenter_1","numberOfPoints","pointLat","pointLon","sqrt","getCenterOfBounds_1","_getBounds","getRhumbLineBearing_1","origin","diffLon","diffPhi","tan","getCompassDirection_1","_getRhumbLineBearing","bearingFn","getDistanceFromLine_1","lineStart","lineEnd","alpha","beta","getGreatCircleBearing_1","destLat","detLon","originLat","originLon","getPathLength_1","_typeof","getPreciseDistance","cosSigma","sigma","sinAlpha","cosSqAlpha","cos2SigmaM","sinSigma","lambdaP","startLat","startLon","endLat","endLon","ellipsoidParams","U1","atan","U2","sinU1","cosU1","sinU2","cosU2","lambda","iterLimit","sinLambda","cosLambda","C","uSq","B","deltaSigma","getRoughCompassDirection_1","exact","getSpeed_1","isPointInLine_1","isPointInPolygon_1","polygon","isInside","totalPolys","isPointNearLine_1","_getDistanceFromLine","isPointWithinRadius_1","center","wktToPolygon_1","wkt","coordText","_coordText$split2","img_src_value","_exportNames","computeDestinationPoint","convertArea","convertDistance","convertSpeed","findNearest","getAreaOfPolygon","getBounds","getBoundsOfDistance","getCenter","getCenterOfBounds","getCompassDirection","getCoordinateKey","getCoordinateKeys","getDistance","getDistanceFromLine","getGreatCircleBearing","getLatitude","getLongitude","getPathLength","getRhumbLineBearing","getRoughCompassDirection","getSpeed","isDecimal","isPointInLine","isPointInPolygon","isPointNearLine","isPointWithinRadius","isSexagesimal","isValidCoordinate","orderByDistance","sexagesimalToDecimal","toRad","toDeg","wktToPolygon","_computeDestinationPoint","_convertArea","_convertDistance","_convertSpeed","_decimalToSexagesimal","_findNearest","_getAreaOfPolygon","_getBoundsOfDistance","_getCenter","_getCenterOfBounds","_getCompassDirection","_getGreatCircleBearing","_getPathLength","_getPreciseDistance","_getRoughCompassDirection","_getSpeed","_isPointInLine","_isPointInPolygon","_isPointNearLine","_isPointWithinRadius","_wktToPolygon","require$$19","require$$20","require$$21","require$$22","require$$23","require$$24","require$$25","require$$26","require$$27","require$$28","require$$29","require$$30","require$$31","require$$32","require$$33","require$$34","require$$35","require$$36","require$$37","require$$38","require$$39","t1_value","dot_class_value","dot_data_tooltip_value","binaryimage","BinaryImage","legend","overlay","h20","h21","binaryimage_changes","item_1","category","emo","t0_value","backdrop","item_input","select","$pop","$$invalidate","timer_changes","strong","sup","h60","fieldset0","fieldset1","fieldset2","h61","label3","span","t4_value","t8_value","if_block0","div3","br","h62","t7_value","pub_view","p0","p1","peers_1","each_blocks","cooldowns","showFiltersDialog","inspectPeer","activeVibe","vs","attachment","availableAttachments","soulbound","sendVibe","$attachment","$showFiltersDialog","$inspectPeer","$activeVibe","getCropSize","imgWidth","imgHeight","aspect","restrictPosition","imageSize","cropSize","zoom","restrictPositionCoord","maxPosition","getDistanceBetweenPoints","pointA","pointB","limitArea","shouldRound","noOp","crop","minZoom","maxZoom","cropShape","showGrid","zoomSpeed","crossOrigin","cropperSize","naturalWidth","naturalHeight","containerEl","containerRect","imgEl","dragStartPosition","dragStartCrop","lastPinchDistance","rafDragTimeout","rafZoomTimeout","onImgLoad","cleanEvents","onMouseMove","onDragStopped","onTouchMove","computeSizes","emitCropData","helpers.getCropSize","getBoundingClientRect","getMousePoint","clientX","clientY","getTouchPoint","touch","onDrag","touches","onPinchMove","onDragStart","cancelAnimationFrame","requestAnimationFrame","offsetX","offsetY","requestedPosition","helpers.restrictPosition","onPinchStart","helpers.getDistanceBetweenPoints","helpers.getCenter","setNewZoom","newZoom","zoomPoint","left","getPointOnContainer","zoomTarget","getPointOnImage","croppedAreaPercentages","croppedAreaPixels","imgSize","limitAreaFn","widthInPixels","heightInPixels","sizePixels","helpers.computeCroppedArea","percent","pixels","deltaY","canvas","image_loader","canvasElement","imgElement","cropURL","files","setImage","onload","drawImage","preprocessFile","file","revokeObjectURL","dataUrl","toDataURL","encodeImage","$output","getContext","blob","t3_value","ul","li0","li1","QRCode","create_if_block_3","profile_view","h52","showKeyDialog","showPreviewDialog","writeProfile","$name","$tagline","$picture","$dirty","_loading","$sk","$pk","$showPreviewDialog","$showKeyDialog","baseUri","postFeed","uri","headers","Headers","fetch","ok","redeem","sid","success","crate","getPickle","textContent","item_description","noDescription","green","t5_value","create_if_block_14","create_if_block_13","iimage","description","if_block","create_if_block_12","create_if_block_11","BADGE_ID","button1","button1_disabled_value","button0","h30","h31","create_if_block_8","create_if_block_9","t10_value","t12_value","info_1","promise_1","itemdescription","ItemDescription","itemdescription_changes","blue","create_if_block_15","each_value_3","drinks","each_value_2","gear","create_if_block_10","create_if_block_7","shop_view","splash","section","bar","h32","badge","showItem","showVerifyDialog","email","badgeStatus","requestStamp","$badgeStatus","$_waitRequestStamp","requestVerificationStamp","$email","_waitRequestStamp","checkoutPromise","showCartDialog","showDCartDialog","showRedeemDialog","waitRedeem","doRedeem","session","$waitRedeem","dCartSum","$checkoutPromise","createCheckout","$showVerifyDialog","drink","dAddCart","$showItem","charCode","$showCartDialog","dDelCart","$showDCartDialog","tint","tint_style_value","vibe_1","portrait","VIBE_TTL","messages_view","vibes_1","conversations","each_blocks_1","vibeDetail","$vibeDetail","placeholder","txt","t6_value","samp0","samp1","samp2","button0_disabled_value","button2","button2_disabled_value","each_value","chat_1","health_1","ctrls","messagesElement","inputElement","showInput","preview","path","nf","scrollTo","scrollHeight","behaviour","$showInput","focus","$line","td1","about","logo","tdata","tr0","td0","tr1","tr2","tr3","tr4","tr5","loading","imported","append_1","nId","foreign","lType","item_class_value","wallet_view","h10","h11","h12","h13","inventory_1","consume","useItem","devel_view","script","graphElem","graphviz","layout","setName","$id","setId","$q","setQ","$view","Shop","Messages","About","Keygen","Append","Wallet","Devel","Pub","routeName","setView","search","URLSearchParams","virt","pathname","searchEmpty","history","pushState","$namespaces","$open","t9_value","dev_bar","btn0","btn1","btn2","btn3","btn4","btn5","toggleTheme","round0","round1","round2","samp","round3","stat","root_class_value","main","globError","globReject","htmlTag","dataset","theme","conn","cnns","showBar","showDev","showDebugSelector","nCount","scrollingElement","enter","$showDebugSelector","years","days","hours","minutes","milliseconds","weeks","$l","negative","parseFromMilliseconds","calMilliseconds","as","fromNow","asMilliseconds","asSeconds","asMinutes","asHours","asDays","asWeeks","asMonths","asYears","isDuration"],"mappings":"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"}